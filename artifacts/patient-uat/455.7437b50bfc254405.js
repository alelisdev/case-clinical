"use strict";(self.webpackChunkpatient=self.webpackChunkpatient||[]).push([[455],{98455:(nt,K,h)=>{h.r(K),h.d(K,{PatientPagesModule:()=>oe});var F=h(95614),z=h(39646),S=h(63900),j=h(63198),D=h(84264),t=h(94650),I=h(94929),A=h(30760),V=h(60908),O=h(30144);let W=(()=>{class o extends j.V{constructor(e,i,a,u,f,m,s){var n;if(super(s),this.appointmentStore=e,this.clinicalProviderStore=i,this.clinicalProviderLocationStore=a,this.clinicalProviderLocationAvailabilityStore=u,this.route=f,this.router=m,this.currentLocationId=void 0,this.loading$=this.select(r=>r.loading),this.appointments$=this.appointmentStore.appointments$,this.providerLocationAvailabilities$=this.clinicalProviderLocationAvailabilityStore.clinicalProviderLocationAvailabilities$,this.doctor$=this.clinicalProviderStore.item$,this.currentLocation$=this.select(r=>r.currentLocation),this.today$=(0,z.of)((0,D.X$)()),this.clinicalProviderLocationAvailabilities$=this.providerLocationAvailabilities$.pipe((0,S.w)(r=>{const d=r.map((p,l)=>({id:p.id,day:p.day,start:p.startTime,end:p.endTime,data:{id:p.id,start:p.startTime,end:p.endTime,day:p.day}}));return(0,z.of)(Object.values(d))})),this.locations$=this.clinicalProviderLocationStore.clinicalProviderLocations$.pipe((0,S.w)(r=>(console.log("locations =",r),(0,z.of)(r.map(d=>{var p,l;return{id:d.id,title:null!==(l=null===(p=d?.location)||void 0===p?void 0:p.name)&&void 0!==l?l:""}}))))),this.currentLocationName$=this.locations$.pipe((0,S.w)(r=>{let d="";return r.forEach(p=>{var l;p.id==this.currentLocationId&&(d=null!==(l=p.title)&&void 0!==l?l:"")}),(0,z.of)(d)})),this.setCurrentLocation=this.updater((r,d)=>Object.assign(Object.assign({},r),{currentLocation:d})),this.vm$=this.select(this.loading$,this.appointments$,this.doctor$,this.today$,this.clinicalProviderLocationAvailabilities$,this.user$,this.currentLocation$,this.currentLocationName$,(r,d,p,l,_,C,y,P)=>({loading:r,appointments:d,doctor:p,today:l,clinicalProviderLocationAvailabilities:_,user:C,currentLocation:y,currentLocationName:P})),this.route.snapshot.paramMap.has("doctorId")){const r=null!==(n=this.route.snapshot.paramMap.get("doctorId"))&&void 0!==n?n:"";this.clinicalProviderLocationStore.setClinicalProviderId(r),this.clinicalProviderStore.loadClinicalProviderEffect(r),this.clinicalProviderLocationStore.setClinicalProviderId(r),this.patchState({clinicalProviderId:r})}else this.patchState({clinicalProviderId:""});if(this.clinicalProviderLocationStore.loadClinicalProviderLocationsEffect(),this.route.snapshot.paramMap.has("locationId")){const r=this.route.snapshot.paramMap.get("locationId");r&&(this.setCurrentLocation(r),this.locationChanged(r),this.currentLocationId=r)}this.appointmentStore.loadAppointmentsEffect()}locationChanged(e){this.clinicalProviderLocationAvailabilityStore.setClinicalProviderLocationId(e),this.clinicalProviderLocationAvailabilityStore.loadClinicalProviderLocationAvailabilitiesEffect()}onClickBook(e){console.log(e),this.patientPortalStore.setBookingItem(e),this.patientPortalStore.setClinicalProviderId(this.get().clinicalProviderId),this.router.navigate(["/checkout"])}getInitialState(){return{query:"",loading:!1,currentLocation:void 0,clinicalProviderId:void 0}}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(F.L6),t.LFG(I.D),t.LFG(A.j),t.LFG(V.R),t.LFG(O.gz),t.LFG(O.F0),t.LFG(t.zs3))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac}),o})();var et=h(3866),Y=h(17096),b=h(36895),k=h(92518);function it(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"ui-formly-json-form",1),t.NdJ("formIsReady",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.onResize())}),t.qZA()}if(2&o){const e=c.ngIf,i=t.oxw();t.Q6J("showSubmitButton",!1)("componentStore",i.store)("formData",i.getFormData(e))}}let g=(()=>{class o extends Y.U{constructor(e){super(),this.store=e,this.pageName="Booking",this.portalName="Patient",this.selectedLegalCaseId$=this.store.selectedLegalCaseId$,this.model={},this.vm$=this.store.vm$,this.locations$=this.store.locations$,this.subscriber=this.store.selectedLegalCaseId$.subscribe(i=>{this.model.legalCaseId=i})}ngOnDestroy(){var e;null===(e=this.subscriber)||void 0===e||e.unsubscribe()}getFormData(e){return Object.assign(Object.assign({},e),{pageName:this.pageName,portalName:this.portalName,locations:this.locations$})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(W))},o.\u0275cmp=t.Xpm({type:o,selectors:[["patient-bookings"]],features:[t._Bn([W,F.L6,I.D,V.R,et.v,A.j]),t.qOj],decls:2,vars:3,consts:[["class","w-full h-full","formName","page_patient_bookings",3,"showSubmitButton","componentStore","formData","formIsReady",4,"ngIf"],["formName","page_patient_bookings",1,"w-full","h-full",3,"showSubmitButton","componentStore","formData","formIsReady"]],template:function(e,i){1&e&&(t.YNc(0,it,1,3,"ui-formly-json-form",0),t.ALo(1,"async")),2&e&&t.Q6J("ngIf",t.lcZ(1,1,i.vm$))},dependencies:[b.O5,k.M,b.Ov]}),o})(),v=(()=>{class o extends j.V{constructor(e,i,a){var u;if(super(a),this.appointmentStore=e,this.route=i,this.loading$=this.select(f=>f.loading),this.booking$=this.appointmentStore.item$,this.vm$=this.select(this.loading$,this.user$,this.membership$,this.booking$,(f,m,s,n)=>({loading:f,user:m,membership:s,booking:n})),this.route.snapshot.paramMap.has("bookingId")){const f=null!==(u=this.route.snapshot.paramMap.get("bookingId"))&&void 0!==u?u:"";this.appointmentStore.loadAppointmentEffect(f)}}getInitialState(){return{query:"",loading:!1}}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(F.L6),t.LFG(O.gz),t.LFG(t.zs3))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac}),o})();function B(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"ui-formly-json-form",1),t.NdJ("formIsReady",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.onResize())}),t.qZA()}if(2&o){const e=c.ngIf,i=t.oxw();t.Q6J("showSubmitButton",!1)("model",i.model)("formData",i.getFormData(e))}}let U=(()=>{class o extends Y.U{constructor(e){super(),this.store=e,this.pageName="Booking Success",this.portalName="Patient",this.vm$=this.store.vm$,this.selectedLegalCaseId$=this.store.selectedLegalCaseId$,this.model={},this.subscriber=this.store.selectedLegalCaseId$.subscribe(i=>{this.model.legalCaseId=i})}ngOnDestroy(){var e;null===(e=this.subscriber)||void 0===e||e.unsubscribe()}getFormData(e){return Object.assign(Object.assign({},e),{pageName:this.pageName,portalName:this.portalName,memberships:this.store.memberships$})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(v))},o.\u0275cmp=t.Xpm({type:o,selectors:[["patient-booking-success"]],features:[t._Bn([v,F.L6]),t.qOj],decls:2,vars:3,consts:[["class","w-full h-full","formName","page_patient_booking_success",3,"showSubmitButton","model","formData","formIsReady",4,"ngIf"],["formName","page_patient_booking_success",1,"w-full","h-full",3,"showSubmitButton","model","formData","formIsReady"]],template:function(e,i){1&e&&(t.YNc(0,B,1,3,"ui-formly-json-form",0),t.ALo(1,"async")),2&e&&t.Q6J("ngIf",t.lcZ(1,1,i.vm$))},dependencies:[b.O5,k.M,b.Ov]}),o})();var G=h(24280),R=h(18505),st=h(4523),dt=h(1463),X=h(71873),q=h(73602);let mt=(()=>{class o extends j.V{constructor(e,i,a,u,f,m,s,n){super(n),this.router=e,this.formService=i,this.loading=a,this.toast=u,this.route=f,this.datePipe=m,this.data=s,this.locationAvalabilityId="",this.loading$=this.select(r=>r.loading),this.updatePasswordEffect=this.effect(r=>r.pipe((0,R.b)(d=>{this.patchState({loading:!0})}),(0,S.w)(d=>this.data.accountUpdatePassword({input:{currentPassword:d?.oldPassword,password:d?.newPassword,verified:d?.passConfirm}}).pipe((0,G._b)(l=>{this.toast.success("Successfully updated Password",{duration:3e3}),this.patchState({loading:!1})},l=>{this.toast.error("Failed to update Password",{duration:3e3}),this.patchState({loading:!1})}))))),this.vm$=this.select(this.loading$,this.user$,this.membership$,(r,d,p)=>({loading:r,user:d,membership:p}))}getInitialState(){return{query:"",loading:!1}}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(O.F0),t.LFG(st.o),t.LFG(dt.c),t.LFG(X.F),t.LFG(O.gz),t.LFG(b.uU),t.LFG(q.q),t.LFG(t.zs3))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac}),o})();function Ft(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"ui-formly-json-form",1),t.NdJ("save",function(a){t.CHM(e);const u=t.oxw();return t.KtG(u.store.updatePasswordEffect(a))})("formIsReady",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.onResize())}),t.qZA()}if(2&o){const e=c.ngIf,i=t.oxw();t.Q6J("showSubmitButton",!1)("componentStore",i.store)("model",i.model)("formData",i.getFormData(e))}}let Ot=(()=>{class o extends Y.U{constructor(e){super(),this.store=e,this.pageName="Change Password",this.portalName="Patient",this.selectedLegalCaseId$=this.store.selectedLegalCaseId$,this.model={},this.vm$=this.store.vm$,this.subscriber=this.store.selectedLegalCaseId$.subscribe(i=>{this.model.legalCaseId=i})}getFormData(e){return Object.assign(Object.assign({},e),{portalName:this.portalName,pageName:this.pageName,memberships:this.store.memberships$})}ngOnDestroy(){var e;null===(e=this.subscriber)||void 0===e||e.unsubscribe()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(mt))},o.\u0275cmp=t.Xpm({type:o,selectors:[["patient-change-password"]],features:[t._Bn([mt]),t.qOj],decls:2,vars:3,consts:[["class","w-full h-full","formName","page_patient_change_password",3,"showSubmitButton","componentStore","model","formData","save","formIsReady",4,"ngIf"],["formName","page_patient_change_password",1,"w-full","h-full",3,"showSubmitButton","componentStore","model","formData","save","formIsReady"]],template:function(e,i){1&e&&(t.YNc(0,Ft,1,4,"ui-formly-json-form",0),t.ALo(1,"async")),2&e&&t.Q6J("ngIf",t.lcZ(1,1,i.vm$))},dependencies:[b.O5,k.M,b.Ov]}),o})();var x=h(15439);let ut=(()=>{class o extends j.V{constructor(e,i,a,u,f,m){var s;super(m),this.router=e,this.route=i,this.appointmentFeatureStore=a,this.clinicalProviderLocationAvailabilityStore=u,this.clinicalProviderStore=f,this.locationAvalabilityId="",this.loading$=this.select(n=>n.loading),this.providerLocationAvailability$=this.clinicalProviderLocationAvailabilityStore.item$,this.doctor$=this.clinicalProviderStore.item$,this.vm$=this.select(this.loading$,this.providerLocationAvailability$,this.user$,this.bookingItem$,this.doctor$,this.membership$,(n,r,d,p,l,_)=>{var C,y,P,H,J,$,T;const{id:M,name:w,profilePictureId:E}=null!==(y=null===(C=r?.clinicalProviderLocation)||void 0===C?void 0:C.clinicalProvider)&&void 0!==y?y:{},N=this.calculateTimeDifference(null!==(P=r?.startTime)&&void 0!==P?P:"00:00",null!==(H=r?.endTime)&&void 0!==H?H:"00:00"),Q=N*(null!==(J=l?.hourlyRate)&&void 0!==J?J:0);return{loading:n,membership:_,providerLocationAvailabilityItem:r,user:d,dateAndTime:x(p.eventStartTime).toDate(),date:x(p.eventStartTime).format("MM/DD/yyyy"),time:`${r?.startTime} - ${r?.endTime}`,hours:N,location:null===(T=null===($=r?.clinicalProviderLocation)||void 0===$?void 0:$.location)||void 0===T?void 0:T.name,totalFee:Q,doctorName:w,doctorId:M,doctorRating:l?.rating,doctorhourlyRate:l?.hourlyRate,profilePictureId:E}}),this.route.snapshot.paramMap.has("locationAvalabilityId")&&(this.locationAvalabilityId=null!==(s=this.route.snapshot.paramMap.get("locationAvalabilityId"))&&void 0!==s?s:"",this.clinicalProviderLocationAvailabilityStore.loadClinicalProviderLocationAvailabilityEffect(this.locationAvalabilityId)),this.bookingItem$.subscribe(n=>{console.log(n),this.clinicalProviderLocationAvailabilityStore.loadClinicalProviderLocationAvailabilityEffect(n.id)}),this.patientPortalStore.clinicalProviderId$.subscribe(n=>{this.clinicalProviderStore.setClinicalProviderId(n??""),this.clinicalProviderStore.loadClinicalProviderEffect(n??"")})}confirmAndPay(e){this.subscriber||(this.appointmentFeatureStore.createAppointmentEffect(e),this.subscriber=this.appointmentFeatureStore.actionResult$.subscribe(({done:a,item:u})=>{a&&(this.router.navigate([`/booking/success/${u?.id}`]),this.subscriber.unsubscribe(),this.subscriber=null)}))}getInitialState(){return{query:"",loading:!1}}calculateTimeDifference(e,i){let a=e,u=i,f=a.indexOf(":");1==a.substring(0,f).length&&(a="0"+a),f=u.indexOf(":"),1==u.substring(0,f).length&&(u="0"+u);const m=new Date(`1970-01-01T${a}`),s=new Date(`1970-01-01T${u}`),n=m.getTime();return 1*(s.getTime()-n)/36e5}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(O.F0),t.LFG(O.gz),t.LFG(F.L6),t.LFG(V.R),t.LFG(I.D),t.LFG(t.zs3))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac}),o})();function wt(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"ui-formly-json-form",1),t.NdJ("save",function(a){t.CHM(e);const u=t.oxw();return t.KtG(u.store.confirmAndPayEffect(a))})("formIsReady",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.onResize())}),t.qZA()}if(2&o){const e=c.ngIf,i=t.oxw();t.Q6J("showSubmitButton",!1)("model",i.model)("formData",i.getFormData(e))("componentStore",i.store)("resetForm",!1)}}let Nt=(()=>{class o extends Y.U{constructor(e){super(),this.store=e,this.pageName="Checkout",this.portalName="Patient",this.selectedLegalCaseId$=this.store.selectedLegalCaseId$,this.model={},this.vm$=this.store.vm$,this.subscriber=this.store.selectedLegalCaseId$.subscribe(i=>{this.model.legalCaseId=i})}getFormData(e){return Object.assign(Object.assign({},e),{pageName:this.pageName,portalName:this.portalName,memberships:this.store.memberships$})}ngOnDestroy(){var e;null===(e=this.subscriber)||void 0===e||e.unsubscribe()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(ut))},o.\u0275cmp=t.Xpm({type:o,selectors:[["patient-checkout"]],features:[t._Bn([ut,F.L6,V.R,I.D]),t.qOj],decls:2,vars:3,consts:[["class","w-full h-full","formName","page_patient_checkout",3,"showSubmitButton","model","formData","componentStore","resetForm","save","formIsReady",4,"ngIf"],["formName","page_patient_checkout",1,"w-full","h-full",3,"showSubmitButton","model","formData","componentStore","resetForm","save","formIsReady"]],template:function(e,i){1&e&&(t.YNc(0,wt,1,5,"ui-formly-json-form",0),t.ALo(1,"async")),2&e&&t.Q6J("ngIf",t.lcZ(1,1,i.vm$))},dependencies:[b.O5,k.M,b.Ov]}),o})(),ht=(()=>{class o extends j.V{constructor(e,i,a,u,f){var m;if(super(e),this.appointmentStore=i,this.route=a,this.data=u,this.toast=f,this.loading$=this.select(s=>s.loading),this.appointment$=this.appointmentStore.item$,this.vm$=this.select(this.loading$,this.user$,this.membership$,this.appointment$,(s,n,r,d)=>({loading:s,user:n,membership:r,appointment:d})),this.confirmAppointmentEffect=this.effect(s=>s.pipe((0,R.b)(()=>this.patchState({loading:!0})),(0,S.w)(n=>this.data.userConfirmAppointment({appointmentId:n}).pipe((0,G._b)(r=>{var d;this.appointmentStore.setItem(null===(d=r.data)||void 0===d?void 0:d.updated),this.toast.success("Successfully confirmed Appointment",{duration:3e3}),this.patchState({loading:!1})},r=>{this.toast.error("Failed to confirm Appointment",{duration:3e3}),this.patchState({loading:!1})}))))),this.cancelAppointmentEffect=this.effect(s=>s.pipe((0,R.b)(()=>this.patchState({loading:!0})),(0,S.w)(n=>this.data.userCancelAppointment({appointmentId:n}).pipe((0,G._b)(r=>{var d;this.toast.success("Successfully cancelled Appointment",{duration:3e3}),this.appointmentStore.setItem(null===(d=r.data)||void 0===d?void 0:d.updated),this.patchState({loading:!1})},r=>{this.toast.error("Failed to cancel Appointment",{duration:3e3}),this.patchState({loading:!1})}))))),this.route.snapshot.paramMap.has("appointmentId")){const s=null!==(m=this.route.snapshot.paramMap.get("appointmentId"))&&void 0!==m?m:"";this.appointmentStore.loadAppointmentEffect(s)}}getInitialState(){return{query:"",loading:!1}}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(t.zs3),t.LFG(F.L6),t.LFG(O.gz),t.LFG(q.q),t.LFG(X.F))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac}),o})();var at=h(77579);function jt(o,c){if(1&o&&t._UZ(0,"ui-formly-json-form",1),2&o){const e=c.ngIf,i=t.oxw();t.Q6J("showSubmitButton",!1)("model",i.model)("formData",i.getFormData(e))("componentStore",i.store)}}let Dt=(()=>{class o extends Y.U{constructor(e){super(),this.store=e,this.pageName="Confirm-Appointment",this.portalName="Patient",this._unsubscribeAll=new at.x,this.appointment$=this.store.appointment$,this.model={}}ngOnDestroy(){this._unsubscribeAll.complete()}formIsReady(){this.onResize()}getFormData(e){return Object.assign(Object.assign({},e),{pageName:this.pageName,portalName:this.portalName,memberships:this.store.memberships$})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(ht))},o.\u0275cmp=t.Xpm({type:o,selectors:[["patient-confirm-appointment"]],features:[t._Bn([ht]),t.qOj],decls:2,vars:3,consts:[["class","w-full h-full","formName","page_patient_confirm_appointment",3,"showSubmitButton","model","formData","componentStore",4,"ngIf"],["formName","page_patient_confirm_appointment",1,"w-full","h-full",3,"showSubmitButton","model","formData","componentStore"]],template:function(e,i){1&e&&(t.YNc(0,jt,1,4,"ui-formly-json-form",0),t.ALo(1,"async")),2&e&&t.Q6J("ngIf",t.lcZ(1,1,i.appointment$))},dependencies:[b.O5,k.M,b.Ov]}),o})();var Et=h(78858),ft=h(22412),ot=h(56794),pt=h(62336);let gt=(()=>{class o extends j.V{constructor(e,i,a,u,f,m,s,n,r,d){var p;if(super(d),this.formService=e,this.loading=i,this.toast=a,this.datePipe=u,this.documentStore=f,this.clinicalProviderStore=m,this.reviewStore=s,this.route=n,this.data=r,this.setModalController=this.updater((l,_)=>Object.assign(Object.assign({},l),{modalController:_})),this.setSelectedReview=this.updater((l,_)=>Object.assign(Object.assign({},l),{selectedReview:_})),this.loading$=this.select(l=>l.loading),this.businessHours$=this.select(l=>{const C=(0,ft.vM)(l.businessHours,w=>w.day),y=[];let P=!1;const H=x().format("ll")+"",J=x().format("dddd")+"";let $;for(const w in C){let E=C[w];E.sort((N,Q)=>Date.parse(N.startTime)-Date.parse(Q.startTime)),E=E.map(N=>(N.startTime=x(N.startTime,"hh:mm A").format("HH:mm"),N.endTime=x(N.endTime,"hh:mm A").format("HH:mm"),N)),w===J&&($=E),y.push({day:w,hours:E}),"Sunday"===w&&(P=!0)}const T={day:H,hours:$},M=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];return y.sort((w,E)=>M.indexOf(w.day)-M.indexOf(E.day)),{todayHours:T,others:y,sundayFlag:P}}),this.doctorDetail$=this.clinicalProviderStore.item$,this.doctor$=this.doctorDetail$.pipe((0,S.w)(l=>{var _,C,y,P,H,J,$,T,M,w,E,N,Q,tt;return(0,z.of)(Object.assign(Object.assign({},l),{locationImages:null===(_=l?.clinicalProviderLocations)||void 0===_?void 0:_.map(({location:L})=>{var Z;return Object.assign({},null===(Z=L?.locationImages)||void 0===Z?void 0:Z.at(0))}),mainLocation:null===(y=null===(C=l?.clinicalProviderLocations)||void 0===C?void 0:C.at(0))||void 0===y?void 0:y.location,mainSpecialty:null===(J=null===(H=null===(P=l?.clinicalProviderSpecialties)||void 0===P?void 0:P.at(0))||void 0===H?void 0:H.specialty)||void 0===J?void 0:J.name,specialties:null===($=l?.clinicalProviderSpecialties)||void 0===$?void 0:$.map(({name:L})=>({name:L})),recommendPercent:0,reviewCount:null!==(T=l?.reviewCount)&&void 0!==T?T:0,rating:null!==(M=l?.rating)&&void 0!==M?M:0,hourlyRate:null!==(w=l?.hourlyRate)&&void 0!==w?w:0,educations:null===(E=l?.educations)||void 0===E?void 0:E.map(L=>Object.assign(Object.assign({},L),{from:x(L.from).format("YYYY"),to:x(L.to).format("YYYY")})),experiences:null===(N=l?.experiences)||void 0===N?void 0:N.map(L=>Object.assign(Object.assign({},L),{from:x(L.from).format("YYYY"),to:x(L.to).format("YYYY"),duration:Math.abs(Number(x(L.to).format("YYYY"))-Number(x(L.from).format("YYYY")))})),awards:null===(Q=l?.awards)||void 0===Q?void 0:Q.map(L=>Object.assign(Object.assign({},L),{awardedAt:x(L.awardedAt).format("MMM")+" "+x(L.awardedAt).format("YYYY")})),services:null===(tt=l?.services)||void 0===tt?void 0:tt.map(L=>{var Z;return Object.assign(Object.assign({},L),{name:null===(Z=L.service)||void 0===Z?void 0:Z.name})})}))})),this.reviews$=this.reviewStore.reviews$,this.attachment$=this.documentStore.item$.pipe((0,R.b)(l=>{l&&!l.attachment&&this.toast.error("Cannot find attachment file!",{duration:2e3})})),this.vm$=this.select(this.loading$,this.doctor$,this.reviews$,this.user$,this.businessHours$,(l,_,C,y,P)=>{var H;return{loading:l,doctor:Object.assign(Object.assign({},_),{locations:null===(H=_?.clinicalProviderLocations)||void 0===H?void 0:H.map(({location:$,clinicalProviderLocationAvailabilities:T})=>{var M,w,E,N,Q;return{id:$?.id,name:$?.name,startLatitudeProp:JSON.parse(JSON.stringify(y)).latitude,startLongitudeProp:JSON.parse(JSON.stringify(y)).longitude,endLatitudeProp:$?.latitude,endLongitudeProp:$?.longitude,document:null===(M=$?.locationImages)||void 0===M?void 0:M.at(0),vendor:null===(w=_?.vendor)||void 0===w?void 0:w.name,reviewCount:null!==(E=_.reviewCount)&&void 0!==E?E:0,rating:null!==(N=_.rating)&&void 0!==N?N:0,hourlyRate:null!==(Q=_.hourlyRate)&&void 0!==Q?Q:0,businessHours:(0,ft.f1)(T??[],tt=>tt.day)}})}),businessHours:P,user:y}}),this.loadBusinessHoursEffect=this.effect(l=>l.pipe((0,R.b)(_=>{this.patchState({loading:!0})}),(0,S.w)(_=>this.data.userClinicalProviderBusinessHours({clinicalProviderId:_}).pipe((0,G._b)(C=>this.patchState({loading:!1,businessHours:C.data.items}),C=>{this.patchState({loading:!1})}))))),this.updateFavoriteProviderEffect=this.effect(l=>l.pipe((0,R.b)(()=>{this.patchState({loading:!0})}),(0,S.w)(({clinicalProviderId:_,like:C})=>C?this.data.userAddToFavorites({clinicalProviderId:_}).pipe((0,G._b)(y=>{var P;this.toast.success("Successfully added to favorites",{duration:2e3}),this.clinicalProviderStore.updateClinicalProvider(null===(P=y.data)||void 0===P?void 0:P.updated)},y=>{this.toast.error(y.graphQLErrors[0].message)})):this.data.userRemoveFromFavorites({clinicalProviderId:_}).pipe((0,G._b)(y=>{var P;this.toast.success("Removed from favorites",{duration:2e3}),this.clinicalProviderStore.updateClinicalProvider(null===(P=y.data)||void 0===P?void 0:P.updated)},y=>{this.toast.error(y.graphQLErrors[0].message)}))))),this.patchState({query:"",loading:!1}),this.route.snapshot.paramMap.has("doctorId")){const l=null!==(p=this.route.snapshot.paramMap.get("doctorId"))&&void 0!==p?p:"";this.clinicalProviderStore.loadClinicalProviderEffect(l),this.reviewStore.setClinicalProviderId(l),this.reviewStore.loadReviewsEffect(),this.loadBusinessHoursEffect(l)}}getInitialState(){return{query:"",loading:!1,modalController:void 0,selectedReview:void 0,businessHours:[]}}addNewProfile(e){var i;const a=null!==(i=this.route.snapshot.paramMap.get("doctorId"))&&void 0!==i?i:"";this.user$.subscribe(u=>{const f={clinicalProviderId:a,reivewDateAndTime:x().format(),rating:e?.rating,patientId:u?.patientId,name:u?.patientId+" "+a+" "+x().format(),comment:e?.notes};this.reviewStore.createReviewEffect(f)}).unsubscribe()}addNewComment(e){var i;console.log(e);const a=JSON.parse(e),u=null!==(i=this.route.snapshot.paramMap.get("doctorId"))&&void 0!==i?i:"";this.user$.subscribe(f=>{const m={clinicalProviderId:u,reivewDateAndTime:x().format(),rating:a?.ratingValue,patientId:f?.patientId,name:f?.patientId+" "+u+" "+x().format(),comment:a?.comment,parentId:this.get().selectedReview.reviewId};this.reviewStore.createReviewEffect(m)}).unsubscribe()}openModal(e){var i;this.setSelectedReview(e),null===(i=this.get().modalController)||void 0===i||i.open()}loadImageDetail(e){this.documentStore.loadDocumentEffect(e)}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(st.o),t.LFG(dt.c),t.LFG(X.F),t.LFG(b.uU),t.LFG(ot.F),t.LFG(I.D),t.LFG(pt.J),t.LFG(O.gz),t.LFG(q.q),t.LFG(t.zs3))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac}),o})();function Bt(o,c){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"ui-formly-json-form",1),t.NdJ("save",function(a){t.CHM(e);const u=t.oxw(2);return t.KtG(u.onSave(a))})("formIsReady",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.onResize())}),t.qZA(),t.BQk()}if(2&o){const e=t.oxw().ngIf,i=t.oxw();t.xp6(1),t.Q6J("showSubmitButton",!1)("componentStore",i.store)("formData",i.getFormData(e))}}function Rt(o,c){if(1&o&&(t.ynx(0),t.YNc(1,Bt,2,3,"ng-container",0),t.BQk()),2&o){const e=c.ngIf;t.xp6(1),t.Q6J("ngIf",e.doctor)}}let xt=(()=>{class o extends Y.U{constructor(e){super(),this.store=e,this.pageName="Doctor Details",this.portalName="Patient",this.selectedLegalCaseId$=this.store.selectedLegalCaseId$,this.model={},this.vm$=this.store.vm$,this.subscriber=this.store.selectedLegalCaseId$.subscribe(i=>{this.model.legalCaseId=i})}getFormData(e){return Object.assign(Object.assign({},e),{pageName:this.pageName,portalName:this.portalName,previewImage:this.store.attachment$})}onSave(e){this.store.addNewProfile(e)}ngOnDestroy(){var e;null===(e=this.subscriber)||void 0===e||e.unsubscribe()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(gt))},o.\u0275cmp=t.Xpm({type:o,selectors:[["patient-doctor-profile"]],features:[t._Bn([gt,I.D,pt.J,ot.F]),t.qOj],decls:2,vars:3,consts:[[4,"ngIf"],["formName","page_patient_doctor_profile",1,"w-full","h-full",3,"showSubmitButton","componentStore","formData","save","formIsReady"]],template:function(e,i){1&e&&(t.YNc(0,Rt,2,1,"ng-container",0),t.ALo(1,"async")),2&e&&t.Q6J("ngIf",t.lcZ(1,1,i.vm$))},dependencies:[b.O5,k.M,b.Ov]}),o})();var vt=h(11365),rt=h(53783);let _t=(()=>{class o extends j.V{constructor(e,i,a,u,f,m){super(m),this.data=e,this.documentStore=i,this.specialtyStore=a,this.toast=u,this.listProviderLocationStore=f,this.centerLatitude$=this.select(s=>s.centerLatitude),this.centerLongitude$=this.select(s=>s.centerLongitude),this.dateFilter$=this.select(s=>s.dateFilter),this.specialties$=this.specialtyStore.specialties$,this.loading$=this.select(s=>s.loading),this.providerLocations$=this.listProviderLocationStore.formattedClinicalProviderLocations$.pipe((0,R.b)(s=>console.log(s))),this.mapProviderLocations$=this.select(this.providerLocations$,s=>s.map(n=>{var r,d;return Object.assign(Object.assign({},n),{latitude:null===(r=n.location)||void 0===r?void 0:r.latitude,longitude:null===(d=n.location)||void 0===d?void 0:d.longitude})})),this.locationsCount$=this.select(this.providerLocations$,s=>{var n;return null!==(n=s?.length)&&void 0!==n?n:0}),this.listProviderLocationsPaging$=this.listProviderLocationStore.paging$,this.searchable$=this.select(this.centerLongitude$,this.centerLatitude$,(s,n)=>s&&n),this.attachment$=this.documentStore.item$.pipe((0,R.b)(s=>{s&&!s.attachment&&this.toast.error("Cannot find attachment file!",{duration:2e3})})),this.vm$=this.select(this.loading$,this.user$,this.centerLongitude$,this.centerLatitude$,this.searchable$,this.locationsCount$,(s,n,r,d,p,l)=>({loading:s,doctorsCount:l,user:n,centerLongitude:r,centerLatitude:d,searchable:p})),this.inputSubject=new at.x,this.setCenterLatitude=this.updater((s,n)=>Object.assign(Object.assign({},s),{centerLatitude:n.toString()})),this.setCenterLongitude=this.updater((s,n)=>Object.assign(Object.assign({},s),{centerLongitude:n.toString()})),this.setCurrentPatientId=this.updater((s,n)=>Object.assign(Object.assign({},s),{currentPatientId:n.toString()})),this.setDateFilter=this.updater((s,n)=>Object.assign(Object.assign({},s),{dateFilter:n})),this.setSkip=this.updater((s,n)=>Object.assign(Object.assign({},s),{skip:n})),this.setViewMode=this.updater((s,n)=>Object.assign(Object.assign({},s),{viewMode:n})),this.updateFavoriteProviderEffect=this.effect(s=>s.pipe((0,R.b)(()=>{this.patchState({loading:!0})}),(0,S.w)(({clinicalProviderId:n,like:r})=>r?this.data.userAddToFavorites({clinicalProviderId:n}).pipe((0,G._b)(d=>{var p;this.toast.success("Successfully added to favorites",{duration:2e3}),this.listProviderLocationStore.updateClinicalProvider(null===(p=d.data)||void 0===p?void 0:p.updated)},d=>{this.toast.error(d.graphQLErrors[0].message)})):this.data.userRemoveFromFavorites({clinicalProviderId:n}).pipe((0,G._b)(d=>{var p;this.toast.success("Removed from favorites",{duration:2e3}),this.listProviderLocationStore.updateClinicalProvider(null===(p=d.data)||void 0===p?void 0:p.updated)},d=>{this.toast.error(d.graphQLErrors[0].message)}))))),this.searchProviderLocationsEffect=this.effect(s=>s.pipe((0,R.b)(()=>{this.patchState({loading:!0})}),(0,vt.M)(this.searchable$),(0,S.w)(([,n])=>(n&&this.listProviderLocationStore.loadClinicalProviderLocationsEffect(),(0,z.of)(!0))))),this.specialtyStore.loadSpecialtiesEffect(),this.listProviderLocationStore.setDistance(100)}searchQueryDidChange(e){localStorage.setItem("queryFilter",e),this.listProviderLocationStore.setProviderName(e),this.searchProviderLocationsEffect()}filterBySpecialist(e){e&&(localStorage.setItem("specialtyFilter",e.join(",")),this.listProviderLocationStore.setSpecialties(e)),this.searchProviderLocationsEffect()}filterByLocation(e){e&&this.listProviderLocationStore.setCenterLocation(e),this.searchProviderLocationsEffect()}filterByDistance(e){e&&(localStorage.setItem("distanceFilter",e.toString()),this.listProviderLocationStore.setDistance(Number(e)),this.searchProviderLocationsEffect())}loadImageDetail(e){this.documentStore.loadDocumentEffect(e)}getInitialState(){return{centerLatitude:void 0,centerLongitude:void 0,dateFilter:void 0,loading:!1,query:""}}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(q.q),t.LFG(ot.F),t.LFG(rt.T),t.LFG(X.F),t.LFG("listProviderLocationStore"),t.LFG(t.zs3))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac}),o})();var St=h(32944);function Tt(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"ui-formly-json-form",1),t.NdJ("formIsReady",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.onResize())}),t.qZA()}if(2&o){const e=c.ngIf,i=t.oxw();t.Q6J("showSubmitButton",!1)("componentStore",i.store)("model",i.model)("formData",i.getFormData(e))}}let At=(()=>{class o extends Y.U{constructor(e){super(),this.store=e,this.pageName="Doctors",this.portalName="Patient",this.vm$=this.store.vm$,this.model={distance:"100"};const i=localStorage.getItem("queryFilter"),a=localStorage.getItem("distanceFilter"),u=localStorage.getItem("addressFilter"),f=localStorage.getItem("specialtyFilter");i&&(this.model.providerName=i),a&&(this.model.distance=a),u&&(this.model.centerLocation=JSON.parse(u)),f&&(this.model.multiSelect=""==f?.split(",")[0]?[]:f?.split(","))}getFormData(e){return Object.assign(Object.assign({},e),{specialties:this.store.specialties$,providerLocations:this.store.providerLocations$,mapProviderLocations:this.store.mapProviderLocations$,previewImage:this.store.attachment$,pageName:this.pageName,portalName:this.portalName})}ngOnDestroy(){this.store.inputSubject.next(""),this.store.inputSubject.complete()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(_t))},o.\u0275cmp=t.Xpm({type:o,selectors:[["patient-doctors"]],features:[t._Bn([_t,rt.T,ot.F,St.m,{provide:"listProviderLocationStore",useClass:A.j}]),t.qOj],decls:2,vars:3,consts:[["class","w-full h-full","formName","page_patient_doctors",3,"showSubmitButton","componentStore","model","formData","formIsReady",4,"ngIf"],["formName","page_patient_doctors",1,"w-full","h-full",3,"showSubmitButton","componentStore","model","formData","formIsReady"]],template:function(e,i){1&e&&(t.YNc(0,Tt,1,4,"ui-formly-json-form",0),t.ALo(1,"async")),2&e&&t.Q6J("ngIf",t.lcZ(1,1,i.vm$))},dependencies:[b.O5,k.M,b.Ov]}),o})(),bt=(()=>{class o extends j.V{constructor(e,i,a,u,f){super(f),this.toast=e,this.documentStore=i,this.providerLocationStore=a,this.data=u,this.loading$=this.select(m=>m.loading),this.providerLocations$=this.providerLocationStore.formattedClinicalProviderLocations$.pipe((0,R.b)(m=>console.log(m))),this.locationsCount$=this.select(this.providerLocations$,m=>{var s;return null!==(s=m?.length)&&void 0!==s?s:0}),this.attachment$=this.documentStore.item$.pipe((0,R.b)(m=>{m&&!m.attachment&&this.toast.error("Cannot find attachment file!",{duration:2e3})})),this.vm$=this.select(this.loading$,this.user$,this.membership$,this.locationsCount$,(m,s,n,r)=>({loading:m,user:s,membership:n,doctorsCount:r})),this.updateFavoriteProviderEffect=this.effect(m=>m.pipe((0,R.b)(()=>{this.patchState({loading:!0})}),(0,S.w)(({clinicalProviderId:s,like:n})=>n?this.data.userAddToFavorites({clinicalProviderId:s}).pipe((0,G._b)(r=>{var d;this.toast.success("Successfully added to favorites",{duration:2e3}),this.providerLocationStore.updateClinicalProvider(null===(d=r.data)||void 0===d?void 0:d.updated)},r=>{this.toast.error(r.graphQLErrors[0].message)})):this.data.userRemoveFromFavorites({clinicalProviderId:s}).pipe((0,G._b)(r=>{var d;this.toast.success("Removed from favorites",{duration:2e3}),this.providerLocationStore.updateClinicalProvider(null===(d=r.data)||void 0===d?void 0:d.updated),this.providerLocationStore.loadClinicalProviderLocationsEffect()},r=>{this.toast.error(r.graphQLErrors[0].message)}))))),this.loadClinicalProviderLocationsEffect=this.effect(m=>m.pipe((0,R.b)(()=>{this.patchState({loading:!0})}),(0,S.w)(()=>(this.providerLocationStore.loadClinicalProviderLocationsEffect(),(0,z.of)(!0))))),this.providerLocationStore.setFavorite(!0),this.providerLocationStore.loadClinicalProviderLocationsEffect()}loadImageDetail(e){this.documentStore.loadDocumentEffect(e)}getInitialState(){return{query:"",loading:!1}}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(X.F),t.LFG(ot.F),t.LFG(A.j),t.LFG(q.q),t.LFG(t.zs3))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac}),o})();function Gt(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"ui-formly-json-form",1),t.NdJ("formIsReady",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.onResize())}),t.qZA()}if(2&o){const e=c.ngIf,i=t.oxw();t.Q6J("showSubmitButton",!1)("componentStore",i.store)("model",i.model)("formData",i.getFormData(e))}}let Mt=(()=>{class o extends Y.U{constructor(e){super(),this.store=e,this.pageName="Favorites",this.portalName="Patient",this.vm$=this.store.vm$,this.selectedLegalCaseId$=this.store.selectedLegalCaseId$,this.model={},this.subscriber=this.store.selectedLegalCaseId$.subscribe(i=>{this.model.legalCaseId=i})}getFormData(e){return Object.assign(Object.assign({},e),{pageName:this.pageName,portalName:this.portalName,providerLocations:this.store.providerLocations$,memberships:this.store.memberships$,previewImage:this.store.attachment$})}ngOnDestroy(){var e;null===(e=this.subscriber)||void 0===e||e.unsubscribe()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(bt))},o.\u0275cmp=t.Xpm({type:o,selectors:[["patient-favorite-doctors"]],features:[t._Bn([bt,ot.F,St.m,A.j]),t.qOj],decls:2,vars:3,consts:[["class","w-full h-full","formName","page_patient_favorites",3,"showSubmitButton","componentStore","model","formData","formIsReady",4,"ngIf"],["formName","page_patient_favorites",1,"w-full","h-full",3,"showSubmitButton","componentStore","model","formData","formIsReady"]],template:function(e,i){1&e&&(t.YNc(0,Gt,1,4,"ui-formly-json-form",0),t.ALo(1,"async")),2&e&&t.Q6J("ngIf",t.lcZ(1,1,i.vm$))},dependencies:[b.O5,k.M,b.Ov]}),o})();var Yt=h(4859),Ht=h(97392);let yt=(()=>{class o extends j.V{constructor(e,i,a,u,f,m){super(m),this.datePipe=e,this.data=i,this.appointmentStore=a,this.toast=u,this.router=f,this.locationAvalabilityId="",this.loading$=this.select(s=>s.loading),this.tag$=this.select(s=>s.tag),this.read$=this.select(s=>s.read),this.notifications$=this.select(s=>s.notifications),this.paging$=this.select(s=>s.paging),this.setTag=this.updater((s,n)=>Object.assign(Object.assign({},s),{tag:n})),this.setRead=this.updater((s,n)=>Object.assign(Object.assign({},s),{read:n})),this.vm$=this.select(this.loading$,this.user$,this.membership$,this.notifications$,(s,n,r,d)=>({loading:s,user:n,membership:r,notifications:d})),this.loadNotificationsEffect=this.effect(s=>s.pipe((0,R.b)(()=>{this.patchState({loading:!0})}),(0,vt.M)(this.tag$,this.read$,this.paging$),(0,S.w)(([,n,r,d])=>(console.log({tag:n,read:r,paging:d}),this.data.userNovuNotifications({input:{tag:n,read:r,limit:d?.limit,skip:d?.skip}}).pipe((0,G._b)(p=>{var l,_,C,y;this.patchState({paging:{limit:null===(l=p.data.count)||void 0===l?void 0:l.limit,skip:null===(_=p.data.count)||void 0===_?void 0:_.skip,total:null===(C=p.data.count)||void 0===C?void 0:C.total},loading:!1,notifications:null!==(y=p.data.notifications)&&void 0!==y?y:[]})},p=>{console.log(p),this.patchState({loading:!1})})))))),this.setStatusWatch=this.effect(s=>s.pipe((0,R.b)(()=>{this.patchState({loading:!0})}),(0,S.w)(n=>this.data.updateReadStatus({notificationId:n}).pipe((0,G._b)(()=>{this.patchState({loading:!1})},()=>{this.patchState({loading:!1})}))))),this.setLimit=this.updater((s,n)=>Object.assign(Object.assign({},s),{paging:Object.assign(Object.assign({},s.paging),{limit:n})})),this.setSkip=this.updater((s,n)=>Object.assign(Object.assign({},s),{paging:Object.assign(Object.assign({},s.paging),{skip:n})})),this.setLimit(10),this.setSkip(0)}skipDidChange(e){this.setSkip(e),this.loadNotificationsEffect()}cancelAppointment(e){const{id:i,appointment:a}=e;if(a){this.appointmentStore.cancelAppointmentEffect(a);const u=this.appointmentStore.actionResult$.subscribe(f=>{const{done:m}=f;m&&(u.unsubscribe(),this.data.updateReadStatus({notificationId:i}).subscribe(),this.router.navigate(["dashboard"]))})}else this.toast.error("Cannot find appointment data")}confirmAppointment(e){const{id:i,appointment:a}=e;if(a){this.appointmentStore.confirmAppointmentEffect(a);const u=this.appointmentStore.actionResult$.subscribe(f=>{const{done:m}=f;m&&(u.unsubscribe(),this.data.updateReadStatus({notificationId:i}).subscribe(),this.router.navigate(["dashboard"]))})}else this.toast.error("Cannot find appointment data")}cancelRescheduleRequest(e){const{id:i}=e;this.data.updateReadStatus({notificationId:i}).subscribe(),this.router.navigate(["dashboard"])}confirmRescheduleRequest(e){const{id:i,appointment:a}=e;if(a){this.appointmentStore.requestRescehduleAppointmentEffect(a);const u=this.appointmentStore.actionResult$.subscribe(f=>{const{done:m}=f;m&&(u.unsubscribe(),this.data.updateReadStatus({notificationId:i}).subscribe(),this.router.navigate(["dashboard"]))})}else this.toast.error("Cannot find appointment data")}tagQueryDidChange(e){this.setTag(e),this.loadNotificationsEffect()}readFilterDidChange(e){console.log(e),this.setRead("read"===e),this.loadNotificationsEffect()}getInitialState(){return{query:"",loading:!1,notifications:[],tag:"",read:!1}}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(b.uU),t.LFG(q.q),t.LFG(F.L6),t.LFG(X.F),t.LFG(O.F0),t.LFG(t.zs3))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac}),o})();function zt(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"ui-formly-json-form",1),t.NdJ("formIsReady",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.onResize())}),t.qZA()}if(2&o){const e=c.ngIf,i=t.oxw();t.Q6J("showSubmitButton",!1)("componentStore",i.store)("model",i.model)("formData",i.getFormData(e))}}let kt=(()=>{class o extends Y.U{constructor(e){super(),this.store=e,this.pageName="Notifications",this.portalName="Patient",this.selectedLegalCaseId$=this.store.selectedLegalCaseId$,this.model={},this.vm$=this.store.vm$,this.subscriber=this.store.selectedLegalCaseId$.subscribe(i=>{this.model.legalCaseId=i})}getFormData(e){return Object.assign(Object.assign({},e),{portalName:this.portalName,pageName:this.pageName,memberships:this.store.memberships$,paging:this.store.paging$})}ngOnDestroy(){var e;null===(e=this.subscriber)||void 0===e||e.unsubscribe()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(yt))},o.\u0275cmp=t.Xpm({type:o,selectors:[["patient-notifications"]],features:[t._Bn([yt,F.L6]),t.qOj],decls:2,vars:3,consts:[["class","w-full h-full","formName","page_patient_notifications",3,"showSubmitButton","componentStore","model","formData","formIsReady",4,"ngIf"],["formName","page_patient_notifications",1,"w-full","h-full",3,"showSubmitButton","componentStore","model","formData","formIsReady"]],template:function(e,i){1&e&&(t.YNc(0,zt,1,4,"ui-formly-json-form",0),t.ALo(1,"async")),2&e&&t.Q6J("ngIf",t.lcZ(1,1,i.vm$))},dependencies:[b.O5,k.M,b.Ov]}),o})();var Jt=h(89752),$t=h(28816),Ct=h(90562);let Pt=(()=>{class o extends j.V{constructor(e,i,a,u,f){super(f),this.data=e,this.toast=i,this.authStore=a,this.genderStore=u,this.loading$=this.select(m=>m.loading),this.userProfile$=this.data.me().pipe((0,S.w)(m=>{var s;return(0,z.of)(Object.assign(Object.assign({},m.data.me),{document:null!==(s=m.data.me)&&void 0!==s&&s.avatarUrl?{name:"ProfileImage.png",attachment:m.data.me.avatarUrl}:void 0}))})),this.userDetails$=this.select(this.authStore.user$,this.patient$,(m,s)=>{let n="";if(s?.gender&&(n=s.gender.name),m?.dateOfBirth){const d=(0,D.Ay)(m.dateOfBirth);n?n+=` - ${d} Years`:n=`${d} Years`}const r=Object.assign(Object.assign({},m),{genderAndDob:n,userfirstName:m?.firstName,userlastName:m?.lastName,document:m?.avatarUrl?{name:"ProfileImage.png",attachment:m.avatarUrl}:void 0});return console.log(r),r}),this.profile$=this.select(this.userDetails$,this.patient$,(m,s)=>({user:m,patient:s})),this.genders$=this.genderStore.genders$,this.me$=this.profile$,this.vm$=this.select(this.loading$,this.userDetails$,this.membership$,(m,s,n)=>({loading:m,user:s,membership:n})),this.model$=this.select(this.me$,this.selectedLegalCaseId$,(m,s)=>Object.assign(Object.assign({},m),{legalCaseId:s})),this.updateUserProfileEffect=this.effect(m=>m.pipe((0,R.b)(s=>{console.log(s),this.patchState({loading:!0})}),(0,S.w)(({user:s,patient:n})=>{const{userfirstName:r,userlastName:d,cellPhone:p,dateOfBirth:l,document:_,line1:C,line2:y,city:P,state:H,postalCode:J}=s;return this.data.accountUpdateProfile({input:{firstName:r,lastName:d,phone:p,dateOfBirth:l,line1:C,document:_,line2:y,city:P,state:H,postalCode:J}}).pipe((0,S.w)($=>{var T,M;const{genderId:w,primaryAddressLine1:E,primaryAddressLine2:N,primaryAddressCity:Q,primaryAddressStateOrProvince:tt,postalCode:L,mobileNumber:Z,workAddressCity:ie,workAddressLine1:se,dateOfBirth:ne,workAddressLine2:ae,workAddressPostalCode:re,workAddressStateOrProvince:le,workLatitude:ce,firstName:de,lastName:me,workLongitude:ue,homeAddress:lt,workAddress:ct}=n;return this.data.userUpdatePatient({patientId:null===(M=null===(T=$.data)||void 0===T?void 0:T.accountUpdateProfile)||void 0===M?void 0:M.patientId,input:{firstName:de,lastName:me,primaryAddressLine1:E,primaryAddressLine2:N,primaryAddressCity:Q,genderId:w,primaryAddressPostalCode:L,primaryAddressStateOrProvince:tt,mobileNumber:Z,workAddressCity:ie,workAddressLine1:se,workAddressLine2:ae,workAddressPostalCode:re,workAddressStateOrProvince:le,workLatitude:ce,workLongitude:ue,latitude:n?.latitude,longitude:n?.longitude,dateOfBirth:ne,homeAddress:lt?.formatedAddress,workAddress:ct?.formatedAddress}})})).pipe((0,G._b)(()=>{this.toast.success("Successfully updated profile",{duration:3e3}),this.authStore.meEffect(),this.patchState({loading:!1})},()=>{this.toast.error("Failed to update profile",{duration:3e3}),this.patchState({loading:!1})}))}))),this.genderStore.loadGendersEffect()}getInitialState(){return{query:"",loading:!1}}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(q.q),t.LFG(X.F),t.LFG(Ct.Q),t.LFG($t._),t.LFG(t.zs3))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac}),o})();function Qt(o,c){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"ui-formly-json-form",1),t.NdJ("save",function(a){t.CHM(e);const u=t.oxw(2);return t.KtG(u.store.updateUserProfileEffect(a))})("formIsReady",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.onResize())}),t.qZA(),t.BQk()}if(2&o){const e=c.ngIf,i=t.oxw().ngIf,a=t.oxw();t.xp6(1),t.Q6J("model",i)("showSubmitButton",!1)("componentStore",a.store)("formData",a.getFormData(e))("resetForm",!1)}}function Ut(o,c){if(1&o&&(t.ynx(0),t.YNc(1,Qt,2,5,"ng-container",0),t.ALo(2,"async"),t.BQk()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,e.vm$))}}let Zt=(()=>{class o extends Y.U{getFormData(e){return Object.assign(Object.assign({},e),{portalName:this.portalName,pageName:this.pageName,genders:this.store.genders$,memberships:this.store.memberships$})}constructor(e){super(),this.store=e,this.portalName="Patient",this.pageName="Profile",this.model$=this.store.model$,this.vm$=this.store.vm$,this.model={},this.formData={portalName:this.portalName,pageName:this.pageName}}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(Pt))},o.\u0275cmp=t.Xpm({type:o,selectors:[["patient-profile"]],features:[t._Bn([Pt,rt.T,$t._]),t.qOj],decls:2,vars:3,consts:[[4,"ngIf"],["formName","page_patient_profile",1,"w-full","h-full",3,"model","showSubmitButton","componentStore","formData","resetForm","save","formIsReady"]],template:function(e,i){1&e&&(t.YNc(0,Ut,3,3,"ng-container",0),t.ALo(1,"async")),2&e&&t.Q6J("ngIf",t.lcZ(1,1,i.model$))},dependencies:[b.O5,k.M,b.Ov]}),o})();var Kt=h(46277);let Lt=(()=>{class o extends j.V{constructor(e,i){super(e),this.formlySettingStore=i,this.loading$=this.select(a=>a.loading),this.formlySetting$=this.formlySettingStore.formlySetting$,this.vm$=this.select(this.loading$,this.user$,this.membership$,(a,u,f)=>({loading:a,user:u,membership:f})),this.formlySettingStore.loadFormlySettingsEffect()}loadFormlySetting(){this.formlySettingStore.loadFormlySettingsEffect()}updateFormlySetting(e){if(e?.id){const{id:i,selectCurrency:a,selectDateFormat:u,selectLanguage:f,timeFormat:m}=e;this.formlySettingStore.updateFormlySettingsEffect({id:i,selectCurrency:a,timeFormat:m,selectDateFormat:u,selectLanguage:f})}else{const{selectCurrency:i,selectDateFormat:a,selectLanguage:u,timeFormat:f}=e;this.formlySettingStore.createFormlySettingsEffect({selectCurrency:i,selectDateFormat:a,timeFormat:f,selectLanguage:u})}}getInitialState(){return{query:"",loading:!1}}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(t.zs3),t.LFG(Kt.h))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac}),o})();var It=h(82722);function Vt(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"ui-formly-json-form",1),t.NdJ("formIsReady",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.formIsReady())})("save",function(a){t.CHM(e);const u=t.oxw();return t.KtG(u.save(a))}),t.qZA()}if(2&o){const e=c.ngIf,i=t.oxw();t.Q6J("showSubmitButton",!1)("model",i.model)("formData",i.getFormData(e))}}let Wt=(()=>{class o extends Y.U{constructor(e){super(),this.store=e,this.pageName="Setting",this.portalName="Patient",this._unsubscribeAll=new at.x,this.vm$=this.store.vm$,this.model={},this.store.selectedLegalCaseId$.pipe((0,It.R)(this._unsubscribeAll)).subscribe(i=>{this.model.legalCaseId=i}),this.store.formlySetting$.pipe((0,It.R)(this._unsubscribeAll)).subscribe(i=>{this.model=Object.assign(Object.assign({},this.model),i.value)})}ngOnDestroy(){this._unsubscribeAll.complete()}formIsReady(){this.onResize(),this.store.loadFormlySetting()}getFormData(e){return Object.assign(Object.assign({},e),{pageName:this.pageName,portalName:this.portalName,memberships:this.store.memberships$})}save(e){console.log(e),this.store.updateFormlySetting(e)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(Lt))},o.\u0275cmp=t.Xpm({type:o,selectors:[["patient-setting"]],features:[t._Bn([Lt]),t.qOj],decls:2,vars:3,consts:[["class","w-full h-full","formName","page_patient_setting",3,"showSubmitButton","model","formData","formIsReady","save",4,"ngIf"],["formName","page_patient_setting",1,"w-full","h-full",3,"showSubmitButton","model","formData","formIsReady","save"]],template:function(e,i){1&e&&(t.YNc(0,Vt,1,3,"ui-formly-json-form",0),t.ALo(1,"async")),2&e&&t.Q6J("ngIf",t.lcZ(1,1,i.vm$))},dependencies:[b.O5,k.M,b.Ov]}),o})();var Xt=h(23387),qt=h(51194),te=h(27503),ee=h(10265);let oe=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({providers:[Jt.E,qt.d,Ct.Q,F.L6],imports:[b.ez,Yt.ot,Ht.Ps,Xt.m,te.G,ee.t,Et.i,O.Bz.forChild([{path:"dashboard",data:{initialize:["patientPortalStore"]},loadChildren:()=>Promise.all([h.e(428),h.e(181)]).then(h.bind(h,63181)).then(c=>c.DashboardModule)},{path:"checkout",component:Nt},{path:"setting",component:Wt},{path:"booking",children:[{path:"success",children:[{path:":bookingId",component:U}]},{path:":doctorId",children:[{path:"",component:g},{path:":locationId",component:g}]}]},{path:"profile",component:Zt},{path:"change-password",component:Ot},{path:"favorites",component:Mt},{path:"notifications",component:kt},{path:"appointments",children:[{path:":appointmentId",children:[{path:"confirm",component:Dt},{path:"",pathMatch:"full",redirectTo:"confirm"}]}]},{path:"providers",children:[{path:"",component:At},{path:":doctorId",children:[{path:"details",component:xt},{path:"",pathMatch:"full",redirectTo:"details"}]}]}])]}),o})()},17096:(nt,K,h)=>{h.d(K,{U:()=>z});var F=h(94650);let z=(()=>{class S{onResize(){this.determinePosition()}onLoad(){this.determinePosition()}onChange(){this.determinePosition()}determinePosition(){const D=document.body,t=document.documentElement;let I=960;I=Math.min(D.scrollHeight,D.offsetHeight,t.clientHeight,t.offsetHeight);const A=document.querySelector(".header"),O=+window.getComputedStyle(A??t,null).getPropertyValue("height").replace("px",""),W=document.querySelector(".breadcrum"),Y=+window.getComputedStyle(W??t,null).getPropertyValue("height").replace("px",""),b=document.querySelector(".footer");let g=I-+window.getComputedStyle(b??t,null).getPropertyValue("height").replace("px","")-Y-O;g<500&&(g=500)}}return S.\u0275fac=function(D){return new(D||S)},S.\u0275cmp=F.Xpm({type:S,selectors:[["patient-base-component"]],hostBindings:function(D,t){1&D&&F.NdJ("resize",function(A){return t.onResize(A)},!1,F.Jf7)("load",function(A){return t.onLoad(A)},!1,F.Jf7)("change",function(A){return t.onChange(A)},!1,F.Jf7)},decls:0,vars:0,template:function(D,t){},encapsulation:2}),S})()},63198:(nt,K,h)=>{h.d(K,{V:()=>j});var F=h(24280),z=h(89752),S=h(94650);let j=(()=>{class D extends F.m1{constructor(I){super(),this.patientPortalStore=I.get(z.E),this.setState(this.getInitialState()),this.user$=this.patientPortalStore.user$,this.patient$=this.patientPortalStore.patient$,this.memberships$=this.patientPortalStore.memberships$,this.membership$=this.patientPortalStore.selectedMembership$,this.selectedLegalCaseId$=this.patientPortalStore.selectedLegalCaseId$,this.bookingItem$=this.patientPortalStore.bookingItem$}legalCaseIdDidChange(I){}setSelectedLegalCaseId(I){this.patientPortalStore.setSelectedLegalCaseId(I),this.legalCaseIdDidChange(I)}}return D.\u0275fac=function(I){return new(I||D)(S.LFG(S.zs3))},D.\u0275prov=S.Yz7({token:D,factory:D.\u0275fac}),D})()},89752:(nt,K,h)=>{h.d(K,{E:()=>V});var F=h(24280),z=h(84264),S=h(94650),j=h(4523),D=h(1463),t=h(71873),I=h(51194),A=h(90562);let V=(()=>{class O extends F.m1{constructor(et,Y,b,k,it){super({query:"",loading:!1,bookingItem:{}}),this.formService=et,this.loading=Y,this.toast=b,this.patientStore=k,this.authStore=it,this.patient$=this.patientStore.item$,this.user$=this.select(this.authStore.user$,this.patient$,(g,v)=>{console.log(v);let B="",U=0,G=0;if(v?.gender&&(B=v.gender.name),v?.latitude&&(U=v?.latitude),v?.longitude&&(G=v?.longitude),g?.dateOfBirth){const st=(0,z.Ay)(g.dateOfBirth);B?B+=` - ${st} Years`:B=`${st} Years`}return Object.assign(Object.assign({},g),{latitude:U,longitude:G,genderAndDob:B})}),this.memberships$=this.select(this.patient$,g=>{var v,B;return((null===(v=g?.legalCases)||void 0===v?void 0:v.length)||0)>0?null===(B=g?.legalCases)||void 0===B?void 0:B.map(U=>({id:U.id,mrn:U.medicalRecordNumber,pcn:U.pharmacyControlNumber,group:U.pchGroupNumber})):[{id:-1,mrn:"No membership",pcn:"No PCN",group:"No Group"}]}),this.bookingItem$=this.select(g=>g.bookingItem),this.clinicalProviderId$=this.select(g=>g.clinicalProviderId),this.loading$=this.select(g=>g.loading),this.vm$=this.select(this.loading$,g=>({loading:g})),this.selectedLegalCaseId$=this.select(this.state$,this.memberships$,(g,v)=>{var B;return g.selectedLegalCaseId?g.selectedLegalCaseId:null===(B=v?.at(0))||void 0===B?void 0:B.id}),this.selectedMembership$=this.select(this.selectedLegalCaseId$,this.memberships$,(g,v)=>{if(!v)return null;let B=null;return v.forEach(U=>{U.id===g&&(B=U)}),B}),this.setBookingItem=this.updater((g,v)=>Object.assign(Object.assign({},g),{bookingItem:v})),this.setClinicalProviderId=this.updater((g,v)=>Object.assign(Object.assign({},g),{clinicalProviderId:v})),this.setSelectedLegalCaseId=this.updater((g,v)=>Object.assign(Object.assign({},g),{selectedLegalCaseId:v})),this.authStore.user$.subscribe(g=>{g?.patientId&&(console.log("I am going to fetch patient details..."),this.patientStore.loadPatientEffect(g.patientId))})}}return O.\u0275fac=function(et){return new(et||O)(S.LFG(j.o),S.LFG(D.c),S.LFG(t.F),S.LFG(I.d),S.LFG(A.Q))},O.\u0275prov=S.Yz7({token:O,factory:O.\u0275fac,providedIn:"root"}),O})()}}]);