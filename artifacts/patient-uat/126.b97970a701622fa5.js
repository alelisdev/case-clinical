"use strict";(self.webpackChunkpatient=self.webpackChunkpatient||[]).push([[126],{61126:(Ie,q,l)=>{l.r(q),l.d(q,{RegisterModule:()=>sr});var u=l(36895),N=l(30144),W=l(34643),xt=l(57267),K=l(70655),C=l(75886),E=l(39646),A=l(18505),D=l(12138),Wt=l(24280),a=l(94650),Te=l(90562),Ee=l(73602),Be=l(80529),Oe=l(34077);let Fe=(()=>{class e{constructor(t,i,r){this.store=t,this.data=i,this.http=r,this.vm$=this.store.vm$,this.pageTitle="Register",this.errors=null,this.canProgress=!1,this.alert={type:"success",message:""},this.showAlert=!1,this.document$=(0,E.of)({name:"SignatureDocument",attachment:"<div>Hello World</div>",encoding:"WordprocessingML",extension:".docx"}),this.fileName="",this.url="",this.signatureBoxName="",this.redirectUrlAfterSignature="",this.ownerName="",this.signerName="",this.signatureName="",this.signerInitials="",this.fields=[C.F.email("email",{label:"Email",required:!0}),C.F.password("password",{label:"Password",required:!0}),C.F.input("username",{label:"Username",required:!1}),C.F.input("firstName",{label:"First name",required:!1}),C.F.input("lastName",{label:"Last name",required:!1})],this.formRowClasses="flex flex-auto",this.model={},this.options={formState:{mainModel:this.model}},this.signatureDoc="",this.steps=[{type:"stepper",templateOptions:{formClass:"flex flex-auto",onComplete:()=>this.submit()},fieldGroup:[{templateOptions:{label:"User Registration"},fieldGroup:[...this.fields]},{key:"registrantSignature",type:"file-viewer",templateOptions:{label:"Please Sign",document$:(0,E.of)(this.signatureDoc),signatureBoxName:"",redirectUrlAfterSignature:"/apps/dashboard",ownerName:"PCH",signerName:"",signerInitials:"",documentSubmit:o=>{console.log("signature",o)}},hooks:{afterViewChecked:()=>{setTimeout(()=>{this.GetTemplate("ckyuloscl0097y0veddmeuxwh")},100)},onDestroy:()=>{null!==document.getElementById("txViewer")&&typeof TXDocumentViewer<"u"&&(console.log("in the destroy",TXDocumentViewer),TXDocumentViewer)}}},{key:"thankYou",templateOptions:{label:"Thank You"},fieldGroupClassName:"grid grid-cols-1",fieldGroup:[C.F.template("\n            <div>\n              <h2>\n                Thank you for applying!\n                Ready to submit your application?\n                Click the green button below to finish the application process.\n              </h2>\n            </div>\n\n            ")]}]}]}ngOnDestroy(){null!==document.getElementById("txViewer")&&typeof TXDocumentViewer<"u"&&console.log("in the destroy",TXDocumentViewer)}submit(){return(0,K.mG)(this,void 0,void 0,function*(){console.log("submi data = ",this.model),yield this.register(this.model)})}register(t){return(0,K.mG)(this,void 0,void 0,function*(){let i="";const{name:r}=t;i=""===r||null==r?"Loan Application":r;const{email:o,phoneNumber:s,firstName:d,lastName:h,username:p,password:_}=t.userRegistration;this.store.registerEffect({email:o,phone:s,firstName:d,lastName:h,username:p,password:_})})}checkDocumentViewer(){null!==TXDocumentViewer&&(TXDocumentViewer.init({containerID:"txViewer",viewerSettings:{signatureSettings:this.GetSignatureSettingsForUser(),userNames:[],dock:1,documentData:this.signatureDoc,documentPath:"test.docx",toolbarDocked:!0,isSelectionActivated:!0,showThumbnailPane:!0,resources:null,basePath:"https://documentserver.caseclinical.com:443/MemberOnboarding"}}),TXDocumentViewer.setSubmitCallback(this.documentSubmit.bind(this)))}documentSubmit(t){this.store.user$.pipe((0,A.b)(()=>{})).subscribe()}GetSignatureSettingsForUser(){var t,i,r,o;return{ownerName:"PCH",signatureBoxName:"txsign",signerName:(null===(t=this.model)||void 0===t?void 0:t.firstName)+" "+(null===(i=this.model)||void 0===i?void 0:i.lastName),signerInitials:(null===(r=this.model)||void 0===r?void 0:r.firstName.substring(0,1))+(null===(o=this.model)||void 0===o?void 0:o.lastName.substring(0,1)),showSignatureBar:!0}}GetTemplate(t){return this.data.userTemplate({templateId:t}).pipe((0,Wt._b)(i=>{console.log(i.data),this.signatureDoc=i.data.item.attachment},i=>console.log(i)),(0,A.b)(()=>this.http.post("https://documentserver.caseclinical.com:443/MemberOnboarding/MergeRawStringDocument",{data:JSON.stringify(this.model),template:this.signatureDoc}).subscribe(r=>{const o=r.document;return this.signatureDoc=o,this.checkDocumentViewer(),o}))).subscribe()}toggleProgress(t){this.canProgress=t}}return e.\u0275fac=function(t){return new(t||e)(a.Y36(Te.Q),a.Y36(Ee.q),a.Y36(Be.eN))},e.\u0275cmp=a.Xpm({type:e,selectors:[["ng-component"]],features:[a._Bn([{provide:D.gx,useValue:{showError:!0}}])],decls:2,vars:3,consts:[[1,"bg-white","dark:bg-gray-800","py-8","px-4","shadow"],[3,"fields","model","options"]],template:function(t,i){1&t&&(a.TgZ(0,"div",0),a._UZ(1,"ui-form",1),a.qZA()),2&t&&(a.xp6(1),a.Q6J("fields",i.steps)("model",i.model)("options",i.options))},dependencies:[Oe.a],encapsulation:2}),e})();var Le=l(10265),Ne=l(70383),F=l(12687),Ve=l(48580),Pe=l(64425),He=l(73555),X=l(84080),J=l(67376),x=(l(40445),l(21281),l(95017),l(83353),l(77579));l(80188),l(61135),l(45191),l(82722),l(95698);let ae=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.oAB({type:e}),e.\u0275inj=a.cJS({imports:[J.Cl]}),e})(),ne=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.oAB({type:e}),e.\u0275inj=a.cJS({}),e})();var ri=l(47957),m=l(3238);let oi=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.oAB({type:e}),e.\u0275inj=a.cJS({imports:[F.rt,m.BQ,m.BQ]}),e})();var si=l(97855);l(37340);let di=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.oAB({type:e}),e.\u0275inj=a.cJS({imports:[si.Su,m.BQ,X.eL,m.BQ]}),e})();var Vt=l(4859),ci=l(90811);let Ii=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.oAB({type:e}),e.\u0275inj=a.cJS({imports:[m.BQ,u.ez,m.BQ]}),e})();var Ti=l(56709),w=(l(56451),l(68675),l(63900),l(29521)),M=l(24006);l(59549);const _t=new a.OlP("mat-chips-default-options");let ca=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.oAB({type:e}),e.\u0275inj=a.cJS({providers:[m.rD,{provide:_t,useValue:{separatorKeyCodes:[w.K5]}}],imports:[m.BQ,u.ez,m.si,m.BQ]}),e})();var la=l(58425),vt=l(98184),he=(l(50727),l(44144));let pa=(()=>{class e{constructor(){this.changes=new x.x,this.calendarLabel="Calendar",this.openCalendarLabel="Open calendar",this.closeCalendarLabel="Close calendar",this.prevMonthLabel="Previous month",this.nextMonthLabel="Next month",this.prevYearLabel="Previous year",this.nextYearLabel="Next year",this.prevMultiYearLabel="Previous 24 years",this.nextMultiYearLabel="Next 24 years",this.switchToMonthViewLabel="Choose date",this.switchToMultiYearViewLabel="Choose month and year",this.startDateLabel="Start date",this.endDateLabel="End date"}formatYearRange(t,i){return`${t} \u2013 ${i}`}formatYearRangeLabel(t,i){return`${t} to ${i}`}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=a.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const ka={provide:new a.OlP("mat-datepicker-scroll-strategy"),deps:[vt.aV],useFactory:function xa(e){return()=>e.scrollStrategies.reposition()}};let Ia=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.oAB({type:e}),e.\u0275inj=a.cJS({providers:[pa,ka],imports:[u.ez,Vt.ot,vt.U8,F.rt,X.eL,m.BQ,J.ZD]}),e})();var Ta=l(65938),fe=l(44850),Ea=l(49652);let Fa=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.oAB({type:e}),e.\u0275inj=a.cJS({imports:[m.uc,m.BQ,m.uc,m.BQ]}),e})();var La=l(97392),be=l(49643);let pn=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.oAB({type:e}),e.\u0275inj=a.cJS({imports:[be.Q8,u.ez,m.BQ,m.si,m.us,fe.t]}),e})();var un=l(28255),_n=l(98739),gn=l(73162),fn=l(51572),vn=l(71948),bn=l(84385),wn=l(23267),yn=l(87314),xn=l(90455);let Dn=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.oAB({type:e}),e.\u0275inj=a.cJS({imports:[vt.U8,X.eL,u.ez,Vt.ot,m.BQ,m.BQ]}),e})(),Ut=(()=>{class e{constructor(){this.changes=new x.x}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=a.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const An={provide:Ut,deps:[[new a.FiY,new a.tp0,Ut]],useFactory:function Sn(e){return e||new Ut}};let Rn=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.oAB({type:e}),e.\u0275inj=a.cJS({providers:[An],imports:[u.ez,m.BQ]}),e})(),Qn=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.oAB({type:e}),e.\u0275inj=a.cJS({imports:[m.BQ,ae,m.BQ]}),e})();var Un=l(3848);let qn=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.oAB({type:e}),e.\u0275inj=a.cJS({imports:[m.BQ,m.BQ]}),e})();var Wn=l(10266);let nr=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.oAB({type:e}),e.\u0275inj=a.cJS({imports:[ne,m.BQ,m.BQ]}),e})(),rr=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.oAB({type:e}),e.\u0275inj=a.cJS({imports:[F.rt,Ve.XD,Pe.Iq,D.U5,ae,ne,He._t,ri.Bb,oi,di,Vt.ot,ci.vV,Ii,Ti.p9,ca,la.T5,Ia,Ta.Is,fe.t,Ea.To,Fa,La.Ps,he.c,pn,un.Tx,m.XK,_n.TU,gn.Cv,fn.Cq,vn.Fk,m.si,bn.LD,wn.SJ,yn.KP,xn.rP,Dn,Rn,Qn,Un.Nh,qn,Wn.AV,nr,vt.U8,X.eL,J.Cl]}),e})();const or=[{path:"",component:Fe}];let sr=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.oAB({type:e}),e.\u0275inj=a.cJS({imports:[u.ez,Le.t,M.u5,M.UX,rr,Ne.L,N.Bz.forChild(or),xt.I,W.z]}),e})()},34077:(Ie,q,l)=>{l.d(q,{a:()=>K});var u=l(94650),N=l(24006),W=l(49821);const xt=["*"];let K=(()=>{class C{constructor(A){this.builder=A,this.fields=[],this.form=new N.cw({}),this.model={},this.options={},this.submitForm=new u.vpe}ngOnInit(){this.builder.buildForm(this.form,this.fields,this.model,this.options)}submit(){this.submitForm.emit(this.model)}}return C.\u0275fac=function(A){return new(A||C)(u.Y36(W.J8))},C.\u0275cmp=u.Xpm({type:C,selectors:[["ui-form"]],inputs:{fields:"fields",form:"form",model:"model",options:"options"},outputs:{submitForm:"submitForm"},ngContentSelectors:xt,decls:6,vars:6,consts:[["novalidate","",1,"w-full",3,"formGroup","ngSubmit"],[3,"fields","form","model","options"],["type","submit",2,"display","none",3,"disabled"]],template:function(A,D){1&A&&(u.F$t(),u.TgZ(0,"form",0),u.NdJ("ngSubmit",function(){return D.submitForm.emit(D.model)}),u.TgZ(1,"div"),u._UZ(2,"formly-form",1),u.TgZ(3,"button",2),u._uU(4,"submit"),u.qZA()(),u.Hsn(5),u.qZA()),2&A&&(u.Q6J("formGroup",D.form),u.xp6(2),u.Q6J("fields",D.fields)("form",D.form)("model",D.model)("options",D.options),u.xp6(1),u.Q6J("disabled",D.form.touched&&!D.form.valid))},dependencies:[W.T7,N._Y,N.JL,N.sg],encapsulation:2,changeDetection:0}),C})()}}]);