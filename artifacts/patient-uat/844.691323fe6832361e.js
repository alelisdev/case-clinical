"use strict";(self.webpackChunkpatient=self.webpackChunkpatient||[]).push([[844],{59443:(Fr,Ee,ae)=>{ae.d(Ee,{r:()=>Le});var w=ae(24280),x=ae(60515),I=ae(18505),R=ae(63900),V=ae(11365),H=ae(70262),g=ae(94650),k=ae(73602),C=ae(30144),h=ae(71873),F=ae(4523),te=ae(56869),e=ae(71767),E=ae(39646);class A extends e.T_{constructor(de){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=de}Do(de){return this.businessProvider=de,this.serviceContext=de.serviceContext,this.loggingService=de.loggingService,this.execute(),this.response}}var X=ae(26177);class q extends A{constructor(de){super("ValidateDiagnosisCodeExcelDataAction"),this.valid=!1,this.excelData=de}preValidateAction(){const de=[];this.excelData.map((le,re)=>{de.push(le.name)}),this.validationContext.addRule(new X.cL("nameIsUnique","Name should be unique",de,!0))}performAction(){}finish(){super.finish();const de={};let le=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(re=>{re instanceof X.mi?re.isValid||(de[re.columnName]?de[re.columnName].newNames.includes(re.newName)||de[re.columnName].newNames.push(re.newName):de[re.columnName]={options:re.possibleValueList.map(ce=>ce.name),newNames:[re.newName]}):re instanceof X.cL&&(re.isValid||(le=re.conflicts))})):this.valid=!0,this.response=(0,E.of)({valid:this.valid,excelData:this.excelData,conflictNames:le,unknownNames:de})}}var O=ae(28234);class y extends X.wS{constructor(de,le,re,ce,fe){super(de,le,re,ce,fe,!0)}}class T extends X.ul{constructor(de,le,re,ce=!1){super(de,le,ce),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=re,this.configureRules()}configureRules(){this.rules.push(new X.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new y("name","The diagnosiscode name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class Ne extends A{constructor(de){super("CreateDiagnosisCodeAction"),this.input=de}preValidateAction(){this.validationContext.addRule(new T("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateDiagnosisCode({input:this.input}).pipe((0,R.w)(de=>(0,O.of)(de.data.created)))}}class f extends A{constructor(de){super("UpdateDiagnosisCodesAction"),this.diagnosisCodes=de}preValidateAction(){this.validationContext.addRule(new X.DJ("Input","Input should have values",this.diagnosisCodes,!0))}performAction(){this.response=this.businessProvider.data.userUpdateDiagnosisCodes({input:{diagnosisCodes:this.diagnosisCodes}}).pipe((0,R.w)(de=>(0,E.of)(de.data.updated)))}}class Oe extends A{constructor(de,le){super("UpdateDiagnosisCodeAction"),this.diagnosisCode=de,this.diagnosisCodeId=le}preValidateAction(){this.validationContext.addRule(new X.DJ("Input","Input should have values",this.diagnosisCode,!0)).addRule(new X.xF("Id","Id should be a CUID and not null",this.diagnosisCodeId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateDiagnosisCode({diagnosisCodeId:this.diagnosisCodeId,input:this.diagnosisCode}).pipe((0,R.w)(de=>(0,E.of)(de.data.updated)))}}let ie=(()=>{class he extends e.nH{constructor(le,re,ce){super("NotificationService.DiagnosisCodeBusinessProviderService",le,ce),this.data=re}createDiagnosisCode(le){const re=new Ne(le);return re.Do(this),re.response}updateDiagnosisCode(le,re){const ce=new Oe(le,re);return ce.Do(this),ce.response}importDiagnosisCodes(le){const re=new f(le);return re.Do(this),re.response}validateDiagnosisCodeExcelData(le){const re=new q(le);return re.Do(this),re.response}}return he.\u0275fac=function(le){return new(le||he)(g.LFG(te.ed),g.LFG(k.q),g.LFG(e.oI))},he.\u0275prov=g.Yz7({token:he,factory:he.\u0275fac,providedIn:"root"}),he})(),Me=(()=>{class he extends e.nH{constructor(le,re,ce){super("DiagnosisCodeService",ce,le),this.businessProvider=re}createDiagnosisCode(le){return this.businessProvider.createDiagnosisCode(le)}updateDiagnosisCode(le,re){return this.businessProvider.updateDiagnosisCode(le,re)}importDiagnosisCodes(le){return this.businessProvider.importDiagnosisCodes(le)}validateDiagnosisCodeExcelData(le){return this.businessProvider.validateDiagnosisCodeExcelData(le)}}return he.\u0275fac=function(le){return new(le||he)(g.LFG(ie,8),g.LFG(ie),g.LFG(te.ed))},he.\u0275prov=g.Yz7({token:he,factory:he.\u0275fac,providedIn:"root"}),he})(),Le=(()=>{class he extends w.m1{constructor(le,re,ce,fe,J,z){super({loading:!1,diagnosisCodes:[],done:!1,searchQuery:"",formName:void 0,paging:{limit:1e4,skip:0}}),this.data=le,this.router=re,this.route=ce,this.toast=fe,this.formService=J,this.diagnosisCodeService=z,this.errors$=this.select(W=>W.errors),this.loading$=this.select(W=>W.loading),this.done$=this.select(W=>W.done),this.item$=this.select(W=>W.item),this.diagnosisCodes$=this.select(W=>W.diagnosisCodes),this.paging$=this.select(W=>W.paging),this.searchQuery$=this.select(W=>W.searchQuery),this.formName$=this.select(W=>W.formName),this.actionResult$=this.select(this.item$,this.done$,(W,S)=>({item:W,done:S}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.diagnosisCodes$,(W,S,N,oe,pe)=>({errors:W,loading:S,item:N,formName:oe,diagnosisCodes:pe}),{debounce:!0}),this.input$=this.select(this.paging$,this.searchQuery$,(W,S)=>({limit:W.limit,skip:W.skip,name:S,total:W.total})),this.setFormName=this.updater((W,S)=>Object.assign(Object.assign({},W),{formName:S})),this.setItem=this.updater((W,S)=>Object.assign(Object.assign({},W),{item:S})),this.addNewDiagnosisCode=this.updater((W,S)=>Object.assign(Object.assign({},W),{diagnosisCodes:[...W.diagnosisCodes,S]})),this.updateDiagnosisCode=this.updater((W,S)=>Object.assign(Object.assign({},W),{diagnosisCodes:W.diagnosisCodes.map(N=>N.id===S.id?S:N)})),this.addDiagnosisCodes=this.updater((W,S)=>Object.assign(Object.assign({},W),{diagnosisCodes:W.diagnosisCodes.concat(S)})),this.updateDiagnosisCodes=this.updater((W,S)=>Object.assign(Object.assign({},W),{diagnosisCodes:W.diagnosisCodes.map(N=>S.find(pe=>pe.id===N.id)||N)})),this.setSearchQuery=this.updater((W,S)=>Object.assign(Object.assign({},W),{searchQuery:S})),this.loadDiagnosisCodeEffect=this.effect(W=>W.pipe((0,I.b)(()=>this.patchState({loading:!0})),(0,R.w)(S=>this.data.userDiagnosisCode({diagnosisCodeId:S}).pipe((0,w._b)(N=>{this.patchState({item:N.data.item,errors:N.errors,loading:!1})},N=>this.patchState({loading:!1,errors:N.graphQLErrors?N.graphQLErrors:N})))))),this.loadDiagnosisCodesEffect=this.effect(W=>W.pipe((0,I.b)(()=>this.patchState({loading:!0})),(0,V.M)(this.input$),(0,R.w)(([S,N])=>this.data.userDiagnosisCodes({input:N}).pipe((0,w._b)(oe=>this.patchState({paging:{limit:N.limit,skip:N.skip,total:oe.data.count.total},diagnosisCodes:oe.data.items,errors:oe.errors,loading:!1}),oe=>this.patchState({loading:!1,errors:oe.graphQLErrors?oe.graphQLErrors:oe})))))),this.createDiagnosisCodeEffect=this.effect(W=>W.pipe((0,I.b)(()=>this.patchState({loading:!0})),(0,R.w)(S=>this.diagnosisCodeService.createDiagnosisCode(Object.assign({},S)).pipe((0,w._b)(N=>{this.addNewDiagnosisCode(N),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:N,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},N=>{N.graphQLErrors?(this.toast.error(N.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:N.graphQLErrors?N.graphQLErrors:N})):(this.toast.error(N.Message),this.formService.setErrors(N.Data))}))))),this.updateDiagnosisCodeEffect=this.effect(W=>W.pipe((0,I.b)(()=>this.patchState({loading:!0})),(0,V.M)(this.item$),(0,R.w)(([S,N])=>this.diagnosisCodeService.updateDiagnosisCode(S,S.id).pipe((0,w._b)(oe=>{this.updateDiagnosisCode(oe),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:oe,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},oe=>{oe.graphQLErrors?(this.toast.error(oe.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:oe.graphQLErrors?oe.graphQLErrors:oe})):(this.toast.error(oe.Message),this.formService.setErrors(oe.Data))}))))),this.deleteDiagnosisCodeEffect=this.effect(W=>W.pipe((0,I.b)(()=>this.patchState({loading:!0})),(0,V.M)(this.item$),(0,R.w)(([S,N])=>this.data.userDeleteDiagnosisCode({diagnosisCodeId:N.id}).pipe((0,w._b)(oe=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:oe.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},oe=>{oe.graphQLErrors?(this.toast.error(oe.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:oe.graphQLErrors?oe.graphQLErrors:oe})):(this.toast.error(oe.Message),this.formService.setErrors(oe.Data))}))))),this.importExcelEffect=this.effect(W=>W.pipe((0,I.b)(()=>this.patchState({loading:!0})),(0,R.w)(S=>this.diagnosisCodeService.importDiagnosisCodes(S).pipe((0,H.K)(N=>{var oe;return this.toast.error(null!==(oe=N.Message)&&void 0!==oe?oe:"Failed to save",{duration:3e3}),x.E}),(0,I.b)(N=>{const oe=JSON.parse(N.created),pe=JSON.parse(N.updated),_e=JSON.parse(N.failed),Ce=oe.length+pe.length+_e.length;this.addDiagnosisCodes(oe),this.updateDiagnosisCodes(pe),this.toast.success(`${oe.length} created, ${pe.length} updated, ${_e.length} failed of total ${Ce}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("diagnosisCodeId")?(this.route.snapshot.paramMap.get("diagnosisCodeId"),this.setFormName("diagnosisCode_edit")):this.setFormName("diagnosisCode_create")}validateImportData(le){return this.vm$.pipe((0,R.w)(re=>this.diagnosisCodeService.validateDiagnosisCodeExcelData(le)))}}return he.\u0275fac=function(le){return new(le||he)(g.LFG(k.q),g.LFG(C.F0),g.LFG(C.gz),g.LFG(h.F),g.LFG(F.o),g.LFG(Me))},he.\u0275prov=g.Yz7({token:he,factory:he.\u0275fac}),he})()},19647:(Fr,Ee,ae)=>{ae.d(Ee,{d:()=>he});var w=ae(24280),x=ae(60515),I=ae(54004),R=ae(18505),V=ae(63900),H=ae(11365),g=ae(70262),k=ae(94650),C=ae(73602),h=ae(30144),F=ae(71873),te=ae(4523),e=ae(56869),E=ae(71767),A=ae(39646);class X extends E.T_{constructor(le){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=le}Do(le){return this.businessProvider=le,this.serviceContext=le.serviceContext,this.loggingService=le.loggingService,this.execute(),this.response}}var q=ae(26177);class O extends X{constructor(le,re,ce,fe,J,z,Te,W,S,N,oe){super("ValidateLegalCaseExcelDataAction"),this.valid=!1,this.excelData=le,this.accidentTypes=re,this.patients=ce,this.medLevels=fe,this.firms=J,this.attorneys=z,this.caseStatuses=Te,this.caseTypes=W,this.patientTreatmentStatuses=S,this.caseProgressStatuses=N,this.adverseInsuranceStatuses=oe}preValidateAction(){const le=[];this.excelData.map((re,ce)=>{le.push(re.name),this.validationContext.addRule(new q.mi(`accidentTypeName_${ce}_is_valid}`,"Accident Type Is Not Valid","accidentType.name",re.accidentType,this.accidentTypes,!0)),this.validationContext.addRule(new q.mi(`patientName_${ce}_is_valid}`,"Patient Is Not Valid","patient.name",re.patient,this.patients,!0)),this.validationContext.addRule(new q.mi(`medLevelName_${ce}_is_valid}`,"Med Level Is Not Valid","medLevel.name",re.medLevel,this.medLevels,!0)),this.validationContext.addRule(new q.mi(`firmName_${ce}_is_valid}`,"Firm Is Not Valid","firm.name",re.firm,this.firms,!0)),this.validationContext.addRule(new q.mi(`attorneyName_${ce}_is_valid}`,"Attorney Is Not Valid","attorney.name",re.attorney,this.attorneys,!0)),this.validationContext.addRule(new q.mi(`caseStatusName_${ce}_is_valid}`,"Case Status Is Not Valid","caseStatus.name",re.caseStatus,this.caseStatuses,!0)),this.validationContext.addRule(new q.mi(`caseTypeName_${ce}_is_valid}`,"Case Type Is Not Valid","caseType.name",re.caseType,this.caseTypes,!0)),this.validationContext.addRule(new q.mi(`patientTreatmentStatusName_${ce}_is_valid}`,"Patient Treatment Status Is Not Valid","patientTreatmentStatus.name",re.patientTreatmentStatus,this.patientTreatmentStatuses,!0)),this.validationContext.addRule(new q.mi(`caseProgressStatusName_${ce}_is_valid}`,"Case Progress Status Is Not Valid","caseProgressStatus.name",re.caseProgressStatus,this.caseProgressStatuses,!0)),this.validationContext.addRule(new q.mi(`adverseInsuranceStatusName_${ce}_is_valid}`,"Adverse Insurance Status Is Not Valid","adverseInsuranceStatus.name",re.adverseInsuranceStatus,this.adverseInsuranceStatuses,!0))}),this.validationContext.addRule(new q.cL("nameIsUnique","Name should be unique",le,!0))}performAction(){}finish(){super.finish();const le={};let re=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(ce=>{ce instanceof q.mi?ce.isValid||(le[ce.columnName]?le[ce.columnName].newNames.includes(ce.newName)||le[ce.columnName].newNames.push(ce.newName):le[ce.columnName]={options:ce.possibleValueList.map(fe=>fe.name),newNames:[ce.newName]}):ce instanceof q.cL&&(ce.isValid||(re=ce.conflicts))})):this.valid=!0,this.response=(0,A.of)({valid:this.valid,excelData:this.excelData,conflictNames:re,unknownNames:le})}}var y=ae(28234);class T extends q.wS{constructor(le,re,ce,fe,J){super(le,re,ce,fe,J,!0)}}class Ne extends q.ul{constructor(le,re,ce,fe=!1){super(le,re,fe),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=ce,this.configureRules()}configureRules(){this.rules.push(new q.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new T("name","The legalcase name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class f extends X{constructor(le){super("CreateLegalCaseAction"),this.input=le}preValidateAction(){this.validationContext.addRule(new Ne("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateLegalCase({input:this.input}).pipe((0,V.w)(le=>(0,y.of)(le.data.created)))}}class Oe extends X{constructor(le){super("UpdateLegalCasesAction"),this.legalCases=le}preValidateAction(){this.validationContext.addRule(new q.DJ("Input","Input should have values",this.legalCases,!0))}performAction(){this.response=this.businessProvider.data.userUpdateLegalCases({input:{legalCases:this.legalCases}}).pipe((0,V.w)(le=>(0,A.of)(le.data.updated)))}}class ie extends X{constructor(le,re){super("UpdateLegalCaseAction"),this.legalCase=le,this.legalCaseId=re}preValidateAction(){this.validationContext.addRule(new q.DJ("Input","Input should have values",this.legalCase,!0)).addRule(new q.xF("Id","Id should be a CUID and not null",this.legalCaseId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateLegalCase({legalCaseId:this.legalCaseId,input:this.legalCase}).pipe((0,V.w)(le=>(0,A.of)(le.data.updated)))}}let Me=(()=>{class de extends E.nH{constructor(re,ce,fe){super("NotificationService.LegalCaseBusinessProviderService",re,fe),this.data=ce}createLegalCase(re){const ce=new f(re);return ce.Do(this),ce.response}updateLegalCase(re,ce){const fe=new ie(re,ce);return fe.Do(this),fe.response}importLegalCases(re){const ce=new Oe(re);return ce.Do(this),ce.response}validateLegalCaseExcelData(re,ce,fe,J,z,Te,W,S,N,oe,pe){const _e=new O(re,ce,fe,J,z,Te,W,S,N,oe,pe);return _e.Do(this),_e.response}}return de.\u0275fac=function(re){return new(re||de)(k.LFG(e.ed),k.LFG(C.q),k.LFG(E.oI))},de.\u0275prov=k.Yz7({token:de,factory:de.\u0275fac,providedIn:"root"}),de})(),Le=(()=>{class de extends E.nH{constructor(re,ce,fe){super("LegalCaseService",fe,re),this.businessProvider=ce}createLegalCase(re){const ce=Object.fromEntries(Object.entries(re).filter(([fe,J])=>null!==J));return this.businessProvider.createLegalCase(ce)}updateLegalCase(re,ce){return this.businessProvider.updateLegalCase(re,ce)}importLegalCases(re){return this.businessProvider.importLegalCases(re)}validateLegalCaseExcelData(re,ce,fe,J,z,Te,W,S,N,oe,pe){return this.businessProvider.validateLegalCaseExcelData(re,ce,fe,J,z,Te,W,S,N,oe,pe)}}return de.\u0275fac=function(re){return new(re||de)(k.LFG(Me,8),k.LFG(Me),k.LFG(e.ed))},de.\u0275prov=k.Yz7({token:de,factory:de.\u0275fac,providedIn:"root"}),de})(),he=(()=>{class de extends w.m1{constructor(re,ce,fe,J,z,Te){if(super({loading:!1,legalCases:[],done:!1,searchQuery:"",formName:void 0,accidentTypeId:void 0,patientId:void 0,medLevelId:void 0,firmId:void 0,attorneyId:void 0,caseStatusId:void 0,caseTypeId:void 0,patientTreatmentStatusId:void 0,caseProgressStatusId:void 0,adverseInsuranceStatusId:void 0,legalCaseUpdates:[],mrnNumber:void 0,currentLegalCaseId:void 0,paging:{limit:1e4,skip:0},summary:[{month:"Jan",settlement:45,prorata:78},{month:"Feb",settlement:50,prorata:82},{month:"Mar",settlement:70,prorata:110},{month:"Apr",settlement:76,prorata:90}]}),this.data=re,this.router=ce,this.route=fe,this.toast=J,this.formService=z,this.legalCaseService=Te,this.errors$=this.select(W=>W.errors),this.loading$=this.select(W=>W.loading),this.summary$=this.select(W=>W.summary),this.done$=this.select(W=>W.done),this.currentLegalCaseId$=this.select(W=>W.currentLegalCaseId),this.item$=this.select(W=>{var S,N,oe,pe,_e,Ce,ye,Se,Q,U,j;if(W.item){let K=0,Ae=0;null===(N=null===(S=W.item)||void 0===S?void 0:S.insurances)||void 0===N||N.map(ge=>{var be,Y;ge.minimumCoverageAmount=null!==(be=ge.minimumCoverageAmount)&&void 0!==be?be:0,ge.maximumCoverageAmount=null!==(Y=ge.maximumCoverageAmount)&&void 0!==Y?Y:0,K+=ge.minimumCoverageAmount}),null===(pe=null===(oe=W.item)||void 0===oe?void 0:oe.priorMedsToDates)||void 0===pe||pe.map(ge=>{var be;ge.amount=null!==(be=ge.amount)&&void 0!==be?be:0,Ae+=ge.amount});const Fe=null===(ye=null===(Ce=null===(_e=W.item)||void 0===_e?void 0:_e.caseProcedures)||void 0===Ce?void 0:Ce.map(ge=>ge.estimate))||void 0===ye?void 0:ye.reduce((ge,be)=>ge+be,0),Z=null===(U=null===(Q=null===(Se=W.item)||void 0===Se?void 0:Se.caseAccounts)||void 0===Q?void 0:Q.map(ge=>ge.contractedAmount))||void 0===U?void 0:U.reduce((ge,be)=>ge+be,0);return Object.assign(Object.assign({},W.item),{sumOfMinAmount:K.toFixed(2),totalPendingRequestEstimate:Fe.toFixed(2),sumOfPriorMedsToDateAmount:Ae.toFixed(2),totalCaseAccountsSiteCost:Z.toFixed(2),totalMedsToDates:null===(j=Fe+Ae+Z)||void 0===j?void 0:j.toFixed(2)})}}),this.legalCases$=this.select(W=>W.legalCases),this.legalCaseUpdates$=this.select(W=>W.legalCaseUpdates),this.accidentTypes$=this.select(W=>W.accidentTypes||[]),this.patients$=this.select(W=>W.patients||[]),this.medLevels$=this.select(W=>W.medLevels||[]),this.firms$=this.select(W=>W.firms||[]),this.attorneys$=this.select(W=>W.attorneys||[]),this.caseStatuses$=this.select(W=>W.caseStatuses||[]),this.caseTypes$=this.select(W=>W.caseTypes||[]),this.mrnNumber$=this.select(W=>W.mrnNumber||""),this.patientTreatmentStatuses$=this.select(W=>W.patientTreatmentStatuses||[]),this.caseProgressStatuses$=this.select(W=>W.caseProgressStatuses||[]),this.adverseInsuranceStatuses$=this.select(W=>W.adverseInsuranceStatuses||[]),this.accidentTypeId$=this.select(W=>W.accidentTypeId),this.patientId$=this.select(W=>W.patientId),this.medLevelId$=this.select(W=>W.medLevelId),this.firmId$=this.select(W=>W.firmId),this.attorneyId$=this.select(W=>W.attorneyId),this.caseStatusId$=this.select(W=>W.caseStatusId),this.caseTypeId$=this.select(W=>W.caseTypeId),this.patientTreatmentStatusId$=this.select(W=>W.patientTreatmentStatusId),this.caseProgressStatusId$=this.select(W=>W.caseProgressStatusId),this.adverseInsuranceStatusId$=this.select(W=>W.adverseInsuranceStatusId),this.paging$=this.select(W=>W.paging),this.searchQuery$=this.select(W=>W.searchQuery),this.formName$=this.select(W=>W.formName),this.actionResult$=this.select(this.item$,this.done$,(W,S)=>({item:W,done:S}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.legalCases$,this.accidentTypes$,this.patients$,this.medLevels$,this.firms$,this.attorneys$,this.caseStatuses$,this.caseTypes$,this.patientTreatmentStatuses$,this.caseProgressStatuses$,this.adverseInsuranceStatuses$,this.mrnNumber$,(W,S,N,oe,pe,_e,Ce,ye,Se,Q,U,j,K,Ae,Fe,Z)=>({errors:W,loading:S,item:N,formName:oe,legalCases:pe,accidentTypes:_e,patients:Ce,medLevels:ye,firms:Se,attorneys:Q,caseStatuses:U,caseTypes:j,patientTreatmentStatuses:K,caseProgressStatuses:Ae,adverseInsuranceStatuses:Fe,mrnNumber:Z}),{debounce:!0}),this.input$=this.select(this.paging$,this.accidentTypeId$,this.patientId$,this.medLevelId$,this.firmId$,this.attorneyId$,this.caseStatusId$,this.caseTypeId$,this.patientTreatmentStatusId$,this.caseProgressStatusId$,this.adverseInsuranceStatusId$,this.searchQuery$,(W,S,N,oe,pe,_e,Ce,ye,Se,Q,U,j)=>({limit:W.limit,skip:W.skip,name:j,accidentTypeId:S,patientId:N,medLevelId:oe,firmId:pe,attorneyId:_e,caseStatusId:Ce,caseTypeId:ye,patientTreatmentStatusId:Se,caseProgressStatusId:Q,adverseInsuranceStatusId:U,total:W.total})),this.setFormName=this.updater((W,S)=>Object.assign(Object.assign({},W),{formName:S})),this.setAccidentTypeId=this.updater((W,S)=>Object.assign(Object.assign({},W),{accidentTypeId:S})),this.setPatientId=this.updater((W,S)=>Object.assign(Object.assign({},W),{patientId:S})),this.setMedLevelId=this.updater((W,S)=>Object.assign(Object.assign({},W),{medLevelId:S})),this.setFirmId=this.updater((W,S)=>Object.assign(Object.assign({},W),{firmId:S})),this.setAttorneyId=this.updater((W,S)=>Object.assign(Object.assign({},W),{attorneyId:S})),this.setCaseStatusId=this.updater((W,S)=>Object.assign(Object.assign({},W),{caseStatusId:S})),this.setCurrentLegalCaseId=this.updater((W,S)=>Object.assign(Object.assign({},W),{currentLegalCaseId:S})),this.setCaseTypeId=this.updater((W,S)=>Object.assign(Object.assign({},W),{caseTypeId:S})),this.setPatientTreatmentStatusId=this.updater((W,S)=>Object.assign(Object.assign({},W),{patientTreatmentStatusId:S})),this.setCaseProgressStatusId=this.updater((W,S)=>Object.assign(Object.assign({},W),{caseProgressStatusId:S})),this.setAdverseInsuranceStatusId=this.updater((W,S)=>Object.assign(Object.assign({},W),{adverseInsuranceStatusId:S})),this.setLimit=this.updater((W,S)=>Object.assign(Object.assign({},W),{paging:Object.assign(Object.assign({},W.paging),{limit:S})})),this.setSkip=this.updater((W,S)=>Object.assign(Object.assign({},W),{paging:Object.assign(Object.assign({},W.paging),{skip:S})})),this.filterAccidentTypes=W=>this.data.userSelectAccidentTypes({input:{name:W}}).pipe((0,w._b)(S=>{const N=S.data.items;return this.patchState({accidentTypes:N}),N},S=>this.patchState({errors:S.graphQLErrors?S.graphQLErrors:S})),(0,I.U)(S=>S.data.items)),this.filterPatients=W=>this.data.userSelectPatients({input:{name:W}}).pipe((0,w._b)(S=>{const N=S.data.items;return this.patchState({patients:N}),N},S=>this.patchState({errors:S.graphQLErrors?S.graphQLErrors:S})),(0,I.U)(S=>S.data.items)),this.filterMedLevels=W=>this.data.userSelectMedLevels({input:{name:W}}).pipe((0,w._b)(S=>{const N=S.data.items;return this.patchState({medLevels:N}),N},S=>this.patchState({errors:S.graphQLErrors?S.graphQLErrors:S})),(0,I.U)(S=>S.data.items)),this.filterFirms=W=>this.data.userSelectFirms({input:{name:W}}).pipe((0,w._b)(S=>{const N=S.data.items;return this.patchState({firms:N}),N},S=>this.patchState({errors:S.graphQLErrors?S.graphQLErrors:S})),(0,I.U)(S=>S.data.items)),this.filterAttorneys=W=>this.data.userSelectAttorneys({input:{name:W}}).pipe((0,w._b)(S=>{const N=S.data.items;return this.patchState({attorneys:N}),N},S=>this.patchState({errors:S.graphQLErrors?S.graphQLErrors:S})),(0,I.U)(S=>S.data.items)),this.filterCaseStatuses=W=>this.data.userSelectCaseStatuses({input:{name:W}}).pipe((0,w._b)(S=>{const N=S.data.items;return this.patchState({caseStatuses:N}),N},S=>this.patchState({errors:S.graphQLErrors?S.graphQLErrors:S})),(0,I.U)(S=>S.data.items)),this.filterCaseTypes=W=>this.data.userSelectCaseTypes({input:{name:W}}).pipe((0,w._b)(S=>{const N=S.data.items;return this.patchState({caseTypes:N}),N},S=>this.patchState({errors:S.graphQLErrors?S.graphQLErrors:S})),(0,I.U)(S=>S.data.items)),this.filterPatientTreatmentStatuses=W=>this.data.userSelectPatientTreatmentStatuses({input:{name:W}}).pipe((0,w._b)(S=>{const N=S.data.items;return this.patchState({patientTreatmentStatuses:N}),N},S=>this.patchState({errors:S.graphQLErrors?S.graphQLErrors:S})),(0,I.U)(S=>S.data.items)),this.filterCaseProgressStatuses=W=>this.data.userSelectCaseProgressStatuses({input:{name:W}}).pipe((0,w._b)(S=>{const N=S.data.items;return this.patchState({caseProgressStatuses:N}),N},S=>this.patchState({errors:S.graphQLErrors?S.graphQLErrors:S})),(0,I.U)(S=>S.data.items)),this.filterAdverseInsuranceStatuses=W=>this.data.userSelectAdverseInsuranceStatuses({input:{name:W}}).pipe((0,w._b)(S=>{const N=S.data.items;return this.patchState({adverseInsuranceStatuses:N}),N},S=>this.patchState({errors:S.graphQLErrors?S.graphQLErrors:S})),(0,I.U)(S=>S.data.items)),this.addAccidentType=this.updater((W,S)=>Object.assign(Object.assign({},W),{accidentTypes:W.accidentTypes.concat(S)})),this.addPatient=this.updater((W,S)=>Object.assign(Object.assign({},W),{patients:W.patients.concat(S)})),this.addMedLevel=this.updater((W,S)=>Object.assign(Object.assign({},W),{medLevels:W.medLevels.concat(S)})),this.addFirm=this.updater((W,S)=>Object.assign(Object.assign({},W),{firms:W.firms.concat(S)})),this.addAttorney=this.updater((W,S)=>Object.assign(Object.assign({},W),{attorneys:W.attorneys.concat(S)})),this.addCaseStatus=this.updater((W,S)=>Object.assign(Object.assign({},W),{caseStatuses:W.caseStatuses.concat(S)})),this.addCaseType=this.updater((W,S)=>Object.assign(Object.assign({},W),{caseTypes:W.caseTypes.concat(S)})),this.addPatientTreatmentStatus=this.updater((W,S)=>Object.assign(Object.assign({},W),{patientTreatmentStatuses:W.patientTreatmentStatuses.concat(S)})),this.addCaseProgressStatus=this.updater((W,S)=>Object.assign(Object.assign({},W),{caseProgressStatuses:W.caseProgressStatuses.concat(S)})),this.addAdverseInsuranceStatus=this.updater((W,S)=>Object.assign(Object.assign({},W),{adverseInsuranceStatuses:W.adverseInsuranceStatuses.concat(S)})),this.setItem=this.updater((W,S)=>Object.assign(Object.assign({},W),{item:S})),this.addNewLegalCase=this.updater((W,S)=>Object.assign(Object.assign({},W),{legalCases:[...W.legalCases,S]})),this.updateLegalCase=this.updater((W,S)=>Object.assign(Object.assign({},W),{legalCases:W.legalCases.map(N=>N.id===S.id?S:N)})),this.addLegalCases=this.updater((W,S)=>Object.assign(Object.assign({},W),{legalCases:W.legalCases.concat(S)})),this.updateLegalCases=this.updater((W,S)=>Object.assign(Object.assign({},W),{legalCases:W.legalCases.map(N=>S.find(pe=>pe.id===N.id)||N)})),this.setSearchQuery=this.updater((W,S)=>Object.assign(Object.assign({},W),{searchQuery:S})),this.loadLegalCaseEffect=this.effect(W=>W.pipe((0,R.b)(()=>this.patchState({loading:!0})),(0,V.w)(S=>(this.setCurrentLegalCaseId(S),this.data.userLegalCase({legalCaseId:S}).pipe((0,w._b)(N=>{var oe,pe,_e,Ce;return null===(pe=null===(oe=N.data.item)||void 0===oe?void 0:oe.caseProcedures)||void 0===pe||pe.map(Se=>{var Q;return Object.assign(Object.assign({},Se),{estimate:null===(Q=Se.procedureVendors)||void 0===Q?void 0:Q.map(U=>U.estimate).reduce((U,j)=>U+j)})}),console.log("caseAccounts:",N.data.item.caseAccounts),this.patchState({item:Object.assign(Object.assign({},N.data.item),{caseProcedures:null===(Ce=null===(_e=N.data.item)||void 0===_e?void 0:_e.caseProcedures)||void 0===Ce?void 0:Ce.map(Se=>{var Q;return Object.assign(Object.assign({},Se),{estimate:null===(Q=Se.procedureVendors)||void 0===Q?void 0:Q.map(U=>U.estimate).reduce((U,j)=>U+j)})})}),errors:N.errors,loading:!1})},N=>this.patchState({loading:!1,errors:N.graphQLErrors?N.graphQLErrors:N}))))))),this.loadLegalCasesEffect=this.effect(W=>W.pipe((0,R.b)(()=>this.patchState({loading:!0})),(0,H.M)(this.input$),(0,V.w)(([S,N])=>this.data.userLegalCases({input:N}).pipe((0,w._b)(oe=>this.patchState({paging:{limit:N.limit,skip:N.skip,total:oe.data.count.total},legalCases:oe.data.items,errors:oe.errors,loading:!1}),oe=>this.patchState({loading:!1,errors:oe.graphQLErrors?oe.graphQLErrors:oe})))))),this.loadLegalCasesUpdatesEffect=this.effect(W=>W.pipe((0,R.b)(()=>this.patchState({loading:!0})),(0,V.w)(()=>this.data.userLegalCaseUpdates().pipe((0,w._b)(S=>this.patchState({legalCaseUpdates:S.data.legalCases,errors:S.errors,loading:!1}),S=>this.patchState({loading:!1,errors:S.graphQLErrors?S.graphQLErrors:S})))))),this.createLegalCaseEffect=this.effect(W=>W.pipe((0,R.b)(()=>this.patchState({loading:!0})),(0,V.w)(S=>this.legalCaseService.createLegalCase(Object.assign({},S)).pipe((0,w._b)(N=>{this.addNewLegalCase(N),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:N,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},N=>{N.graphQLErrors?(this.toast.error(N.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:N.graphQLErrors?N.graphQLErrors:N})):(this.toast.error(N.Message),this.formService.setErrors(N.Data))}))))),this.createPatientDocumentEffect=this.effect(W=>W.pipe((0,R.b)(()=>this.patchState({loading:!0})),(0,V.w)(S=>(S.patientId=this.get().item.patientId,console.log(S.patientId),this.data.userCreateDocument({input:S}).pipe((0,I.U)(N=>console.log(N.data.created))))))),this.getMrnNumberEffect=this.effect(W=>W.pipe((0,R.b)(()=>this.patchState({loading:!0})),(0,V.w)(S=>(console.log(S),this.data.getPatientMrnNumber({dateOfBirth:S.dateOfBirth,dateOfLoss:S.dateOfLoss,accidentKind:S.accidentKind,legalCaseId:S.legalCaseId}).pipe((0,I.U)(N=>console.log("Mrn Output",N.data.patientMrn))))))),this.updateLegalCaseEffect=this.effect(W=>W.pipe((0,R.b)(()=>this.patchState({loading:!0})),(0,H.M)(this.item$),(0,V.w)(([S,N])=>this.legalCaseService.updateLegalCase(S,S.id).pipe((0,w._b)(oe=>{this.updateLegalCase(oe),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:oe,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},oe=>{oe.graphQLErrors?(this.toast.error(oe.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:oe.graphQLErrors?oe.graphQLErrors:oe})):(this.toast.error(oe.Message),this.formService.setErrors(oe.Data))}))))),this.deleteLegalCaseEffect=this.effect(W=>W.pipe((0,R.b)(()=>this.patchState({loading:!0})),(0,H.M)(this.item$),(0,V.w)(([S,N])=>this.data.userDeleteLegalCase({legalCaseId:N.id}).pipe((0,w._b)(oe=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:oe.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},oe=>{oe.graphQLErrors?(this.toast.error(oe.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:oe.graphQLErrors?oe.graphQLErrors:oe})):(this.toast.error(oe.Message),this.formService.setErrors(oe.Data))}))))),this.importExcelEffect=this.effect(W=>W.pipe((0,R.b)(()=>this.patchState({loading:!0})),(0,V.w)(S=>this.legalCaseService.importLegalCases(S).pipe((0,g.K)(N=>{var oe;return this.toast.error(null!==(oe=N.Message)&&void 0!==oe?oe:"Failed to save",{duration:3e3}),x.E}),(0,R.b)(N=>{const oe=JSON.parse(N.created),pe=JSON.parse(N.updated),_e=JSON.parse(N.failed),Ce=oe.length+pe.length+_e.length;this.addLegalCases(oe),this.updateLegalCases(pe),this.toast.success(`${oe.length} created, ${pe.length} updated, ${_e.length} failed of total ${Ce}`,{duration:3e3})}))))),this.updateCaseStatusEffect=this.effect(W=>W.pipe((0,R.b)(S=>{this.patchState({loading:!0})}),(0,V.w)(S=>this.data.userUpdateLegalCase({legalCaseId:S.legalCaseId,input:{name:S.name,firmId:S.firmId,patientId:S.patientId,caseStatusId:S.caseStatusId}}).pipe((0,w._b)(N=>{var oe,pe,_e;this.toast.success(`Successfully updated case status to ${null!==(_e=null===(pe=null===(oe=N.data.updated)||void 0===oe?void 0:oe.caseStatus)||void 0===pe?void 0:pe.name)&&void 0!==_e?_e:""}`,{duration:3e3}),this.patchState({loading:!1})},N=>{this.toast.error("Failed to update status",{duration:3e3}),console.log(N),this.patchState({loading:!1})}))))),this.updateFundingApproved=this.effect(W=>W.pipe((0,R.b)(()=>this.patchState({loading:!0})),(0,V.w)(S=>(console.log("updateFundingApproved",S),this.data.userUpdateProcedureVendor({procedureVendorId:S.input.id,input:S.input}).pipe((0,w._b)(N=>{this.currentLegalCaseId$.subscribe(oe=>{this.loadLegalCaseEffect(oe)}).unsubscribe(),this.patchState({errors:N.errors,loading:!1}),S.resultEmitter.emit(N.data.updated)},N=>this.patchState({loading:!1,errors:N.graphQLErrors?N.graphQLErrors:N}))))))),this.route.snapshot.paramMap.has("legalCaseId")?(this.route.snapshot.paramMap.get("legalCaseId"),this.setFormName("legalCase_edit")):this.setFormName("legalCase_create"),this.route.snapshot.paramMap.has("accidentTypeId")){const W=this.route.snapshot.paramMap.get("accidentTypeId");this.setAccidentTypeId(W)}if(this.route.snapshot.paramMap.has("patientId")){const W=this.route.snapshot.paramMap.get("patientId");this.setPatientId(W)}if(this.route.snapshot.paramMap.has("medLevelId")){const W=this.route.snapshot.paramMap.get("medLevelId");this.setMedLevelId(W)}if(this.route.snapshot.paramMap.has("firmId")){const W=this.route.snapshot.paramMap.get("firmId");this.setFirmId(W)}if(this.route.snapshot.paramMap.has("attorneyId")){const W=this.route.snapshot.paramMap.get("attorneyId");this.setAttorneyId(W)}if(this.route.snapshot.paramMap.has("caseStatusId")){const W=this.route.snapshot.paramMap.get("caseStatusId");this.setCaseStatusId(W)}if(this.route.snapshot.paramMap.has("caseTypeId")){const W=this.route.snapshot.paramMap.get("caseTypeId");this.setCaseTypeId(W)}if(this.route.snapshot.paramMap.has("patientTreatmentStatusId")){const W=this.route.snapshot.paramMap.get("patientTreatmentStatusId");this.setPatientTreatmentStatusId(W)}if(this.route.snapshot.paramMap.has("caseProgressStatusId")){const W=this.route.snapshot.paramMap.get("caseProgressStatusId");this.setCaseProgressStatusId(W)}if(this.route.snapshot.paramMap.has("adverseInsuranceStatusId")){const W=this.route.snapshot.paramMap.get("adverseInsuranceStatusId");this.setAdverseInsuranceStatusId(W)}}validateImportData(re){return this.vm$.pipe((0,V.w)(ce=>this.legalCaseService.validateLegalCaseExcelData(re,ce.accidentTypes,ce.patients,ce.medLevels,ce.firms,ce.attorneys,ce.caseStatuses,ce.caseTypes,ce.patientTreatmentStatuses,ce.caseProgressStatuses,ce.adverseInsuranceStatuses)))}}return de.\u0275fac=function(re){return new(re||de)(k.LFG(C.q),k.LFG(h.F0),k.LFG(h.gz),k.LFG(F.F),k.LFG(te.o),k.LFG(Le))},de.\u0275prov=k.Yz7({token:de,factory:de.\u0275fac}),de})()},8844:(Fr,Ee,ae)=>{ae.d(Ee,{o:()=>AX});var w=ae(36895),x=ae(24006),I=ae(49821),R=ae(5084),V=ae(41746),H=ae(55274),g=ae(24280),k=ae(60515),C=ae(18505),h=ae(63900),F=ae(11365),te=ae(70262),e=ae(94650),E=ae(73602),A=ae(30144),X=ae(71873),q=ae(4523),O=ae(56869),y=ae(71767),T=ae(39646);class Ne extends y.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}var f=ae(26177);class Oe extends Ne{constructor(o){super("ValidateAccidentTypeExcelDataAction"),this.valid=!1,this.excelData=o}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name)}),this.validationContext.addRule(new f.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof f.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(r=>r.name),newNames:[i.newName]}):i instanceof f.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,T.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}var ie=ae(28234);class Me extends f.wS{constructor(o,t,i,r,l){super(o,t,i,r,l,!0)}}class Le extends f.ul{constructor(o,t,i,r=!1){super(o,t,r),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new f.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new Me("name","The accidenttype name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class he extends Ne{constructor(o){super("CreateAccidentTypeAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new Le("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateAccidentType({input:this.input}).pipe((0,h.w)(o=>(0,ie.of)(o.data.created)))}}class de extends Ne{constructor(o){super("UpdateAccidentTypesAction"),this.accidentTypes=o}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.accidentTypes,!0))}performAction(){this.response=this.businessProvider.data.userUpdateAccidentTypes({input:{accidentTypes:this.accidentTypes}}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}class le extends Ne{constructor(o,t){super("UpdateAccidentTypeAction"),this.accidentType=o,this.accidentTypeId=t}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.accidentType,!0)).addRule(new f.xF("Id","Id should be a CUID and not null",this.accidentTypeId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateAccidentType({accidentTypeId:this.accidentTypeId,input:this.accidentType}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}let re=(()=>{class s extends y.nH{constructor(t,i,r){super("NotificationService.AccidentTypeBusinessProviderService",t,r),this.data=i}createAccidentType(t){const i=new he(t);return i.Do(this),i.response}updateAccidentType(t,i){const r=new le(t,i);return r.Do(this),r.response}importAccidentTypes(t){const i=new de(t);return i.Do(this),i.response}validateAccidentTypeExcelData(t){const i=new Oe(t);return i.Do(this),i.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(O.ed),e.LFG(E.q),e.LFG(y.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),ce=(()=>{class s extends y.nH{constructor(t,i,r){super("AccidentTypeService",r,t),this.businessProvider=i}createAccidentType(t){const i=Object.fromEntries(Object.entries(t).filter(([r,l])=>null!==l));return this.businessProvider.createAccidentType(i)}updateAccidentType(t,i){return this.businessProvider.updateAccidentType(t,i)}importAccidentTypes(t){return this.businessProvider.importAccidentTypes(t)}validateAccidentTypeExcelData(t){return this.businessProvider.validateAccidentTypeExcelData(t)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(re,8),e.LFG(re),e.LFG(O.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),fe=(()=>{class s extends g.m1{constructor(t,i,r,l,u,P){super({loading:!1,accidentTypes:[],done:!1,searchQuery:"",formName:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=r,this.toast=l,this.formService=u,this.accidentTypeService=P,this.errors$=this.select(c=>c.errors),this.loading$=this.select(c=>c.loading),this.done$=this.select(c=>c.done),this.item$=this.select(c=>c.item),this.accidentTypes$=this.select(c=>c.accidentTypes),this.paging$=this.select(c=>c.paging),this.searchQuery$=this.select(c=>c.searchQuery),this.formName$=this.select(c=>c.formName),this.actionResult$=this.select(this.item$,this.done$,(c,d)=>({item:c,done:d}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.accidentTypes$,(c,d,n,a,m)=>({errors:c,loading:d,item:n,formName:a,accidentTypes:m}),{debounce:!0}),this.input$=this.select(this.paging$,this.searchQuery$,(c,d)=>({limit:c.limit,skip:c.skip,name:d,total:c.total})),this.setFormName=this.updater((c,d)=>Object.assign(Object.assign({},c),{formName:d})),this.setItem=this.updater((c,d)=>Object.assign(Object.assign({},c),{item:d})),this.addNewAccidentType=this.updater((c,d)=>Object.assign(Object.assign({},c),{accidentTypes:[...c.accidentTypes,d]})),this.updateAccidentType=this.updater((c,d)=>Object.assign(Object.assign({},c),{accidentTypes:c.accidentTypes.map(n=>n.id===d.id?d:n)})),this.addAccidentTypes=this.updater((c,d)=>Object.assign(Object.assign({},c),{accidentTypes:c.accidentTypes.concat(d)})),this.updateAccidentTypes=this.updater((c,d)=>Object.assign(Object.assign({},c),{accidentTypes:c.accidentTypes.map(n=>d.find(m=>m.id===n.id)||n)})),this.setSearchQuery=this.updater((c,d)=>Object.assign(Object.assign({},c),{searchQuery:d})),this.loadAccidentTypeEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.data.userAccidentType({accidentTypeId:d}).pipe((0,g._b)(n=>{this.patchState({item:n.data.item,errors:n.errors,loading:!1})},n=>this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})))))),this.loadAccidentTypesEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.input$),(0,h.w)(([d,n])=>this.data.userAccidentTypes({input:n}).pipe((0,g._b)(a=>this.patchState({paging:{limit:n.limit,skip:n.skip,total:a.data.count.total},accidentTypes:a.data.items,errors:a.errors,loading:!1}),a=>this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})))))),this.createAccidentTypeEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.accidentTypeService.createAccidentType(Object.assign({},d)).pipe((0,g._b)(n=>{this.addNewAccidentType(n),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:n,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},n=>{n.graphQLErrors?(this.toast.error(n.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})):(this.toast.error(n.Message),this.formService.setErrors(n.Data))}))))),this.updateAccidentTypeEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([d,n])=>this.accidentTypeService.updateAccidentType(d,d.id).pipe((0,g._b)(a=>{this.updateAccidentType(a),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:a,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.deleteAccidentTypeEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([d,n])=>this.data.userDeleteAccidentType({accidentTypeId:n.id}).pipe((0,g._b)(a=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:a.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.importExcelEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.accidentTypeService.importAccidentTypes(d).pipe((0,te.K)(n=>{var a;return this.toast.error(null!==(a=n.Message)&&void 0!==a?a:"Failed to save",{duration:3e3}),k.E}),(0,C.b)(n=>{const a=JSON.parse(n.created),m=JSON.parse(n.updated),p=JSON.parse(n.failed),_=a.length+m.length+p.length;this.addAccidentTypes(a),this.updateAccidentTypes(m),this.toast.success(`${a.length} created, ${m.length} updated, ${p.length} failed of total ${_}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("accidentTypeId")?(this.route.snapshot.paramMap.get("accidentTypeId"),this.setFormName("accidentType_edit")):this.setFormName("accidentType_create")}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.accidentTypeService.validateAccidentTypeExcelData(t)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(E.q),e.LFG(A.F0),e.LFG(A.gz),e.LFG(X.F),e.LFG(q.o),e.LFG(ce))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();var J=ae(15909),z=ae(92518);function Te(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close.emit())})("formIsReady",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.accidentType)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let W=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"accidentType_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.accidentType=i.item})):t.formName&&t.formName.currentValue&&"accidentType_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadAccidentTypeEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.accidentType=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(fe),e.Y36(A.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-accident-type-form"]],inputs:{accidentType:"accidentType",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,Te,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[w.O5,z.M,w.Ov],encapsulation:2}),s})();var S=ae(51645),N=ae(26244);let oe=(()=>{class s{constructor(){this.autoHeight=!1,this.accidentTypes=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[,{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var r;t.includes(null===(r=i.data)||void 0===r?void 0:r.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-accident-type-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(N.x,5),2&t){let r;e.iGM(r=e.CRH())&&(i.tableView=r.first)}},inputs:{autoHeight:"autoHeight",accidentTypes:"accidentTypes"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.accidentTypes)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[N.x],encapsulation:2}),s})();function pe(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-accident-type-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","accidentType_edit")("formControl",t.formControl)("accidentType",t.accidentType)}}const _e=function(){return{}};function Ce(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-accident-type-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","accidentType_create")("formControl",t.formControl)("accidentType",e.DdM(3,_e))}}function ye(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-accident-type-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(u.ref.close())}),e.qZA()}2&s&&e.Q6J("accidentTypes",o.data.items)}let Se=(()=>{class s extends I.fS{constructor(t){super(),this.store=t,this.store.loadAccidentTypesEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.accidentTypes$.pipe((0,h.w)(i=>(0,T.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(fe))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","accidentType","send","close"],[1,"w-full","h-full","bg-white",3,"accidentTypes","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,pe,2,3,"ng-template",null,1,e.W1O),e.YNc(3,Ce,1,4,"ng-template",null,2,e.W1O),e.YNc(5,ye,1,1,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",u)("editTemplate",r)("createTemplate",l)("key",i.field.key)}},dependencies:[x.JJ,x.oH,J.$,W,oe],encapsulation:2}),s})();var Q=ae(10948),U=ae(10265),j=ae(31276),K=ae(27503),Ae=ae(927),Fe=ae(4859);let Z=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[w.ez,Fe.ot,x.UX,Q.P,Ae.W]}),s})();var ge=ae(82722),be=ae(77579);let Y=(()=>{class s extends I.fS{constructor(){super(),this._unsubscribeAll=new be.x,this.data=[],this.onSave=this.onSave.bind(this)}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}ngOnInit(){this.formControl.value&&(this.data=this.formControl.value),this.formControl.valueChanges.pipe((0,ge.R)(this._unsubscribeAll)).subscribe(t=>{this.data=t})}onSave(t){const i=this.data.findIndex(r=>r.id===t.id);-1!==i?(this.data[i]=t,this.data=this.data.map((r,l)=>l===i?t:r)):this.data=[...this.data]}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-formly-field-base-grid"]],features:[e.qOj],decls:0,vars:0,template:function(t,i){},encapsulation:2}),s})();var Jm=ae(17489),jm=ae(12282),zm=ae(57148);const qm=["editTpl"],Hm=["createTpl"];function Km(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"button",9),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.onCreate())}),e._uU(1,"+ Add"),e.qZA()}}function km(s,o){1&s&&e.GkF(0)}function Zm(s,o){1&s&&e.GkF(0)}const Dr=function(s,o,t){return{value:s,ref:o,onSave:t}},Ir=function(s){return{data:s}};function Bm(s,o){if(1&s&&(e.TgZ(0,"div",10),e.YNc(1,Zm,1,0,"ng-container",6),e.qZA()),2&s){const t=o.$implicit,i=e.oxw();e.xp6(1),e.Q6J("ngTemplateOutlet",i.editTemplate)("ngTemplateOutletContext",e.VKq(6,Ir,e.kEZ(2,Dr,t.data,t,i.onSave)))}}function Ym(s,o){1&s&&e.GkF(0)}const Xm=function(){return{}};function ep(s,o){if(1&s&&(e.TgZ(0,"div",10),e.YNc(1,Ym,1,0,"ng-container",6),e.qZA()),2&s){const t=o.$implicit,i=e.oxw();e.xp6(1),e.Q6J("ngTemplateOutlet",i.createTemplate)("ngTemplateOutletContext",e.VKq(7,Ir,e.kEZ(3,Dr,e.DdM(2,Xm),t,i.onSave)))}}const tp=function(s,o){return{items:s,itemDidSelect:o}},ip=function(s){return{data:s}};let ee=(()=>{class s{constructor(t,i){this.configService=t,this.dialogService=i,this.data=[],this.title="Title",this.readOnly=!1,this.saveButtonDidClick=new e.vpe,this.itemDidSelect=this.itemDidSelect.bind(this)}itemDidSelect(t){this.readOnly||this.dialogService.open(this.editTpl,{data:Object.assign({},t),width:"auto",minHeight:"200px"})}onCreate(){console.log("onCreate"),this.dialogService.open(this.createTpl,{data:null,width:"auto",minHeight:"200px"})}getCloneValue(t){return(0,Jm.cloneDeep)(t)}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(jm.m),e.Y36(zm.xA))},s.\u0275cmp=e.Xpm({type:s,selectors:[["web-ui-grid"]],viewQuery:function(t,i){if(1&t&&(e.Gf(qm,5),e.Gf(Hm,5)),2&t){let r;e.iGM(r=e.CRH())&&(i.editTpl=r.first),e.iGM(r=e.CRH())&&(i.createTpl=r.first)}},inputs:{data:"data",title:"title",onSave:"onSave",listTemplate:"listTemplate",editTemplate:"editTemplate",createTemplate:"createTemplate",readOnly:"readOnly"},outputs:{saveButtonDidClick:"saveButtonDidClick"},decls:12,vars:9,consts:[[1,"p-2","flex","flex-col"],[1,"flex","flex-row","items-center","justify-between","gap-2","p-2","w-full"],[1,"text-lg","font-bold","text-gray-800","dark:text-gray-50"],["mat-flat-button","","type","button","class","bg-primary text-white",3,"click",4,"ngIf"],[1,"flex","flex-col","gap-2","h-full","bg-grey-light"],[1,"w-full","h-auto"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["editTpl",""],["createTpl",""],["mat-flat-button","","type","button",1,"bg-primary","text-white",3,"click"],[1,"p-5","bg-gray-50","overflow-auto","dark:bg-gray-800"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h3",2),e._uU(3),e.qZA(),e.YNc(4,Km,2,0,"button",3),e.qZA(),e.TgZ(5,"div",4)(6,"div",5),e.YNc(7,km,1,0,"ng-container",6),e.qZA()()(),e.YNc(8,Bm,2,8,"ng-template",null,7,e.W1O),e.YNc(10,ep,2,9,"ng-template",null,8,e.W1O)),2&t&&(e.xp6(3),e.Oqu(i.title),e.xp6(1),e.Q6J("ngIf",!i.readOnly),e.xp6(3),e.Q6J("ngTemplateOutlet",i.listTemplate)("ngTemplateOutletContext",e.VKq(7,ip,e.WLB(4,tp,i.data,i.itemDidSelect))))},dependencies:[w.O5,w.tP,Fe.lW]}),s})();function sp(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-accident-type-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","accidentType_edit")("accidentType",t.value)}}const op=function(){return{}};function rp(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-accident-type-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","accidentType_create")("accidentType",e.DdM(2,op))}function ap(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-accident-type-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(null==u.ref?null:u.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("accidentTypes",t.items)}}let np=(()=>{class s extends Y{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","accidentType","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","accidentTypes","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,sp,1,2,"ng-template",null,1,e.W1O),e.YNc(3,rp,1,3,"ng-template",null,2,e.W1O),e.YNc(5,ap,1,2,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[ee,W,oe],encapsulation:2}),s})(),lp=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[fe],imports:[w.ez,R.F,x.UX,V.o,H.u,Q.P,U.t,Z,j.h,K.G,I.X0.forChild({types:[{name:"accident-type-select",component:Se,wrappers:["form-field"]},{name:"accident-type-grid",component:np}]})]}),s})(),cp=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[lp]}),s})();class Ue extends y.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class dp extends Ue{constructor(o){super("ValidateAccountStatusExcelDataAction"),this.valid=!1,this.excelData=o}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name)}),this.validationContext.addRule(new f.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof f.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(r=>r.name),newNames:[i.newName]}):i instanceof f.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,T.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class up extends f.wS{constructor(o,t,i,r,l){super(o,t,i,r,l,!0)}}class mp extends f.ul{constructor(o,t,i,r=!1){super(o,t,r),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new f.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new up("name","The accountstatus name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class pp extends Ue{constructor(o){super("CreateAccountStatusAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new mp("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateAccountStatus({input:this.input}).pipe((0,h.w)(o=>(0,ie.of)(o.data.created)))}}class hp extends Ue{constructor(o){super("UpdateAccountStatusesAction"),this.accountStatuses=o}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.accountStatuses,!0))}performAction(){this.response=this.businessProvider.data.userUpdateAccountStatuses({input:{accountStatuses:this.accountStatuses}}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}class fp extends Ue{constructor(o,t){super("UpdateAccountStatusAction"),this.accountStatus=o,this.accountStatusId=t}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.accountStatus,!0)).addRule(new f.xF("Id","Id should be a CUID and not null",this.accountStatusId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateAccountStatus({accountStatusId:this.accountStatusId,input:this.accountStatus}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}let Pr=(()=>{class s extends y.nH{constructor(t,i,r){super("NotificationService.AccountStatusBusinessProviderService",t,r),this.data=i}createAccountStatus(t){const i=new pp(t);return i.Do(this),i.response}updateAccountStatus(t,i){const r=new fp(t,i);return r.Do(this),r.response}importAccountStatuses(t){const i=new hp(t);return i.Do(this),i.response}validateAccountStatusExcelData(t){const i=new dp(t);return i.Do(this),i.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(O.ed),e.LFG(E.q),e.LFG(y.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),_p=(()=>{class s extends y.nH{constructor(t,i,r){super("AccountStatusService",r,t),this.businessProvider=i}createAccountStatus(t){const i=Object.fromEntries(Object.entries(t).filter(([r,l])=>null!==l));return this.businessProvider.createAccountStatus(i)}updateAccountStatus(t,i){return this.businessProvider.updateAccountStatus(t,i)}importAccountStatuses(t){return this.businessProvider.importAccountStatuses(t)}validateAccountStatusExcelData(t){return this.businessProvider.validateAccountStatusExcelData(t)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(Pr,8),e.LFG(Pr),e.LFG(O.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),us=(()=>{class s extends g.m1{constructor(t,i,r,l,u,P){super({loading:!1,accountStatuses:[],done:!1,searchQuery:"",formName:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=r,this.toast=l,this.formService=u,this.accountStatusService=P,this.errors$=this.select(c=>c.errors),this.loading$=this.select(c=>c.loading),this.done$=this.select(c=>c.done),this.item$=this.select(c=>c.item),this.accountStatuses$=this.select(c=>c.accountStatuses),this.paging$=this.select(c=>c.paging),this.searchQuery$=this.select(c=>c.searchQuery),this.formName$=this.select(c=>c.formName),this.actionResult$=this.select(this.item$,this.done$,(c,d)=>({item:c,done:d}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.accountStatuses$,(c,d,n,a,m)=>({errors:c,loading:d,item:n,formName:a,accountStatuses:m}),{debounce:!0}),this.input$=this.select(this.paging$,this.searchQuery$,(c,d)=>({limit:c.limit,skip:c.skip,name:d,total:c.total})),this.setFormName=this.updater((c,d)=>Object.assign(Object.assign({},c),{formName:d})),this.setItem=this.updater((c,d)=>Object.assign(Object.assign({},c),{item:d})),this.addNewAccountStatus=this.updater((c,d)=>Object.assign(Object.assign({},c),{accountStatuses:[...c.accountStatuses,d]})),this.updateAccountStatus=this.updater((c,d)=>Object.assign(Object.assign({},c),{accountStatuses:c.accountStatuses.map(n=>n.id===d.id?d:n)})),this.addAccountStatuses=this.updater((c,d)=>Object.assign(Object.assign({},c),{accountStatuses:c.accountStatuses.concat(d)})),this.updateAccountStatuses=this.updater((c,d)=>Object.assign(Object.assign({},c),{accountStatuses:c.accountStatuses.map(n=>d.find(m=>m.id===n.id)||n)})),this.setSearchQuery=this.updater((c,d)=>Object.assign(Object.assign({},c),{searchQuery:d})),this.loadAccountStatusEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.data.userAccountStatus({accountStatusId:d}).pipe((0,g._b)(n=>{this.patchState({item:n.data.item,errors:n.errors,loading:!1})},n=>this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})))))),this.loadAccountStatusesEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.input$),(0,h.w)(([d,n])=>this.data.userAccountStatuses({input:n}).pipe((0,g._b)(a=>this.patchState({paging:{limit:n.limit,skip:n.skip,total:a.data.count.total},accountStatuses:a.data.items,errors:a.errors,loading:!1}),a=>this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})))))),this.createAccountStatusEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.accountStatusService.createAccountStatus(Object.assign({},d)).pipe((0,g._b)(n=>{this.addNewAccountStatus(n),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:n,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},n=>{n.graphQLErrors?(this.toast.error(n.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})):(this.toast.error(n.Message),this.formService.setErrors(n.Data))}))))),this.updateAccountStatusEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([d,n])=>this.accountStatusService.updateAccountStatus(d,d.id).pipe((0,g._b)(a=>{this.updateAccountStatus(a),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:a,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.deleteAccountStatusEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([d,n])=>this.data.userDeleteAccountStatus({accountStatusId:n.id}).pipe((0,g._b)(a=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:a.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.importExcelEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.accountStatusService.importAccountStatuses(d).pipe((0,te.K)(n=>{var a;return this.toast.error(null!==(a=n.Message)&&void 0!==a?a:"Failed to save",{duration:3e3}),k.E}),(0,C.b)(n=>{const a=JSON.parse(n.created),m=JSON.parse(n.updated),p=JSON.parse(n.failed),_=a.length+m.length+p.length;this.addAccountStatuses(a),this.updateAccountStatuses(m),this.toast.success(`${a.length} created, ${m.length} updated, ${p.length} failed of total ${_}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("accountStatusId")?(this.route.snapshot.paramMap.get("accountStatusId"),this.setFormName("accountStatus_edit")):this.setFormName("accountStatus_create")}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.accountStatusService.validateAccountStatusExcelData(t)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(E.q),e.LFG(A.F0),e.LFG(A.gz),e.LFG(X.F),e.LFG(q.o),e.LFG(_p))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function gp(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close.emit())})("formIsReady",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.accountStatus)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let Wr=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"accountStatus_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.accountStatus=i.item})):t.formName&&t.formName.currentValue&&"accountStatus_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadAccountStatusEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.accountStatus=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(us),e.Y36(A.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-account-status-form"]],inputs:{accountStatus:"accountStatus",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,gp,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[w.O5,z.M,w.Ov],encapsulation:2}),s})(),Mr=(()=>{class s{constructor(){this.autoHeight=!1,this.accountStatuses=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[,{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var r;t.includes(null===(r=i.data)||void 0===r?void 0:r.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-account-status-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(N.x,5),2&t){let r;e.iGM(r=e.CRH())&&(i.tableView=r.first)}},inputs:{autoHeight:"autoHeight",accountStatuses:"accountStatuses"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.accountStatuses)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[N.x],encapsulation:2}),s})();function Cp(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-account-status-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","accountStatus_edit")("formControl",t.formControl)("accountStatus",t.accountStatus)}}const Sp=function(){return{}};function vp(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-account-status-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","accountStatus_create")("formControl",t.formControl)("accountStatus",e.DdM(3,Sp))}}function bp(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-account-status-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(u.ref.close())}),e.qZA()}2&s&&e.Q6J("accountStatuses",o.data.items)}let Tp=(()=>{class s extends I.fS{constructor(t){super(),this.store=t,this.store.loadAccountStatusesEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.accountStatuses$.pipe((0,h.w)(i=>(0,T.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(us))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","accountStatus","send","close"],[1,"w-full","h-full","bg-white",3,"accountStatuses","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,Cp,2,3,"ng-template",null,1,e.W1O),e.YNc(3,vp,1,4,"ng-template",null,2,e.W1O),e.YNc(5,bp,1,1,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",u)("editTemplate",r)("createTemplate",l)("key",i.field.key)}},dependencies:[x.JJ,x.oH,J.$,Wr,Mr],encapsulation:2}),s})();function yp(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-account-status-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","accountStatus_edit")("accountStatus",t.value)}}const wp=function(){return{}};function xp(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-account-status-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","accountStatus_create")("accountStatus",e.DdM(2,wp))}function Np(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-account-status-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(null==u.ref?null:u.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("accountStatuses",t.items)}}let Ap=(()=>{class s extends Y{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","accountStatus","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","accountStatuses","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,yp,1,2,"ng-template",null,1,e.W1O),e.YNc(3,xp,1,3,"ng-template",null,2,e.W1O),e.YNc(5,Np,1,2,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[ee,Wr,Mr],encapsulation:2}),s})(),Fp=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[us],imports:[w.ez,R.F,x.UX,V.o,H.u,Q.P,U.t,Z,j.h,K.G,I.X0.forChild({types:[{name:"account-status-select",component:Tp,wrappers:["form-field"]},{name:"account-status-grid",component:Ap}]})]}),s})(),Dp=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[Fp]}),s})();class Je extends y.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class Ip extends Je{constructor(o){super("ValidateAdverseInsuranceStatusExcelDataAction"),this.valid=!1,this.excelData=o}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name)}),this.validationContext.addRule(new f.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof f.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(r=>r.name),newNames:[i.newName]}):i instanceof f.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,T.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class Pp extends f.wS{constructor(o,t,i,r,l){super(o,t,i,r,l,!0)}}class Wp extends f.ul{constructor(o,t,i,r=!1){super(o,t,r),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new f.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new Pp("name","The adverseinsurancestatus name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class Mp extends Je{constructor(o){super("CreateAdverseInsuranceStatusAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new Wp("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateAdverseInsuranceStatus({input:this.input}).pipe((0,h.w)(o=>(0,ie.of)(o.data.created)))}}class Ep extends Je{constructor(o){super("UpdateAdverseInsuranceStatusesAction"),this.adverseInsuranceStatuses=o}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.adverseInsuranceStatuses,!0))}performAction(){this.response=this.businessProvider.data.userUpdateAdverseInsuranceStatuses({input:{adverseInsuranceStatuses:this.adverseInsuranceStatuses}}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}class Op extends Je{constructor(o,t){super("UpdateAdverseInsuranceStatusAction"),this.adverseInsuranceStatus=o,this.adverseInsuranceStatusId=t}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.adverseInsuranceStatus,!0)).addRule(new f.xF("Id","Id should be a CUID and not null",this.adverseInsuranceStatusId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateAdverseInsuranceStatus({adverseInsuranceStatusId:this.adverseInsuranceStatusId,input:this.adverseInsuranceStatus}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}let Er=(()=>{class s extends y.nH{constructor(t,i,r){super("NotificationService.AdverseInsuranceStatusBusinessProviderService",t,r),this.data=i}createAdverseInsuranceStatus(t){const i=new Mp(t);return i.Do(this),i.response}updateAdverseInsuranceStatus(t,i){const r=new Op(t,i);return r.Do(this),r.response}importAdverseInsuranceStatuses(t){const i=new Ep(t);return i.Do(this),i.response}validateAdverseInsuranceStatusExcelData(t){const i=new Ip(t);return i.Do(this),i.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(O.ed),e.LFG(E.q),e.LFG(y.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),Lp=(()=>{class s extends y.nH{constructor(t,i,r){super("AdverseInsuranceStatusService",r,t),this.businessProvider=i}createAdverseInsuranceStatus(t){const i=Object.fromEntries(Object.entries(t).filter(([r,l])=>null!==l));return this.businessProvider.createAdverseInsuranceStatus(i)}updateAdverseInsuranceStatus(t,i){return this.businessProvider.updateAdverseInsuranceStatus(t,i)}importAdverseInsuranceStatuses(t){return this.businessProvider.importAdverseInsuranceStatuses(t)}validateAdverseInsuranceStatusExcelData(t){return this.businessProvider.validateAdverseInsuranceStatusExcelData(t)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(Er,8),e.LFG(Er),e.LFG(O.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),ms=(()=>{class s extends g.m1{constructor(t,i,r,l,u,P){super({loading:!1,adverseInsuranceStatuses:[],done:!1,searchQuery:"",formName:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=r,this.toast=l,this.formService=u,this.adverseInsuranceStatusService=P,this.errors$=this.select(c=>c.errors),this.loading$=this.select(c=>c.loading),this.done$=this.select(c=>c.done),this.item$=this.select(c=>c.item),this.adverseInsuranceStatuses$=this.select(c=>c.adverseInsuranceStatuses),this.paging$=this.select(c=>c.paging),this.searchQuery$=this.select(c=>c.searchQuery),this.formName$=this.select(c=>c.formName),this.actionResult$=this.select(this.item$,this.done$,(c,d)=>({item:c,done:d}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.adverseInsuranceStatuses$,(c,d,n,a,m)=>({errors:c,loading:d,item:n,formName:a,adverseInsuranceStatuses:m}),{debounce:!0}),this.input$=this.select(this.paging$,this.searchQuery$,(c,d)=>({limit:c.limit,skip:c.skip,name:d,total:c.total})),this.setFormName=this.updater((c,d)=>Object.assign(Object.assign({},c),{formName:d})),this.setItem=this.updater((c,d)=>Object.assign(Object.assign({},c),{item:d})),this.addNewAdverseInsuranceStatus=this.updater((c,d)=>Object.assign(Object.assign({},c),{adverseInsuranceStatuses:[...c.adverseInsuranceStatuses,d]})),this.updateAdverseInsuranceStatus=this.updater((c,d)=>Object.assign(Object.assign({},c),{adverseInsuranceStatuses:c.adverseInsuranceStatuses.map(n=>n.id===d.id?d:n)})),this.addAdverseInsuranceStatuses=this.updater((c,d)=>Object.assign(Object.assign({},c),{adverseInsuranceStatuses:c.adverseInsuranceStatuses.concat(d)})),this.updateAdverseInsuranceStatuses=this.updater((c,d)=>Object.assign(Object.assign({},c),{adverseInsuranceStatuses:c.adverseInsuranceStatuses.map(n=>d.find(m=>m.id===n.id)||n)})),this.setSearchQuery=this.updater((c,d)=>Object.assign(Object.assign({},c),{searchQuery:d})),this.loadAdverseInsuranceStatusEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.data.userAdverseInsuranceStatus({adverseInsuranceStatusId:d}).pipe((0,g._b)(n=>{this.patchState({item:n.data.item,errors:n.errors,loading:!1})},n=>this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})))))),this.loadAdverseInsuranceStatusesEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.input$),(0,h.w)(([d,n])=>this.data.userAdverseInsuranceStatuses({input:n}).pipe((0,g._b)(a=>this.patchState({paging:{limit:n.limit,skip:n.skip,total:a.data.count.total},adverseInsuranceStatuses:a.data.items,errors:a.errors,loading:!1}),a=>this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})))))),this.createAdverseInsuranceStatusEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.adverseInsuranceStatusService.createAdverseInsuranceStatus(Object.assign({},d)).pipe((0,g._b)(n=>{this.addNewAdverseInsuranceStatus(n),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:n,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},n=>{n.graphQLErrors?(this.toast.error(n.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})):(this.toast.error(n.Message),this.formService.setErrors(n.Data))}))))),this.updateAdverseInsuranceStatusEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([d,n])=>this.adverseInsuranceStatusService.updateAdverseInsuranceStatus(d,d.id).pipe((0,g._b)(a=>{this.updateAdverseInsuranceStatus(a),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:a,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.deleteAdverseInsuranceStatusEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([d,n])=>this.data.userDeleteAdverseInsuranceStatus({adverseInsuranceStatusId:n.id}).pipe((0,g._b)(a=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:a.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.importExcelEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.adverseInsuranceStatusService.importAdverseInsuranceStatuses(d).pipe((0,te.K)(n=>{var a;return this.toast.error(null!==(a=n.Message)&&void 0!==a?a:"Failed to save",{duration:3e3}),k.E}),(0,C.b)(n=>{const a=JSON.parse(n.created),m=JSON.parse(n.updated),p=JSON.parse(n.failed),_=a.length+m.length+p.length;this.addAdverseInsuranceStatuses(a),this.updateAdverseInsuranceStatuses(m),this.toast.success(`${a.length} created, ${m.length} updated, ${p.length} failed of total ${_}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("adverseInsuranceStatusId")?(this.route.snapshot.paramMap.get("adverseInsuranceStatusId"),this.setFormName("adverseInsuranceStatus_edit")):this.setFormName("adverseInsuranceStatus_create")}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.adverseInsuranceStatusService.validateAdverseInsuranceStatusExcelData(t)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(E.q),e.LFG(A.F0),e.LFG(A.gz),e.LFG(X.F),e.LFG(q.o),e.LFG(Lp))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function Gp(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close.emit())})("formIsReady",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.adverseInsuranceStatus)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let Or=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"adverseInsuranceStatus_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.adverseInsuranceStatus=i.item})):t.formName&&t.formName.currentValue&&"adverseInsuranceStatus_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadAdverseInsuranceStatusEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.adverseInsuranceStatus=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(ms),e.Y36(A.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-adverse-insurance-status-form"]],inputs:{adverseInsuranceStatus:"adverseInsuranceStatus",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,Gp,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[w.O5,z.M,w.Ov],encapsulation:2}),s})(),Lr=(()=>{class s{constructor(){this.autoHeight=!1,this.adverseInsuranceStatuses=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[,{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var r;t.includes(null===(r=i.data)||void 0===r?void 0:r.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-adverse-insurance-status-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(N.x,5),2&t){let r;e.iGM(r=e.CRH())&&(i.tableView=r.first)}},inputs:{autoHeight:"autoHeight",adverseInsuranceStatuses:"adverseInsuranceStatuses"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.adverseInsuranceStatuses)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[N.x],encapsulation:2}),s})();function $p(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-adverse-insurance-status-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","adverseInsuranceStatus_edit")("formControl",t.formControl)("adverseInsuranceStatus",t.adverseInsuranceStatus)}}const Rp=function(){return{}};function Vp(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-adverse-insurance-status-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","adverseInsuranceStatus_create")("formControl",t.formControl)("adverseInsuranceStatus",e.DdM(3,Rp))}}function Qp(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-adverse-insurance-status-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(u.ref.close())}),e.qZA()}2&s&&e.Q6J("adverseInsuranceStatuses",o.data.items)}let Up=(()=>{class s extends I.fS{constructor(t){super(),this.store=t,this.store.loadAdverseInsuranceStatusesEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.adverseInsuranceStatuses$.pipe((0,h.w)(i=>(0,T.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(ms))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","adverseInsuranceStatus","send","close"],[1,"w-full","h-full","bg-white",3,"adverseInsuranceStatuses","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,$p,2,3,"ng-template",null,1,e.W1O),e.YNc(3,Vp,1,4,"ng-template",null,2,e.W1O),e.YNc(5,Qp,1,1,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",u)("editTemplate",r)("createTemplate",l)("key",i.field.key)}},dependencies:[x.JJ,x.oH,J.$,Or,Lr],encapsulation:2}),s})();function Jp(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-adverse-insurance-status-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","adverseInsuranceStatus_edit")("adverseInsuranceStatus",t.value)}}const jp=function(){return{}};function zp(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-adverse-insurance-status-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","adverseInsuranceStatus_create")("adverseInsuranceStatus",e.DdM(2,jp))}function qp(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-adverse-insurance-status-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(null==u.ref?null:u.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("adverseInsuranceStatuses",t.items)}}let Hp=(()=>{class s extends Y{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","adverseInsuranceStatus","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","adverseInsuranceStatuses","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,Jp,1,2,"ng-template",null,1,e.W1O),e.YNc(3,zp,1,3,"ng-template",null,2,e.W1O),e.YNc(5,qp,1,2,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[ee,Or,Lr],encapsulation:2}),s})(),Kp=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[ms],imports:[w.ez,R.F,x.UX,V.o,H.u,Q.P,U.t,Z,j.h,K.G,I.X0.forChild({types:[{name:"adverse-insurance-status-select",component:Up,wrappers:["form-field"]},{name:"adverse-insurance-status-grid",component:Hp}]})]}),s})(),kp=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[Kp]}),s})();class je extends y.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class Zp extends je{constructor(o){super("ValidateAgreementTypeExcelDataAction"),this.valid=!1,this.excelData=o}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name)}),this.validationContext.addRule(new f.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof f.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(r=>r.name),newNames:[i.newName]}):i instanceof f.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,T.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class Bp extends f.wS{constructor(o,t,i,r,l){super(o,t,i,r,l,!0)}}class Yp extends f.ul{constructor(o,t,i,r=!1){super(o,t,r),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new f.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new Bp("name","The agreementtype name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class Xp extends je{constructor(o){super("CreateAgreementTypeAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new Yp("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateAgreementType({input:this.input}).pipe((0,h.w)(o=>(0,ie.of)(o.data.created)))}}class eh extends je{constructor(o){super("UpdateAgreementTypesAction"),this.agreementTypes=o}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.agreementTypes,!0))}performAction(){this.response=this.businessProvider.data.userUpdateAgreementTypes({input:{agreementTypes:this.agreementTypes}}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}class th extends je{constructor(o,t){super("UpdateAgreementTypeAction"),this.agreementType=o,this.agreementTypeId=t}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.agreementType,!0)).addRule(new f.xF("Id","Id should be a CUID and not null",this.agreementTypeId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateAgreementType({agreementTypeId:this.agreementTypeId,input:this.agreementType}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}let Gr=(()=>{class s extends y.nH{constructor(t,i,r){super("NotificationService.AgreementTypeBusinessProviderService",t,r),this.data=i}createAgreementType(t){const i=new Xp(t);return i.Do(this),i.response}updateAgreementType(t,i){const r=new th(t,i);return r.Do(this),r.response}importAgreementTypes(t){const i=new eh(t);return i.Do(this),i.response}validateAgreementTypeExcelData(t){const i=new Zp(t);return i.Do(this),i.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(O.ed),e.LFG(E.q),e.LFG(y.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),ih=(()=>{class s extends y.nH{constructor(t,i,r){super("AgreementTypeService",r,t),this.businessProvider=i}createAgreementType(t){const i=Object.fromEntries(Object.entries(t).filter(([r,l])=>null!==l));return this.businessProvider.createAgreementType(i)}updateAgreementType(t,i){return this.businessProvider.updateAgreementType(t,i)}importAgreementTypes(t){return this.businessProvider.importAgreementTypes(t)}validateAgreementTypeExcelData(t){return this.businessProvider.validateAgreementTypeExcelData(t)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(Gr,8),e.LFG(Gr),e.LFG(O.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),ps=(()=>{class s extends g.m1{constructor(t,i,r,l,u,P){super({loading:!1,agreementTypes:[],done:!1,searchQuery:"",formName:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=r,this.toast=l,this.formService=u,this.agreementTypeService=P,this.errors$=this.select(c=>c.errors),this.loading$=this.select(c=>c.loading),this.done$=this.select(c=>c.done),this.item$=this.select(c=>c.item),this.agreementTypes$=this.select(c=>c.agreementTypes),this.paging$=this.select(c=>c.paging),this.searchQuery$=this.select(c=>c.searchQuery),this.formName$=this.select(c=>c.formName),this.actionResult$=this.select(this.item$,this.done$,(c,d)=>({item:c,done:d}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.agreementTypes$,(c,d,n,a,m)=>({errors:c,loading:d,item:n,formName:a,agreementTypes:m}),{debounce:!0}),this.input$=this.select(this.paging$,this.searchQuery$,(c,d)=>({limit:c.limit,skip:c.skip,name:d,total:c.total})),this.setFormName=this.updater((c,d)=>Object.assign(Object.assign({},c),{formName:d})),this.setItem=this.updater((c,d)=>Object.assign(Object.assign({},c),{item:d})),this.addNewAgreementType=this.updater((c,d)=>Object.assign(Object.assign({},c),{agreementTypes:[...c.agreementTypes,d]})),this.updateAgreementType=this.updater((c,d)=>Object.assign(Object.assign({},c),{agreementTypes:c.agreementTypes.map(n=>n.id===d.id?d:n)})),this.addAgreementTypes=this.updater((c,d)=>Object.assign(Object.assign({},c),{agreementTypes:c.agreementTypes.concat(d)})),this.updateAgreementTypes=this.updater((c,d)=>Object.assign(Object.assign({},c),{agreementTypes:c.agreementTypes.map(n=>d.find(m=>m.id===n.id)||n)})),this.setSearchQuery=this.updater((c,d)=>Object.assign(Object.assign({},c),{searchQuery:d})),this.loadAgreementTypeEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.data.userAgreementType({agreementTypeId:d}).pipe((0,g._b)(n=>{this.patchState({item:n.data.item,errors:n.errors,loading:!1})},n=>this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})))))),this.loadAgreementTypesEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.input$),(0,h.w)(([d,n])=>this.data.userAgreementTypes({input:n}).pipe((0,g._b)(a=>this.patchState({paging:{limit:n.limit,skip:n.skip,total:a.data.count.total},agreementTypes:a.data.items,errors:a.errors,loading:!1}),a=>this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})))))),this.createAgreementTypeEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.agreementTypeService.createAgreementType(Object.assign({},d)).pipe((0,g._b)(n=>{this.addNewAgreementType(n),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:n,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},n=>{n.graphQLErrors?(this.toast.error(n.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})):(this.toast.error(n.Message),this.formService.setErrors(n.Data))}))))),this.updateAgreementTypeEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([d,n])=>this.agreementTypeService.updateAgreementType(d,d.id).pipe((0,g._b)(a=>{this.updateAgreementType(a),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:a,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.deleteAgreementTypeEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([d,n])=>this.data.userDeleteAgreementType({agreementTypeId:n.id}).pipe((0,g._b)(a=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:a.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.importExcelEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.agreementTypeService.importAgreementTypes(d).pipe((0,te.K)(n=>{var a;return this.toast.error(null!==(a=n.Message)&&void 0!==a?a:"Failed to save",{duration:3e3}),k.E}),(0,C.b)(n=>{const a=JSON.parse(n.created),m=JSON.parse(n.updated),p=JSON.parse(n.failed),_=a.length+m.length+p.length;this.addAgreementTypes(a),this.updateAgreementTypes(m),this.toast.success(`${a.length} created, ${m.length} updated, ${p.length} failed of total ${_}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("agreementTypeId")?(this.route.snapshot.paramMap.get("agreementTypeId"),this.setFormName("agreementType_edit")):this.setFormName("agreementType_create")}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.agreementTypeService.validateAgreementTypeExcelData(t)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(E.q),e.LFG(A.F0),e.LFG(A.gz),e.LFG(X.F),e.LFG(q.o),e.LFG(ih))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function sh(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close.emit())})("formIsReady",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.agreementType)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let $r=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"agreementType_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.agreementType=i.item})):t.formName&&t.formName.currentValue&&"agreementType_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadAgreementTypeEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.agreementType=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(ps),e.Y36(A.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-agreement-type-form"]],inputs:{agreementType:"agreementType",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,sh,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[w.O5,z.M,w.Ov],encapsulation:2}),s})(),Rr=(()=>{class s{constructor(){this.autoHeight=!1,this.agreementTypes=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[,{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var r;t.includes(null===(r=i.data)||void 0===r?void 0:r.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-agreement-type-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(N.x,5),2&t){let r;e.iGM(r=e.CRH())&&(i.tableView=r.first)}},inputs:{autoHeight:"autoHeight",agreementTypes:"agreementTypes"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.agreementTypes)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[N.x],encapsulation:2}),s})();function oh(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-agreement-type-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","agreementType_edit")("formControl",t.formControl)("agreementType",t.agreementType)}}const rh=function(){return{}};function ah(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-agreement-type-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","agreementType_create")("formControl",t.formControl)("agreementType",e.DdM(3,rh))}}function nh(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-agreement-type-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(u.ref.close())}),e.qZA()}2&s&&e.Q6J("agreementTypes",o.data.items)}let lh=(()=>{class s extends I.fS{constructor(t){super(),this.store=t,this.store.loadAgreementTypesEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.agreementTypes$.pipe((0,h.w)(i=>(0,T.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(ps))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","agreementType","send","close"],[1,"w-full","h-full","bg-white",3,"agreementTypes","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,oh,2,3,"ng-template",null,1,e.W1O),e.YNc(3,ah,1,4,"ng-template",null,2,e.W1O),e.YNc(5,nh,1,1,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",u)("editTemplate",r)("createTemplate",l)("key",i.field.key)}},dependencies:[x.JJ,x.oH,J.$,$r,Rr],encapsulation:2}),s})();function ch(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-agreement-type-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","agreementType_edit")("agreementType",t.value)}}const dh=function(){return{}};function uh(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-agreement-type-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","agreementType_create")("agreementType",e.DdM(2,dh))}function mh(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-agreement-type-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(null==u.ref?null:u.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("agreementTypes",t.items)}}let ph=(()=>{class s extends Y{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","agreementType","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","agreementTypes","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,ch,1,2,"ng-template",null,1,e.W1O),e.YNc(3,uh,1,3,"ng-template",null,2,e.W1O),e.YNc(5,mh,1,2,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[ee,$r,Rr],encapsulation:2}),s})(),hh=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[ps],imports:[w.ez,R.F,x.UX,V.o,H.u,Q.P,U.t,Z,j.h,K.G,I.X0.forChild({types:[{name:"agreement-type-select",component:lh,wrappers:["form-field"]},{name:"agreement-type-grid",component:ph}]})]}),s})(),fh=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[hh]}),s})();var hs=ae(95614);function _h(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close.emit())})("formIsReady",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.appointment)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let Vr=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"appointment_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({id:null,name:""}),this.store.vm$.subscribe(i=>{this.appointment=i.item})):t.formName&&t.formName.currentValue&&"appointment_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadAppointmentEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.appointment=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(hs.L6),e.Y36(A.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-appointment-form"]],inputs:{appointment:"appointment",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,_h,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[w.O5,z.M,w.Ov],encapsulation:2}),s})(),Qr=(()=>{class s{constructor(){this.autoHeight=!1,this.appointments=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[{field:"location.name",headerName:"Location",filter:"agTextColumnFilter"},{field:"patient.name",headerName:"Patient",filter:"agTextColumnFilter"},{field:"clinicalProvider.name",headerName:"Clinical Provider",filter:"agTextColumnFilter"},{field:"legalCase.name",headerName:"Legal Case",filter:"agTextColumnFilter"},{field:"appointmentStatus.name",headerName:"Appointment Status",filter:"agTextColumnFilter"},{field:"medicalRecordStatus.name",headerName:"Medical Record Status",filter:"agTextColumnFilter"},{field:"visitKind.name",headerName:"Visit Kind",filter:"agTextColumnFilter"},{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{field:"appointmentDateAndTime",filter:"agDateColumnFilter"},{field:"locationId",filter:"agTextColumnFilter",hide:!0},{headerName:"Checked in",field:"checkedIn",filter:"agSetColumnFilter",cellRenderer:"checkboxRenderer"},{field:"checkedInDateTime",filter:"agDateColumnFilter"},{headerName:"MedicalReport",field:"medicalReport.name",filter:"agTextColumnFilter"},{headerName:"Bill",field:"bill.name",filter:"agTextColumnFilter"},{headerName:"Imaging",field:"imaging.name",filter:"agTextColumnFilter"},{headerName:"Duration",field:"duration",filter:"agNumberColumnFilter",aggFunc:"sum"},{field:"patientId",filter:"agTextColumnFilter",hide:!0},{field:"clinicalProviderId",filter:"agTextColumnFilter",hide:!0},{field:"legalCaseId",filter:"agTextColumnFilter",hide:!0},{field:"appointmentStatusId",filter:"agTextColumnFilter",hide:!0},{field:"visitKindId",filter:"agTextColumnFilter",hide:!0},{field:"notes",filter:"agTextColumnFilter"},{field:"recurringEventId",filter:"agTextColumnFilter",hide:!0},{headerName:"Is First Instance",field:"isFirstInstance",filter:"agSetColumnFilter",cellRenderer:"checkboxRenderer"},{field:"description",filter:"agTextColumnFilter"},{field:"start",filter:"agTextColumnFilter"},{field:"end",filter:"agTextColumnFilter"},{headerName:"All Day",field:"allDay",filter:"agSetColumnFilter",cellRenderer:"checkboxRenderer"},{field:"recurrence",filter:"agTextColumnFilter"},{headerName:"Final Visit Approved",field:"finalVisitApproved",filter:"agSetColumnFilter",cellRenderer:"checkboxRenderer"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var r;t.includes(null===(r=i.data)||void 0===r?void 0:r.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-appointment-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(N.x,5),2&t){let r;e.iGM(r=e.CRH())&&(i.tableView=r.first)}},inputs:{autoHeight:"autoHeight",appointments:"appointments"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.appointments)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[N.x],encapsulation:2}),s})();function gh(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-appointment-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","appointment_edit")("formControl",t.formControl)("appointment",t.appointment)}}const Ch=function(){return{}};function Sh(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-appointment-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","appointment_create")("formControl",t.formControl)("appointment",e.DdM(3,Ch))}}function vh(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-appointment-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(u.ref.close())}),e.qZA()}2&s&&e.Q6J("appointments",o.data.items)}let bh=(()=>{class s extends I.fS{constructor(t){super(),this.store=t,this.store.loadAppointmentsEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.appointments$.pipe((0,h.w)(i=>(0,T.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(hs.L6))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","appointment","send","close"],[1,"w-full","h-full","bg-white",3,"appointments","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,gh,2,3,"ng-template",null,1,e.W1O),e.YNc(3,Sh,1,4,"ng-template",null,2,e.W1O),e.YNc(5,vh,1,1,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",u)("editTemplate",r)("createTemplate",l)("key",i.field.key)}},dependencies:[x.JJ,x.oH,J.$,Vr,Qr],encapsulation:2}),s})();function Th(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-appointment-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","appointment_edit")("appointment",t.value)}}const yh=function(){return{}};function wh(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-appointment-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","appointment_create")("appointment",e.DdM(2,yh))}function xh(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-appointment-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(null==u.ref?null:u.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("appointments",t.items)}}let Nh=(()=>{class s extends Y{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","appointment","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","appointments","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,Th,1,2,"ng-template",null,1,e.W1O),e.YNc(3,wh,1,3,"ng-template",null,2,e.W1O),e.YNc(5,xh,1,2,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[ee,Vr,Qr],encapsulation:2}),s})(),Ah=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[hs.L6],imports:[w.ez,R.F,x.UX,V.o,H.u,Q.P,U.t,Z,j.h,K.G,I.X0.forChild({types:[{name:"appointment-select",component:bh,wrappers:["form-field"]},{name:"appointment-grid",component:Nh}]})]}),s})(),Fh=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[Ah]}),s})();class ze extends y.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class Dh extends ze{constructor(o){super("ValidateAppointmentStatusExcelDataAction"),this.valid=!1,this.excelData=o}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name)}),this.validationContext.addRule(new f.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof f.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(r=>r.name),newNames:[i.newName]}):i instanceof f.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,T.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class Ih extends f.wS{constructor(o,t,i,r,l){super(o,t,i,r,l,!0)}}class Ph extends f.ul{constructor(o,t,i,r=!1){super(o,t,r),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new f.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new Ih("name","The appointmentstatus name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class Wh extends ze{constructor(o){super("CreateAppointmentStatusAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new Ph("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateAppointmentStatus({input:this.input}).pipe((0,h.w)(o=>(0,ie.of)(o.data.created)))}}class Mh extends ze{constructor(o){super("UpdateAppointmentStatusesAction"),this.appointmentStatuses=o}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.appointmentStatuses,!0))}performAction(){this.response=this.businessProvider.data.userUpdateAppointmentStatuses({input:{appointmentStatuses:this.appointmentStatuses}}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}class Eh extends ze{constructor(o,t){super("UpdateAppointmentStatusAction"),this.appointmentStatus=o,this.appointmentStatusId=t}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.appointmentStatus,!0)).addRule(new f.xF("Id","Id should be a CUID and not null",this.appointmentStatusId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateAppointmentStatus({appointmentStatusId:this.appointmentStatusId,input:this.appointmentStatus}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}let Ur=(()=>{class s extends y.nH{constructor(t,i,r){super("NotificationService.AppointmentStatusBusinessProviderService",t,r),this.data=i}createAppointmentStatus(t){const i=new Wh(t);return i.Do(this),i.response}updateAppointmentStatus(t,i){const r=new Eh(t,i);return r.Do(this),r.response}importAppointmentStatuses(t){const i=new Mh(t);return i.Do(this),i.response}validateAppointmentStatusExcelData(t){const i=new Dh(t);return i.Do(this),i.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(O.ed),e.LFG(E.q),e.LFG(y.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),Oh=(()=>{class s extends y.nH{constructor(t,i,r){super("AppointmentStatusService",r,t),this.businessProvider=i}createAppointmentStatus(t){const i=Object.fromEntries(Object.entries(t).filter(([r,l])=>null!==l));return this.businessProvider.createAppointmentStatus(i)}updateAppointmentStatus(t,i){return this.businessProvider.updateAppointmentStatus(t,i)}importAppointmentStatuses(t){return this.businessProvider.importAppointmentStatuses(t)}validateAppointmentStatusExcelData(t){return this.businessProvider.validateAppointmentStatusExcelData(t)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(Ur,8),e.LFG(Ur),e.LFG(O.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),fs=(()=>{class s extends g.m1{constructor(t,i,r,l,u,P){super({loading:!1,appointmentStatuses:[],done:!1,searchQuery:"",formName:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=r,this.toast=l,this.formService=u,this.appointmentStatusService=P,this.errors$=this.select(c=>c.errors),this.loading$=this.select(c=>c.loading),this.done$=this.select(c=>c.done),this.item$=this.select(c=>c.item),this.appointmentStatuses$=this.select(c=>c.appointmentStatuses),this.paging$=this.select(c=>c.paging),this.searchQuery$=this.select(c=>c.searchQuery),this.formName$=this.select(c=>c.formName),this.actionResult$=this.select(this.item$,this.done$,(c,d)=>({item:c,done:d}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.appointmentStatuses$,(c,d,n,a,m)=>({errors:c,loading:d,item:n,formName:a,appointmentStatuses:m}),{debounce:!0}),this.input$=this.select(this.paging$,this.searchQuery$,(c,d)=>({limit:c.limit,skip:c.skip,name:d,total:c.total})),this.setFormName=this.updater((c,d)=>Object.assign(Object.assign({},c),{formName:d})),this.setItem=this.updater((c,d)=>Object.assign(Object.assign({},c),{item:d})),this.addNewAppointmentStatus=this.updater((c,d)=>Object.assign(Object.assign({},c),{appointmentStatuses:[...c.appointmentStatuses,d]})),this.updateAppointmentStatus=this.updater((c,d)=>Object.assign(Object.assign({},c),{appointmentStatuses:c.appointmentStatuses.map(n=>n.id===d.id?d:n)})),this.addAppointmentStatuses=this.updater((c,d)=>Object.assign(Object.assign({},c),{appointmentStatuses:c.appointmentStatuses.concat(d)})),this.updateAppointmentStatuses=this.updater((c,d)=>Object.assign(Object.assign({},c),{appointmentStatuses:c.appointmentStatuses.map(n=>d.find(m=>m.id===n.id)||n)})),this.setSearchQuery=this.updater((c,d)=>Object.assign(Object.assign({},c),{searchQuery:d})),this.loadAppointmentStatusEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.data.userAppointmentStatus({appointmentStatusId:d}).pipe((0,g._b)(n=>{this.patchState({item:n.data.item,errors:n.errors,loading:!1})},n=>this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})))))),this.loadAppointmentStatusesEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.input$),(0,h.w)(([d,n])=>this.data.userAppointmentStatuses({input:n}).pipe((0,g._b)(a=>this.patchState({paging:{limit:n.limit,skip:n.skip,total:a.data.count.total},appointmentStatuses:a.data.items,errors:a.errors,loading:!1}),a=>this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})))))),this.createAppointmentStatusEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.appointmentStatusService.createAppointmentStatus(Object.assign({},d)).pipe((0,g._b)(n=>{this.addNewAppointmentStatus(n),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:n,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},n=>{n.graphQLErrors?(this.toast.error(n.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})):(this.toast.error(n.Message),this.formService.setErrors(n.Data))}))))),this.updateAppointmentStatusEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([d,n])=>this.appointmentStatusService.updateAppointmentStatus(d,d.id).pipe((0,g._b)(a=>{this.updateAppointmentStatus(a),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:a,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.deleteAppointmentStatusEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([d,n])=>this.data.userDeleteAppointmentStatus({appointmentStatusId:n.id}).pipe((0,g._b)(a=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:a.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.importExcelEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.appointmentStatusService.importAppointmentStatuses(d).pipe((0,te.K)(n=>{var a;return this.toast.error(null!==(a=n.Message)&&void 0!==a?a:"Failed to save",{duration:3e3}),k.E}),(0,C.b)(n=>{const a=JSON.parse(n.created),m=JSON.parse(n.updated),p=JSON.parse(n.failed),_=a.length+m.length+p.length;this.addAppointmentStatuses(a),this.updateAppointmentStatuses(m),this.toast.success(`${a.length} created, ${m.length} updated, ${p.length} failed of total ${_}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("appointmentStatusId")?(this.route.snapshot.paramMap.get("appointmentStatusId"),this.setFormName("appointmentStatus_edit")):this.setFormName("appointmentStatus_create")}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.appointmentStatusService.validateAppointmentStatusExcelData(t)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(E.q),e.LFG(A.F0),e.LFG(A.gz),e.LFG(X.F),e.LFG(q.o),e.LFG(Oh))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function Lh(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close.emit())})("formIsReady",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.appointmentStatus)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let Jr=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"appointmentStatus_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.appointmentStatus=i.item})):t.formName&&t.formName.currentValue&&"appointmentStatus_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadAppointmentStatusEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.appointmentStatus=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(fs),e.Y36(A.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-appointment-status-form"]],inputs:{appointmentStatus:"appointmentStatus",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,Lh,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[w.O5,z.M,w.Ov],encapsulation:2}),s})(),jr=(()=>{class s{constructor(){this.autoHeight=!1,this.appointmentStatuses=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[,{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var r;t.includes(null===(r=i.data)||void 0===r?void 0:r.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-appointment-status-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(N.x,5),2&t){let r;e.iGM(r=e.CRH())&&(i.tableView=r.first)}},inputs:{autoHeight:"autoHeight",appointmentStatuses:"appointmentStatuses"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.appointmentStatuses)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[N.x],encapsulation:2}),s})();function Gh(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-appointment-status-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","appointmentStatus_edit")("formControl",t.formControl)("appointmentStatus",t.appointmentStatus)}}const $h=function(){return{}};function Rh(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-appointment-status-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","appointmentStatus_create")("formControl",t.formControl)("appointmentStatus",e.DdM(3,$h))}}function Vh(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-appointment-status-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(u.ref.close())}),e.qZA()}2&s&&e.Q6J("appointmentStatuses",o.data.items)}let Qh=(()=>{class s extends I.fS{constructor(t){super(),this.store=t,this.store.loadAppointmentStatusesEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.appointmentStatuses$.pipe((0,h.w)(i=>(0,T.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(fs))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","appointmentStatus","send","close"],[1,"w-full","h-full","bg-white",3,"appointmentStatuses","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,Gh,2,3,"ng-template",null,1,e.W1O),e.YNc(3,Rh,1,4,"ng-template",null,2,e.W1O),e.YNc(5,Vh,1,1,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",u)("editTemplate",r)("createTemplate",l)("key",i.field.key)}},dependencies:[x.JJ,x.oH,J.$,Jr,jr],encapsulation:2}),s})();function Uh(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-appointment-status-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","appointmentStatus_edit")("appointmentStatus",t.value)}}const Jh=function(){return{}};function jh(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-appointment-status-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","appointmentStatus_create")("appointmentStatus",e.DdM(2,Jh))}function zh(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-appointment-status-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(null==u.ref?null:u.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("appointmentStatuses",t.items)}}let qh=(()=>{class s extends Y{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","appointmentStatus","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","appointmentStatuses","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,Uh,1,2,"ng-template",null,1,e.W1O),e.YNc(3,jh,1,3,"ng-template",null,2,e.W1O),e.YNc(5,zh,1,2,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[ee,Jr,jr],encapsulation:2}),s})(),Hh=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[fs],imports:[w.ez,R.F,x.UX,V.o,H.u,Q.P,U.t,Z,j.h,K.G,I.X0.forChild({types:[{name:"appointment-status-select",component:Qh,wrappers:["form-field"]},{name:"appointment-status-grid",component:qh}]})]}),s})(),Kh=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[Hh]}),s})(),kh=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[w.ez,A.Bz,Q.P]}),s})(),Zh=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[w.ez,A.Bz,U.t,Q.P,kh]}),s})();var B=ae(54004);class qe extends y.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class Bh extends qe{constructor(o,t,i,r){super("ValidateAttorneyExcelDataAction"),this.valid=!1,this.excelData=o,this.firms=t,this.attorneyStatuses=i,this.attorneyTypes=r}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name),this.validationContext.addRule(new f.mi(`firmName_${i}_is_valid}`,"Firm Is Not Valid","firm.name",t.firm,this.firms,!0)),this.validationContext.addRule(new f.mi(`attorneyStatusName_${i}_is_valid}`,"Attorney Status Is Not Valid","attorneyStatus.name",t.attorneyStatus,this.attorneyStatuses,!0)),this.validationContext.addRule(new f.mi(`attorneyTypeName_${i}_is_valid}`,"Attorney Type Is Not Valid","attorneyType.name",t.attorneyType,this.attorneyTypes,!0))}),this.validationContext.addRule(new f.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof f.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(r=>r.name),newNames:[i.newName]}):i instanceof f.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,T.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class Yh extends f.wS{constructor(o,t,i,r,l){super(o,t,i,r,l,!0)}}class Xh extends f.ul{constructor(o,t,i,r=!1){super(o,t,r),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new f.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new Yh("name","The attorney name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class ef extends qe{constructor(o){super("CreateAttorneyAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new Xh("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateAttorney({input:this.input}).pipe((0,h.w)(o=>(0,ie.of)(o.data.created)))}}class tf extends qe{constructor(o){super("UpdateAttorneysAction"),this.attorneys=o}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.attorneys,!0))}performAction(){this.response=this.businessProvider.data.userUpdateAttorneys({input:{attorneys:this.attorneys}}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}class sf extends qe{constructor(o,t){super("UpdateAttorneyAction"),this.attorney=o,this.attorneyId=t}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.attorney,!0)).addRule(new f.xF("Id","Id should be a CUID and not null",this.attorneyId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateAttorney({attorneyId:this.attorneyId,input:this.attorney}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}let zr=(()=>{class s extends y.nH{constructor(t,i,r){super("NotificationService.AttorneyBusinessProviderService",t,r),this.data=i}createAttorney(t){const i=new ef(t);return i.Do(this),i.response}updateAttorney(t,i){const r=new sf(t,i);return r.Do(this),r.response}importAttorneys(t){const i=new tf(t);return i.Do(this),i.response}validateAttorneyExcelData(t,i,r,l){const u=new Bh(t,i,r,l);return u.Do(this),u.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(O.ed),e.LFG(E.q),e.LFG(y.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),of=(()=>{class s extends y.nH{constructor(t,i,r){super("AttorneyService",r,t),this.businessProvider=i}createAttorney(t){const i=Object.fromEntries(Object.entries(t).filter(([r,l])=>null!==l));return this.businessProvider.createAttorney(i)}updateAttorney(t,i){return this.businessProvider.updateAttorney(t,i)}importAttorneys(t){return this.businessProvider.importAttorneys(t)}validateAttorneyExcelData(t,i,r,l){return this.businessProvider.validateAttorneyExcelData(t,i,r,l)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(zr,8),e.LFG(zr),e.LFG(O.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),_s=(()=>{class s extends g.m1{constructor(t,i,r,l,u,P){if(super({loading:!1,attorneys:[],done:!1,searchQuery:"",formName:void 0,firmId:void 0,attorneyStatusId:void 0,attorneyTypeId:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=r,this.toast=l,this.formService=u,this.attorneyService=P,this.errors$=this.select(a=>a.errors),this.loading$=this.select(a=>a.loading),this.done$=this.select(a=>a.done),this.item$=this.select(a=>a.item),this.attorneys$=this.select(a=>a.attorneys),this.firms$=this.select(a=>a.firms||[]),this.attorneyStatuses$=this.select(a=>a.attorneyStatuses||[]),this.attorneyTypes$=this.select(a=>a.attorneyTypes||[]),this.firmId$=this.select(a=>a.firmId),this.attorneyStatusId$=this.select(a=>a.attorneyStatusId),this.attorneyTypeId$=this.select(a=>a.attorneyTypeId),this.paging$=this.select(a=>a.paging),this.searchQuery$=this.select(a=>a.searchQuery),this.formName$=this.select(a=>a.formName),this.actionResult$=this.select(this.item$,this.done$,(a,m)=>({item:a,done:m}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.attorneys$,this.firms$,this.attorneyStatuses$,this.attorneyTypes$,(a,m,p,_,v,D,se,me)=>({errors:a,loading:m,item:p,formName:_,attorneys:v,firms:D,attorneyStatuses:se,attorneyTypes:me}),{debounce:!0}),this.input$=this.select(this.paging$,this.firmId$,this.attorneyStatusId$,this.attorneyTypeId$,this.searchQuery$,(a,m,p,_,v)=>({limit:a.limit,skip:a.skip,name:v,firmId:m,attorneyStatusId:p,attorneyTypeId:_,total:a.total})),this.setFormName=this.updater((a,m)=>Object.assign(Object.assign({},a),{formName:m})),this.setFirmId=this.updater((a,m)=>Object.assign(Object.assign({},a),{firmId:m})),this.setAttorneyStatusId=this.updater((a,m)=>Object.assign(Object.assign({},a),{attorneyStatusId:m})),this.setAttorneyTypeId=this.updater((a,m)=>Object.assign(Object.assign({},a),{attorneyTypeId:m})),this.filterFirms=a=>this.data.userSelectFirms({input:{name:a}}).pipe((0,g._b)(m=>{let p=m.data.items;return this.patchState({firms:p}),p},m=>this.patchState({errors:m.graphQLErrors?m.graphQLErrors:m})),(0,B.U)(m=>m.data.items)),this.filterAttorneyStatuses=a=>this.data.userSelectAttorneyStatuses({input:{name:a}}).pipe((0,g._b)(m=>{let p=m.data.items;return this.patchState({attorneyStatuses:p}),p},m=>this.patchState({errors:m.graphQLErrors?m.graphQLErrors:m})),(0,B.U)(m=>m.data.items)),this.filterAttorneyTypes=a=>this.data.userSelectAttorneyTypes({input:{name:a}}).pipe((0,g._b)(m=>{let p=m.data.items;return this.patchState({attorneyTypes:p}),p},m=>this.patchState({errors:m.graphQLErrors?m.graphQLErrors:m})),(0,B.U)(m=>m.data.items)),this.addFirm=this.updater((a,m)=>Object.assign(Object.assign({},a),{firms:a.firms.concat(m)})),this.addAttorneyStatus=this.updater((a,m)=>Object.assign(Object.assign({},a),{attorneyStatuses:a.attorneyStatuses.concat(m)})),this.addAttorneyType=this.updater((a,m)=>Object.assign(Object.assign({},a),{attorneyTypes:a.attorneyTypes.concat(m)})),this.setItem=this.updater((a,m)=>Object.assign(Object.assign({},a),{item:m})),this.addNewAttorney=this.updater((a,m)=>Object.assign(Object.assign({},a),{attorneys:[...a.attorneys,m]})),this.updateAttorney=this.updater((a,m)=>Object.assign(Object.assign({},a),{attorneys:a.attorneys.map(p=>p.id===m.id?m:p)})),this.addAttorneys=this.updater((a,m)=>Object.assign(Object.assign({},a),{attorneys:a.attorneys.concat(m)})),this.updateAttorneys=this.updater((a,m)=>Object.assign(Object.assign({},a),{attorneys:a.attorneys.map(p=>m.find(v=>v.id===p.id)||p)})),this.setSearchQuery=this.updater((a,m)=>Object.assign(Object.assign({},a),{searchQuery:m})),this.loadAttorneyEffect=this.effect(a=>a.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(m=>this.data.userAttorney({attorneyId:m}).pipe((0,g._b)(p=>{this.patchState({item:p.data.item,errors:p.errors,loading:!1})},p=>this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})))))),this.loadAttorneysEffect=this.effect(a=>a.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.input$),(0,h.w)(([m,p])=>this.data.userAttorneys({input:p}).pipe((0,g._b)(_=>this.patchState({paging:{limit:p.limit,skip:p.skip,total:_.data.count.total},attorneys:_.data.items,errors:_.errors,loading:!1}),_=>this.patchState({loading:!1,errors:_.graphQLErrors?_.graphQLErrors:_})))))),this.createAttorneyEffect=this.effect(a=>a.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(m=>this.attorneyService.createAttorney(Object.assign({},m)).pipe((0,g._b)(p=>{this.addNewAttorney(p),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:p,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},p=>{p.graphQLErrors?(this.toast.error(p.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})):(this.toast.error(p.Message),this.formService.setErrors(p.Data))}))))),this.updateAttorneyEffect=this.effect(a=>a.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([m,p])=>this.attorneyService.updateAttorney(m,m.id).pipe((0,g._b)(_=>{this.updateAttorney(_),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:_,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},_=>{_.graphQLErrors?(this.toast.error(_.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:_.graphQLErrors?_.graphQLErrors:_})):(this.toast.error(_.Message),this.formService.setErrors(_.Data))}))))),this.deleteAttorneyEffect=this.effect(a=>a.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([m,p])=>this.data.userDeleteAttorney({attorneyId:p.id}).pipe((0,g._b)(_=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:_.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},_=>{_.graphQLErrors?(this.toast.error(_.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:_.graphQLErrors?_.graphQLErrors:_})):(this.toast.error(_.Message),this.formService.setErrors(_.Data))}))))),this.importExcelEffect=this.effect(a=>a.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(m=>this.attorneyService.importAttorneys(m).pipe((0,te.K)(p=>{var _;return this.toast.error(null!==(_=p.Message)&&void 0!==_?_:"Failed to save",{duration:3e3}),k.E}),(0,C.b)(p=>{const _=JSON.parse(p.created),v=JSON.parse(p.updated),D=JSON.parse(p.failed),se=_.length+v.length+D.length;this.addAttorneys(_),this.updateAttorneys(v),this.toast.success(`${_.length} created, ${v.length} updated, ${D.length} failed of total ${se}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("attorneyId")?(this.route.snapshot.paramMap.get("attorneyId"),this.setFormName("attorney_edit")):this.setFormName("attorney_create"),this.route.snapshot.paramMap.has("firmId")){var c=this.route.snapshot.paramMap.get("firmId");this.setFirmId(c)}if(this.route.snapshot.paramMap.has("attorneyStatusId")){var d=this.route.snapshot.paramMap.get("attorneyStatusId");this.setAttorneyStatusId(d)}if(this.route.snapshot.paramMap.has("attorneyTypeId")){var n=this.route.snapshot.paramMap.get("attorneyTypeId");this.setAttorneyTypeId(n)}}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.attorneyService.validateAttorneyExcelData(t,i.firms,i.attorneyStatuses,i.attorneyTypes)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(E.q),e.LFG(A.F0),e.LFG(A.gz),e.LFG(X.F),e.LFG(q.o),e.LFG(of))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function rf(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close.emit())})("formIsReady",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.attorney)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let qr=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"attorney_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.attorney=i.item})):t.formName&&t.formName.currentValue&&"attorney_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadAttorneyEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.attorney=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(_s),e.Y36(A.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-attorney-form"]],inputs:{attorney:"attorney",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,rf,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[w.O5,z.M,w.Ov],encapsulation:2}),s})(),Hr=(()=>{class s{constructor(){this.autoHeight=!1,this.attorneys=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[{field:"firm.name",headerName:"Firm",filter:"agTextColumnFilter"},{field:"attorneyStatus.name",headerName:"Attorney Status",filter:"agTextColumnFilter"},{field:"attorneyType.name",headerName:"Attorney Type",filter:"agTextColumnFilter"},{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{field:"firmId",filter:"agTextColumnFilter",hide:!0},{field:"attorneyStatusId",filter:"agTextColumnFilter",hide:!0},{field:"attorneyTypeId",filter:"agTextColumnFilter",hide:!0},{field:"title",filter:"agTextColumnFilter"},{field:"firstName",filter:"agTextColumnFilter"},{field:"lastName",filter:"agTextColumnFilter"},{field:"address",filter:"agTextColumnFilter"},{field:"city",filter:"agTextColumnFilter"},{field:"state",filter:"agTextColumnFilter"},{field:"zip",filter:"agTextColumnFilter"},{field:"email",filter:"agTextColumnFilter"},{field:"direct",filter:"agTextColumnFilter"},{field:"fax",filter:"agTextColumnFilter"},{field:"cellPhone",filter:"agTextColumnFilter"},{field:"barNumber",filter:"agTextColumnFilter"},{field:"barState",filter:"agTextColumnFilter"},{headerName:"Do Not Disturb",field:"doNotDisturb",filter:"agSetColumnFilter",cellRenderer:"checkboxRenderer"},{field:"temp",filter:"agTextColumnFilter"},{field:"createdById",filter:"agTextColumnFilter",hide:!0},{field:"dateCreated",filter:"agDateColumnFilter"},{headerName:"Removed",field:"removed",filter:"agSetColumnFilter",cellRenderer:"checkboxRenderer"},{field:"migSource",filter:"agTextColumnFilter"},{field:"entity",filter:"agTextColumnFilter"},{headerName:"Firm Nolonger Needed",field:"firmNolongerNeeded",filter:"agSetColumnFilter",cellRenderer:"checkboxRenderer"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var r;t.includes(null===(r=i.data)||void 0===r?void 0:r.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-attorney-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(N.x,5),2&t){let r;e.iGM(r=e.CRH())&&(i.tableView=r.first)}},inputs:{autoHeight:"autoHeight",attorneys:"attorneys"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.attorneys)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[N.x],encapsulation:2}),s})();function af(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-attorney-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","attorney_edit")("formControl",t.formControl)("attorney",t.attorney)}}const nf=function(){return{}};function lf(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-attorney-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","attorney_create")("formControl",t.formControl)("attorney",e.DdM(3,nf))}}function cf(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-attorney-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(u.ref.close())}),e.qZA()}2&s&&e.Q6J("attorneys",o.data.items)}let df=(()=>{class s extends I.fS{constructor(t,i){super(),this.store=t,this.formService=i,this.routerKeys=["firmId","attorneyStatusId","attorneyTypeId"],this.store.loadAttorneysEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.attorneys$.pipe((0,h.w)(i=>(0,T.of)(i)))}formRouterKeyDidChange(t){this.store.setFirmId(t.firmId),this.store.setAttorneyStatusId(t.attorneyStatusId),this.store.setAttorneyTypeId(t.attorneyTypeId),this.store.loadAttorneysEffect()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(_s),e.Y36(q.o))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e._Bn([_s]),e.qOj],decls:7,vars:7,consts:[[3,"to","control","listTemplate","editTemplate","createTemplate","key","routerKeys","selectionChanged","formRouterKeyDidChange"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","attorney","send","close"],[1,"w-full","h-full","bg-white",3,"attorneys","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value})("formRouterKeyDidChange",function(l){return i.formRouterKeyDidChange(l)}),e.qZA(),e.YNc(1,af,2,3,"ng-template",null,1,e.W1O),e.YNc(3,lf,1,4,"ng-template",null,2,e.W1O),e.YNc(5,cf,1,1,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("listTemplate",u)("editTemplate",r)("createTemplate",l)("key",i.field.key)("routerKeys",i.routerKeys)}},dependencies:[x.JJ,x.oH,J.$,qr,Hr],encapsulation:2}),s})();function uf(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-attorney-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","attorney_edit")("attorney",t.value)}}const mf=function(){return{}};function pf(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-attorney-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","attorney_create")("attorney",e.DdM(2,mf))}function hf(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-attorney-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(null==u.ref?null:u.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("attorneys",t.items)}}let ff=(()=>{class s extends Y{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","attorney","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","attorneys","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,uf,1,2,"ng-template",null,1,e.W1O),e.YNc(3,pf,1,3,"ng-template",null,2,e.W1O),e.YNc(5,hf,1,2,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[ee,qr,Hr],encapsulation:2}),s})(),_f=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[w.ez,R.F,x.UX,V.o,H.u,Q.P,U.t,Z,j.h,K.G,I.X0.forChild({types:[{name:"attorney-select",component:df,wrappers:["form-field"]},{name:"attorney-grid",component:ff}]})]}),s})(),gf=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[_f]}),s})();class He extends y.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class Cf extends He{constructor(o){super("ValidateAttorneyStatusExcelDataAction"),this.valid=!1,this.excelData=o}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name)}),this.validationContext.addRule(new f.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof f.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(r=>r.name),newNames:[i.newName]}):i instanceof f.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,T.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class Sf extends f.wS{constructor(o,t,i,r,l){super(o,t,i,r,l,!0)}}class vf extends f.ul{constructor(o,t,i,r=!1){super(o,t,r),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new f.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new Sf("name","The attorneystatus name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class bf extends He{constructor(o){super("CreateAttorneyStatusAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new vf("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateAttorneyStatus({input:this.input}).pipe((0,h.w)(o=>(0,ie.of)(o.data.created)))}}class Tf extends He{constructor(o){super("UpdateAttorneyStatusesAction"),this.attorneyStatuses=o}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.attorneyStatuses,!0))}performAction(){this.response=this.businessProvider.data.userUpdateAttorneyStatuses({input:{attorneyStatuses:this.attorneyStatuses}}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}class yf extends He{constructor(o,t){super("UpdateAttorneyStatusAction"),this.attorneyStatus=o,this.attorneyStatusId=t}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.attorneyStatus,!0)).addRule(new f.xF("Id","Id should be a CUID and not null",this.attorneyStatusId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateAttorneyStatus({attorneyStatusId:this.attorneyStatusId,input:this.attorneyStatus}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}let Kr=(()=>{class s extends y.nH{constructor(t,i,r){super("NotificationService.AttorneyStatusBusinessProviderService",t,r),this.data=i}createAttorneyStatus(t){const i=new bf(t);return i.Do(this),i.response}updateAttorneyStatus(t,i){const r=new yf(t,i);return r.Do(this),r.response}importAttorneyStatuses(t){const i=new Tf(t);return i.Do(this),i.response}validateAttorneyStatusExcelData(t){const i=new Cf(t);return i.Do(this),i.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(O.ed),e.LFG(E.q),e.LFG(y.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),wf=(()=>{class s extends y.nH{constructor(t,i,r){super("AttorneyStatusService",r,t),this.businessProvider=i}createAttorneyStatus(t){const i=Object.fromEntries(Object.entries(t).filter(([r,l])=>null!==l));return this.businessProvider.createAttorneyStatus(i)}updateAttorneyStatus(t,i){return this.businessProvider.updateAttorneyStatus(t,i)}importAttorneyStatuses(t){return this.businessProvider.importAttorneyStatuses(t)}validateAttorneyStatusExcelData(t){return this.businessProvider.validateAttorneyStatusExcelData(t)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(Kr,8),e.LFG(Kr),e.LFG(O.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),gs=(()=>{class s extends g.m1{constructor(t,i,r,l,u,P){super({loading:!1,attorneyStatuses:[],done:!1,searchQuery:"",formName:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=r,this.toast=l,this.formService=u,this.attorneyStatusService=P,this.errors$=this.select(c=>c.errors),this.loading$=this.select(c=>c.loading),this.done$=this.select(c=>c.done),this.item$=this.select(c=>c.item),this.attorneyStatuses$=this.select(c=>c.attorneyStatuses),this.paging$=this.select(c=>c.paging),this.searchQuery$=this.select(c=>c.searchQuery),this.formName$=this.select(c=>c.formName),this.actionResult$=this.select(this.item$,this.done$,(c,d)=>({item:c,done:d}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.attorneyStatuses$,(c,d,n,a,m)=>({errors:c,loading:d,item:n,formName:a,attorneyStatuses:m}),{debounce:!0}),this.input$=this.select(this.paging$,this.searchQuery$,(c,d)=>({limit:c.limit,skip:c.skip,name:d,total:c.total})),this.setFormName=this.updater((c,d)=>Object.assign(Object.assign({},c),{formName:d})),this.setItem=this.updater((c,d)=>Object.assign(Object.assign({},c),{item:d})),this.addNewAttorneyStatus=this.updater((c,d)=>Object.assign(Object.assign({},c),{attorneyStatuses:[...c.attorneyStatuses,d]})),this.updateAttorneyStatus=this.updater((c,d)=>Object.assign(Object.assign({},c),{attorneyStatuses:c.attorneyStatuses.map(n=>n.id===d.id?d:n)})),this.addAttorneyStatuses=this.updater((c,d)=>Object.assign(Object.assign({},c),{attorneyStatuses:c.attorneyStatuses.concat(d)})),this.updateAttorneyStatuses=this.updater((c,d)=>Object.assign(Object.assign({},c),{attorneyStatuses:c.attorneyStatuses.map(n=>d.find(m=>m.id===n.id)||n)})),this.setSearchQuery=this.updater((c,d)=>Object.assign(Object.assign({},c),{searchQuery:d})),this.loadAttorneyStatusEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.data.userAttorneyStatus({attorneyStatusId:d}).pipe((0,g._b)(n=>{this.patchState({item:n.data.item,errors:n.errors,loading:!1})},n=>this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})))))),this.loadAttorneyStatusesEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.input$),(0,h.w)(([d,n])=>this.data.userAttorneyStatuses({input:n}).pipe((0,g._b)(a=>this.patchState({paging:{limit:n.limit,skip:n.skip,total:a.data.count.total},attorneyStatuses:a.data.items,errors:a.errors,loading:!1}),a=>this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})))))),this.createAttorneyStatusEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.attorneyStatusService.createAttorneyStatus(Object.assign({},d)).pipe((0,g._b)(n=>{this.addNewAttorneyStatus(n),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:n,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},n=>{n.graphQLErrors?(this.toast.error(n.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})):(this.toast.error(n.Message),this.formService.setErrors(n.Data))}))))),this.updateAttorneyStatusEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([d,n])=>this.attorneyStatusService.updateAttorneyStatus(d,d.id).pipe((0,g._b)(a=>{this.updateAttorneyStatus(a),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:a,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.deleteAttorneyStatusEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([d,n])=>this.data.userDeleteAttorneyStatus({attorneyStatusId:n.id}).pipe((0,g._b)(a=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:a.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.importExcelEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.attorneyStatusService.importAttorneyStatuses(d).pipe((0,te.K)(n=>{var a;return this.toast.error(null!==(a=n.Message)&&void 0!==a?a:"Failed to save",{duration:3e3}),k.E}),(0,C.b)(n=>{const a=JSON.parse(n.created),m=JSON.parse(n.updated),p=JSON.parse(n.failed),_=a.length+m.length+p.length;this.addAttorneyStatuses(a),this.updateAttorneyStatuses(m),this.toast.success(`${a.length} created, ${m.length} updated, ${p.length} failed of total ${_}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("attorneyStatusId")?(this.route.snapshot.paramMap.get("attorneyStatusId"),this.setFormName("attorneyStatus_edit")):this.setFormName("attorneyStatus_create")}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.attorneyStatusService.validateAttorneyStatusExcelData(t)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(E.q),e.LFG(A.F0),e.LFG(A.gz),e.LFG(X.F),e.LFG(q.o),e.LFG(wf))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function xf(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close.emit())})("formIsReady",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.attorneyStatus)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let kr=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"attorneyStatus_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.attorneyStatus=i.item})):t.formName&&t.formName.currentValue&&"attorneyStatus_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadAttorneyStatusEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.attorneyStatus=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(gs),e.Y36(A.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-attorney-status-form"]],inputs:{attorneyStatus:"attorneyStatus",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,xf,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[w.O5,z.M,w.Ov],encapsulation:2}),s})(),Zr=(()=>{class s{constructor(){this.autoHeight=!1,this.attorneyStatuses=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[,{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var r;t.includes(null===(r=i.data)||void 0===r?void 0:r.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-attorney-status-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(N.x,5),2&t){let r;e.iGM(r=e.CRH())&&(i.tableView=r.first)}},inputs:{autoHeight:"autoHeight",attorneyStatuses:"attorneyStatuses"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.attorneyStatuses)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[N.x],encapsulation:2}),s})();function Nf(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-attorney-status-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","attorneyStatus_edit")("formControl",t.formControl)("attorneyStatus",t.attorneyStatus)}}const Af=function(){return{}};function Ff(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-attorney-status-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","attorneyStatus_create")("formControl",t.formControl)("attorneyStatus",e.DdM(3,Af))}}function Df(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-attorney-status-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(u.ref.close())}),e.qZA()}2&s&&e.Q6J("attorneyStatuses",o.data.items)}let If=(()=>{class s extends I.fS{constructor(t){super(),this.store=t,this.store.loadAttorneyStatusesEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.attorneyStatuses$.pipe((0,h.w)(i=>(0,T.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(gs))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","attorneyStatus","send","close"],[1,"w-full","h-full","bg-white",3,"attorneyStatuses","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,Nf,2,3,"ng-template",null,1,e.W1O),e.YNc(3,Ff,1,4,"ng-template",null,2,e.W1O),e.YNc(5,Df,1,1,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",u)("editTemplate",r)("createTemplate",l)("key",i.field.key)}},dependencies:[x.JJ,x.oH,J.$,kr,Zr],encapsulation:2}),s})();function Pf(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-attorney-status-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","attorneyStatus_edit")("attorneyStatus",t.value)}}const Wf=function(){return{}};function Mf(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-attorney-status-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","attorneyStatus_create")("attorneyStatus",e.DdM(2,Wf))}function Ef(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-attorney-status-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(null==u.ref?null:u.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("attorneyStatuses",t.items)}}let Of=(()=>{class s extends Y{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","attorneyStatus","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","attorneyStatuses","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,Pf,1,2,"ng-template",null,1,e.W1O),e.YNc(3,Mf,1,3,"ng-template",null,2,e.W1O),e.YNc(5,Ef,1,2,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[ee,kr,Zr],encapsulation:2}),s})(),Lf=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[gs],imports:[w.ez,R.F,x.UX,V.o,H.u,Q.P,U.t,Z,j.h,K.G,I.X0.forChild({types:[{name:"attorney-status-select",component:If,wrappers:["form-field"]},{name:"attorney-status-grid",component:Of}]})]}),s})(),Gf=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[Lf]}),s})();class Ke extends y.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class $f extends Ke{constructor(o){super("ValidateAttorneyTypeExcelDataAction"),this.valid=!1,this.excelData=o}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name)}),this.validationContext.addRule(new f.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof f.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(r=>r.name),newNames:[i.newName]}):i instanceof f.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,T.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class Rf extends f.wS{constructor(o,t,i,r,l){super(o,t,i,r,l,!0)}}class Vf extends f.ul{constructor(o,t,i,r=!1){super(o,t,r),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new f.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new Rf("name","The attorneytype name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class Qf extends Ke{constructor(o){super("CreateAttorneyTypeAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new Vf("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateAttorneyType({input:this.input}).pipe((0,h.w)(o=>(0,ie.of)(o.data.created)))}}class Uf extends Ke{constructor(o){super("UpdateAttorneyTypesAction"),this.attorneyTypes=o}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.attorneyTypes,!0))}performAction(){this.response=this.businessProvider.data.userUpdateAttorneyTypes({input:{attorneyTypes:this.attorneyTypes}}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}class Jf extends Ke{constructor(o,t){super("UpdateAttorneyTypeAction"),this.attorneyType=o,this.attorneyTypeId=t}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.attorneyType,!0)).addRule(new f.xF("Id","Id should be a CUID and not null",this.attorneyTypeId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateAttorneyType({attorneyTypeId:this.attorneyTypeId,input:this.attorneyType}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}let Br=(()=>{class s extends y.nH{constructor(t,i,r){super("NotificationService.AttorneyTypeBusinessProviderService",t,r),this.data=i}createAttorneyType(t){const i=new Qf(t);return i.Do(this),i.response}updateAttorneyType(t,i){const r=new Jf(t,i);return r.Do(this),r.response}importAttorneyTypes(t){const i=new Uf(t);return i.Do(this),i.response}validateAttorneyTypeExcelData(t){const i=new $f(t);return i.Do(this),i.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(O.ed),e.LFG(E.q),e.LFG(y.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),jf=(()=>{class s extends y.nH{constructor(t,i,r){super("AttorneyTypeService",r,t),this.businessProvider=i}createAttorneyType(t){const i=Object.fromEntries(Object.entries(t).filter(([r,l])=>null!==l));return this.businessProvider.createAttorneyType(i)}updateAttorneyType(t,i){return this.businessProvider.updateAttorneyType(t,i)}importAttorneyTypes(t){return this.businessProvider.importAttorneyTypes(t)}validateAttorneyTypeExcelData(t){return this.businessProvider.validateAttorneyTypeExcelData(t)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(Br,8),e.LFG(Br),e.LFG(O.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),Cs=(()=>{class s extends g.m1{constructor(t,i,r,l,u,P){super({loading:!1,attorneyTypes:[],done:!1,searchQuery:"",formName:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=r,this.toast=l,this.formService=u,this.attorneyTypeService=P,this.errors$=this.select(c=>c.errors),this.loading$=this.select(c=>c.loading),this.done$=this.select(c=>c.done),this.item$=this.select(c=>c.item),this.attorneyTypes$=this.select(c=>c.attorneyTypes),this.paging$=this.select(c=>c.paging),this.searchQuery$=this.select(c=>c.searchQuery),this.formName$=this.select(c=>c.formName),this.actionResult$=this.select(this.item$,this.done$,(c,d)=>({item:c,done:d}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.attorneyTypes$,(c,d,n,a,m)=>({errors:c,loading:d,item:n,formName:a,attorneyTypes:m}),{debounce:!0}),this.input$=this.select(this.paging$,this.searchQuery$,(c,d)=>({limit:c.limit,skip:c.skip,name:d,total:c.total})),this.setFormName=this.updater((c,d)=>Object.assign(Object.assign({},c),{formName:d})),this.setItem=this.updater((c,d)=>Object.assign(Object.assign({},c),{item:d})),this.addNewAttorneyType=this.updater((c,d)=>Object.assign(Object.assign({},c),{attorneyTypes:[...c.attorneyTypes,d]})),this.updateAttorneyType=this.updater((c,d)=>Object.assign(Object.assign({},c),{attorneyTypes:c.attorneyTypes.map(n=>n.id===d.id?d:n)})),this.addAttorneyTypes=this.updater((c,d)=>Object.assign(Object.assign({},c),{attorneyTypes:c.attorneyTypes.concat(d)})),this.updateAttorneyTypes=this.updater((c,d)=>Object.assign(Object.assign({},c),{attorneyTypes:c.attorneyTypes.map(n=>d.find(m=>m.id===n.id)||n)})),this.setSearchQuery=this.updater((c,d)=>Object.assign(Object.assign({},c),{searchQuery:d})),this.loadAttorneyTypeEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.data.userAttorneyType({attorneyTypeId:d}).pipe((0,g._b)(n=>{this.patchState({item:n.data.item,errors:n.errors,loading:!1})},n=>this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})))))),this.loadAttorneyTypesEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.input$),(0,h.w)(([d,n])=>this.data.userAttorneyTypes({input:n}).pipe((0,g._b)(a=>this.patchState({paging:{limit:n.limit,skip:n.skip,total:a.data.count.total},attorneyTypes:a.data.items,errors:a.errors,loading:!1}),a=>this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})))))),this.createAttorneyTypeEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.attorneyTypeService.createAttorneyType(Object.assign({},d)).pipe((0,g._b)(n=>{this.addNewAttorneyType(n),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:n,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},n=>{n.graphQLErrors?(this.toast.error(n.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})):(this.toast.error(n.Message),this.formService.setErrors(n.Data))}))))),this.updateAttorneyTypeEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([d,n])=>this.attorneyTypeService.updateAttorneyType(d,d.id).pipe((0,g._b)(a=>{this.updateAttorneyType(a),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:a,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.deleteAttorneyTypeEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([d,n])=>this.data.userDeleteAttorneyType({attorneyTypeId:n.id}).pipe((0,g._b)(a=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:a.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.importExcelEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.attorneyTypeService.importAttorneyTypes(d).pipe((0,te.K)(n=>{var a;return this.toast.error(null!==(a=n.Message)&&void 0!==a?a:"Failed to save",{duration:3e3}),k.E}),(0,C.b)(n=>{const a=JSON.parse(n.created),m=JSON.parse(n.updated),p=JSON.parse(n.failed),_=a.length+m.length+p.length;this.addAttorneyTypes(a),this.updateAttorneyTypes(m),this.toast.success(`${a.length} created, ${m.length} updated, ${p.length} failed of total ${_}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("attorneyTypeId")?(this.route.snapshot.paramMap.get("attorneyTypeId"),this.setFormName("attorneyType_edit")):this.setFormName("attorneyType_create")}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.attorneyTypeService.validateAttorneyTypeExcelData(t)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(E.q),e.LFG(A.F0),e.LFG(A.gz),e.LFG(X.F),e.LFG(q.o),e.LFG(jf))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function zf(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close.emit())})("formIsReady",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.attorneyType)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let Yr=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"attorneyType_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.attorneyType=i.item})):t.formName&&t.formName.currentValue&&"attorneyType_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadAttorneyTypeEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.attorneyType=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Cs),e.Y36(A.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-attorney-type-form"]],inputs:{attorneyType:"attorneyType",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,zf,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[w.O5,z.M,w.Ov],encapsulation:2}),s})(),Xr=(()=>{class s{constructor(){this.autoHeight=!1,this.attorneyTypes=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[,{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var r;t.includes(null===(r=i.data)||void 0===r?void 0:r.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-attorney-type-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(N.x,5),2&t){let r;e.iGM(r=e.CRH())&&(i.tableView=r.first)}},inputs:{autoHeight:"autoHeight",attorneyTypes:"attorneyTypes"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.attorneyTypes)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[N.x],encapsulation:2}),s})();function qf(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-attorney-type-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","attorneyType_edit")("formControl",t.formControl)("attorneyType",t.attorneyType)}}const Hf=function(){return{}};function Kf(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-attorney-type-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","attorneyType_create")("formControl",t.formControl)("attorneyType",e.DdM(3,Hf))}}function kf(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-attorney-type-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(u.ref.close())}),e.qZA()}2&s&&e.Q6J("attorneyTypes",o.data.items)}let Zf=(()=>{class s extends I.fS{constructor(t){super(),this.store=t,this.store.loadAttorneyTypesEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.attorneyTypes$.pipe((0,h.w)(i=>(0,T.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Cs))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","attorneyType","send","close"],[1,"w-full","h-full","bg-white",3,"attorneyTypes","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,qf,2,3,"ng-template",null,1,e.W1O),e.YNc(3,Kf,1,4,"ng-template",null,2,e.W1O),e.YNc(5,kf,1,1,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",u)("editTemplate",r)("createTemplate",l)("key",i.field.key)}},dependencies:[x.JJ,x.oH,J.$,Yr,Xr],encapsulation:2}),s})();function Bf(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-attorney-type-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","attorneyType_edit")("attorneyType",t.value)}}const Yf=function(){return{}};function Xf(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-attorney-type-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","attorneyType_create")("attorneyType",e.DdM(2,Yf))}function e_(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-attorney-type-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(null==u.ref?null:u.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("attorneyTypes",t.items)}}let t_=(()=>{class s extends Y{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","attorneyType","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","attorneyTypes","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,Bf,1,2,"ng-template",null,1,e.W1O),e.YNc(3,Xf,1,3,"ng-template",null,2,e.W1O),e.YNc(5,e_,1,2,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[ee,Yr,Xr],encapsulation:2}),s})(),i_=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[Cs],imports:[w.ez,R.F,x.UX,V.o,H.u,Q.P,U.t,Z,j.h,K.G,I.X0.forChild({types:[{name:"attorney-type-select",component:Zf,wrappers:["form-field"]},{name:"attorney-type-grid",component:t_}]})]}),s})(),s_=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[i_]}),s})();class ke extends y.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class o_ extends ke{constructor(o,t,i,r,l){super("ValidateAuthorizationExcelDataAction"),this.valid=!1,this.excelData=o,this.vendors=t,this.authorizationCategories=i,this.authorizationTypes=r,this.procedures=l}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name),this.validationContext.addRule(new f.mi(`vendorName_${i}_is_valid}`,"Vendor Is Not Valid","vendor.name",t.vendor,this.vendors,!0)),this.validationContext.addRule(new f.mi(`authorizationCategoryName_${i}_is_valid}`,"Authorization Category Is Not Valid","authorizationCategory.name",t.authorizationCategory,this.authorizationCategories,!0)),this.validationContext.addRule(new f.mi(`authorizationTypeName_${i}_is_valid}`,"Authorization Type Is Not Valid","authorizationType.name",t.authorizationType,this.authorizationTypes,!0)),this.validationContext.addRule(new f.mi(`procedureName_${i}_is_valid}`,"Procedure Is Not Valid","procedure.name",t.procedure,this.procedures,!0))}),this.validationContext.addRule(new f.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof f.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(r=>r.name),newNames:[i.newName]}):i instanceof f.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,T.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class r_ extends f.wS{constructor(o,t,i,r,l){super(o,t,i,r,l,!0)}}class a_ extends f.ul{constructor(o,t,i,r=!1){super(o,t,r),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new f.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new r_("name","The authorization name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class n_ extends ke{constructor(o){super("CreateAuthorizationAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new a_("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateAuthorization({input:this.input}).pipe((0,h.w)(o=>(0,ie.of)(o.data.created)))}}class l_ extends ke{constructor(o){super("UpdateAuthorizationsAction"),this.authorizations=o}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.authorizations,!0))}performAction(){this.response=this.businessProvider.data.userUpdateAuthorizations({input:{authorizations:this.authorizations}}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}class c_ extends ke{constructor(o,t){super("UpdateAuthorizationAction"),this.authorization=o,this.authorizationId=t}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.authorization,!0)).addRule(new f.xF("Id","Id should be a CUID and not null",this.authorizationId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateAuthorization({authorizationId:this.authorizationId,input:this.authorization}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}let ea=(()=>{class s extends y.nH{constructor(t,i,r){super("NotificationService.AuthorizationBusinessProviderService",t,r),this.data=i}createAuthorization(t){const i=new n_(t);return i.Do(this),i.response}updateAuthorization(t,i){const r=new c_(t,i);return r.Do(this),r.response}importAuthorizations(t){const i=new l_(t);return i.Do(this),i.response}validateAuthorizationExcelData(t,i,r,l,u){const P=new o_(t,i,r,l,u);return P.Do(this),P.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(O.ed),e.LFG(E.q),e.LFG(y.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),d_=(()=>{class s extends y.nH{constructor(t,i,r){super("AuthorizationService",r,t),this.businessProvider=i}createAuthorization(t){return this.businessProvider.createAuthorization(t)}updateAuthorization(t,i){return this.businessProvider.updateAuthorization(t,i)}importAuthorizations(t){return this.businessProvider.importAuthorizations(t)}validateAuthorizationExcelData(t,i,r,l,u){return this.businessProvider.validateAuthorizationExcelData(t,i,r,l,u)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(ea,8),e.LFG(ea),e.LFG(O.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),Ze=(()=>{class s extends g.m1{constructor(t,i,r,l,u,P){if(super({loading:!1,authorizations:[],done:!1,searchQuery:"",formName:void 0,vendorId:void 0,authorizationCategoryId:void 0,authorizationTypeId:void 0,procedureId:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=r,this.toast=l,this.formService=u,this.authorizationService=P,this.errors$=this.select(m=>m.errors),this.loading$=this.select(m=>m.loading),this.done$=this.select(m=>m.done),this.item$=this.select(m=>m.item),this.authorizations$=this.select(m=>m.authorizations),this.vendors$=this.select(m=>m.vendors||[]),this.authorizationCategories$=this.select(m=>m.authorizationCategories||[]),this.authorizationTypes$=this.select(m=>m.authorizationTypes||[]),this.procedures$=this.select(m=>m.procedures||[]),this.vendorId$=this.select(m=>m.vendorId),this.authorizationCategoryId$=this.select(m=>m.authorizationCategoryId),this.authorizationTypeId$=this.select(m=>m.authorizationTypeId),this.procedureId$=this.select(m=>m.procedureId),this.paging$=this.select(m=>m.paging),this.searchQuery$=this.select(m=>m.searchQuery),this.formName$=this.select(m=>m.formName),this.actionResult$=this.select(this.item$,this.done$,(m,p)=>({item:m,done:p}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.authorizations$,this.vendors$,this.authorizationCategories$,this.authorizationTypes$,this.procedures$,(m,p,_,v,D,se,me,G,$)=>({errors:m,loading:p,item:_,formName:v,authorizations:D,vendors:se,authorizationCategories:me,authorizationTypes:G,procedures:$}),{debounce:!0}),this.input$=this.select(this.paging$,this.vendorId$,this.authorizationCategoryId$,this.authorizationTypeId$,this.procedureId$,this.searchQuery$,(m,p,_,v,D,se)=>({limit:m.limit,skip:m.skip,name:se,vendorId:p,authorizationCategoryId:_,authorizationTypeId:v,procedureId:D,total:m.total})),this.setFormName=this.updater((m,p)=>Object.assign(Object.assign({},m),{formName:p})),this.setVendorId=this.updater((m,p)=>Object.assign(Object.assign({},m),{vendorId:p})),this.setAuthorizationCategoryId=this.updater((m,p)=>Object.assign(Object.assign({},m),{authorizationCategoryId:p})),this.setAuthorizationTypeId=this.updater((m,p)=>Object.assign(Object.assign({},m),{authorizationTypeId:p})),this.setProcedureId=this.updater((m,p)=>Object.assign(Object.assign({},m),{procedureId:p})),this.filterVendors=m=>this.data.userSelectVendors({input:{name:m}}).pipe((0,g._b)(p=>{let _=p.data.items;return this.patchState({vendors:_}),_},p=>this.patchState({errors:p.graphQLErrors?p.graphQLErrors:p})),(0,B.U)(p=>p.data.items)),this.filterAuthorizationCategories=m=>this.data.userSelectAuthorizationCategories({input:{name:m}}).pipe((0,g._b)(p=>{let _=p.data.items;return this.patchState({authorizationCategories:_}),_},p=>this.patchState({errors:p.graphQLErrors?p.graphQLErrors:p})),(0,B.U)(p=>p.data.items)),this.filterAuthorizationTypes=m=>this.data.userSelectAuthorizationTypes({input:{name:m}}).pipe((0,g._b)(p=>{let _=p.data.items;return this.patchState({authorizationTypes:_}),_},p=>this.patchState({errors:p.graphQLErrors?p.graphQLErrors:p})),(0,B.U)(p=>p.data.items)),this.filterProcedures=m=>this.data.userSelectProcedures({input:{name:m}}).pipe((0,g._b)(p=>{let _=p.data.items;return this.patchState({procedures:_}),_},p=>this.patchState({errors:p.graphQLErrors?p.graphQLErrors:p})),(0,B.U)(p=>p.data.items)),this.addVendor=this.updater((m,p)=>Object.assign(Object.assign({},m),{vendors:m.vendors.concat(p)})),this.addAuthorizationCategory=this.updater((m,p)=>Object.assign(Object.assign({},m),{authorizationCategories:m.authorizationCategories.concat(p)})),this.addAuthorizationType=this.updater((m,p)=>Object.assign(Object.assign({},m),{authorizationTypes:m.authorizationTypes.concat(p)})),this.addProcedure=this.updater((m,p)=>Object.assign(Object.assign({},m),{procedures:m.procedures.concat(p)})),this.setItem=this.updater((m,p)=>Object.assign(Object.assign({},m),{item:p})),this.addNewAuthorization=this.updater((m,p)=>Object.assign(Object.assign({},m),{authorizations:[...m.authorizations,p]})),this.updateAuthorization=this.updater((m,p)=>Object.assign(Object.assign({},m),{authorizations:m.authorizations.map(_=>_.id===p.id?p:_)})),this.addAuthorizations=this.updater((m,p)=>Object.assign(Object.assign({},m),{authorizations:m.authorizations.concat(p)})),this.updateAuthorizations=this.updater((m,p)=>Object.assign(Object.assign({},m),{authorizations:m.authorizations.map(_=>p.find(D=>D.id===_.id)||_)})),this.setSearchQuery=this.updater((m,p)=>Object.assign(Object.assign({},m),{searchQuery:p})),this.loadAuthorizationEffect=this.effect(m=>m.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(p=>this.data.userAuthorization({authorizationId:p}).pipe((0,g._b)(_=>{this.patchState({item:_.data.item,errors:_.errors,loading:!1})},_=>this.patchState({loading:!1,errors:_.graphQLErrors?_.graphQLErrors:_})))))),this.loadAuthorizationsEffect=this.effect(m=>m.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.input$),(0,h.w)(([p,_])=>this.data.userAuthorizations({input:_}).pipe((0,g._b)(v=>this.patchState({paging:{limit:_.limit,skip:_.skip,total:v.data.count.total},authorizations:v.data.items,errors:v.errors,loading:!1}),v=>this.patchState({loading:!1,errors:v.graphQLErrors?v.graphQLErrors:v})))))),this.createAuthorizationEffect=this.effect(m=>m.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(p=>this.authorizationService.createAuthorization(Object.assign({},p)).pipe((0,g._b)(_=>{this.addNewAuthorization(_),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:_,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},_=>{_.graphQLErrors?(this.toast.error(_.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:_.graphQLErrors?_.graphQLErrors:_})):(this.toast.error(_.Message),this.formService.setErrors(_.Data))}))))),this.updateAuthorizationEffect=this.effect(m=>m.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([p,_])=>this.authorizationService.updateAuthorization(p,p.id).pipe((0,g._b)(v=>{this.updateAuthorization(v),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:v,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},v=>{v.graphQLErrors?(this.toast.error(v.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:v.graphQLErrors?v.graphQLErrors:v})):(this.toast.error(v.Message),this.formService.setErrors(v.Data))}))))),this.deleteAuthorizationEffect=this.effect(m=>m.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([p,_])=>this.data.userDeleteAuthorization({authorizationId:_.id}).pipe((0,g._b)(v=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:v.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},v=>{v.graphQLErrors?(this.toast.error(v.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:v.graphQLErrors?v.graphQLErrors:v})):(this.toast.error(v.Message),this.formService.setErrors(v.Data))}))))),this.importExcelEffect=this.effect(m=>m.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(p=>this.authorizationService.importAuthorizations(p).pipe((0,te.K)(_=>{var v;return this.toast.error(null!==(v=_.Message)&&void 0!==v?v:"Failed to save",{duration:3e3}),k.E}),(0,C.b)(_=>{const v=JSON.parse(_.created),D=JSON.parse(_.updated),se=JSON.parse(_.failed),me=v.length+D.length+se.length;this.addAuthorizations(v),this.updateAuthorizations(D),this.toast.success(`${v.length} created, ${D.length} updated, ${se.length} failed of total ${me}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("authorizationId")?(this.route.snapshot.paramMap.get("authorizationId"),this.setFormName("authorization_edit")):this.setFormName("authorization_create"),this.route.snapshot.paramMap.has("vendorId")){var c=this.route.snapshot.paramMap.get("vendorId");this.setVendorId(c)}if(this.route.snapshot.paramMap.has("authorizationCategoryId")){var d=this.route.snapshot.paramMap.get("authorizationCategoryId");this.setAuthorizationCategoryId(d)}if(this.route.snapshot.paramMap.has("authorizationTypeId")){var n=this.route.snapshot.paramMap.get("authorizationTypeId");this.setAuthorizationTypeId(n)}if(this.route.snapshot.paramMap.has("procedureId")){var a=this.route.snapshot.paramMap.get("procedureId");this.setProcedureId(a)}}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.authorizationService.validateAuthorizationExcelData(t,i.vendors,i.authorizationCategories,i.authorizationTypes,i.procedures)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(E.q),e.LFG(A.F0),e.LFG(A.gz),e.LFG(X.F),e.LFG(q.o),e.LFG(d_))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function u_(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close.emit())})("formIsReady",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.authorization)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let ta=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"authorization_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({id:null,name:""}),this.store.vm$.subscribe(i=>{this.authorization=i.item})):t.formName&&t.formName.currentValue&&"authorization_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadAuthorizationEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.authorization=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Ze),e.Y36(A.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-authorization-form"]],inputs:{authorization:"authorization",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,u_,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[w.O5,z.M,w.Ov],encapsulation:2}),s})(),ia=(()=>{class s{constructor(){this.autoHeight=!1,this.authorizations=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[{field:"vendor.name",headerName:"Vendor",filter:"agTextColumnFilter"},{field:"authorizationCategory.name",headerName:"Authorization Category",filter:"agTextColumnFilter"},{field:"authorizationType.name",headerName:"Authorization Type",filter:"agTextColumnFilter"},{field:"procedure.name",headerName:"Procedure",filter:"agTextColumnFilter"},{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{field:"vendorId",filter:"agTextColumnFilter",hide:!0},{field:"authorizationCategoryId",filter:"agTextColumnFilter",hide:!0},{field:"authorizationTypeId",filter:"agTextColumnFilter",hide:!0},{field:"requestDescription",filter:"agTextColumnFilter"},{headerName:"Duration or Quantity",field:"durationOrQuantity",valueFormatter:t=>{var i;return(0,S.oBD)(null===(i=t.data)||void 0===i?void 0:i.durationOrQuantity,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{field:"unit",filter:"agTextColumnFilter"},{field:"cptCode",filter:"agTextColumnFilter"},{field:"procedureId",filter:"agTextColumnFilter",hide:!0}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var r;t.includes(null===(r=i.data)||void 0===r?void 0:r.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-authorization-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(N.x,5),2&t){let r;e.iGM(r=e.CRH())&&(i.tableView=r.first)}},inputs:{autoHeight:"autoHeight",authorizations:"authorizations"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","data","showSidebar","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("data",i.authorizations)("showSidebar",!1)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[N.x],encapsulation:2}),s})();function m_(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-authorization-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","authorization_edit")("formControl",t.formControl)("authorization",t.authorization)}}const p_=function(){return{}};function h_(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-authorization-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","authorization_create")("formControl",t.formControl)("authorization",e.DdM(3,p_))}}function f_(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-authorization-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(u.ref.close())}),e.qZA()}2&s&&e.Q6J("authorizations",o.data.items)}let __=(()=>{class s extends I.fS{constructor(t){super(),this.store=t,this.store.loadAuthorizationsEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.authorizations$.pipe((0,h.w)(i=>(0,T.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Ze))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e._Bn([Ze]),e.qOj],decls:7,vars:5,consts:[[3,"to","control","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","authorization","send","close"],[1,"w-full","h-full","bg-white",3,"authorizations","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"ui-select-form",0),e.YNc(1,m_,2,3,"ng-template",null,1,e.W1O),e.YNc(3,h_,1,4,"ng-template",null,2,e.W1O),e.YNc(5,f_,1,1,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[x.JJ,x.oH,J.$,ta,ia],encapsulation:2}),s})();function g_(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-authorization-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","authorization_edit")("authorization",t.value)}}const C_=function(){return{}};function S_(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-authorization-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","authorization_create")("authorization",e.DdM(2,C_))}function v_(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-authorization-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(null==u.ref?null:u.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("authorizations",t.items)}}let b_=(()=>{class s extends Y{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:6,consts:[[3,"data","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","authorization","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","authorizations","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,g_,1,2,"ng-template",null,1,e.W1O),e.YNc(3,S_,1,3,"ng-template",null,2,e.W1O),e.YNc(5,v_,1,2,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("data",i.data)("title",i.to.title)("onSave",i.onSave)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[ee,ta,ia],encapsulation:2}),s})(),T_=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[Ze],imports:[w.ez,R.F,x.UX,V.o,H.u,Q.P,U.t,Z,j.h,K.G,I.X0.forChild({types:[{name:"authorization-select",component:__,wrappers:["form-field"]},{name:"authorization-grid",component:b_}]})]}),s})(),y_=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[T_]}),s})();class Be extends y.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class w_ extends Be{constructor(o){super("ValidateAuthorizationCategoryExcelDataAction"),this.valid=!1,this.excelData=o}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name)}),this.validationContext.addRule(new f.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof f.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(r=>r.name),newNames:[i.newName]}):i instanceof f.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,T.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class x_ extends f.wS{constructor(o,t,i,r,l){super(o,t,i,r,l,!0)}}class N_ extends f.ul{constructor(o,t,i,r=!1){super(o,t,r),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new f.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new x_("name","The authorizationcategory name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class A_ extends Be{constructor(o){super("CreateAuthorizationCategoryAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new N_("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateAuthorizationCategory({input:this.input}).pipe((0,h.w)(o=>(0,ie.of)(o.data.created)))}}class F_ extends Be{constructor(o){super("UpdateAuthorizationCategoriesAction"),this.authorizationCategories=o}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.authorizationCategories,!0))}performAction(){this.response=this.businessProvider.data.userUpdateAuthorizationCategories({input:{authorizationCategories:this.authorizationCategories}}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}class D_ extends Be{constructor(o,t){super("UpdateAuthorizationCategoryAction"),this.authorizationCategory=o,this.authorizationCategoryId=t}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.authorizationCategory,!0)).addRule(new f.xF("Id","Id should be a CUID and not null",this.authorizationCategoryId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateAuthorizationCategory({authorizationCategoryId:this.authorizationCategoryId,input:this.authorizationCategory}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}let sa=(()=>{class s extends y.nH{constructor(t,i,r){super("NotificationService.AuthorizationCategoryBusinessProviderService",t,r),this.data=i}createAuthorizationCategory(t){const i=new A_(t);return i.Do(this),i.response}updateAuthorizationCategory(t,i){const r=new D_(t,i);return r.Do(this),r.response}importAuthorizationCategories(t){const i=new F_(t);return i.Do(this),i.response}validateAuthorizationCategoryExcelData(t){const i=new w_(t);return i.Do(this),i.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(O.ed),e.LFG(E.q),e.LFG(y.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),I_=(()=>{class s extends y.nH{constructor(t,i,r){super("AuthorizationCategoryService",r,t),this.businessProvider=i}createAuthorizationCategory(t){return this.businessProvider.createAuthorizationCategory(t)}updateAuthorizationCategory(t,i){return this.businessProvider.updateAuthorizationCategory(t,i)}importAuthorizationCategories(t){return this.businessProvider.importAuthorizationCategories(t)}validateAuthorizationCategoryExcelData(t){return this.businessProvider.validateAuthorizationCategoryExcelData(t)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(sa,8),e.LFG(sa),e.LFG(O.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),Ye=(()=>{class s extends g.m1{constructor(t,i,r,l,u,P){super({loading:!1,authorizationCategories:[],done:!1,searchQuery:"",formName:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=r,this.toast=l,this.formService=u,this.authorizationCategoryService=P,this.errors$=this.select(c=>c.errors),this.loading$=this.select(c=>c.loading),this.done$=this.select(c=>c.done),this.item$=this.select(c=>c.item),this.authorizationCategories$=this.select(c=>c.authorizationCategories),this.paging$=this.select(c=>c.paging),this.searchQuery$=this.select(c=>c.searchQuery),this.formName$=this.select(c=>c.formName),this.actionResult$=this.select(this.item$,this.done$,(c,d)=>({item:c,done:d}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.authorizationCategories$,(c,d,n,a,m)=>({errors:c,loading:d,item:n,formName:a,authorizationCategories:m}),{debounce:!0}),this.input$=this.select(this.paging$,this.searchQuery$,(c,d)=>({limit:c.limit,skip:c.skip,name:d,total:c.total})),this.setFormName=this.updater((c,d)=>Object.assign(Object.assign({},c),{formName:d})),this.setItem=this.updater((c,d)=>Object.assign(Object.assign({},c),{item:d})),this.addNewAuthorizationCategory=this.updater((c,d)=>Object.assign(Object.assign({},c),{authorizationCategories:[...c.authorizationCategories,d]})),this.updateAuthorizationCategory=this.updater((c,d)=>Object.assign(Object.assign({},c),{authorizationCategories:c.authorizationCategories.map(n=>n.id===d.id?d:n)})),this.addAuthorizationCategories=this.updater((c,d)=>Object.assign(Object.assign({},c),{authorizationCategories:c.authorizationCategories.concat(d)})),this.updateAuthorizationCategories=this.updater((c,d)=>Object.assign(Object.assign({},c),{authorizationCategories:c.authorizationCategories.map(n=>d.find(m=>m.id===n.id)||n)})),this.setSearchQuery=this.updater((c,d)=>Object.assign(Object.assign({},c),{searchQuery:d})),this.loadAuthorizationCategoryEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.data.userAuthorizationCategory({authorizationCategoryId:d}).pipe((0,g._b)(n=>{this.patchState({item:n.data.item,errors:n.errors,loading:!1})},n=>this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})))))),this.loadAuthorizationCategoriesEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.input$),(0,h.w)(([d,n])=>this.data.userAuthorizationCategories({input:n}).pipe((0,g._b)(a=>this.patchState({paging:{limit:n.limit,skip:n.skip,total:a.data.count.total},authorizationCategories:a.data.items,errors:a.errors,loading:!1}),a=>this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})))))),this.createAuthorizationCategoryEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.authorizationCategoryService.createAuthorizationCategory(Object.assign({},d)).pipe((0,g._b)(n=>{this.addNewAuthorizationCategory(n),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:n,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},n=>{n.graphQLErrors?(this.toast.error(n.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})):(this.toast.error(n.Message),this.formService.setErrors(n.Data))}))))),this.updateAuthorizationCategoryEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([d,n])=>this.authorizationCategoryService.updateAuthorizationCategory(d,d.id).pipe((0,g._b)(a=>{this.updateAuthorizationCategory(a),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:a,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.deleteAuthorizationCategoryEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([d,n])=>this.data.userDeleteAuthorizationCategory({authorizationCategoryId:n.id}).pipe((0,g._b)(a=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:a.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.importExcelEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.authorizationCategoryService.importAuthorizationCategories(d).pipe((0,te.K)(n=>{var a;return this.toast.error(null!==(a=n.Message)&&void 0!==a?a:"Failed to save",{duration:3e3}),k.E}),(0,C.b)(n=>{const a=JSON.parse(n.created),m=JSON.parse(n.updated),p=JSON.parse(n.failed),_=a.length+m.length+p.length;this.addAuthorizationCategories(a),this.updateAuthorizationCategories(m),this.toast.success(`${a.length} created, ${m.length} updated, ${p.length} failed of total ${_}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("authorizationCategoryId")?(this.route.snapshot.paramMap.get("authorizationCategoryId"),this.setFormName("authorizationCategory_edit")):this.setFormName("authorizationCategory_create")}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.authorizationCategoryService.validateAuthorizationCategoryExcelData(t)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(E.q),e.LFG(A.F0),e.LFG(A.gz),e.LFG(X.F),e.LFG(q.o),e.LFG(I_))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function P_(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close.emit())})("formIsReady",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.authorizationCategory)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let oa=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"authorizationCategory_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({id:null,name:""}),this.store.vm$.subscribe(i=>{this.authorizationCategory=i.item})):t.formName&&t.formName.currentValue&&"authorizationCategory_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadAuthorizationCategoryEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.authorizationCategory=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Ye),e.Y36(A.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-authorization-category-form"]],inputs:{authorizationCategory:"authorizationCategory",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,P_,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[w.O5,z.M,w.Ov],encapsulation:2}),s})(),ra=(()=>{class s{constructor(){this.autoHeight=!1,this.authorizationCategories=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[,{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var r;t.includes(null===(r=i.data)||void 0===r?void 0:r.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-authorization-category-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(N.x,5),2&t){let r;e.iGM(r=e.CRH())&&(i.tableView=r.first)}},inputs:{autoHeight:"autoHeight",authorizationCategories:"authorizationCategories"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:6,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.authorizationCategories)("showSidebar",!1)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[N.x],encapsulation:2}),s})();function W_(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-authorization-category-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","authorizationCategory_edit")("formControl",t.formControl)("authorizationCategory",t.authorizationCategory)}}const M_=function(){return{}};function E_(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-authorization-category-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","authorizationCategory_create")("formControl",t.formControl)("authorizationCategory",e.DdM(3,M_))}}function O_(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-authorization-category-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(u.ref.close())}),e.qZA()}2&s&&e.Q6J("authorizationCategories",o.data.items)}let L_=(()=>{class s extends I.fS{constructor(t){super(),this.store=t,this.store.loadAuthorizationCategoriesEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.authorizationCategories$.pipe((0,h.w)(i=>(0,T.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Ye))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e._Bn([Ye]),e.qOj],decls:7,vars:5,consts:[[3,"to","control","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","authorizationCategory","send","close"],[1,"w-full","h-full","bg-white",3,"authorizationCategories","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"ui-select-form",0),e.YNc(1,W_,2,3,"ng-template",null,1,e.W1O),e.YNc(3,E_,1,4,"ng-template",null,2,e.W1O),e.YNc(5,O_,1,1,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[x.JJ,x.oH,J.$,oa,ra],encapsulation:2}),s})();function G_(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-authorization-category-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","authorizationCategory_edit")("authorizationCategory",t.value)}}const $_=function(){return{}};function R_(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-authorization-category-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","authorizationCategory_create")("authorizationCategory",e.DdM(2,$_))}function V_(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-authorization-category-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(null==u.ref?null:u.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("authorizationCategories",t.items)}}let Q_=(()=>{class s extends Y{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:6,consts:[[3,"data","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","authorizationCategory","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","authorizationCategories","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,G_,1,2,"ng-template",null,1,e.W1O),e.YNc(3,R_,1,3,"ng-template",null,2,e.W1O),e.YNc(5,V_,1,2,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("data",i.data)("title",i.to.title)("onSave",i.onSave)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[ee,oa,ra],encapsulation:2}),s})(),U_=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[Ye],imports:[w.ez,R.F,x.UX,V.o,H.u,Q.P,U.t,Z,j.h,K.G,I.X0.forChild({types:[{name:"authorization-category-select",component:L_,wrappers:["form-field"]},{name:"authorization-category-grid",component:Q_}]})]}),s})(),J_=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[U_]}),s})();class Xe extends y.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class j_ extends Xe{constructor(o,t,i){super("ValidateAuthorizationDiagnosisCodeExcelDataAction"),this.valid=!1,this.excelData=o,this.diagnoses=t,this.authorizations=i}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name),this.validationContext.addRule(new f.mi(`diagnosisName_${i}_is_valid}`,"Diagnosis Is Not Valid","diagnosis.name",t.diagnosis,this.diagnoses,!0)),this.validationContext.addRule(new f.mi(`authorizationName_${i}_is_valid}`,"Authorization Is Not Valid","authorization.name",t.authorization,this.authorizations,!0))}),this.validationContext.addRule(new f.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof f.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(r=>r.name),newNames:[i.newName]}):i instanceof f.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,T.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class z_ extends f.wS{constructor(o,t,i,r,l){super(o,t,i,r,l,!0)}}class q_ extends f.ul{constructor(o,t,i,r=!1){super(o,t,r),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new f.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new z_("name","The authorizationdiagnosiscode name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class H_ extends Xe{constructor(o){super("CreateAuthorizationDiagnosisCodeAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new q_("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateAuthorizationDiagnosisCode({input:this.input}).pipe((0,h.w)(o=>(0,ie.of)(o.data.created)))}}class K_ extends Xe{constructor(o){super("UpdateAuthorizationDiagnosisCodesAction"),this.authorizationDiagnosisCodes=o}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.authorizationDiagnosisCodes,!0))}performAction(){this.response=this.businessProvider.data.userUpdateAuthorizationDiagnosisCodes({input:{authorizationDiagnosisCodes:this.authorizationDiagnosisCodes}}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}class k_ extends Xe{constructor(o,t){super("UpdateAuthorizationDiagnosisCodeAction"),this.authorizationDiagnosisCode=o,this.authorizationDiagnosisCodeId=t}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.authorizationDiagnosisCode,!0)).addRule(new f.xF("Id","Id should be a CUID and not null",this.authorizationDiagnosisCodeId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateAuthorizationDiagnosisCode({authorizationDiagnosisCodeId:this.authorizationDiagnosisCodeId,input:this.authorizationDiagnosisCode}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}let aa=(()=>{class s extends y.nH{constructor(t,i,r){super("NotificationService.AuthorizationDiagnosisCodeBusinessProviderService",t,r),this.data=i}createAuthorizationDiagnosisCode(t){const i=new H_(t);return i.Do(this),i.response}updateAuthorizationDiagnosisCode(t,i){const r=new k_(t,i);return r.Do(this),r.response}importAuthorizationDiagnosisCodes(t){const i=new K_(t);return i.Do(this),i.response}validateAuthorizationDiagnosisCodeExcelData(t,i,r){const l=new j_(t,i,r);return l.Do(this),l.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(O.ed),e.LFG(E.q),e.LFG(y.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),Z_=(()=>{class s extends y.nH{constructor(t,i,r){super("AuthorizationDiagnosisCodeService",r,t),this.businessProvider=i}createAuthorizationDiagnosisCode(t){return this.businessProvider.createAuthorizationDiagnosisCode(t)}updateAuthorizationDiagnosisCode(t,i){return this.businessProvider.updateAuthorizationDiagnosisCode(t,i)}importAuthorizationDiagnosisCodes(t){return this.businessProvider.importAuthorizationDiagnosisCodes(t)}validateAuthorizationDiagnosisCodeExcelData(t,i,r){return this.businessProvider.validateAuthorizationDiagnosisCodeExcelData(t,i,r)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(aa,8),e.LFG(aa),e.LFG(O.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),et=(()=>{class s extends g.m1{constructor(t,i,r,l,u,P){if(super({loading:!1,authorizationDiagnosisCodes:[],done:!1,searchQuery:"",formName:void 0,diagnosisCodeId:void 0,authorizationId:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=r,this.toast=l,this.formService=u,this.authorizationDiagnosisCodeService=P,this.errors$=this.select(n=>n.errors),this.loading$=this.select(n=>n.loading),this.done$=this.select(n=>n.done),this.item$=this.select(n=>n.item),this.authorizationDiagnosisCodes$=this.select(n=>n.authorizationDiagnosisCodes),this.diagnosisCodes$=this.select(n=>n.diagnosisCodes||[]),this.authorizations$=this.select(n=>n.authorizations||[]),this.diagnosisCodeId$=this.select(n=>n.diagnosisCodeId),this.authorizationId$=this.select(n=>n.authorizationId),this.paging$=this.select(n=>n.paging),this.searchQuery$=this.select(n=>n.searchQuery),this.formName$=this.select(n=>n.formName),this.actionResult$=this.select(this.item$,this.done$,(n,a)=>({item:n,done:a}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.authorizationDiagnosisCodes$,this.diagnosisCodes$,this.authorizations$,(n,a,m,p,_,v,D)=>({errors:n,loading:a,item:m,formName:p,authorizationDiagnosisCodes:_,diagnosisCodes:v,authorizations:D}),{debounce:!0}),this.input$=this.select(this.paging$,this.diagnosisCodeId$,this.authorizationId$,this.searchQuery$,(n,a,m,p)=>({limit:n.limit,skip:n.skip,name:p,diagnosisCodeId:a,authorizationId:m,total:n.total})),this.setFormName=this.updater((n,a)=>Object.assign(Object.assign({},n),{formName:a})),this.setDiagnosisCodeId=this.updater((n,a)=>Object.assign(Object.assign({},n),{diagnosisCodeId:a})),this.setAuthorizationId=this.updater((n,a)=>Object.assign(Object.assign({},n),{authorizationId:a})),this.filterDiagnosisCodes=n=>this.data.userSelectDiagnosisCodes({input:{name:n}}).pipe((0,g._b)(a=>{let m=a.data.items;return this.patchState({diagnosisCodes:m}),m},a=>this.patchState({errors:a.graphQLErrors?a.graphQLErrors:a})),(0,B.U)(a=>a.data.items)),this.filterAuthorizations=n=>this.data.userSelectAuthorizations({input:{name:n}}).pipe((0,g._b)(a=>{let m=a.data.items;return this.patchState({authorizations:m}),m},a=>this.patchState({errors:a.graphQLErrors?a.graphQLErrors:a})),(0,B.U)(a=>a.data.items)),this.addDiagnosisCode=this.updater((n,a)=>Object.assign(Object.assign({},n),{diagnosisCodes:n.diagnosisCodes.concat(a)})),this.addAuthorization=this.updater((n,a)=>Object.assign(Object.assign({},n),{authorizations:n.authorizations.concat(a)})),this.setItem=this.updater((n,a)=>Object.assign(Object.assign({},n),{item:a})),this.addNewAuthorizationDiagnosisCode=this.updater((n,a)=>Object.assign(Object.assign({},n),{authorizationDiagnosisCodes:[...n.authorizationDiagnosisCodes,a]})),this.updateAuthorizationDiagnosisCode=this.updater((n,a)=>Object.assign(Object.assign({},n),{authorizationDiagnosisCodes:n.authorizationDiagnosisCodes.map(m=>m.id===a.id?a:m)})),this.addAuthorizationDiagnosisCodes=this.updater((n,a)=>Object.assign(Object.assign({},n),{authorizationDiagnosisCodes:n.authorizationDiagnosisCodes.concat(a)})),this.updateAuthorizationDiagnosisCodes=this.updater((n,a)=>Object.assign(Object.assign({},n),{authorizationDiagnosisCodes:n.authorizationDiagnosisCodes.map(m=>a.find(_=>_.id===m.id)||m)})),this.setSearchQuery=this.updater((n,a)=>Object.assign(Object.assign({},n),{searchQuery:a})),this.loadAuthorizationDiagnosisCodeEffect=this.effect(n=>n.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(a=>this.data.userAuthorizationDiagnosisCode({authorizationDiagnosisCodeId:a}).pipe((0,g._b)(m=>{this.patchState({item:m.data.item,errors:m.errors,loading:!1})},m=>this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})))))),this.loadAuthorizationDiagnosisCodesEffect=this.effect(n=>n.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.input$),(0,h.w)(([a,m])=>this.data.userAuthorizationDiagnosisCodes({input:m}).pipe((0,g._b)(p=>this.patchState({paging:{limit:m.limit,skip:m.skip,total:p.data.count.total},authorizationDiagnosisCodes:p.data.items,errors:p.errors,loading:!1}),p=>this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})))))),this.createAuthorizationDiagnosisCodeEffect=this.effect(n=>n.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(a=>this.authorizationDiagnosisCodeService.createAuthorizationDiagnosisCode(Object.assign({},a)).pipe((0,g._b)(m=>{this.addNewAuthorizationDiagnosisCode(m),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:m,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},m=>{m.graphQLErrors?(this.toast.error(m.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})):(this.toast.error(m.Message),this.formService.setErrors(m.Data))}))))),this.updateAuthorizationDiagnosisCodeEffect=this.effect(n=>n.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([a,m])=>this.authorizationDiagnosisCodeService.updateAuthorizationDiagnosisCode(a,a.id).pipe((0,g._b)(p=>{this.updateAuthorizationDiagnosisCode(p),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:p,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},p=>{p.graphQLErrors?(this.toast.error(p.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})):(this.toast.error(p.Message),this.formService.setErrors(p.Data))}))))),this.deleteAuthorizationDiagnosisCodeEffect=this.effect(n=>n.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([a,m])=>this.data.userDeleteAuthorizationDiagnosisCode({authorizationDiagnosisCodeId:m.id}).pipe((0,g._b)(p=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:p.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},p=>{p.graphQLErrors?(this.toast.error(p.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})):(this.toast.error(p.Message),this.formService.setErrors(p.Data))}))))),this.importExcelEffect=this.effect(n=>n.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(a=>this.authorizationDiagnosisCodeService.importAuthorizationDiagnosisCodes(a).pipe((0,te.K)(m=>{var p;return this.toast.error(null!==(p=m.Message)&&void 0!==p?p:"Failed to save",{duration:3e3}),k.E}),(0,C.b)(m=>{const p=JSON.parse(m.created),_=JSON.parse(m.updated),v=JSON.parse(m.failed),D=p.length+_.length+v.length;this.addAuthorizationDiagnosisCodes(p),this.updateAuthorizationDiagnosisCodes(_),this.toast.success(`${p.length} created, ${_.length} updated, ${v.length} failed of total ${D}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("authorizationDiagnosisCodeId")?(this.route.snapshot.paramMap.get("authorizationDiagnosisCodeId"),this.setFormName("authorizationDiagnosisCode_edit")):this.setFormName("authorizationDiagnosisCode_create"),this.route.snapshot.paramMap.has("diagnosisCodeId")){var c=this.route.snapshot.paramMap.get("diagnosisCodeId");this.setDiagnosisCodeId(c)}if(this.route.snapshot.paramMap.has("authorizationId")){var d=this.route.snapshot.paramMap.get("authorizationId");this.setAuthorizationId(d)}}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.authorizationDiagnosisCodeService.validateAuthorizationDiagnosisCodeExcelData(t,i.diagnosisCodes,i.authorizations)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(E.q),e.LFG(A.F0),e.LFG(A.gz),e.LFG(X.F),e.LFG(q.o),e.LFG(Z_))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function B_(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close.emit())})("formIsReady",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.authorizationDiagnosisCode)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let na=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"authorizationDiagnosisCode_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({id:null,name:""}),this.store.vm$.subscribe(i=>{this.authorizationDiagnosisCode=i.item})):t.formName&&t.formName.currentValue&&"authorizationDiagnosisCode_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadAuthorizationDiagnosisCodeEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.authorizationDiagnosisCode=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(et),e.Y36(A.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-authorization-diagnosis-code-form"]],inputs:{authorizationDiagnosisCode:"authorizationDiagnosisCode",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,B_,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[w.O5,z.M,w.Ov],encapsulation:2}),s})(),la=(()=>{class s{constructor(){this.autoHeight=!1,this.authorizationDiagnosisCodes=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[{field:"diagnosis.name",headerName:"Diagnosis",filter:"agTextColumnFilter"},{field:"authorization.name",headerName:"Authorization",filter:"agTextColumnFilter"},{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{field:"diagnosisCodeId",filter:"agTextColumnFilter",hide:!0},{field:"authorizationId",filter:"agTextColumnFilter",hide:!0}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var r;t.includes(null===(r=i.data)||void 0===r?void 0:r.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-authorization-diagnosis-code-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(N.x,5),2&t){let r;e.iGM(r=e.CRH())&&(i.tableView=r.first)}},inputs:{autoHeight:"autoHeight",authorizationDiagnosisCodes:"authorizationDiagnosisCodes"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:6,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.authorizationDiagnosisCodes)("showSidebar",!1)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[N.x],encapsulation:2}),s})();function Y_(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-authorization-diagnosis-code-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","authorizationDiagnosisCode_edit")("formControl",t.formControl)("authorizationDiagnosisCode",t.authorizationDiagnosisCode)}}const X_=function(){return{}};function eg(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-authorization-diagnosis-code-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","authorizationDiagnosisCode_create")("formControl",t.formControl)("authorizationDiagnosisCode",e.DdM(3,X_))}}function tg(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-authorization-diagnosis-code-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(u.ref.close())}),e.qZA()}2&s&&e.Q6J("authorizationDiagnosisCodes",o.data.items)}let ig=(()=>{class s extends I.fS{constructor(t){super(),this.store=t,this.store.loadAuthorizationDiagnosisCodesEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.authorizationDiagnosisCodes$.pipe((0,h.w)(i=>(0,T.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(et))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e._Bn([et]),e.qOj],decls:7,vars:5,consts:[[3,"to","control","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","authorizationDiagnosisCode","send","close"],[1,"w-full","h-full","bg-white",3,"authorizationDiagnosisCodes","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"ui-select-form",0),e.YNc(1,Y_,2,3,"ng-template",null,1,e.W1O),e.YNc(3,eg,1,4,"ng-template",null,2,e.W1O),e.YNc(5,tg,1,1,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[x.JJ,x.oH,J.$,na,la],encapsulation:2}),s})();function sg(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-authorization-diagnosis-code-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","authorizationDiagnosisCode_edit")("authorizationDiagnosisCode",t.value)}}const og=function(){return{}};function rg(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-authorization-diagnosis-code-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","authorizationDiagnosisCode_create")("authorizationDiagnosisCode",e.DdM(2,og))}function ag(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-authorization-diagnosis-code-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(null==u.ref?null:u.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("authorizationDiagnosisCodes",t.items)}}let ng=(()=>{class s extends Y{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:6,consts:[[3,"data","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","authorizationDiagnosisCode","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","authorizationDiagnosisCodes","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,sg,1,2,"ng-template",null,1,e.W1O),e.YNc(3,rg,1,3,"ng-template",null,2,e.W1O),e.YNc(5,ag,1,2,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("data",i.data)("title",i.to.title)("onSave",i.onSave)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[ee,na,la],encapsulation:2}),s})(),lg=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[et],imports:[w.ez,R.F,x.UX,V.o,H.u,Q.P,U.t,Z,j.h,K.G,I.X0.forChild({types:[{name:"authorization-diagnosis-code-select",component:ig,wrappers:["form-field"]},{name:"authorization-diagnosis-code-grid",component:ng}]})]}),s})(),cg=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[lg]}),s})();class tt extends y.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class dg extends tt{constructor(o,t){super("ValidateAuthorizationKindExcelDataAction"),this.valid=!1,this.excelData=o,this.categories=t}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name),this.validationContext.addRule(new f.mi(`categoryName_${i}_is_valid}`,"Category Is Not Valid","category.name",t.category,this.categories,!0))}),this.validationContext.addRule(new f.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof f.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(r=>r.name),newNames:[i.newName]}):i instanceof f.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,T.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class ug extends f.wS{constructor(o,t,i,r,l){super(o,t,i,r,l,!0)}}class mg extends f.ul{constructor(o,t,i,r=!1){super(o,t,r),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new f.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new ug("name","The authorizationkind name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class pg extends tt{constructor(o){super("CreateAuthorizationKindAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new mg("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateAuthorizationKind({input:this.input}).pipe((0,h.w)(o=>(0,ie.of)(o.data.created)))}}class hg extends tt{constructor(o){super("UpdateAuthorizationKindsAction"),this.authorizationKinds=o}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.authorizationKinds,!0))}performAction(){this.response=this.businessProvider.data.userUpdateAuthorizationKinds({input:{authorizationKinds:this.authorizationKinds}}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}class fg extends tt{constructor(o,t){super("UpdateAuthorizationKindAction"),this.authorizationKind=o,this.authorizationKindId=t}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.authorizationKind,!0)).addRule(new f.xF("Id","Id should be a CUID and not null",this.authorizationKindId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateAuthorizationKind({authorizationKindId:this.authorizationKindId,input:this.authorizationKind}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}let ca=(()=>{class s extends y.nH{constructor(t,i,r){super("NotificationService.AuthorizationKindBusinessProviderService",t,r),this.data=i}createAuthorizationKind(t){const i=new pg(t);return i.Do(this),i.response}updateAuthorizationKind(t,i){const r=new fg(t,i);return r.Do(this),r.response}importAuthorizationKinds(t){const i=new hg(t);return i.Do(this),i.response}validateAuthorizationKindExcelData(t,i){const r=new dg(t,i);return r.Do(this),r.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(O.ed),e.LFG(E.q),e.LFG(y.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),_g=(()=>{class s extends y.nH{constructor(t,i,r){super("AuthorizationKindService",r,t),this.businessProvider=i}createAuthorizationKind(t){const i=Object.fromEntries(Object.entries(t).filter(([r,l])=>null!==l));return this.businessProvider.createAuthorizationKind(i)}updateAuthorizationKind(t,i){return this.businessProvider.updateAuthorizationKind(t,i)}importAuthorizationKinds(t){return this.businessProvider.importAuthorizationKinds(t)}validateAuthorizationKindExcelData(t,i){return this.businessProvider.validateAuthorizationKindExcelData(t,i)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(ca,8),e.LFG(ca),e.LFG(O.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),Ss=(()=>{class s extends g.m1{constructor(t,i,r,l,u,P){if(super({loading:!1,authorizationKinds:[],done:!1,searchQuery:"",formName:void 0,categoryId:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=r,this.toast=l,this.formService=u,this.authorizationKindService=P,this.errors$=this.select(d=>d.errors),this.loading$=this.select(d=>d.loading),this.done$=this.select(d=>d.done),this.item$=this.select(d=>d.item),this.authorizationKinds$=this.select(d=>d.authorizationKinds),this.categories$=this.select(d=>d.categories||[]),this.categoryId$=this.select(d=>d.categoryId),this.paging$=this.select(d=>d.paging),this.searchQuery$=this.select(d=>d.searchQuery),this.formName$=this.select(d=>d.formName),this.actionResult$=this.select(this.item$,this.done$,(d,n)=>({item:d,done:n}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.authorizationKinds$,this.categories$,(d,n,a,m,p,_)=>({errors:d,loading:n,item:a,formName:m,authorizationKinds:p,categories:_}),{debounce:!0}),this.input$=this.select(this.paging$,this.categoryId$,this.searchQuery$,(d,n,a)=>({limit:d.limit,skip:d.skip,name:a,categoryId:n,total:d.total})),this.setFormName=this.updater((d,n)=>Object.assign(Object.assign({},d),{formName:n})),this.setCategoryId=this.updater((d,n)=>Object.assign(Object.assign({},d),{categoryId:n})),this.filterCategories=d=>this.data.userSelectCategories({input:{name:d}}).pipe((0,g._b)(n=>{let a=n.data.items;return this.patchState({categories:a}),a},n=>this.patchState({errors:n.graphQLErrors?n.graphQLErrors:n})),(0,B.U)(n=>n.data.items)),this.addCategory=this.updater((d,n)=>Object.assign(Object.assign({},d),{categories:d.categories.concat(n)})),this.setItem=this.updater((d,n)=>Object.assign(Object.assign({},d),{item:n})),this.addNewAuthorizationKind=this.updater((d,n)=>Object.assign(Object.assign({},d),{authorizationKinds:[...d.authorizationKinds,n]})),this.updateAuthorizationKind=this.updater((d,n)=>Object.assign(Object.assign({},d),{authorizationKinds:d.authorizationKinds.map(a=>a.id===n.id?n:a)})),this.addAuthorizationKinds=this.updater((d,n)=>Object.assign(Object.assign({},d),{authorizationKinds:d.authorizationKinds.concat(n)})),this.updateAuthorizationKinds=this.updater((d,n)=>Object.assign(Object.assign({},d),{authorizationKinds:d.authorizationKinds.map(a=>n.find(p=>p.id===a.id)||a)})),this.setSearchQuery=this.updater((d,n)=>Object.assign(Object.assign({},d),{searchQuery:n})),this.loadAuthorizationKindEffect=this.effect(d=>d.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(n=>this.data.userAuthorizationKind({authorizationKindId:n}).pipe((0,g._b)(a=>{this.patchState({item:a.data.item,errors:a.errors,loading:!1})},a=>this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})))))),this.loadAuthorizationKindsEffect=this.effect(d=>d.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.input$),(0,h.w)(([n,a])=>this.data.userAuthorizationKinds({input:a}).pipe((0,g._b)(m=>this.patchState({paging:{limit:a.limit,skip:a.skip,total:m.data.count.total},authorizationKinds:m.data.items,errors:m.errors,loading:!1}),m=>this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})))))),this.createAuthorizationKindEffect=this.effect(d=>d.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(n=>this.authorizationKindService.createAuthorizationKind(Object.assign({},n)).pipe((0,g._b)(a=>{this.addNewAuthorizationKind(a),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:a,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.updateAuthorizationKindEffect=this.effect(d=>d.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([n,a])=>this.authorizationKindService.updateAuthorizationKind(n,n.id).pipe((0,g._b)(m=>{this.updateAuthorizationKind(m),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:m,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},m=>{m.graphQLErrors?(this.toast.error(m.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})):(this.toast.error(m.Message),this.formService.setErrors(m.Data))}))))),this.deleteAuthorizationKindEffect=this.effect(d=>d.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([n,a])=>this.data.userDeleteAuthorizationKind({authorizationKindId:a.id}).pipe((0,g._b)(m=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:m.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},m=>{m.graphQLErrors?(this.toast.error(m.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})):(this.toast.error(m.Message),this.formService.setErrors(m.Data))}))))),this.importExcelEffect=this.effect(d=>d.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(n=>this.authorizationKindService.importAuthorizationKinds(n).pipe((0,te.K)(a=>{var m;return this.toast.error(null!==(m=a.Message)&&void 0!==m?m:"Failed to save",{duration:3e3}),k.E}),(0,C.b)(a=>{const m=JSON.parse(a.created),p=JSON.parse(a.updated),_=JSON.parse(a.failed),v=m.length+p.length+_.length;this.addAuthorizationKinds(m),this.updateAuthorizationKinds(p),this.toast.success(`${m.length} created, ${p.length} updated, ${_.length} failed of total ${v}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("authorizationKindId")?(this.route.snapshot.paramMap.get("authorizationKindId"),this.setFormName("authorizationKind_edit")):this.setFormName("authorizationKind_create"),this.route.snapshot.paramMap.has("categoryId")){var c=this.route.snapshot.paramMap.get("categoryId");this.setCategoryId(c)}}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.authorizationKindService.validateAuthorizationKindExcelData(t,i.categories)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(E.q),e.LFG(A.F0),e.LFG(A.gz),e.LFG(X.F),e.LFG(q.o),e.LFG(_g))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function gg(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close.emit())})("formIsReady",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.authorizationKind)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let da=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"authorizationKind_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.authorizationKind=i.item})):t.formName&&t.formName.currentValue&&"authorizationKind_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadAuthorizationKindEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.authorizationKind=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Ss),e.Y36(A.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-authorization-kind-form"]],inputs:{authorizationKind:"authorizationKind",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,gg,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[w.O5,z.M,w.Ov],encapsulation:2}),s})(),ua=(()=>{class s{constructor(){this.autoHeight=!1,this.authorizationKinds=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[{field:"category.name",headerName:"Category",filter:"agTextColumnFilter"},{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{field:"categoryId",filter:"agTextColumnFilter",hide:!0}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var r;t.includes(null===(r=i.data)||void 0===r?void 0:r.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-authorization-kind-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(N.x,5),2&t){let r;e.iGM(r=e.CRH())&&(i.tableView=r.first)}},inputs:{autoHeight:"autoHeight",authorizationKinds:"authorizationKinds"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.authorizationKinds)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[N.x],encapsulation:2}),s})();function Cg(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-authorization-kind-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","authorizationKind_edit")("formControl",t.formControl)("authorizationKind",t.authorizationKind)}}const Sg=function(){return{}};function vg(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-authorization-kind-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","authorizationKind_create")("formControl",t.formControl)("authorizationKind",e.DdM(3,Sg))}}function bg(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-authorization-kind-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(u.ref.close())}),e.qZA()}2&s&&e.Q6J("authorizationKinds",o.data.items)}let Tg=(()=>{class s extends I.fS{constructor(t){super(),this.store=t,this.store.loadAuthorizationKindsEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.authorizationKinds$.pipe((0,h.w)(i=>(0,T.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Ss))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","authorizationKind","send","close"],[1,"w-full","h-full","bg-white",3,"authorizationKinds","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,Cg,2,3,"ng-template",null,1,e.W1O),e.YNc(3,vg,1,4,"ng-template",null,2,e.W1O),e.YNc(5,bg,1,1,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",u)("editTemplate",r)("createTemplate",l)("key",i.field.key)}},dependencies:[x.JJ,x.oH,J.$,da,ua],encapsulation:2}),s})();function yg(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-authorization-kind-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","authorizationKind_edit")("authorizationKind",t.value)}}const wg=function(){return{}};function xg(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-authorization-kind-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","authorizationKind_create")("authorizationKind",e.DdM(2,wg))}function Ng(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-authorization-kind-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(null==u.ref?null:u.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("authorizationKinds",t.items)}}let Ag=(()=>{class s extends Y{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","authorizationKind","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","authorizationKinds","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,yg,1,2,"ng-template",null,1,e.W1O),e.YNc(3,xg,1,3,"ng-template",null,2,e.W1O),e.YNc(5,Ng,1,2,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[ee,da,ua],encapsulation:2}),s})(),Fg=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[Ss],imports:[w.ez,R.F,x.UX,V.o,H.u,Q.P,U.t,Z,j.h,K.G,I.X0.forChild({types:[{name:"authorization-kind-select",component:Tg,wrappers:["form-field"]},{name:"authorization-kind-grid",component:Ag}]})]}),s})(),Dg=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[Fg]}),s})();class it extends y.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class Ig extends it{constructor(o){super("ValidateAuthorizationStatusExcelDataAction"),this.valid=!1,this.excelData=o}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name)}),this.validationContext.addRule(new f.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof f.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(r=>r.name),newNames:[i.newName]}):i instanceof f.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,T.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class Pg extends f.wS{constructor(o,t,i,r,l){super(o,t,i,r,l,!0)}}class Wg extends f.ul{constructor(o,t,i,r=!1){super(o,t,r),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new f.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new Pg("name","The authorizationstatus name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class Mg extends it{constructor(o){super("CreateAuthorizationStatusAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new Wg("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateAuthorizationStatus({input:this.input}).pipe((0,h.w)(o=>(0,ie.of)(o.data.created)))}}class Eg extends it{constructor(o){super("UpdateAuthorizationStatusesAction"),this.authorizationStatuses=o}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.authorizationStatuses,!0))}performAction(){this.response=this.businessProvider.data.userUpdateAuthorizationStatuses({input:{authorizationStatuses:this.authorizationStatuses}}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}class Og extends it{constructor(o,t){super("UpdateAuthorizationStatusAction"),this.authorizationStatus=o,this.authorizationStatusId=t}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.authorizationStatus,!0)).addRule(new f.xF("Id","Id should be a CUID and not null",this.authorizationStatusId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateAuthorizationStatus({authorizationStatusId:this.authorizationStatusId,input:this.authorizationStatus}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}let ma=(()=>{class s extends y.nH{constructor(t,i,r){super("NotificationService.AuthorizationStatusBusinessProviderService",t,r),this.data=i}createAuthorizationStatus(t){const i=new Mg(t);return i.Do(this),i.response}updateAuthorizationStatus(t,i){const r=new Og(t,i);return r.Do(this),r.response}importAuthorizationStatuses(t){const i=new Eg(t);return i.Do(this),i.response}validateAuthorizationStatusExcelData(t){const i=new Ig(t);return i.Do(this),i.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(O.ed),e.LFG(E.q),e.LFG(y.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),Lg=(()=>{class s extends y.nH{constructor(t,i,r){super("AuthorizationStatusService",r,t),this.businessProvider=i}createAuthorizationStatus(t){const i=Object.fromEntries(Object.entries(t).filter(([r,l])=>null!==l));return this.businessProvider.createAuthorizationStatus(i)}updateAuthorizationStatus(t,i){return this.businessProvider.updateAuthorizationStatus(t,i)}importAuthorizationStatuses(t){return this.businessProvider.importAuthorizationStatuses(t)}validateAuthorizationStatusExcelData(t){return this.businessProvider.validateAuthorizationStatusExcelData(t)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(ma,8),e.LFG(ma),e.LFG(O.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),vs=(()=>{class s extends g.m1{constructor(t,i,r,l,u,P){super({loading:!1,authorizationStatuses:[],done:!1,searchQuery:"",formName:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=r,this.toast=l,this.formService=u,this.authorizationStatusService=P,this.errors$=this.select(c=>c.errors),this.loading$=this.select(c=>c.loading),this.done$=this.select(c=>c.done),this.item$=this.select(c=>c.item),this.authorizationStatuses$=this.select(c=>c.authorizationStatuses),this.paging$=this.select(c=>c.paging),this.searchQuery$=this.select(c=>c.searchQuery),this.formName$=this.select(c=>c.formName),this.actionResult$=this.select(this.item$,this.done$,(c,d)=>({item:c,done:d}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.authorizationStatuses$,(c,d,n,a,m)=>({errors:c,loading:d,item:n,formName:a,authorizationStatuses:m}),{debounce:!0}),this.input$=this.select(this.paging$,this.searchQuery$,(c,d)=>({limit:c.limit,skip:c.skip,name:d,total:c.total})),this.setFormName=this.updater((c,d)=>Object.assign(Object.assign({},c),{formName:d})),this.setItem=this.updater((c,d)=>Object.assign(Object.assign({},c),{item:d})),this.addNewAuthorizationStatus=this.updater((c,d)=>Object.assign(Object.assign({},c),{authorizationStatuses:[...c.authorizationStatuses,d]})),this.updateAuthorizationStatus=this.updater((c,d)=>Object.assign(Object.assign({},c),{authorizationStatuses:c.authorizationStatuses.map(n=>n.id===d.id?d:n)})),this.addAuthorizationStatuses=this.updater((c,d)=>Object.assign(Object.assign({},c),{authorizationStatuses:c.authorizationStatuses.concat(d)})),this.updateAuthorizationStatuses=this.updater((c,d)=>Object.assign(Object.assign({},c),{authorizationStatuses:c.authorizationStatuses.map(n=>d.find(m=>m.id===n.id)||n)})),this.setSearchQuery=this.updater((c,d)=>Object.assign(Object.assign({},c),{searchQuery:d})),this.loadAuthorizationStatusEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.data.userAuthorizationStatus({authorizationStatusId:d}).pipe((0,g._b)(n=>{this.patchState({item:n.data.item,errors:n.errors,loading:!1})},n=>this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})))))),this.loadAuthorizationStatusesEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.input$),(0,h.w)(([d,n])=>this.data.userAuthorizationStatuses({input:n}).pipe((0,g._b)(a=>this.patchState({paging:{limit:n.limit,skip:n.skip,total:a.data.count.total},authorizationStatuses:a.data.items,errors:a.errors,loading:!1}),a=>this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})))))),this.createAuthorizationStatusEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.authorizationStatusService.createAuthorizationStatus(Object.assign({},d)).pipe((0,g._b)(n=>{this.addNewAuthorizationStatus(n),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:n,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},n=>{n.graphQLErrors?(this.toast.error(n.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})):(this.toast.error(n.Message),this.formService.setErrors(n.Data))}))))),this.updateAuthorizationStatusEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([d,n])=>this.authorizationStatusService.updateAuthorizationStatus(d,d.id).pipe((0,g._b)(a=>{this.updateAuthorizationStatus(a),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:a,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.deleteAuthorizationStatusEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([d,n])=>this.data.userDeleteAuthorizationStatus({authorizationStatusId:n.id}).pipe((0,g._b)(a=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:a.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.importExcelEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.authorizationStatusService.importAuthorizationStatuses(d).pipe((0,te.K)(n=>{var a;return this.toast.error(null!==(a=n.Message)&&void 0!==a?a:"Failed to save",{duration:3e3}),k.E}),(0,C.b)(n=>{const a=JSON.parse(n.created),m=JSON.parse(n.updated),p=JSON.parse(n.failed),_=a.length+m.length+p.length;this.addAuthorizationStatuses(a),this.updateAuthorizationStatuses(m),this.toast.success(`${a.length} created, ${m.length} updated, ${p.length} failed of total ${_}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("authorizationStatusId")?(this.route.snapshot.paramMap.get("authorizationStatusId"),this.setFormName("authorizationStatus_edit")):this.setFormName("authorizationStatus_create")}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.authorizationStatusService.validateAuthorizationStatusExcelData(t)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(E.q),e.LFG(A.F0),e.LFG(A.gz),e.LFG(X.F),e.LFG(q.o),e.LFG(Lg))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function Gg(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close.emit())})("formIsReady",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.authorizationStatus)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let pa=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"authorizationStatus_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.authorizationStatus=i.item})):t.formName&&t.formName.currentValue&&"authorizationStatus_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadAuthorizationStatusEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.authorizationStatus=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(vs),e.Y36(A.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-authorization-status-form"]],inputs:{authorizationStatus:"authorizationStatus",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,Gg,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[w.O5,z.M,w.Ov],encapsulation:2}),s})(),ha=(()=>{class s{constructor(){this.autoHeight=!1,this.authorizationStatuses=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[,{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var r;t.includes(null===(r=i.data)||void 0===r?void 0:r.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-authorization-status-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(N.x,5),2&t){let r;e.iGM(r=e.CRH())&&(i.tableView=r.first)}},inputs:{autoHeight:"autoHeight",authorizationStatuses:"authorizationStatuses"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.authorizationStatuses)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[N.x],encapsulation:2}),s})();function $g(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-authorization-status-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","authorizationStatus_edit")("formControl",t.formControl)("authorizationStatus",t.authorizationStatus)}}const Rg=function(){return{}};function Vg(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-authorization-status-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","authorizationStatus_create")("formControl",t.formControl)("authorizationStatus",e.DdM(3,Rg))}}function Qg(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-authorization-status-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(u.ref.close())}),e.qZA()}2&s&&e.Q6J("authorizationStatuses",o.data.items)}let Ug=(()=>{class s extends I.fS{constructor(t){super(),this.store=t,this.store.loadAuthorizationStatusesEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.authorizationStatuses$.pipe((0,h.w)(i=>(0,T.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(vs))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","authorizationStatus","send","close"],[1,"w-full","h-full","bg-white",3,"authorizationStatuses","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,$g,2,3,"ng-template",null,1,e.W1O),e.YNc(3,Vg,1,4,"ng-template",null,2,e.W1O),e.YNc(5,Qg,1,1,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",u)("editTemplate",r)("createTemplate",l)("key",i.field.key)}},dependencies:[x.JJ,x.oH,J.$,pa,ha],encapsulation:2}),s})();function Jg(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-authorization-status-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","authorizationStatus_edit")("authorizationStatus",t.value)}}const jg=function(){return{}};function zg(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-authorization-status-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","authorizationStatus_create")("authorizationStatus",e.DdM(2,jg))}function qg(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-authorization-status-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(null==u.ref?null:u.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("authorizationStatuses",t.items)}}let Hg=(()=>{class s extends Y{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","authorizationStatus","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","authorizationStatuses","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,Jg,1,2,"ng-template",null,1,e.W1O),e.YNc(3,zg,1,3,"ng-template",null,2,e.W1O),e.YNc(5,qg,1,2,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[ee,pa,ha],encapsulation:2}),s})(),Kg=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[vs],imports:[w.ez,R.F,x.UX,V.o,H.u,Q.P,U.t,Z,j.h,K.G,I.X0.forChild({types:[{name:"authorization-status-select",component:Ug,wrappers:["form-field"]},{name:"authorization-status-grid",component:Hg}]})]}),s})(),kg=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[Kg]}),s})();class st extends y.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class Zg extends st{constructor(o){super("ValidateAuthorizationTypeExcelDataAction"),this.valid=!1,this.excelData=o}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name)}),this.validationContext.addRule(new f.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof f.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(r=>r.name),newNames:[i.newName]}):i instanceof f.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,T.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class Bg extends f.wS{constructor(o,t,i,r,l){super(o,t,i,r,l,!0)}}class Yg extends f.ul{constructor(o,t,i,r=!1){super(o,t,r),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new f.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new Bg("name","The authorizationtype name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class Xg extends st{constructor(o){super("CreateAuthorizationTypeAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new Yg("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateAuthorizationType({input:this.input}).pipe((0,h.w)(o=>(0,ie.of)(o.data.created)))}}class eC extends st{constructor(o){super("UpdateAuthorizationTypesAction"),this.authorizationTypes=o}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.authorizationTypes,!0))}performAction(){this.response=this.businessProvider.data.userUpdateAuthorizationTypes({input:{authorizationTypes:this.authorizationTypes}}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}class tC extends st{constructor(o,t){super("UpdateAuthorizationTypeAction"),this.authorizationType=o,this.authorizationTypeId=t}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.authorizationType,!0)).addRule(new f.xF("Id","Id should be a CUID and not null",this.authorizationTypeId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateAuthorizationType({authorizationTypeId:this.authorizationTypeId,input:this.authorizationType}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}let fa=(()=>{class s extends y.nH{constructor(t,i,r){super("NotificationService.AuthorizationTypeBusinessProviderService",t,r),this.data=i}createAuthorizationType(t){const i=new Xg(t);return i.Do(this),i.response}updateAuthorizationType(t,i){const r=new tC(t,i);return r.Do(this),r.response}importAuthorizationTypes(t){const i=new eC(t);return i.Do(this),i.response}validateAuthorizationTypeExcelData(t){const i=new Zg(t);return i.Do(this),i.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(O.ed),e.LFG(E.q),e.LFG(y.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),iC=(()=>{class s extends y.nH{constructor(t,i,r){super("AuthorizationTypeService",r,t),this.businessProvider=i}createAuthorizationType(t){return this.businessProvider.createAuthorizationType(t)}updateAuthorizationType(t,i){return this.businessProvider.updateAuthorizationType(t,i)}importAuthorizationTypes(t){return this.businessProvider.importAuthorizationTypes(t)}validateAuthorizationTypeExcelData(t){return this.businessProvider.validateAuthorizationTypeExcelData(t)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(fa,8),e.LFG(fa),e.LFG(O.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),ot=(()=>{class s extends g.m1{constructor(t,i,r,l,u,P){super({loading:!1,authorizationTypes:[],done:!1,searchQuery:"",formName:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=r,this.toast=l,this.formService=u,this.authorizationTypeService=P,this.errors$=this.select(c=>c.errors),this.loading$=this.select(c=>c.loading),this.done$=this.select(c=>c.done),this.item$=this.select(c=>c.item),this.authorizationTypes$=this.select(c=>c.authorizationTypes),this.paging$=this.select(c=>c.paging),this.searchQuery$=this.select(c=>c.searchQuery),this.formName$=this.select(c=>c.formName),this.actionResult$=this.select(this.item$,this.done$,(c,d)=>({item:c,done:d}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.authorizationTypes$,(c,d,n,a,m)=>({errors:c,loading:d,item:n,formName:a,authorizationTypes:m}),{debounce:!0}),this.input$=this.select(this.paging$,this.searchQuery$,(c,d)=>({limit:c.limit,skip:c.skip,name:d,total:c.total})),this.setFormName=this.updater((c,d)=>Object.assign(Object.assign({},c),{formName:d})),this.setItem=this.updater((c,d)=>Object.assign(Object.assign({},c),{item:d})),this.addNewAuthorizationType=this.updater((c,d)=>Object.assign(Object.assign({},c),{authorizationTypes:[...c.authorizationTypes,d]})),this.updateAuthorizationType=this.updater((c,d)=>Object.assign(Object.assign({},c),{authorizationTypes:c.authorizationTypes.map(n=>n.id===d.id?d:n)})),this.addAuthorizationTypes=this.updater((c,d)=>Object.assign(Object.assign({},c),{authorizationTypes:c.authorizationTypes.concat(d)})),this.updateAuthorizationTypes=this.updater((c,d)=>Object.assign(Object.assign({},c),{authorizationTypes:c.authorizationTypes.map(n=>d.find(m=>m.id===n.id)||n)})),this.setSearchQuery=this.updater((c,d)=>Object.assign(Object.assign({},c),{searchQuery:d})),this.loadAuthorizationTypeEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.data.userAuthorizationType({authorizationTypeId:d}).pipe((0,g._b)(n=>{this.patchState({item:n.data.item,errors:n.errors,loading:!1})},n=>this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})))))),this.loadAuthorizationTypesEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.input$),(0,h.w)(([d,n])=>this.data.userAuthorizationTypes({input:n}).pipe((0,g._b)(a=>{this.patchState({paging:{limit:n.limit,skip:n.skip,total:a.data.count.total},authorizationTypes:a.data.items,errors:a.errors,loading:!1})},a=>this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})))))),this.createAuthorizationTypeEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.authorizationTypeService.createAuthorizationType(Object.assign({},d)).pipe((0,g._b)(n=>{this.addNewAuthorizationType(n),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:n,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},n=>{n.graphQLErrors?(this.toast.error(n.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})):(this.toast.error(n.Message),this.formService.setErrors(n.Data))}))))),this.updateAuthorizationTypeEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([d,n])=>this.authorizationTypeService.updateAuthorizationType(d,d.id).pipe((0,g._b)(a=>{this.updateAuthorizationType(a),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:a,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.deleteAuthorizationTypeEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([d,n])=>this.data.userDeleteAuthorizationType({authorizationTypeId:n.id}).pipe((0,g._b)(a=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:a.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.importExcelEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.authorizationTypeService.importAuthorizationTypes(d).pipe((0,te.K)(n=>{var a;return this.toast.error(null!==(a=n.Message)&&void 0!==a?a:"Failed to save",{duration:3e3}),k.E}),(0,C.b)(n=>{const a=JSON.parse(n.created),m=JSON.parse(n.updated),p=JSON.parse(n.failed),_=a.length+m.length+p.length;this.addAuthorizationTypes(a),this.updateAuthorizationTypes(m),this.toast.success(`${a.length} created, ${m.length} updated, ${p.length} failed of total ${_}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("authorizationTypeId")?(this.route.snapshot.paramMap.get("authorizationTypeId"),this.setFormName("authorizationType_edit")):this.setFormName("authorizationType_create")}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.authorizationTypeService.validateAuthorizationTypeExcelData(t)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(E.q),e.LFG(A.F0),e.LFG(A.gz),e.LFG(X.F),e.LFG(q.o),e.LFG(iC))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function sC(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close.emit())})("formIsReady",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.authorizationType)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let _a=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"authorizationType_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({id:null,name:""}),this.store.vm$.subscribe(i=>{this.authorizationType=i.item})):t.formName&&t.formName.currentValue&&"authorizationType_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadAuthorizationTypeEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.authorizationType=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(ot),e.Y36(A.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-authorization-type-form"]],inputs:{authorizationType:"authorizationType",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,sC,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[w.O5,z.M,w.Ov],encapsulation:2}),s})(),ga=(()=>{class s{constructor(){this.autoHeight=!1,this.authorizationTypes=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[,{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var r;t.includes(null===(r=i.data)||void 0===r?void 0:r.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-authorization-type-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(N.x,5),2&t){let r;e.iGM(r=e.CRH())&&(i.tableView=r.first)}},inputs:{autoHeight:"autoHeight",authorizationTypes:"authorizationTypes"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:6,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.authorizationTypes)("showSidebar",!1)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[N.x],encapsulation:2}),s})();function oC(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-authorization-type-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","authorizationType_edit")("formControl",t.formControl)("authorizationType",t.authorizationType)}}const rC=function(){return{}};function aC(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-authorization-type-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","authorizationType_create")("formControl",t.formControl)("authorizationType",e.DdM(3,rC))}}function nC(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-authorization-type-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(u.ref.close())}),e.qZA()}2&s&&e.Q6J("authorizationTypes",o.data.items)}let lC=(()=>{class s extends I.fS{constructor(t){super(),this.store=t,this.store.loadAuthorizationTypesEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.authorizationTypes$.pipe((0,h.w)(i=>(0,T.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(ot))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e._Bn([ot]),e.qOj],decls:7,vars:5,consts:[[3,"to","control","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","authorizationType","send","close"],[1,"w-full","h-full","bg-white",3,"authorizationTypes","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"ui-select-form",0),e.YNc(1,oC,2,3,"ng-template",null,1,e.W1O),e.YNc(3,aC,1,4,"ng-template",null,2,e.W1O),e.YNc(5,nC,1,1,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[x.JJ,x.oH,J.$,_a,ga],encapsulation:2}),s})();function cC(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-authorization-type-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","authorizationType_edit")("authorizationType",t.value)}}const dC=function(){return{}};function uC(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-authorization-type-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","authorizationType_create")("authorizationType",e.DdM(2,dC))}function mC(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-authorization-type-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(null==u.ref?null:u.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("authorizationTypes",t.items)}}let pC=(()=>{class s extends Y{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:6,consts:[[3,"data","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","authorizationType","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","authorizationTypes","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,cC,1,2,"ng-template",null,1,e.W1O),e.YNc(3,uC,1,3,"ng-template",null,2,e.W1O),e.YNc(5,mC,1,2,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("data",i.data)("title",i.to.title)("onSave",i.onSave)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[ee,_a,ga],encapsulation:2}),s})(),hC=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[ot],imports:[w.ez,R.F,x.UX,V.o,H.u,Q.P,U.t,Z,j.h,K.G,I.X0.forChild({types:[{name:"authorization-type-select",component:lC,wrappers:["form-field"]},{name:"authorization-type-grid",component:pC}]})]}),s})(),fC=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[hC]}),s})();class rt extends y.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class _C extends rt{constructor(o,t,i){super("ValidateBalanceRequestExcelDataAction"),this.valid=!1,this.excelData=o,this.statements=t,this.legalCases=i}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name),this.validationContext.addRule(new f.mi(`statementName_${i}_is_valid}`,"Statement Is Not Valid","statement.name",t.statement,this.statements,!0)),this.validationContext.addRule(new f.mi(`legalCaseName_${i}_is_valid}`,"Legal Case Is Not Valid","legalCase.name",t.legalCase,this.legalCases,!0))}),this.validationContext.addRule(new f.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof f.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(r=>r.name),newNames:[i.newName]}):i instanceof f.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,T.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class gC extends f.wS{constructor(o,t,i,r,l){super(o,t,i,r,l,!0)}}class CC extends f.ul{constructor(o,t,i,r=!1){super(o,t,r),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new f.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new gC("name","The balancerequest name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class SC extends rt{constructor(o){super("CreateBalanceRequestAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new CC("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateBalanceRequest({input:this.input}).pipe((0,h.w)(o=>(0,ie.of)(o.data.created)))}}class vC extends rt{constructor(o){super("UpdateBalanceRequestsAction"),this.balanceRequests=o}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.balanceRequests,!0))}performAction(){this.response=this.businessProvider.data.userUpdateBalanceRequests({input:{balanceRequests:this.balanceRequests}}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}class bC extends rt{constructor(o,t){super("UpdateBalanceRequestAction"),this.balanceRequest=o,this.balanceRequestId=t}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.balanceRequest,!0)).addRule(new f.xF("Id","Id should be a CUID and not null",this.balanceRequestId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateBalanceRequest({balanceRequestId:this.balanceRequestId,input:this.balanceRequest}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}let Ca=(()=>{class s extends y.nH{constructor(t,i,r){super("NotificationService.BalanceRequestBusinessProviderService",t,r),this.data=i}createBalanceRequest(t){console.log("input",t);const i=new SC(t);return i.Do(this),i.response}updateBalanceRequest(t,i){const r=new bC(t,i);return r.Do(this),r.response}importBalanceRequests(t){const i=new vC(t);return i.Do(this),i.response}validateBalanceRequestExcelData(t,i,r){const l=new _C(t,i,r);return l.Do(this),l.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(O.ed),e.LFG(E.q),e.LFG(y.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),TC=(()=>{class s extends y.nH{constructor(t,i,r){super("BalanceRequestService",r,t),this.businessProvider=i}createBalanceRequest(t){const i=Object.fromEntries(Object.entries(t).filter(([r,l])=>null!==l));return this.businessProvider.createBalanceRequest(i)}updateBalanceRequest(t,i){return this.businessProvider.updateBalanceRequest(t,i)}importBalanceRequests(t){return this.businessProvider.importBalanceRequests(t)}validateBalanceRequestExcelData(t,i,r){return this.businessProvider.validateBalanceRequestExcelData(t,i,r)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(Ca,8),e.LFG(Ca),e.LFG(O.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),bs=(()=>{class s extends g.m1{constructor(t,i,r,l,u,P){if(super({loading:!1,balanceRequests:[],done:!1,searchQuery:"",formName:void 0,statementId:void 0,legalCaseId:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=r,this.toast=l,this.formService=u,this.balanceRequestService=P,this.errors$=this.select(a=>a.errors),this.loading$=this.select(a=>a.loading),this.done$=this.select(a=>a.done),this.item$=this.select(a=>a.item),this.balanceRequests$=this.select(a=>a.balanceRequests),this.documents$=this.select(a=>a.documents||[]),this.legalCases$=this.select(a=>a.legalCases||[]),this.statementId$=this.select(a=>a.statementId),this.legalCaseId$=this.select(a=>a.legalCaseId),this.paging$=this.select(a=>a.paging),this.searchQuery$=this.select(a=>a.searchQuery),this.formName$=this.select(a=>a.formName),this.actionResult$=this.select(this.item$,this.done$,(a,m)=>({item:a,done:m}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.balanceRequests$,this.documents$,this.legalCases$,(a,m,p,_,v,D,se)=>({errors:a,loading:m,item:p,formName:_,balanceRequests:v,documents:D,legalCases:se}),{debounce:!0}),this.input$=this.select(this.paging$,this.statementId$,this.legalCaseId$,this.searchQuery$,(a,m,p,_)=>({limit:a.limit,skip:a.skip,name:_,statementId:m,legalCaseId:p,total:a.total})),this.setFormName=this.updater((a,m)=>Object.assign(Object.assign({},a),{formName:m})),this.setStatementId=this.updater((a,m)=>Object.assign(Object.assign({},a),{statementId:m})),this.setAttorneyId=this.updater((a,m)=>Object.assign(Object.assign({},a),{attorneyId:m})),this.setLegalCaseId=this.updater((a,m)=>Object.assign(Object.assign({},a),{legalCaseId:m})),this.filterDocuments=a=>this.data.userSelectDocuments({input:{name:a}}).pipe((0,g._b)(m=>{let p=m.data.items;return this.patchState({documents:p}),p},m=>this.patchState({errors:m.graphQLErrors?m.graphQLErrors:m})),(0,B.U)(m=>m.data.items)),this.filterLegalCases=a=>this.data.userSelectLegalCases({input:{name:a}}).pipe((0,g._b)(m=>{let p=m.data.items;return this.patchState({legalCases:p}),p},m=>this.patchState({errors:m.graphQLErrors?m.graphQLErrors:m})),(0,B.U)(m=>m.data.items)),this.addDocument=this.updater((a,m)=>Object.assign(Object.assign({},a),{documents:a.documents.concat(m)})),this.addLegalCase=this.updater((a,m)=>Object.assign(Object.assign({},a),{legalCases:a.legalCases.concat(m)})),this.setItem=this.updater((a,m)=>Object.assign(Object.assign({},a),{item:m})),this.addNewBalanceRequest=this.updater((a,m)=>Object.assign(Object.assign({},a),{balanceRequests:[...a.balanceRequests,m]})),this.updateBalanceRequest=this.updater((a,m)=>Object.assign(Object.assign({},a),{balanceRequests:a.balanceRequests.map(p=>p.id===m.id?m:p)})),this.addBalanceRequests=this.updater((a,m)=>Object.assign(Object.assign({},a),{balanceRequests:a.balanceRequests.concat(m)})),this.updateBalanceRequests=this.updater((a,m)=>Object.assign(Object.assign({},a),{balanceRequests:a.balanceRequests.map(p=>m.find(v=>v.id===p.id)||p)})),this.setSearchQuery=this.updater((a,m)=>Object.assign(Object.assign({},a),{searchQuery:m})),this.loadBalanceRequestEffect=this.effect(a=>a.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(m=>this.data.userBalanceRequest({balanceRequestId:m}).pipe((0,g._b)(p=>{this.patchState({item:p.data.item,errors:p.errors,loading:!1})},p=>this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})))))),this.loadBalanceRequestsEffect=this.effect(a=>a.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.input$),(0,h.w)(([m,p])=>this.data.userBalanceRequests({input:p}).pipe((0,g._b)(_=>this.patchState({paging:{limit:p.limit,skip:p.skip,total:_.data.count.total},balanceRequests:_.data.items,errors:_.errors,loading:!1}),_=>this.patchState({loading:!1,errors:_.graphQLErrors?_.graphQLErrors:_})))))),this.createBalanceRequestEffect=this.effect(a=>a.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(m=>this.balanceRequestService.createBalanceRequest(Object.assign({},m)).pipe((0,g._b)(p=>{this.addNewBalanceRequest(p),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:p,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},p=>{p.graphQLErrors?(this.toast.error(p.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})):(this.toast.error(p.Message),this.formService.setErrors(p.Data))}))))),this.updateBalanceRequestEffect=this.effect(a=>a.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([m,p])=>this.balanceRequestService.updateBalanceRequest(m,m.id).pipe((0,g._b)(_=>{this.updateBalanceRequest(_),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:_,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},_=>{_.graphQLErrors?(this.toast.error(_.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:_.graphQLErrors?_.graphQLErrors:_})):(this.toast.error(_.Message),this.formService.setErrors(_.Data))}))))),this.deleteBalanceRequestEffect=this.effect(a=>a.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([m,p])=>this.data.userDeleteBalanceRequest({balanceRequestId:p.id}).pipe((0,g._b)(_=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:_.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},_=>{_.graphQLErrors?(this.toast.error(_.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:_.graphQLErrors?_.graphQLErrors:_})):(this.toast.error(_.Message),this.formService.setErrors(_.Data))}))))),this.importExcelEffect=this.effect(a=>a.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(m=>this.balanceRequestService.importBalanceRequests(m).pipe((0,te.K)(p=>{var _;return this.toast.error(null!==(_=p.Message)&&void 0!==_?_:"Failed to save",{duration:3e3}),k.E}),(0,C.b)(p=>{const _=JSON.parse(p.created),v=JSON.parse(p.updated),D=JSON.parse(p.failed),se=_.length+v.length+D.length;this.addBalanceRequests(_),this.updateBalanceRequests(v),this.toast.success(`${_.length} created, ${v.length} updated, ${D.length} failed of total ${se}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("balanceRequestId")?(this.route.snapshot.paramMap.get("balanceRequestId"),this.setFormName("balanceRequest_edit")):this.setFormName("balanceRequest_create"),this.route.snapshot.paramMap.has("statementId")){var c=this.route.snapshot.paramMap.get("statementId");this.setStatementId(c)}if(this.route.snapshot.paramMap.has("legalCaseId")){var d=this.route.snapshot.paramMap.get("legalCaseId");this.setLegalCaseId(d)}if(this.route.snapshot.paramMap.has("attorneyId")){var n=this.route.snapshot.paramMap.get("attorneyId");this.setAttorneyId(n)}}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.balanceRequestService.validateBalanceRequestExcelData(t,i.documents,i.legalCases)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(E.q),e.LFG(A.F0),e.LFG(A.gz),e.LFG(X.F),e.LFG(q.o),e.LFG(TC))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function yC(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close.emit())})("formIsReady",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.balanceRequest)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let Sa=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"balanceRequest_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({id:null,name:""}),this.store.vm$.subscribe(i=>{this.balanceRequest=i.item})):t.formName&&t.formName.currentValue&&"balanceRequest_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadBalanceRequestEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.balanceRequest=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(bs),e.Y36(A.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-balance-request-form"]],inputs:{balanceRequest:"balanceRequest",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,yC,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[w.O5,z.M,w.Ov],encapsulation:2}),s})(),va=(()=>{class s{constructor(){this.autoHeight=!1,this.balanceRequests=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[{field:"statement.name",headerName:"Statement",filter:"agTextColumnFilter"},{field:"legalCase.name",headerName:"Legal Case",filter:"agTextColumnFilter"},{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{field:"requestedOn",filter:"agDateColumnFilter"},{field:"repliedOn",filter:"agDateColumnFilter"},{field:"status",filter:"agTextColumnFilter"},{field:"statementId",filter:"agTextColumnFilter",hide:!0},{field:"type",filter:"agTextColumnFilter"},{headerName:"Balance Amount",field:"balanceAmount",valueFormatter:t=>{var i;return(0,S.oBD)(null===(i=t.data)||void 0===i?void 0:i.balanceAmount,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{field:"legalCaseId",filter:"agTextColumnFilter",hide:!0}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var r;t.includes(null===(r=i.data)||void 0===r?void 0:r.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-balance-request-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(N.x,5),2&t){let r;e.iGM(r=e.CRH())&&(i.tableView=r.first)}},inputs:{autoHeight:"autoHeight",balanceRequests:"balanceRequests"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.balanceRequests)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[N.x],encapsulation:2}),s})();function wC(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-balance-request-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","balanceRequest_edit")("formControl",t.formControl)("balanceRequest",t.balanceRequest)}}const xC=function(){return{}};function NC(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-balance-request-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","balanceRequest_create")("formControl",t.formControl)("balanceRequest",e.DdM(3,xC))}}function AC(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-balance-request-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(u.ref.close())}),e.qZA()}2&s&&e.Q6J("balanceRequests",o.data.items)}let FC=(()=>{class s extends I.fS{constructor(t){super(),this.store=t,this.store.loadBalanceRequestsEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.balanceRequests$.pipe((0,h.w)(i=>(0,T.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(bs))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","balanceRequest","send","close"],[1,"w-full","h-full","bg-white",3,"balanceRequests","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,wC,2,3,"ng-template",null,1,e.W1O),e.YNc(3,NC,1,4,"ng-template",null,2,e.W1O),e.YNc(5,AC,1,1,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",u)("editTemplate",r)("createTemplate",l)("key",i.field.key)}},dependencies:[x.JJ,x.oH,J.$,Sa,va],encapsulation:2}),s})();function DC(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-balance-request-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","balanceRequest_edit")("balanceRequest",t.value)}}const IC=function(){return{}};function PC(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-balance-request-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","balanceRequest_create")("balanceRequest",e.DdM(2,IC))}function WC(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-balance-request-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(null==u.ref?null:u.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("balanceRequests",t.items)}}let MC=(()=>{class s extends Y{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:6,consts:[[3,"data","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","balanceRequest","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","balanceRequests","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,DC,1,2,"ng-template",null,1,e.W1O),e.YNc(3,PC,1,3,"ng-template",null,2,e.W1O),e.YNc(5,WC,1,2,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("data",i.data)("title",i.to.title)("onSave",i.onSave)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[ee,Sa,va],encapsulation:2}),s})(),EC=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[bs],imports:[w.ez,R.F,x.UX,V.o,H.u,Q.P,U.t,Z,j.h,K.G,I.X0.forChild({types:[{name:"balance-request-select",component:FC,wrappers:["form-field"]},{name:"balance-request-grid",component:MC}]})]}),s})(),OC=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[EC]}),s})();class at extends y.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class LC extends at{constructor(o){super("ValidateBankExcelDataAction"),this.valid=!1,this.excelData=o}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name)}),this.validationContext.addRule(new f.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof f.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(r=>r.name),newNames:[i.newName]}):i instanceof f.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,T.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class GC extends f.wS{constructor(o,t,i,r,l){super(o,t,i,r,l,!0)}}class $C extends f.ul{constructor(o,t,i,r=!1){super(o,t,r),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new f.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new GC("name","The bank name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class RC extends at{constructor(o){super("CreateBankAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new $C("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateBank({input:this.input}).pipe((0,h.w)(o=>(0,ie.of)(o.data.created)))}}class VC extends at{constructor(o){super("UpdateBanksAction"),this.banks=o}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.banks,!0))}performAction(){this.response=this.businessProvider.data.userUpdateBanks({input:{banks:this.banks}}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}class QC extends at{constructor(o,t){super("UpdateBankAction"),this.bank=o,this.bankId=t}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.bank,!0)).addRule(new f.xF("Id","Id should be a CUID and not null",this.bankId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateBank({bankId:this.bankId,input:this.bank}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}let ba=(()=>{class s extends y.nH{constructor(t,i,r){super("NotificationService.BankBusinessProviderService",t,r),this.data=i}createBank(t){const i=new RC(t);return i.Do(this),i.response}updateBank(t,i){const r=new QC(t,i);return r.Do(this),r.response}importBanks(t){const i=new VC(t);return i.Do(this),i.response}validateBankExcelData(t){const i=new LC(t);return i.Do(this),i.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(O.ed),e.LFG(E.q),e.LFG(y.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),UC=(()=>{class s extends y.nH{constructor(t,i,r){super("BankService",r,t),this.businessProvider=i}createBank(t){const i=Object.fromEntries(Object.entries(t).filter(([r,l])=>null!==l));return this.businessProvider.createBank(i)}updateBank(t,i){return this.businessProvider.updateBank(t,i)}importBanks(t){return this.businessProvider.importBanks(t)}validateBankExcelData(t){return this.businessProvider.validateBankExcelData(t)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(ba,8),e.LFG(ba),e.LFG(O.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),Ts=(()=>{class s extends g.m1{constructor(t,i,r,l,u,P){super({loading:!1,banks:[],done:!1,searchQuery:"",formName:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=r,this.toast=l,this.formService=u,this.bankService=P,this.errors$=this.select(c=>c.errors),this.loading$=this.select(c=>c.loading),this.done$=this.select(c=>c.done),this.item$=this.select(c=>c.item),this.banks$=this.select(c=>c.banks),this.paging$=this.select(c=>c.paging),this.searchQuery$=this.select(c=>c.searchQuery),this.formName$=this.select(c=>c.formName),this.actionResult$=this.select(this.item$,this.done$,(c,d)=>({item:c,done:d}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.banks$,(c,d,n,a,m)=>({errors:c,loading:d,item:n,formName:a,banks:m}),{debounce:!0}),this.input$=this.select(this.paging$,this.searchQuery$,(c,d)=>({limit:c.limit,skip:c.skip,name:d,total:c.total})),this.setFormName=this.updater((c,d)=>Object.assign(Object.assign({},c),{formName:d})),this.setItem=this.updater((c,d)=>Object.assign(Object.assign({},c),{item:d})),this.addNewBank=this.updater((c,d)=>Object.assign(Object.assign({},c),{banks:[...c.banks,d]})),this.updateBank=this.updater((c,d)=>Object.assign(Object.assign({},c),{banks:c.banks.map(n=>n.id===d.id?d:n)})),this.addBanks=this.updater((c,d)=>Object.assign(Object.assign({},c),{banks:c.banks.concat(d)})),this.updateBanks=this.updater((c,d)=>Object.assign(Object.assign({},c),{banks:c.banks.map(n=>d.find(m=>m.id===n.id)||n)})),this.setSearchQuery=this.updater((c,d)=>Object.assign(Object.assign({},c),{searchQuery:d})),this.loadBankEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.data.userBank({bankId:d}).pipe((0,g._b)(n=>{this.patchState({item:n.data.item,errors:n.errors,loading:!1})},n=>this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})))))),this.loadBanksEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.input$),(0,h.w)(([d,n])=>this.data.userBanks({input:n}).pipe((0,g._b)(a=>this.patchState({paging:{limit:n.limit,skip:n.skip,total:a.data.count.total},banks:a.data.items,errors:a.errors,loading:!1}),a=>this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})))))),this.createBankEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.bankService.createBank(Object.assign({},d)).pipe((0,g._b)(n=>{this.addNewBank(n),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:n,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},n=>{n.graphQLErrors?(this.toast.error(n.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})):(this.toast.error(n.Message),this.formService.setErrors(n.Data))}))))),this.updateBankEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([d,n])=>this.bankService.updateBank(d,d.id).pipe((0,g._b)(a=>{this.updateBank(a),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:a,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.deleteBankEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([d,n])=>this.data.userDeleteBank({bankId:n.id}).pipe((0,g._b)(a=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:a.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.importExcelEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.bankService.importBanks(d).pipe((0,te.K)(n=>{var a;return this.toast.error(null!==(a=n.Message)&&void 0!==a?a:"Failed to save",{duration:3e3}),k.E}),(0,C.b)(n=>{const a=JSON.parse(n.created),m=JSON.parse(n.updated),p=JSON.parse(n.failed),_=a.length+m.length+p.length;this.addBanks(a),this.updateBanks(m),this.toast.success(`${a.length} created, ${m.length} updated, ${p.length} failed of total ${_}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("bankId")?(this.route.snapshot.paramMap.get("bankId"),this.setFormName("bank_edit")):this.setFormName("bank_create")}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.bankService.validateBankExcelData(t)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(E.q),e.LFG(A.F0),e.LFG(A.gz),e.LFG(X.F),e.LFG(q.o),e.LFG(UC))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function JC(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close.emit())})("formIsReady",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.bank)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let Ta=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"bank_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.bank=i.item})):t.formName&&t.formName.currentValue&&"bank_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadBankEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.bank=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Ts),e.Y36(A.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-bank-form"]],inputs:{bank:"bank",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,JC,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[w.O5,z.M,w.Ov],encapsulation:2}),s})(),ya=(()=>{class s{constructor(){this.autoHeight=!1,this.banks=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[,{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var r;t.includes(null===(r=i.data)||void 0===r?void 0:r.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-bank-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(N.x,5),2&t){let r;e.iGM(r=e.CRH())&&(i.tableView=r.first)}},inputs:{autoHeight:"autoHeight",banks:"banks"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.banks)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[N.x],encapsulation:2}),s})();function jC(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-bank-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","bank_edit")("formControl",t.formControl)("bank",t.bank)}}const zC=function(){return{}};function qC(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-bank-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","bank_create")("formControl",t.formControl)("bank",e.DdM(3,zC))}}function HC(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-bank-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(u.ref.close())}),e.qZA()}2&s&&e.Q6J("banks",o.data.items)}let KC=(()=>{class s extends I.fS{constructor(t){super(),this.store=t,this.store.loadBanksEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.banks$.pipe((0,h.w)(i=>(0,T.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Ts))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","bank","send","close"],[1,"w-full","h-full","bg-white",3,"banks","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,jC,2,3,"ng-template",null,1,e.W1O),e.YNc(3,qC,1,4,"ng-template",null,2,e.W1O),e.YNc(5,HC,1,1,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",u)("editTemplate",r)("createTemplate",l)("key",i.field.key)}},dependencies:[x.JJ,x.oH,J.$,Ta,ya],encapsulation:2}),s})();function kC(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-bank-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","bank_edit")("bank",t.value)}}const ZC=function(){return{}};function BC(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-bank-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","bank_create")("bank",e.DdM(2,ZC))}function YC(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-bank-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(null==u.ref?null:u.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("banks",t.items)}}let XC=(()=>{class s extends Y{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","bank","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","banks","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,kC,1,2,"ng-template",null,1,e.W1O),e.YNc(3,BC,1,3,"ng-template",null,2,e.W1O),e.YNc(5,YC,1,2,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[ee,Ta,ya],encapsulation:2}),s})(),eS=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[Ts],imports:[w.ez,R.F,x.UX,V.o,H.u,Q.P,U.t,Z,j.h,K.G,I.X0.forChild({types:[{name:"bank-select",component:KC,wrappers:["form-field"]},{name:"bank-grid",component:XC}]})]}),s})(),tS=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[eS]}),s})();class nt extends y.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class iS extends nt{constructor(o){super("ValidateBatchControlExcelDataAction"),this.valid=!1,this.excelData=o}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name)}),this.validationContext.addRule(new f.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof f.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(r=>r.name),newNames:[i.newName]}):i instanceof f.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,T.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class sS extends f.wS{constructor(o,t,i,r,l){super(o,t,i,r,l,!0)}}class oS extends f.ul{constructor(o,t,i,r=!1){super(o,t,r),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new f.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new sS("name","The batchcontrol name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class rS extends nt{constructor(o){super("CreateBatchControlAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new oS("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateBatchControl({input:this.input}).pipe((0,h.w)(o=>(0,ie.of)(o.data.created)))}}class aS extends nt{constructor(o){super("UpdateBatchControlsAction"),this.batchControls=o}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.batchControls,!0))}performAction(){this.response=this.businessProvider.data.userUpdateBatchControls({input:{batchControls:this.batchControls}}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}class nS extends nt{constructor(o,t){super("UpdateBatchControlAction"),this.batchControl=o,this.batchControlId=t}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.batchControl,!0)).addRule(new f.xF("Id","Id should be a CUID and not null",this.batchControlId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateBatchControl({batchControlId:this.batchControlId,input:this.batchControl}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}let wa=(()=>{class s extends y.nH{constructor(t,i,r){super("NotificationService.BatchControlBusinessProviderService",t,r),this.data=i}createBatchControl(t){const i=new rS(t);return i.Do(this),i.response}updateBatchControl(t,i){const r=new nS(t,i);return r.Do(this),r.response}importBatchControls(t){const i=new aS(t);return i.Do(this),i.response}validateBatchControlExcelData(t){const i=new iS(t);return i.Do(this),i.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(O.ed),e.LFG(E.q),e.LFG(y.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),lS=(()=>{class s extends y.nH{constructor(t,i,r){super("BatchControlService",r,t),this.businessProvider=i}createBatchControl(t){const i=Object.fromEntries(Object.entries(t).filter(([r,l])=>null!==l));return this.businessProvider.createBatchControl(i)}updateBatchControl(t,i){return this.businessProvider.updateBatchControl(t,i)}importBatchControls(t){return this.businessProvider.importBatchControls(t)}validateBatchControlExcelData(t){return this.businessProvider.validateBatchControlExcelData(t)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(wa,8),e.LFG(wa),e.LFG(O.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),ys=(()=>{class s extends g.m1{constructor(t,i,r,l,u,P){super({loading:!1,batchControls:[],done:!1,searchQuery:"",formName:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=r,this.toast=l,this.formService=u,this.batchControlService=P,this.errors$=this.select(c=>c.errors),this.loading$=this.select(c=>c.loading),this.done$=this.select(c=>c.done),this.item$=this.select(c=>c.item),this.batchControls$=this.select(c=>c.batchControls),this.paging$=this.select(c=>c.paging),this.searchQuery$=this.select(c=>c.searchQuery),this.formName$=this.select(c=>c.formName),this.actionResult$=this.select(this.item$,this.done$,(c,d)=>({item:c,done:d}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.batchControls$,(c,d,n,a,m)=>({errors:c,loading:d,item:n,formName:a,batchControls:m}),{debounce:!0}),this.input$=this.select(this.paging$,this.searchQuery$,(c,d)=>({limit:c.limit,skip:c.skip,name:d,total:c.total})),this.setFormName=this.updater((c,d)=>Object.assign(Object.assign({},c),{formName:d})),this.setItem=this.updater((c,d)=>Object.assign(Object.assign({},c),{item:d})),this.addNewBatchControl=this.updater((c,d)=>Object.assign(Object.assign({},c),{batchControls:[...c.batchControls,d]})),this.updateBatchControl=this.updater((c,d)=>Object.assign(Object.assign({},c),{batchControls:c.batchControls.map(n=>n.id===d.id?d:n)})),this.addBatchControls=this.updater((c,d)=>Object.assign(Object.assign({},c),{batchControls:c.batchControls.concat(d)})),this.updateBatchControls=this.updater((c,d)=>Object.assign(Object.assign({},c),{batchControls:c.batchControls.map(n=>d.find(m=>m.id===n.id)||n)})),this.setSearchQuery=this.updater((c,d)=>Object.assign(Object.assign({},c),{searchQuery:d})),this.loadBatchControlEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.data.userBatchControl({batchControlId:d}).pipe((0,g._b)(n=>{this.patchState({item:n.data.item,errors:n.errors,loading:!1})},n=>this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})))))),this.loadBatchControlsEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.input$),(0,h.w)(([d,n])=>this.data.userBatchControls({input:n}).pipe((0,g._b)(a=>this.patchState({paging:{limit:n.limit,skip:n.skip,total:a.data.count.total},batchControls:a.data.items,errors:a.errors,loading:!1}),a=>this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})))))),this.createBatchControlEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.batchControlService.createBatchControl(Object.assign({},d)).pipe((0,g._b)(n=>{this.addNewBatchControl(n),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:n,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},n=>{n.graphQLErrors?(this.toast.error(n.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})):(this.toast.error(n.Message),this.formService.setErrors(n.Data))}))))),this.updateBatchControlEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([d,n])=>this.batchControlService.updateBatchControl(d,d.id).pipe((0,g._b)(a=>{this.updateBatchControl(a),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:a,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.deleteBatchControlEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([d,n])=>this.data.userDeleteBatchControl({batchControlId:n.id}).pipe((0,g._b)(a=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:a.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.importExcelEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.batchControlService.importBatchControls(d).pipe((0,te.K)(n=>{var a;return this.toast.error(null!==(a=n.Message)&&void 0!==a?a:"Failed to save",{duration:3e3}),k.E}),(0,C.b)(n=>{const a=JSON.parse(n.created),m=JSON.parse(n.updated),p=JSON.parse(n.failed),_=a.length+m.length+p.length;this.addBatchControls(a),this.updateBatchControls(m),this.toast.success(`${a.length} created, ${m.length} updated, ${p.length} failed of total ${_}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("batchControlId")?(this.route.snapshot.paramMap.get("batchControlId"),this.setFormName("batchControl_edit")):this.setFormName("batchControl_create")}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.batchControlService.validateBatchControlExcelData(t)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(E.q),e.LFG(A.F0),e.LFG(A.gz),e.LFG(X.F),e.LFG(q.o),e.LFG(lS))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function cS(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close.emit())})("formIsReady",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.batchControl)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let xa=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"batchControl_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.batchControl=i.item})):t.formName&&t.formName.currentValue&&"batchControl_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadBatchControlEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.batchControl=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(ys),e.Y36(A.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-batch-control-form"]],inputs:{batchControl:"batchControl",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,cS,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[w.O5,z.M,w.Ov],encapsulation:2}),s})(),Na=(()=>{class s{constructor(){this.autoHeight=!1,this.batchControls=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[,{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{field:"trackingNumber",filter:"agTextColumnFilter"},{headerName:"Batch Total",field:"batchTotal",valueFormatter:t=>{var i;return(0,S.oBD)(null===(i=t.data)||void 0===i?void 0:i.batchTotal,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{field:"defaultGLCode",filter:"agTextColumnFilter"},{headerName:"Posted",field:"posted",filter:"agSetColumnFilter",cellRenderer:"checkboxRenderer"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var r;t.includes(null===(r=i.data)||void 0===r?void 0:r.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-batch-control-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(N.x,5),2&t){let r;e.iGM(r=e.CRH())&&(i.tableView=r.first)}},inputs:{autoHeight:"autoHeight",batchControls:"batchControls"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.batchControls)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[N.x],encapsulation:2}),s})();function dS(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-batch-control-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","batchControl_edit")("formControl",t.formControl)("batchControl",t.batchControl)}}const uS=function(){return{}};function mS(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-batch-control-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","batchControl_create")("formControl",t.formControl)("batchControl",e.DdM(3,uS))}}function pS(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-batch-control-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(u.ref.close())}),e.qZA()}2&s&&e.Q6J("batchControls",o.data.items)}let hS=(()=>{class s extends I.fS{constructor(t){super(),this.store=t,this.store.loadBatchControlsEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.batchControls$.pipe((0,h.w)(i=>(0,T.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(ys))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","batchControl","send","close"],[1,"w-full","h-full","bg-white",3,"batchControls","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,dS,2,3,"ng-template",null,1,e.W1O),e.YNc(3,mS,1,4,"ng-template",null,2,e.W1O),e.YNc(5,pS,1,1,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",u)("editTemplate",r)("createTemplate",l)("key",i.field.key)}},dependencies:[x.JJ,x.oH,J.$,xa,Na],encapsulation:2}),s})();function fS(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-batch-control-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","batchControl_edit")("batchControl",t.value)}}const _S=function(){return{}};function gS(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-batch-control-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","batchControl_create")("batchControl",e.DdM(2,_S))}function CS(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-batch-control-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(null==u.ref?null:u.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("batchControls",t.items)}}let SS=(()=>{class s extends Y{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","batchControl","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","batchControls","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,fS,1,2,"ng-template",null,1,e.W1O),e.YNc(3,gS,1,3,"ng-template",null,2,e.W1O),e.YNc(5,CS,1,2,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[ee,xa,Na],encapsulation:2}),s})(),vS=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[ys],imports:[w.ez,R.F,x.UX,V.o,H.u,Q.P,U.t,Z,j.h,K.G,I.X0.forChild({types:[{name:"batch-control-select",component:hS,wrappers:["form-field"]},{name:"batch-control-grid",component:SS}]})]}),s})(),bS=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[vS]}),s})();class lt extends y.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class TS extends lt{constructor(o,t,i){super("ValidateBodyPartLeadExcelDataAction"),this.valid=!1,this.excelData=o,this.leads=t,this.bodyParts=i}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name),this.validationContext.addRule(new f.mi(`leadName_${i}_is_valid}`,"Lead Is Not Valid","lead.name",t.lead,this.leads,!0)),this.validationContext.addRule(new f.mi(`bodyPartName_${i}_is_valid}`,"Body Part Is Not Valid","bodyPart.name",t.bodyPart,this.bodyParts,!0))}),this.validationContext.addRule(new f.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof f.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(r=>r.name),newNames:[i.newName]}):i instanceof f.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,T.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class yS extends f.wS{constructor(o,t,i,r,l){super(o,t,i,r,l,!0)}}class wS extends f.ul{constructor(o,t,i,r=!1){super(o,t,r),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new f.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new yS("name","The bodypartlead name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class xS extends lt{constructor(o){super("CreateBodyPartLeadAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new wS("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateBodyPartLead({input:this.input}).pipe((0,h.w)(o=>(0,ie.of)(o.data.created)))}}class NS extends lt{constructor(o){super("UpdateBodyPartLeadsAction"),this.bodyPartLeads=o}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.bodyPartLeads,!0))}performAction(){this.response=this.businessProvider.data.userUpdateBodyPartLeads({input:{bodyPartLeads:this.bodyPartLeads}}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}class AS extends lt{constructor(o,t){super("UpdateBodyPartLeadAction"),this.bodyPartLead=o,this.bodyPartLeadId=t}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.bodyPartLead,!0)).addRule(new f.xF("Id","Id should be a CUID and not null",this.bodyPartLeadId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateBodyPartLead({bodyPartLeadId:this.bodyPartLeadId,input:this.bodyPartLead}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}let Aa=(()=>{class s extends y.nH{constructor(t,i,r){super("NotificationService.BodyPartLeadBusinessProviderService",t,r),this.data=i}createBodyPartLead(t){const i=new xS(t);return i.Do(this),i.response}updateBodyPartLead(t,i){const r=new AS(t,i);return r.Do(this),r.response}importBodyPartLeads(t){const i=new NS(t);return i.Do(this),i.response}validateBodyPartLeadExcelData(t,i,r){const l=new TS(t,i,r);return l.Do(this),l.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(O.ed),e.LFG(E.q),e.LFG(y.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),FS=(()=>{class s extends y.nH{constructor(t,i,r){super("BodyPartLeadService",r,t),this.businessProvider=i}createBodyPartLead(t){const i=Object.fromEntries(Object.entries(t).filter(([r,l])=>null!==l));return this.businessProvider.createBodyPartLead(i)}updateBodyPartLead(t,i){return this.businessProvider.updateBodyPartLead(t,i)}importBodyPartLeads(t){return this.businessProvider.importBodyPartLeads(t)}validateBodyPartLeadExcelData(t,i,r){return this.businessProvider.validateBodyPartLeadExcelData(t,i,r)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(Aa,8),e.LFG(Aa),e.LFG(O.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),ws=(()=>{class s extends g.m1{constructor(t,i,r,l,u,P){if(super({loading:!1,bodyPartLeads:[],done:!1,searchQuery:"",formName:void 0,leadId:void 0,bodyPartId:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=r,this.toast=l,this.formService=u,this.bodyPartLeadService=P,this.errors$=this.select(n=>n.errors),this.loading$=this.select(n=>n.loading),this.done$=this.select(n=>n.done),this.item$=this.select(n=>n.item),this.bodyPartLeads$=this.select(n=>n.bodyPartLeads),this.leads$=this.select(n=>n.leads||[]),this.bodyParts$=this.select(n=>n.bodyParts||[]),this.leadId$=this.select(n=>n.leadId),this.bodyPartId$=this.select(n=>n.bodyPartId),this.paging$=this.select(n=>n.paging),this.searchQuery$=this.select(n=>n.searchQuery),this.formName$=this.select(n=>n.formName),this.actionResult$=this.select(this.item$,this.done$,(n,a)=>({item:n,done:a}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.bodyPartLeads$,this.leads$,this.bodyParts$,(n,a,m,p,_,v,D)=>({errors:n,loading:a,item:m,formName:p,bodyPartLeads:_,leads:v,bodyParts:D}),{debounce:!0}),this.input$=this.select(this.paging$,this.leadId$,this.bodyPartId$,this.searchQuery$,(n,a,m,p)=>({limit:n.limit,skip:n.skip,name:p,leadId:a,bodyPartId:m,total:n.total})),this.setFormName=this.updater((n,a)=>Object.assign(Object.assign({},n),{formName:a})),this.setLeadId=this.updater((n,a)=>Object.assign(Object.assign({},n),{leadId:a})),this.setBodyPartId=this.updater((n,a)=>Object.assign(Object.assign({},n),{bodyPartId:a})),this.filterLeads=n=>this.data.userSelectLeads({input:{name:n}}).pipe((0,g._b)(a=>{let m=a.data.items;return this.patchState({leads:m}),m},a=>this.patchState({errors:a.graphQLErrors?a.graphQLErrors:a})),(0,B.U)(a=>a.data.items)),this.filterBodyParts=n=>this.data.userSelectBodyParts({input:{name:n}}).pipe((0,g._b)(a=>{let m=a.data.items;return this.patchState({bodyParts:m}),m},a=>this.patchState({errors:a.graphQLErrors?a.graphQLErrors:a})),(0,B.U)(a=>a.data.items)),this.addLead=this.updater((n,a)=>Object.assign(Object.assign({},n),{leads:n.leads.concat(a)})),this.addBodyPart=this.updater((n,a)=>Object.assign(Object.assign({},n),{bodyParts:n.bodyParts.concat(a)})),this.setItem=this.updater((n,a)=>Object.assign(Object.assign({},n),{item:a})),this.addNewBodyPartLead=this.updater((n,a)=>Object.assign(Object.assign({},n),{bodyPartLeads:[...n.bodyPartLeads,a]})),this.updateBodyPartLead=this.updater((n,a)=>Object.assign(Object.assign({},n),{bodyPartLeads:n.bodyPartLeads.map(m=>m.id===a.id?a:m)})),this.addBodyPartLeads=this.updater((n,a)=>Object.assign(Object.assign({},n),{bodyPartLeads:n.bodyPartLeads.concat(a)})),this.updateBodyPartLeads=this.updater((n,a)=>Object.assign(Object.assign({},n),{bodyPartLeads:n.bodyPartLeads.map(m=>a.find(_=>_.id===m.id)||m)})),this.setSearchQuery=this.updater((n,a)=>Object.assign(Object.assign({},n),{searchQuery:a})),this.loadBodyPartLeadEffect=this.effect(n=>n.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(a=>this.data.userBodyPartLead({bodyPartLeadId:a}).pipe((0,g._b)(m=>{this.patchState({item:m.data.item,errors:m.errors,loading:!1})},m=>this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})))))),this.loadBodyPartLeadsEffect=this.effect(n=>n.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.input$),(0,h.w)(([a,m])=>this.data.userBodyPartLeads({input:m}).pipe((0,g._b)(p=>this.patchState({paging:{limit:m.limit,skip:m.skip,total:p.data.count.total},bodyPartLeads:p.data.items,errors:p.errors,loading:!1}),p=>this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})))))),this.createBodyPartLeadEffect=this.effect(n=>n.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(a=>this.bodyPartLeadService.createBodyPartLead(Object.assign({},a)).pipe((0,g._b)(m=>{this.addNewBodyPartLead(m),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:m,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},m=>{m.graphQLErrors?(this.toast.error(m.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})):(this.toast.error(m.Message),this.formService.setErrors(m.Data))}))))),this.updateBodyPartLeadEffect=this.effect(n=>n.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([a,m])=>this.bodyPartLeadService.updateBodyPartLead(a,a.id).pipe((0,g._b)(p=>{this.updateBodyPartLead(p),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:p,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},p=>{p.graphQLErrors?(this.toast.error(p.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})):(this.toast.error(p.Message),this.formService.setErrors(p.Data))}))))),this.deleteBodyPartLeadEffect=this.effect(n=>n.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([a,m])=>this.data.userDeleteBodyPartLead({bodyPartLeadId:m.id}).pipe((0,g._b)(p=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:p.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},p=>{p.graphQLErrors?(this.toast.error(p.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})):(this.toast.error(p.Message),this.formService.setErrors(p.Data))}))))),this.importExcelEffect=this.effect(n=>n.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(a=>this.bodyPartLeadService.importBodyPartLeads(a).pipe((0,te.K)(m=>{var p;return this.toast.error(null!==(p=m.Message)&&void 0!==p?p:"Failed to save",{duration:3e3}),k.E}),(0,C.b)(m=>{const p=JSON.parse(m.created),_=JSON.parse(m.updated),v=JSON.parse(m.failed),D=p.length+_.length+v.length;this.addBodyPartLeads(p),this.updateBodyPartLeads(_),this.toast.success(`${p.length} created, ${_.length} updated, ${v.length} failed of total ${D}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("bodyPartLeadId")?(this.route.snapshot.paramMap.get("bodyPartLeadId"),this.setFormName("bodyPartLead_edit")):this.setFormName("bodyPartLead_create"),this.route.snapshot.paramMap.has("leadId")){var c=this.route.snapshot.paramMap.get("leadId");this.setLeadId(c)}if(this.route.snapshot.paramMap.has("bodyPartId")){var d=this.route.snapshot.paramMap.get("bodyPartId");this.setBodyPartId(d)}}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.bodyPartLeadService.validateBodyPartLeadExcelData(t,i.leads,i.bodyParts)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(E.q),e.LFG(A.F0),e.LFG(A.gz),e.LFG(X.F),e.LFG(q.o),e.LFG(FS))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function DS(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close.emit())})("formIsReady",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.bodyPartLead)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let Fa=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"bodyPartLead_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({id:null,name:""}),this.store.vm$.subscribe(i=>{this.bodyPartLead=i.item})):t.formName&&t.formName.currentValue&&"bodyPartLead_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadBodyPartLeadEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.bodyPartLead=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(ws),e.Y36(A.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-body-part-lead-form"]],inputs:{bodyPartLead:"bodyPartLead",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,DS,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[w.O5,z.M,w.Ov],encapsulation:2}),s})(),Da=(()=>{class s{constructor(){this.autoHeight=!1,this.bodyPartLeads=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[{field:"lead.name",headerName:"Lead",filter:"agTextColumnFilter"},{field:"bodyPart.name",headerName:"Body Part",filter:"agTextColumnFilter"},{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{field:"leadId",filter:"agTextColumnFilter",hide:!0},{field:"bodyPartId",filter:"agTextColumnFilter",hide:!0}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var r;t.includes(null===(r=i.data)||void 0===r?void 0:r.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-body-part-lead-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(N.x,5),2&t){let r;e.iGM(r=e.CRH())&&(i.tableView=r.first)}},inputs:{autoHeight:"autoHeight",bodyPartLeads:"bodyPartLeads"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.bodyPartLeads)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[N.x],encapsulation:2}),s})();function IS(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-body-part-lead-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","bodyPartLead_edit")("formControl",t.formControl)("bodyPartLead",t.bodyPartLead)}}const PS=function(){return{}};function WS(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-body-part-lead-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","bodyPartLead_create")("formControl",t.formControl)("bodyPartLead",e.DdM(3,PS))}}function MS(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-body-part-lead-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(u.ref.close())}),e.qZA()}2&s&&e.Q6J("bodyPartLeads",o.data.items)}let ES=(()=>{class s extends I.fS{constructor(t){super(),this.store=t,this.store.loadBodyPartLeadsEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.bodyPartLeads$.pipe((0,h.w)(i=>(0,T.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(ws))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","bodyPartLead","send","close"],[1,"w-full","h-full","bg-white",3,"bodyPartLeads","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,IS,2,3,"ng-template",null,1,e.W1O),e.YNc(3,WS,1,4,"ng-template",null,2,e.W1O),e.YNc(5,MS,1,1,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",u)("editTemplate",r)("createTemplate",l)("key",i.field.key)}},dependencies:[x.JJ,x.oH,J.$,Fa,Da],encapsulation:2}),s})();function OS(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-body-part-lead-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","bodyPartLead_edit")("bodyPartLead",t.value)}}const LS=function(){return{}};function GS(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-body-part-lead-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","bodyPartLead_create")("bodyPartLead",e.DdM(2,LS))}function $S(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-body-part-lead-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(null==u.ref?null:u.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("bodyPartLeads",t.items)}}let RS=(()=>{class s extends Y{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:6,consts:[[3,"data","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","bodyPartLead","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","bodyPartLeads","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,OS,1,2,"ng-template",null,1,e.W1O),e.YNc(3,GS,1,3,"ng-template",null,2,e.W1O),e.YNc(5,$S,1,2,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("data",i.data)("title",i.to.title)("onSave",i.onSave)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[ee,Fa,Da],encapsulation:2}),s})(),VS=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[ws],imports:[w.ez,R.F,x.UX,V.o,H.u,Q.P,U.t,Z,j.h,K.G,I.X0.forChild({types:[{name:"body-part-lead-select",component:ES,wrappers:["form-field"]},{name:"body-part-lead-grid",component:RS}]})]}),s})(),QS=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[VS]}),s})();class ct extends y.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class US extends ct{constructor(o){super("ValidateBodyPartExcelDataAction"),this.valid=!1,this.excelData=o}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name)}),this.validationContext.addRule(new f.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof f.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(r=>r.name),newNames:[i.newName]}):i instanceof f.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,T.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class JS extends f.wS{constructor(o,t,i,r,l){super(o,t,i,r,l,!0)}}class jS extends f.ul{constructor(o,t,i,r=!1){super(o,t,r),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new f.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new JS("name","The bodypart name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class zS extends ct{constructor(o){super("CreateBodyPartAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new jS("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateBodyPart({input:this.input}).pipe((0,h.w)(o=>(0,ie.of)(o.data.created)))}}class qS extends ct{constructor(o){super("UpdateBodyPartsAction"),this.bodyParts=o}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.bodyParts,!0))}performAction(){this.response=this.businessProvider.data.userUpdateBodyParts({input:{bodyParts:this.bodyParts}}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}class HS extends ct{constructor(o,t){super("UpdateBodyPartAction"),this.bodyPart=o,this.bodyPartId=t}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.bodyPart,!0)).addRule(new f.xF("Id","Id should be a CUID and not null",this.bodyPartId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateBodyPart({bodyPartId:this.bodyPartId,input:this.bodyPart}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}let Ia=(()=>{class s extends y.nH{constructor(t,i,r){super("NotificationService.BodyPartBusinessProviderService",t,r),this.data=i}createBodyPart(t){const i=new zS(t);return i.Do(this),i.response}updateBodyPart(t,i){const r=new HS(t,i);return r.Do(this),r.response}importBodyParts(t){const i=new qS(t);return i.Do(this),i.response}validateBodyPartExcelData(t){const i=new US(t);return i.Do(this),i.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(O.ed),e.LFG(E.q),e.LFG(y.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),KS=(()=>{class s extends y.nH{constructor(t,i,r){super("BodyPartService",r,t),this.businessProvider=i}createBodyPart(t){const i=Object.fromEntries(Object.entries(t).filter(([r,l])=>null!==l));return this.businessProvider.createBodyPart(i)}updateBodyPart(t,i){return this.businessProvider.updateBodyPart(t,i)}importBodyParts(t){return this.businessProvider.importBodyParts(t)}validateBodyPartExcelData(t){return this.businessProvider.validateBodyPartExcelData(t)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(Ia,8),e.LFG(Ia),e.LFG(O.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),xs=(()=>{class s extends g.m1{constructor(t,i,r,l,u,P){super({loading:!1,bodyParts:[],done:!1,searchQuery:"",formName:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=r,this.toast=l,this.formService=u,this.bodyPartService=P,this.errors$=this.select(c=>c.errors),this.loading$=this.select(c=>c.loading),this.done$=this.select(c=>c.done),this.item$=this.select(c=>c.item),this.bodyParts$=this.select(c=>c.bodyParts),this.paging$=this.select(c=>c.paging),this.searchQuery$=this.select(c=>c.searchQuery),this.formName$=this.select(c=>c.formName),this.actionResult$=this.select(this.item$,this.done$,(c,d)=>({item:c,done:d}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.bodyParts$,(c,d,n,a,m)=>({errors:c,loading:d,item:n,formName:a,bodyParts:m}),{debounce:!0}),this.input$=this.select(this.paging$,this.searchQuery$,(c,d)=>({limit:c.limit,skip:c.skip,name:d,total:c.total})),this.setFormName=this.updater((c,d)=>Object.assign(Object.assign({},c),{formName:d})),this.setItem=this.updater((c,d)=>Object.assign(Object.assign({},c),{item:d})),this.addNewBodyPart=this.updater((c,d)=>Object.assign(Object.assign({},c),{bodyParts:[...c.bodyParts,d]})),this.updateBodyPart=this.updater((c,d)=>Object.assign(Object.assign({},c),{bodyParts:c.bodyParts.map(n=>n.id===d.id?d:n)})),this.addBodyParts=this.updater((c,d)=>Object.assign(Object.assign({},c),{bodyParts:c.bodyParts.concat(d)})),this.updateBodyParts=this.updater((c,d)=>Object.assign(Object.assign({},c),{bodyParts:c.bodyParts.map(n=>d.find(m=>m.id===n.id)||n)})),this.setSearchQuery=this.updater((c,d)=>Object.assign(Object.assign({},c),{searchQuery:d})),this.loadBodyPartEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.data.userBodyPart({bodyPartId:d}).pipe((0,g._b)(n=>{this.patchState({item:n.data.item,errors:n.errors,loading:!1})},n=>this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})))))),this.loadBodyPartsEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.input$),(0,h.w)(([d,n])=>this.data.userBodyParts({input:n}).pipe((0,g._b)(a=>this.patchState({paging:{limit:n.limit,skip:n.skip,total:a.data.count.total},bodyParts:a.data.items,errors:a.errors,loading:!1}),a=>this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})))))),this.createBodyPartEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.bodyPartService.createBodyPart(Object.assign({},d)).pipe((0,g._b)(n=>{this.addNewBodyPart(n),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:n,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},n=>{n.graphQLErrors?(this.toast.error(n.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})):(this.toast.error(n.Message),this.formService.setErrors(n.Data))}))))),this.updateBodyPartEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([d,n])=>this.bodyPartService.updateBodyPart(d,d.id).pipe((0,g._b)(a=>{this.updateBodyPart(a),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:a,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.deleteBodyPartEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([d,n])=>this.data.userDeleteBodyPart({bodyPartId:n.id}).pipe((0,g._b)(a=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:a.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.importExcelEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.bodyPartService.importBodyParts(d).pipe((0,te.K)(n=>{var a;return this.toast.error(null!==(a=n.Message)&&void 0!==a?a:"Failed to save",{duration:3e3}),k.E}),(0,C.b)(n=>{const a=JSON.parse(n.created),m=JSON.parse(n.updated),p=JSON.parse(n.failed),_=a.length+m.length+p.length;this.addBodyParts(a),this.updateBodyParts(m),this.toast.success(`${a.length} created, ${m.length} updated, ${p.length} failed of total ${_}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("bodyPartId")?(this.route.snapshot.paramMap.get("bodyPartId"),this.setFormName("bodyPart_edit")):this.setFormName("bodyPart_create")}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.bodyPartService.validateBodyPartExcelData(t)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(E.q),e.LFG(A.F0),e.LFG(A.gz),e.LFG(X.F),e.LFG(q.o),e.LFG(KS))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function kS(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close.emit())})("formIsReady",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.bodyPart)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let Pa=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"bodyPart_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({id:null,name:""}),this.store.vm$.subscribe(i=>{this.bodyPart=i.item})):t.formName&&t.formName.currentValue&&"bodyPart_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadBodyPartEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.bodyPart=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(xs),e.Y36(A.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-body-part-form"]],inputs:{bodyPart:"bodyPart",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,kS,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[w.O5,z.M,w.Ov],encapsulation:2}),s})(),Wa=(()=>{class s{constructor(){this.autoHeight=!1,this.bodyParts=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[,{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var r;t.includes(null===(r=i.data)||void 0===r?void 0:r.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-body-part-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(N.x,5),2&t){let r;e.iGM(r=e.CRH())&&(i.tableView=r.first)}},inputs:{autoHeight:"autoHeight",bodyParts:"bodyParts"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.bodyParts)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[N.x],encapsulation:2}),s})();function ZS(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-body-part-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","bodyPart_edit")("formControl",t.formControl)("bodyPart",t.bodyPart)}}const BS=function(){return{}};function YS(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-body-part-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","bodyPart_create")("formControl",t.formControl)("bodyPart",e.DdM(3,BS))}}function XS(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-body-part-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(u.ref.close())}),e.qZA()}2&s&&e.Q6J("bodyParts",o.data.items)}let ev=(()=>{class s extends I.fS{constructor(t){super(),this.store=t,this.store.loadBodyPartsEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.bodyParts$.pipe((0,h.w)(i=>(0,T.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(xs))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","bodyPart","send","close"],[1,"w-full","h-full","bg-white",3,"bodyParts","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,ZS,2,3,"ng-template",null,1,e.W1O),e.YNc(3,YS,1,4,"ng-template",null,2,e.W1O),e.YNc(5,XS,1,1,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",u)("editTemplate",r)("createTemplate",l)("key",i.field.key)}},dependencies:[x.JJ,x.oH,J.$,Pa,Wa],encapsulation:2}),s})();function tv(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-body-part-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","bodyPart_edit")("bodyPart",t.value)}}const iv=function(){return{}};function sv(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-body-part-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","bodyPart_create")("bodyPart",e.DdM(2,iv))}function ov(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-body-part-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(null==u.ref?null:u.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("bodyParts",t.items)}}let rv=(()=>{class s extends Y{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:6,consts:[[3,"data","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","bodyPart","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","bodyParts","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,tv,1,2,"ng-template",null,1,e.W1O),e.YNc(3,sv,1,3,"ng-template",null,2,e.W1O),e.YNc(5,ov,1,2,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("data",i.data)("title",i.to.title)("onSave",i.onSave)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[ee,Pa,Wa],encapsulation:2}),s})(),av=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[xs],imports:[w.ez,R.F,x.UX,V.o,H.u,Q.P,U.t,Z,j.h,K.G,I.X0.forChild({types:[{name:"body-part-select",component:ev,wrappers:["form-field"]},{name:"body-part-grid",component:rv}]})]}),s})(),nv=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[av]}),s})();class dt extends y.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class lv extends dt{constructor(o){super("ValidateCalculationBasisTypeExcelDataAction"),this.valid=!1,this.excelData=o}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name)}),this.validationContext.addRule(new f.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof f.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(r=>r.name),newNames:[i.newName]}):i instanceof f.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,T.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class cv extends f.wS{constructor(o,t,i,r,l){super(o,t,i,r,l,!0)}}class dv extends f.ul{constructor(o,t,i,r=!1){super(o,t,r),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new f.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new cv("name","The calculationbasistype name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class uv extends dt{constructor(o){super("CreateCalculationBasisTypeAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new dv("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateCalculationBasisType({input:this.input}).pipe((0,h.w)(o=>(0,ie.of)(o.data.created)))}}class mv extends dt{constructor(o){super("UpdateCalculationBasisTypesAction"),this.calculationBasisTypes=o}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.calculationBasisTypes,!0))}performAction(){this.response=this.businessProvider.data.userUpdateCalculationBasisTypes({input:{calculationBasisTypes:this.calculationBasisTypes}}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}class pv extends dt{constructor(o,t){super("UpdateCalculationBasisTypeAction"),this.calculationBasisType=o,this.calculationBasisTypeId=t}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.calculationBasisType,!0)).addRule(new f.xF("Id","Id should be a CUID and not null",this.calculationBasisTypeId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateCalculationBasisType({calculationBasisTypeId:this.calculationBasisTypeId,input:this.calculationBasisType}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}let Ma=(()=>{class s extends y.nH{constructor(t,i,r){super("NotificationService.CalculationBasisTypeBusinessProviderService",t,r),this.data=i}createCalculationBasisType(t){const i=new uv(t);return i.Do(this),i.response}updateCalculationBasisType(t,i){const r=new pv(t,i);return r.Do(this),r.response}importCalculationBasisTypes(t){const i=new mv(t);return i.Do(this),i.response}validateCalculationBasisTypeExcelData(t){const i=new lv(t);return i.Do(this),i.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(O.ed),e.LFG(E.q),e.LFG(y.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),hv=(()=>{class s extends y.nH{constructor(t,i,r){super("CalculationBasisTypeService",r,t),this.businessProvider=i}createCalculationBasisType(t){const i=Object.fromEntries(Object.entries(t).filter(([r,l])=>null!==l));return this.businessProvider.createCalculationBasisType(i)}updateCalculationBasisType(t,i){return this.businessProvider.updateCalculationBasisType(t,i)}importCalculationBasisTypes(t){return this.businessProvider.importCalculationBasisTypes(t)}validateCalculationBasisTypeExcelData(t){return this.businessProvider.validateCalculationBasisTypeExcelData(t)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(Ma,8),e.LFG(Ma),e.LFG(O.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),Ns=(()=>{class s extends g.m1{constructor(t,i,r,l,u,P){super({loading:!1,calculationBasisTypes:[],done:!1,searchQuery:"",formName:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=r,this.toast=l,this.formService=u,this.calculationBasisTypeService=P,this.errors$=this.select(c=>c.errors),this.loading$=this.select(c=>c.loading),this.done$=this.select(c=>c.done),this.item$=this.select(c=>c.item),this.calculationBasisTypes$=this.select(c=>c.calculationBasisTypes),this.paging$=this.select(c=>c.paging),this.searchQuery$=this.select(c=>c.searchQuery),this.formName$=this.select(c=>c.formName),this.actionResult$=this.select(this.item$,this.done$,(c,d)=>({item:c,done:d}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.calculationBasisTypes$,(c,d,n,a,m)=>({errors:c,loading:d,item:n,formName:a,calculationBasisTypes:m}),{debounce:!0}),this.input$=this.select(this.paging$,this.searchQuery$,(c,d)=>({limit:c.limit,skip:c.skip,name:d,total:c.total})),this.setFormName=this.updater((c,d)=>Object.assign(Object.assign({},c),{formName:d})),this.setItem=this.updater((c,d)=>Object.assign(Object.assign({},c),{item:d})),this.addNewCalculationBasisType=this.updater((c,d)=>Object.assign(Object.assign({},c),{calculationBasisTypes:[...c.calculationBasisTypes,d]})),this.updateCalculationBasisType=this.updater((c,d)=>Object.assign(Object.assign({},c),{calculationBasisTypes:c.calculationBasisTypes.map(n=>n.id===d.id?d:n)})),this.addCalculationBasisTypes=this.updater((c,d)=>Object.assign(Object.assign({},c),{calculationBasisTypes:c.calculationBasisTypes.concat(d)})),this.updateCalculationBasisTypes=this.updater((c,d)=>Object.assign(Object.assign({},c),{calculationBasisTypes:c.calculationBasisTypes.map(n=>d.find(m=>m.id===n.id)||n)})),this.setSearchQuery=this.updater((c,d)=>Object.assign(Object.assign({},c),{searchQuery:d})),this.loadCalculationBasisTypeEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.data.userCalculationBasisType({calculationBasisTypeId:d}).pipe((0,g._b)(n=>{this.patchState({item:n.data.item,errors:n.errors,loading:!1})},n=>this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})))))),this.loadCalculationBasisTypesEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.input$),(0,h.w)(([d,n])=>this.data.userCalculationBasisTypes({input:n}).pipe((0,g._b)(a=>this.patchState({paging:{limit:n.limit,skip:n.skip,total:a.data.count.total},calculationBasisTypes:a.data.items,errors:a.errors,loading:!1}),a=>this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})))))),this.createCalculationBasisTypeEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.calculationBasisTypeService.createCalculationBasisType(Object.assign({},d)).pipe((0,g._b)(n=>{this.addNewCalculationBasisType(n),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:n,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},n=>{n.graphQLErrors?(this.toast.error(n.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})):(this.toast.error(n.Message),this.formService.setErrors(n.Data))}))))),this.updateCalculationBasisTypeEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([d,n])=>this.calculationBasisTypeService.updateCalculationBasisType(d,d.id).pipe((0,g._b)(a=>{this.updateCalculationBasisType(a),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:a,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.deleteCalculationBasisTypeEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([d,n])=>this.data.userDeleteCalculationBasisType({calculationBasisTypeId:n.id}).pipe((0,g._b)(a=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:a.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.importExcelEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.calculationBasisTypeService.importCalculationBasisTypes(d).pipe((0,te.K)(n=>{var a;return this.toast.error(null!==(a=n.Message)&&void 0!==a?a:"Failed to save",{duration:3e3}),k.E}),(0,C.b)(n=>{const a=JSON.parse(n.created),m=JSON.parse(n.updated),p=JSON.parse(n.failed),_=a.length+m.length+p.length;this.addCalculationBasisTypes(a),this.updateCalculationBasisTypes(m),this.toast.success(`${a.length} created, ${m.length} updated, ${p.length} failed of total ${_}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("calculationBasisTypeId")?(this.route.snapshot.paramMap.get("calculationBasisTypeId"),this.setFormName("calculationBasisType_edit")):this.setFormName("calculationBasisType_create")}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.calculationBasisTypeService.validateCalculationBasisTypeExcelData(t)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(E.q),e.LFG(A.F0),e.LFG(A.gz),e.LFG(X.F),e.LFG(q.o),e.LFG(hv))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function fv(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close.emit())})("formIsReady",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.calculationBasisType)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let Ea=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"calculationBasisType_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.calculationBasisType=i.item})):t.formName&&t.formName.currentValue&&"calculationBasisType_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadCalculationBasisTypeEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.calculationBasisType=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Ns),e.Y36(A.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-calculation-basis-type-form"]],inputs:{calculationBasisType:"calculationBasisType",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,fv,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[w.O5,z.M,w.Ov],encapsulation:2}),s})(),Oa=(()=>{class s{constructor(){this.autoHeight=!1,this.calculationBasisTypes=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[,{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var r;t.includes(null===(r=i.data)||void 0===r?void 0:r.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-calculation-basis-type-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(N.x,5),2&t){let r;e.iGM(r=e.CRH())&&(i.tableView=r.first)}},inputs:{autoHeight:"autoHeight",calculationBasisTypes:"calculationBasisTypes"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.calculationBasisTypes)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[N.x],encapsulation:2}),s})();function _v(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-calculation-basis-type-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","calculationBasisType_edit")("formControl",t.formControl)("calculationBasisType",t.calculationBasisType)}}const gv=function(){return{}};function Cv(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-calculation-basis-type-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","calculationBasisType_create")("formControl",t.formControl)("calculationBasisType",e.DdM(3,gv))}}function Sv(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-calculation-basis-type-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(u.ref.close())}),e.qZA()}2&s&&e.Q6J("calculationBasisTypes",o.data.items)}let vv=(()=>{class s extends I.fS{constructor(t){super(),this.store=t,this.store.loadCalculationBasisTypesEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.calculationBasisTypes$.pipe((0,h.w)(i=>(0,T.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Ns))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","calculationBasisType","send","close"],[1,"w-full","h-full","bg-white",3,"calculationBasisTypes","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,_v,2,3,"ng-template",null,1,e.W1O),e.YNc(3,Cv,1,4,"ng-template",null,2,e.W1O),e.YNc(5,Sv,1,1,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",u)("editTemplate",r)("createTemplate",l)("key",i.field.key)}},dependencies:[x.JJ,x.oH,J.$,Ea,Oa],encapsulation:2}),s})();function bv(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-calculation-basis-type-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","calculationBasisType_edit")("calculationBasisType",t.value)}}const Tv=function(){return{}};function yv(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-calculation-basis-type-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","calculationBasisType_create")("calculationBasisType",e.DdM(2,Tv))}function wv(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-calculation-basis-type-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(null==u.ref?null:u.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("calculationBasisTypes",t.items)}}let xv=(()=>{class s extends Y{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","calculationBasisType","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","calculationBasisTypes","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,bv,1,2,"ng-template",null,1,e.W1O),e.YNc(3,yv,1,3,"ng-template",null,2,e.W1O),e.YNc(5,wv,1,2,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[ee,Ea,Oa],encapsulation:2}),s})(),Nv=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[Ns],imports:[w.ez,R.F,x.UX,V.o,H.u,Q.P,U.t,Z,j.h,K.G,I.X0.forChild({types:[{name:"calculation-basis-type-select",component:vv,wrappers:["form-field"]},{name:"calculation-basis-type-grid",component:xv}]})]}),s})(),Av=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[Nv]}),s})();class ut extends y.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class Fv extends ut{constructor(o,t,i,r,l,u,P,b,c,d,n,a){super("ValidateCaseAccountExcelDataAction"),this.valid=!1,this.excelData=o,this.legalCases=t,this.locations=i,this.vendors=r,this.accountStatuses=l,this.procedureTypes=u,this.agreementTypes=P,this.claimProcedures=b,this.invoiceDetails=c,this.contracts=d,this.portfolios=n,this.procedureVendors=a}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name),this.validationContext.addRule(new f.mi(`legalCaseName_${i}_is_valid}`,"Legal Case Is Not Valid","legalCase.name",t.legalCase,this.legalCases,!0)),this.validationContext.addRule(new f.mi(`locationName_${i}_is_valid}`,"Location Is Not Valid","location.name",t.location,this.locations,!0)),this.validationContext.addRule(new f.mi(`vendorName_${i}_is_valid}`,"Vendor Is Not Valid","vendor.name",t.vendor,this.vendors,!0)),this.validationContext.addRule(new f.mi(`accountStatusName_${i}_is_valid}`,"Account Status Is Not Valid","accountStatus.name",t.accountStatus,this.accountStatuses,!0)),this.validationContext.addRule(new f.mi(`procedureTypeName_${i}_is_valid}`,"Procedure Type Is Not Valid","procedureType.name",t.procedureType,this.procedureTypes,!0)),this.validationContext.addRule(new f.mi(`agreementTypeName_${i}_is_valid}`,"Agreement Type Is Not Valid","agreementType.name",t.agreementType,this.agreementTypes,!0)),this.validationContext.addRule(new f.mi(`claimProcedureName_${i}_is_valid}`,"Claim Procedure Is Not Valid","claimProcedure.name",t.claimProcedure,this.claimProcedures,!0)),this.validationContext.addRule(new f.mi(`invoiceDetailName_${i}_is_valid}`,"Invoice Detail Is Not Valid","invoiceDetail.name",t.invoiceDetail,this.invoiceDetails,!0)),this.validationContext.addRule(new f.mi(`contractName_${i}_is_valid}`,"Contract Is Not Valid","contract.name",t.contract,this.contracts,!0)),this.validationContext.addRule(new f.mi(`portfolioName_${i}_is_valid}`,"Portfolio Is Not Valid","portfolio.name",t.portfolio,this.portfolios,!0)),this.validationContext.addRule(new f.mi(`procedureVendorName_${i}_is_valid}`,"Procedure Vendor Is Not Valid","procedureVendor.name",t.procedureVendor,this.procedureVendors,!0))}),this.validationContext.addRule(new f.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof f.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(r=>r.name),newNames:[i.newName]}):i instanceof f.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,T.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class Dv extends f.wS{constructor(o,t,i,r,l){super(o,t,i,r,l,!0)}}class Iv extends f.ul{constructor(o,t,i,r=!1){super(o,t,r),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new f.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new Dv("name","The caseaccount name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class Pv extends ut{constructor(o){super("CreateCaseAccountAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new Iv("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateCaseAccount({input:this.input}).pipe((0,h.w)(o=>(0,ie.of)(o.data.created)))}}class Wv extends ut{constructor(o){super("UpdateCaseAccountsAction"),this.caseAccounts=o}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.caseAccounts,!0))}performAction(){this.response=this.businessProvider.data.userUpdateCaseAccounts({input:{caseAccounts:this.caseAccounts}}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}class Mv extends ut{constructor(o,t){super("UpdateCaseAccountAction"),this.caseAccount=o,this.caseAccountId=t}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.caseAccount,!0)).addRule(new f.xF("Id","Id should be a CUID and not null",this.caseAccountId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateCaseAccount({caseAccountId:this.caseAccountId,input:this.caseAccount}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}let La=(()=>{class s extends y.nH{constructor(t,i,r){super("NotificationService.CaseAccountBusinessProviderService",t,r),this.data=i}createCaseAccount(t){const i=new Pv(t);return i.Do(this),i.response}updateCaseAccount(t,i){const r=new Mv(t,i);return r.Do(this),r.response}importCaseAccounts(t){const i=new Wv(t);return i.Do(this),i.response}validateCaseAccountExcelData(t,i,r,l,u,P,b,c,d,n,a,m){const p=new Fv(t,i,r,l,u,P,b,c,d,n,a,m);return p.Do(this),p.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(O.ed),e.LFG(E.q),e.LFG(y.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),Ev=(()=>{class s extends y.nH{constructor(t,i,r){super("CaseAccountService",r,t),this.businessProvider=i}createCaseAccount(t){const i=Object.fromEntries(Object.entries(t).filter(([r,l])=>null!==l));return this.businessProvider.createCaseAccount(i)}updateCaseAccount(t,i){return this.businessProvider.updateCaseAccount(t,i)}importCaseAccounts(t){return this.businessProvider.importCaseAccounts(t)}validateCaseAccountExcelData(t,i,r,l,u,P,b,c,d,n,a,m){return this.businessProvider.validateCaseAccountExcelData(t,i,r,l,u,P,b,c,d,n,a,m)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(La,8),e.LFG(La),e.LFG(O.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),As=(()=>{class s extends g.m1{constructor(t,i,r,l,u,P){if(super({loading:!1,caseAccounts:[],done:!1,searchQuery:"",formName:void 0,legalCaseId:void 0,locationId:void 0,vendorId:void 0,accountStatusId:void 0,procedureTypeId:void 0,agreementTypeId:void 0,claimProcedureId:void 0,invoiceDetailId:void 0,contractId:void 0,portfolioId:void 0,procedureVendorId:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=r,this.toast=l,this.formService=u,this.caseAccountService=P,this.errors$=this.select(G=>G.errors),this.loading$=this.select(G=>G.loading),this.done$=this.select(G=>G.done),this.item$=this.select(G=>G.item),this.caseAccounts$=this.select(G=>G.caseAccounts),this.legalCases$=this.select(G=>G.legalCases||[]),this.locations$=this.select(G=>G.locations||[]),this.vendors$=this.select(G=>G.vendors||[]),this.accountStatuses$=this.select(G=>G.accountStatuses||[]),this.procedureTypes$=this.select(G=>G.procedureTypes||[]),this.agreementTypes$=this.select(G=>G.agreementTypes||[]),this.claimProcedures$=this.select(G=>G.claimProcedures||[]),this.invoiceDetails$=this.select(G=>G.invoiceDetails||[]),this.contracts$=this.select(G=>G.contracts||[]),this.portfolios$=this.select(G=>G.portfolios||[]),this.procedureVendors$=this.select(G=>G.procedureVendors||[]),this.legalCaseId$=this.select(G=>G.legalCaseId),this.locationId$=this.select(G=>G.locationId),this.vendorId$=this.select(G=>G.vendorId),this.accountStatusId$=this.select(G=>G.accountStatusId),this.procedureTypeId$=this.select(G=>G.procedureTypeId),this.agreementTypeId$=this.select(G=>G.agreementTypeId),this.claimProcedureId$=this.select(G=>G.claimProcedureId),this.invoiceDetailId$=this.select(G=>G.invoiceDetailId),this.contractId$=this.select(G=>G.contractId),this.portfolioId$=this.select(G=>G.portfolioId),this.procedureVendorId$=this.select(G=>G.procedureVendorId),this.paging$=this.select(G=>G.paging),this.searchQuery$=this.select(G=>G.searchQuery),this.formName$=this.select(G=>G.formName),this.actionResult$=this.select(this.item$,this.done$,(G,$)=>({item:G,done:$}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.caseAccounts$,this.legalCases$,this.locations$,this.vendors$,this.accountStatuses$,this.procedureTypes$,this.agreementTypes$,this.claimProcedures$,this.invoiceDetails$,this.contracts$,this.portfolios$,this.procedureVendors$,(G,$,M,L,ne,ue,ve,we,xe,De,Ie,Pe,We,Re,Ve,Qe)=>({errors:G,loading:$,item:M,formName:L,caseAccounts:ne,legalCases:ue,locations:ve,vendors:we,accountStatuses:xe,procedureTypes:De,agreementTypes:Ie,claimProcedures:Pe,invoiceDetails:We,contracts:Re,portfolios:Ve,procedureVendors:Qe}),{debounce:!0}),this.input$=this.select(this.paging$,this.legalCaseId$,this.locationId$,this.vendorId$,this.accountStatusId$,this.procedureTypeId$,this.agreementTypeId$,this.claimProcedureId$,this.invoiceDetailId$,this.contractId$,this.portfolioId$,this.procedureVendorId$,this.searchQuery$,(G,$,M,L,ne,ue,ve,we,xe,De,Ie,Pe,We)=>({limit:G.limit,skip:G.skip,name:We,legalCaseId:$,locationId:M,vendorId:L,accountStatusId:ne,procedureTypeId:ue,agreementTypeId:ve,claimProcedureId:we,invoiceDetailId:xe,contractId:De,portfolioId:Ie,procedureVendorId:Pe,total:G.total})),this.setFormName=this.updater((G,$)=>Object.assign(Object.assign({},G),{formName:$})),this.setLegalCaseId=this.updater((G,$)=>Object.assign(Object.assign({},G),{legalCaseId:$})),this.setLocationId=this.updater((G,$)=>Object.assign(Object.assign({},G),{locationId:$})),this.setVendorId=this.updater((G,$)=>Object.assign(Object.assign({},G),{vendorId:$})),this.setAccountStatusId=this.updater((G,$)=>Object.assign(Object.assign({},G),{accountStatusId:$})),this.setProcedureTypeId=this.updater((G,$)=>Object.assign(Object.assign({},G),{procedureTypeId:$})),this.setAgreementTypeId=this.updater((G,$)=>Object.assign(Object.assign({},G),{agreementTypeId:$})),this.setClaimProcedureId=this.updater((G,$)=>Object.assign(Object.assign({},G),{claimProcedureId:$})),this.setInvoiceDetailId=this.updater((G,$)=>Object.assign(Object.assign({},G),{invoiceDetailId:$})),this.setContractId=this.updater((G,$)=>Object.assign(Object.assign({},G),{contractId:$})),this.setPortfolioId=this.updater((G,$)=>Object.assign(Object.assign({},G),{portfolioId:$})),this.setProcedureVendorId=this.updater((G,$)=>Object.assign(Object.assign({},G),{procedureVendorId:$})),this.filterLegalCases=G=>this.data.userSelectLegalCases({input:{name:G}}).pipe((0,g._b)($=>{let M=$.data.items;return this.patchState({legalCases:M}),M},$=>this.patchState({errors:$.graphQLErrors?$.graphQLErrors:$})),(0,B.U)($=>$.data.items)),this.filterLocations=G=>this.data.userSelectLocations({input:{name:G}}).pipe((0,g._b)($=>{let M=$.data.items;return this.patchState({locations:M}),M},$=>this.patchState({errors:$.graphQLErrors?$.graphQLErrors:$})),(0,B.U)($=>$.data.items)),this.filterVendors=G=>this.data.userSelectVendors({input:{name:G}}).pipe((0,g._b)($=>{let M=$.data.items;return this.patchState({vendors:M}),M},$=>this.patchState({errors:$.graphQLErrors?$.graphQLErrors:$})),(0,B.U)($=>$.data.items)),this.filterAccountStatuses=G=>this.data.userSelectAccountStatuses({input:{name:G}}).pipe((0,g._b)($=>{let M=$.data.items;return this.patchState({accountStatuses:M}),M},$=>this.patchState({errors:$.graphQLErrors?$.graphQLErrors:$})),(0,B.U)($=>$.data.items)),this.filterProcedureTypes=G=>this.data.userSelectProcedureTypes({input:{name:G}}).pipe((0,g._b)($=>{let M=$.data.items;return this.patchState({procedureTypes:M}),M},$=>this.patchState({errors:$.graphQLErrors?$.graphQLErrors:$})),(0,B.U)($=>$.data.items)),this.filterAgreementTypes=G=>this.data.userSelectAgreementTypes({input:{name:G}}).pipe((0,g._b)($=>{let M=$.data.items;return this.patchState({agreementTypes:M}),M},$=>this.patchState({errors:$.graphQLErrors?$.graphQLErrors:$})),(0,B.U)($=>$.data.items)),this.filterClaimProcedures=G=>this.data.userSelectClaimProcedures({input:{name:G}}).pipe((0,g._b)($=>{let M=$.data.items;return this.patchState({claimProcedures:M}),M},$=>this.patchState({errors:$.graphQLErrors?$.graphQLErrors:$})),(0,B.U)($=>$.data.items)),this.filterInvoiceDetails=G=>this.data.userSelectInvoiceDetails({input:{name:G}}).pipe((0,g._b)($=>{let M=$.data.items;return this.patchState({invoiceDetails:M}),M},$=>this.patchState({errors:$.graphQLErrors?$.graphQLErrors:$})),(0,B.U)($=>$.data.items)),this.filterContracts=G=>this.data.userSelectContracts({input:{name:G}}).pipe((0,g._b)($=>{let M=$.data.items;return this.patchState({contracts:M}),M},$=>this.patchState({errors:$.graphQLErrors?$.graphQLErrors:$})),(0,B.U)($=>$.data.items)),this.filterPortfolios=G=>this.data.userSelectPortfolios({input:{name:G}}).pipe((0,g._b)($=>{let M=$.data.items;return this.patchState({portfolios:M}),M},$=>this.patchState({errors:$.graphQLErrors?$.graphQLErrors:$})),(0,B.U)($=>$.data.items)),this.filterProcedureVendors=G=>this.data.userSelectProcedureVendors({input:{name:G}}).pipe((0,g._b)($=>{let M=$.data.items;return this.patchState({procedureVendors:M}),M},$=>this.patchState({errors:$.graphQLErrors?$.graphQLErrors:$})),(0,B.U)($=>$.data.items)),this.addLegalCase=this.updater((G,$)=>Object.assign(Object.assign({},G),{legalCases:G.legalCases.concat($)})),this.addLocation=this.updater((G,$)=>Object.assign(Object.assign({},G),{locations:G.locations.concat($)})),this.addVendor=this.updater((G,$)=>Object.assign(Object.assign({},G),{vendors:G.vendors.concat($)})),this.addAccountStatus=this.updater((G,$)=>Object.assign(Object.assign({},G),{accountStatuses:G.accountStatuses.concat($)})),this.addProcedureType=this.updater((G,$)=>Object.assign(Object.assign({},G),{procedureTypes:G.procedureTypes.concat($)})),this.addAgreementType=this.updater((G,$)=>Object.assign(Object.assign({},G),{agreementTypes:G.agreementTypes.concat($)})),this.addClaimProcedure=this.updater((G,$)=>Object.assign(Object.assign({},G),{claimProcedures:G.claimProcedures.concat($)})),this.addInvoiceDetail=this.updater((G,$)=>Object.assign(Object.assign({},G),{invoiceDetails:G.invoiceDetails.concat($)})),this.addContract=this.updater((G,$)=>Object.assign(Object.assign({},G),{contracts:G.contracts.concat($)})),this.addPortfolio=this.updater((G,$)=>Object.assign(Object.assign({},G),{portfolios:G.portfolios.concat($)})),this.addProcedureVendor=this.updater((G,$)=>Object.assign(Object.assign({},G),{procedureVendors:G.procedureVendors.concat($)})),this.setItem=this.updater((G,$)=>Object.assign(Object.assign({},G),{item:$})),this.addNewCaseAccount=this.updater((G,$)=>Object.assign(Object.assign({},G),{caseAccounts:[...G.caseAccounts,$]})),this.updateCaseAccount=this.updater((G,$)=>Object.assign(Object.assign({},G),{caseAccounts:G.caseAccounts.map(M=>M.id===$.id?$:M)})),this.addCaseAccounts=this.updater((G,$)=>Object.assign(Object.assign({},G),{caseAccounts:G.caseAccounts.concat($)})),this.updateCaseAccounts=this.updater((G,$)=>Object.assign(Object.assign({},G),{caseAccounts:G.caseAccounts.map(M=>$.find(ne=>ne.id===M.id)||M)})),this.setSearchQuery=this.updater((G,$)=>Object.assign(Object.assign({},G),{searchQuery:$})),this.loadCaseAccountEffect=this.effect(G=>G.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)($=>this.data.userCaseAccount({caseAccountId:$}).pipe((0,g._b)(M=>{this.patchState({item:M.data.item,errors:M.errors,loading:!1})},M=>this.patchState({loading:!1,errors:M.graphQLErrors?M.graphQLErrors:M})))))),this.loadCaseAccountsEffect=this.effect(G=>G.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.input$),(0,h.w)(([$,M])=>this.data.userCaseAccounts({input:M}).pipe((0,g._b)(L=>this.patchState({paging:{limit:M.limit,skip:M.skip,total:L.data.count.total},caseAccounts:L.data.items,errors:L.errors,loading:!1}),L=>this.patchState({loading:!1,errors:L.graphQLErrors?L.graphQLErrors:L})))))),this.createCaseAccountEffect=this.effect(G=>G.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)($=>this.caseAccountService.createCaseAccount(Object.assign({},$)).pipe((0,g._b)(M=>{this.addNewCaseAccount(M),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:M,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},M=>{M.graphQLErrors?(this.toast.error(M.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:M.graphQLErrors?M.graphQLErrors:M})):(this.toast.error(M.Message),this.formService.setErrors(M.Data))}))))),this.updateCaseAccountEffect=this.effect(G=>G.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([$,M])=>this.caseAccountService.updateCaseAccount($,$.id).pipe((0,g._b)(L=>{this.updateCaseAccount(L),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:L,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},L=>{L.graphQLErrors?(this.toast.error(L.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:L.graphQLErrors?L.graphQLErrors:L})):(this.toast.error(L.Message),this.formService.setErrors(L.Data))}))))),this.deleteCaseAccountEffect=this.effect(G=>G.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([$,M])=>this.data.userDeleteCaseAccount({caseAccountId:M.id}).pipe((0,g._b)(L=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:L.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},L=>{L.graphQLErrors?(this.toast.error(L.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:L.graphQLErrors?L.graphQLErrors:L})):(this.toast.error(L.Message),this.formService.setErrors(L.Data))}))))),this.importExcelEffect=this.effect(G=>G.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)($=>this.caseAccountService.importCaseAccounts($).pipe((0,te.K)(M=>{var L;return this.toast.error(null!==(L=M.Message)&&void 0!==L?L:"Failed to save",{duration:3e3}),k.E}),(0,C.b)(M=>{const L=JSON.parse(M.created),ne=JSON.parse(M.updated),ue=JSON.parse(M.failed),ve=L.length+ne.length+ue.length;this.addCaseAccounts(L),this.updateCaseAccounts(ne),this.toast.success(`${L.length} created, ${ne.length} updated, ${ue.length} failed of total ${ve}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("caseAccountId")?(this.route.snapshot.paramMap.get("caseAccountId"),this.setFormName("caseAccount_edit")):this.setFormName("caseAccount_create"),this.route.snapshot.paramMap.has("legalCaseId")){var c=this.route.snapshot.paramMap.get("legalCaseId");this.setLegalCaseId(c)}if(this.route.snapshot.paramMap.has("locationId")){var d=this.route.snapshot.paramMap.get("locationId");this.setLocationId(d)}if(this.route.snapshot.paramMap.has("vendorId")){var n=this.route.snapshot.paramMap.get("vendorId");this.setVendorId(n)}if(this.route.snapshot.paramMap.has("accountStatusId")){var a=this.route.snapshot.paramMap.get("accountStatusId");this.setAccountStatusId(a)}if(this.route.snapshot.paramMap.has("procedureTypeId")){var m=this.route.snapshot.paramMap.get("procedureTypeId");this.setProcedureTypeId(m)}if(this.route.snapshot.paramMap.has("agreementTypeId")){var p=this.route.snapshot.paramMap.get("agreementTypeId");this.setAgreementTypeId(p)}if(this.route.snapshot.paramMap.has("claimProcedureId")){var _=this.route.snapshot.paramMap.get("claimProcedureId");this.setClaimProcedureId(_)}if(this.route.snapshot.paramMap.has("invoiceDetailId")){var v=this.route.snapshot.paramMap.get("invoiceDetailId");this.setInvoiceDetailId(v)}if(this.route.snapshot.paramMap.has("contractId")){var D=this.route.snapshot.paramMap.get("contractId");this.setContractId(D)}if(this.route.snapshot.paramMap.has("portfolioId")){var se=this.route.snapshot.paramMap.get("portfolioId");this.setPortfolioId(se)}if(this.route.snapshot.paramMap.has("procedureVendorId")){var me=this.route.snapshot.paramMap.get("procedureVendorId");this.setProcedureVendorId(me)}}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.caseAccountService.validateCaseAccountExcelData(t,i.legalCases,i.locations,i.vendors,i.accountStatuses,i.procedureTypes,i.agreementTypes,i.claimProcedures,i.invoiceDetails,i.contracts,i.portfolios,i.procedureVendors)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(E.q),e.LFG(A.F0),e.LFG(A.gz),e.LFG(X.F),e.LFG(q.o),e.LFG(Ev))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function Ov(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close.emit())})("formIsReady",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.caseAccount)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let Ga=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"caseAccount_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.caseAccount=i.item})):t.formName&&t.formName.currentValue&&"caseAccount_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadCaseAccountEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.caseAccount=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(As),e.Y36(A.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-case-account-form"]],inputs:{caseAccount:"caseAccount",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,Ov,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[w.O5,z.M,w.Ov],encapsulation:2}),s})(),$a=(()=>{class s{constructor(){this.autoHeight=!1,this.caseAccounts=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[{field:"legalCase.name",headerName:"Legal Case",filter:"agTextColumnFilter"},{field:"location.name",headerName:"Location",filter:"agTextColumnFilter"},{field:"vendor.name",headerName:"Vendor",filter:"agTextColumnFilter"},{field:"accountStatus.name",headerName:"Account Status",filter:"agTextColumnFilter"},{field:"procedureType.name",headerName:"Procedure Type",filter:"agTextColumnFilter"},{field:"agreementType.name",headerName:"Agreement Type",filter:"agTextColumnFilter"},{field:"claimProcedure.name",headerName:"Claim Procedure",filter:"agTextColumnFilter"},{field:"invoiceDetail.name",headerName:"Invoice Detail",filter:"agTextColumnFilter"},{field:"contract.name",headerName:"Contract",filter:"agTextColumnFilter"},{field:"portfolio.name",headerName:"Portfolio",filter:"agTextColumnFilter"},{field:"procedureVendor.name",headerName:"Procedure Vendor",filter:"agTextColumnFilter"},{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{field:"legalCaseId",filter:"agTextColumnFilter",hide:!0},{field:"locationId",filter:"agTextColumnFilter",hide:!0},{field:"vendorId",filter:"agTextColumnFilter",hide:!0},{field:"accountStatusId",filter:"agTextColumnFilter",hide:!0},{field:"procedureTypeId",filter:"agTextColumnFilter",hide:!0},{field:"agreementTypeId",filter:"agTextColumnFilter",hide:!0},{field:"accountAgentId",filter:"agTextColumnFilter"},{field:"claimProcedureId",filter:"agTextColumnFilter",hide:!0},{field:"invoiceDetailId",filter:"agTextColumnFilter",hide:!0},{field:"contractId",filter:"agTextColumnFilter",hide:!0},{field:"portfolioId",filter:"agTextColumnFilter",hide:!0},{field:"thirdPartyFunderName",filter:"agTextColumnFilter"},{field:"originalDueDate",filter:"agDateColumnFilter"},{headerName:"Account Term",field:"accountTerm",valueFormatter:t=>{var i;return(0,S.oBD)(null===(i=t.data)||void 0===i?void 0:i.accountTerm,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{field:"serviceDate",filter:"agDateColumnFilter"},{headerName:"Quantity",field:"quantity",valueFormatter:t=>{var i;return(0,S.oBD)(null===(i=t.data)||void 0===i?void 0:i.quantity,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{headerName:"Original Debt",field:"originalDebt",valueFormatter:t=>{var i;return(0,S.oBD)(null===(i=t.data)||void 0===i?void 0:i.originalDebt,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{headerName:"Cost",field:"cost",valueFormatter:t=>{var i;return(0,S.oBD)(null===(i=t.data)||void 0===i?void 0:i.cost,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{headerName:"Balance",field:"balance",valueFormatter:t=>{var i;return(0,S.oBD)(null===(i=t.data)||void 0===i?void 0:i.balance,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{headerName:"Last Balance",field:"lastBalance",valueFormatter:t=>{var i;return(0,S.oBD)(null===(i=t.data)||void 0===i?void 0:i.lastBalance,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{headerName:"Reduction",field:"reduction",valueFormatter:t=>{var i;return(0,S.oBD)(null===(i=t.data)||void 0===i?void 0:i.reduction,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{field:"treatmentState",filter:"agTextColumnFilter"},{field:"accountNumber",filter:"agTextColumnFilter"},{field:"servicesPerformed",filter:"agTextColumnFilter"},{field:"cptCodes",filter:"agTextColumnFilter"},{field:"treatingPhysician",filter:"agTextColumnFilter"},{field:"referringPhysician",filter:"agTextColumnFilter"},{field:"collectionsDate",filter:"agDateColumnFilter"},{field:"deemedWriteOffDate",filter:"agDateColumnFilter"},{field:"expensedBadDebtDate",filter:"agDateColumnFilter"},{field:"paidDate",filter:"agDateColumnFilter"},{headerName:"Ghost Account",field:"ghostAccount",filter:"agSetColumnFilter",cellRenderer:"checkboxRenderer"},{field:"ghostedDate",filter:"agDateColumnFilter"},{field:"ghostedBy",filter:"agTextColumnFilter"},{field:"unGhostedDate",filter:"agDateColumnFilter"},{field:"unGhostedBy",filter:"agTextColumnFilter"},{headerName:"Additional Payment",field:"additionalPayment",filter:"agSetColumnFilter",cellRenderer:"checkboxRenderer"},{headerName:"Missing Bill",field:"missingBill",filter:"agSetColumnFilter",cellRenderer:"checkboxRenderer"},{headerName:"Missing Lien",field:"missingLien",filter:"agSetColumnFilter",cellRenderer:"checkboxRenderer"},{headerName:"Missing Medical Records",field:"missingMedicalRecords",filter:"agSetColumnFilter",cellRenderer:"checkboxRenderer"},{field:"assignedTo",filter:"agTextColumnFilter"},{field:"resubmitted",filter:"agDateColumnFilter"},{field:"treatmentCity",filter:"agTextColumnFilter"},{headerName:"Origination",field:"origination",valueFormatter:t=>{var i;return(0,S.oBD)(null===(i=t.data)||void 0===i?void 0:i.origination,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{headerName:"Threshold Provider Rate",field:"thresholdProviderRate",valueFormatter:t=>{var i;return(0,S.oBD)(null===(i=t.data)||void 0===i?void 0:i.thresholdProviderRate,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{headerName:"Threshold Location Rate",field:"thresholdLocationRate",valueFormatter:t=>{var i;return(0,S.oBD)(null===(i=t.data)||void 0===i?void 0:i.thresholdLocationRate,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{field:"teamLeaderRateSource",filter:"agTextColumnFilter"},{field:"checkNumber",filter:"agTextColumnFilter"},{field:"accountDateReceived",filter:"agDateColumnFilter"},{field:"dateApplied",filter:"agDateColumnFilter"},{headerName:"Amount Applied",field:"amountApplied",valueFormatter:t=>{var i;return(0,S.oBD)(null===(i=t.data)||void 0===i?void 0:i.amountApplied,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{field:"description",filter:"agTextColumnFilter"},{field:"note",filter:"agTextColumnFilter"},{headerName:"Medicare Rate",field:"medicareRate",valueFormatter:t=>{var i;return(0,S.oBD)(null===(i=t.data)||void 0===i?void 0:i.medicareRate,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{headerName:"Provider Percent of Medicare",field:"providerPercentOfMedicare",valueFormatter:t=>{var i;return(0,S.oBD)(null===(i=t.data)||void 0===i?void 0:i.providerPercentOfMedicare,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{headerName:"Contracted Amount",field:"contractedAmount",valueFormatter:t=>{var i;return(0,S.oBD)(null===(i=t.data)||void 0===i?void 0:i.contractedAmount,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{headerName:"Markup Percent",field:"markupPercent",valueFormatter:t=>{var i;return(0,S.oBD)(null===(i=t.data)||void 0===i?void 0:i.markupPercent,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{headerName:"Reimbursed Total",field:"reimbursedTotal",valueFormatter:t=>{var i;return(0,S.oBD)(null===(i=t.data)||void 0===i?void 0:i.reimbursedTotal,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{headerName:"Initial Revenue",field:"initialRevenue",valueFormatter:t=>{var i;return(0,S.oBD)(null===(i=t.data)||void 0===i?void 0:i.initialRevenue,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{headerName:"Factor",field:"factor",valueFormatter:t=>{var i;return(0,S.oBD)(null===(i=t.data)||void 0===i?void 0:i.factor,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{headerName:"Retail Bill",field:"retailBill",valueFormatter:t=>{var i;return(0,S.oBD)(null===(i=t.data)||void 0===i?void 0:i.retailBill,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{headerName:"Est Margin",field:"estMargin",valueFormatter:t=>{var i;return(0,S.oBD)(null===(i=t.data)||void 0===i?void 0:i.estMargin,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{headerName:"Roi",field:"roi",valueFormatter:t=>{var i;return(0,S.oBD)(null===(i=t.data)||void 0===i?void 0:i.roi,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{headerName:"Attorney Paid",field:"attorneyPaid",valueFormatter:t=>{var i;return(0,S.oBD)(null===(i=t.data)||void 0===i?void 0:i.attorneyPaid,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{headerName:"Percent of Retail",field:"percentOfRetail",valueFormatter:t=>{var i;return(0,S.oBD)(null===(i=t.data)||void 0===i?void 0:i.percentOfRetail,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{headerName:"Reimbursed From PCR",field:"reimbursedFromPCR",valueFormatter:t=>{var i;return(0,S.oBD)(null===(i=t.data)||void 0===i?void 0:i.reimbursedFromPCR,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{headerName:"Ingredient Cost",field:"ingredientCost",valueFormatter:t=>{var i;return(0,S.oBD)(null===(i=t.data)||void 0===i?void 0:i.ingredientCost,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{headerName:"Dispensing Cost",field:"dispensingCost",valueFormatter:t=>{var i;return(0,S.oBD)(null===(i=t.data)||void 0===i?void 0:i.dispensingCost,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{headerName:"Administrative Cost",field:"administrativeCost",valueFormatter:t=>{var i;return(0,S.oBD)(null===(i=t.data)||void 0===i?void 0:i.administrativeCost,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{headerName:"Co Pay",field:"coPay",valueFormatter:t=>{var i;return(0,S.oBD)(null===(i=t.data)||void 0===i?void 0:i.coPay,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{headerName:"Total Cost",field:"totalCost",valueFormatter:t=>{var i;return(0,S.oBD)(null===(i=t.data)||void 0===i?void 0:i.totalCost,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{headerName:"Average Wholesale Price",field:"averageWholesalePrice",valueFormatter:t=>{var i;return(0,S.oBD)(null===(i=t.data)||void 0===i?void 0:i.averageWholesalePrice,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{headerName:"Weighted Average Cost",field:"weightedAverageCost",valueFormatter:t=>{var i;return(0,S.oBD)(null===(i=t.data)||void 0===i?void 0:i.weightedAverageCost,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{headerName:"Average Sale Price",field:"averageSalePrice",valueFormatter:t=>{var i;return(0,S.oBD)(null===(i=t.data)||void 0===i?void 0:i.averageSalePrice,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{headerName:"Invoice Cost",field:"invoiceCost",valueFormatter:t=>{var i;return(0,S.oBD)(null===(i=t.data)||void 0===i?void 0:i.invoiceCost,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{headerName:"Usual and Customary",field:"usualAndCustomary",valueFormatter:t=>{var i;return(0,S.oBD)(null===(i=t.data)||void 0===i?void 0:i.usualAndCustomary,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{field:"nationalDrugCode",filter:"agTextColumnFilter"},{field:"procedureVendorId",filter:"agTextColumnFilter",hide:!0}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var r;t.includes(null===(r=i.data)||void 0===r?void 0:r.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-case-account-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(N.x,5),2&t){let r;e.iGM(r=e.CRH())&&(i.tableView=r.first)}},inputs:{autoHeight:"autoHeight",caseAccounts:"caseAccounts"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.caseAccounts)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[N.x],encapsulation:2}),s})();function Lv(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-case-account-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","caseAccount_edit")("formControl",t.formControl)("caseAccount",t.caseAccount)}}const Gv=function(){return{}};function $v(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-case-account-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","caseAccount_create")("formControl",t.formControl)("caseAccount",e.DdM(3,Gv))}}function Rv(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-case-account-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(u.ref.close())}),e.qZA()}2&s&&e.Q6J("caseAccounts",o.data.items)}let Vv=(()=>{class s extends I.fS{constructor(t){super(),this.store=t,this.store.loadCaseAccountsEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.caseAccounts$.pipe((0,h.w)(i=>(0,T.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(As))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","caseAccount","send","close"],[1,"w-full","h-full","bg-white",3,"caseAccounts","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,Lv,2,3,"ng-template",null,1,e.W1O),e.YNc(3,$v,1,4,"ng-template",null,2,e.W1O),e.YNc(5,Rv,1,1,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",u)("editTemplate",r)("createTemplate",l)("key",i.field.key)}},dependencies:[x.JJ,x.oH,J.$,Ga,$a],encapsulation:2}),s})();function Qv(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-case-account-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","caseAccount_edit")("caseAccount",t.value)}}const Uv=function(){return{}};function Jv(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-case-account-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","caseAccount_create")("caseAccount",e.DdM(2,Uv))}function jv(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-case-account-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(null==u.ref?null:u.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("caseAccounts",t.items)}}let zv=(()=>{class s extends Y{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:6,consts:[[3,"data","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","caseAccount","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","caseAccounts","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,Qv,1,2,"ng-template",null,1,e.W1O),e.YNc(3,Jv,1,3,"ng-template",null,2,e.W1O),e.YNc(5,jv,1,2,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("data",i.data)("title",i.to.title)("onSave",i.onSave)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[ee,Ga,$a],encapsulation:2}),s})(),qv=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[As],imports:[w.ez,R.F,x.UX,V.o,H.u,Q.P,U.t,Z,j.h,K.G,I.X0.forChild({types:[{name:"case-account-select",component:Vv,wrappers:["form-field"]},{name:"case-account-grid",component:zv}]})]}),s})(),Hv=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[qv]}),s})();class mt extends y.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class Kv extends mt{constructor(o,t,i){super("ValidateCaseAccountPaymentExcelDataAction"),this.valid=!1,this.excelData=o,this.payments=t,this.caseAccounts=i}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name),this.validationContext.addRule(new f.mi(`paymentName_${i}_is_valid}`,"Payment Is Not Valid","payment.name",t.payment,this.payments,!0)),this.validationContext.addRule(new f.mi(`caseAccountName_${i}_is_valid}`,"Case Account Is Not Valid","caseAccount.name",t.caseAccount,this.caseAccounts,!0))}),this.validationContext.addRule(new f.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof f.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(r=>r.name),newNames:[i.newName]}):i instanceof f.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,T.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class kv extends f.wS{constructor(o,t,i,r,l){super(o,t,i,r,l,!0)}}class Zv extends f.ul{constructor(o,t,i,r=!1){super(o,t,r),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new f.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new kv("name","The caseaccountpayment name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class Bv extends mt{constructor(o){super("CreateCaseAccountPaymentAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new Zv("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateCaseAccountPayment({input:this.input}).pipe((0,h.w)(o=>(0,ie.of)(o.data.created)))}}class Yv extends mt{constructor(o){super("UpdateCaseAccountPaymentsAction"),this.caseAccountPayments=o}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.caseAccountPayments,!0))}performAction(){this.response=this.businessProvider.data.userUpdateCaseAccountPayments({input:{caseAccountPayments:this.caseAccountPayments}}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}class Xv extends mt{constructor(o,t){super("UpdateCaseAccountPaymentAction"),this.caseAccountPayment=o,this.caseAccountPaymentId=t}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.caseAccountPayment,!0)).addRule(new f.xF("Id","Id should be a CUID and not null",this.caseAccountPaymentId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateCaseAccountPayment({caseAccountPaymentId:this.caseAccountPaymentId,input:this.caseAccountPayment}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}let Ra=(()=>{class s extends y.nH{constructor(t,i,r){super("NotificationService.CaseAccountPaymentBusinessProviderService",t,r),this.data=i}createCaseAccountPayment(t){const i=new Bv(t);return i.Do(this),i.response}updateCaseAccountPayment(t,i){const r=new Xv(t,i);return r.Do(this),r.response}importCaseAccountPayments(t){const i=new Yv(t);return i.Do(this),i.response}validateCaseAccountPaymentExcelData(t,i,r){const l=new Kv(t,i,r);return l.Do(this),l.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(O.ed),e.LFG(E.q),e.LFG(y.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),eb=(()=>{class s extends y.nH{constructor(t,i,r){super("CaseAccountPaymentService",r,t),this.businessProvider=i}createCaseAccountPayment(t){const i=Object.fromEntries(Object.entries(t).filter(([r,l])=>null!==l));return this.businessProvider.createCaseAccountPayment(i)}updateCaseAccountPayment(t,i){return this.businessProvider.updateCaseAccountPayment(t,i)}importCaseAccountPayments(t){return this.businessProvider.importCaseAccountPayments(t)}validateCaseAccountPaymentExcelData(t,i,r){return this.businessProvider.validateCaseAccountPaymentExcelData(t,i,r)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(Ra,8),e.LFG(Ra),e.LFG(O.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),Fs=(()=>{class s extends g.m1{constructor(t,i,r,l,u,P){if(super({loading:!1,caseAccountPayments:[],done:!1,searchQuery:"",formName:void 0,paymentId:void 0,caseAccountId:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=r,this.toast=l,this.formService=u,this.caseAccountPaymentService=P,this.errors$=this.select(n=>n.errors),this.loading$=this.select(n=>n.loading),this.done$=this.select(n=>n.done),this.item$=this.select(n=>n.item),this.caseAccountPayments$=this.select(n=>n.caseAccountPayments),this.payments$=this.select(n=>n.payments||[]),this.caseAccounts$=this.select(n=>n.caseAccounts||[]),this.paymentId$=this.select(n=>n.paymentId),this.caseAccountId$=this.select(n=>n.caseAccountId),this.paging$=this.select(n=>n.paging),this.searchQuery$=this.select(n=>n.searchQuery),this.formName$=this.select(n=>n.formName),this.actionResult$=this.select(this.item$,this.done$,(n,a)=>({item:n,done:a}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.caseAccountPayments$,this.payments$,this.caseAccounts$,(n,a,m,p,_,v,D)=>({errors:n,loading:a,item:m,formName:p,caseAccountPayments:_,payments:v,caseAccounts:D}),{debounce:!0}),this.input$=this.select(this.paging$,this.paymentId$,this.caseAccountId$,this.searchQuery$,(n,a,m,p)=>({limit:n.limit,skip:n.skip,name:p,paymentId:a,caseAccountId:m,total:n.total})),this.setFormName=this.updater((n,a)=>Object.assign(Object.assign({},n),{formName:a})),this.setPaymentId=this.updater((n,a)=>Object.assign(Object.assign({},n),{paymentId:a})),this.setCaseAccountId=this.updater((n,a)=>Object.assign(Object.assign({},n),{caseAccountId:a})),this.filterPayments=n=>this.data.userSelectPayments({input:{name:n}}).pipe((0,g._b)(a=>{let m=a.data.items;return this.patchState({payments:m}),m},a=>this.patchState({errors:a.graphQLErrors?a.graphQLErrors:a})),(0,B.U)(a=>a.data.items)),this.filterCaseAccounts=n=>this.data.userSelectCaseAccounts({input:{name:n}}).pipe((0,g._b)(a=>{let m=a.data.items;return this.patchState({caseAccounts:m}),m},a=>this.patchState({errors:a.graphQLErrors?a.graphQLErrors:a})),(0,B.U)(a=>a.data.items)),this.addPayment=this.updater((n,a)=>Object.assign(Object.assign({},n),{payments:n.payments.concat(a)})),this.addCaseAccount=this.updater((n,a)=>Object.assign(Object.assign({},n),{caseAccounts:n.caseAccounts.concat(a)})),this.setItem=this.updater((n,a)=>Object.assign(Object.assign({},n),{item:a})),this.addNewCaseAccountPayment=this.updater((n,a)=>Object.assign(Object.assign({},n),{caseAccountPayments:[...n.caseAccountPayments,a]})),this.updateCaseAccountPayment=this.updater((n,a)=>Object.assign(Object.assign({},n),{caseAccountPayments:n.caseAccountPayments.map(m=>m.id===a.id?a:m)})),this.addCaseAccountPayments=this.updater((n,a)=>Object.assign(Object.assign({},n),{caseAccountPayments:n.caseAccountPayments.concat(a)})),this.updateCaseAccountPayments=this.updater((n,a)=>Object.assign(Object.assign({},n),{caseAccountPayments:n.caseAccountPayments.map(m=>a.find(_=>_.id===m.id)||m)})),this.setSearchQuery=this.updater((n,a)=>Object.assign(Object.assign({},n),{searchQuery:a})),this.loadCaseAccountPaymentEffect=this.effect(n=>n.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(a=>this.data.userCaseAccountPayment({caseAccountPaymentId:a}).pipe((0,g._b)(m=>{this.patchState({item:m.data.item,errors:m.errors,loading:!1})},m=>this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})))))),this.loadCaseAccountPaymentsEffect=this.effect(n=>n.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.input$),(0,h.w)(([a,m])=>this.data.userCaseAccountPayments({input:m}).pipe((0,g._b)(p=>this.patchState({paging:{limit:m.limit,skip:m.skip,total:p.data.count.total},caseAccountPayments:p.data.items,errors:p.errors,loading:!1}),p=>this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})))))),this.createCaseAccountPaymentEffect=this.effect(n=>n.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(a=>this.caseAccountPaymentService.createCaseAccountPayment(Object.assign({},a)).pipe((0,g._b)(m=>{this.addNewCaseAccountPayment(m),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:m,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},m=>{m.graphQLErrors?(this.toast.error(m.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})):(this.toast.error(m.Message),this.formService.setErrors(m.Data))}))))),this.updateCaseAccountPaymentEffect=this.effect(n=>n.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([a,m])=>this.caseAccountPaymentService.updateCaseAccountPayment(a,a.id).pipe((0,g._b)(p=>{this.updateCaseAccountPayment(p),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:p,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},p=>{p.graphQLErrors?(this.toast.error(p.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})):(this.toast.error(p.Message),this.formService.setErrors(p.Data))}))))),this.deleteCaseAccountPaymentEffect=this.effect(n=>n.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([a,m])=>this.data.userDeleteCaseAccountPayment({caseAccountPaymentId:m.id}).pipe((0,g._b)(p=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:p.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},p=>{p.graphQLErrors?(this.toast.error(p.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})):(this.toast.error(p.Message),this.formService.setErrors(p.Data))}))))),this.importExcelEffect=this.effect(n=>n.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(a=>this.caseAccountPaymentService.importCaseAccountPayments(a).pipe((0,te.K)(m=>{var p;return this.toast.error(null!==(p=m.Message)&&void 0!==p?p:"Failed to save",{duration:3e3}),k.E}),(0,C.b)(m=>{const p=JSON.parse(m.created),_=JSON.parse(m.updated),v=JSON.parse(m.failed),D=p.length+_.length+v.length;this.addCaseAccountPayments(p),this.updateCaseAccountPayments(_),this.toast.success(`${p.length} created, ${_.length} updated, ${v.length} failed of total ${D}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("caseAccountPaymentId")?(this.route.snapshot.paramMap.get("caseAccountPaymentId"),this.setFormName("caseAccountPayment_edit")):this.setFormName("caseAccountPayment_create"),this.route.snapshot.paramMap.has("paymentId")){var c=this.route.snapshot.paramMap.get("paymentId");this.setPaymentId(c)}if(this.route.snapshot.paramMap.has("caseAccountId")){var d=this.route.snapshot.paramMap.get("caseAccountId");this.setCaseAccountId(d)}}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.caseAccountPaymentService.validateCaseAccountPaymentExcelData(t,i.payments,i.caseAccounts)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(E.q),e.LFG(A.F0),e.LFG(A.gz),e.LFG(X.F),e.LFG(q.o),e.LFG(eb))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function tb(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close.emit())})("formIsReady",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.caseAccountPayment)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let Va=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"caseAccountPayment_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.caseAccountPayment=i.item})):t.formName&&t.formName.currentValue&&"caseAccountPayment_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadCaseAccountPaymentEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.caseAccountPayment=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Fs),e.Y36(A.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-case-account-payment-form"]],inputs:{caseAccountPayment:"caseAccountPayment",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,tb,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[w.O5,z.M,w.Ov],encapsulation:2}),s})(),Qa=(()=>{class s{constructor(){this.autoHeight=!1,this.caseAccountPayments=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[{field:"payment.name",headerName:"Payment",filter:"agTextColumnFilter"},{field:"caseAccount.name",headerName:"Case Account",filter:"agTextColumnFilter"},{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{headerName:"Amount Applied",field:"amountApplied",valueFormatter:t=>{var i;return(0,S.oBD)(null===(i=t.data)||void 0===i?void 0:i.amountApplied,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{field:"paymentId",filter:"agTextColumnFilter",hide:!0},{field:"caseAccountId",filter:"agTextColumnFilter",hide:!0}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var r;t.includes(null===(r=i.data)||void 0===r?void 0:r.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-case-account-payment-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(N.x,5),2&t){let r;e.iGM(r=e.CRH())&&(i.tableView=r.first)}},inputs:{autoHeight:"autoHeight",caseAccountPayments:"caseAccountPayments"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.caseAccountPayments)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[N.x],encapsulation:2}),s})();function ib(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-case-account-payment-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","caseAccountPayment_edit")("formControl",t.formControl)("caseAccountPayment",t.caseAccountPayment)}}const sb=function(){return{}};function ob(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-case-account-payment-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","caseAccountPayment_create")("formControl",t.formControl)("caseAccountPayment",e.DdM(3,sb))}}function rb(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-case-account-payment-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(u.ref.close())}),e.qZA()}2&s&&e.Q6J("caseAccountPayments",o.data.items)}let ab=(()=>{class s extends I.fS{constructor(t){super(),this.store=t,this.store.loadCaseAccountPaymentsEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.caseAccountPayments$.pipe((0,h.w)(i=>(0,T.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Fs))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","caseAccountPayment","send","close"],[1,"w-full","h-full","bg-white",3,"caseAccountPayments","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,ib,2,3,"ng-template",null,1,e.W1O),e.YNc(3,ob,1,4,"ng-template",null,2,e.W1O),e.YNc(5,rb,1,1,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",u)("editTemplate",r)("createTemplate",l)("key",i.field.key)}},dependencies:[x.JJ,x.oH,J.$,Va,Qa],encapsulation:2}),s})();function nb(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-case-account-payment-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","caseAccountPayment_edit")("caseAccountPayment",t.value)}}const lb=function(){return{}};function cb(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-case-account-payment-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","caseAccountPayment_create")("caseAccountPayment",e.DdM(2,lb))}function db(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-case-account-payment-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(null==u.ref?null:u.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("caseAccountPayments",t.items)}}let ub=(()=>{class s extends Y{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","caseAccountPayment","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","caseAccountPayments","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,nb,1,2,"ng-template",null,1,e.W1O),e.YNc(3,cb,1,3,"ng-template",null,2,e.W1O),e.YNc(5,db,1,2,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[ee,Va,Qa],encapsulation:2}),s})(),mb=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[Fs],imports:[w.ez,R.F,x.UX,V.o,H.u,Q.P,U.t,Z,j.h,K.G,I.X0.forChild({types:[{name:"case-account-payment-select",component:ab,wrappers:["form-field"]},{name:"case-account-payment-grid",component:ub}]})]}),s})(),pb=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[mb]}),s})();class pt extends y.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class hb extends pt{constructor(o,t,i){super("ValidateCasePreAccidentExcelDataAction"),this.valid=!1,this.excelData=o,this.legalCases=t,this.legalCaseId=i}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name),this.validationContext.addRule(new f.mi(`legalCaseName_${i}_is_valid}`,"Legal Case Is Not Valid","legalCase.name",t.legalCase,this.legalCases,!0))}),this.legalCaseId&&this.excelData.map(t=>(t.legalCaseId=this.legalCaseId,t)),this.validationContext.addRule(new f.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof f.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(r=>r.name),newNames:[i.newName]}):i instanceof f.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,T.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class fb extends f.wS{constructor(o,t,i,r,l){super(o,t,i,r,l,!0)}}class _b extends f.ul{constructor(o,t,i,r=!1){super(o,t,r),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new f.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new fb("name","The casepreaccident name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class gb extends pt{constructor(o){super("CreateCasePreAccidentAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new _b("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateCasePreAccident({input:this.input}).pipe((0,h.w)(o=>(0,ie.of)(o.data.created)))}}class Cb extends pt{constructor(o,t){super("UpdateCasePreAccidentsAction"),this.casePreAccidents=o,this.legalCaseId=t}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.casePreAccidents,!0))}performAction(){this.response=this.businessProvider.data.userUpdateCasePreAccidents({input:{casePreAccidents:this.casePreAccidents}}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}class Sb extends pt{constructor(o,t){super("UpdateCasePreAccidentAction"),this.casePreAccident=o,this.casePreAccidentId=t}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.casePreAccident,!0)).addRule(new f.xF("Id","Id should be a CUID and not null",this.casePreAccidentId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateCasePreAccident({casePreAccidentId:this.casePreAccidentId,input:this.casePreAccident}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}let Ua=(()=>{class s extends y.nH{constructor(t,i,r){super("NotificationService.CasePreAccidentBusinessProviderService",t,r),this.data=i}createCasePreAccident(t){const i=new gb(t);return i.Do(this),i.response}updateCasePreAccident(t,i){const r=new Sb(t,i);return r.Do(this),r.response}importCasePreAccidents(t){const i=new Cb(t);return i.Do(this),i.response}validateCasePreAccidentExcelData(t,i,r){const l=new hb(t,i,r);return l.Do(this),l.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(O.ed),e.LFG(E.q),e.LFG(y.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),vb=(()=>{class s extends y.nH{constructor(t,i,r){super("CasePreAccidentService",r,t),this.businessProvider=i}createCasePreAccident(t){const i=Object.fromEntries(Object.entries(t).filter(([r,l])=>null!==l));return this.businessProvider.createCasePreAccident(i)}updateCasePreAccident(t,i){return this.businessProvider.updateCasePreAccident(t,i)}importCasePreAccidents(t){return this.businessProvider.importCasePreAccidents(t)}validateCasePreAccidentExcelData(t,i,r){return this.businessProvider.validateCasePreAccidentExcelData(t,i,r)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(Ua,8),e.LFG(Ua),e.LFG(O.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),Ds=(()=>{class s extends g.m1{constructor(t,i,r,l,u,P){if(super({loading:!1,casePreAccidents:[],done:!1,searchQuery:"",formName:void 0,legalCaseId:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=r,this.toast=l,this.formService=u,this.casePreAccidentService=P,this.errors$=this.select(d=>d.errors),this.loading$=this.select(d=>d.loading),this.done$=this.select(d=>d.done),this.item$=this.select(d=>d.item),this.casePreAccidents$=this.select(d=>d.casePreAccidents),this.legalCases$=this.select(d=>d.legalCases||[]),this.legalCaseId$=this.select(d=>d.legalCaseId),this.paging$=this.select(d=>d.paging),this.searchQuery$=this.select(d=>d.searchQuery),this.formName$=this.select(d=>d.formName),this.actionResult$=this.select(this.item$,this.done$,(d,n)=>({item:d,done:n}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.casePreAccidents$,this.legalCases$,this.legalCaseId$,(d,n,a,m,p,_,v)=>({errors:d,loading:n,item:a,formName:m,casePreAccidents:p,legalCases:_,legalCaseId:v}),{debounce:!0}),this.input$=this.select(this.paging$,this.legalCaseId$,this.searchQuery$,(d,n,a)=>({limit:d.limit,skip:d.skip,name:a,legalCaseId:n,total:d.total})),this.setFormName=this.updater((d,n)=>Object.assign(Object.assign({},d),{formName:n})),this.setLegalCaseId=this.updater((d,n)=>Object.assign(Object.assign({},d),{legalCaseId:n})),this.filterLegalCases=d=>this.data.userSelectLegalCases({input:{name:d}}).pipe((0,g._b)(n=>{let a=n.data.items;return this.patchState({legalCases:a}),a},n=>this.patchState({errors:n.graphQLErrors?n.graphQLErrors:n})),(0,B.U)(n=>n.data.items)),this.addLegalCase=this.updater((d,n)=>Object.assign(Object.assign({},d),{legalCases:d.legalCases.concat(n)})),this.setItem=this.updater((d,n)=>Object.assign(Object.assign({},d),{item:n})),this.addNewCasePreAccident=this.updater((d,n)=>Object.assign(Object.assign({},d),{casePreAccidents:[...d.casePreAccidents,n]})),this.updateCasePreAccident=this.updater((d,n)=>Object.assign(Object.assign({},d),{casePreAccidents:d.casePreAccidents.map(a=>a.id===n.id?n:a)})),this.addCasePreAccidents=this.updater((d,n)=>Object.assign(Object.assign({},d),{casePreAccidents:d.casePreAccidents.concat(n)})),this.updateCasePreAccidents=this.updater((d,n)=>Object.assign(Object.assign({},d),{casePreAccidents:d.casePreAccidents.map(a=>n.find(p=>p.id===a.id)||a)})),this.setSearchQuery=this.updater((d,n)=>Object.assign(Object.assign({},d),{searchQuery:n})),this.loadCasePreAccidentEffect=this.effect(d=>d.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(n=>this.data.userCasePreAccident({casePreAccidentId:n}).pipe((0,g._b)(a=>{this.patchState({item:a.data.item,errors:a.errors,loading:!1})},a=>this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})))))),this.loadCasePreAccidentsEffect=this.effect(d=>d.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.input$),(0,h.w)(([n,a])=>this.data.userCasePreAccidents({input:a}).pipe((0,g._b)(m=>this.patchState({paging:{limit:a.limit,skip:a.skip,total:m.data.count.total},casePreAccidents:m.data.items,errors:m.errors,loading:!1}),m=>this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})))))),this.createCasePreAccidentEffect=this.effect(d=>d.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(n=>this.casePreAccidentService.createCasePreAccident(Object.assign({},n)).pipe((0,g._b)(a=>{this.addNewCasePreAccident(a),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:a,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.updateCasePreAccidentEffect=this.effect(d=>d.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([n,a])=>this.casePreAccidentService.updateCasePreAccident(n,n.id).pipe((0,g._b)(m=>{this.updateCasePreAccident(m),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:m,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},m=>{m.graphQLErrors?(this.toast.error(m.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})):(this.toast.error(m.Message),this.formService.setErrors(m.Data))}))))),this.deleteCasePreAccidentEffect=this.effect(d=>d.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([n,a])=>this.data.userDeleteCasePreAccident({casePreAccidentId:a.id}).pipe((0,g._b)(m=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:m.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},m=>{m.graphQLErrors?(this.toast.error(m.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})):(this.toast.error(m.Message),this.formService.setErrors(m.Data))}))))),this.importExcelEffect=this.effect(d=>d.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(n=>this.casePreAccidentService.importCasePreAccidents(n).pipe((0,te.K)(a=>{var m;return this.toast.error(null!==(m=a.Message)&&void 0!==m?m:"Failed to save",{duration:3e3}),k.E}),(0,C.b)(a=>{const m=JSON.parse(a.created),p=JSON.parse(a.updated),_=JSON.parse(a.failed),v=m.length+p.length+_.length;this.addCasePreAccidents(m),this.updateCasePreAccidents(p),this.toast.success(`${m.length} created, ${p.length} updated, ${_.length} failed of total ${v}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("casePreAccidentId")?(this.route.snapshot.paramMap.get("casePreAccidentId"),this.setFormName("casePreAccident_edit")):this.setFormName("casePreAccident_create"),this.route.snapshot.paramMap.has("legalCaseId")){var c=this.route.snapshot.paramMap.get("legalCaseId");this.setLegalCaseId(c)}}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>{const r=i.legalCaseId;return console.log("legalCaseId",r),this.casePreAccidentService.validateCasePreAccidentExcelData(t,i.legalCases,r)}))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(E.q),e.LFG(A.F0),e.LFG(A.gz),e.LFG(X.F),e.LFG(q.o),e.LFG(vb))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function bb(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close.emit())})("formIsReady",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.casePreAccident)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let Ja=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"casePreAccident_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.casePreAccident=i.item})):t.formName&&t.formName.currentValue&&"casePreAccident_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadCasePreAccidentEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.casePreAccident=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Ds),e.Y36(A.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-case-pre-accident-form"]],inputs:{casePreAccident:"casePreAccident",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,bb,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[w.O5,z.M,w.Ov],encapsulation:2}),s})(),ja=(()=>{class s{constructor(){this.autoHeight=!1,this.casePreAccidents=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[{field:"legalCase.name",headerName:"Legal Case",filter:"agTextColumnFilter"},{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{field:"legalCaseId",filter:"agTextColumnFilter",hide:!0},{field:"accidentDate",filter:"agTextColumnFilter"},{field:"injuries",filter:"agTextColumnFilter"},{field:"symptoms",filter:"agTextColumnFilter"},{field:"dateCreated",filter:"agDateColumnFilter"},{headerName:"Removed",field:"removed",filter:"agSetColumnFilter",cellRenderer:"checkboxRenderer"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var r;t.includes(null===(r=i.data)||void 0===r?void 0:r.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-case-pre-accident-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(N.x,5),2&t){let r;e.iGM(r=e.CRH())&&(i.tableView=r.first)}},inputs:{autoHeight:"autoHeight",casePreAccidents:"casePreAccidents"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.casePreAccidents)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[N.x],encapsulation:2}),s})();function Tb(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-case-pre-accident-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","casePreAccident_edit")("formControl",t.formControl)("casePreAccident",t.casePreAccident)}}const yb=function(){return{}};function wb(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-case-pre-accident-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","casePreAccident_create")("formControl",t.formControl)("casePreAccident",e.DdM(3,yb))}}function xb(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-case-pre-accident-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(u.ref.close())}),e.qZA()}2&s&&e.Q6J("casePreAccidents",o.data.items)}let Nb=(()=>{class s extends I.fS{constructor(t){super(),this.store=t,this.store.loadCasePreAccidentsEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.casePreAccidents$.pipe((0,h.w)(i=>(0,T.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Ds))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","casePreAccident","send","close"],[1,"w-full","h-full","bg-white",3,"casePreAccidents","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,Tb,2,3,"ng-template",null,1,e.W1O),e.YNc(3,wb,1,4,"ng-template",null,2,e.W1O),e.YNc(5,xb,1,1,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",u)("editTemplate",r)("createTemplate",l)("key",i.field.key)}},dependencies:[x.JJ,x.oH,J.$,Ja,ja],encapsulation:2}),s})();function Ab(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-case-pre-accident-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","casePreAccident_edit")("casePreAccident",t.value)}}const Fb=function(){return{}};function Db(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-case-pre-accident-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","casePreAccident_create")("casePreAccident",e.DdM(2,Fb))}function Ib(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-case-pre-accident-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(null==u.ref?null:u.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("casePreAccidents",t.items)}}let Pb=(()=>{class s extends Y{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","casePreAccident","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","casePreAccidents","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,Ab,1,2,"ng-template",null,1,e.W1O),e.YNc(3,Db,1,3,"ng-template",null,2,e.W1O),e.YNc(5,Ib,1,2,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[ee,Ja,ja],encapsulation:2}),s})(),Wb=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[Ds],imports:[w.ez,R.F,x.UX,V.o,H.u,Q.P,U.t,Z,j.h,K.G,I.X0.forChild({types:[{name:"case-pre-accident-select",component:Nb,wrappers:["form-field"]},{name:"case-pre-accident-grid",component:Pb}]})]}),s})(),Mb=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[Wb]}),s})();class ht extends y.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class Eb extends ht{constructor(o,t){super("ValidateCasePreInjuryExcelDataAction"),this.valid=!1,this.excelData=o,this.legalCases=t}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name),this.validationContext.addRule(new f.mi(`legalCaseName_${i}_is_valid}`,"Legal Case Is Not Valid","legalCase.name",t.legalCase,this.legalCases,!0))}),this.validationContext.addRule(new f.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof f.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(r=>r.name),newNames:[i.newName]}):i instanceof f.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,T.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class Ob extends f.wS{constructor(o,t,i,r,l){super(o,t,i,r,l,!0)}}class Lb extends f.ul{constructor(o,t,i,r=!1){super(o,t,r),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new f.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new Ob("name","The casepreinjury name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class Gb extends ht{constructor(o){super("CreateCasePreInjuryAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new Lb("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateCasePreInjury({input:this.input}).pipe((0,h.w)(o=>(0,ie.of)(o.data.created)))}}class $b extends ht{constructor(o){super("UpdateCasePreInjuriesAction"),this.casePreInjuries=o}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.casePreInjuries,!0))}performAction(){this.response=this.businessProvider.data.userUpdateCasePreInjuries({input:{casePreInjuries:this.casePreInjuries}}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}class Rb extends ht{constructor(o,t){super("UpdateCasePreInjuryAction"),this.casePreInjury=o,this.casePreInjuryId=t}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.casePreInjury,!0)).addRule(new f.xF("Id","Id should be a CUID and not null",this.casePreInjuryId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateCasePreInjury({casePreInjuryId:this.casePreInjuryId,input:this.casePreInjury}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}let za=(()=>{class s extends y.nH{constructor(t,i,r){super("NotificationService.CasePreInjuryBusinessProviderService",t,r),this.data=i}createCasePreInjury(t){const i=new Gb(t);return i.Do(this),i.response}updateCasePreInjury(t,i){const r=new Rb(t,i);return r.Do(this),r.response}importCasePreInjuries(t){const i=new $b(t);return i.Do(this),i.response}validateCasePreInjuryExcelData(t,i){const r=new Eb(t,i);return r.Do(this),r.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(O.ed),e.LFG(E.q),e.LFG(y.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),Vb=(()=>{class s extends y.nH{constructor(t,i,r){super("CasePreInjuryService",r,t),this.businessProvider=i}createCasePreInjury(t){const i=Object.fromEntries(Object.entries(t).filter(([r,l])=>null!==l));return this.businessProvider.createCasePreInjury(i)}updateCasePreInjury(t,i){return this.businessProvider.updateCasePreInjury(t,i)}importCasePreInjuries(t){return this.businessProvider.importCasePreInjuries(t)}validateCasePreInjuryExcelData(t,i){return this.businessProvider.validateCasePreInjuryExcelData(t,i)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(za,8),e.LFG(za),e.LFG(O.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),Is=(()=>{class s extends g.m1{constructor(t,i,r,l,u,P){if(super({loading:!1,casePreInjuries:[],done:!1,searchQuery:"",formName:void 0,legalCaseId:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=r,this.toast=l,this.formService=u,this.casePreInjuryService=P,this.errors$=this.select(d=>d.errors),this.loading$=this.select(d=>d.loading),this.done$=this.select(d=>d.done),this.item$=this.select(d=>d.item),this.casePreInjuries$=this.select(d=>d.casePreInjuries),this.legalCases$=this.select(d=>d.legalCases||[]),this.legalCaseId$=this.select(d=>d.legalCaseId),this.paging$=this.select(d=>d.paging),this.searchQuery$=this.select(d=>d.searchQuery),this.formName$=this.select(d=>d.formName),this.actionResult$=this.select(this.item$,this.done$,(d,n)=>({item:d,done:n}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.casePreInjuries$,this.legalCases$,(d,n,a,m,p,_)=>({errors:d,loading:n,item:a,formName:m,casePreInjuries:p,legalCases:_}),{debounce:!0}),this.input$=this.select(this.paging$,this.legalCaseId$,this.searchQuery$,(d,n,a)=>({limit:d.limit,skip:d.skip,name:a,legalCaseId:n,total:d.total})),this.setFormName=this.updater((d,n)=>Object.assign(Object.assign({},d),{formName:n})),this.setLegalCaseId=this.updater((d,n)=>Object.assign(Object.assign({},d),{legalCaseId:n})),this.filterLegalCases=d=>this.data.userSelectLegalCases({input:{name:d}}).pipe((0,g._b)(n=>{let a=n.data.items;return this.patchState({legalCases:a}),a},n=>this.patchState({errors:n.graphQLErrors?n.graphQLErrors:n})),(0,B.U)(n=>n.data.items)),this.addLegalCase=this.updater((d,n)=>Object.assign(Object.assign({},d),{legalCases:d.legalCases.concat(n)})),this.setItem=this.updater((d,n)=>Object.assign(Object.assign({},d),{item:n})),this.addNewCasePreInjury=this.updater((d,n)=>Object.assign(Object.assign({},d),{casePreInjuries:[...d.casePreInjuries,n]})),this.updateCasePreInjury=this.updater((d,n)=>Object.assign(Object.assign({},d),{casePreInjuries:d.casePreInjuries.map(a=>a.id===n.id?n:a)})),this.addCasePreInjuries=this.updater((d,n)=>Object.assign(Object.assign({},d),{casePreInjuries:d.casePreInjuries.concat(n)})),this.updateCasePreInjuries=this.updater((d,n)=>Object.assign(Object.assign({},d),{casePreInjuries:d.casePreInjuries.map(a=>n.find(p=>p.id===a.id)||a)})),this.setSearchQuery=this.updater((d,n)=>Object.assign(Object.assign({},d),{searchQuery:n})),this.loadCasePreInjuryEffect=this.effect(d=>d.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(n=>this.data.userCasePreInjury({casePreInjuryId:n}).pipe((0,g._b)(a=>{this.patchState({item:a.data.item,errors:a.errors,loading:!1})},a=>this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})))))),this.loadCasePreInjuriesEffect=this.effect(d=>d.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.input$),(0,h.w)(([n,a])=>this.data.userCasePreInjuries({input:a}).pipe((0,g._b)(m=>this.patchState({paging:{limit:a.limit,skip:a.skip,total:m.data.count.total},casePreInjuries:m.data.items,errors:m.errors,loading:!1}),m=>this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})))))),this.createCasePreInjuryEffect=this.effect(d=>d.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(n=>this.casePreInjuryService.createCasePreInjury(Object.assign({},n)).pipe((0,g._b)(a=>{this.addNewCasePreInjury(a),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:a,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.updateCasePreInjuryEffect=this.effect(d=>d.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([n,a])=>this.casePreInjuryService.updateCasePreInjury(n,n.id).pipe((0,g._b)(m=>{this.updateCasePreInjury(m),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:m,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},m=>{m.graphQLErrors?(this.toast.error(m.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})):(this.toast.error(m.Message),this.formService.setErrors(m.Data))}))))),this.deleteCasePreInjuryEffect=this.effect(d=>d.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([n,a])=>this.data.userDeleteCasePreInjury({casePreInjuryId:a.id}).pipe((0,g._b)(m=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:m.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},m=>{m.graphQLErrors?(this.toast.error(m.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})):(this.toast.error(m.Message),this.formService.setErrors(m.Data))}))))),this.importExcelEffect=this.effect(d=>d.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(n=>this.casePreInjuryService.importCasePreInjuries(n).pipe((0,te.K)(a=>{var m;return this.toast.error(null!==(m=a.Message)&&void 0!==m?m:"Failed to save",{duration:3e3}),k.E}),(0,C.b)(a=>{const m=JSON.parse(a.created),p=JSON.parse(a.updated),_=JSON.parse(a.failed),v=m.length+p.length+_.length;this.addCasePreInjuries(m),this.updateCasePreInjuries(p),this.toast.success(`${m.length} created, ${p.length} updated, ${_.length} failed of total ${v}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("casePreInjuryId")?(this.route.snapshot.paramMap.get("casePreInjuryId"),this.setFormName("casePreInjury_edit")):this.setFormName("casePreInjury_create"),this.route.snapshot.paramMap.has("legalCaseId")){var c=this.route.snapshot.paramMap.get("legalCaseId");this.setLegalCaseId(c)}}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.casePreInjuryService.validateCasePreInjuryExcelData(t,i.legalCases)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(E.q),e.LFG(A.F0),e.LFG(A.gz),e.LFG(X.F),e.LFG(q.o),e.LFG(Vb))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function Qb(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close.emit())})("formIsReady",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.casePreInjury)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let qa=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"casePreInjury_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.casePreInjury=i.item})):t.formName&&t.formName.currentValue&&"casePreInjury_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadCasePreInjuryEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.casePreInjury=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Is),e.Y36(A.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-case-pre-injury-form"]],inputs:{casePreInjury:"casePreInjury",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,Qb,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[w.O5,z.M,w.Ov],encapsulation:2}),s})(),Ha=(()=>{class s{constructor(){this.autoHeight=!1,this.casePreInjuries=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[{field:"legalCase.name",headerName:"Legal Case",filter:"agTextColumnFilter"},{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{field:"legalCaseId",filter:"agTextColumnFilter",hide:!0},{headerName:"Affects Injury",field:"affectsInjury",filter:"agSetColumnFilter",cellRenderer:"checkboxRenderer"},{field:"injuryDate",filter:"agTextColumnFilter"},{field:"injured",filter:"agTextColumnFilter"},{field:"anatomic",filter:"agTextColumnFilter"},{field:"dateCreated",filter:"agDateColumnFilter"},{headerName:"Removed",field:"removed",filter:"agSetColumnFilter",cellRenderer:"checkboxRenderer"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var r;t.includes(null===(r=i.data)||void 0===r?void 0:r.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-case-pre-injury-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(N.x,5),2&t){let r;e.iGM(r=e.CRH())&&(i.tableView=r.first)}},inputs:{autoHeight:"autoHeight",casePreInjuries:"casePreInjuries"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.casePreInjuries)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[N.x],encapsulation:2}),s})();function Ub(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-case-pre-injury-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","casePreInjury_edit")("formControl",t.formControl)("casePreInjury",t.casePreInjury)}}const Jb=function(){return{}};function jb(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-case-pre-injury-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","casePreInjury_create")("formControl",t.formControl)("casePreInjury",e.DdM(3,Jb))}}function zb(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-case-pre-injury-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(u.ref.close())}),e.qZA()}2&s&&e.Q6J("casePreInjuries",o.data.items)}let qb=(()=>{class s extends I.fS{constructor(t){super(),this.store=t,this.store.loadCasePreInjuriesEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.casePreInjuries$.pipe((0,h.w)(i=>(0,T.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Is))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","casePreInjury","send","close"],[1,"w-full","h-full","bg-white",3,"casePreInjuries","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,Ub,2,3,"ng-template",null,1,e.W1O),e.YNc(3,jb,1,4,"ng-template",null,2,e.W1O),e.YNc(5,zb,1,1,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",u)("editTemplate",r)("createTemplate",l)("key",i.field.key)}},dependencies:[x.JJ,x.oH,J.$,qa,Ha],encapsulation:2}),s})();function Hb(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-case-pre-injury-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","casePreInjury_edit")("casePreInjury",t.value)}}const Kb=function(){return{}};function kb(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-case-pre-injury-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","casePreInjury_create")("casePreInjury",e.DdM(2,Kb))}function Zb(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-case-pre-injury-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(null==u.ref?null:u.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("casePreInjuries",t.items)}}let Bb=(()=>{class s extends Y{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","casePreInjury","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","casePreInjuries","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,Hb,1,2,"ng-template",null,1,e.W1O),e.YNc(3,kb,1,3,"ng-template",null,2,e.W1O),e.YNc(5,Zb,1,2,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[ee,qa,Ha],encapsulation:2}),s})(),Yb=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[Is],imports:[w.ez,R.F,x.UX,V.o,H.u,Q.P,U.t,Z,j.h,K.G,I.X0.forChild({types:[{name:"case-pre-injury-select",component:qb,wrappers:["form-field"]},{name:"case-pre-injury-grid",component:Bb}]})]}),s})(),Xb=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[Yb]}),s})();class ft extends y.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class e0 extends ft{constructor(o,t){super("ValidateCasePreProblemExcelDataAction"),this.valid=!1,this.excelData=o,this.legalCases=t}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name),this.validationContext.addRule(new f.mi(`legalCaseName_${i}_is_valid}`,"Legal Case Is Not Valid","legalCase.name",t.legalCase,this.legalCases,!0))}),this.validationContext.addRule(new f.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof f.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(r=>r.name),newNames:[i.newName]}):i instanceof f.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,T.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class t0 extends f.wS{constructor(o,t,i,r,l){super(o,t,i,r,l,!0)}}class i0 extends f.ul{constructor(o,t,i,r=!1){super(o,t,r),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new f.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new t0("name","The casepreproblem name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class s0 extends ft{constructor(o){super("CreateCasePreProblemAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new i0("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateCasePreProblem({input:this.input}).pipe((0,h.w)(o=>(0,ie.of)(o.data.created)))}}class o0 extends ft{constructor(o){super("UpdateCasePreProblemsAction"),this.casePreProblems=o}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.casePreProblems,!0))}performAction(){this.response=this.businessProvider.data.userUpdateCasePreProblems({input:{casePreProblems:this.casePreProblems}}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}class r0 extends ft{constructor(o,t){super("UpdateCasePreProblemAction"),this.casePreProblem=o,this.casePreProblemId=t}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.casePreProblem,!0)).addRule(new f.xF("Id","Id should be a CUID and not null",this.casePreProblemId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateCasePreProblem({casePreProblemId:this.casePreProblemId,input:this.casePreProblem}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}let Ka=(()=>{class s extends y.nH{constructor(t,i,r){super("NotificationService.CasePreProblemBusinessProviderService",t,r),this.data=i}createCasePreProblem(t){const i=new s0(t);return i.Do(this),i.response}updateCasePreProblem(t,i){const r=new r0(t,i);return r.Do(this),r.response}importCasePreProblems(t){const i=new o0(t);return i.Do(this),i.response}validateCasePreProblemExcelData(t,i){const r=new e0(t,i);return r.Do(this),r.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(O.ed),e.LFG(E.q),e.LFG(y.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),a0=(()=>{class s extends y.nH{constructor(t,i,r){super("CasePreProblemService",r,t),this.businessProvider=i}createCasePreProblem(t){const i=Object.fromEntries(Object.entries(t).filter(([r,l])=>null!==l));return this.businessProvider.createCasePreProblem(i)}updateCasePreProblem(t,i){return this.businessProvider.updateCasePreProblem(t,i)}importCasePreProblems(t){return this.businessProvider.importCasePreProblems(t)}validateCasePreProblemExcelData(t,i){return this.businessProvider.validateCasePreProblemExcelData(t,i)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(Ka,8),e.LFG(Ka),e.LFG(O.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),Ps=(()=>{class s extends g.m1{constructor(t,i,r,l,u,P){if(super({loading:!1,casePreProblems:[],done:!1,searchQuery:"",formName:void 0,legalCaseId:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=r,this.toast=l,this.formService=u,this.casePreProblemService=P,this.errors$=this.select(d=>d.errors),this.loading$=this.select(d=>d.loading),this.done$=this.select(d=>d.done),this.item$=this.select(d=>d.item),this.casePreProblems$=this.select(d=>d.casePreProblems),this.legalCases$=this.select(d=>d.legalCases||[]),this.legalCaseId$=this.select(d=>d.legalCaseId),this.paging$=this.select(d=>d.paging),this.searchQuery$=this.select(d=>d.searchQuery),this.formName$=this.select(d=>d.formName),this.actionResult$=this.select(this.item$,this.done$,(d,n)=>({item:d,done:n}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.casePreProblems$,this.legalCases$,(d,n,a,m,p,_)=>({errors:d,loading:n,item:a,formName:m,casePreProblems:p,legalCases:_}),{debounce:!0}),this.input$=this.select(this.paging$,this.legalCaseId$,this.searchQuery$,(d,n,a)=>({limit:d.limit,skip:d.skip,name:a,legalCaseId:n,total:d.total})),this.setFormName=this.updater((d,n)=>Object.assign(Object.assign({},d),{formName:n})),this.setLegalCaseId=this.updater((d,n)=>Object.assign(Object.assign({},d),{legalCaseId:n})),this.filterLegalCases=d=>this.data.userSelectLegalCases({input:{name:d}}).pipe((0,g._b)(n=>{let a=n.data.items;return this.patchState({legalCases:a}),a},n=>this.patchState({errors:n.graphQLErrors?n.graphQLErrors:n})),(0,B.U)(n=>n.data.items)),this.addLegalCase=this.updater((d,n)=>Object.assign(Object.assign({},d),{legalCases:d.legalCases.concat(n)})),this.setItem=this.updater((d,n)=>Object.assign(Object.assign({},d),{item:n})),this.addNewCasePreProblem=this.updater((d,n)=>Object.assign(Object.assign({},d),{casePreProblems:[...d.casePreProblems,n]})),this.updateCasePreProblem=this.updater((d,n)=>Object.assign(Object.assign({},d),{casePreProblems:d.casePreProblems.map(a=>a.id===n.id?n:a)})),this.addCasePreProblems=this.updater((d,n)=>Object.assign(Object.assign({},d),{casePreProblems:d.casePreProblems.concat(n)})),this.updateCasePreProblems=this.updater((d,n)=>Object.assign(Object.assign({},d),{casePreProblems:d.casePreProblems.map(a=>n.find(p=>p.id===a.id)||a)})),this.setSearchQuery=this.updater((d,n)=>Object.assign(Object.assign({},d),{searchQuery:n})),this.loadCasePreProblemEffect=this.effect(d=>d.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(n=>this.data.userCasePreProblem({casePreProblemId:n}).pipe((0,g._b)(a=>{this.patchState({item:a.data.item,errors:a.errors,loading:!1})},a=>this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})))))),this.loadCasePreProblemsEffect=this.effect(d=>d.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.input$),(0,h.w)(([n,a])=>this.data.userCasePreProblems({input:a}).pipe((0,g._b)(m=>this.patchState({paging:{limit:a.limit,skip:a.skip,total:m.data.count.total},casePreProblems:m.data.items,errors:m.errors,loading:!1}),m=>this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})))))),this.createCasePreProblemEffect=this.effect(d=>d.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(n=>this.casePreProblemService.createCasePreProblem(Object.assign({},n)).pipe((0,g._b)(a=>{this.addNewCasePreProblem(a),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:a,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.updateCasePreProblemEffect=this.effect(d=>d.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([n,a])=>this.casePreProblemService.updateCasePreProblem(n,n.id).pipe((0,g._b)(m=>{this.updateCasePreProblem(m),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:m,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},m=>{m.graphQLErrors?(this.toast.error(m.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})):(this.toast.error(m.Message),this.formService.setErrors(m.Data))}))))),this.deleteCasePreProblemEffect=this.effect(d=>d.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([n,a])=>this.data.userDeleteCasePreProblem({casePreProblemId:a.id}).pipe((0,g._b)(m=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:m.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},m=>{m.graphQLErrors?(this.toast.error(m.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})):(this.toast.error(m.Message),this.formService.setErrors(m.Data))}))))),this.importExcelEffect=this.effect(d=>d.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(n=>this.casePreProblemService.importCasePreProblems(n).pipe((0,te.K)(a=>{var m;return this.toast.error(null!==(m=a.Message)&&void 0!==m?m:"Failed to save",{duration:3e3}),k.E}),(0,C.b)(a=>{const m=JSON.parse(a.created),p=JSON.parse(a.updated),_=JSON.parse(a.failed),v=m.length+p.length+_.length;this.addCasePreProblems(m),this.updateCasePreProblems(p),this.toast.success(`${m.length} created, ${p.length} updated, ${_.length} failed of total ${v}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("casePreProblemId")?(this.route.snapshot.paramMap.get("casePreProblemId"),this.setFormName("casePreProblem_edit")):this.setFormName("casePreProblem_create"),this.route.snapshot.paramMap.has("legalCaseId")){var c=this.route.snapshot.paramMap.get("legalCaseId");this.setLegalCaseId(c)}}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.casePreProblemService.validateCasePreProblemExcelData(t,i.legalCases)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(E.q),e.LFG(A.F0),e.LFG(A.gz),e.LFG(X.F),e.LFG(q.o),e.LFG(a0))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function n0(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close.emit())})("formIsReady",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.casePreProblem)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let ka=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"casePreProblem_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.casePreProblem=i.item})):t.formName&&t.formName.currentValue&&"casePreProblem_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadCasePreProblemEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.casePreProblem=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Ps),e.Y36(A.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-case-pre-problem-form"]],inputs:{casePreProblem:"casePreProblem",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,n0,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[w.O5,z.M,w.Ov],encapsulation:2}),s})(),Za=(()=>{class s{constructor(){this.autoHeight=!1,this.casePreProblems=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[{field:"legalCase.name",headerName:"Legal Case",filter:"agTextColumnFilter"},{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{field:"legalCaseId",filter:"agTextColumnFilter",hide:!0},{headerName:"Same Region",field:"sameRegion",filter:"agSetColumnFilter",cellRenderer:"checkboxRenderer"},{field:"problemDate",filter:"agDateColumnFilter"},{field:"duration",filter:"agTextColumnFilter"},{field:"symptoms",filter:"agTextColumnFilter"},{field:"regions",filter:"agTextColumnFilter"},{headerName:"Removed",field:"removed",filter:"agSetColumnFilter",cellRenderer:"checkboxRenderer"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var r;t.includes(null===(r=i.data)||void 0===r?void 0:r.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-case-pre-problem-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(N.x,5),2&t){let r;e.iGM(r=e.CRH())&&(i.tableView=r.first)}},inputs:{autoHeight:"autoHeight",casePreProblems:"casePreProblems"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.casePreProblems)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[N.x],encapsulation:2}),s})();function l0(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-case-pre-problem-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","casePreProblem_edit")("formControl",t.formControl)("casePreProblem",t.casePreProblem)}}const c0=function(){return{}};function d0(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-case-pre-problem-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","casePreProblem_create")("formControl",t.formControl)("casePreProblem",e.DdM(3,c0))}}function u0(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-case-pre-problem-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(u.ref.close())}),e.qZA()}2&s&&e.Q6J("casePreProblems",o.data.items)}let m0=(()=>{class s extends I.fS{constructor(t){super(),this.store=t,this.store.loadCasePreProblemsEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.casePreProblems$.pipe((0,h.w)(i=>(0,T.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Ps))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","casePreProblem","send","close"],[1,"w-full","h-full","bg-white",3,"casePreProblems","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,l0,2,3,"ng-template",null,1,e.W1O),e.YNc(3,d0,1,4,"ng-template",null,2,e.W1O),e.YNc(5,u0,1,1,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",u)("editTemplate",r)("createTemplate",l)("key",i.field.key)}},dependencies:[x.JJ,x.oH,J.$,ka,Za],encapsulation:2}),s})();function p0(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-case-pre-problem-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","casePreProblem_edit")("casePreProblem",t.value)}}const h0=function(){return{}};function f0(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-case-pre-problem-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","casePreProblem_create")("casePreProblem",e.DdM(2,h0))}function _0(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-case-pre-problem-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(null==u.ref?null:u.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("casePreProblems",t.items)}}let g0=(()=>{class s extends Y{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","casePreProblem","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","casePreProblems","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,p0,1,2,"ng-template",null,1,e.W1O),e.YNc(3,f0,1,3,"ng-template",null,2,e.W1O),e.YNc(5,_0,1,2,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[ee,ka,Za],encapsulation:2}),s})(),C0=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[Ps],imports:[w.ez,R.F,x.UX,V.o,H.u,Q.P,U.t,Z,j.h,K.G,I.X0.forChild({types:[{name:"case-pre-problem-select",component:m0,wrappers:["form-field"]},{name:"case-pre-problem-grid",component:g0}]})]}),s})(),S0=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[C0]}),s})();class _t extends y.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class v0 extends _t{constructor(o,t){super("ValidateCasePreProcedureExcelDataAction"),this.valid=!1,this.excelData=o,this.legalCases=t}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name),this.validationContext.addRule(new f.mi(`legalCaseName_${i}_is_valid}`,"Legal Case Is Not Valid","legalCase.name",t.legalCase,this.legalCases,!0))}),this.validationContext.addRule(new f.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof f.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(r=>r.name),newNames:[i.newName]}):i instanceof f.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,T.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class b0 extends f.wS{constructor(o,t,i,r,l){super(o,t,i,r,l,!0)}}class T0 extends f.ul{constructor(o,t,i,r=!1){super(o,t,r),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new f.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new b0("name","The casepreprocedure name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class y0 extends _t{constructor(o){super("CreateCasePreProcedureAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new T0("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateCasePreProcedure({input:this.input}).pipe((0,h.w)(o=>(0,ie.of)(o.data.created)))}}class w0 extends _t{constructor(o){super("UpdateCasePreProceduresAction"),this.casePreProcedures=o}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.casePreProcedures,!0))}performAction(){this.response=this.businessProvider.data.userUpdateCasePreProcedures({input:{casePreProcedures:this.casePreProcedures}}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}class x0 extends _t{constructor(o,t){super("UpdateCasePreProcedureAction"),this.casePreProcedure=o,this.casePreProcedureId=t}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.casePreProcedure,!0)).addRule(new f.xF("Id","Id should be a CUID and not null",this.casePreProcedureId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateCasePreProcedure({casePreProcedureId:this.casePreProcedureId,input:this.casePreProcedure}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}let Ba=(()=>{class s extends y.nH{constructor(t,i,r){super("NotificationService.CasePreProcedureBusinessProviderService",t,r),this.data=i}createCasePreProcedure(t){const i=new y0(t);return i.Do(this),i.response}updateCasePreProcedure(t,i){const r=new x0(t,i);return r.Do(this),r.response}importCasePreProcedures(t){const i=new w0(t);return i.Do(this),i.response}validateCasePreProcedureExcelData(t,i){const r=new v0(t,i);return r.Do(this),r.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(O.ed),e.LFG(E.q),e.LFG(y.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),N0=(()=>{class s extends y.nH{constructor(t,i,r){super("CasePreProcedureService",r,t),this.businessProvider=i}createCasePreProcedure(t){const i=Object.fromEntries(Object.entries(t).filter(([r,l])=>null!==l));return this.businessProvider.createCasePreProcedure(i)}updateCasePreProcedure(t,i){return this.businessProvider.updateCasePreProcedure(t,i)}importCasePreProcedures(t){return this.businessProvider.importCasePreProcedures(t)}validateCasePreProcedureExcelData(t,i){return this.businessProvider.validateCasePreProcedureExcelData(t,i)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(Ba,8),e.LFG(Ba),e.LFG(O.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),Ws=(()=>{class s extends g.m1{constructor(t,i,r,l,u,P){if(super({loading:!1,casePreProcedures:[],done:!1,searchQuery:"",formName:void 0,legalCaseId:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=r,this.toast=l,this.formService=u,this.casePreProcedureService=P,this.errors$=this.select(d=>d.errors),this.loading$=this.select(d=>d.loading),this.done$=this.select(d=>d.done),this.item$=this.select(d=>d.item),this.casePreProcedures$=this.select(d=>d.casePreProcedures),this.legalCases$=this.select(d=>d.legalCases||[]),this.legalCaseId$=this.select(d=>d.legalCaseId),this.paging$=this.select(d=>d.paging),this.searchQuery$=this.select(d=>d.searchQuery),this.formName$=this.select(d=>d.formName),this.actionResult$=this.select(this.item$,this.done$,(d,n)=>({item:d,done:n}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.casePreProcedures$,this.legalCases$,(d,n,a,m,p,_)=>({errors:d,loading:n,item:a,formName:m,casePreProcedures:p,legalCases:_}),{debounce:!0}),this.input$=this.select(this.paging$,this.legalCaseId$,this.searchQuery$,(d,n,a)=>({limit:d.limit,skip:d.skip,name:a,legalCaseId:n,total:d.total})),this.setFormName=this.updater((d,n)=>Object.assign(Object.assign({},d),{formName:n})),this.setLegalCaseId=this.updater((d,n)=>Object.assign(Object.assign({},d),{legalCaseId:n})),this.filterLegalCases=d=>this.data.userSelectLegalCases({input:{name:d}}).pipe((0,g._b)(n=>{let a=n.data.items;return this.patchState({legalCases:a}),a},n=>this.patchState({errors:n.graphQLErrors?n.graphQLErrors:n})),(0,B.U)(n=>n.data.items)),this.addLegalCase=this.updater((d,n)=>Object.assign(Object.assign({},d),{legalCases:d.legalCases.concat(n)})),this.setItem=this.updater((d,n)=>Object.assign(Object.assign({},d),{item:n})),this.addNewCasePreProcedure=this.updater((d,n)=>Object.assign(Object.assign({},d),{casePreProcedures:[...d.casePreProcedures,n]})),this.updateCasePreProcedure=this.updater((d,n)=>Object.assign(Object.assign({},d),{casePreProcedures:d.casePreProcedures.map(a=>a.id===n.id?n:a)})),this.addCasePreProcedures=this.updater((d,n)=>Object.assign(Object.assign({},d),{casePreProcedures:d.casePreProcedures.concat(n)})),this.updateCasePreProcedures=this.updater((d,n)=>Object.assign(Object.assign({},d),{casePreProcedures:d.casePreProcedures.map(a=>n.find(p=>p.id===a.id)||a)})),this.setSearchQuery=this.updater((d,n)=>Object.assign(Object.assign({},d),{searchQuery:n})),this.loadCasePreProcedureEffect=this.effect(d=>d.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(n=>this.data.userCasePreProcedure({casePreProcedureId:n}).pipe((0,g._b)(a=>{this.patchState({item:a.data.item,errors:a.errors,loading:!1})},a=>this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})))))),this.loadCasePreProceduresEffect=this.effect(d=>d.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.input$),(0,h.w)(([n,a])=>this.data.userCasePreProcedures({input:a}).pipe((0,g._b)(m=>this.patchState({paging:{limit:a.limit,skip:a.skip,total:m.data.count.total},casePreProcedures:m.data.items,errors:m.errors,loading:!1}),m=>this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})))))),this.createCasePreProcedureEffect=this.effect(d=>d.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(n=>this.casePreProcedureService.createCasePreProcedure(Object.assign({},n)).pipe((0,g._b)(a=>{this.addNewCasePreProcedure(a),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:a,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.updateCasePreProcedureEffect=this.effect(d=>d.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([n,a])=>this.casePreProcedureService.updateCasePreProcedure(n,n.id).pipe((0,g._b)(m=>{this.updateCasePreProcedure(m),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:m,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},m=>{m.graphQLErrors?(this.toast.error(m.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})):(this.toast.error(m.Message),this.formService.setErrors(m.Data))}))))),this.deleteCasePreProcedureEffect=this.effect(d=>d.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([n,a])=>this.data.userDeleteCasePreProcedure({casePreProcedureId:a.id}).pipe((0,g._b)(m=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:m.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},m=>{m.graphQLErrors?(this.toast.error(m.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})):(this.toast.error(m.Message),this.formService.setErrors(m.Data))}))))),this.importExcelEffect=this.effect(d=>d.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(n=>this.casePreProcedureService.importCasePreProcedures(n).pipe((0,te.K)(a=>{var m;return this.toast.error(null!==(m=a.Message)&&void 0!==m?m:"Failed to save",{duration:3e3}),k.E}),(0,C.b)(a=>{const m=JSON.parse(a.created),p=JSON.parse(a.updated),_=JSON.parse(a.failed),v=m.length+p.length+_.length;this.addCasePreProcedures(m),this.updateCasePreProcedures(p),this.toast.success(`${m.length} created, ${p.length} updated, ${_.length} failed of total ${v}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("casePreProcedureId")?(this.route.snapshot.paramMap.get("casePreProcedureId"),this.setFormName("casePreProcedure_edit")):this.setFormName("casePreProcedure_create"),this.route.snapshot.paramMap.has("legalCaseId")){var c=this.route.snapshot.paramMap.get("legalCaseId");this.setLegalCaseId(c)}}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.casePreProcedureService.validateCasePreProcedureExcelData(t,i.legalCases)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(E.q),e.LFG(A.F0),e.LFG(A.gz),e.LFG(X.F),e.LFG(q.o),e.LFG(N0))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function A0(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close.emit())})("formIsReady",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.casePreProcedure)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let Ya=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"casePreProcedure_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.casePreProcedure=i.item})):t.formName&&t.formName.currentValue&&"casePreProcedure_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadCasePreProcedureEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.casePreProcedure=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Ws),e.Y36(A.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-case-pre-procedure-form"]],inputs:{casePreProcedure:"casePreProcedure",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,A0,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[w.O5,z.M,w.Ov],encapsulation:2}),s})(),Xa=(()=>{class s{constructor(){this.autoHeight=!1,this.casePreProcedures=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[{field:"legalCase.name",headerName:"Legal Case",filter:"agTextColumnFilter"},{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{field:"legalCaseId",filter:"agTextColumnFilter",hide:!0},{field:"procedureType",filter:"agTextColumnFilter"},{field:"procedureDate",filter:"agDateColumnFilter"},{field:"dateCreated",filter:"agDateColumnFilter"},{headerName:"Removed",field:"removed",filter:"agSetColumnFilter",cellRenderer:"checkboxRenderer"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var r;t.includes(null===(r=i.data)||void 0===r?void 0:r.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-case-pre-procedure-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(N.x,5),2&t){let r;e.iGM(r=e.CRH())&&(i.tableView=r.first)}},inputs:{autoHeight:"autoHeight",casePreProcedures:"casePreProcedures"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.casePreProcedures)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[N.x],encapsulation:2}),s})();function F0(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-case-pre-procedure-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","casePreProcedure_edit")("formControl",t.formControl)("casePreProcedure",t.casePreProcedure)}}const D0=function(){return{}};function I0(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-case-pre-procedure-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","casePreProcedure_create")("formControl",t.formControl)("casePreProcedure",e.DdM(3,D0))}}function P0(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-case-pre-procedure-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(u.ref.close())}),e.qZA()}2&s&&e.Q6J("casePreProcedures",o.data.items)}let W0=(()=>{class s extends I.fS{constructor(t){super(),this.store=t,this.store.loadCasePreProceduresEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.casePreProcedures$.pipe((0,h.w)(i=>(0,T.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Ws))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","casePreProcedure","send","close"],[1,"w-full","h-full","bg-white",3,"casePreProcedures","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,F0,2,3,"ng-template",null,1,e.W1O),e.YNc(3,I0,1,4,"ng-template",null,2,e.W1O),e.YNc(5,P0,1,1,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",u)("editTemplate",r)("createTemplate",l)("key",i.field.key)}},dependencies:[x.JJ,x.oH,J.$,Ya,Xa],encapsulation:2}),s})();function M0(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-case-pre-procedure-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","casePreProcedure_edit")("casePreProcedure",t.value)}}const E0=function(){return{}};function O0(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-case-pre-procedure-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","casePreProcedure_create")("casePreProcedure",e.DdM(2,E0))}function L0(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-case-pre-procedure-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(null==u.ref?null:u.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("casePreProcedures",t.items)}}let G0=(()=>{class s extends Y{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","casePreProcedure","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","casePreProcedures","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,M0,1,2,"ng-template",null,1,e.W1O),e.YNc(3,O0,1,3,"ng-template",null,2,e.W1O),e.YNc(5,L0,1,2,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[ee,Ya,Xa],encapsulation:2}),s})(),$0=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[Ws],imports:[w.ez,R.F,x.UX,V.o,H.u,Q.P,U.t,Z,j.h,K.G,I.X0.forChild({types:[{name:"case-pre-procedure-select",component:W0,wrappers:["form-field"]},{name:"case-pre-procedure-grid",component:G0}]})]}),s})(),R0=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[$0]}),s})();class gt extends y.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class V0 extends gt{constructor(o,t,i,r){super("ValidateCaseProcedureExcelDataAction"),this.valid=!1,this.excelData=o,this.legalCases=t,this.appointments=i,this.locations=r}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name),this.validationContext.addRule(new f.mi(`legalCaseName_${i}_is_valid}`,"Legal Case Is Not Valid","legalCase.name",t.legalCase,this.legalCases,!0)),this.validationContext.addRule(new f.mi(`appointmentName_${i}_is_valid}`,"Appointment Is Not Valid","appointment.name",t.appointment,this.appointments,!0)),this.validationContext.addRule(new f.mi(`locationName_${i}_is_valid}`,"Location Is Not Valid","location.name",t.location,this.locations,!0))}),this.validationContext.addRule(new f.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof f.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(r=>r.name),newNames:[i.newName]}):i instanceof f.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,T.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class Q0 extends f.wS{constructor(o,t,i,r,l){super(o,t,i,r,l,!0)}}class U0 extends f.ul{constructor(o,t,i,r=!1){super(o,t,r),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new f.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new Q0("name","The caseprocedure name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class J0 extends gt{constructor(o){super("CreateCaseProcedureAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new U0("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateCaseProcedure({input:this.input}).pipe((0,h.w)(o=>(0,ie.of)(o.data.created)))}}class j0 extends gt{constructor(o){super("UpdateCaseProceduresAction"),this.caseProcedures=o}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.caseProcedures,!0))}performAction(){this.response=this.businessProvider.data.userUpdateCaseProcedures({input:{caseProcedures:this.caseProcedures}}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}class z0 extends gt{constructor(o,t){super("UpdateCaseProcedureAction"),this.caseProcedure=o,this.caseProcedureId=t}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.caseProcedure,!0)).addRule(new f.xF("Id","Id should be a CUID and not null",this.caseProcedureId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateCaseProcedure({caseProcedureId:this.caseProcedureId,input:this.caseProcedure}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}let en=(()=>{class s extends y.nH{constructor(t,i,r){super("NotificationService.CaseProcedureBusinessProviderService",t,r),this.data=i}createCaseProcedure(t){const i=new J0(t);return i.Do(this),i.response}updateCaseProcedure(t,i){const r=new z0(t,i);return r.Do(this),r.response}importCaseProcedures(t){const i=new j0(t);return i.Do(this),i.response}validateCaseProcedureExcelData(t,i,r,l){const u=new V0(t,i,r,l);return u.Do(this),u.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(O.ed),e.LFG(E.q),e.LFG(y.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),q0=(()=>{class s extends y.nH{constructor(t,i,r){super("CaseProcedureService",r,t),this.businessProvider=i}createCaseProcedure(t){const i=Object.fromEntries(Object.entries(t).filter(([r,l])=>null!==l));return this.businessProvider.createCaseProcedure(i)}updateCaseProcedure(t,i){return this.businessProvider.updateCaseProcedure(t,i)}importCaseProcedures(t){return this.businessProvider.importCaseProcedures(t)}validateCaseProcedureExcelData(t,i,r,l){return this.businessProvider.validateCaseProcedureExcelData(t,i,r,l)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(en,8),e.LFG(en),e.LFG(O.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),Ms=(()=>{class s extends g.m1{constructor(t,i,r,l,u,P){if(super({loading:!1,caseProcedures:[],done:!1,searchQuery:"",formName:void 0,legalCaseId:void 0,appointmentId:void 0,locationId:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=r,this.toast=l,this.formService=u,this.caseProcedureService=P,this.errors$=this.select(a=>a.errors),this.loading$=this.select(a=>a.loading),this.done$=this.select(a=>a.done),this.item$=this.select(a=>a.item),this.caseProcedures$=this.select(a=>a.caseProcedures),this.legalCases$=this.select(a=>a.legalCases||[]),this.appointments$=this.select(a=>a.appointments||[]),this.locations$=this.select(a=>a.locations||[]),this.legalCaseId$=this.select(a=>a.legalCaseId),this.appointmentId$=this.select(a=>a.appointmentId),this.locationId$=this.select(a=>a.locationId),this.paging$=this.select(a=>a.paging),this.searchQuery$=this.select(a=>a.searchQuery),this.formName$=this.select(a=>a.formName),this.actionResult$=this.select(this.item$,this.done$,(a,m)=>({item:a,done:m}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.caseProcedures$,this.legalCases$,this.appointments$,this.locations$,(a,m,p,_,v,D,se,me)=>({errors:a,loading:m,item:p,formName:_,caseProcedures:v,legalCases:D,appointments:se,locations:me}),{debounce:!0}),this.input$=this.select(this.paging$,this.legalCaseId$,this.appointmentId$,this.locationId$,this.searchQuery$,(a,m,p,_,v)=>({limit:a.limit,skip:a.skip,name:v,legalCaseId:m,appointmentId:p,locationId:_,total:a.total})),this.setFormName=this.updater((a,m)=>Object.assign(Object.assign({},a),{formName:m})),this.setLegalCaseId=this.updater((a,m)=>Object.assign(Object.assign({},a),{legalCaseId:m})),this.setAppointmentId=this.updater((a,m)=>Object.assign(Object.assign({},a),{appointmentId:m})),this.setLocationId=this.updater((a,m)=>Object.assign(Object.assign({},a),{locationId:m})),this.setSelectedCaseProcedures=this.updater((a,m)=>Object.assign(Object.assign({},a),{selectedCaseProcedure:m})),this.filterLegalCases=a=>this.data.userSelectLegalCases({input:{name:a}}).pipe((0,g._b)(m=>{let p=m.data.items;return this.patchState({legalCases:p}),p},m=>this.patchState({errors:m.graphQLErrors?m.graphQLErrors:m})),(0,B.U)(m=>m.data.items)),this.filterAppointments=a=>this.data.userSelectAppointments({input:{name:a}}).pipe((0,g._b)(m=>{let p=m.data.items;return this.patchState({appointments:p}),p},m=>this.patchState({errors:m.graphQLErrors?m.graphQLErrors:m})),(0,B.U)(m=>m.data.items)),this.filterLocations=a=>this.data.userSelectLocations({input:{name:a}}).pipe((0,g._b)(m=>{let p=m.data.items;return this.patchState({locations:p}),p},m=>this.patchState({errors:m.graphQLErrors?m.graphQLErrors:m})),(0,B.U)(m=>m.data.items)),this.addLegalCase=this.updater((a,m)=>Object.assign(Object.assign({},a),{legalCases:a.legalCases.concat(m)})),this.addAppointment=this.updater((a,m)=>Object.assign(Object.assign({},a),{appointments:a.appointments.concat(m)})),this.addLocation=this.updater((a,m)=>Object.assign(Object.assign({},a),{locations:a.locations.concat(m)})),this.setItem=this.updater((a,m)=>Object.assign(Object.assign({},a),{item:m})),this.addNewCaseProcedure=this.updater((a,m)=>Object.assign(Object.assign({},a),{caseProcedures:[...a.caseProcedures,m]})),this.updateCaseProcedure=this.updater((a,m)=>Object.assign(Object.assign({},a),{caseProcedures:a.caseProcedures.map(p=>p.id===m.id?m:p)})),this.addCaseProcedures=this.updater((a,m)=>Object.assign(Object.assign({},a),{caseProcedures:a.caseProcedures.concat(m)})),this.updateCaseProcedures=this.updater((a,m)=>Object.assign(Object.assign({},a),{caseProcedures:a.caseProcedures.map(p=>m.find(v=>v.id===p.id)||p)})),this.setSearchQuery=this.updater((a,m)=>Object.assign(Object.assign({},a),{searchQuery:m})),this.loadCaseProcedureEffect=this.effect(a=>a.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(m=>this.data.userCaseProcedure({caseProcedureId:m}).pipe((0,g._b)(p=>{this.patchState({item:p.data.item,errors:p.errors,loading:!1})},p=>this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})))))),this.loadCaseProceduresEffect=this.effect(a=>a.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.input$),(0,h.w)(([m,p])=>(console.log("hit the load effect"),this.data.userSelectDetailCaseProcedures({input:p}).pipe((0,g._b)(_=>{console.log(_.data.items),this.patchState({paging:{limit:p.limit,skip:p.skip,total:_.data.count.total},caseProcedures:_.data.items,errors:_.errors,loading:!1})},_=>this.patchState({loading:!1,errors:_.graphQLErrors?_.graphQLErrors:_}))))))),this.createCaseProcedureEffect=this.effect(a=>a.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(m=>this.caseProcedureService.createCaseProcedure(Object.assign({},m)).pipe((0,g._b)(p=>{this.addNewCaseProcedure(p),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:p,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},p=>{p.graphQLErrors?(this.toast.error(p.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})):(this.toast.error(p.Message),this.formService.setErrors(p.Data))}))))),this.updateCaseProcedureEffect=this.effect(a=>a.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([m,p])=>this.caseProcedureService.updateCaseProcedure(m,m.id).pipe((0,g._b)(_=>{this.updateCaseProcedure(_),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:_,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},_=>{_.graphQLErrors?(this.toast.error(_.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:_.graphQLErrors?_.graphQLErrors:_})):(this.toast.error(_.Message),this.formService.setErrors(_.Data))}))))),this.deleteCaseProcedureEffect=this.effect(a=>a.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([m,p])=>this.data.userDeleteCaseProcedure({caseProcedureId:p.id}).pipe((0,g._b)(_=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:_.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},_=>{_.graphQLErrors?(this.toast.error(_.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:_.graphQLErrors?_.graphQLErrors:_})):(this.toast.error(_.Message),this.formService.setErrors(_.Data))}))))),this.importExcelEffect=this.effect(a=>a.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(m=>this.caseProcedureService.importCaseProcedures(m).pipe((0,te.K)(p=>{var _;return this.toast.error(null!==(_=p.Message)&&void 0!==_?_:"Failed to save",{duration:3e3}),k.E}),(0,C.b)(p=>{const _=JSON.parse(p.created),v=JSON.parse(p.updated),D=JSON.parse(p.failed),se=_.length+v.length+D.length;this.addCaseProcedures(_),this.updateCaseProcedures(v),this.toast.success(`${_.length} created, ${v.length} updated, ${D.length} failed of total ${se}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("caseProcedureId")?(this.route.snapshot.paramMap.get("caseProcedureId"),this.setFormName("caseProcedure_edit")):this.setFormName("caseProcedure_create"),this.route.snapshot.paramMap.has("legalCaseId")){var c=this.route.snapshot.paramMap.get("legalCaseId");this.setLegalCaseId(c)}if(this.route.snapshot.paramMap.has("appointmentId")){var d=this.route.snapshot.paramMap.get("appointmentId");this.setAppointmentId(d)}if(this.route.snapshot.paramMap.has("locationId")){var n=this.route.snapshot.paramMap.get("locationId");this.setLocationId(n)}}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.caseProcedureService.validateCaseProcedureExcelData(t,i.legalCases,i.appointments,i.locations)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(E.q),e.LFG(A.F0),e.LFG(A.gz),e.LFG(X.F),e.LFG(q.o),e.LFG(q0))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function H0(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close.emit())})("formIsReady",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.caseProcedure)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let tn=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"caseProcedure_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({id:null,name:""}),this.store.vm$.subscribe(i=>{this.caseProcedure=i.item})):t.formName&&t.formName.currentValue&&"caseProcedure_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadCaseProcedureEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.caseProcedure=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Ms),e.Y36(A.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-case-procedure-form"]],inputs:{caseProcedure:"caseProcedure",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,H0,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[w.O5,z.M,w.Ov],encapsulation:2}),s})(),sn=(()=>{class s{constructor(){this.autoHeight=!1,this.caseProcedures=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[{field:"legalCase.name",headerName:"Legal Case",filter:"agTextColumnFilter"},{field:"appointment.name",headerName:"Appointment",filter:"agTextColumnFilter"},{field:"procedureStatus.name",headerName:"Procedure Status",filter:"agTextColumnFilter"},{field:"procedureType.name",headerName:"Procedure Type",filter:"agTextColumnFilter"},{field:"location.name",headerName:"Location",filter:"agTextColumnFilter"},{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{field:"legalCaseId",filter:"agTextColumnFilter",hide:!0},{field:"appointmentId",filter:"agTextColumnFilter",hide:!0},{field:"locationId",filter:"agTextColumnFilter",hide:!0},{field:"procedureDate",filter:"agDateColumnFilter"},{headerName:"Cost",field:"cost",valueFormatter:t=>{var i;return(0,S.oBD)(null===(i=t.data)||void 0===i?void 0:i.cost,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{field:"notes",filter:"agTextColumnFilter"},{field:"createdBy",filter:"agTextColumnFilter"},{field:"dateCreated",filter:"agDateColumnFilter"},{headerName:"Removed",field:"removed",filter:"agSetColumnFilter",cellRenderer:"checkboxRenderer"},{field:"approvedDate",filter:"agDateColumnFilter"},{field:"procedureReasonName",filter:"agTextColumnFilter"},{field:"decisionDate",filter:"agDateColumnFilter"},{field:"nextActionDate",filter:"agDateColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var r;t.includes(null===(r=i.data)||void 0===r?void 0:r.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-case-procedure-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(N.x,5),2&t){let r;e.iGM(r=e.CRH())&&(i.tableView=r.first)}},inputs:{autoHeight:"autoHeight",caseProcedures:"caseProcedures"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.caseProcedures)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[N.x],encapsulation:2}),s})();function K0(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-case-procedure-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","caseProcedure_edit")("formControl",t.formControl)("caseProcedure",t.caseProcedure)}}const k0=function(){return{}};function Z0(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-case-procedure-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","caseProcedure_create")("formControl",t.formControl)("caseProcedure",e.DdM(3,k0))}}function B0(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-case-procedure-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(u.ref.close())}),e.qZA()}2&s&&e.Q6J("caseProcedures",o.data.items)}let Y0=(()=>{class s extends I.fS{constructor(t){super(),this.store=t,this.store.loadCaseProceduresEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.caseProcedures$.pipe((0,h.w)(i=>(0,T.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Ms))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","caseProcedure","send","close"],[1,"w-full","h-full","bg-white",3,"caseProcedures","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,K0,2,3,"ng-template",null,1,e.W1O),e.YNc(3,Z0,1,4,"ng-template",null,2,e.W1O),e.YNc(5,B0,1,1,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",u)("editTemplate",r)("createTemplate",l)("key",i.field.key)}},dependencies:[x.JJ,x.oH,J.$,tn,sn],encapsulation:2}),s})();function X0(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-case-procedure-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","caseProcedure_edit")("caseProcedure",t.value)}}const eT=function(){return{}};function tT(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-case-procedure-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","caseProcedure_create")("caseProcedure",e.DdM(2,eT))}function iT(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-case-procedure-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(null==u.ref?null:u.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("caseProcedures",t.items)}}let sT=(()=>{class s extends Y{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","caseProcedure","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","caseProcedures","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,X0,1,2,"ng-template",null,1,e.W1O),e.YNc(3,tT,1,3,"ng-template",null,2,e.W1O),e.YNc(5,iT,1,2,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[ee,tn,sn],encapsulation:2}),s})(),oT=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[Ms],imports:[w.ez,R.F,x.UX,V.o,H.u,Q.P,U.t,Z,j.h,K.G,I.X0.forChild({types:[{name:"case-procedure-select",component:Y0,wrappers:["form-field"]},{name:"case-procedure-grid",component:sT}]})]}),s})(),rT=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[oT]}),s})();class Ct extends y.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class aT extends Ct{constructor(o){super("ValidateCaseProgressStatusExcelDataAction"),this.valid=!1,this.excelData=o}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name)}),this.validationContext.addRule(new f.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof f.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(r=>r.name),newNames:[i.newName]}):i instanceof f.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,T.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class nT extends f.wS{constructor(o,t,i,r,l){super(o,t,i,r,l,!0)}}class lT extends f.ul{constructor(o,t,i,r=!1){super(o,t,r),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new f.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new nT("name","The caseprogressstatus name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class cT extends Ct{constructor(o){super("CreateCaseProgressStatusAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new lT("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateCaseProgressStatus({input:this.input}).pipe((0,h.w)(o=>(0,ie.of)(o.data.created)))}}class dT extends Ct{constructor(o){super("UpdateCaseProgressStatusesAction"),this.caseProgressStatuses=o}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.caseProgressStatuses,!0))}performAction(){this.response=this.businessProvider.data.userUpdateCaseProgressStatuses({input:{caseProgressStatuses:this.caseProgressStatuses}}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}class uT extends Ct{constructor(o,t){super("UpdateCaseProgressStatusAction"),this.caseProgressStatus=o,this.caseProgressStatusId=t}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.caseProgressStatus,!0)).addRule(new f.xF("Id","Id should be a CUID and not null",this.caseProgressStatusId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateCaseProgressStatus({caseProgressStatusId:this.caseProgressStatusId,input:this.caseProgressStatus}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}let on=(()=>{class s extends y.nH{constructor(t,i,r){super("NotificationService.CaseProgressStatusBusinessProviderService",t,r),this.data=i}createCaseProgressStatus(t){const i=new cT(t);return i.Do(this),i.response}updateCaseProgressStatus(t,i){const r=new uT(t,i);return r.Do(this),r.response}importCaseProgressStatuses(t){const i=new dT(t);return i.Do(this),i.response}validateCaseProgressStatusExcelData(t){const i=new aT(t);return i.Do(this),i.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(O.ed),e.LFG(E.q),e.LFG(y.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),mT=(()=>{class s extends y.nH{constructor(t,i,r){super("CaseProgressStatusService",r,t),this.businessProvider=i}createCaseProgressStatus(t){const i=Object.fromEntries(Object.entries(t).filter(([r,l])=>null!==l));return this.businessProvider.createCaseProgressStatus(i)}updateCaseProgressStatus(t,i){return this.businessProvider.updateCaseProgressStatus(t,i)}importCaseProgressStatuses(t){return this.businessProvider.importCaseProgressStatuses(t)}validateCaseProgressStatusExcelData(t){return this.businessProvider.validateCaseProgressStatusExcelData(t)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(on,8),e.LFG(on),e.LFG(O.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),Es=(()=>{class s extends g.m1{constructor(t,i,r,l,u,P){super({loading:!1,caseProgressStatuses:[],done:!1,searchQuery:"",formName:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=r,this.toast=l,this.formService=u,this.caseProgressStatusService=P,this.errors$=this.select(c=>c.errors),this.loading$=this.select(c=>c.loading),this.done$=this.select(c=>c.done),this.item$=this.select(c=>c.item),this.caseProgressStatuses$=this.select(c=>c.caseProgressStatuses),this.paging$=this.select(c=>c.paging),this.searchQuery$=this.select(c=>c.searchQuery),this.formName$=this.select(c=>c.formName),this.actionResult$=this.select(this.item$,this.done$,(c,d)=>({item:c,done:d}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.caseProgressStatuses$,(c,d,n,a,m)=>({errors:c,loading:d,item:n,formName:a,caseProgressStatuses:m}),{debounce:!0}),this.input$=this.select(this.paging$,this.searchQuery$,(c,d)=>({limit:c.limit,skip:c.skip,name:d,total:c.total})),this.setFormName=this.updater((c,d)=>Object.assign(Object.assign({},c),{formName:d})),this.setItem=this.updater((c,d)=>Object.assign(Object.assign({},c),{item:d})),this.addNewCaseProgressStatus=this.updater((c,d)=>Object.assign(Object.assign({},c),{caseProgressStatuses:[...c.caseProgressStatuses,d]})),this.updateCaseProgressStatus=this.updater((c,d)=>Object.assign(Object.assign({},c),{caseProgressStatuses:c.caseProgressStatuses.map(n=>n.id===d.id?d:n)})),this.addCaseProgressStatuses=this.updater((c,d)=>Object.assign(Object.assign({},c),{caseProgressStatuses:c.caseProgressStatuses.concat(d)})),this.updateCaseProgressStatuses=this.updater((c,d)=>Object.assign(Object.assign({},c),{caseProgressStatuses:c.caseProgressStatuses.map(n=>d.find(m=>m.id===n.id)||n)})),this.setSearchQuery=this.updater((c,d)=>Object.assign(Object.assign({},c),{searchQuery:d})),this.loadCaseProgressStatusEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.data.userCaseProgressStatus({caseProgressStatusId:d}).pipe((0,g._b)(n=>{this.patchState({item:n.data.item,errors:n.errors,loading:!1})},n=>this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})))))),this.loadCaseProgressStatusesEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.input$),(0,h.w)(([d,n])=>this.data.userCaseProgressStatuses({input:n}).pipe((0,g._b)(a=>this.patchState({paging:{limit:n.limit,skip:n.skip,total:a.data.count.total},caseProgressStatuses:a.data.items,errors:a.errors,loading:!1}),a=>this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})))))),this.createCaseProgressStatusEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.caseProgressStatusService.createCaseProgressStatus(Object.assign({},d)).pipe((0,g._b)(n=>{this.addNewCaseProgressStatus(n),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:n,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},n=>{n.graphQLErrors?(this.toast.error(n.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})):(this.toast.error(n.Message),this.formService.setErrors(n.Data))}))))),this.updateCaseProgressStatusEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([d,n])=>this.caseProgressStatusService.updateCaseProgressStatus(d,d.id).pipe((0,g._b)(a=>{this.updateCaseProgressStatus(a),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:a,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.deleteCaseProgressStatusEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([d,n])=>this.data.userDeleteCaseProgressStatus({caseProgressStatusId:n.id}).pipe((0,g._b)(a=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:a.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.importExcelEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.caseProgressStatusService.importCaseProgressStatuses(d).pipe((0,te.K)(n=>{var a;return this.toast.error(null!==(a=n.Message)&&void 0!==a?a:"Failed to save",{duration:3e3}),k.E}),(0,C.b)(n=>{const a=JSON.parse(n.created),m=JSON.parse(n.updated),p=JSON.parse(n.failed),_=a.length+m.length+p.length;this.addCaseProgressStatuses(a),this.updateCaseProgressStatuses(m),this.toast.success(`${a.length} created, ${m.length} updated, ${p.length} failed of total ${_}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("caseProgressStatusId")?(this.route.snapshot.paramMap.get("caseProgressStatusId"),this.setFormName("caseProgressStatus_edit")):this.setFormName("caseProgressStatus_create")}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.caseProgressStatusService.validateCaseProgressStatusExcelData(t)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(E.q),e.LFG(A.F0),e.LFG(A.gz),e.LFG(X.F),e.LFG(q.o),e.LFG(mT))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function pT(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close.emit())})("formIsReady",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.caseProgressStatus)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let rn=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"caseProgressStatus_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.caseProgressStatus=i.item})):t.formName&&t.formName.currentValue&&"caseProgressStatus_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadCaseProgressStatusEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.caseProgressStatus=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Es),e.Y36(A.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-case-progress-status-form"]],inputs:{caseProgressStatus:"caseProgressStatus",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,pT,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[w.O5,z.M,w.Ov],encapsulation:2}),s})(),an=(()=>{class s{constructor(){this.autoHeight=!1,this.caseProgressStatuses=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[,{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var r;t.includes(null===(r=i.data)||void 0===r?void 0:r.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-case-progress-status-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(N.x,5),2&t){let r;e.iGM(r=e.CRH())&&(i.tableView=r.first)}},inputs:{autoHeight:"autoHeight",caseProgressStatuses:"caseProgressStatuses"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.caseProgressStatuses)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[N.x],encapsulation:2}),s})();function hT(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-case-progress-status-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","caseProgressStatus_edit")("formControl",t.formControl)("caseProgressStatus",t.caseProgressStatus)}}const fT=function(){return{}};function _T(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-case-progress-status-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","caseProgressStatus_create")("formControl",t.formControl)("caseProgressStatus",e.DdM(3,fT))}}function gT(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-case-progress-status-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(u.ref.close())}),e.qZA()}2&s&&e.Q6J("caseProgressStatuses",o.data.items)}let CT=(()=>{class s extends I.fS{constructor(t){super(),this.store=t,this.store.loadCaseProgressStatusesEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.caseProgressStatuses$.pipe((0,h.w)(i=>(0,T.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Es))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","caseProgressStatus","send","close"],[1,"w-full","h-full","bg-white",3,"caseProgressStatuses","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,hT,2,3,"ng-template",null,1,e.W1O),e.YNc(3,_T,1,4,"ng-template",null,2,e.W1O),e.YNc(5,gT,1,1,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",u)("editTemplate",r)("createTemplate",l)("key",i.field.key)}},dependencies:[x.JJ,x.oH,J.$,rn,an],encapsulation:2}),s})();function ST(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-case-progress-status-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","caseProgressStatus_edit")("caseProgressStatus",t.value)}}const vT=function(){return{}};function bT(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-case-progress-status-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","caseProgressStatus_create")("caseProgressStatus",e.DdM(2,vT))}function TT(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-case-progress-status-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(null==u.ref?null:u.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("caseProgressStatuses",t.items)}}let yT=(()=>{class s extends Y{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","caseProgressStatus","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","caseProgressStatuses","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,ST,1,2,"ng-template",null,1,e.W1O),e.YNc(3,bT,1,3,"ng-template",null,2,e.W1O),e.YNc(5,TT,1,2,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[ee,rn,an],encapsulation:2}),s})(),wT=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[Es],imports:[w.ez,R.F,x.UX,V.o,H.u,Q.P,U.t,Z,j.h,K.G,I.X0.forChild({types:[{name:"case-progress-status-select",component:CT,wrappers:["form-field"]},{name:"case-progress-status-grid",component:yT}]})]}),s})(),xT=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[wT]}),s})();class St extends y.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class NT extends St{constructor(o){super("ValidateCaseStatusExcelDataAction"),this.valid=!1,this.excelData=o}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name)}),this.validationContext.addRule(new f.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof f.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(r=>r.name),newNames:[i.newName]}):i instanceof f.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,T.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class AT extends f.wS{constructor(o,t,i,r,l){super(o,t,i,r,l,!0)}}class FT extends f.ul{constructor(o,t,i,r=!1){super(o,t,r),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new f.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new AT("name","The casestatus name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class DT extends St{constructor(o){super("CreateCaseStatusAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new FT("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateCaseStatus({input:this.input}).pipe((0,h.w)(o=>(0,ie.of)(o.data.created)))}}class IT extends St{constructor(o){super("UpdateCaseStatusesAction"),this.caseStatuses=o}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.caseStatuses,!0))}performAction(){this.response=this.businessProvider.data.userUpdateCaseStatuses({input:{caseStatuses:this.caseStatuses}}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}class PT extends St{constructor(o,t){super("UpdateCaseStatusAction"),this.caseStatus=o,this.caseStatusId=t}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.caseStatus,!0)).addRule(new f.xF("Id","Id should be a CUID and not null",this.caseStatusId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateCaseStatus({caseStatusId:this.caseStatusId,input:this.caseStatus}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}let nn=(()=>{class s extends y.nH{constructor(t,i,r){super("NotificationService.CaseStatusBusinessProviderService",t,r),this.data=i}createCaseStatus(t){const i=new DT(t);return i.Do(this),i.response}updateCaseStatus(t,i){const r=new PT(t,i);return r.Do(this),r.response}importCaseStatuses(t){const i=new IT(t);return i.Do(this),i.response}validateCaseStatusExcelData(t){const i=new NT(t);return i.Do(this),i.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(O.ed),e.LFG(E.q),e.LFG(y.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),WT=(()=>{class s extends y.nH{constructor(t,i,r){super("CaseStatusService",r,t),this.businessProvider=i}createCaseStatus(t){const i=Object.fromEntries(Object.entries(t).filter(([r,l])=>null!==l));return this.businessProvider.createCaseStatus(i)}updateCaseStatus(t,i){return this.businessProvider.updateCaseStatus(t,i)}importCaseStatuses(t){return this.businessProvider.importCaseStatuses(t)}validateCaseStatusExcelData(t){return this.businessProvider.validateCaseStatusExcelData(t)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(nn,8),e.LFG(nn),e.LFG(O.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),Os=(()=>{class s extends g.m1{constructor(t,i,r,l,u,P){super({loading:!1,caseStatuses:[],done:!1,searchQuery:"",formName:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=r,this.toast=l,this.formService=u,this.caseStatusService=P,this.errors$=this.select(c=>c.errors),this.loading$=this.select(c=>c.loading),this.done$=this.select(c=>c.done),this.item$=this.select(c=>c.item),this.caseStatuses$=this.select(c=>c.caseStatuses),this.paging$=this.select(c=>c.paging),this.searchQuery$=this.select(c=>c.searchQuery),this.formName$=this.select(c=>c.formName),this.actionResult$=this.select(this.item$,this.done$,(c,d)=>({item:c,done:d}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.caseStatuses$,(c,d,n,a,m)=>({errors:c,loading:d,item:n,formName:a,caseStatuses:m}),{debounce:!0}),this.input$=this.select(this.paging$,this.searchQuery$,(c,d)=>({limit:c.limit,skip:c.skip,name:d,total:c.total})),this.setFormName=this.updater((c,d)=>Object.assign(Object.assign({},c),{formName:d})),this.setItem=this.updater((c,d)=>Object.assign(Object.assign({},c),{item:d})),this.addNewCaseStatus=this.updater((c,d)=>Object.assign(Object.assign({},c),{caseStatuses:[...c.caseStatuses,d]})),this.updateCaseStatus=this.updater((c,d)=>Object.assign(Object.assign({},c),{caseStatuses:c.caseStatuses.map(n=>n.id===d.id?d:n)})),this.addCaseStatuses=this.updater((c,d)=>Object.assign(Object.assign({},c),{caseStatuses:c.caseStatuses.concat(d)})),this.updateCaseStatuses=this.updater((c,d)=>Object.assign(Object.assign({},c),{caseStatuses:c.caseStatuses.map(n=>d.find(m=>m.id===n.id)||n)})),this.setSearchQuery=this.updater((c,d)=>Object.assign(Object.assign({},c),{searchQuery:d})),this.loadCaseStatusEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.data.userCaseStatus({caseStatusId:d}).pipe((0,g._b)(n=>{this.patchState({item:n.data.item,errors:n.errors,loading:!1})},n=>this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})))))),this.loadCaseStatusesEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.input$),(0,h.w)(([d,n])=>this.data.userCaseStatuses({input:n}).pipe((0,g._b)(a=>this.patchState({paging:{limit:n.limit,skip:n.skip,total:a.data.count.total},caseStatuses:a.data.items,errors:a.errors,loading:!1}),a=>this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})))))),this.createCaseStatusEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.caseStatusService.createCaseStatus(Object.assign({},d)).pipe((0,g._b)(n=>{this.addNewCaseStatus(n),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:n,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},n=>{n.graphQLErrors?(this.toast.error(n.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})):(this.toast.error(n.Message),this.formService.setErrors(n.Data))}))))),this.updateCaseStatusEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([d,n])=>this.caseStatusService.updateCaseStatus(d,d.id).pipe((0,g._b)(a=>{this.updateCaseStatus(a),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:a,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.deleteCaseStatusEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([d,n])=>this.data.userDeleteCaseStatus({caseStatusId:n.id}).pipe((0,g._b)(a=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:a.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.importExcelEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.caseStatusService.importCaseStatuses(d).pipe((0,te.K)(n=>{var a;return this.toast.error(null!==(a=n.Message)&&void 0!==a?a:"Failed to save",{duration:3e3}),k.E}),(0,C.b)(n=>{const a=JSON.parse(n.created),m=JSON.parse(n.updated),p=JSON.parse(n.failed),_=a.length+m.length+p.length;this.addCaseStatuses(a),this.updateCaseStatuses(m),this.toast.success(`${a.length} created, ${m.length} updated, ${p.length} failed of total ${_}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("caseStatusId")?(this.route.snapshot.paramMap.get("caseStatusId"),this.setFormName("caseStatus_edit")):this.setFormName("caseStatus_create")}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.caseStatusService.validateCaseStatusExcelData(t)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(E.q),e.LFG(A.F0),e.LFG(A.gz),e.LFG(X.F),e.LFG(q.o),e.LFG(WT))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function MT(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close.emit())})("formIsReady",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.caseStatus)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let ln=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"caseStatus_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.caseStatus=i.item})):t.formName&&t.formName.currentValue&&"caseStatus_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadCaseStatusEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.caseStatus=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Os),e.Y36(A.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-case-status-form"]],inputs:{caseStatus:"caseStatus",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,MT,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[w.O5,z.M,w.Ov],encapsulation:2}),s})(),cn=(()=>{class s{constructor(){this.autoHeight=!1,this.caseStatuses=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[,{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{headerName:"Order Index",field:"orderIndex",filter:"agNumberColumnFilter",aggFunc:"sum"},{field:"color",filter:"agTextColumnFilter"},{headerName:"Is Default",field:"isDefault",filter:"agSetColumnFilter",cellRenderer:"checkboxRenderer"},{headerName:"Ticker Date",field:"tickerDate",filter:"agNumberColumnFilter",aggFunc:"sum"},{headerName:"Max Ticker Date",field:"maxTickerDate",filter:"agNumberColumnFilter",aggFunc:"sum"},{headerName:"Move Docs",field:"moveDocs",filter:"agSetColumnFilter",cellRenderer:"checkboxRenderer"},{field:"dateCreated",filter:"agDateColumnFilter"},{headerName:"Removed",field:"removed",filter:"agSetColumnFilter",cellRenderer:"checkboxRenderer"},{field:"createdBy",filter:"agTextColumnFilter"},{field:"migSource",filter:"agTextColumnFilter"},{field:"entity",filter:"agTextColumnFilter"},{field:"temp",filter:"agTextColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var r;t.includes(null===(r=i.data)||void 0===r?void 0:r.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-case-status-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(N.x,5),2&t){let r;e.iGM(r=e.CRH())&&(i.tableView=r.first)}},inputs:{autoHeight:"autoHeight",caseStatuses:"caseStatuses"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.caseStatuses)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[N.x],encapsulation:2}),s})();function ET(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-case-status-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","caseStatus_edit")("formControl",t.formControl)("caseStatus",t.caseStatus)}}const OT=function(){return{}};function LT(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-case-status-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","caseStatus_create")("formControl",t.formControl)("caseStatus",e.DdM(3,OT))}}function GT(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-case-status-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(u.ref.close())}),e.qZA()}2&s&&e.Q6J("caseStatuses",o.data.items)}let $T=(()=>{class s extends I.fS{constructor(t){super(),this.store=t,this.store.loadCaseStatusesEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.caseStatuses$.pipe((0,h.w)(i=>(0,T.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Os))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","caseStatus","send","close"],[1,"w-full","h-full","bg-white",3,"caseStatuses","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,ET,2,3,"ng-template",null,1,e.W1O),e.YNc(3,LT,1,4,"ng-template",null,2,e.W1O),e.YNc(5,GT,1,1,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",u)("editTemplate",r)("createTemplate",l)("key",i.field.key)}},dependencies:[x.JJ,x.oH,J.$,ln,cn],encapsulation:2}),s})();function RT(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-case-status-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","caseStatus_edit")("caseStatus",t.value)}}const VT=function(){return{}};function QT(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-case-status-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","caseStatus_create")("caseStatus",e.DdM(2,VT))}function UT(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-case-status-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(null==u.ref?null:u.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("caseStatuses",t.items)}}let JT=(()=>{class s extends Y{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","caseStatus","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","caseStatuses","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,RT,1,2,"ng-template",null,1,e.W1O),e.YNc(3,QT,1,3,"ng-template",null,2,e.W1O),e.YNc(5,UT,1,2,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[ee,ln,cn],encapsulation:2}),s})(),jT=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[Os],imports:[w.ez,R.F,x.UX,V.o,H.u,Q.P,U.t,Z,j.h,K.G,I.X0.forChild({types:[{name:"case-status-select",component:$T,wrappers:["form-field"]},{name:"case-status-grid",component:JT}]})]}),s})(),zT=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[jT]}),s})();class vt extends y.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class qT extends vt{constructor(o){super("ValidateCaseTypeExcelDataAction"),this.valid=!1,this.excelData=o}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name)}),this.validationContext.addRule(new f.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof f.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(r=>r.name),newNames:[i.newName]}):i instanceof f.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,T.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class HT extends f.wS{constructor(o,t,i,r,l){super(o,t,i,r,l,!0)}}class KT extends f.ul{constructor(o,t,i,r=!1){super(o,t,r),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new f.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new HT("name","The casetype name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class kT extends vt{constructor(o){super("CreateCaseTypeAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new KT("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateCaseType({input:this.input}).pipe((0,h.w)(o=>(0,ie.of)(o.data.created)))}}class ZT extends vt{constructor(o){super("UpdateCaseTypesAction"),this.caseTypes=o}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.caseTypes,!0))}performAction(){this.response=this.businessProvider.data.userUpdateCaseTypes({input:{caseTypes:this.caseTypes}}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}class BT extends vt{constructor(o,t){super("UpdateCaseTypeAction"),this.caseType=o,this.caseTypeId=t}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.caseType,!0)).addRule(new f.xF("Id","Id should be a CUID and not null",this.caseTypeId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateCaseType({caseTypeId:this.caseTypeId,input:this.caseType}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}let dn=(()=>{class s extends y.nH{constructor(t,i,r){super("NotificationService.CaseTypeBusinessProviderService",t,r),this.data=i}createCaseType(t){const i=new kT(t);return i.Do(this),i.response}updateCaseType(t,i){const r=new BT(t,i);return r.Do(this),r.response}importCaseTypes(t){const i=new ZT(t);return i.Do(this),i.response}validateCaseTypeExcelData(t){const i=new qT(t);return i.Do(this),i.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(O.ed),e.LFG(E.q),e.LFG(y.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),YT=(()=>{class s extends y.nH{constructor(t,i,r){super("CaseTypeService",r,t),this.businessProvider=i}createCaseType(t){const i=Object.fromEntries(Object.entries(t).filter(([r,l])=>null!==l));return this.businessProvider.createCaseType(i)}updateCaseType(t,i){return this.businessProvider.updateCaseType(t,i)}importCaseTypes(t){return this.businessProvider.importCaseTypes(t)}validateCaseTypeExcelData(t){return this.businessProvider.validateCaseTypeExcelData(t)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(dn,8),e.LFG(dn),e.LFG(O.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),Ls=(()=>{class s extends g.m1{constructor(t,i,r,l,u,P){super({loading:!1,caseTypes:[],done:!1,searchQuery:"",formName:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=r,this.toast=l,this.formService=u,this.caseTypeService=P,this.errors$=this.select(c=>c.errors),this.loading$=this.select(c=>c.loading),this.done$=this.select(c=>c.done),this.item$=this.select(c=>c.item),this.caseTypes$=this.select(c=>c.caseTypes),this.paging$=this.select(c=>c.paging),this.searchQuery$=this.select(c=>c.searchQuery),this.formName$=this.select(c=>c.formName),this.actionResult$=this.select(this.item$,this.done$,(c,d)=>({item:c,done:d}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.caseTypes$,(c,d,n,a,m)=>({errors:c,loading:d,item:n,formName:a,caseTypes:m}),{debounce:!0}),this.input$=this.select(this.paging$,this.searchQuery$,(c,d)=>({limit:c.limit,skip:c.skip,name:d,total:c.total})),this.setFormName=this.updater((c,d)=>Object.assign(Object.assign({},c),{formName:d})),this.setItem=this.updater((c,d)=>Object.assign(Object.assign({},c),{item:d})),this.addNewCaseType=this.updater((c,d)=>Object.assign(Object.assign({},c),{caseTypes:[...c.caseTypes,d]})),this.updateCaseType=this.updater((c,d)=>Object.assign(Object.assign({},c),{caseTypes:c.caseTypes.map(n=>n.id===d.id?d:n)})),this.addCaseTypes=this.updater((c,d)=>Object.assign(Object.assign({},c),{caseTypes:c.caseTypes.concat(d)})),this.updateCaseTypes=this.updater((c,d)=>Object.assign(Object.assign({},c),{caseTypes:c.caseTypes.map(n=>d.find(m=>m.id===n.id)||n)})),this.setSearchQuery=this.updater((c,d)=>Object.assign(Object.assign({},c),{searchQuery:d})),this.loadCaseTypeEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.data.userCaseType({caseTypeId:d}).pipe((0,g._b)(n=>{this.patchState({item:n.data.item,errors:n.errors,loading:!1})},n=>this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})))))),this.loadCaseTypesEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.input$),(0,h.w)(([d,n])=>this.data.userCaseTypes({input:n}).pipe((0,g._b)(a=>this.patchState({paging:{limit:n.limit,skip:n.skip,total:a.data.count.total},caseTypes:a.data.items,errors:a.errors,loading:!1}),a=>this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})))))),this.createCaseTypeEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.caseTypeService.createCaseType(Object.assign({},d)).pipe((0,g._b)(n=>{this.addNewCaseType(n),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:n,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},n=>{n.graphQLErrors?(this.toast.error(n.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})):(this.toast.error(n.Message),this.formService.setErrors(n.Data))}))))),this.updateCaseTypeEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([d,n])=>this.caseTypeService.updateCaseType(d,d.id).pipe((0,g._b)(a=>{this.updateCaseType(a),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:a,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.deleteCaseTypeEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([d,n])=>this.data.userDeleteCaseType({caseTypeId:n.id}).pipe((0,g._b)(a=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:a.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.importExcelEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.caseTypeService.importCaseTypes(d).pipe((0,te.K)(n=>{var a;return this.toast.error(null!==(a=n.Message)&&void 0!==a?a:"Failed to save",{duration:3e3}),k.E}),(0,C.b)(n=>{const a=JSON.parse(n.created),m=JSON.parse(n.updated),p=JSON.parse(n.failed),_=a.length+m.length+p.length;this.addCaseTypes(a),this.updateCaseTypes(m),this.toast.success(`${a.length} created, ${m.length} updated, ${p.length} failed of total ${_}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("caseTypeId")?(this.route.snapshot.paramMap.get("caseTypeId"),this.setFormName("caseType_edit")):this.setFormName("caseType_create")}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.caseTypeService.validateCaseTypeExcelData(t)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(E.q),e.LFG(A.F0),e.LFG(A.gz),e.LFG(X.F),e.LFG(q.o),e.LFG(YT))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function XT(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close.emit())})("formIsReady",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.caseType)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let un=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"caseType_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.caseType=i.item})):t.formName&&t.formName.currentValue&&"caseType_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadCaseTypeEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.caseType=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Ls),e.Y36(A.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-case-type-form"]],inputs:{caseType:"caseType",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,XT,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[w.O5,z.M,w.Ov],encapsulation:2}),s})(),mn=(()=>{class s{constructor(){this.autoHeight=!1,this.caseTypes=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[,{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{headerName:"Order Index",field:"orderIndex",valueFormatter:t=>{var i;return(0,S.oBD)(null===(i=t.data)||void 0===i?void 0:i.orderIndex,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{field:"dateCreated",filter:"agDateColumnFilter"},{headerName:"Removed",field:"removed",filter:"agSetColumnFilter",cellRenderer:"checkboxRenderer"},{field:"migSource",filter:"agTextColumnFilter"},{field:"entity",filter:"agTextColumnFilter"},{field:"temp",filter:"agTextColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var r;t.includes(null===(r=i.data)||void 0===r?void 0:r.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-case-type-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(N.x,5),2&t){let r;e.iGM(r=e.CRH())&&(i.tableView=r.first)}},inputs:{autoHeight:"autoHeight",caseTypes:"caseTypes"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.caseTypes)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[N.x],encapsulation:2}),s})();function ey(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-case-type-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","caseType_edit")("formControl",t.formControl)("caseType",t.caseType)}}const ty=function(){return{}};function iy(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-case-type-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","caseType_create")("formControl",t.formControl)("caseType",e.DdM(3,ty))}}function sy(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-case-type-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(u.ref.close())}),e.qZA()}2&s&&e.Q6J("caseTypes",o.data.items)}let oy=(()=>{class s extends I.fS{constructor(t){super(),this.store=t,this.store.loadCaseTypesEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.caseTypes$.pipe((0,h.w)(i=>(0,T.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Ls))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","caseType","send","close"],[1,"w-full","h-full","bg-white",3,"caseTypes","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,ey,2,3,"ng-template",null,1,e.W1O),e.YNc(3,iy,1,4,"ng-template",null,2,e.W1O),e.YNc(5,sy,1,1,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",u)("editTemplate",r)("createTemplate",l)("key",i.field.key)}},dependencies:[x.JJ,x.oH,J.$,un,mn],encapsulation:2}),s})();function ry(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-case-type-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","caseType_edit")("caseType",t.value)}}const ay=function(){return{}};function ny(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-case-type-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","caseType_create")("caseType",e.DdM(2,ay))}function ly(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-case-type-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(null==u.ref?null:u.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("caseTypes",t.items)}}let cy=(()=>{class s extends Y{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","caseType","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","caseTypes","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,ry,1,2,"ng-template",null,1,e.W1O),e.YNc(3,ny,1,3,"ng-template",null,2,e.W1O),e.YNc(5,ly,1,2,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[ee,un,mn],encapsulation:2}),s})(),dy=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[Ls],imports:[w.ez,R.F,x.UX,V.o,H.u,Q.P,U.t,Z,j.h,K.G,I.X0.forChild({types:[{name:"case-type-select",component:oy,wrappers:["form-field"]},{name:"case-type-grid",component:cy}]})]}),s})(),uy=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[dy]}),s})();class bt extends y.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class my extends bt{constructor(o){super("ValidateCategoryExcelDataAction"),this.valid=!1,this.excelData=o}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name)}),this.validationContext.addRule(new f.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof f.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(r=>r.name),newNames:[i.newName]}):i instanceof f.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,T.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class py extends f.wS{constructor(o,t,i,r,l){super(o,t,i,r,l,!0)}}class hy extends f.ul{constructor(o,t,i,r=!1){super(o,t,r),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new f.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new py("name","The category name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class fy extends bt{constructor(o){super("CreateCategoryAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new hy("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateCategory({input:this.input}).pipe((0,h.w)(o=>(0,ie.of)(o.data.created)))}}class _y extends bt{constructor(o){super("UpdateCategoriesAction"),this.categories=o}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.categories,!0))}performAction(){this.response=this.businessProvider.data.userUpdateCategories({input:{categories:this.categories}}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}class gy extends bt{constructor(o,t){super("UpdateCategoryAction"),this.category=o,this.categoryId=t}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.category,!0)).addRule(new f.xF("Id","Id should be a CUID and not null",this.categoryId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateCategory({categoryId:this.categoryId,input:this.category}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}let pn=(()=>{class s extends y.nH{constructor(t,i,r){super("NotificationService.CategoryBusinessProviderService",t,r),this.data=i}createCategory(t){const i=new fy(t);return i.Do(this),i.response}updateCategory(t,i){const r=new gy(t,i);return r.Do(this),r.response}importCategories(t){const i=new _y(t);return i.Do(this),i.response}validateCategoryExcelData(t){const i=new my(t);return i.Do(this),i.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(O.ed),e.LFG(E.q),e.LFG(y.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),Cy=(()=>{class s extends y.nH{constructor(t,i,r){super("CategoryService",r,t),this.businessProvider=i}createCategory(t){const i=Object.fromEntries(Object.entries(t).filter(([r,l])=>null!==l));return this.businessProvider.createCategory(i)}updateCategory(t,i){return this.businessProvider.updateCategory(t,i)}importCategories(t){return this.businessProvider.importCategories(t)}validateCategoryExcelData(t){return this.businessProvider.validateCategoryExcelData(t)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(pn,8),e.LFG(pn),e.LFG(O.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),Gs=(()=>{class s extends g.m1{constructor(t,i,r,l,u,P){super({loading:!1,categories:[],done:!1,searchQuery:"",formName:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=r,this.toast=l,this.formService=u,this.categoryService=P,this.errors$=this.select(c=>c.errors),this.loading$=this.select(c=>c.loading),this.done$=this.select(c=>c.done),this.item$=this.select(c=>c.item),this.categories$=this.select(c=>c.categories),this.paging$=this.select(c=>c.paging),this.searchQuery$=this.select(c=>c.searchQuery),this.formName$=this.select(c=>c.formName),this.actionResult$=this.select(this.item$,this.done$,(c,d)=>({item:c,done:d}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.categories$,(c,d,n,a,m)=>({errors:c,loading:d,item:n,formName:a,categories:m}),{debounce:!0}),this.input$=this.select(this.paging$,this.searchQuery$,(c,d)=>({limit:c.limit,skip:c.skip,name:d,total:c.total})),this.setFormName=this.updater((c,d)=>Object.assign(Object.assign({},c),{formName:d})),this.setItem=this.updater((c,d)=>Object.assign(Object.assign({},c),{item:d})),this.addNewCategory=this.updater((c,d)=>Object.assign(Object.assign({},c),{categories:[...c.categories,d]})),this.updateCategory=this.updater((c,d)=>Object.assign(Object.assign({},c),{categories:c.categories.map(n=>n.id===d.id?d:n)})),this.addCategories=this.updater((c,d)=>Object.assign(Object.assign({},c),{categories:c.categories.concat(d)})),this.updateCategories=this.updater((c,d)=>Object.assign(Object.assign({},c),{categories:c.categories.map(n=>d.find(m=>m.id===n.id)||n)})),this.setSearchQuery=this.updater((c,d)=>Object.assign(Object.assign({},c),{searchQuery:d})),this.loadCategoryEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.data.userCategory({categoryId:d}).pipe((0,g._b)(n=>{this.patchState({item:n.data.item,errors:n.errors,loading:!1})},n=>this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})))))),this.loadCategoriesEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.input$),(0,h.w)(([d,n])=>this.data.userCategories({input:n}).pipe((0,g._b)(a=>this.patchState({paging:{limit:n.limit,skip:n.skip,total:a.data.count.total},categories:a.data.items,errors:a.errors,loading:!1}),a=>this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})))))),this.createCategoryEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.categoryService.createCategory(Object.assign({},d)).pipe((0,g._b)(n=>{this.addNewCategory(n),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:n,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},n=>{n.graphQLErrors?(this.toast.error(n.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})):(this.toast.error(n.Message),this.formService.setErrors(n.Data))}))))),this.updateCategoryEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([d,n])=>this.categoryService.updateCategory(d,d.id).pipe((0,g._b)(a=>{this.updateCategory(a),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:a,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.deleteCategoryEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([d,n])=>this.data.userDeleteCategory({categoryId:n.id}).pipe((0,g._b)(a=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:a.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.importExcelEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.categoryService.importCategories(d).pipe((0,te.K)(n=>{var a;return this.toast.error(null!==(a=n.Message)&&void 0!==a?a:"Failed to save",{duration:3e3}),k.E}),(0,C.b)(n=>{const a=JSON.parse(n.created),m=JSON.parse(n.updated),p=JSON.parse(n.failed),_=a.length+m.length+p.length;this.addCategories(a),this.updateCategories(m),this.toast.success(`${a.length} created, ${m.length} updated, ${p.length} failed of total ${_}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("categoryId")?(this.route.snapshot.paramMap.get("categoryId"),this.setFormName("category_edit")):this.setFormName("category_create")}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.categoryService.validateCategoryExcelData(t)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(E.q),e.LFG(A.F0),e.LFG(A.gz),e.LFG(X.F),e.LFG(q.o),e.LFG(Cy))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function Sy(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close.emit())})("formIsReady",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.category)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let hn=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"category_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.category=i.item})):t.formName&&t.formName.currentValue&&"category_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadCategoryEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.category=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Gs),e.Y36(A.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-category-form"]],inputs:{category:"category",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,Sy,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[w.O5,z.M,w.Ov],encapsulation:2}),s})(),fn=(()=>{class s{constructor(){this.autoHeight=!1,this.categories=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[,{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var r;t.includes(null===(r=i.data)||void 0===r?void 0:r.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-category-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(N.x,5),2&t){let r;e.iGM(r=e.CRH())&&(i.tableView=r.first)}},inputs:{autoHeight:"autoHeight",categories:"categories"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.categories)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[N.x],encapsulation:2}),s})();function vy(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-category-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","category_edit")("formControl",t.formControl)("category",t.category)}}const by=function(){return{}};function Ty(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-category-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","category_create")("formControl",t.formControl)("category",e.DdM(3,by))}}function yy(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-category-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(u.ref.close())}),e.qZA()}2&s&&e.Q6J("categories",o.data.items)}let wy=(()=>{class s extends I.fS{constructor(t){super(),this.store=t,this.store.loadCategoriesEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.categories$.pipe((0,h.w)(i=>(0,T.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Gs))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","category","send","close"],[1,"w-full","h-full","bg-white",3,"categories","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,vy,2,3,"ng-template",null,1,e.W1O),e.YNc(3,Ty,1,4,"ng-template",null,2,e.W1O),e.YNc(5,yy,1,1,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",u)("editTemplate",r)("createTemplate",l)("key",i.field.key)}},dependencies:[x.JJ,x.oH,J.$,hn,fn],encapsulation:2}),s})();function xy(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-category-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","category_edit")("category",t.value)}}const Ny=function(){return{}};function Ay(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-category-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","category_create")("category",e.DdM(2,Ny))}function Fy(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-category-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(null==u.ref?null:u.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("categories",t.items)}}let Dy=(()=>{class s extends Y{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","category","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","categories","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,xy,1,2,"ng-template",null,1,e.W1O),e.YNc(3,Ay,1,3,"ng-template",null,2,e.W1O),e.YNc(5,Fy,1,2,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[ee,hn,fn],encapsulation:2}),s})(),Iy=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[Gs],imports:[w.ez,R.F,x.UX,V.o,H.u,Q.P,U.t,Z,j.h,K.G,I.X0.forChild({types:[{name:"category-select",component:wy,wrappers:["form-field"]},{name:"category-grid",component:Dy}]})]}),s})(),Py=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[Iy]}),s})();var $s=ae(82011);function Wy(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close.emit())})("formIsReady",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.claim)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let _n=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"claim_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.claim=i.item})):t.formName&&t.formName.currentValue&&"claim_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadClaimEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.claim=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36($s.b),e.Y36(A.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-claim-form"]],inputs:{claim:"claim",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,Wy,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[w.O5,z.M,w.Ov],encapsulation:2}),s})(),gn=(()=>{class s{constructor(){this.autoHeight=!1,this.claims=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[{field:"priorAuthorizationRequest.name",headerName:"Prior Authorization Request",filter:"agTextColumnFilter"},{field:"claim.name",headerName:"Claim",filter:"agTextColumnFilter"},{field:"explanationOfPayment.name",headerName:"Explanation of Payment",filter:"agTextColumnFilter"},{field:"patient.name",headerName:"Patient",filter:"agTextColumnFilter"},{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{field:"originalRecordDate",filter:"agDateColumnFilter"},{field:"receivedDate",filter:"agDateColumnFilter"},{field:"dueDate",filter:"agDateColumnFilter"},{field:"patientName",filter:"agTextColumnFilter"},{field:"patientPhoneNumber",filter:"agTextColumnFilter"},{field:"patientDob",filter:"agTextColumnFilter"},{field:"patientAddressLine1",filter:"agTextColumnFilter"},{field:"patientAddressCity",filter:"agTextColumnFilter"},{field:"patientAddressState",filter:"agTextColumnFilter"},{field:"patientAddressPostalCode",filter:"agTextColumnFilter"},{field:"carrierName",filter:"agTextColumnFilter"},{field:"carrierLine1",filter:"agTextColumnFilter"},{field:"carrierLine2",filter:"agTextColumnFilter"},{field:"carrierCity",filter:"agTextColumnFilter"},{field:"carrierState",filter:"agTextColumnFilter"},{field:"carrierPostalCode",filter:"agTextColumnFilter"},{field:"insuredName",filter:"agTextColumnFilter"},{field:"insuredLine1",filter:"agTextColumnFilter"},{field:"insuredCity",filter:"agTextColumnFilter"},{field:"insuredState",filter:"agTextColumnFilter"},{field:"insuredPostalCode",filter:"agTextColumnFilter"},{field:"patientSignature",filter:"agTextColumnFilter"},{field:"diagnosisCode1",filter:"agTextColumnFilter"},{field:"diagnosisCode2",filter:"agTextColumnFilter"},{field:"diagnosisCode3",filter:"agTextColumnFilter"},{field:"diagnosisCode4",filter:"agTextColumnFilter"},{field:"diagnosisCode5",filter:"agTextColumnFilter"},{field:"diagnosisCode6",filter:"agTextColumnFilter"},{field:"diagnosisCode7",filter:"agTextColumnFilter"},{field:"diagnosisCode8",filter:"agTextColumnFilter"},{field:"federalTaxId",filter:"agTextColumnFilter"},{field:"totalCharges",filter:"agTextColumnFilter"},{field:"amountPaid",filter:"agTextColumnFilter"},{field:"physicianSignature",filter:"agTextColumnFilter"},{field:"physicianSignedOn",filter:"agTextColumnFilter"},{field:"serviceFacility",filter:"agTextColumnFilter"},{field:"serviceFacilityLine1",filter:"agTextColumnFilter"},{field:"serviceFacilityCity",filter:"agTextColumnFilter"},{field:"serviceFacilityState",filter:"agTextColumnFilter"},{field:"serviceFacilityPostalCode",filter:"agTextColumnFilter"},{field:"serviceFacilityNpi",filter:"agTextColumnFilter"},{field:"billingFacility",filter:"agTextColumnFilter"},{field:"billingLine1",filter:"agTextColumnFilter"},{field:"billingCity",filter:"agTextColumnFilter"},{field:"billingState",filter:"agTextColumnFilter"},{field:"billingPostalCode",filter:"agTextColumnFilter"},{field:"billingNpi",filter:"agTextColumnFilter"},{field:"billingPhoneNumber",filter:"agTextColumnFilter"},{field:"billingOther",filter:"agTextColumnFilter"},{field:"sessionNotes",filter:"agTextColumnFilter"},{field:"referringProvider",filter:"agTextColumnFilter"},{field:"referringProviderNpi",filter:"agTextColumnFilter"},{field:"additionalClaimInfo",filter:"agTextColumnFilter"},{field:"accountNumber",filter:"agTextColumnFilter"},{field:"referenceNumber",filter:"agTextColumnFilter"},{field:"facility",filter:"agTextColumnFilter"},{field:"priorAuthorizationNumber",filter:"agTextColumnFilter"},{field:"priorAuthorizationRequestId",filter:"agTextColumnFilter",hide:!0},{field:"providerName",filter:"agTextColumnFilter"},{field:"providerNumber",filter:"agTextColumnFilter"},{field:"vendor",filter:"agTextColumnFilter"},{field:"vendorLine1",filter:"agTextColumnFilter"},{field:"vendorCSZ",filter:"agTextColumnFilter"},{field:"vendorTaxId",filter:"agTextColumnFilter"},{headerName:"Total Approved Amount",field:"totalApprovedAmount",valueFormatter:t=>{var i;return(0,S.oBD)(null===(i=t.data)||void 0===i?void 0:i.totalApprovedAmount,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{headerName:"Total Billed Amount",field:"totalBilledAmount",valueFormatter:t=>{var i;return(0,S.oBD)(null===(i=t.data)||void 0===i?void 0:i.totalBilledAmount,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{headerName:"Total Net Pay Amount",field:"totalNetPayAmount",valueFormatter:t=>{var i;return(0,S.oBD)(null===(i=t.data)||void 0===i?void 0:i.totalNetPayAmount,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{field:"notes",filter:"agTextColumnFilter"},{field:"claimId",filter:"agTextColumnFilter",hide:!0},{field:"explanationOfPaymentId",filter:"agTextColumnFilter",hide:!0},{field:"patientId",filter:"agTextColumnFilter",hide:!0}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var r;t.includes(null===(r=i.data)||void 0===r?void 0:r.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-claim-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(N.x,5),2&t){let r;e.iGM(r=e.CRH())&&(i.tableView=r.first)}},inputs:{autoHeight:"autoHeight",claims:"claims"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.claims)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[N.x],encapsulation:2}),s})();function My(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-claim-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","claim_edit")("formControl",t.formControl)("claim",t.claim)}}const Ey=function(){return{}};function Oy(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-claim-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","claim_create")("formControl",t.formControl)("claim",e.DdM(3,Ey))}}function Ly(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-claim-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(u.ref.close())}),e.qZA()}2&s&&e.Q6J("claims",o.data.items)}let Gy=(()=>{class s extends I.fS{constructor(t){super(),this.store=t,this.store.loadClaimsEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.claims$.pipe((0,h.w)(i=>(0,T.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36($s.b))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:5,consts:[[3,"to","control","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","claim","send","close"],[1,"w-full","h-full","bg-white",3,"claims","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"ui-select-form",0),e.YNc(1,My,2,3,"ng-template",null,1,e.W1O),e.YNc(3,Oy,1,4,"ng-template",null,2,e.W1O),e.YNc(5,Ly,1,1,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[x.JJ,x.oH,J.$,_n,gn],encapsulation:2}),s})();function $y(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-claim-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","claim_edit")("claim",t.value)}}const Ry=function(){return{}};function Vy(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-claim-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","claim_create")("claim",e.DdM(2,Ry))}function Qy(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-claim-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(null==u.ref?null:u.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("claims",t.items)}}let Uy=(()=>{class s extends Y{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:6,consts:[[3,"data","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","claim","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","claims","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,$y,1,2,"ng-template",null,1,e.W1O),e.YNc(3,Vy,1,3,"ng-template",null,2,e.W1O),e.YNc(5,Qy,1,2,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("data",i.data)("title",i.to.title)("onSave",i.onSave)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[ee,_n,gn],encapsulation:2}),s})(),Jy=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[$s.b],imports:[w.ez,R.F,x.UX,V.o,H.u,Q.P,U.t,Z,j.h,K.G,I.X0.forChild({types:[{name:"claim-select",component:Gy,wrappers:["form-field"]},{name:"claim-grid",component:Uy}]})]}),s})(),jy=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[Jy]}),s})();class Tt extends y.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class zy extends Tt{constructor(o,t,i,r,l,u){super("ValidateClaimProcedureExcelDataAction"),this.valid=!1,this.excelData=o,this.placeOfServices=t,this.claimStatuses=i,this.claims=r,this.appointments=l,this.procedures=u}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name),this.validationContext.addRule(new f.mi(`placeOfServiceName_${i}_is_valid}`,"Place of Service Is Not Valid","placeOfService.name",t.placeOfService,this.placeOfServices,!0)),this.validationContext.addRule(new f.mi(`claimStatusName_${i}_is_valid}`,"Claim Status Is Not Valid","claimStatus.name",t.claimStatus,this.claimStatuses,!0)),this.validationContext.addRule(new f.mi(`claimName_${i}_is_valid}`,"Claim Is Not Valid","claim.name",t.claim,this.claims,!0)),this.validationContext.addRule(new f.mi(`appointmentName_${i}_is_valid}`,"Appointment Is Not Valid","appointment.name",t.appointment,this.appointments,!0)),this.validationContext.addRule(new f.mi(`procedureName_${i}_is_valid}`,"Procedure Is Not Valid","procedure.name",t.procedure,this.procedures,!0))}),this.validationContext.addRule(new f.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof f.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(r=>r.name),newNames:[i.newName]}):i instanceof f.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,T.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class qy extends f.wS{constructor(o,t,i,r,l){super(o,t,i,r,l,!0)}}class Hy extends f.ul{constructor(o,t,i,r=!1){super(o,t,r),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new f.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new qy("name","The claimprocedure name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class Ky extends Tt{constructor(o){super("CreateClaimProcedureAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new Hy("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateClaimProcedure({input:this.input}).pipe((0,h.w)(o=>(0,ie.of)(o.data.created)))}}class ky extends Tt{constructor(o){super("UpdateClaimProceduresAction"),this.claimProcedures=o}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.claimProcedures,!0))}performAction(){this.response=this.businessProvider.data.userUpdateClaimProcedures({input:{claimProcedures:this.claimProcedures}}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}class Zy extends Tt{constructor(o,t){super("UpdateClaimProcedureAction"),this.claimProcedure=o,this.claimProcedureId=t}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.claimProcedure,!0)).addRule(new f.xF("Id","Id should be a CUID and not null",this.claimProcedureId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateClaimProcedure({claimProcedureId:this.claimProcedureId,input:this.claimProcedure}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}let Cn=(()=>{class s extends y.nH{constructor(t,i,r){super("NotificationService.ClaimProcedureBusinessProviderService",t,r),this.data=i}createClaimProcedure(t){const i=new Ky(t);return i.Do(this),i.response}updateClaimProcedure(t,i){const r=new Zy(t,i);return r.Do(this),r.response}importClaimProcedures(t){const i=new ky(t);return i.Do(this),i.response}validateClaimProcedureExcelData(t,i,r,l,u,P){const b=new zy(t,i,r,l,u,P);return b.Do(this),b.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(O.ed),e.LFG(E.q),e.LFG(y.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),By=(()=>{class s extends y.nH{constructor(t,i,r){super("ClaimProcedureService",r,t),this.businessProvider=i}createClaimProcedure(t){return this.businessProvider.createClaimProcedure(t)}updateClaimProcedure(t,i){return this.businessProvider.updateClaimProcedure(t,i)}importClaimProcedures(t){return this.businessProvider.importClaimProcedures(t)}validateClaimProcedureExcelData(t,i,r,l,u,P){return this.businessProvider.validateClaimProcedureExcelData(t,i,r,l,u,P)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(Cn,8),e.LFG(Cn),e.LFG(O.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),yt=(()=>{class s extends g.m1{constructor(t,i,r,l,u,P){if(super({loading:!1,claimProcedures:[],done:!1,searchQuery:"",formName:void 0,placeOfServiceId:void 0,claimStatusId:void 0,claimId:void 0,appointmentId:void 0,procedureId:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=r,this.toast=l,this.formService=u,this.claimProcedureService=P,this.errors$=this.select(p=>p.errors),this.loading$=this.select(p=>p.loading),this.done$=this.select(p=>p.done),this.item$=this.select(p=>p.item),this.claimProcedures$=this.select(p=>p.claimProcedures),this.placeOfServices$=this.select(p=>p.placeOfServices||[]),this.claimStatuses$=this.select(p=>p.claimStatuses||[]),this.claims$=this.select(p=>p.claims||[]),this.appointments$=this.select(p=>p.appointments||[]),this.procedures$=this.select(p=>p.procedures||[]),this.placeOfServiceId$=this.select(p=>p.placeOfServiceId),this.claimStatusId$=this.select(p=>p.claimStatusId),this.claimId$=this.select(p=>p.claimId),this.appointmentId$=this.select(p=>p.appointmentId),this.procedureId$=this.select(p=>p.procedureId),this.paging$=this.select(p=>p.paging),this.searchQuery$=this.select(p=>p.searchQuery),this.formName$=this.select(p=>p.formName),this.actionResult$=this.select(this.item$,this.done$,(p,_)=>({item:p,done:_}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.claimProcedures$,this.placeOfServices$,this.claimStatuses$,this.claims$,this.appointments$,this.procedures$,(p,_,v,D,se,me,G,$,M,L)=>({errors:p,loading:_,item:v,formName:D,claimProcedures:se,placeOfServices:me,claimStatuses:G,claims:$,appointments:M,procedures:L}),{debounce:!0}),this.input$=this.select(this.paging$,this.placeOfServiceId$,this.claimStatusId$,this.claimId$,this.appointmentId$,this.procedureId$,this.searchQuery$,(p,_,v,D,se,me,G)=>({limit:p.limit,skip:p.skip,name:G,placeOfServiceId:_,claimStatusId:v,claimId:D,appointmentId:se,procedureId:me,total:p.total})),this.setFormName=this.updater((p,_)=>Object.assign(Object.assign({},p),{formName:_})),this.setPlaceOfServiceId=this.updater((p,_)=>Object.assign(Object.assign({},p),{placeOfServiceId:_})),this.setClaimStatusId=this.updater((p,_)=>Object.assign(Object.assign({},p),{claimStatusId:_})),this.setClaimId=this.updater((p,_)=>Object.assign(Object.assign({},p),{claimId:_})),this.setAppointmentId=this.updater((p,_)=>Object.assign(Object.assign({},p),{appointmentId:_})),this.setProcedureId=this.updater((p,_)=>Object.assign(Object.assign({},p),{procedureId:_})),this.filterPlaceOfServices=p=>this.data.userSelectPlaceOfServices({input:{name:p}}).pipe((0,g._b)(_=>{let v=_.data.items;return this.patchState({placeOfServices:v}),v},_=>this.patchState({errors:_.graphQLErrors?_.graphQLErrors:_})),(0,B.U)(_=>_.data.items)),this.filterClaimStatuses=p=>this.data.userSelectClaimStatuses({input:{name:p}}).pipe((0,g._b)(_=>{let v=_.data.items;return this.patchState({claimStatuses:v}),v},_=>this.patchState({errors:_.graphQLErrors?_.graphQLErrors:_})),(0,B.U)(_=>_.data.items)),this.filterClaims=p=>this.data.userSelectClaims({input:{name:p}}).pipe((0,g._b)(_=>{let v=_.data.items;return this.patchState({claims:v}),v},_=>this.patchState({errors:_.graphQLErrors?_.graphQLErrors:_})),(0,B.U)(_=>_.data.items)),this.filterAppointments=p=>this.data.userSelectAppointments({input:{name:p}}).pipe((0,g._b)(_=>{let v=_.data.items;return this.patchState({appointments:v}),v},_=>this.patchState({errors:_.graphQLErrors?_.graphQLErrors:_})),(0,B.U)(_=>_.data.items)),this.filterProcedures=p=>this.data.userSelectProcedures({input:{name:p}}).pipe((0,g._b)(_=>{let v=_.data.items;return this.patchState({procedures:v}),v},_=>this.patchState({errors:_.graphQLErrors?_.graphQLErrors:_})),(0,B.U)(_=>_.data.items)),this.addPlaceOfService=this.updater((p,_)=>Object.assign(Object.assign({},p),{placeOfServices:p.placeOfServices.concat(_)})),this.addClaimStatus=this.updater((p,_)=>Object.assign(Object.assign({},p),{claimStatuses:p.claimStatuses.concat(_)})),this.addClaim=this.updater((p,_)=>Object.assign(Object.assign({},p),{claims:p.claims.concat(_)})),this.addAppointment=this.updater((p,_)=>Object.assign(Object.assign({},p),{appointments:p.appointments.concat(_)})),this.addProcedure=this.updater((p,_)=>Object.assign(Object.assign({},p),{procedures:p.procedures.concat(_)})),this.setItem=this.updater((p,_)=>Object.assign(Object.assign({},p),{item:_})),this.addNewClaimProcedure=this.updater((p,_)=>Object.assign(Object.assign({},p),{claimProcedures:[...p.claimProcedures,_]})),this.updateClaimProcedure=this.updater((p,_)=>Object.assign(Object.assign({},p),{claimProcedures:p.claimProcedures.map(v=>v.id===_.id?_:v)})),this.addClaimProcedures=this.updater((p,_)=>Object.assign(Object.assign({},p),{claimProcedures:p.claimProcedures.concat(_)})),this.updateClaimProcedures=this.updater((p,_)=>Object.assign(Object.assign({},p),{claimProcedures:p.claimProcedures.map(v=>_.find(se=>se.id===v.id)||v)})),this.setSearchQuery=this.updater((p,_)=>Object.assign(Object.assign({},p),{searchQuery:_})),this.loadClaimProcedureEffect=this.effect(p=>p.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(_=>this.data.userClaimProcedure({claimProcedureId:_}).pipe((0,g._b)(v=>{this.patchState({item:v.data.item,errors:v.errors,loading:!1})},v=>this.patchState({loading:!1,errors:v.graphQLErrors?v.graphQLErrors:v})))))),this.loadClaimProceduresEffect=this.effect(p=>p.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.input$),(0,h.w)(([_,v])=>this.data.userClaimProcedures({input:v}).pipe((0,g._b)(D=>this.patchState({paging:{limit:v.limit,skip:v.skip,total:D.data.count.total},claimProcedures:D.data.items,errors:D.errors,loading:!1}),D=>this.patchState({loading:!1,errors:D.graphQLErrors?D.graphQLErrors:D})))))),this.createClaimProcedureEffect=this.effect(p=>p.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(_=>this.claimProcedureService.createClaimProcedure(Object.assign({},_)).pipe((0,g._b)(v=>{this.addNewClaimProcedure(v),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:v,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},v=>{v.graphQLErrors?(this.toast.error(v.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:v.graphQLErrors?v.graphQLErrors:v})):(this.toast.error(v.Message),this.formService.setErrors(v.Data))}))))),this.updateClaimProcedureEffect=this.effect(p=>p.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([_,v])=>this.claimProcedureService.updateClaimProcedure(_,_.id).pipe((0,g._b)(D=>{this.updateClaimProcedure(D),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:D,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},D=>{D.graphQLErrors?(this.toast.error(D.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:D.graphQLErrors?D.graphQLErrors:D})):(this.toast.error(D.Message),this.formService.setErrors(D.Data))}))))),this.deleteClaimProcedureEffect=this.effect(p=>p.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([_,v])=>this.data.userDeleteClaimProcedure({claimProcedureId:v.id}).pipe((0,g._b)(D=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:D.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},D=>{D.graphQLErrors?(this.toast.error(D.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:D.graphQLErrors?D.graphQLErrors:D})):(this.toast.error(D.Message),this.formService.setErrors(D.Data))}))))),this.importExcelEffect=this.effect(p=>p.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(_=>this.claimProcedureService.importClaimProcedures(_).pipe((0,te.K)(v=>{var D;return this.toast.error(null!==(D=v.Message)&&void 0!==D?D:"Failed to save",{duration:3e3}),k.E}),(0,C.b)(v=>{const D=JSON.parse(v.created),se=JSON.parse(v.updated),me=JSON.parse(v.failed),G=D.length+se.length+me.length;this.addClaimProcedures(D),this.updateClaimProcedures(se),this.toast.success(`${D.length} created, ${se.length} updated, ${me.length} failed of total ${G}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("claimProcedureId")?(this.route.snapshot.paramMap.get("claimProcedureId"),this.setFormName("claimProcedure_edit")):this.setFormName("claimProcedure_create"),this.route.snapshot.paramMap.has("placeOfServiceId")){var c=this.route.snapshot.paramMap.get("placeOfServiceId");this.setPlaceOfServiceId(c)}if(this.route.snapshot.paramMap.has("claimStatusId")){var d=this.route.snapshot.paramMap.get("claimStatusId");this.setClaimStatusId(d)}if(this.route.snapshot.paramMap.has("claimId")){var n=this.route.snapshot.paramMap.get("claimId");this.setClaimId(n)}if(this.route.snapshot.paramMap.has("appointmentId")){var a=this.route.snapshot.paramMap.get("appointmentId");this.setAppointmentId(a)}if(this.route.snapshot.paramMap.has("procedureId")){var m=this.route.snapshot.paramMap.get("procedureId");this.setProcedureId(m)}}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.claimProcedureService.validateClaimProcedureExcelData(t,i.placeOfServices,i.claimStatuses,i.claims,i.appointments,i.procedures)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(E.q),e.LFG(A.F0),e.LFG(A.gz),e.LFG(X.F),e.LFG(q.o),e.LFG(By))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function Yy(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close.emit())})("formIsReady",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.claimProcedure)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let Sn=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"claimProcedure_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({id:null,name:""}),this.store.vm$.subscribe(i=>{this.claimProcedure=i.item})):t.formName&&t.formName.currentValue&&"claimProcedure_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadClaimProcedureEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.claimProcedure=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(yt),e.Y36(A.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-claim-procedure-form"]],inputs:{claimProcedure:"claimProcedure",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,Yy,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[w.O5,z.M,w.Ov],encapsulation:2}),s})(),vn=(()=>{class s{constructor(){this.autoHeight=!1,this.claimProcedures=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[{field:"placeOfService.name",headerName:"Place of Service",filter:"agTextColumnFilter"},{field:"claimStatus.name",headerName:"Claim Status",filter:"agTextColumnFilter"},{field:"claim.name",headerName:"Claim",filter:"agTextColumnFilter"},{field:"appointment.name",headerName:"Appointment",filter:"agTextColumnFilter"},{field:"procedure.name",headerName:"Procedure",filter:"agTextColumnFilter"},{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{field:"claimProcedureCodeId",filter:"agTextColumnFilter"},{field:"procedureCodeId",filter:"agTextColumnFilter"},{field:"claimId",filter:"agTextColumnFilter",hide:!0},{field:"fromDateOfService",filter:"agDateColumnFilter"},{field:"toDateOfService",filter:"agDateColumnFilter"},{field:"placeOfServiceId",filter:"agTextColumnFilter",hide:!0},{field:"nationalDrugCode",filter:"agTextColumnFilter"},{field:"drugUnit",filter:"agTextColumnFilter"},{field:"drugQuantity",filter:"agTextColumnFilter"},{headerName:"Quantity",field:"quantity",valueFormatter:t=>{var i;return(0,S.oBD)(null===(i=t.data)||void 0===i?void 0:i.quantity,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{headerName:"Billed Amount",field:"billedAmount",valueFormatter:t=>{var i;return(0,S.oBD)(null===(i=t.data)||void 0===i?void 0:i.billedAmount,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{headerName:"Approved Amount",field:"approvedAmount",valueFormatter:t=>{var i;return(0,S.oBD)(null===(i=t.data)||void 0===i?void 0:i.approvedAmount,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{headerName:"Adjustment Amount",field:"adjustmentAmount",valueFormatter:t=>{var i;return(0,S.oBD)(null===(i=t.data)||void 0===i?void 0:i.adjustmentAmount,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{headerName:"Net Payment Amount",field:"netPaymentAmount",valueFormatter:t=>{var i;return(0,S.oBD)(null===(i=t.data)||void 0===i?void 0:i.netPaymentAmount,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{field:"paymentMethod",filter:"agTextColumnFilter"},{field:"internalMemo",filter:"agTextColumnFilter"},{field:"explainationOfBenefitsComment",filter:"agTextColumnFilter"},{field:"claimStatusId",filter:"agTextColumnFilter",hide:!0},{field:"reason",filter:"agTextColumnFilter"},{field:"procedureCode",filter:"agTextColumnFilter"},{field:"diagnosisPointer",filter:"agTextColumnFilter"},{field:"modifier1",filter:"agTextColumnFilter"},{field:"modifier2",filter:"agTextColumnFilter"},{field:"modifier3",filter:"agTextColumnFilter"},{field:"modifier4",filter:"agTextColumnFilter"},{field:"appointmentId",filter:"agTextColumnFilter",hide:!0},{field:"procedureId",filter:"agTextColumnFilter",hide:!0}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var r;t.includes(null===(r=i.data)||void 0===r?void 0:r.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-claim-procedure-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(N.x,5),2&t){let r;e.iGM(r=e.CRH())&&(i.tableView=r.first)}},inputs:{autoHeight:"autoHeight",claimProcedures:"claimProcedures"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","data","showSidebar","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("data",i.claimProcedures)("showSidebar",!1)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[N.x],encapsulation:2}),s})();function Xy(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-claim-procedure-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","claimProcedure_edit")("formControl",t.formControl)("claimProcedure",t.claimProcedure)}}const ew=function(){return{}};function tw(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-claim-procedure-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","claimProcedure_create")("formControl",t.formControl)("claimProcedure",e.DdM(3,ew))}}function iw(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-claim-procedure-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(u.ref.close())}),e.qZA()}2&s&&e.Q6J("claimProcedures",o.data.items)}let sw=(()=>{class s extends I.fS{constructor(t){super(),this.store=t,this.store.loadClaimProceduresEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.claimProcedures$.pipe((0,h.w)(i=>(0,T.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(yt))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e._Bn([yt]),e.qOj],decls:7,vars:5,consts:[[3,"to","control","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","claimProcedure","send","close"],[1,"w-full","h-full","bg-white",3,"claimProcedures","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"ui-select-form",0),e.YNc(1,Xy,2,3,"ng-template",null,1,e.W1O),e.YNc(3,tw,1,4,"ng-template",null,2,e.W1O),e.YNc(5,iw,1,1,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[x.JJ,x.oH,J.$,Sn,vn],encapsulation:2}),s})();function ow(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-claim-procedure-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","claimProcedure_edit")("claimProcedure",t.value)}}const rw=function(){return{}};function aw(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-claim-procedure-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","claimProcedure_create")("claimProcedure",e.DdM(2,rw))}function nw(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-claim-procedure-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(null==u.ref?null:u.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("claimProcedures",t.items)}}let lw=(()=>{class s extends Y{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:6,consts:[[3,"data","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","claimProcedure","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","claimProcedures","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,ow,1,2,"ng-template",null,1,e.W1O),e.YNc(3,aw,1,3,"ng-template",null,2,e.W1O),e.YNc(5,nw,1,2,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("data",i.data)("title",i.to.title)("onSave",i.onSave)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[ee,Sn,vn],encapsulation:2}),s})(),cw=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[yt],imports:[w.ez,R.F,x.UX,V.o,H.u,Q.P,U.t,Z,j.h,K.G,I.X0.forChild({types:[{name:"claim-procedure-select",component:sw,wrappers:["form-field"]},{name:"claim-procedure-grid",component:lw}]})]}),s})(),dw=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[cw]}),s})();class wt extends y.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class uw extends wt{constructor(o){super("ValidateClaimStatusExcelDataAction"),this.valid=!1,this.excelData=o}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name)}),this.validationContext.addRule(new f.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof f.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(r=>r.name),newNames:[i.newName]}):i instanceof f.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,T.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class mw extends f.wS{constructor(o,t,i,r,l){super(o,t,i,r,l,!0)}}class pw extends f.ul{constructor(o,t,i,r=!1){super(o,t,r),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new f.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new mw("name","The claimstatus name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class hw extends wt{constructor(o){super("CreateClaimStatusAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new pw("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateClaimStatus({input:this.input}).pipe((0,h.w)(o=>(0,ie.of)(o.data.created)))}}class fw extends wt{constructor(o){super("UpdateClaimStatusesAction"),this.claimStatuses=o}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.claimStatuses,!0))}performAction(){this.response=this.businessProvider.data.userUpdateClaimStatuses({input:{claimStatuses:this.claimStatuses}}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}class _w extends wt{constructor(o,t){super("UpdateClaimStatusAction"),this.claimStatus=o,this.claimStatusId=t}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.claimStatus,!0)).addRule(new f.xF("Id","Id should be a CUID and not null",this.claimStatusId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateClaimStatus({claimStatusId:this.claimStatusId,input:this.claimStatus}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}let bn=(()=>{class s extends y.nH{constructor(t,i,r){super("NotificationService.ClaimStatusBusinessProviderService",t,r),this.data=i}createClaimStatus(t){const i=new hw(t);return i.Do(this),i.response}updateClaimStatus(t,i){const r=new _w(t,i);return r.Do(this),r.response}importClaimStatuses(t){const i=new fw(t);return i.Do(this),i.response}validateClaimStatusExcelData(t){const i=new uw(t);return i.Do(this),i.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(O.ed),e.LFG(E.q),e.LFG(y.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),gw=(()=>{class s extends y.nH{constructor(t,i,r){super("ClaimStatusService",r,t),this.businessProvider=i}createClaimStatus(t){const i=Object.fromEntries(Object.entries(t).filter(([r,l])=>null!==l));return this.businessProvider.createClaimStatus(i)}updateClaimStatus(t,i){return this.businessProvider.updateClaimStatus(t,i)}importClaimStatuses(t){return this.businessProvider.importClaimStatuses(t)}validateClaimStatusExcelData(t){return this.businessProvider.validateClaimStatusExcelData(t)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(bn,8),e.LFG(bn),e.LFG(O.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),Rs=(()=>{class s extends g.m1{constructor(t,i,r,l,u,P){super({loading:!1,claimStatuses:[],done:!1,searchQuery:"",formName:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=r,this.toast=l,this.formService=u,this.claimStatusService=P,this.errors$=this.select(c=>c.errors),this.loading$=this.select(c=>c.loading),this.done$=this.select(c=>c.done),this.item$=this.select(c=>c.item),this.claimStatuses$=this.select(c=>c.claimStatuses),this.paging$=this.select(c=>c.paging),this.searchQuery$=this.select(c=>c.searchQuery),this.formName$=this.select(c=>c.formName),this.actionResult$=this.select(this.item$,this.done$,(c,d)=>({item:c,done:d}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.claimStatuses$,(c,d,n,a,m)=>({errors:c,loading:d,item:n,formName:a,claimStatuses:m}),{debounce:!0}),this.input$=this.select(this.paging$,this.searchQuery$,(c,d)=>({limit:c.limit,skip:c.skip,name:d,total:c.total})),this.setFormName=this.updater((c,d)=>Object.assign(Object.assign({},c),{formName:d})),this.setItem=this.updater((c,d)=>Object.assign(Object.assign({},c),{item:d})),this.addNewClaimStatus=this.updater((c,d)=>Object.assign(Object.assign({},c),{claimStatuses:[...c.claimStatuses,d]})),this.updateClaimStatus=this.updater((c,d)=>Object.assign(Object.assign({},c),{claimStatuses:c.claimStatuses.map(n=>n.id===d.id?d:n)})),this.addClaimStatuses=this.updater((c,d)=>Object.assign(Object.assign({},c),{claimStatuses:c.claimStatuses.concat(d)})),this.updateClaimStatuses=this.updater((c,d)=>Object.assign(Object.assign({},c),{claimStatuses:c.claimStatuses.map(n=>d.find(m=>m.id===n.id)||n)})),this.setSearchQuery=this.updater((c,d)=>Object.assign(Object.assign({},c),{searchQuery:d})),this.loadClaimStatusEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.data.userClaimStatus({claimStatusId:d}).pipe((0,g._b)(n=>{this.patchState({item:n.data.item,errors:n.errors,loading:!1})},n=>this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})))))),this.loadClaimStatusesEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.input$),(0,h.w)(([d,n])=>this.data.userClaimStatuses({input:n}).pipe((0,g._b)(a=>this.patchState({paging:{limit:n.limit,skip:n.skip,total:a.data.count.total},claimStatuses:a.data.items,errors:a.errors,loading:!1}),a=>this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})))))),this.createClaimStatusEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.claimStatusService.createClaimStatus(Object.assign({},d)).pipe((0,g._b)(n=>{this.addNewClaimStatus(n),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:n,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},n=>{n.graphQLErrors?(this.toast.error(n.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})):(this.toast.error(n.Message),this.formService.setErrors(n.Data))}))))),this.updateClaimStatusEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([d,n])=>this.claimStatusService.updateClaimStatus(d,d.id).pipe((0,g._b)(a=>{this.updateClaimStatus(a),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:a,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.deleteClaimStatusEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([d,n])=>this.data.userDeleteClaimStatus({claimStatusId:n.id}).pipe((0,g._b)(a=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:a.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.importExcelEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.claimStatusService.importClaimStatuses(d).pipe((0,te.K)(n=>{var a;return this.toast.error(null!==(a=n.Message)&&void 0!==a?a:"Failed to save",{duration:3e3}),k.E}),(0,C.b)(n=>{const a=JSON.parse(n.created),m=JSON.parse(n.updated),p=JSON.parse(n.failed),_=a.length+m.length+p.length;this.addClaimStatuses(a),this.updateClaimStatuses(m),this.toast.success(`${a.length} created, ${m.length} updated, ${p.length} failed of total ${_}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("claimStatusId")?(this.route.snapshot.paramMap.get("claimStatusId"),this.setFormName("claimStatus_edit")):this.setFormName("claimStatus_create")}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.claimStatusService.validateClaimStatusExcelData(t)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(E.q),e.LFG(A.F0),e.LFG(A.gz),e.LFG(X.F),e.LFG(q.o),e.LFG(gw))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function Cw(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close.emit())})("formIsReady",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.claimStatus)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let Tn=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"claimStatus_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.claimStatus=i.item})):t.formName&&t.formName.currentValue&&"claimStatus_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadClaimStatusEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.claimStatus=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Rs),e.Y36(A.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-claim-status-form"]],inputs:{claimStatus:"claimStatus",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,Cw,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[w.O5,z.M,w.Ov],encapsulation:2}),s})(),yn=(()=>{class s{constructor(){this.autoHeight=!1,this.claimStatuses=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[,{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var r;t.includes(null===(r=i.data)||void 0===r?void 0:r.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-claim-status-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(N.x,5),2&t){let r;e.iGM(r=e.CRH())&&(i.tableView=r.first)}},inputs:{autoHeight:"autoHeight",claimStatuses:"claimStatuses"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.claimStatuses)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[N.x],encapsulation:2}),s})();function Sw(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-claim-status-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","claimStatus_edit")("formControl",t.formControl)("claimStatus",t.claimStatus)}}const vw=function(){return{}};function bw(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-claim-status-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","claimStatus_create")("formControl",t.formControl)("claimStatus",e.DdM(3,vw))}}function Tw(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-claim-status-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(u.ref.close())}),e.qZA()}2&s&&e.Q6J("claimStatuses",o.data.items)}let yw=(()=>{class s extends I.fS{constructor(t){super(),this.store=t,this.store.loadClaimStatusesEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.claimStatuses$.pipe((0,h.w)(i=>(0,T.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Rs))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","claimStatus","send","close"],[1,"w-full","h-full","bg-white",3,"claimStatuses","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,Sw,2,3,"ng-template",null,1,e.W1O),e.YNc(3,bw,1,4,"ng-template",null,2,e.W1O),e.YNc(5,Tw,1,1,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",u)("editTemplate",r)("createTemplate",l)("key",i.field.key)}},dependencies:[x.JJ,x.oH,J.$,Tn,yn],encapsulation:2}),s})();function ww(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-claim-status-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","claimStatus_edit")("claimStatus",t.value)}}const xw=function(){return{}};function Nw(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-claim-status-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","claimStatus_create")("claimStatus",e.DdM(2,xw))}function Aw(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-claim-status-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(null==u.ref?null:u.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("claimStatuses",t.items)}}let Fw=(()=>{class s extends Y{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","claimStatus","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","claimStatuses","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,ww,1,2,"ng-template",null,1,e.W1O),e.YNc(3,Nw,1,3,"ng-template",null,2,e.W1O),e.YNc(5,Aw,1,2,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[ee,Tn,yn],encapsulation:2}),s})(),Dw=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[Rs],imports:[w.ez,R.F,x.UX,V.o,H.u,Q.P,U.t,Z,j.h,K.G,I.X0.forChild({types:[{name:"claim-status-select",component:yw,wrappers:["form-field"]},{name:"claim-status-grid",component:Fw}]})]}),s})(),Iw=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[Dw]}),s})();var Vs=ae(60908);function Pw(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close.emit())})("formIsReady",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.clinicalProviderLocationAvailability)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let wn=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"clinicalProviderLocationAvailability_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.clinicalProviderLocationAvailability=i.item})):t.formName&&t.formName.currentValue&&"clinicalProviderLocationAvailability_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadClinicalProviderLocationAvailabilityEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.clinicalProviderLocationAvailability=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Vs.R),e.Y36(A.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-clinical-provider-location-availability-form"]],inputs:{clinicalProviderLocationAvailability:"clinicalProviderLocationAvailability",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,Pw,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[w.O5,z.M,w.Ov],encapsulation:2}),s})(),xn=(()=>{class s{constructor(){this.autoHeight=!1,this.clinicalProviderLocationAvailabilities=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[{field:"clinicalProviderLocation.name",headerName:"Clinical Provider Location",filter:"agTextColumnFilter"},{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{field:"day",filter:"agTextColumnFilter"},{field:"startTime",filter:"agTextColumnFilter"},{field:"endTime",filter:"agTextColumnFilter"},{field:"clinicalProviderLocationId",filter:"agTextColumnFilter",hide:!0}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var r;t.includes(null===(r=i.data)||void 0===r?void 0:r.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-clinical-provider-location-availability-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(N.x,5),2&t){let r;e.iGM(r=e.CRH())&&(i.tableView=r.first)}},inputs:{autoHeight:"autoHeight",clinicalProviderLocationAvailabilities:"clinicalProviderLocationAvailabilities"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.clinicalProviderLocationAvailabilities)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[N.x],encapsulation:2}),s})();function Ww(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-clinical-provider-location-availability-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","clinicalProviderLocationAvailability_edit")("formControl",t.formControl)("clinicalProviderLocationAvailability",t.clinicalProviderLocationAvailability)}}const Mw=function(){return{}};function Ew(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-clinical-provider-location-availability-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","clinicalProviderLocationAvailability_create")("formControl",t.formControl)("clinicalProviderLocationAvailability",e.DdM(3,Mw))}}function Ow(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-clinical-provider-location-availability-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(u.ref.close())}),e.qZA()}2&s&&e.Q6J("clinicalProviderLocationAvailabilities",o.data.items)}let Lw=(()=>{class s extends I.fS{constructor(t){super(),this.store=t,this.store.loadClinicalProviderLocationAvailabilitiesEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.clinicalProviderLocationAvailabilities$.pipe((0,h.w)(i=>(0,T.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Vs.R))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","clinicalProviderLocationAvailability","send","close"],[1,"w-full","h-full","bg-white",3,"clinicalProviderLocationAvailabilities","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,Ww,2,3,"ng-template",null,1,e.W1O),e.YNc(3,Ew,1,4,"ng-template",null,2,e.W1O),e.YNc(5,Ow,1,1,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",u)("editTemplate",r)("createTemplate",l)("key",i.field.key)}},dependencies:[x.JJ,x.oH,J.$,wn,xn],encapsulation:2}),s})();function Gw(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-clinical-provider-location-availability-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","clinicalProviderLocationAvailability_edit")("clinicalProviderLocationAvailability",t.value)}}const $w=function(){return{}};function Rw(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-clinical-provider-location-availability-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","clinicalProviderLocationAvailability_create")("clinicalProviderLocationAvailability",e.DdM(2,$w))}function Vw(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-clinical-provider-location-availability-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(null==u.ref?null:u.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("clinicalProviderLocationAvailabilities",t.items)}}let Qw=(()=>{class s extends Y{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","clinicalProviderLocationAvailability","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","clinicalProviderLocationAvailabilities","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,Gw,1,2,"ng-template",null,1,e.W1O),e.YNc(3,Rw,1,3,"ng-template",null,2,e.W1O),e.YNc(5,Vw,1,2,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[ee,wn,xn],encapsulation:2}),s})(),Uw=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[Vs.R],imports:[w.ez,R.F,x.UX,V.o,H.u,Q.P,U.t,Z,j.h,K.G,I.X0.forChild({types:[{name:"clinical-provider-location-availability-select",component:Lw,wrappers:["form-field"]},{name:"clinical-provider-location-availability-grid",component:Qw}]})]}),s})(),Jw=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[Uw]}),s})();var Qs=ae(30760);function jw(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close.emit())})("formIsReady",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.clinicalProviderLocation)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let Nn=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"clinicalProviderLocation_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({id:null,name:""}),this.store.vm$.subscribe(i=>{this.clinicalProviderLocation=i.item})):t.formName&&t.formName.currentValue&&"clinicalProviderLocation_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadClinicalProviderLocationEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.clinicalProviderLocation=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Qs.j),e.Y36(A.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-clinical-provider-location-form"]],inputs:{clinicalProviderLocation:"clinicalProviderLocation",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,jw,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[w.O5,z.M,w.Ov],encapsulation:2}),s})(),An=(()=>{class s{constructor(){this.autoHeight=!1,this.clinicalProviderLocations=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[{field:"clinicalProvider.name",headerName:"Clinical Provider",filter:"agTextColumnFilter"},{field:"location.name",headerName:"Location",filter:"agTextColumnFilter"},{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{field:"clinicalProviderId",filter:"agTextColumnFilter",hide:!0},{field:"locationId",filter:"agTextColumnFilter",hide:!0}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var r;t.includes(null===(r=i.data)||void 0===r?void 0:r.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-clinical-provider-location-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(N.x,5),2&t){let r;e.iGM(r=e.CRH())&&(i.tableView=r.first)}},inputs:{autoHeight:"autoHeight",clinicalProviderLocations:"clinicalProviderLocations"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.clinicalProviderLocations)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[N.x],encapsulation:2}),s})();function zw(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-clinical-provider-location-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","clinicalProviderLocation_edit")("formControl",t.formControl)("clinicalProviderLocation",t.clinicalProviderLocation)}}const qw=function(){return{}};function Hw(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-clinical-provider-location-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","clinicalProviderLocation_create")("formControl",t.formControl)("clinicalProviderLocation",e.DdM(3,qw))}}function Kw(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-clinical-provider-location-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(u.ref.close())}),e.qZA()}2&s&&e.Q6J("clinicalProviderLocations",o.data.items)}let kw=(()=>{class s extends I.fS{constructor(t){super(),this.store=t,this.store.loadClinicalProviderLocationsEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.clinicalProviderLocations$.pipe((0,h.w)(i=>(0,T.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Qs.j))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","clinicalProviderLocation","send","close"],[1,"w-full","h-full","bg-white",3,"clinicalProviderLocations","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,zw,2,3,"ng-template",null,1,e.W1O),e.YNc(3,Hw,1,4,"ng-template",null,2,e.W1O),e.YNc(5,Kw,1,1,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",u)("editTemplate",r)("createTemplate",l)("key",i.field.key)}},dependencies:[x.JJ,x.oH,J.$,Nn,An],encapsulation:2}),s})();function Zw(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-clinical-provider-location-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","clinicalProviderLocation_edit")("clinicalProviderLocation",t.value)}}const Bw=function(){return{}};function Yw(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-clinical-provider-location-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","clinicalProviderLocation_create")("clinicalProviderLocation",e.DdM(2,Bw))}function Xw(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-clinical-provider-location-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(null==u.ref?null:u.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("clinicalProviderLocations",t.items)}}let ex=(()=>{class s extends Y{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","clinicalProviderLocation","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","clinicalProviderLocations","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,Zw,1,2,"ng-template",null,1,e.W1O),e.YNc(3,Yw,1,3,"ng-template",null,2,e.W1O),e.YNc(5,Xw,1,2,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[ee,Nn,An],encapsulation:2}),s})(),tx=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[Qs.j],imports:[w.ez,R.F,x.UX,V.o,H.u,Q.P,U.t,Z,j.h,K.G,I.X0.forChild({types:[{name:"clinical-provider-location-select",component:kw,wrappers:["form-field"]},{name:"clinical-provider-location-grid",component:ex}]})]}),s})(),ix=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[tx]}),s})();var Us=ae(94929);function sx(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close.emit())})("formIsReady",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.clinicalProvider)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let Fn=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"clinicalProvider_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.clinicalProvider=i.item})):t.formName&&t.formName.currentValue&&"clinicalProvider_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadClinicalProviderEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.clinicalProvider=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Us.D),e.Y36(A.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-clinical-provider-form"]],inputs:{clinicalProvider:"clinicalProvider",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,sx,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[w.O5,z.M,w.Ov],encapsulation:2}),s})(),Dn=(()=>{class s{constructor(){this.autoHeight=!1,this.clinicalProviders=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[{field:"vendor.name",headerName:"Vendor",filter:"agTextColumnFilter"},{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{field:"vendorId",filter:"agTextColumnFilter",hide:!0},{field:"expertId",filter:"agTextColumnFilter",hide:!0},{field:"npi",filter:"agTextColumnFilter"},{field:"honorific",filter:"agTextColumnFilter"},{field:"firstName",filter:"agTextColumnFilter"},{field:"lastName",filter:"agTextColumnFilter"},{field:"suffix",filter:"agTextColumnFilter"},{field:"phoneNumber",filter:"agTextColumnFilter"},{field:"emailAddress",filter:"agTextColumnFilter"},{field:"profilePictureId",filter:"agTextColumnFilter",hide:!0},{field:"compressProfilePictureId",filter:"agTextColumnFilter",hide:!0}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var r;t.includes(null===(r=i.data)||void 0===r?void 0:r.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-clinical-provider-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(N.x,5),2&t){let r;e.iGM(r=e.CRH())&&(i.tableView=r.first)}},inputs:{autoHeight:"autoHeight",clinicalProviders:"clinicalProviders"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.clinicalProviders)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[N.x],encapsulation:2}),s})();function ox(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-clinical-provider-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","clinicalProvider_edit")("formControl",t.formControl)("clinicalProvider",t.clinicalProvider)}}const rx=function(){return{}};function ax(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-clinical-provider-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","clinicalProvider_create")("formControl",t.formControl)("clinicalProvider",e.DdM(3,rx))}}function nx(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-clinical-provider-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(u.ref.close())}),e.qZA()}2&s&&e.Q6J("clinicalProviders",o.data.items)}let lx=(()=>{class s extends I.fS{constructor(t){super(),this.store=t,this.store.loadClinicalProvidersEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.clinicalProviders$.pipe((0,h.w)(i=>(0,T.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Us.D))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","clinicalProvider","send","close"],[1,"w-full","h-full","bg-white",3,"clinicalProviders","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,ox,2,3,"ng-template",null,1,e.W1O),e.YNc(3,ax,1,4,"ng-template",null,2,e.W1O),e.YNc(5,nx,1,1,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",u)("editTemplate",r)("createTemplate",l)("key",i.field.key)}},dependencies:[x.JJ,x.oH,J.$,Fn,Dn],encapsulation:2}),s})();function cx(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-clinical-provider-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","clinicalProvider_edit")("clinicalProvider",t.value)}}const dx=function(){return{}};function ux(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-clinical-provider-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","clinicalProvider_create")("clinicalProvider",e.DdM(2,dx))}function mx(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-clinical-provider-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(null==u.ref?null:u.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("clinicalProviders",t.items)}}let px=(()=>{class s extends Y{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","clinicalProvider","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","clinicalProviders","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,cx,1,2,"ng-template",null,1,e.W1O),e.YNc(3,ux,1,3,"ng-template",null,2,e.W1O),e.YNc(5,mx,1,2,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[ee,Fn,Dn],encapsulation:2}),s})(),hx=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[Us.D],imports:[w.ez,R.F,x.UX,V.o,H.u,Q.P,U.t,Z,j.h,K.G,I.X0.forChild({types:[{name:"clinical-provider-select",component:lx,wrappers:["form-field"]},{name:"clinical-provider-grid",component:px}]})]}),s})(),fx=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[hx]}),s})();class xt extends y.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class _x extends xt{constructor(o,t,i){super("ValidateClinicalProviderSpecialtyExcelDataAction"),this.valid=!1,this.excelData=o,this.clinicalProviders=t,this.specialties=i}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name),this.validationContext.addRule(new f.mi(`clinicalProviderName_${i}_is_valid}`,"Clinical Provider Is Not Valid","clinicalProvider.name",t.clinicalProvider,this.clinicalProviders,!0)).addRule(new f.mi(`specialtyName_${i}_is_valid}`,"Specialty Is Not Valid","specialty.name",t.specialty,this.specialties,!0))}),this.validationContext.addRule(new f.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof f.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(r=>r.name),newNames:[i.newName]}):i instanceof f.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,T.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class gx extends f.wS{constructor(o,t,i,r,l){super(o,t,i,r,l,!0)}}class Cx extends f.ul{constructor(o,t,i,r=!1){super(o,t,r),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new f.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new gx("name","The clinicalproviderspecialty name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class Sx extends xt{constructor(o){super("CreateClinicalProviderSpecialtyAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new Cx("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateClinicalProviderSpecialty({input:this.input}).pipe((0,h.w)(o=>(0,ie.of)(o.data.created)))}}class vx extends xt{constructor(o){super("UpdateClinicalProviderSpecialtiesAction"),this.clinicalProviderSpecialties=o}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.clinicalProviderSpecialties,!0))}performAction(){this.response=this.businessProvider.data.userUpdateClinicalProviderSpecialties({input:{clinicalProviderSpecialties:this.clinicalProviderSpecialties}}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}class bx extends xt{constructor(o,t){super("UpdateClinicalProviderSpecialtyAction"),this.clinicalProviderSpecialty=o,this.clinicalProviderSpecialtyId=t}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.clinicalProviderSpecialty,!0)).addRule(new f.xF("Id","Id should be a CUID and not null",this.clinicalProviderSpecialtyId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateClinicalProviderSpecialty({clinicalProviderSpecialtyId:this.clinicalProviderSpecialtyId,input:this.clinicalProviderSpecialty}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}let In=(()=>{class s extends y.nH{constructor(t,i,r){super("NotificationService.ClinicalProviderSpecialtyBusinessProviderService",t,r),this.data=i}createClinicalProviderSpecialty(t){const i=new Sx(t);return i.Do(this),i.response}updateClinicalProviderSpecialty(t,i){const r=new bx(t,i);return r.Do(this),r.response}importClinicalProviderSpecialties(t){const i=new vx(t);return i.Do(this),i.response}validateClinicalProviderSpecialtyExcelData(t,i,r){const l=new _x(t,i,r);return l.Do(this),l.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(O.ed),e.LFG(E.q),e.LFG(y.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),Tx=(()=>{class s extends y.nH{constructor(t,i,r){super("ClinicalProviderSpecialtyService",r,t),this.businessProvider=i}createClinicalProviderSpecialty(t){const i=Object.fromEntries(Object.entries(t).filter(([r,l])=>null!==l));return this.businessProvider.createClinicalProviderSpecialty(i)}updateClinicalProviderSpecialty(t,i){return this.businessProvider.updateClinicalProviderSpecialty(t,i)}importClinicalProviderSpecialties(t){return this.businessProvider.importClinicalProviderSpecialties(t)}validateClinicalProviderSpecialtyExcelData(t,i,r){return this.businessProvider.validateClinicalProviderSpecialtyExcelData(t,i,r)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(In,8),e.LFG(In),e.LFG(O.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),Nt=(()=>{class s extends g.m1{constructor(t,i,r,l,u,P){if(super({loading:!1,clinicalProviderSpecialties:[],done:!1,searchQuery:"",formName:void 0,clinicalProviderId:void 0,specialtyId:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=r,this.toast=l,this.formService=u,this.clinicalProviderSpecialtyService=P,this.errors$=this.select(n=>n.errors),this.loading$=this.select(n=>n.loading),this.done$=this.select(n=>n.done),this.item$=this.select(n=>n.item),this.clinicalProviderSpecialties$=this.select(n=>n.clinicalProviderSpecialties),this.clinicalProviders$=this.select(n=>n.clinicalProviders||[]),this.specialties$=this.select(n=>n.specialties||[]),this.clinicalProviderId$=this.select(n=>n.clinicalProviderId),this.specialtyId$=this.select(n=>n.specialtyId),this.paging$=this.select(n=>n.paging),this.searchQuery$=this.select(n=>n.searchQuery),this.formName$=this.select(n=>n.formName),this.actionResult$=this.select(this.item$,this.done$,(n,a)=>({item:n,done:a}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.clinicalProviderSpecialties$,this.clinicalProviders$,this.specialties$,(n,a,m,p,_,v,D)=>({errors:n,loading:a,item:m,formName:p,clinicalProviderSpecialties:_,clinicalProviders:v,specialties:D}),{debounce:!0}),this.input$=this.select(this.paging$,this.clinicalProviderId$,this.specialtyId$,this.searchQuery$,(n,a,m,p)=>({limit:n.limit,skip:n.skip,name:p,clinicalProviderId:a,specialtyId:m,total:n.total})),this.setFormName=this.updater((n,a)=>Object.assign(Object.assign({},n),{formName:a})),this.setClinicalProviderId=this.updater((n,a)=>Object.assign(Object.assign({},n),{clinicalProviderId:a})),this.setSpecialtyId=this.updater((n,a)=>Object.assign(Object.assign({},n),{specialtyId:a})),this.filterClinicalProviders=n=>this.data.userSelectClinicalProviders({input:{name:n}}).pipe((0,g._b)(a=>{let m=a.data.items;return this.patchState({clinicalProviders:m}),m},a=>this.patchState({errors:a.graphQLErrors?a.graphQLErrors:a})),(0,B.U)(a=>a.data.items)),this.filterSpecialties=n=>this.data.userSelectSpecialties({input:{name:n}}).pipe((0,g._b)(a=>{let m=a.data.items;return this.patchState({specialties:m}),m},a=>this.patchState({errors:a.graphQLErrors?a.graphQLErrors:a})),(0,B.U)(a=>a.data.items)),this.addClinicalProvider=this.updater((n,a)=>Object.assign(Object.assign({},n),{clinicalProviders:n.clinicalProviders.concat(a)})),this.addSpecialty=this.updater((n,a)=>Object.assign(Object.assign({},n),{specialties:n.specialties.concat(a)})),this.setItem=this.updater((n,a)=>Object.assign(Object.assign({},n),{item:a})),this.addNewClinicalProviderSpecialty=this.updater((n,a)=>Object.assign(Object.assign({},n),{clinicalProviderSpecialties:[...n.clinicalProviderSpecialties,a]})),this.updateClinicalProviderSpecialty=this.updater((n,a)=>Object.assign(Object.assign({},n),{clinicalProviderSpecialties:n.clinicalProviderSpecialties.map(m=>m.id===a.id?a:m)})),this.addClinicalProviderSpecialties=this.updater((n,a)=>Object.assign(Object.assign({},n),{clinicalProviderSpecialties:n.clinicalProviderSpecialties.concat(a)})),this.updateClinicalProviderSpecialties=this.updater((n,a)=>Object.assign(Object.assign({},n),{clinicalProviderSpecialties:n.clinicalProviderSpecialties.map(m=>a.find(_=>_.id===m.id)||m)})),this.setSearchQuery=this.updater((n,a)=>Object.assign(Object.assign({},n),{searchQuery:a})),this.loadClinicalProviderSpecialtyEffect=this.effect(n=>n.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(a=>this.data.userClinicalProviderSpecialty({clinicalProviderSpecialtyId:a}).pipe((0,g._b)(m=>{this.patchState({item:m.data.item,errors:m.errors,loading:!1})},m=>this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})))))),this.loadClinicalProviderSpecialtiesEffect=this.effect(n=>n.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.input$),(0,h.w)(([a,m])=>this.data.userClinicalProviderSpecialties({input:m}).pipe((0,g._b)(p=>this.patchState({paging:{limit:m.limit,skip:m.skip,total:p.data.count.total},clinicalProviderSpecialties:p.data.items,errors:p.errors,loading:!1}),p=>this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})))))),this.createClinicalProviderSpecialtyEffect=this.effect(n=>n.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(a=>this.clinicalProviderSpecialtyService.createClinicalProviderSpecialty(Object.assign({},a)).pipe((0,g._b)(m=>{this.addNewClinicalProviderSpecialty(m),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:m,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},m=>{m.graphQLErrors?(this.toast.error(m.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})):(this.toast.error(m.Message),this.formService.setErrors(m.Data))}))))),this.updateClinicalProviderSpecialtyEffect=this.effect(n=>n.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([a,m])=>this.clinicalProviderSpecialtyService.updateClinicalProviderSpecialty(a,a.id).pipe((0,g._b)(p=>{this.updateClinicalProviderSpecialty(p),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:p,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},p=>{p.graphQLErrors?(this.toast.error(p.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})):(this.toast.error(p.Message),this.formService.setErrors(p.Data))}))))),this.deleteClinicalProviderSpecialtyEffect=this.effect(n=>n.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([a,m])=>this.data.userDeleteClinicalProviderSpecialty({clinicalProviderSpecialtyId:m.id}).pipe((0,g._b)(p=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:p.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},p=>{p.graphQLErrors?(this.toast.error(p.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})):(this.toast.error(p.Message),this.formService.setErrors(p.Data))}))))),this.importExcelEffect=this.effect(n=>n.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(a=>this.clinicalProviderSpecialtyService.importClinicalProviderSpecialties(a).pipe((0,te.K)(m=>{var p;return this.toast.error(null!==(p=m.Message)&&void 0!==p?p:"Failed to save",{duration:3e3}),k.E}),(0,C.b)(m=>{const p=JSON.parse(m.created),_=JSON.parse(m.updated),v=JSON.parse(m.failed),D=p.length+_.length+v.length;this.addClinicalProviderSpecialties(p),this.updateClinicalProviderSpecialties(_),this.toast.success(`${p.length} created, ${_.length} updated, ${v.length} failed of total ${D}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("clinicalProviderSpecialtyId")?(this.route.snapshot.paramMap.get("clinicalProviderSpecialtyId"),this.setFormName("clinicalProviderSpecialty_edit")):this.setFormName("clinicalProviderSpecialty_create"),this.route.snapshot.paramMap.has("clinicalProviderId")){var c=this.route.snapshot.paramMap.get("clinicalProviderId");this.setClinicalProviderId(c)}if(this.route.snapshot.paramMap.has("specialtyId")){var d=this.route.snapshot.paramMap.get("specialtyId");this.setSpecialtyId(d)}}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.clinicalProviderSpecialtyService.validateClinicalProviderSpecialtyExcelData(t,i.clinicalProviders,i.specialties)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(E.q),e.LFG(A.F0),e.LFG(A.gz),e.LFG(X.F),e.LFG(q.o),e.LFG(Tx))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function yx(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close.emit())})("formIsReady",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.clinicalProviderSpecialty)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let Pn=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"clinicalProviderSpecialty_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({id:null,name:""}),this.store.vm$.subscribe(i=>{this.clinicalProviderSpecialty=i.item})):t.formName&&t.formName.currentValue&&"clinicalProviderSpecialty_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadClinicalProviderSpecialtyEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.clinicalProviderSpecialty=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Nt),e.Y36(A.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-clinical-provider-specialty-form"]],inputs:{clinicalProviderSpecialty:"clinicalProviderSpecialty",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,yx,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[w.O5,z.M,w.Ov],encapsulation:2}),s})(),Wn=(()=>{class s{constructor(){this.autoHeight=!1,this.clinicalProviderSpecialties=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[{field:"clinicalProvider.name",headerName:"Clinical Provider",filter:"agTextColumnFilter"},{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{field:"npi",filter:"agTextColumnFilter"},{field:"clinicalProviderId",filter:"agTextColumnFilter",hide:!0},{field:"clinicalProvider.name",header:"ClinicalProvider",filter:"agTextColumnFilter",hide:!0},{field:"specialtyId",filter:"agTextColumnFilter",hide:!0},{field:"specialty.name",header:"Specialty",filter:"agTextColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var r;t.includes(null===(r=i.data)||void 0===r?void 0:r.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-clinical-provider-specialty-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(N.x,5),2&t){let r;e.iGM(r=e.CRH())&&(i.tableView=r.first)}},inputs:{autoHeight:"autoHeight",clinicalProviderSpecialties:"clinicalProviderSpecialties"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","data","showSidebar","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("data",i.clinicalProviderSpecialties)("showSidebar",!1)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[N.x],encapsulation:2}),s})();function wx(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-clinical-provider-specialty-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","clinicalProviderSpecialty_edit")("formControl",t.formControl)("clinicalProviderSpecialty",t.clinicalProviderSpecialty)}}const xx=function(){return{}};function Nx(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-clinical-provider-specialty-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","clinicalProviderSpecialty_create")("formControl",t.formControl)("clinicalProviderSpecialty",e.DdM(3,xx))}}function Ax(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-clinical-provider-specialty-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(u.ref.close())}),e.qZA()}2&s&&e.Q6J("clinicalProviderSpecialties",o.data.items)}let Fx=(()=>{class s extends I.fS{constructor(t){super(),this.store=t,this.store.loadClinicalProviderSpecialtiesEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.clinicalProviderSpecialties$.pipe((0,h.w)(i=>(0,T.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Nt))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e._Bn([Nt]),e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","clinicalProviderSpecialty","send","close"],[1,"w-full","h-full","bg-white",3,"clinicalProviderSpecialties","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,wx,2,3,"ng-template",null,1,e.W1O),e.YNc(3,Nx,1,4,"ng-template",null,2,e.W1O),e.YNc(5,Ax,1,1,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",u)("editTemplate",r)("createTemplate",l)("key",i.field.key)}},dependencies:[x.JJ,x.oH,J.$,Pn,Wn],encapsulation:2}),s})();function Dx(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-clinical-provider-specialty-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","clinicalProviderSpecialty_edit")("clinicalProviderSpecialty",t.value)}}const Ix=function(){return{}};function Px(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-clinical-provider-specialty-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","clinicalProviderSpecialty_create")("clinicalProviderSpecialty",e.DdM(2,Ix))}function Wx(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-clinical-provider-specialty-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(null==u.ref?null:u.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("clinicalProviderSpecialties",t.items)}}let Mx=(()=>{class s extends Y{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","clinicalProviderSpecialty","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","clinicalProviderSpecialties","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,Dx,1,2,"ng-template",null,1,e.W1O),e.YNc(3,Px,1,3,"ng-template",null,2,e.W1O),e.YNc(5,Wx,1,2,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[ee,Pn,Wn],encapsulation:2}),s})(),Ex=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[Nt],imports:[w.ez,R.F,x.UX,V.o,H.u,Q.P,U.t,Z,j.h,K.G,I.X0.forChild({types:[{name:"clinical-provider-specialty-select",component:Fx,wrappers:["form-field"]},{name:"clinical-provider-specialty-grid",component:Mx}]})]}),s})(),Ox=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[Ex]}),s})();class At extends y.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class Lx extends At{constructor(o,t,i){super("ValidateClinicalProviderTagExcelDataAction"),this.valid=!1,this.excelData=o,this.clinicalProviders=t,this.tags=i}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name),this.validationContext.addRule(new f.mi(`clinicalProviderName_${i}_is_valid}`,"Clinical Provider Is Not Valid","clinicalProvider.name",t.clinicalProvider,this.clinicalProviders,!0)),this.validationContext.addRule(new f.mi(`tagName_${i}_is_valid}`,"Tag Is Not Valid","tag.name",t.tag,this.tags,!0))}),this.validationContext.addRule(new f.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof f.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(r=>r.name),newNames:[i.newName]}):i instanceof f.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,T.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class Gx extends f.wS{constructor(o,t,i,r,l){super(o,t,i,r,l,!0)}}class $x extends f.ul{constructor(o,t,i,r=!1){super(o,t,r),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new f.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new Gx("name","The clinicalprovidertag name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class Rx extends At{constructor(o){super("CreateClinicalProviderTagAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new $x("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateClinicalProviderTag({input:this.input}).pipe((0,h.w)(o=>(0,ie.of)(o.data.created)))}}class Vx extends At{constructor(o){super("UpdateClinicalProviderTagsAction"),this.clinicalProviderTags=o}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.clinicalProviderTags,!0))}performAction(){this.response=this.businessProvider.data.userUpdateClinicalProviderTags({input:{clinicalProviderTags:this.clinicalProviderTags}}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}class Qx extends At{constructor(o,t){super("UpdateClinicalProviderTagAction"),this.clinicalProviderTag=o,this.clinicalProviderTagId=t}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.clinicalProviderTag,!0)).addRule(new f.xF("Id","Id should be a CUID and not null",this.clinicalProviderTagId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateClinicalProviderTag({clinicalProviderTagId:this.clinicalProviderTagId,input:this.clinicalProviderTag}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}let Mn=(()=>{class s extends y.nH{constructor(t,i,r){super("NotificationService.ClinicalProviderTagBusinessProviderService",t,r),this.data=i}createClinicalProviderTag(t){const i=new Rx(t);return i.Do(this),i.response}updateClinicalProviderTag(t,i){const r=new Qx(t,i);return r.Do(this),r.response}importClinicalProviderTags(t){const i=new Vx(t);return i.Do(this),i.response}validateClinicalProviderTagExcelData(t,i,r){const l=new Lx(t,i,r);return l.Do(this),l.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(O.ed),e.LFG(E.q),e.LFG(y.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),Ux=(()=>{class s extends y.nH{constructor(t,i,r){super("ClinicalProviderTagService",r,t),this.businessProvider=i}createClinicalProviderTag(t){const i=Object.fromEntries(Object.entries(t).filter(([r,l])=>null!==l));return this.businessProvider.createClinicalProviderTag(i)}updateClinicalProviderTag(t,i){return this.businessProvider.updateClinicalProviderTag(t,i)}importClinicalProviderTags(t){return this.businessProvider.importClinicalProviderTags(t)}validateClinicalProviderTagExcelData(t,i,r){return this.businessProvider.validateClinicalProviderTagExcelData(t,i,r)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(Mn,8),e.LFG(Mn),e.LFG(O.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),Js=(()=>{class s extends g.m1{constructor(t,i,r,l,u,P){if(super({loading:!1,clinicalProviderTags:[],done:!1,searchQuery:"",formName:void 0,clinicalProviderId:void 0,tagId:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=r,this.toast=l,this.formService=u,this.clinicalProviderTagService=P,this.errors$=this.select(n=>n.errors),this.loading$=this.select(n=>n.loading),this.done$=this.select(n=>n.done),this.item$=this.select(n=>n.item),this.clinicalProviderTags$=this.select(n=>n.clinicalProviderTags),this.clinicalProviders$=this.select(n=>n.clinicalProviders||[]),this.tags$=this.select(n=>n.tags||[]),this.clinicalProviderId$=this.select(n=>n.clinicalProviderId),this.tagId$=this.select(n=>n.tagId),this.paging$=this.select(n=>n.paging),this.searchQuery$=this.select(n=>n.searchQuery),this.formName$=this.select(n=>n.formName),this.actionResult$=this.select(this.item$,this.done$,(n,a)=>({item:n,done:a}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.clinicalProviderTags$,this.clinicalProviders$,this.tags$,(n,a,m,p,_,v,D)=>({errors:n,loading:a,item:m,formName:p,clinicalProviderTags:_,clinicalProviders:v,tags:D}),{debounce:!0}),this.input$=this.select(this.paging$,this.clinicalProviderId$,this.tagId$,this.searchQuery$,(n,a,m,p)=>({limit:n.limit,skip:n.skip,name:p,clinicalProviderId:a,tagId:m,total:n.total})),this.setFormName=this.updater((n,a)=>Object.assign(Object.assign({},n),{formName:a})),this.setClinicalProviderId=this.updater((n,a)=>Object.assign(Object.assign({},n),{clinicalProviderId:a})),this.setTagId=this.updater((n,a)=>Object.assign(Object.assign({},n),{tagId:a})),this.filterClinicalProviders=n=>this.data.userSelectClinicalProviders({input:{name:n}}).pipe((0,g._b)(a=>{let m=a.data.items;return this.patchState({clinicalProviders:m}),m},a=>this.patchState({errors:a.graphQLErrors?a.graphQLErrors:a})),(0,B.U)(a=>a.data.items)),this.filterTags=n=>this.data.userSelectTags({input:{name:n}}).pipe((0,g._b)(a=>{let m=a.data.items;return this.patchState({tags:m}),m},a=>this.patchState({errors:a.graphQLErrors?a.graphQLErrors:a})),(0,B.U)(a=>a.data.items)),this.addClinicalProvider=this.updater((n,a)=>Object.assign(Object.assign({},n),{clinicalProviders:n.clinicalProviders.concat(a)})),this.addTag=this.updater((n,a)=>Object.assign(Object.assign({},n),{tags:n.tags.concat(a)})),this.setItem=this.updater((n,a)=>Object.assign(Object.assign({},n),{item:a})),this.addNewClinicalProviderTag=this.updater((n,a)=>Object.assign(Object.assign({},n),{clinicalProviderTags:[...n.clinicalProviderTags,a]})),this.updateClinicalProviderTag=this.updater((n,a)=>Object.assign(Object.assign({},n),{clinicalProviderTags:n.clinicalProviderTags.map(m=>m.id===a.id?a:m)})),this.addClinicalProviderTags=this.updater((n,a)=>Object.assign(Object.assign({},n),{clinicalProviderTags:n.clinicalProviderTags.concat(a)})),this.updateClinicalProviderTags=this.updater((n,a)=>Object.assign(Object.assign({},n),{clinicalProviderTags:n.clinicalProviderTags.map(m=>a.find(_=>_.id===m.id)||m)})),this.setSearchQuery=this.updater((n,a)=>Object.assign(Object.assign({},n),{searchQuery:a})),this.loadClinicalProviderTagEffect=this.effect(n=>n.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(a=>this.data.userClinicalProviderTag({clinicalProviderTagId:a}).pipe((0,g._b)(m=>{this.patchState({item:m.data.item,errors:m.errors,loading:!1})},m=>this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})))))),this.loadClinicalProviderTagsEffect=this.effect(n=>n.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.input$),(0,h.w)(([a,m])=>this.data.userClinicalProviderTags({input:m}).pipe((0,g._b)(p=>this.patchState({paging:{limit:m.limit,skip:m.skip,total:p.data.count.total},clinicalProviderTags:p.data.items,errors:p.errors,loading:!1}),p=>this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})))))),this.createClinicalProviderTagEffect=this.effect(n=>n.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(a=>this.clinicalProviderTagService.createClinicalProviderTag(Object.assign({},a)).pipe((0,g._b)(m=>{this.addNewClinicalProviderTag(m),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:m,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},m=>{m.graphQLErrors?(this.toast.error(m.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})):(this.toast.error(m.Message),this.formService.setErrors(m.Data))}))))),this.updateClinicalProviderTagEffect=this.effect(n=>n.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([a,m])=>this.clinicalProviderTagService.updateClinicalProviderTag(a,a.id).pipe((0,g._b)(p=>{this.updateClinicalProviderTag(p),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:p,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},p=>{p.graphQLErrors?(this.toast.error(p.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})):(this.toast.error(p.Message),this.formService.setErrors(p.Data))}))))),this.deleteClinicalProviderTagEffect=this.effect(n=>n.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([a,m])=>this.data.userDeleteClinicalProviderTag({clinicalProviderTagId:m.id}).pipe((0,g._b)(p=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:p.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},p=>{p.graphQLErrors?(this.toast.error(p.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})):(this.toast.error(p.Message),this.formService.setErrors(p.Data))}))))),this.importExcelEffect=this.effect(n=>n.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(a=>this.clinicalProviderTagService.importClinicalProviderTags(a).pipe((0,te.K)(m=>{var p;return this.toast.error(null!==(p=m.Message)&&void 0!==p?p:"Failed to save",{duration:3e3}),k.E}),(0,C.b)(m=>{const p=JSON.parse(m.created),_=JSON.parse(m.updated),v=JSON.parse(m.failed),D=p.length+_.length+v.length;this.addClinicalProviderTags(p),this.updateClinicalProviderTags(_),this.toast.success(`${p.length} created, ${_.length} updated, ${v.length} failed of total ${D}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("clinicalProviderTagId")?(this.route.snapshot.paramMap.get("clinicalProviderTagId"),this.setFormName("clinicalProviderTag_edit")):this.setFormName("clinicalProviderTag_create"),this.route.snapshot.paramMap.has("clinicalProviderId")){var c=this.route.snapshot.paramMap.get("clinicalProviderId");this.setClinicalProviderId(c)}if(this.route.snapshot.paramMap.has("tagId")){var d=this.route.snapshot.paramMap.get("tagId");this.setTagId(d)}}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.clinicalProviderTagService.validateClinicalProviderTagExcelData(t,i.clinicalProviders,i.tags)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(E.q),e.LFG(A.F0),e.LFG(A.gz),e.LFG(X.F),e.LFG(q.o),e.LFG(Ux))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function Jx(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close.emit())})("formIsReady",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.clinicalProviderTag)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let En=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"clinicalProviderTag_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.clinicalProviderTag=i.item})):t.formName&&t.formName.currentValue&&"clinicalProviderTag_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadClinicalProviderTagEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.clinicalProviderTag=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Js),e.Y36(A.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-clinical-provider-tag-form"]],inputs:{clinicalProviderTag:"clinicalProviderTag",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,Jx,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[w.O5,z.M,w.Ov],encapsulation:2}),s})(),On=(()=>{class s{constructor(){this.autoHeight=!1,this.clinicalProviderTags=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[{field:"clinicalProvider.name",headerName:"Clinical Provider",filter:"agTextColumnFilter"},{field:"tag.name",headerName:"Tag",filter:"agTextColumnFilter"},{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{field:"clinicalProviderId",filter:"agTextColumnFilter",hide:!0},{field:"tagId",filter:"agTextColumnFilter",hide:!0}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var r;t.includes(null===(r=i.data)||void 0===r?void 0:r.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-clinical-provider-tag-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(N.x,5),2&t){let r;e.iGM(r=e.CRH())&&(i.tableView=r.first)}},inputs:{autoHeight:"autoHeight",clinicalProviderTags:"clinicalProviderTags"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.clinicalProviderTags)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[N.x],encapsulation:2}),s})();function jx(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-clinical-provider-tag-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","clinicalProviderTag_edit")("formControl",t.formControl)("clinicalProviderTag",t.clinicalProviderTag)}}const zx=function(){return{}};function qx(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-clinical-provider-tag-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","clinicalProviderTag_create")("formControl",t.formControl)("clinicalProviderTag",e.DdM(3,zx))}}function Hx(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-clinical-provider-tag-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(u.ref.close())}),e.qZA()}2&s&&e.Q6J("clinicalProviderTags",o.data.items)}let Kx=(()=>{class s extends I.fS{constructor(t){super(),this.store=t,this.store.loadClinicalProviderTagsEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.clinicalProviderTags$.pipe((0,h.w)(i=>(0,T.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Js))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","clinicalProviderTag","send","close"],[1,"w-full","h-full","bg-white",3,"clinicalProviderTags","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,jx,2,3,"ng-template",null,1,e.W1O),e.YNc(3,qx,1,4,"ng-template",null,2,e.W1O),e.YNc(5,Hx,1,1,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",u)("editTemplate",r)("createTemplate",l)("key",i.field.key)}},dependencies:[x.JJ,x.oH,J.$,En,On],encapsulation:2}),s})();function kx(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-clinical-provider-tag-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","clinicalProviderTag_edit")("clinicalProviderTag",t.value)}}const Zx=function(){return{}};function Bx(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-clinical-provider-tag-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","clinicalProviderTag_create")("clinicalProviderTag",e.DdM(2,Zx))}function Yx(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-clinical-provider-tag-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(null==u.ref?null:u.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("clinicalProviderTags",t.items)}}let Xx=(()=>{class s extends Y{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","clinicalProviderTag","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","clinicalProviderTags","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,kx,1,2,"ng-template",null,1,e.W1O),e.YNc(3,Bx,1,3,"ng-template",null,2,e.W1O),e.YNc(5,Yx,1,2,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[ee,En,On],encapsulation:2}),s})(),eN=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[Js],imports:[w.ez,R.F,x.UX,V.o,H.u,Q.P,U.t,Z,j.h,K.G,I.X0.forChild({types:[{name:"clinical-provider-tag-select",component:Kx,wrappers:["form-field"]},{name:"clinical-provider-tag-grid",component:Xx}]})]}),s})(),tN=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[eN]}),s})();class Ft extends y.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class iN extends Ft{constructor(o,t){super("ValidateContactEmailExcelDataAction"),this.valid=!1,this.excelData=o,this.contacts=t}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name),this.validationContext.addRule(new f.mi(`contactName_${i}_is_valid}`,"Contact Is Not Valid","contact.name",t.contact,this.contacts,!0))}),this.validationContext.addRule(new f.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof f.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(r=>r.name),newNames:[i.newName]}):i instanceof f.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,T.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class sN extends f.wS{constructor(o,t,i,r,l){super(o,t,i,r,l,!0)}}class oN extends f.ul{constructor(o,t,i,r=!1){super(o,t,r),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new f.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new sN("name","The contactemail name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class rN extends Ft{constructor(o){super("CreateContactEmailAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new oN("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateContactEmail({input:this.input}).pipe((0,h.w)(o=>(0,ie.of)(o.data.created)))}}class aN extends Ft{constructor(o){super("UpdateContactEmailsAction"),this.contactEmails=o}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.contactEmails,!0))}performAction(){this.response=this.businessProvider.data.userUpdateContactEmails({input:{contactEmails:this.contactEmails}}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}class nN extends Ft{constructor(o,t){super("UpdateContactEmailAction"),this.contactEmail=o,this.contactEmailId=t}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.contactEmail,!0)).addRule(new f.xF("Id","Id should be a CUID and not null",this.contactEmailId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateContactEmail({contactEmailId:this.contactEmailId,input:this.contactEmail}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}let Ln=(()=>{class s extends y.nH{constructor(t,i,r){super("NotificationService.ContactEmailBusinessProviderService",t,r),this.data=i}createContactEmail(t){const i=new rN(t);return i.Do(this),i.response}updateContactEmail(t,i){const r=new nN(t,i);return r.Do(this),r.response}importContactEmails(t){const i=new aN(t);return i.Do(this),i.response}validateContactEmailExcelData(t,i){const r=new iN(t,i);return r.Do(this),r.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(O.ed),e.LFG(E.q),e.LFG(y.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),lN=(()=>{class s extends y.nH{constructor(t,i,r){super("ContactEmailService",r,t),this.businessProvider=i}createContactEmail(t){const i=Object.fromEntries(Object.entries(t).filter(([r,l])=>null!==l));return this.businessProvider.createContactEmail(i)}updateContactEmail(t,i){return this.businessProvider.updateContactEmail(t,i)}importContactEmails(t){return this.businessProvider.importContactEmails(t)}validateContactEmailExcelData(t,i){return this.businessProvider.validateContactEmailExcelData(t,i)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(Ln,8),e.LFG(Ln),e.LFG(O.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),js=(()=>{class s extends g.m1{constructor(t,i,r,l,u,P){if(super({loading:!1,contactEmails:[],done:!1,searchQuery:"",formName:void 0,contactId:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=r,this.toast=l,this.formService=u,this.contactEmailService=P,this.errors$=this.select(d=>d.errors),this.loading$=this.select(d=>d.loading),this.done$=this.select(d=>d.done),this.item$=this.select(d=>d.item),this.contactEmails$=this.select(d=>d.contactEmails),this.contacts$=this.select(d=>d.contacts||[]),this.contactId$=this.select(d=>d.contactId),this.paging$=this.select(d=>d.paging),this.searchQuery$=this.select(d=>d.searchQuery),this.formName$=this.select(d=>d.formName),this.actionResult$=this.select(this.item$,this.done$,(d,n)=>({item:d,done:n}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.contactEmails$,this.contacts$,(d,n,a,m,p,_)=>({errors:d,loading:n,item:a,formName:m,contactEmails:p,contacts:_}),{debounce:!0}),this.input$=this.select(this.paging$,this.contactId$,this.searchQuery$,(d,n,a)=>({limit:d.limit,skip:d.skip,name:a,contactId:n,total:d.total})),this.setFormName=this.updater((d,n)=>Object.assign(Object.assign({},d),{formName:n})),this.setContactId=this.updater((d,n)=>Object.assign(Object.assign({},d),{contactId:n})),this.filterContacts=d=>this.data.userSelectContacts({input:{name:d}}).pipe((0,g._b)(n=>{let a=n.data.items;return this.patchState({contacts:a}),a},n=>this.patchState({errors:n.graphQLErrors?n.graphQLErrors:n})),(0,B.U)(n=>n.data.items)),this.addContact=this.updater((d,n)=>Object.assign(Object.assign({},d),{contacts:d.contacts.concat(n)})),this.setItem=this.updater((d,n)=>Object.assign(Object.assign({},d),{item:n})),this.addNewContactEmail=this.updater((d,n)=>Object.assign(Object.assign({},d),{contactEmails:[...d.contactEmails,n]})),this.updateContactEmail=this.updater((d,n)=>Object.assign(Object.assign({},d),{contactEmails:d.contactEmails.map(a=>a.id===n.id?n:a)})),this.addContactEmails=this.updater((d,n)=>Object.assign(Object.assign({},d),{contactEmails:d.contactEmails.concat(n)})),this.updateContactEmails=this.updater((d,n)=>Object.assign(Object.assign({},d),{contactEmails:d.contactEmails.map(a=>n.find(p=>p.id===a.id)||a)})),this.setSearchQuery=this.updater((d,n)=>Object.assign(Object.assign({},d),{searchQuery:n})),this.loadContactEmailEffect=this.effect(d=>d.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(n=>this.data.userContactEmail({contactEmailId:n}).pipe((0,g._b)(a=>{this.patchState({item:a.data.item,errors:a.errors,loading:!1})},a=>this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})))))),this.loadContactEmailsEffect=this.effect(d=>d.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.input$),(0,h.w)(([n,a])=>this.data.userContactEmails({input:a}).pipe((0,g._b)(m=>this.patchState({paging:{limit:a.limit,skip:a.skip,total:m.data.count.total},contactEmails:m.data.items,errors:m.errors,loading:!1}),m=>this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})))))),this.createContactEmailEffect=this.effect(d=>d.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(n=>this.contactEmailService.createContactEmail(Object.assign({},n)).pipe((0,g._b)(a=>{this.addNewContactEmail(a),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:a,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.updateContactEmailEffect=this.effect(d=>d.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([n,a])=>this.contactEmailService.updateContactEmail(n,n.id).pipe((0,g._b)(m=>{this.updateContactEmail(m),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:m,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},m=>{m.graphQLErrors?(this.toast.error(m.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})):(this.toast.error(m.Message),this.formService.setErrors(m.Data))}))))),this.deleteContactEmailEffect=this.effect(d=>d.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([n,a])=>this.data.userDeleteContactEmail({contactEmailId:a.id}).pipe((0,g._b)(m=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:m.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},m=>{m.graphQLErrors?(this.toast.error(m.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})):(this.toast.error(m.Message),this.formService.setErrors(m.Data))}))))),this.importExcelEffect=this.effect(d=>d.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(n=>this.contactEmailService.importContactEmails(n).pipe((0,te.K)(a=>{var m;return this.toast.error(null!==(m=a.Message)&&void 0!==m?m:"Failed to save",{duration:3e3}),k.E}),(0,C.b)(a=>{const m=JSON.parse(a.created),p=JSON.parse(a.updated),_=JSON.parse(a.failed),v=m.length+p.length+_.length;this.addContactEmails(m),this.updateContactEmails(p),this.toast.success(`${m.length} created, ${p.length} updated, ${_.length} failed of total ${v}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("contactEmailId")?(this.route.snapshot.paramMap.get("contactEmailId"),this.setFormName("contactEmail_edit")):this.setFormName("contactEmail_create"),this.route.snapshot.paramMap.has("contactId")){var c=this.route.snapshot.paramMap.get("contactId");this.setContactId(c)}}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.contactEmailService.validateContactEmailExcelData(t,i.contacts)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(E.q),e.LFG(A.F0),e.LFG(A.gz),e.LFG(X.F),e.LFG(q.o),e.LFG(lN))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function cN(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close.emit())})("formIsReady",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.contactEmail)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let Gn=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"contactEmail_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.contactEmail=i.item})):t.formName&&t.formName.currentValue&&"contactEmail_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadContactEmailEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.contactEmail=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(js),e.Y36(A.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-contact-email-form"]],inputs:{contactEmail:"contactEmail",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,cN,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[w.O5,z.M,w.Ov],encapsulation:2}),s})(),$n=(()=>{class s{constructor(){this.autoHeight=!1,this.contactEmails=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[{field:"contact.name",headerName:"Contact",filter:"agTextColumnFilter"},{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"email",filter:"agTextColumnFilter"},{field:"name",filter:"agTextColumnFilter"},{field:"contactId",filter:"agTextColumnFilter",hide:!0}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var r;t.includes(null===(r=i.data)||void 0===r?void 0:r.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-contact-email-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(N.x,5),2&t){let r;e.iGM(r=e.CRH())&&(i.tableView=r.first)}},inputs:{autoHeight:"autoHeight",contactEmails:"contactEmails"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.contactEmails)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[N.x],encapsulation:2}),s})();function dN(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-contact-email-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","contactEmail_edit")("formControl",t.formControl)("contactEmail",t.contactEmail)}}const uN=function(){return{}};function mN(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-contact-email-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","contactEmail_create")("formControl",t.formControl)("contactEmail",e.DdM(3,uN))}}function pN(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-contact-email-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(u.ref.close())}),e.qZA()}2&s&&e.Q6J("contactEmails",o.data.items)}let hN=(()=>{class s extends I.fS{constructor(t){super(),this.store=t,this.store.loadContactEmailsEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.contactEmails$.pipe((0,h.w)(i=>(0,T.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(js))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","contactEmail","send","close"],[1,"w-full","h-full","bg-white",3,"contactEmails","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,dN,2,3,"ng-template",null,1,e.W1O),e.YNc(3,mN,1,4,"ng-template",null,2,e.W1O),e.YNc(5,pN,1,1,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",u)("editTemplate",r)("createTemplate",l)("key",i.field.key)}},dependencies:[x.JJ,x.oH,J.$,Gn,$n],encapsulation:2}),s})();function fN(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-contact-email-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","contactEmail_edit")("contactEmail",t.value)}}const _N=function(){return{}};function gN(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-contact-email-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","contactEmail_create")("contactEmail",e.DdM(2,_N))}function CN(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-contact-email-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(null==u.ref?null:u.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("contactEmails",t.items)}}let SN=(()=>{class s extends Y{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","contactEmail","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","contactEmails","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,fN,1,2,"ng-template",null,1,e.W1O),e.YNc(3,gN,1,3,"ng-template",null,2,e.W1O),e.YNc(5,CN,1,2,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[ee,Gn,$n],encapsulation:2}),s})(),vN=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[js],imports:[w.ez,R.F,x.UX,V.o,H.u,Q.P,U.t,Z,j.h,K.G,I.X0.forChild({types:[{name:"contact-email-select",component:hN,wrappers:["form-field"]},{name:"contact-email-grid",component:SN}]})]}),s})(),bN=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[vN]}),s})();class Dt extends y.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class TN extends Dt{constructor(o){super("ValidateContactKindExcelDataAction"),this.valid=!1,this.excelData=o}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name)}),this.validationContext.addRule(new f.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof f.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(r=>r.name),newNames:[i.newName]}):i instanceof f.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,T.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class yN extends f.wS{constructor(o,t,i,r,l){super(o,t,i,r,l,!0)}}class wN extends f.ul{constructor(o,t,i,r=!1){super(o,t,r),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new f.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new yN("name","The contactkind name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class xN extends Dt{constructor(o){super("CreateContactKindAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new wN("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateContactKind({input:this.input}).pipe((0,h.w)(o=>(0,ie.of)(o.data.created)))}}class NN extends Dt{constructor(o){super("UpdateContactKindsAction"),this.contactKinds=o}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.contactKinds,!0))}performAction(){this.response=this.businessProvider.data.userUpdateContactKinds({input:{contactKinds:this.contactKinds}}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}class AN extends Dt{constructor(o,t){super("UpdateContactKindAction"),this.contactKind=o,this.contactKindId=t}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.contactKind,!0)).addRule(new f.xF("Id","Id should be a CUID and not null",this.contactKindId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateContactKind({contactKindId:this.contactKindId,input:this.contactKind}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}let Rn=(()=>{class s extends y.nH{constructor(t,i,r){super("NotificationService.ContactKindBusinessProviderService",t,r),this.data=i}createContactKind(t){const i=new xN(t);return i.Do(this),i.response}updateContactKind(t,i){const r=new AN(t,i);return r.Do(this),r.response}importContactKinds(t){const i=new NN(t);return i.Do(this),i.response}validateContactKindExcelData(t){const i=new TN(t);return i.Do(this),i.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(O.ed),e.LFG(E.q),e.LFG(y.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),FN=(()=>{class s extends y.nH{constructor(t,i,r){super("ContactKindService",r,t),this.businessProvider=i}createContactKind(t){const i=Object.fromEntries(Object.entries(t).filter(([r,l])=>null!==l));return this.businessProvider.createContactKind(i)}updateContactKind(t,i){return this.businessProvider.updateContactKind(t,i)}importContactKinds(t){return this.businessProvider.importContactKinds(t)}validateContactKindExcelData(t){return this.businessProvider.validateContactKindExcelData(t)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(Rn,8),e.LFG(Rn),e.LFG(O.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),zs=(()=>{class s extends g.m1{constructor(t,i,r,l,u,P){super({loading:!1,contactKinds:[],done:!1,searchQuery:"",formName:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=r,this.toast=l,this.formService=u,this.contactKindService=P,this.errors$=this.select(c=>c.errors),this.loading$=this.select(c=>c.loading),this.done$=this.select(c=>c.done),this.item$=this.select(c=>c.item),this.contactKinds$=this.select(c=>c.contactKinds),this.paging$=this.select(c=>c.paging),this.searchQuery$=this.select(c=>c.searchQuery),this.formName$=this.select(c=>c.formName),this.actionResult$=this.select(this.item$,this.done$,(c,d)=>({item:c,done:d}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.contactKinds$,(c,d,n,a,m)=>({errors:c,loading:d,item:n,formName:a,contactKinds:m}),{debounce:!0}),this.input$=this.select(this.paging$,this.searchQuery$,(c,d)=>({limit:c.limit,skip:c.skip,name:d,total:c.total})),this.setFormName=this.updater((c,d)=>Object.assign(Object.assign({},c),{formName:d})),this.setItem=this.updater((c,d)=>Object.assign(Object.assign({},c),{item:d})),this.addNewContactKind=this.updater((c,d)=>Object.assign(Object.assign({},c),{contactKinds:[...c.contactKinds,d]})),this.updateContactKind=this.updater((c,d)=>Object.assign(Object.assign({},c),{contactKinds:c.contactKinds.map(n=>n.id===d.id?d:n)})),this.addContactKinds=this.updater((c,d)=>Object.assign(Object.assign({},c),{contactKinds:c.contactKinds.concat(d)})),this.updateContactKinds=this.updater((c,d)=>Object.assign(Object.assign({},c),{contactKinds:c.contactKinds.map(n=>d.find(m=>m.id===n.id)||n)})),this.setSearchQuery=this.updater((c,d)=>Object.assign(Object.assign({},c),{searchQuery:d})),this.loadContactKindEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.data.userContactKind({contactKindId:d}).pipe((0,g._b)(n=>{this.patchState({item:n.data.item,errors:n.errors,loading:!1})},n=>this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})))))),this.loadContactKindsEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.input$),(0,h.w)(([d,n])=>this.data.userContactKinds({input:n}).pipe((0,g._b)(a=>this.patchState({paging:{limit:n.limit,skip:n.skip,total:a.data.count.total},contactKinds:a.data.items,errors:a.errors,loading:!1}),a=>this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})))))),this.createContactKindEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.contactKindService.createContactKind(Object.assign({},d)).pipe((0,g._b)(n=>{this.addNewContactKind(n),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:n,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},n=>{n.graphQLErrors?(this.toast.error(n.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})):(this.toast.error(n.Message),this.formService.setErrors(n.Data))}))))),this.updateContactKindEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([d,n])=>this.contactKindService.updateContactKind(d,d.id).pipe((0,g._b)(a=>{this.updateContactKind(a),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:a,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.deleteContactKindEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([d,n])=>this.data.userDeleteContactKind({contactKindId:n.id}).pipe((0,g._b)(a=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:a.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.importExcelEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.contactKindService.importContactKinds(d).pipe((0,te.K)(n=>{var a;return this.toast.error(null!==(a=n.Message)&&void 0!==a?a:"Failed to save",{duration:3e3}),k.E}),(0,C.b)(n=>{const a=JSON.parse(n.created),m=JSON.parse(n.updated),p=JSON.parse(n.failed),_=a.length+m.length+p.length;this.addContactKinds(a),this.updateContactKinds(m),this.toast.success(`${a.length} created, ${m.length} updated, ${p.length} failed of total ${_}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("contactKindId")?(this.route.snapshot.paramMap.get("contactKindId"),this.setFormName("contactKind_edit")):this.setFormName("contactKind_create")}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.contactKindService.validateContactKindExcelData(t)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(E.q),e.LFG(A.F0),e.LFG(A.gz),e.LFG(X.F),e.LFG(q.o),e.LFG(FN))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function DN(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close.emit())})("formIsReady",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.contactKind)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let Vn=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"contactKind_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.contactKind=i.item})):t.formName&&t.formName.currentValue&&"contactKind_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadContactKindEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.contactKind=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(zs),e.Y36(A.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-contact-kind-form"]],inputs:{contactKind:"contactKind",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,DN,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[w.O5,z.M,w.Ov],encapsulation:2}),s})(),Qn=(()=>{class s{constructor(){this.autoHeight=!1,this.contactKinds=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[,{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var r;t.includes(null===(r=i.data)||void 0===r?void 0:r.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-contact-kind-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(N.x,5),2&t){let r;e.iGM(r=e.CRH())&&(i.tableView=r.first)}},inputs:{autoHeight:"autoHeight",contactKinds:"contactKinds"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.contactKinds)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[N.x],encapsulation:2}),s})();function IN(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-contact-kind-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","contactKind_edit")("formControl",t.formControl)("contactKind",t.contactKind)}}const PN=function(){return{}};function WN(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-contact-kind-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","contactKind_create")("formControl",t.formControl)("contactKind",e.DdM(3,PN))}}function MN(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-contact-kind-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(u.ref.close())}),e.qZA()}2&s&&e.Q6J("contactKinds",o.data.items)}let EN=(()=>{class s extends I.fS{constructor(t){super(),this.store=t,this.store.loadContactKindsEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.contactKinds$.pipe((0,h.w)(i=>(0,T.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(zs))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","contactKind","send","close"],[1,"w-full","h-full","bg-white",3,"contactKinds","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,IN,2,3,"ng-template",null,1,e.W1O),e.YNc(3,WN,1,4,"ng-template",null,2,e.W1O),e.YNc(5,MN,1,1,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",u)("editTemplate",r)("createTemplate",l)("key",i.field.key)}},dependencies:[x.JJ,x.oH,J.$,Vn,Qn],encapsulation:2}),s})();function ON(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-contact-kind-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","contactKind_edit")("contactKind",t.value)}}const LN=function(){return{}};function GN(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-contact-kind-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","contactKind_create")("contactKind",e.DdM(2,LN))}function $N(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-contact-kind-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(null==u.ref?null:u.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("contactKinds",t.items)}}let RN=(()=>{class s extends Y{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","contactKind","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","contactKinds","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,ON,1,2,"ng-template",null,1,e.W1O),e.YNc(3,GN,1,3,"ng-template",null,2,e.W1O),e.YNc(5,$N,1,2,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[ee,Vn,Qn],encapsulation:2}),s})(),VN=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[zs],imports:[w.ez,R.F,x.UX,V.o,H.u,Q.P,U.t,Z,j.h,K.G,I.X0.forChild({types:[{name:"contact-kind-select",component:EN,wrappers:["form-field"]},{name:"contact-kind-grid",component:RN}]})]}),s})(),QN=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[VN]}),s})();class It extends y.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class UN extends It{constructor(o,t){super("ValidateContactExcelDataAction"),this.valid=!1,this.excelData=o,this.contactKinds=t}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name),this.validationContext.addRule(new f.mi(`contactKindName_${i}_is_valid}`,"Contact Kind Is Not Valid","contactKind.name",t.contactKind,this.contactKinds,!0))}),this.validationContext.addRule(new f.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof f.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(r=>r.name),newNames:[i.newName]}):i instanceof f.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,T.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class JN extends f.wS{constructor(o,t,i,r,l){super(o,t,i,r,l,!0)}}class jN extends f.ul{constructor(o,t,i,r=!1){super(o,t,r),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new f.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new JN("name","The contact name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class zN extends It{constructor(o){super("CreateContactAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new jN("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateContact({input:this.input}).pipe((0,h.w)(o=>(0,ie.of)(o.data.created)))}}class qN extends It{constructor(o){super("UpdateContactsAction"),this.contacts=o}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.contacts,!0))}performAction(){this.response=this.businessProvider.data.userUpdateContacts({input:{contacts:this.contacts}}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}class HN extends It{constructor(o,t){super("UpdateContactAction"),this.contact=o,this.contactId=t}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.contact,!0)).addRule(new f.xF("Id","Id should be a CUID and not null",this.contactId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateContact({contactId:this.contactId,input:this.contact}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}let Un=(()=>{class s extends y.nH{constructor(t,i,r){super("NotificationService.ContactBusinessProviderService",t,r),this.data=i}createContact(t){const i=new zN(t);return i.Do(this),i.response}updateContact(t,i){const r=new HN(t,i);return r.Do(this),r.response}importContacts(t){const i=new qN(t);return i.Do(this),i.response}validateContactExcelData(t,i){const r=new UN(t,i);return r.Do(this),r.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(O.ed),e.LFG(E.q),e.LFG(y.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),KN=(()=>{class s extends y.nH{constructor(t,i,r){super("ContactService",r,t),this.businessProvider=i}createContact(t){const i=Object.fromEntries(Object.entries(t).filter(([r,l])=>null!==l));return this.businessProvider.createContact(i)}updateContact(t,i){return this.businessProvider.updateContact(t,i)}importContacts(t){return this.businessProvider.importContacts(t)}validateContactExcelData(t,i){return this.businessProvider.validateContactExcelData(t,i)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(Un,8),e.LFG(Un),e.LFG(O.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),qs=(()=>{class s extends g.m1{constructor(t,i,r,l,u,P){if(super({loading:!1,contacts:[],done:!1,searchQuery:"",formName:void 0,contactKindId:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=r,this.toast=l,this.formService=u,this.contactService=P,this.errors$=this.select(b=>b.errors),this.loading$=this.select(b=>b.loading),this.done$=this.select(b=>b.done),this.item$=this.select(b=>b.item),this.contacts$=this.select(b=>b.contacts),this.contactKinds$=this.select(b=>b.contactKinds||[]),this.contactKindId$=this.select(b=>b.contactKindId),this.paging$=this.select(b=>b.paging),this.searchQuery$=this.select(b=>b.searchQuery),this.formName$=this.select(b=>b.formName),this.actionResult$=this.select(this.item$,this.done$,(b,c)=>({item:b,done:c}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.contacts$,this.contactKinds$,(b,c,d,n,a,m)=>({errors:b,loading:c,item:d,formName:n,contacts:a,contactKinds:m}),{debounce:!0}),this.input$=this.select(this.paging$,this.contactKindId$,this.searchQuery$,(b,c,d)=>({limit:b.limit,skip:b.skip,name:d,contactKindId:c,total:b.total})),this.setFormName=this.updater((b,c)=>Object.assign(Object.assign({},b),{formName:c})),this.setContactKindId=this.updater((b,c)=>Object.assign(Object.assign({},b),{contactKindId:c})),this.filterContactKinds=b=>this.data.userSelectContactKinds({input:{name:b}}).pipe((0,g._b)(c=>{const d=c.data.items;return this.patchState({contactKinds:d}),d},c=>this.patchState({errors:c.graphQLErrors?c.graphQLErrors:c})),(0,B.U)(c=>c.data.items)),this.addContactKind=this.updater((b,c)=>Object.assign(Object.assign({},b),{contactKinds:b.contactKinds.concat(c)})),this.setItem=this.updater((b,c)=>Object.assign(Object.assign({},b),{item:c})),this.addNewContact=this.updater((b,c)=>Object.assign(Object.assign({},b),{contacts:[...b.contacts,c]})),this.updateContact=this.updater((b,c)=>Object.assign(Object.assign({},b),{contacts:b.contacts.map(d=>d.id===c.id?c:d)})),this.addContacts=this.updater((b,c)=>Object.assign(Object.assign({},b),{contacts:b.contacts.concat(c)})),this.updateContacts=this.updater((b,c)=>Object.assign(Object.assign({},b),{contacts:b.contacts.map(d=>c.find(a=>a.id===d.id)||d)})),this.setSearchQuery=this.updater((b,c)=>Object.assign(Object.assign({},b),{searchQuery:c})),this.loadContactEffect=this.effect(b=>b.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(c=>this.data.userContact({contactId:c}).pipe((0,g._b)(d=>{this.patchState({item:d.data.item,errors:d.errors,loading:!1})},d=>this.patchState({loading:!1,errors:d.graphQLErrors?d.graphQLErrors:d})))))),this.loadContactsEffect=this.effect(b=>b.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.input$),(0,h.w)(([c,d])=>this.data.userContacts({input:d}).pipe((0,g._b)(n=>this.patchState({paging:{limit:d.limit,skip:d.skip,total:n.data.count.total},contacts:n.data.items,errors:n.errors,loading:!1}),n=>this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})))))),this.createContactEffect=this.effect(b=>b.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(c=>this.contactService.createContact(Object.assign({},c)).pipe((0,g._b)(d=>{this.addNewContact(d),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:d,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},d=>{d.graphQLErrors?(this.toast.error(d.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:d.graphQLErrors?d.graphQLErrors:d})):(this.toast.error(d.Message),this.formService.setErrors(d.Data))}))))),this.updateContactEffect=this.effect(b=>b.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([c,d])=>this.contactService.updateContact(c,c.id).pipe((0,g._b)(n=>{this.updateContact(n),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:n,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},n=>{n.graphQLErrors?(this.toast.error(n.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})):(this.toast.error(n.Message),this.formService.setErrors(n.Data))}))))),this.deleteContactEffect=this.effect(b=>b.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([c,d])=>this.data.userDeleteContact({contactId:d.id}).pipe((0,g._b)(n=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:n.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},n=>{n.graphQLErrors?(this.toast.error(n.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})):(this.toast.error(n.Message),this.formService.setErrors(n.Data))}))))),this.importExcelEffect=this.effect(b=>b.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(c=>this.contactService.importContacts(c).pipe((0,te.K)(d=>{var n;return this.toast.error(null!==(n=d.Message)&&void 0!==n?n:"Failed to save",{duration:3e3}),k.E}),(0,C.b)(d=>{const n=JSON.parse(d.created),a=JSON.parse(d.updated),m=JSON.parse(d.failed),p=n.length+a.length+m.length;this.addContacts(n),this.updateContacts(a),this.toast.success(`${n.length} created, ${a.length} updated, ${m.length} failed of total ${p}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("contactId")?this.setFormName("contact_edit"):this.setFormName("contact_create"),this.route.snapshot.paramMap.has("contactKindId")){const b=this.route.snapshot.paramMap.get("contactKindId");this.setContactKindId(b)}}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.contactService.validateContactExcelData(t,i.contactKinds)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(E.q),e.LFG(A.F0),e.LFG(A.gz),e.LFG(X.F),e.LFG(q.o),e.LFG(KN))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function kN(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close.emit())})("formIsReady",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.contact)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let Jn=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"contact_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.contact=i.item})):t.formName&&t.formName.currentValue&&"contact_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadContactEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.contact=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(qs),e.Y36(A.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-contact-form"]],inputs:{contact:"contact",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,kN,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[w.O5,z.M,w.Ov],encapsulation:2}),s})(),jn=(()=>{class s{constructor(){this.autoHeight=!1,this.contacts=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[{field:"contactKind.name",headerName:"Contact Kind",filter:"agTextColumnFilter"},{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{field:"honorific",filter:"agTextColumnFilter"},{field:"firstName",filter:"agTextColumnFilter"},{field:"lastName",filter:"agTextColumnFilter"},{field:"suffix",filter:"agTextColumnFilter"},{field:"primaryPhoneNumber",filter:"agTextColumnFilter"},{field:"primaryEmailAddress",filter:"agTextColumnFilter"},{field:"primaryAddressLine1",filter:"agTextColumnFilter"},{field:"primaryAddressLine2",filter:"agTextColumnFilter"},{field:"primaryAddressCity",filter:"agTextColumnFilter"},{field:"primaryAddressStateOrProvince",filter:"agTextColumnFilter"},{field:"primaryAddressPostalCode",filter:"agTextColumnFilter"},{field:"notes",filter:"agTextColumnFilter"},{field:"discriminator",filter:"agTextColumnFilter"},{field:"contactKindId",filter:"agTextColumnFilter",hide:!0},{field:"dateOfBirth",filter:"agDateColumnFilter"},{headerName:"Latitude",field:"latitude",valueFormatter:t=>{var i;return(0,S.oBD)(null===(i=t.data)||void 0===i?void 0:i.latitude,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{headerName:"Longitude",field:"longitude",valueFormatter:t=>{var i;return(0,S.oBD)(null===(i=t.data)||void 0===i?void 0:i.longitude,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{field:"avatar",filter:"agTextColumnFilter"},{field:"background",filter:"agTextColumnFilter"},{field:"title",filter:"agTextColumnFilter"},{field:"company",filter:"agTextColumnFilter"},{field:"birthday",filter:"agTextColumnFilter"},{field:"address",filter:"agTextColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var r;t.includes(null===(r=i.data)||void 0===r?void 0:r.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-contact-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(N.x,5),2&t){let r;e.iGM(r=e.CRH())&&(i.tableView=r.first)}},inputs:{autoHeight:"autoHeight",contacts:"contacts"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.contacts)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[N.x],encapsulation:2}),s})();function ZN(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-contact-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","contact_edit")("formControl",t.formControl)("contact",t.contact)}}const BN=function(){return{}};function YN(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-contact-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","contact_create")("formControl",t.formControl)("contact",e.DdM(3,BN))}}function XN(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-contact-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(u.ref.close())}),e.qZA()}2&s&&e.Q6J("contacts",o.data.items)}let eA=(()=>{class s extends I.fS{constructor(t){super(),this.store=t,this.store.loadContactsEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.contacts$.pipe((0,h.w)(i=>(0,T.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(qs))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","contact","send","close"],[1,"w-full","h-full","bg-white",3,"contacts","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,ZN,2,3,"ng-template",null,1,e.W1O),e.YNc(3,YN,1,4,"ng-template",null,2,e.W1O),e.YNc(5,XN,1,1,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",u)("editTemplate",r)("createTemplate",l)("key",i.field.key)}},dependencies:[x.JJ,x.oH,J.$,Jn,jn],encapsulation:2}),s})();function tA(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-contact-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","contact_edit")("contact",t.value)}}const iA=function(){return{}};function sA(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-contact-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","contact_create")("contact",e.DdM(2,iA))}function oA(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-contact-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(null==u.ref?null:u.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("contacts",t.items)}}let rA=(()=>{class s extends Y{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","contact","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","contacts","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,tA,1,2,"ng-template",null,1,e.W1O),e.YNc(3,sA,1,3,"ng-template",null,2,e.W1O),e.YNc(5,oA,1,2,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[ee,Jn,jn],encapsulation:2}),s})(),aA=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[qs],imports:[w.ez,R.F,x.UX,V.o,H.u,Q.P,U.t,Z,j.h,K.G,I.X0.forChild({types:[{name:"contact-select",component:eA,wrappers:["form-field"]},{name:"contact-grid",component:rA}]})]}),s})(),nA=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[aA]}),s})();class Pt extends y.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class lA extends Pt{constructor(o,t,i){super("ValidateContactPhoneNumberExcelDataAction"),this.valid=!1,this.excelData=o,this.countries=t,this.contacts=i}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name),this.validationContext.addRule(new f.mi(`countryName_${i}_is_valid}`,"Country Is Not Valid","country.name",t.country,this.countries,!0)),this.validationContext.addRule(new f.mi(`contactName_${i}_is_valid}`,"Contact Is Not Valid","contact.name",t.contact,this.contacts,!0))}),this.validationContext.addRule(new f.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof f.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(r=>r.name),newNames:[i.newName]}):i instanceof f.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,T.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class cA extends f.wS{constructor(o,t,i,r,l){super(o,t,i,r,l,!0)}}class dA extends f.ul{constructor(o,t,i,r=!1){super(o,t,r),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new f.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new cA("name","The contactphonenumber name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class uA extends Pt{constructor(o){super("CreateContactPhoneNumberAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new dA("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateContactPhoneNumber({input:this.input}).pipe((0,h.w)(o=>(0,ie.of)(o.data.created)))}}class mA extends Pt{constructor(o){super("UpdateContactPhoneNumbersAction"),this.contactPhoneNumbers=o}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.contactPhoneNumbers,!0))}performAction(){this.response=this.businessProvider.data.userUpdateContactPhoneNumbers({input:{contactPhoneNumbers:this.contactPhoneNumbers}}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}class pA extends Pt{constructor(o,t){super("UpdateContactPhoneNumberAction"),this.contactPhoneNumber=o,this.contactPhoneNumberId=t}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.contactPhoneNumber,!0)).addRule(new f.xF("Id","Id should be a CUID and not null",this.contactPhoneNumberId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateContactPhoneNumber({contactPhoneNumberId:this.contactPhoneNumberId,input:this.contactPhoneNumber}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}let zn=(()=>{class s extends y.nH{constructor(t,i,r){super("NotificationService.ContactPhoneNumberBusinessProviderService",t,r),this.data=i}createContactPhoneNumber(t){const i=new uA(t);return i.Do(this),i.response}updateContactPhoneNumber(t,i){const r=new pA(t,i);return r.Do(this),r.response}importContactPhoneNumbers(t){const i=new mA(t);return i.Do(this),i.response}validateContactPhoneNumberExcelData(t,i,r){const l=new lA(t,i,r);return l.Do(this),l.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(O.ed),e.LFG(E.q),e.LFG(y.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),hA=(()=>{class s extends y.nH{constructor(t,i,r){super("ContactPhoneNumberService",r,t),this.businessProvider=i}createContactPhoneNumber(t){const i=Object.fromEntries(Object.entries(t).filter(([r,l])=>null!==l));return this.businessProvider.createContactPhoneNumber(i)}updateContactPhoneNumber(t,i){return this.businessProvider.updateContactPhoneNumber(t,i)}importContactPhoneNumbers(t){return this.businessProvider.importContactPhoneNumbers(t)}validateContactPhoneNumberExcelData(t,i,r){return this.businessProvider.validateContactPhoneNumberExcelData(t,i,r)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(zn,8),e.LFG(zn),e.LFG(O.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),Hs=(()=>{class s extends g.m1{constructor(t,i,r,l,u,P){if(super({loading:!1,contactPhoneNumbers:[],done:!1,searchQuery:"",formName:void 0,countryId:void 0,contactId:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=r,this.toast=l,this.formService=u,this.contactPhoneNumberService=P,this.errors$=this.select(n=>n.errors),this.loading$=this.select(n=>n.loading),this.done$=this.select(n=>n.done),this.item$=this.select(n=>n.item),this.contactPhoneNumbers$=this.select(n=>n.contactPhoneNumbers),this.countries$=this.select(n=>n.countries||[]),this.contacts$=this.select(n=>n.contacts||[]),this.countryId$=this.select(n=>n.countryId),this.contactId$=this.select(n=>n.contactId),this.paging$=this.select(n=>n.paging),this.searchQuery$=this.select(n=>n.searchQuery),this.formName$=this.select(n=>n.formName),this.actionResult$=this.select(this.item$,this.done$,(n,a)=>({item:n,done:a}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.contactPhoneNumbers$,this.countries$,this.contacts$,(n,a,m,p,_,v,D)=>({errors:n,loading:a,item:m,formName:p,contactPhoneNumbers:_,countries:v,contacts:D}),{debounce:!0}),this.input$=this.select(this.paging$,this.countryId$,this.contactId$,this.searchQuery$,(n,a,m,p)=>({limit:n.limit,skip:n.skip,name:p,countryId:a,contactId:m,total:n.total})),this.setFormName=this.updater((n,a)=>Object.assign(Object.assign({},n),{formName:a})),this.setCountryId=this.updater((n,a)=>Object.assign(Object.assign({},n),{countryId:a})),this.setContactId=this.updater((n,a)=>Object.assign(Object.assign({},n),{contactId:a})),this.filterCountries=n=>this.data.userSelectCountries({input:{name:n}}).pipe((0,g._b)(a=>{let m=a.data.items;return this.patchState({countries:m}),m},a=>this.patchState({errors:a.graphQLErrors?a.graphQLErrors:a})),(0,B.U)(a=>a.data.items)),this.filterContacts=n=>this.data.userSelectContacts({input:{name:n}}).pipe((0,g._b)(a=>{let m=a.data.items;return this.patchState({contacts:m}),m},a=>this.patchState({errors:a.graphQLErrors?a.graphQLErrors:a})),(0,B.U)(a=>a.data.items)),this.addCountry=this.updater((n,a)=>Object.assign(Object.assign({},n),{countries:n.countries.concat(a)})),this.addContact=this.updater((n,a)=>Object.assign(Object.assign({},n),{contacts:n.contacts.concat(a)})),this.setItem=this.updater((n,a)=>Object.assign(Object.assign({},n),{item:a})),this.addNewContactPhoneNumber=this.updater((n,a)=>Object.assign(Object.assign({},n),{contactPhoneNumbers:[...n.contactPhoneNumbers,a]})),this.updateContactPhoneNumber=this.updater((n,a)=>Object.assign(Object.assign({},n),{contactPhoneNumbers:n.contactPhoneNumbers.map(m=>m.id===a.id?a:m)})),this.addContactPhoneNumbers=this.updater((n,a)=>Object.assign(Object.assign({},n),{contactPhoneNumbers:n.contactPhoneNumbers.concat(a)})),this.updateContactPhoneNumbers=this.updater((n,a)=>Object.assign(Object.assign({},n),{contactPhoneNumbers:n.contactPhoneNumbers.map(m=>a.find(_=>_.id===m.id)||m)})),this.setSearchQuery=this.updater((n,a)=>Object.assign(Object.assign({},n),{searchQuery:a})),this.loadContactPhoneNumberEffect=this.effect(n=>n.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(a=>this.data.userContactPhoneNumber({contactPhoneNumberId:a}).pipe((0,g._b)(m=>{this.patchState({item:m.data.item,errors:m.errors,loading:!1})},m=>this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})))))),this.loadContactPhoneNumbersEffect=this.effect(n=>n.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.input$),(0,h.w)(([a,m])=>this.data.userContactPhoneNumbers({input:m}).pipe((0,g._b)(p=>this.patchState({paging:{limit:m.limit,skip:m.skip,total:p.data.count.total},contactPhoneNumbers:p.data.items,errors:p.errors,loading:!1}),p=>this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})))))),this.createContactPhoneNumberEffect=this.effect(n=>n.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(a=>this.contactPhoneNumberService.createContactPhoneNumber(Object.assign({},a)).pipe((0,g._b)(m=>{this.addNewContactPhoneNumber(m),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:m,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},m=>{m.graphQLErrors?(this.toast.error(m.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})):(this.toast.error(m.Message),this.formService.setErrors(m.Data))}))))),this.updateContactPhoneNumberEffect=this.effect(n=>n.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([a,m])=>this.contactPhoneNumberService.updateContactPhoneNumber(a,a.id).pipe((0,g._b)(p=>{this.updateContactPhoneNumber(p),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:p,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},p=>{p.graphQLErrors?(this.toast.error(p.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})):(this.toast.error(p.Message),this.formService.setErrors(p.Data))}))))),this.deleteContactPhoneNumberEffect=this.effect(n=>n.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([a,m])=>this.data.userDeleteContactPhoneNumber({contactPhoneNumberId:m.id}).pipe((0,g._b)(p=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:p.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},p=>{p.graphQLErrors?(this.toast.error(p.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})):(this.toast.error(p.Message),this.formService.setErrors(p.Data))}))))),this.importExcelEffect=this.effect(n=>n.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(a=>this.contactPhoneNumberService.importContactPhoneNumbers(a).pipe((0,te.K)(m=>{var p;return this.toast.error(null!==(p=m.Message)&&void 0!==p?p:"Failed to save",{duration:3e3}),k.E}),(0,C.b)(m=>{const p=JSON.parse(m.created),_=JSON.parse(m.updated),v=JSON.parse(m.failed),D=p.length+_.length+v.length;this.addContactPhoneNumbers(p),this.updateContactPhoneNumbers(_),this.toast.success(`${p.length} created, ${_.length} updated, ${v.length} failed of total ${D}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("contactPhoneNumberId")?(this.route.snapshot.paramMap.get("contactPhoneNumberId"),this.setFormName("contactPhoneNumber_edit")):this.setFormName("contactPhoneNumber_create"),this.route.snapshot.paramMap.has("countryId")){var c=this.route.snapshot.paramMap.get("countryId");this.setCountryId(c)}if(this.route.snapshot.paramMap.has("contactId")){var d=this.route.snapshot.paramMap.get("contactId");this.setContactId(d)}}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.contactPhoneNumberService.validateContactPhoneNumberExcelData(t,i.countries,i.contacts)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(E.q),e.LFG(A.F0),e.LFG(A.gz),e.LFG(X.F),e.LFG(q.o),e.LFG(hA))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function fA(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close.emit())})("formIsReady",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.contactPhoneNumber)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let qn=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"contactPhoneNumber_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.contactPhoneNumber=i.item})):t.formName&&t.formName.currentValue&&"contactPhoneNumber_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadContactPhoneNumberEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.contactPhoneNumber=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Hs),e.Y36(A.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-contact-phone-number-form"]],inputs:{contactPhoneNumber:"contactPhoneNumber",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,fA,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[w.O5,z.M,w.Ov],encapsulation:2}),s})(),Hn=(()=>{class s{constructor(){this.autoHeight=!1,this.contactPhoneNumbers=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[{field:"country.name",headerName:"Country",filter:"agTextColumnFilter"},{field:"contact.name",headerName:"Contact",filter:"agTextColumnFilter"},{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{field:"countryId",filter:"agTextColumnFilter",hide:!0},{field:"phoneNumber",filter:"agTextColumnFilter"},{field:"label",filter:"agTextColumnFilter"},{field:"contactId",filter:"agTextColumnFilter",hide:!0}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var r;t.includes(null===(r=i.data)||void 0===r?void 0:r.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-contact-phone-number-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(N.x,5),2&t){let r;e.iGM(r=e.CRH())&&(i.tableView=r.first)}},inputs:{autoHeight:"autoHeight",contactPhoneNumbers:"contactPhoneNumbers"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.contactPhoneNumbers)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[N.x],encapsulation:2}),s})();function _A(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-contact-phone-number-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","contactPhoneNumber_edit")("formControl",t.formControl)("contactPhoneNumber",t.contactPhoneNumber)}}const gA=function(){return{}};function CA(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-contact-phone-number-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","contactPhoneNumber_create")("formControl",t.formControl)("contactPhoneNumber",e.DdM(3,gA))}}function SA(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-contact-phone-number-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(u.ref.close())}),e.qZA()}2&s&&e.Q6J("contactPhoneNumbers",o.data.items)}let vA=(()=>{class s extends I.fS{constructor(t){super(),this.store=t,this.store.loadContactPhoneNumbersEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.contactPhoneNumbers$.pipe((0,h.w)(i=>(0,T.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Hs))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","contactPhoneNumber","send","close"],[1,"w-full","h-full","bg-white",3,"contactPhoneNumbers","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,_A,2,3,"ng-template",null,1,e.W1O),e.YNc(3,CA,1,4,"ng-template",null,2,e.W1O),e.YNc(5,SA,1,1,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",u)("editTemplate",r)("createTemplate",l)("key",i.field.key)}},dependencies:[x.JJ,x.oH,J.$,qn,Hn],encapsulation:2}),s})();function bA(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-contact-phone-number-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","contactPhoneNumber_edit")("contactPhoneNumber",t.value)}}const TA=function(){return{}};function yA(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-contact-phone-number-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","contactPhoneNumber_create")("contactPhoneNumber",e.DdM(2,TA))}function wA(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-contact-phone-number-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(null==u.ref?null:u.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("contactPhoneNumbers",t.items)}}let xA=(()=>{class s extends Y{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","contactPhoneNumber","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","contactPhoneNumbers","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,bA,1,2,"ng-template",null,1,e.W1O),e.YNc(3,yA,1,3,"ng-template",null,2,e.W1O),e.YNc(5,wA,1,2,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[ee,qn,Hn],encapsulation:2}),s})(),NA=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[Hs],imports:[w.ez,R.F,x.UX,V.o,H.u,Q.P,U.t,Z,j.h,K.G,I.X0.forChild({types:[{name:"contact-phone-number-select",component:vA,wrappers:["form-field"]},{name:"contact-phone-number-grid",component:xA}]})]}),s})(),AA=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[NA]}),s})();class Wt extends y.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class FA extends Wt{constructor(o,t,i){super("ValidateContactSettingExcelDataAction"),this.valid=!1,this.excelData=o,this.contacts=t,this.integrations=i}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name),this.validationContext.addRule(new f.mi(`contactName_${i}_is_valid}`,"Contact Is Not Valid","contact.name",t.contact,this.contacts,!0)),this.validationContext.addRule(new f.mi(`integrationName_${i}_is_valid}`,"Integration Is Not Valid","integration.name",t.integration,this.integrations,!0))}),this.validationContext.addRule(new f.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof f.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(r=>r.name),newNames:[i.newName]}):i instanceof f.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,T.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class DA extends f.wS{constructor(o,t,i,r,l){super(o,t,i,r,l,!0)}}class IA extends f.ul{constructor(o,t,i,r=!1){super(o,t,r),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new f.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new DA("name","The contactsetting name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class PA extends Wt{constructor(o){super("CreateContactSettingAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new IA("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateContactSetting({input:this.input}).pipe((0,h.w)(o=>(0,ie.of)(o.data.created)))}}class WA extends Wt{constructor(o){super("UpdateContactSettingsAction"),this.contactSettings=o}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.contactSettings,!0))}performAction(){this.response=this.businessProvider.data.userUpdateContactSettings({input:{contactSettings:this.contactSettings}}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}class MA extends Wt{constructor(o,t){super("UpdateContactSettingAction"),this.contactSetting=o,this.contactSettingId=t}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.contactSetting,!0)).addRule(new f.xF("Id","Id should be a CUID and not null",this.contactSettingId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateContactSetting({contactSettingId:this.contactSettingId,input:this.contactSetting}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}let Kn=(()=>{class s extends y.nH{constructor(t,i,r){super("NotificationService.ContactSettingBusinessProviderService",t,r),this.data=i}createContactSetting(t){const i=new PA(t);return i.Do(this),i.response}updateContactSetting(t,i){const r=new MA(t,i);return r.Do(this),r.response}importContactSettings(t){const i=new WA(t);return i.Do(this),i.response}validateContactSettingExcelData(t,i,r){const l=new FA(t,i,r);return l.Do(this),l.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(O.ed),e.LFG(E.q),e.LFG(y.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),EA=(()=>{class s extends y.nH{constructor(t,i,r){super("ContactSettingService",r,t),this.businessProvider=i}createContactSetting(t){const i=Object.fromEntries(Object.entries(t).filter(([r,l])=>null!==l));return this.businessProvider.createContactSetting(i)}updateContactSetting(t,i){return this.businessProvider.updateContactSetting(t,i)}importContactSettings(t){return this.businessProvider.importContactSettings(t)}validateContactSettingExcelData(t,i,r){return this.businessProvider.validateContactSettingExcelData(t,i,r)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(Kn,8),e.LFG(Kn),e.LFG(O.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),Ks=(()=>{class s extends g.m1{constructor(t,i,r,l,u,P){if(super({loading:!1,contactSettings:[],done:!1,searchQuery:"",formName:void 0,contactId:void 0,integrationId:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=r,this.toast=l,this.formService=u,this.contactSettingService=P,this.errors$=this.select(n=>n.errors),this.loading$=this.select(n=>n.loading),this.done$=this.select(n=>n.done),this.item$=this.select(n=>n.item),this.contactSettings$=this.select(n=>n.contactSettings),this.contacts$=this.select(n=>n.contacts||[]),this.integrations$=this.select(n=>n.integrations||[]),this.contactId$=this.select(n=>n.contactId),this.integrationId$=this.select(n=>n.integrationId),this.paging$=this.select(n=>n.paging),this.searchQuery$=this.select(n=>n.searchQuery),this.formName$=this.select(n=>n.formName),this.actionResult$=this.select(this.item$,this.done$,(n,a)=>({item:n,done:a}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.contactSettings$,this.contacts$,this.integrations$,(n,a,m,p,_,v,D)=>({errors:n,loading:a,item:m,formName:p,contactSettings:_,contacts:v,integrations:D}),{debounce:!0}),this.input$=this.select(this.paging$,this.contactId$,this.integrationId$,this.searchQuery$,(n,a,m,p)=>({limit:n.limit,skip:n.skip,name:p,contactId:a,integrationId:m,total:n.total})),this.setFormName=this.updater((n,a)=>Object.assign(Object.assign({},n),{formName:a})),this.setContactId=this.updater((n,a)=>Object.assign(Object.assign({},n),{contactId:a})),this.setIntegrationId=this.updater((n,a)=>Object.assign(Object.assign({},n),{integrationId:a})),this.filterContacts=n=>this.data.userSelectContacts({input:{name:n}}).pipe((0,g._b)(a=>{let m=a.data.items;return this.patchState({contacts:m}),m},a=>this.patchState({errors:a.graphQLErrors?a.graphQLErrors:a})),(0,B.U)(a=>a.data.items)),this.filterIntegrations=n=>this.data.userSelectIntegrations({input:{name:n}}).pipe((0,g._b)(a=>{let m=a.data.items;return this.patchState({integrations:m}),m},a=>this.patchState({errors:a.graphQLErrors?a.graphQLErrors:a})),(0,B.U)(a=>a.data.items)),this.addContact=this.updater((n,a)=>Object.assign(Object.assign({},n),{contacts:n.contacts.concat(a)})),this.addIntegration=this.updater((n,a)=>Object.assign(Object.assign({},n),{integrations:n.integrations.concat(a)})),this.setItem=this.updater((n,a)=>Object.assign(Object.assign({},n),{item:a})),this.addNewContactSetting=this.updater((n,a)=>Object.assign(Object.assign({},n),{contactSettings:[...n.contactSettings,a]})),this.updateContactSetting=this.updater((n,a)=>Object.assign(Object.assign({},n),{contactSettings:n.contactSettings.map(m=>m.id===a.id?a:m)})),this.addContactSettings=this.updater((n,a)=>Object.assign(Object.assign({},n),{contactSettings:n.contactSettings.concat(a)})),this.updateContactSettings=this.updater((n,a)=>Object.assign(Object.assign({},n),{contactSettings:n.contactSettings.map(m=>a.find(_=>_.id===m.id)||m)})),this.setSearchQuery=this.updater((n,a)=>Object.assign(Object.assign({},n),{searchQuery:a})),this.loadContactSettingEffect=this.effect(n=>n.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(a=>this.data.userContactSetting({contactSettingId:a}).pipe((0,g._b)(m=>{this.patchState({item:m.data.item,errors:m.errors,loading:!1})},m=>this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})))))),this.loadContactSettingsEffect=this.effect(n=>n.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.input$),(0,h.w)(([a,m])=>this.data.userContactSettings({input:m}).pipe((0,g._b)(p=>this.patchState({paging:{limit:m.limit,skip:m.skip,total:p.data.count.total},contactSettings:p.data.items,errors:p.errors,loading:!1}),p=>this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})))))),this.createContactSettingEffect=this.effect(n=>n.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(a=>this.contactSettingService.createContactSetting(Object.assign({},a)).pipe((0,g._b)(m=>{this.addNewContactSetting(m),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:m,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},m=>{m.graphQLErrors?(this.toast.error(m.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})):(this.toast.error(m.Message),this.formService.setErrors(m.Data))}))))),this.updateContactSettingEffect=this.effect(n=>n.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([a,m])=>this.contactSettingService.updateContactSetting(a,a.id).pipe((0,g._b)(p=>{this.updateContactSetting(p),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:p,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},p=>{p.graphQLErrors?(this.toast.error(p.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})):(this.toast.error(p.Message),this.formService.setErrors(p.Data))}))))),this.deleteContactSettingEffect=this.effect(n=>n.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([a,m])=>this.data.userDeleteContactSetting({contactSettingId:m.id}).pipe((0,g._b)(p=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:p.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},p=>{p.graphQLErrors?(this.toast.error(p.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})):(this.toast.error(p.Message),this.formService.setErrors(p.Data))}))))),this.importExcelEffect=this.effect(n=>n.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(a=>this.contactSettingService.importContactSettings(a).pipe((0,te.K)(m=>{var p;return this.toast.error(null!==(p=m.Message)&&void 0!==p?p:"Failed to save",{duration:3e3}),k.E}),(0,C.b)(m=>{const p=JSON.parse(m.created),_=JSON.parse(m.updated),v=JSON.parse(m.failed),D=p.length+_.length+v.length;this.addContactSettings(p),this.updateContactSettings(_),this.toast.success(`${p.length} created, ${_.length} updated, ${v.length} failed of total ${D}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("contactSettingId")?(this.route.snapshot.paramMap.get("contactSettingId"),this.setFormName("contactSetting_edit")):this.setFormName("contactSetting_create"),this.route.snapshot.paramMap.has("contactId")){var c=this.route.snapshot.paramMap.get("contactId");this.setContactId(c)}if(this.route.snapshot.paramMap.has("integrationId")){var d=this.route.snapshot.paramMap.get("integrationId");this.setIntegrationId(d)}}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.contactSettingService.validateContactSettingExcelData(t,i.contacts,i.integrations)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(E.q),e.LFG(A.F0),e.LFG(A.gz),e.LFG(X.F),e.LFG(q.o),e.LFG(EA))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function OA(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close.emit())})("formIsReady",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.contactSetting)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let kn=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"contactSetting_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.contactSetting=i.item})):t.formName&&t.formName.currentValue&&"contactSetting_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadContactSettingEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.contactSetting=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Ks),e.Y36(A.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-contact-setting-form"]],inputs:{contactSetting:"contactSetting",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,OA,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[w.O5,z.M,w.Ov],encapsulation:2}),s})(),Zn=(()=>{class s{constructor(){this.autoHeight=!1,this.contactSettings=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[{field:"contact.name",headerName:"Contact",filter:"agTextColumnFilter"},{field:"integration.name",headerName:"Integration",filter:"agTextColumnFilter"},{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{field:"value",filter:"agTextColumnFilter"},{field:"iconUrl",filter:"agTextColumnFilter"},{field:"properties",filter:"agTextColumnFilter"},{field:"contactId",filter:"agTextColumnFilter",hide:!0},{field:"integrationId",filter:"agTextColumnFilter",hide:!0}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var r;t.includes(null===(r=i.data)||void 0===r?void 0:r.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-contact-setting-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(N.x,5),2&t){let r;e.iGM(r=e.CRH())&&(i.tableView=r.first)}},inputs:{autoHeight:"autoHeight",contactSettings:"contactSettings"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.contactSettings)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[N.x],encapsulation:2}),s})();function LA(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-contact-setting-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","contactSetting_edit")("formControl",t.formControl)("contactSetting",t.contactSetting)}}const GA=function(){return{}};function $A(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-contact-setting-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","contactSetting_create")("formControl",t.formControl)("contactSetting",e.DdM(3,GA))}}function RA(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-contact-setting-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(u.ref.close())}),e.qZA()}2&s&&e.Q6J("contactSettings",o.data.items)}let VA=(()=>{class s extends I.fS{constructor(t){super(),this.store=t,this.store.loadContactSettingsEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.contactSettings$.pipe((0,h.w)(i=>(0,T.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Ks))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","contactSetting","send","close"],[1,"w-full","h-full","bg-white",3,"contactSettings","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,LA,2,3,"ng-template",null,1,e.W1O),e.YNc(3,$A,1,4,"ng-template",null,2,e.W1O),e.YNc(5,RA,1,1,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",u)("editTemplate",r)("createTemplate",l)("key",i.field.key)}},dependencies:[x.JJ,x.oH,J.$,kn,Zn],encapsulation:2}),s})();function QA(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-contact-setting-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","contactSetting_edit")("contactSetting",t.value)}}const UA=function(){return{}};function JA(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-contact-setting-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","contactSetting_create")("contactSetting",e.DdM(2,UA))}function jA(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-contact-setting-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(null==u.ref?null:u.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("contactSettings",t.items)}}let zA=(()=>{class s extends Y{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","contactSetting","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","contactSettings","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,QA,1,2,"ng-template",null,1,e.W1O),e.YNc(3,JA,1,3,"ng-template",null,2,e.W1O),e.YNc(5,jA,1,2,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[ee,kn,Zn],encapsulation:2}),s})(),qA=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[Ks],imports:[w.ez,R.F,x.UX,V.o,H.u,Q.P,U.t,Z,j.h,K.G,I.X0.forChild({types:[{name:"contact-setting-select",component:VA,wrappers:["form-field"]},{name:"contact-setting-grid",component:zA}]})]}),s})(),HA=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[qA]}),s})();class Mt extends y.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class KA extends Mt{constructor(o,t){super("ValidateContactTagExcelDataAction"),this.valid=!1,this.excelData=o,this.contacts=t}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name),this.validationContext.addRule(new f.mi(`contactName_${i}_is_valid}`,"Contact Is Not Valid","contact.name",t.contact,this.contacts,!0))}),this.validationContext.addRule(new f.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof f.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(r=>r.name),newNames:[i.newName]}):i instanceof f.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,T.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class kA extends f.wS{constructor(o,t,i,r,l){super(o,t,i,r,l,!0)}}class ZA extends f.ul{constructor(o,t,i,r=!1){super(o,t,r),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new f.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new kA("name","The contacttag name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class BA extends Mt{constructor(o){super("CreateContactTagAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new ZA("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateContactTag({input:this.input}).pipe((0,h.w)(o=>(0,ie.of)(o.data.created)))}}class YA extends Mt{constructor(o){super("UpdateContactTagsAction"),this.contactTags=o}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.contactTags,!0))}performAction(){this.response=this.businessProvider.data.userUpdateContactTags({input:{contactTags:this.contactTags}}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}class XA extends Mt{constructor(o,t){super("UpdateContactTagAction"),this.contactTag=o,this.contactTagId=t}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.contactTag,!0)).addRule(new f.xF("Id","Id should be a CUID and not null",this.contactTagId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateContactTag({contactTagId:this.contactTagId,input:this.contactTag}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}let Bn=(()=>{class s extends y.nH{constructor(t,i,r){super("NotificationService.ContactTagBusinessProviderService",t,r),this.data=i}createContactTag(t){const i=new BA(t);return i.Do(this),i.response}updateContactTag(t,i){const r=new XA(t,i);return r.Do(this),r.response}importContactTags(t){const i=new YA(t);return i.Do(this),i.response}validateContactTagExcelData(t,i){const r=new KA(t,i);return r.Do(this),r.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(O.ed),e.LFG(E.q),e.LFG(y.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),eF=(()=>{class s extends y.nH{constructor(t,i,r){super("ContactTagService",r,t),this.businessProvider=i}createContactTag(t){const i=Object.fromEntries(Object.entries(t).filter(([r,l])=>null!==l));return this.businessProvider.createContactTag(i)}updateContactTag(t,i){return this.businessProvider.updateContactTag(t,i)}importContactTags(t){return this.businessProvider.importContactTags(t)}validateContactTagExcelData(t,i){return this.businessProvider.validateContactTagExcelData(t,i)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(Bn,8),e.LFG(Bn),e.LFG(O.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),ks=(()=>{class s extends g.m1{constructor(t,i,r,l,u,P){if(super({loading:!1,contactTags:[],done:!1,searchQuery:"",formName:void 0,contactId:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=r,this.toast=l,this.formService=u,this.contactTagService=P,this.errors$=this.select(d=>d.errors),this.loading$=this.select(d=>d.loading),this.done$=this.select(d=>d.done),this.item$=this.select(d=>d.item),this.contactTags$=this.select(d=>d.contactTags),this.contacts$=this.select(d=>d.contacts||[]),this.contactId$=this.select(d=>d.contactId),this.paging$=this.select(d=>d.paging),this.searchQuery$=this.select(d=>d.searchQuery),this.formName$=this.select(d=>d.formName),this.actionResult$=this.select(this.item$,this.done$,(d,n)=>({item:d,done:n}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.contactTags$,this.contacts$,(d,n,a,m,p,_)=>({errors:d,loading:n,item:a,formName:m,contactTags:p,contacts:_}),{debounce:!0}),this.input$=this.select(this.paging$,this.contactId$,this.searchQuery$,(d,n,a)=>({limit:d.limit,skip:d.skip,name:a,contactId:n,total:d.total})),this.setFormName=this.updater((d,n)=>Object.assign(Object.assign({},d),{formName:n})),this.setContactId=this.updater((d,n)=>Object.assign(Object.assign({},d),{contactId:n})),this.filterContacts=d=>this.data.userSelectContacts({input:{name:d}}).pipe((0,g._b)(n=>{let a=n.data.items;return this.patchState({contacts:a}),a},n=>this.patchState({errors:n.graphQLErrors?n.graphQLErrors:n})),(0,B.U)(n=>n.data.items)),this.addContact=this.updater((d,n)=>Object.assign(Object.assign({},d),{contacts:d.contacts.concat(n)})),this.setItem=this.updater((d,n)=>Object.assign(Object.assign({},d),{item:n})),this.addNewContactTag=this.updater((d,n)=>Object.assign(Object.assign({},d),{contactTags:[...d.contactTags,n]})),this.updateContactTag=this.updater((d,n)=>Object.assign(Object.assign({},d),{contactTags:d.contactTags.map(a=>a.id===n.id?n:a)})),this.addContactTags=this.updater((d,n)=>Object.assign(Object.assign({},d),{contactTags:d.contactTags.concat(n)})),this.updateContactTags=this.updater((d,n)=>Object.assign(Object.assign({},d),{contactTags:d.contactTags.map(a=>n.find(p=>p.id===a.id)||a)})),this.setSearchQuery=this.updater((d,n)=>Object.assign(Object.assign({},d),{searchQuery:n})),this.loadContactTagEffect=this.effect(d=>d.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(n=>this.data.userContactTag({contactTagId:n}).pipe((0,g._b)(a=>{this.patchState({item:a.data.item,errors:a.errors,loading:!1})},a=>this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})))))),this.loadContactTagsEffect=this.effect(d=>d.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.input$),(0,h.w)(([n,a])=>this.data.userContactTags({input:a}).pipe((0,g._b)(m=>this.patchState({paging:{limit:a.limit,skip:a.skip,total:m.data.count.total},contactTags:m.data.items,errors:m.errors,loading:!1}),m=>this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})))))),this.createContactTagEffect=this.effect(d=>d.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(n=>this.contactTagService.createContactTag(Object.assign({},n)).pipe((0,g._b)(a=>{this.addNewContactTag(a),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:a,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.updateContactTagEffect=this.effect(d=>d.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([n,a])=>this.contactTagService.updateContactTag(n,n.id).pipe((0,g._b)(m=>{this.updateContactTag(m),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:m,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},m=>{m.graphQLErrors?(this.toast.error(m.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})):(this.toast.error(m.Message),this.formService.setErrors(m.Data))}))))),this.deleteContactTagEffect=this.effect(d=>d.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([n,a])=>this.data.userDeleteContactTag({contactTagId:a.id}).pipe((0,g._b)(m=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:m.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},m=>{m.graphQLErrors?(this.toast.error(m.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})):(this.toast.error(m.Message),this.formService.setErrors(m.Data))}))))),this.importExcelEffect=this.effect(d=>d.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(n=>this.contactTagService.importContactTags(n).pipe((0,te.K)(a=>{var m;return this.toast.error(null!==(m=a.Message)&&void 0!==m?m:"Failed to save",{duration:3e3}),k.E}),(0,C.b)(a=>{const m=JSON.parse(a.created),p=JSON.parse(a.updated),_=JSON.parse(a.failed),v=m.length+p.length+_.length;this.addContactTags(m),this.updateContactTags(p),this.toast.success(`${m.length} created, ${p.length} updated, ${_.length} failed of total ${v}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("contactTagId")?(this.route.snapshot.paramMap.get("contactTagId"),this.setFormName("contactTag_edit")):this.setFormName("contactTag_create"),this.route.snapshot.paramMap.has("contactId")){var c=this.route.snapshot.paramMap.get("contactId");this.setContactId(c)}}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.contactTagService.validateContactTagExcelData(t,i.contacts)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(E.q),e.LFG(A.F0),e.LFG(A.gz),e.LFG(X.F),e.LFG(q.o),e.LFG(eF))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function tF(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close.emit())})("formIsReady",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.contactTag)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let Yn=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"contactTag_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.contactTag=i.item})):t.formName&&t.formName.currentValue&&"contactTag_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadContactTagEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.contactTag=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(ks),e.Y36(A.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-contact-tag-form"]],inputs:{contactTag:"contactTag",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,tF,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[w.O5,z.M,w.Ov],encapsulation:2}),s})(),Xn=(()=>{class s{constructor(){this.autoHeight=!1,this.contactTags=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[{field:"contact.name",headerName:"Contact",filter:"agTextColumnFilter"},{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{field:"contactId",filter:"agTextColumnFilter",hide:!0}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var r;t.includes(null===(r=i.data)||void 0===r?void 0:r.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-contact-tag-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(N.x,5),2&t){let r;e.iGM(r=e.CRH())&&(i.tableView=r.first)}},inputs:{autoHeight:"autoHeight",contactTags:"contactTags"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.contactTags)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[N.x],encapsulation:2}),s})();function iF(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-contact-tag-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","contactTag_edit")("formControl",t.formControl)("contactTag",t.contactTag)}}const sF=function(){return{}};function oF(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-contact-tag-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","contactTag_create")("formControl",t.formControl)("contactTag",e.DdM(3,sF))}}function rF(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-contact-tag-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(u.ref.close())}),e.qZA()}2&s&&e.Q6J("contactTags",o.data.items)}let aF=(()=>{class s extends I.fS{constructor(t){super(),this.store=t,this.store.loadContactTagsEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.contactTags$.pipe((0,h.w)(i=>(0,T.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(ks))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","contactTag","send","close"],[1,"w-full","h-full","bg-white",3,"contactTags","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,iF,2,3,"ng-template",null,1,e.W1O),e.YNc(3,oF,1,4,"ng-template",null,2,e.W1O),e.YNc(5,rF,1,1,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",u)("editTemplate",r)("createTemplate",l)("key",i.field.key)}},dependencies:[x.JJ,x.oH,J.$,Yn,Xn],encapsulation:2}),s})();function nF(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-contact-tag-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","contactTag_edit")("contactTag",t.value)}}const lF=function(){return{}};function cF(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-contact-tag-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","contactTag_create")("contactTag",e.DdM(2,lF))}function dF(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-contact-tag-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(null==u.ref?null:u.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("contactTags",t.items)}}let uF=(()=>{class s extends Y{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","contactTag","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","contactTags","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,nF,1,2,"ng-template",null,1,e.W1O),e.YNc(3,cF,1,3,"ng-template",null,2,e.W1O),e.YNc(5,dF,1,2,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[ee,Yn,Xn],encapsulation:2}),s})(),mF=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[ks],imports:[w.ez,R.F,x.UX,V.o,H.u,Q.P,U.t,Z,j.h,K.G,I.X0.forChild({types:[{name:"contact-tag-select",component:aF,wrappers:["form-field"]},{name:"contact-tag-grid",component:uF}]})]}),s})(),pF=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[mF]}),s})();class Et extends y.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class hF extends Et{constructor(o){super("ValidateContractedRateKindExcelDataAction"),this.valid=!1,this.excelData=o}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name)}),this.validationContext.addRule(new f.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof f.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(r=>r.name),newNames:[i.newName]}):i instanceof f.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,T.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class fF extends f.wS{constructor(o,t,i,r,l){super(o,t,i,r,l,!0)}}class _F extends f.ul{constructor(o,t,i,r=!1){super(o,t,r),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new f.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new fF("name","The contractedratekind name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class gF extends Et{constructor(o){super("CreateContractedRateKindAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new _F("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateContractedRateKind({input:this.input}).pipe((0,h.w)(o=>(0,ie.of)(o.data.created)))}}class CF extends Et{constructor(o){super("UpdateContractedRateKindsAction"),this.contractedRateKinds=o}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.contractedRateKinds,!0))}performAction(){this.response=this.businessProvider.data.userUpdateContractedRateKinds({input:{contractedRateKinds:this.contractedRateKinds}}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}class SF extends Et{constructor(o,t){super("UpdateContractedRateKindAction"),this.contractedRateKind=o,this.contractedRateKindId=t}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.contractedRateKind,!0)).addRule(new f.xF("Id","Id should be a CUID and not null",this.contractedRateKindId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateContractedRateKind({contractedRateKindId:this.contractedRateKindId,input:this.contractedRateKind}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}let el=(()=>{class s extends y.nH{constructor(t,i,r){super("NotificationService.ContractedRateKindBusinessProviderService",t,r),this.data=i}createContractedRateKind(t){const i=new gF(t);return i.Do(this),i.response}updateContractedRateKind(t,i){const r=new SF(t,i);return r.Do(this),r.response}importContractedRateKinds(t){const i=new CF(t);return i.Do(this),i.response}validateContractedRateKindExcelData(t){const i=new hF(t);return i.Do(this),i.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(O.ed),e.LFG(E.q),e.LFG(y.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),vF=(()=>{class s extends y.nH{constructor(t,i,r){super("ContractedRateKindService",r,t),this.businessProvider=i}createContractedRateKind(t){const i=Object.fromEntries(Object.entries(t).filter(([r,l])=>null!==l));return this.businessProvider.createContractedRateKind(i)}updateContractedRateKind(t,i){return this.businessProvider.updateContractedRateKind(t,i)}importContractedRateKinds(t){return this.businessProvider.importContractedRateKinds(t)}validateContractedRateKindExcelData(t){return this.businessProvider.validateContractedRateKindExcelData(t)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(el,8),e.LFG(el),e.LFG(O.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),Zs=(()=>{class s extends g.m1{constructor(t,i,r,l,u,P){super({loading:!1,contractedRateKinds:[],done:!1,searchQuery:"",formName:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=r,this.toast=l,this.formService=u,this.contractedRateKindService=P,this.errors$=this.select(c=>c.errors),this.loading$=this.select(c=>c.loading),this.done$=this.select(c=>c.done),this.item$=this.select(c=>c.item),this.contractedRateKinds$=this.select(c=>c.contractedRateKinds),this.paging$=this.select(c=>c.paging),this.searchQuery$=this.select(c=>c.searchQuery),this.formName$=this.select(c=>c.formName),this.actionResult$=this.select(this.item$,this.done$,(c,d)=>({item:c,done:d}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.contractedRateKinds$,(c,d,n,a,m)=>({errors:c,loading:d,item:n,formName:a,contractedRateKinds:m}),{debounce:!0}),this.input$=this.select(this.paging$,this.searchQuery$,(c,d)=>({limit:c.limit,skip:c.skip,name:d,total:c.total})),this.setFormName=this.updater((c,d)=>Object.assign(Object.assign({},c),{formName:d})),this.setItem=this.updater((c,d)=>Object.assign(Object.assign({},c),{item:d})),this.addNewContractedRateKind=this.updater((c,d)=>Object.assign(Object.assign({},c),{contractedRateKinds:[...c.contractedRateKinds,d]})),this.updateContractedRateKind=this.updater((c,d)=>Object.assign(Object.assign({},c),{contractedRateKinds:c.contractedRateKinds.map(n=>n.id===d.id?d:n)})),this.addContractedRateKinds=this.updater((c,d)=>Object.assign(Object.assign({},c),{contractedRateKinds:c.contractedRateKinds.concat(d)})),this.updateContractedRateKinds=this.updater((c,d)=>Object.assign(Object.assign({},c),{contractedRateKinds:c.contractedRateKinds.map(n=>d.find(m=>m.id===n.id)||n)})),this.setSearchQuery=this.updater((c,d)=>Object.assign(Object.assign({},c),{searchQuery:d})),this.loadContractedRateKindEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.data.userContractedRateKind({contractedRateKindId:d}).pipe((0,g._b)(n=>{this.patchState({item:n.data.item,errors:n.errors,loading:!1})},n=>this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})))))),this.loadContractedRateKindsEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.input$),(0,h.w)(([d,n])=>this.data.userContractedRateKinds({input:n}).pipe((0,g._b)(a=>this.patchState({paging:{limit:n.limit,skip:n.skip,total:a.data.count.total},contractedRateKinds:a.data.items,errors:a.errors,loading:!1}),a=>this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})))))),this.createContractedRateKindEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.contractedRateKindService.createContractedRateKind(Object.assign({},d)).pipe((0,g._b)(n=>{this.addNewContractedRateKind(n),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:n,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},n=>{n.graphQLErrors?(this.toast.error(n.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})):(this.toast.error(n.Message),this.formService.setErrors(n.Data))}))))),this.updateContractedRateKindEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([d,n])=>this.contractedRateKindService.updateContractedRateKind(d,d.id).pipe((0,g._b)(a=>{this.updateContractedRateKind(a),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:a,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.deleteContractedRateKindEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([d,n])=>this.data.userDeleteContractedRateKind({contractedRateKindId:n.id}).pipe((0,g._b)(a=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:a.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.importExcelEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.contractedRateKindService.importContractedRateKinds(d).pipe((0,te.K)(n=>{var a;return this.toast.error(null!==(a=n.Message)&&void 0!==a?a:"Failed to save",{duration:3e3}),k.E}),(0,C.b)(n=>{const a=JSON.parse(n.created),m=JSON.parse(n.updated),p=JSON.parse(n.failed),_=a.length+m.length+p.length;this.addContractedRateKinds(a),this.updateContractedRateKinds(m),this.toast.success(`${a.length} created, ${m.length} updated, ${p.length} failed of total ${_}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("contractedRateKindId")?(this.route.snapshot.paramMap.get("contractedRateKindId"),this.setFormName("contractedRateKind_edit")):this.setFormName("contractedRateKind_create")}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.contractedRateKindService.validateContractedRateKindExcelData(t)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(E.q),e.LFG(A.F0),e.LFG(A.gz),e.LFG(X.F),e.LFG(q.o),e.LFG(vF))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function bF(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close.emit())})("formIsReady",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.contractedRateKind)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let tl=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"contractedRateKind_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.contractedRateKind=i.item})):t.formName&&t.formName.currentValue&&"contractedRateKind_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadContractedRateKindEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.contractedRateKind=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Zs),e.Y36(A.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-contracted-rate-kind-form"]],inputs:{contractedRateKind:"contractedRateKind",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,bF,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[w.O5,z.M,w.Ov],encapsulation:2}),s})(),il=(()=>{class s{constructor(){this.autoHeight=!1,this.contractedRateKinds=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[,{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{field:"code",filter:"agTextColumnFilter"},{headerName:"Value",field:"value",valueFormatter:t=>{var i;return(0,S.oBD)(null===(i=t.data)||void 0===i?void 0:i.value,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var r;t.includes(null===(r=i.data)||void 0===r?void 0:r.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-contracted-rate-kind-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(N.x,5),2&t){let r;e.iGM(r=e.CRH())&&(i.tableView=r.first)}},inputs:{autoHeight:"autoHeight",contractedRateKinds:"contractedRateKinds"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.contractedRateKinds)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[N.x],encapsulation:2}),s})();function TF(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-contracted-rate-kind-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","contractedRateKind_edit")("formControl",t.formControl)("contractedRateKind",t.contractedRateKind)}}const yF=function(){return{}};function wF(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-contracted-rate-kind-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","contractedRateKind_create")("formControl",t.formControl)("contractedRateKind",e.DdM(3,yF))}}function xF(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-contracted-rate-kind-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(u.ref.close())}),e.qZA()}2&s&&e.Q6J("contractedRateKinds",o.data.items)}let NF=(()=>{class s extends I.fS{constructor(t){super(),this.store=t,this.store.loadContractedRateKindsEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.contractedRateKinds$.pipe((0,h.w)(i=>(0,T.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Zs))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","contractedRateKind","send","close"],[1,"w-full","h-full","bg-white",3,"contractedRateKinds","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,TF,2,3,"ng-template",null,1,e.W1O),e.YNc(3,wF,1,4,"ng-template",null,2,e.W1O),e.YNc(5,xF,1,1,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",u)("editTemplate",r)("createTemplate",l)("key",i.field.key)}},dependencies:[x.JJ,x.oH,J.$,tl,il],encapsulation:2}),s})();function AF(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-contracted-rate-kind-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","contractedRateKind_edit")("contractedRateKind",t.value)}}const FF=function(){return{}};function DF(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-contracted-rate-kind-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","contractedRateKind_create")("contractedRateKind",e.DdM(2,FF))}function IF(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-contracted-rate-kind-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(null==u.ref?null:u.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("contractedRateKinds",t.items)}}let PF=(()=>{class s extends Y{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","contractedRateKind","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","contractedRateKinds","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,AF,1,2,"ng-template",null,1,e.W1O),e.YNc(3,DF,1,3,"ng-template",null,2,e.W1O),e.YNc(5,IF,1,2,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[ee,tl,il],encapsulation:2}),s})(),WF=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[Zs],imports:[w.ez,R.F,x.UX,V.o,H.u,Q.P,U.t,Z,j.h,K.G,I.X0.forChild({types:[{name:"contracted-rate-kind-select",component:NF,wrappers:["form-field"]},{name:"contracted-rate-kind-grid",component:PF}]})]}),s})(),MF=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[WF]}),s})();class Ot extends y.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class EF extends Ot{constructor(o,t,i,r,l,u,P){super("ValidateContractedRateExcelDataAction"),this.valid=!1,this.excelData=o,this.contracts=t,this.contractedRateKinds=i,this.contractKinds=r,this.visitKinds=l,this.clinicalProviders=u,this.specialties=P}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name),this.validationContext.addRule(new f.mi(`contractName_${i}_is_valid}`,"Contract Is Not Valid","contract.name",t.contract,this.contracts,!0)),this.validationContext.addRule(new f.mi(`contractedRateKindName_${i}_is_valid}`,"Contracted Rate Kind Is Not Valid","contractedRateKind.name",t.contractedRateKind,this.contractedRateKinds,!0)),this.validationContext.addRule(new f.mi(`contractKindName_${i}_is_valid}`,"Contract Kind Is Not Valid","contractKind.name",t.contractKind,this.contractKinds,!0)),this.validationContext.addRule(new f.mi(`visitKindName_${i}_is_valid}`,"Visit Kind Is Not Valid","visitKind.name",t.visitKind,this.visitKinds,!0)),this.validationContext.addRule(new f.mi(`clinicalProviderName_${i}_is_valid}`,"Clinical Provider Is Not Valid","clinicalProvider.name",t.clinicalProvider,this.clinicalProviders,!0)),this.validationContext.addRule(new f.mi(`specialtyName_${i}_is_valid}`,"Specialty Is Not Valid","specialty.name",t.specialty,this.specialties,!0))}),this.validationContext.addRule(new f.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof f.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(r=>r.name),newNames:[i.newName]}):i instanceof f.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,T.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class OF extends f.wS{constructor(o,t,i,r,l){super(o,t,i,r,l,!0)}}class LF extends f.ul{constructor(o,t,i,r=!1){super(o,t,r),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new f.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new OF("name","The contractedrate name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class GF extends Ot{constructor(o){super("CreateContractedRateAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new LF("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateContractedRate({input:this.input}).pipe((0,h.w)(o=>(0,ie.of)(o.data.created)))}}class $F extends Ot{constructor(o){super("UpdateContractedRatesAction"),this.contractedRates=o}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.contractedRates,!0))}performAction(){this.response=this.businessProvider.data.userUpdateContractedRates({input:{contractedRates:this.contractedRates}}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}class RF extends Ot{constructor(o,t){super("UpdateContractedRateAction"),this.contractedRate=o,this.contractedRateId=t}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.contractedRate,!0)).addRule(new f.xF("Id","Id should be a CUID and not null",this.contractedRateId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateContractedRate({contractedRateId:this.contractedRateId,input:this.contractedRate}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}let sl=(()=>{class s extends y.nH{constructor(t,i,r){super("NotificationService.ContractedRateBusinessProviderService",t,r),this.data=i}createContractedRate(t){const i=new GF(t);return i.Do(this),i.response}updateContractedRate(t,i){const r=new RF(t,i);return r.Do(this),r.response}importContractedRates(t){const i=new $F(t);return i.Do(this),i.response}validateContractedRateExcelData(t,i,r,l,u,P,b){const c=new EF(t,i,r,l,u,P,b);return c.Do(this),c.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(O.ed),e.LFG(E.q),e.LFG(y.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),VF=(()=>{class s extends y.nH{constructor(t,i,r){super("ContractedRateService",r,t),this.businessProvider=i}createContractedRate(t){const i=Object.fromEntries(Object.entries(t).filter(([r,l])=>null!==l));return this.businessProvider.createContractedRate(i)}updateContractedRate(t,i){return this.businessProvider.updateContractedRate(t,i)}importContractedRates(t){return this.businessProvider.importContractedRates(t)}validateContractedRateExcelData(t,i,r,l,u,P,b){return this.businessProvider.validateContractedRateExcelData(t,i,r,l,u,P,b)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(sl,8),e.LFG(sl),e.LFG(O.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),Bs=(()=>{class s extends g.m1{constructor(t,i,r,l,u,P){if(super({loading:!1,contractedRates:[],done:!1,searchQuery:"",formName:void 0,contractId:void 0,contractedRateKindId:void 0,contractKindId:void 0,visitKindId:void 0,clinicalProviderId:void 0,specialtyId:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=r,this.toast=l,this.formService=u,this.contractedRateService=P,this.errors$=this.select(_=>_.errors),this.loading$=this.select(_=>_.loading),this.done$=this.select(_=>_.done),this.item$=this.select(_=>_.item),this.contractedRates$=this.select(_=>_.contractedRates),this.contracts$=this.select(_=>_.contracts||[]),this.contractedRateKinds$=this.select(_=>_.contractedRateKinds||[]),this.contractKinds$=this.select(_=>_.contractKinds||[]),this.visitKinds$=this.select(_=>_.visitKinds||[]),this.clinicalProviders$=this.select(_=>_.clinicalProviders||[]),this.specialties$=this.select(_=>_.specialties||[]),this.contractId$=this.select(_=>_.contractId),this.contractedRateKindId$=this.select(_=>_.contractedRateKindId),this.contractKindId$=this.select(_=>_.contractKindId),this.visitKindId$=this.select(_=>_.visitKindId),this.clinicalProviderId$=this.select(_=>_.clinicalProviderId),this.specialtyId$=this.select(_=>_.specialtyId),this.paging$=this.select(_=>_.paging),this.searchQuery$=this.select(_=>_.searchQuery),this.formName$=this.select(_=>_.formName),this.actionResult$=this.select(this.item$,this.done$,(_,v)=>({item:_,done:v}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.contractedRates$,this.contracts$,this.contractedRateKinds$,this.contractKinds$,this.visitKinds$,this.clinicalProviders$,this.specialties$,(_,v,D,se,me,G,$,M,L,ne,ue)=>({errors:_,loading:v,item:D,formName:se,contractedRates:me,contracts:G,contractedRateKinds:$,contractKinds:M,visitKinds:L,clinicalProviders:ne,specialties:ue}),{debounce:!0}),this.input$=this.select(this.paging$,this.contractId$,this.contractedRateKindId$,this.contractKindId$,this.visitKindId$,this.clinicalProviderId$,this.specialtyId$,this.searchQuery$,(_,v,D,se,me,G,$,M)=>({limit:_.limit,skip:_.skip,name:M,contractId:v,contractedRateKindId:D,contractKindId:se,visitKindId:me,clinicalProviderId:G,specialtyId:$,total:_.total})),this.setFormName=this.updater((_,v)=>Object.assign(Object.assign({},_),{formName:v})),this.setContractId=this.updater((_,v)=>Object.assign(Object.assign({},_),{contractId:v})),this.setContractedRateKindId=this.updater((_,v)=>Object.assign(Object.assign({},_),{contractedRateKindId:v})),this.setContractKindId=this.updater((_,v)=>Object.assign(Object.assign({},_),{contractKindId:v})),this.setVisitKindId=this.updater((_,v)=>Object.assign(Object.assign({},_),{visitKindId:v})),this.setClinicalProviderId=this.updater((_,v)=>Object.assign(Object.assign({},_),{clinicalProviderId:v})),this.setSpecialtyId=this.updater((_,v)=>Object.assign(Object.assign({},_),{specialtyId:v})),this.filterContracts=_=>this.data.userSelectContracts({input:{name:_}}).pipe((0,g._b)(v=>{let D=v.data.items;return this.patchState({contracts:D}),D},v=>this.patchState({errors:v.graphQLErrors?v.graphQLErrors:v})),(0,B.U)(v=>v.data.items)),this.filterContractedRateKinds=_=>this.data.userSelectContractedRateKinds({input:{name:_}}).pipe((0,g._b)(v=>{let D=v.data.items;return this.patchState({contractedRateKinds:D}),D},v=>this.patchState({errors:v.graphQLErrors?v.graphQLErrors:v})),(0,B.U)(v=>v.data.items)),this.filterContractKinds=_=>this.data.userSelectContractKinds({input:{name:_}}).pipe((0,g._b)(v=>{let D=v.data.items;return this.patchState({contractKinds:D}),D},v=>this.patchState({errors:v.graphQLErrors?v.graphQLErrors:v})),(0,B.U)(v=>v.data.items)),this.filterVisitKinds=_=>this.data.userSelectVisitKinds({input:{name:_}}).pipe((0,g._b)(v=>{let D=v.data.items;return this.patchState({visitKinds:D}),D},v=>this.patchState({errors:v.graphQLErrors?v.graphQLErrors:v})),(0,B.U)(v=>v.data.items)),this.filterClinicalProviders=_=>this.data.userSelectClinicalProviders({input:{name:_}}).pipe((0,g._b)(v=>{let D=v.data.items;return this.patchState({clinicalProviders:D}),D},v=>this.patchState({errors:v.graphQLErrors?v.graphQLErrors:v})),(0,B.U)(v=>v.data.items)),this.filterSpecialties=_=>this.data.userSelectSpecialties({input:{name:_}}).pipe((0,g._b)(v=>{let D=v.data.items;return this.patchState({specialties:D}),D},v=>this.patchState({errors:v.graphQLErrors?v.graphQLErrors:v})),(0,B.U)(v=>v.data.items)),this.addContract=this.updater((_,v)=>Object.assign(Object.assign({},_),{contracts:_.contracts.concat(v)})),this.addContractedRateKind=this.updater((_,v)=>Object.assign(Object.assign({},_),{contractedRateKinds:_.contractedRateKinds.concat(v)})),this.addContractKind=this.updater((_,v)=>Object.assign(Object.assign({},_),{contractKinds:_.contractKinds.concat(v)})),this.addVisitKind=this.updater((_,v)=>Object.assign(Object.assign({},_),{visitKinds:_.visitKinds.concat(v)})),this.addClinicalProvider=this.updater((_,v)=>Object.assign(Object.assign({},_),{clinicalProviders:_.clinicalProviders.concat(v)})),this.addSpecialty=this.updater((_,v)=>Object.assign(Object.assign({},_),{specialties:_.specialties.concat(v)})),this.setItem=this.updater((_,v)=>Object.assign(Object.assign({},_),{item:v})),this.addNewContractedRate=this.updater((_,v)=>Object.assign(Object.assign({},_),{contractedRates:[..._.contractedRates,v]})),this.updateContractedRate=this.updater((_,v)=>Object.assign(Object.assign({},_),{contractedRates:_.contractedRates.map(D=>D.id===v.id?v:D)})),this.addContractedRates=this.updater((_,v)=>Object.assign(Object.assign({},_),{contractedRates:_.contractedRates.concat(v)})),this.updateContractedRates=this.updater((_,v)=>Object.assign(Object.assign({},_),{contractedRates:_.contractedRates.map(D=>v.find(me=>me.id===D.id)||D)})),this.setSearchQuery=this.updater((_,v)=>Object.assign(Object.assign({},_),{searchQuery:v})),this.loadContractedRateEffect=this.effect(_=>_.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(v=>this.data.userContractedRate({contractedRateId:v}).pipe((0,g._b)(D=>{this.patchState({item:D.data.item,errors:D.errors,loading:!1})},D=>this.patchState({loading:!1,errors:D.graphQLErrors?D.graphQLErrors:D})))))),this.loadContractedRatesEffect=this.effect(_=>_.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.input$),(0,h.w)(([v,D])=>this.data.userContractedRates({input:D}).pipe((0,g._b)(se=>this.patchState({paging:{limit:D.limit,skip:D.skip,total:se.data.count.total},contractedRates:se.data.items,errors:se.errors,loading:!1}),se=>this.patchState({loading:!1,errors:se.graphQLErrors?se.graphQLErrors:se})))))),this.createContractedRateEffect=this.effect(_=>_.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(v=>this.contractedRateService.createContractedRate(Object.assign({},v)).pipe((0,g._b)(D=>{this.addNewContractedRate(D),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:D,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},D=>{D.graphQLErrors?(this.toast.error(D.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:D.graphQLErrors?D.graphQLErrors:D})):(this.toast.error(D.Message),this.formService.setErrors(D.Data))}))))),this.updateContractedRateEffect=this.effect(_=>_.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([v,D])=>this.contractedRateService.updateContractedRate(v,v.id).pipe((0,g._b)(se=>{this.updateContractedRate(se),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:se,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},se=>{se.graphQLErrors?(this.toast.error(se.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:se.graphQLErrors?se.graphQLErrors:se})):(this.toast.error(se.Message),this.formService.setErrors(se.Data))}))))),this.deleteContractedRateEffect=this.effect(_=>_.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([v,D])=>this.data.userDeleteContractedRate({contractedRateId:D.id}).pipe((0,g._b)(se=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:se.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},se=>{se.graphQLErrors?(this.toast.error(se.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:se.graphQLErrors?se.graphQLErrors:se})):(this.toast.error(se.Message),this.formService.setErrors(se.Data))}))))),this.importExcelEffect=this.effect(_=>_.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(v=>this.contractedRateService.importContractedRates(v).pipe((0,te.K)(D=>{var se;return this.toast.error(null!==(se=D.Message)&&void 0!==se?se:"Failed to save",{duration:3e3}),k.E}),(0,C.b)(D=>{const se=JSON.parse(D.created),me=JSON.parse(D.updated),G=JSON.parse(D.failed),$=se.length+me.length+G.length;this.addContractedRates(se),this.updateContractedRates(me),this.toast.success(`${se.length} created, ${me.length} updated, ${G.length} failed of total ${$}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("contractedRateId")?(this.route.snapshot.paramMap.get("contractedRateId"),this.setFormName("contractedRate_edit")):this.setFormName("contractedRate_create"),this.route.snapshot.paramMap.has("contractId")){var c=this.route.snapshot.paramMap.get("contractId");this.setContractId(c)}if(this.route.snapshot.paramMap.has("contractedRateKindId")){var d=this.route.snapshot.paramMap.get("contractedRateKindId");this.setContractedRateKindId(d)}if(this.route.snapshot.paramMap.has("contractKindId")){var n=this.route.snapshot.paramMap.get("contractKindId");this.setContractKindId(n)}if(this.route.snapshot.paramMap.has("visitKindId")){var a=this.route.snapshot.paramMap.get("visitKindId");this.setVisitKindId(a)}if(this.route.snapshot.paramMap.has("clinicalProviderId")){var m=this.route.snapshot.paramMap.get("clinicalProviderId");this.setClinicalProviderId(m)}if(this.route.snapshot.paramMap.has("specialtyId")){var p=this.route.snapshot.paramMap.get("specialtyId");this.setSpecialtyId(p)}}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.contractedRateService.validateContractedRateExcelData(t,i.contracts,i.contractedRateKinds,i.contractKinds,i.visitKinds,i.clinicalProviders,i.specialties)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(E.q),e.LFG(A.F0),e.LFG(A.gz),e.LFG(X.F),e.LFG(q.o),e.LFG(VF))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function QF(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close.emit())})("formIsReady",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.contractedRate)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let ol=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"contractedRate_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({id:null,name:""}),this.store.vm$.subscribe(i=>{this.contractedRate=i.item})):t.formName&&t.formName.currentValue&&"contractedRate_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadContractedRateEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.contractedRate=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Bs),e.Y36(A.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-contracted-rate-form"]],inputs:{contractedRate:"contractedRate",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,QF,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[w.O5,z.M,w.Ov],encapsulation:2}),s})(),rl=(()=>{class s{constructor(){this.autoHeight=!1,this.contractedRates=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[{field:"contract.name",headerName:"Contract",filter:"agTextColumnFilter"},{field:"contractedRateKind.name",headerName:"Contracted Rate Kind",filter:"agTextColumnFilter"},{field:"contractKind.name",headerName:"Contract Kind",filter:"agTextColumnFilter"},{field:"visitKind.name",headerName:"Visit Kind",filter:"agTextColumnFilter"},{field:"clinicalProvider.name",headerName:"Clinical Provider",filter:"agTextColumnFilter"},{field:"specialty.name",headerName:"Specialty",filter:"agTextColumnFilter"},{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{headerName:"Amount",field:"amount",valueFormatter:t=>{var i;return(0,S.oBD)(null===(i=t.data)||void 0===i?void 0:i.amount,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{headerName:"Percentage",field:"percentage",valueFormatter:t=>{var i;return(0,S.oBD)(null===(i=t.data)||void 0===i?void 0:i.percentage,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{headerName:"Reimbursed Rate",field:"reimbursedRate",valueFormatter:t=>{var i;return(0,S.oBD)(null===(i=t.data)||void 0===i?void 0:i.reimbursedRate,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{headerName:"Bill on Behalf",field:"billOnBehalf",filter:"agSetColumnFilter",cellRenderer:"checkboxRenderer"},{field:"contractId",filter:"agTextColumnFilter",hide:!0},{field:"contractedRateKindId",filter:"agTextColumnFilter",hide:!0},{field:"contractKindId",filter:"agTextColumnFilter",hide:!0},{field:"visitKindId",filter:"agTextColumnFilter",hide:!0},{field:"clinicalProviderId",filter:"agTextColumnFilter",hide:!0},{field:"specialtyId",filter:"agTextColumnFilter",hide:!0}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var r;t.includes(null===(r=i.data)||void 0===r?void 0:r.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-contracted-rate-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(N.x,5),2&t){let r;e.iGM(r=e.CRH())&&(i.tableView=r.first)}},inputs:{autoHeight:"autoHeight",contractedRates:"contractedRates"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.contractedRates)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[N.x],encapsulation:2}),s})();function UF(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-contracted-rate-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","contractedRate_edit")("formControl",t.formControl)("contractedRate",t.contractedRate)}}const JF=function(){return{}};function jF(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-contracted-rate-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","contractedRate_create")("formControl",t.formControl)("contractedRate",e.DdM(3,JF))}}function zF(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-contracted-rate-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(u.ref.close())}),e.qZA()}2&s&&e.Q6J("contractedRates",o.data.items)}let qF=(()=>{class s extends I.fS{constructor(t){super(),this.store=t,this.store.loadContractedRatesEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.contractedRates$.pipe((0,h.w)(i=>(0,T.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Bs))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","contractedRate","send","close"],[1,"w-full","h-full","bg-white",3,"contractedRates","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,UF,2,3,"ng-template",null,1,e.W1O),e.YNc(3,jF,1,4,"ng-template",null,2,e.W1O),e.YNc(5,zF,1,1,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",u)("editTemplate",r)("createTemplate",l)("key",i.field.key)}},dependencies:[x.JJ,x.oH,J.$,ol,rl],encapsulation:2}),s})();function HF(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-contracted-rate-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","contractedRate_edit")("contractedRate",t.value)}}const KF=function(){return{}};function kF(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-contracted-rate-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","contractedRate_create")("contractedRate",e.DdM(2,KF))}function ZF(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-contracted-rate-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(null==u.ref?null:u.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("contractedRates",t.items)}}let BF=(()=>{class s extends Y{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:6,consts:[[3,"data","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","contractedRate","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","contractedRates","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,HF,1,2,"ng-template",null,1,e.W1O),e.YNc(3,kF,1,3,"ng-template",null,2,e.W1O),e.YNc(5,ZF,1,2,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("data",i.data)("title",i.to.title)("onSave",i.onSave)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[ee,ol,rl],encapsulation:2}),s})(),YF=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[Bs],imports:[w.ez,R.F,x.UX,V.o,H.u,Q.P,U.t,Z,j.h,K.G,I.X0.forChild({types:[{name:"contracted-rate-select",component:qF,wrappers:["form-field"]},{name:"contracted-rate-grid",component:BF}]})]}),s})(),XF=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[YF]}),s})();class Lt extends y.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class eD extends Lt{constructor(o){super("ValidateContractKindExcelDataAction"),this.valid=!1,this.excelData=o}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name)}),this.validationContext.addRule(new f.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof f.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(r=>r.name),newNames:[i.newName]}):i instanceof f.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,T.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class tD extends f.wS{constructor(o,t,i,r,l){super(o,t,i,r,l,!0)}}class iD extends f.ul{constructor(o,t,i,r=!1){super(o,t,r),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new f.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new tD("name","The contractkind name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class sD extends Lt{constructor(o){super("CreateContractKindAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new iD("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateContractKind({input:this.input}).pipe((0,h.w)(o=>(0,ie.of)(o.data.created)))}}class oD extends Lt{constructor(o){super("UpdateContractKindsAction"),this.contractKinds=o}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.contractKinds,!0))}performAction(){this.response=this.businessProvider.data.userUpdateContractKinds({input:{contractKinds:this.contractKinds}}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}class rD extends Lt{constructor(o,t){super("UpdateContractKindAction"),this.contractKind=o,this.contractKindId=t}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.contractKind,!0)).addRule(new f.xF("Id","Id should be a CUID and not null",this.contractKindId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateContractKind({contractKindId:this.contractKindId,input:this.contractKind}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}let al=(()=>{class s extends y.nH{constructor(t,i,r){super("NotificationService.ContractKindBusinessProviderService",t,r),this.data=i}createContractKind(t){const i=new sD(t);return i.Do(this),i.response}updateContractKind(t,i){const r=new rD(t,i);return r.Do(this),r.response}importContractKinds(t){const i=new oD(t);return i.Do(this),i.response}validateContractKindExcelData(t){const i=new eD(t);return i.Do(this),i.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(O.ed),e.LFG(E.q),e.LFG(y.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),aD=(()=>{class s extends y.nH{constructor(t,i,r){super("ContractKindService",r,t),this.businessProvider=i}createContractKind(t){const i=Object.fromEntries(Object.entries(t).filter(([r,l])=>null!==l));return this.businessProvider.createContractKind(i)}updateContractKind(t,i){return this.businessProvider.updateContractKind(t,i)}importContractKinds(t){return this.businessProvider.importContractKinds(t)}validateContractKindExcelData(t){return this.businessProvider.validateContractKindExcelData(t)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(al,8),e.LFG(al),e.LFG(O.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),Ys=(()=>{class s extends g.m1{constructor(t,i,r,l,u,P){super({loading:!1,contractKinds:[],done:!1,searchQuery:"",formName:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=r,this.toast=l,this.formService=u,this.contractKindService=P,this.errors$=this.select(c=>c.errors),this.loading$=this.select(c=>c.loading),this.done$=this.select(c=>c.done),this.item$=this.select(c=>c.item),this.contractKinds$=this.select(c=>c.contractKinds),this.paging$=this.select(c=>c.paging),this.searchQuery$=this.select(c=>c.searchQuery),this.formName$=this.select(c=>c.formName),this.actionResult$=this.select(this.item$,this.done$,(c,d)=>({item:c,done:d}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.contractKinds$,(c,d,n,a,m)=>({errors:c,loading:d,item:n,formName:a,contractKinds:m}),{debounce:!0}),this.input$=this.select(this.paging$,this.searchQuery$,(c,d)=>({limit:c.limit,skip:c.skip,name:d,total:c.total})),this.setFormName=this.updater((c,d)=>Object.assign(Object.assign({},c),{formName:d})),this.setItem=this.updater((c,d)=>Object.assign(Object.assign({},c),{item:d})),this.addNewContractKind=this.updater((c,d)=>Object.assign(Object.assign({},c),{contractKinds:[...c.contractKinds,d]})),this.updateContractKind=this.updater((c,d)=>Object.assign(Object.assign({},c),{contractKinds:c.contractKinds.map(n=>n.id===d.id?d:n)})),this.addContractKinds=this.updater((c,d)=>Object.assign(Object.assign({},c),{contractKinds:c.contractKinds.concat(d)})),this.updateContractKinds=this.updater((c,d)=>Object.assign(Object.assign({},c),{contractKinds:c.contractKinds.map(n=>d.find(m=>m.id===n.id)||n)})),this.setSearchQuery=this.updater((c,d)=>Object.assign(Object.assign({},c),{searchQuery:d})),this.loadContractKindEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.data.userContractKind({contractKindId:d}).pipe((0,g._b)(n=>{this.patchState({item:n.data.item,errors:n.errors,loading:!1})},n=>this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})))))),this.loadContractKindsEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.input$),(0,h.w)(([d,n])=>this.data.userContractKinds({input:n}).pipe((0,g._b)(a=>this.patchState({paging:{limit:n.limit,skip:n.skip,total:a.data.count.total},contractKinds:a.data.items,errors:a.errors,loading:!1}),a=>this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})))))),this.createContractKindEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.contractKindService.createContractKind(Object.assign({},d)).pipe((0,g._b)(n=>{this.addNewContractKind(n),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:n,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},n=>{n.graphQLErrors?(this.toast.error(n.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})):(this.toast.error(n.Message),this.formService.setErrors(n.Data))}))))),this.updateContractKindEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([d,n])=>this.contractKindService.updateContractKind(d,d.id).pipe((0,g._b)(a=>{this.updateContractKind(a),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:a,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.deleteContractKindEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([d,n])=>this.data.userDeleteContractKind({contractKindId:n.id}).pipe((0,g._b)(a=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:a.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.importExcelEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.contractKindService.importContractKinds(d).pipe((0,te.K)(n=>{var a;return this.toast.error(null!==(a=n.Message)&&void 0!==a?a:"Failed to save",{duration:3e3}),k.E}),(0,C.b)(n=>{const a=JSON.parse(n.created),m=JSON.parse(n.updated),p=JSON.parse(n.failed),_=a.length+m.length+p.length;this.addContractKinds(a),this.updateContractKinds(m),this.toast.success(`${a.length} created, ${m.length} updated, ${p.length} failed of total ${_}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("contractKindId")?(this.route.snapshot.paramMap.get("contractKindId"),this.setFormName("contractKind_edit")):this.setFormName("contractKind_create")}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.contractKindService.validateContractKindExcelData(t)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(E.q),e.LFG(A.F0),e.LFG(A.gz),e.LFG(X.F),e.LFG(q.o),e.LFG(aD))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function nD(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close.emit())})("formIsReady",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.contractKind)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let nl=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"contractKind_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.contractKind=i.item})):t.formName&&t.formName.currentValue&&"contractKind_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadContractKindEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.contractKind=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Ys),e.Y36(A.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-contract-kind-form"]],inputs:{contractKind:"contractKind",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,nD,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[w.O5,z.M,w.Ov],encapsulation:2}),s})(),ll=(()=>{class s{constructor(){this.autoHeight=!1,this.contractKinds=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[,{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var r;t.includes(null===(r=i.data)||void 0===r?void 0:r.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-contract-kind-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(N.x,5),2&t){let r;e.iGM(r=e.CRH())&&(i.tableView=r.first)}},inputs:{autoHeight:"autoHeight",contractKinds:"contractKinds"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.contractKinds)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[N.x],encapsulation:2}),s})();function lD(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-contract-kind-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","contractKind_edit")("formControl",t.formControl)("contractKind",t.contractKind)}}const cD=function(){return{}};function dD(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-contract-kind-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","contractKind_create")("formControl",t.formControl)("contractKind",e.DdM(3,cD))}}function uD(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-contract-kind-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(u.ref.close())}),e.qZA()}2&s&&e.Q6J("contractKinds",o.data.items)}let mD=(()=>{class s extends I.fS{constructor(t){super(),this.store=t,this.store.loadContractKindsEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.contractKinds$.pipe((0,h.w)(i=>(0,T.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Ys))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","contractKind","send","close"],[1,"w-full","h-full","bg-white",3,"contractKinds","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,lD,2,3,"ng-template",null,1,e.W1O),e.YNc(3,dD,1,4,"ng-template",null,2,e.W1O),e.YNc(5,uD,1,1,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",u)("editTemplate",r)("createTemplate",l)("key",i.field.key)}},dependencies:[x.JJ,x.oH,J.$,nl,ll],encapsulation:2}),s})();function pD(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-contract-kind-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","contractKind_edit")("contractKind",t.value)}}const hD=function(){return{}};function fD(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-contract-kind-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","contractKind_create")("contractKind",e.DdM(2,hD))}function _D(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-contract-kind-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(null==u.ref?null:u.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("contractKinds",t.items)}}let gD=(()=>{class s extends Y{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","contractKind","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","contractKinds","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,pD,1,2,"ng-template",null,1,e.W1O),e.YNc(3,fD,1,3,"ng-template",null,2,e.W1O),e.YNc(5,_D,1,2,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[ee,nl,ll],encapsulation:2}),s})(),CD=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[Ys],imports:[w.ez,R.F,x.UX,V.o,H.u,Q.P,U.t,Z,j.h,K.G,I.X0.forChild({types:[{name:"contract-kind-select",component:mD,wrappers:["form-field"]},{name:"contract-kind-grid",component:gD}]})]}),s})(),SD=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[CD]}),s})();class Ge extends y.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class vD extends Ge{constructor(o,t,i,r,l,u,P,b){super("ValidateContractExcelDataAction"),this.valid=!1,this.excelData=o,this.organizations=t,this.billingOrganizations=i,this.templates=r,this.vendors=l,this.reconciliationPeriodTypes=u,this.calculationBasisTypes=P,this.processes=b}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name),this.validationContext.addRule(new f.mi(`organizationName_${i}_is_valid}`,"Organization Is Not Valid","organization.name",t.organization,this.organizations,!0)),this.validationContext.addRule(new f.mi(`billingOrganizationName_${i}_is_valid}`,"Billing Organization Is Not Valid","billingOrganization.name",t.billingOrganization,this.billingOrganizations,!0)),this.validationContext.addRule(new f.mi(`templateName_${i}_is_valid}`,"Template Is Not Valid","template.name",t.template,this.templates,!0)),this.validationContext.addRule(new f.mi(`vendorName_${i}_is_valid}`,"Vendor Is Not Valid","vendor.name",t.vendor,this.vendors,!0)),this.validationContext.addRule(new f.mi(`reconciliationPeriodTypeName_${i}_is_valid}`,"Reconciliation Period Type Is Not Valid","reconciliationPeriodType.name",t.reconciliationPeriodType,this.reconciliationPeriodTypes,!0)),this.validationContext.addRule(new f.mi(`calculationBasisTypeName_${i}_is_valid}`,"Calculation Basis Type Is Not Valid","calculationBasisType.name",t.calculationBasisType,this.calculationBasisTypes,!0)),this.validationContext.addRule(new f.mi(`processName_${i}_is_valid}`,"Process Is Not Valid","process.name",t.process,this.processes,!0))}),this.validationContext.addRule(new f.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof f.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(r=>r.name),newNames:[i.newName]}):i instanceof f.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,T.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class bD extends f.wS{constructor(o,t,i,r,l){super(o,t,i,r,l,!0)}}class TD extends f.ul{constructor(o,t,i,r=!1){super(o,t,r),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new f.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new bD("name","The contract name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class yD extends Ge{constructor(o){super("CreateContractAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new TD("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateContract({input:this.input}).pipe((0,h.w)(o=>(0,ie.of)(o.data.created)))}}class wD extends Ge{constructor(o){super("UpdateContractsAction"),this.contracts=o}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.contracts,!0))}performAction(){this.response=this.businessProvider.data.userUpdateContracts({input:{contracts:this.contracts}}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}class xD extends Ge{constructor(o,t){super("UpdateContractAction"),this.contract=o,this.contractId=t}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.contract,!0)).addRule(new f.xF("Id","Id should be a CUID and not null",this.contractId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateContract({contractId:this.contractId,input:this.contract}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}const cl=["name","organization","vendor","billingOrganization","reconciliationPeriodType","calculationBasisType","process"];class ND extends Ge{constructor(o){super("CheckRequiredFieldsAction"),this.excelData=o,console.log(o)}preValidateAction(){this.excelData.map((o,t)=>{this.validationContext.addRule(new f.r7(`row_${t}_is_valid`,`Row ${t} is not valid`,o,cl,!0))})}finish(){super.finish();let o=[];const t=[];this.validationContext.hasRuleViolations()?this.validationContext.rules.map(i=>{i instanceof f.r7&&(i.isValid?o.push(i.target):t.push(i.target))}):o=this.excelData,this.response=(0,T.of)({data:o,badData:t,requiredFields:cl})}}let dl=(()=>{class s extends y.nH{constructor(t,i,r){super("NotificationService.ContractBusinessProviderService",t,r),this.data=i}createContract(t){const i=new yD(t);return i.Do(this),i.response}updateContract(t,i){const r=new xD(t,i);return r.Do(this),r.response}importContracts(t){const i=new wD(t);return i.Do(this),i.response}validateRequredFields(t){const i=new ND(t);return i.Do(this),i.response}validateContractExcelData(t,i,r,l,u,P,b,c){const d=new vD(t,i,r,l,u,P,b,c);return d.Do(this),d.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(O.ed),e.LFG(E.q),e.LFG(y.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),AD=(()=>{class s extends y.nH{constructor(t,i,r){super("ContractService",r,t),this.businessProvider=i}createContract(t){const i=Object.fromEntries(Object.entries(t).filter(([r,l])=>null!==l));return this.businessProvider.createContract(i)}updateContract(t,i){return this.businessProvider.updateContract(t,i)}importContracts(t){return this.businessProvider.importContracts(t)}checkRequiredFields(t){return this.businessProvider.validateRequredFields(t)}validateContractExcelData(t,i,r,l,u,P,b,c){return this.businessProvider.validateContractExcelData(t,i,r,l,u,P,b,c)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(dl,8),e.LFG(dl),e.LFG(O.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),Xs=(()=>{class s extends g.m1{constructor(t,i,r,l,u,P){if(super({loading:!1,contracts:[],done:!1,searchQuery:"",formName:void 0,organizationId:void 0,billingOrganizationId:void 0,templateId:void 0,vendorId:void 0,reconciliationPeriodTypeId:void 0,calculationBasisTypeId:void 0,processId:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=r,this.toast=l,this.formService=u,this.contractService=P,this.errors$=this.select(b=>b.errors),this.loading$=this.select(b=>b.loading),this.done$=this.select(b=>b.done),this.item$=this.select(b=>b.item),this.contracts$=this.select(b=>b.contracts),this.organizations$=this.select(b=>b.organizations||[]),this.templates$=this.select(b=>b.templates||[]),this.vendors$=this.select(b=>b.vendors||[]),this.reconciliationPeriodTypes$=this.select(b=>b.reconciliationPeriodTypes||[]),this.calculationBasisTypes$=this.select(b=>b.calculationBasisTypes||[]),this.processes$=this.select(b=>b.processes||[]),this.organizationId$=this.select(b=>b.organizationId),this.billingOrganizationId$=this.select(b=>b.billingOrganizationId),this.templateId$=this.select(b=>b.templateId),this.vendorId$=this.select(b=>b.vendorId),this.reconciliationPeriodTypeId$=this.select(b=>b.reconciliationPeriodTypeId),this.calculationBasisTypeId$=this.select(b=>b.calculationBasisTypeId),this.processId$=this.select(b=>b.processId),this.paging$=this.select(b=>b.paging),this.searchQuery$=this.select(b=>b.searchQuery),this.formName$=this.select(b=>b.formName),this.actionResult$=this.select(this.item$,this.done$,(b,c)=>({item:b,done:c}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.contracts$,this.organizations$,this.templates$,this.vendors$,this.reconciliationPeriodTypes$,this.calculationBasisTypes$,this.processes$,(b,c,d,n,a,m,p,_,v,D,se)=>({errors:b,loading:c,item:d,formName:n,contracts:a,organizations:m,templates:p,vendors:_,reconciliationPeriodTypes:v,calculationBasisTypes:D,processes:se}),{debounce:!0}),this.input$=this.select(this.paging$,this.organizationId$,this.billingOrganizationId$,this.templateId$,this.vendorId$,this.reconciliationPeriodTypeId$,this.calculationBasisTypeId$,this.processId$,this.searchQuery$,(b,c,d,n,a,m,p,_,v)=>({limit:b.limit,skip:b.skip,name:v,organizationId:c,billingOrganizationId:d,templateId:n,vendorId:a,reconciliationPeriodTypeId:m,calculationBasisTypeId:p,processId:_,total:b.total})),this.setFormName=this.updater((b,c)=>Object.assign(Object.assign({},b),{formName:c})),this.setOrganizationId=this.updater((b,c)=>Object.assign(Object.assign({},b),{organizationId:c})),this.setBillingOrganizationId=this.updater((b,c)=>Object.assign(Object.assign({},b),{billingOrganizationId:c})),this.setTemplateId=this.updater((b,c)=>Object.assign(Object.assign({},b),{templateId:c})),this.setVendorId=this.updater((b,c)=>Object.assign(Object.assign({},b),{vendorId:c})),this.setReconciliationPeriodTypeId=this.updater((b,c)=>Object.assign(Object.assign({},b),{reconciliationPeriodTypeId:c})),this.setCalculationBasisTypeId=this.updater((b,c)=>Object.assign(Object.assign({},b),{calculationBasisTypeId:c})),this.setProcessId=this.updater((b,c)=>Object.assign(Object.assign({},b),{processId:c})),this.filterOrganizations=b=>this.data.userSelectOrganizations({input:{name:b,limit:1e3}}).pipe((0,g._b)(c=>{const d=c.data.items;return this.patchState({organizations:d}),d},c=>this.patchState({errors:c.graphQLErrors?c.graphQLErrors:c})),(0,B.U)(c=>c.data.items)),this.filterTemplates=b=>this.data.userSelectTemplates({input:{name:b}}).pipe((0,g._b)(c=>{const d=c.data.items;return this.patchState({templates:d}),d},c=>this.patchState({errors:c.graphQLErrors?c.graphQLErrors:c})),(0,B.U)(c=>c.data.items)),this.filterVendors=b=>this.data.userSelectVendors({input:{name:b}}).pipe((0,g._b)(c=>{const d=c.data.items;return this.patchState({vendors:d}),d},c=>this.patchState({errors:c.graphQLErrors?c.graphQLErrors:c})),(0,B.U)(c=>c.data.items)),this.filterReconciliationPeriodTypes=b=>this.data.userSelectReconciliationPeriodTypes({input:{name:b}}).pipe((0,g._b)(c=>{const d=c.data.items;return this.patchState({reconciliationPeriodTypes:d}),d},c=>this.patchState({errors:c.graphQLErrors?c.graphQLErrors:c})),(0,B.U)(c=>c.data.items)),this.filterCalculationBasisTypes=b=>this.data.userSelectCalculationBasisTypes({input:{name:b}}).pipe((0,g._b)(c=>{const d=c.data.items;return this.patchState({calculationBasisTypes:d}),d},c=>this.patchState({errors:c.graphQLErrors?c.graphQLErrors:c})),(0,B.U)(c=>c.data.items)),this.filterProcesses=b=>this.data.userSelectProcesses({input:{name:b}}).pipe((0,g._b)(c=>{const d=c.data.items;return this.patchState({processes:d}),d},c=>this.patchState({errors:c.graphQLErrors?c.graphQLErrors:c})),(0,B.U)(c=>c.data.items)),this.addOrganization=this.updater((b,c)=>Object.assign(Object.assign({},b),{organizations:b.organizations.concat(c)})),this.addTemplate=this.updater((b,c)=>Object.assign(Object.assign({},b),{templates:b.templates.concat(c)})),this.addVendor=this.updater((b,c)=>Object.assign(Object.assign({},b),{vendors:b.vendors.concat(c)})),this.addReconciliationPeriodType=this.updater((b,c)=>Object.assign(Object.assign({},b),{reconciliationPeriodTypes:b.reconciliationPeriodTypes.concat(c)})),this.addCalculationBasisType=this.updater((b,c)=>Object.assign(Object.assign({},b),{calculationBasisTypes:b.calculationBasisTypes.concat(c)})),this.addProcess=this.updater((b,c)=>Object.assign(Object.assign({},b),{processes:b.processes.concat(c)})),this.setItem=this.updater((b,c)=>Object.assign(Object.assign({},b),{item:c})),this.addNewContract=this.updater((b,c)=>Object.assign(Object.assign({},b),{contracts:[...b.contracts,c]})),this.updateContract=this.updater((b,c)=>Object.assign(Object.assign({},b),{contracts:b.contracts.map(d=>d.id===c.id?c:d)})),this.addContracts=this.updater((b,c)=>Object.assign(Object.assign({},b),{contracts:b.contracts.concat(c)})),this.updateContracts=this.updater((b,c)=>Object.assign(Object.assign({},b),{contracts:b.contracts.map(d=>c.find(a=>a.id===d.id)||d)})),this.setSearchQuery=this.updater((b,c)=>Object.assign(Object.assign({},b),{searchQuery:c})),this.loadContractEffect=this.effect(b=>b.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(c=>this.data.userContract({contractId:c}).pipe((0,g._b)(d=>{this.patchState({item:d.data.item,errors:d.errors,loading:!1})},d=>this.patchState({loading:!1,errors:d.graphQLErrors?d.graphQLErrors:d})))))),this.loadContractsEffect=this.effect(b=>b.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.input$),(0,h.w)(([c,d])=>this.data.userContracts({input:d}).pipe((0,g._b)(n=>this.patchState({paging:{limit:d.limit,skip:d.skip,total:n.data.count.total},contracts:n.data.items,errors:n.errors,loading:!1}),n=>this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})))))),this.createContractEffect=this.effect(b=>b.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(c=>this.contractService.createContract(Object.assign({},c)).pipe((0,g._b)(d=>{this.addNewContract(d),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:d,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},d=>{d.graphQLErrors?(this.toast.error(d.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:d.graphQLErrors?d.graphQLErrors:d})):(this.toast.error(d.Message),this.formService.setErrors(d.Data))}))))),this.updateContractEffect=this.effect(b=>b.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([c,d])=>this.contractService.updateContract(c,c.id).pipe((0,g._b)(n=>{this.updateContract(n),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:n,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},n=>{n.graphQLErrors?(this.toast.error(n.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})):(this.toast.error(n.Message),this.formService.setErrors(n.Data))}))))),this.deleteContractEffect=this.effect(b=>b.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([c,d])=>this.data.userDeleteContract({contractId:d.id}).pipe((0,g._b)(n=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:n.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},n=>{n.graphQLErrors?(this.toast.error(n.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})):(this.toast.error(n.Message),this.formService.setErrors(n.Data))}))))),this.importExcelEffect=this.effect(b=>b.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(c=>this.contractService.importContracts(c).pipe((0,te.K)(d=>{var n;return this.toast.error(null!==(n=d.Message)&&void 0!==n?n:"Failed to save",{duration:3e3}),k.E}),(0,C.b)(d=>{const n=JSON.parse(d.created),a=JSON.parse(d.updated),m=JSON.parse(d.failed),p=n.length+a.length+m.length;this.addContracts(n),this.updateContracts(a),this.toast.success(`${n.length} created, ${a.length} updated, ${m.length} failed of total ${p}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("contractId")?(this.route.snapshot.paramMap.get("contractId"),this.setFormName("contract_edit")):this.setFormName("contract_create"),this.route.snapshot.paramMap.has("organizationId")){const b=this.route.snapshot.paramMap.get("organizationId");this.setOrganizationId(b)}if(this.route.snapshot.paramMap.has("billingOrganizationId")){const b=this.route.snapshot.paramMap.get("billingOrganizationId");this.setBillingOrganizationId(b)}if(this.route.snapshot.paramMap.has("templateId")){const b=this.route.snapshot.paramMap.get("templateId");this.setTemplateId(b)}if(this.route.snapshot.paramMap.has("vendorId")){const b=this.route.snapshot.paramMap.get("vendorId");this.setVendorId(b)}if(this.route.snapshot.paramMap.has("reconciliationPeriodTypeId")){const b=this.route.snapshot.paramMap.get("reconciliationPeriodTypeId");this.setReconciliationPeriodTypeId(b)}if(this.route.snapshot.paramMap.has("calculationBasisTypeId")){const b=this.route.snapshot.paramMap.get("calculationBasisTypeId");this.setCalculationBasisTypeId(b)}if(this.route.snapshot.paramMap.has("processId")){const b=this.route.snapshot.paramMap.get("processId");this.setProcessId(b)}}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.contractService.checkRequiredFields(t).pipe((0,h.w)(({data:r,badData:l,requiredFields:u})=>(l?.length>0&&this.toast.error(`${l.length} rows do not have all required fields. All rows should contain ${u.join(", ")}`,{duration:3e3}),this.contractService.validateContractExcelData(r,i.organizations,i.organizations,i.templates,i.vendors,i.reconciliationPeriodTypes,i.calculationBasisTypes,i.processes))))))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(E.q),e.LFG(A.F0),e.LFG(A.gz),e.LFG(X.F),e.LFG(q.o),e.LFG(AD))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function FD(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close.emit())})("formIsReady",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.contract)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let ul=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"contract_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.contract=i.item})):t.formName&&t.formName.currentValue&&"contract_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadContractEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.contract=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Xs),e.Y36(A.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-contract-form"]],inputs:{contract:"contract",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,FD,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[w.O5,z.M,w.Ov],encapsulation:2}),s})(),ml=(()=>{class s{constructor(){this.autoHeight=!1,this.contracts=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[{field:"organization.name",headerName:"Organization",filter:"agTextColumnFilter"},{field:"billingOrganization.name",headerName:"Billing Organization",filter:"agTextColumnFilter"},{field:"template.name",headerName:"Template",filter:"agTextColumnFilter"},{field:"vendor.name",headerName:"Vendor",filter:"agTextColumnFilter"},{field:"reconciliationPeriodType.name",headerName:"Reconciliation Period Type",filter:"agTextColumnFilter"},{field:"calculationBasisType.name",headerName:"Calculation Basis Type",filter:"agTextColumnFilter"},{field:"process.name",headerName:"Process",filter:"agTextColumnFilter"},{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{field:"organizationId",filter:"agTextColumnFilter",hide:!0},{field:"billingOrganizationId",filter:"agTextColumnFilter",hide:!0},{field:"templateId",filter:"agTextColumnFilter",hide:!0},{headerName:"Bill on Behalf",field:"billOnBehalf",filter:"agSetColumnFilter",cellRenderer:"checkboxRenderer"},{field:"billRate",filter:"agTextColumnFilter"},{field:"vendorId",filter:"agTextColumnFilter",hide:!0},{field:"contractDate",filter:"agDateColumnFilter"},{field:"maturityDate",filter:"agDateColumnFilter"},{headerName:"Requires Tpa Medical Necessity",field:"requiresTpaMedicalNecessity",filter:"agSetColumnFilter",cellRenderer:"checkboxRenderer"},{headerName:"Requires Tpa Medicare Allowable",field:"requiresTpaMedicareAllowable",filter:"agSetColumnFilter",cellRenderer:"checkboxRenderer"},{field:"reconciliationPeriodTypeId",filter:"agTextColumnFilter",hide:!0},{field:"calculationBasisTypeId",filter:"agTextColumnFilter",hide:!0},{headerName:"Signed",field:"signed",filter:"agSetColumnFilter",cellRenderer:"checkboxRenderer"},{field:"processId",filter:"agTextColumnFilter",hide:!0}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var r;t.includes(null===(r=i.data)||void 0===r?void 0:r.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-contract-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(N.x,5),2&t){let r;e.iGM(r=e.CRH())&&(i.tableView=r.first)}},inputs:{autoHeight:"autoHeight",contracts:"contracts"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.contracts)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[N.x],encapsulation:2}),s})();function DD(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-contract-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","contract_edit")("formControl",t.formControl)("contract",t.contract)}}const ID=function(){return{}};function PD(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-contract-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","contract_create")("formControl",t.formControl)("contract",e.DdM(3,ID))}}function WD(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-contract-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(u.ref.close())}),e.qZA()}2&s&&e.Q6J("contracts",o.data.items)}let MD=(()=>{class s extends I.fS{constructor(t){super(),this.store=t,this.store.loadContractsEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.contracts$.pipe((0,h.w)(i=>(0,T.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Xs))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","contract","send","close"],[1,"w-full","h-full","bg-white",3,"contracts","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,DD,2,3,"ng-template",null,1,e.W1O),e.YNc(3,PD,1,4,"ng-template",null,2,e.W1O),e.YNc(5,WD,1,1,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",u)("editTemplate",r)("createTemplate",l)("key",i.field.key)}},dependencies:[x.JJ,x.oH,J.$,ul,ml],encapsulation:2}),s})();function ED(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-contract-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","contract_edit")("contract",t.value)}}const OD=function(){return{}};function LD(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-contract-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","contract_create")("contract",e.DdM(2,OD))}function GD(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-contract-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(null==u.ref?null:u.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("contracts",t.items)}}let $D=(()=>{class s extends Y{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","contract","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","contracts","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,ED,1,2,"ng-template",null,1,e.W1O),e.YNc(3,LD,1,3,"ng-template",null,2,e.W1O),e.YNc(5,GD,1,2,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[ee,ul,ml],encapsulation:2}),s})(),RD=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[Xs],imports:[w.ez,R.F,x.UX,V.o,H.u,Q.P,U.t,Z,j.h,K.G,I.X0.forChild({types:[{name:"contract-select",component:MD,wrappers:["form-field"]},{name:"contract-grid",component:$D}]})]}),s})(),VD=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[RD]}),s})();class Gt extends y.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class QD extends Gt{constructor(o,t){super("ValidateContractTermExcelDataAction"),this.valid=!1,this.excelData=o,this.contracts=t}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name),this.validationContext.addRule(new f.mi(`contractName_${i}_is_valid}`,"Contract Is Not Valid","contract.name",t.contract,this.contracts,!0))}),this.validationContext.addRule(new f.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof f.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(r=>r.name),newNames:[i.newName]}):i instanceof f.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,T.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class UD extends f.wS{constructor(o,t,i,r,l){super(o,t,i,r,l,!0)}}class JD extends f.ul{constructor(o,t,i,r=!1){super(o,t,r),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new f.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new UD("name","The contractterm name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class jD extends Gt{constructor(o){super("CreateContractTermAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new JD("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateContractTerm({input:this.input}).pipe((0,h.w)(o=>(0,ie.of)(o.data.created)))}}class zD extends Gt{constructor(o){super("UpdateContractTermsAction"),this.contractTerms=o}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.contractTerms,!0))}performAction(){this.response=this.businessProvider.data.userUpdateContractTerms({input:{contractTerms:this.contractTerms}}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}class qD extends Gt{constructor(o,t){super("UpdateContractTermAction"),this.contractTerm=o,this.contractTermId=t}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.contractTerm,!0)).addRule(new f.xF("Id","Id should be a CUID and not null",this.contractTermId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateContractTerm({contractTermId:this.contractTermId,input:this.contractTerm}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}let pl=(()=>{class s extends y.nH{constructor(t,i,r){super("NotificationService.ContractTermBusinessProviderService",t,r),this.data=i}createContractTerm(t){const i=new jD(t);return i.Do(this),i.response}updateContractTerm(t,i){const r=new qD(t,i);return r.Do(this),r.response}importContractTerms(t){const i=new zD(t);return i.Do(this),i.response}validateContractTermExcelData(t,i){const r=new QD(t,i);return r.Do(this),r.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(O.ed),e.LFG(E.q),e.LFG(y.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),HD=(()=>{class s extends y.nH{constructor(t,i,r){super("ContractTermService",r,t),this.businessProvider=i}createContractTerm(t){const i=Object.fromEntries(Object.entries(t).filter(([r,l])=>null!==l));return this.businessProvider.createContractTerm(i)}updateContractTerm(t,i){return this.businessProvider.updateContractTerm(t,i)}importContractTerms(t){return this.businessProvider.importContractTerms(t)}validateContractTermExcelData(t,i){return this.businessProvider.validateContractTermExcelData(t,i)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(pl,8),e.LFG(pl),e.LFG(O.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),eo=(()=>{class s extends g.m1{constructor(t,i,r,l,u,P){if(super({loading:!1,contractTerms:[],done:!1,searchQuery:"",formName:void 0,contractTermId:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=r,this.toast=l,this.formService=u,this.contractTermService=P,this.errors$=this.select(c=>c.errors),this.loading$=this.select(c=>c.loading),this.done$=this.select(c=>c.done),this.item$=this.select(c=>c.item),this.contractTerms$=this.select(c=>c.contractTerms),this.contracts$=this.select(c=>c.contracts||[]),this.contractTermId$=this.select(c=>c.contractTermId),this.paging$=this.select(c=>c.paging),this.searchQuery$=this.select(c=>c.searchQuery),this.formName$=this.select(c=>c.formName),this.actionResult$=this.select(this.item$,this.done$,(c,d)=>({item:c,done:d}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.contractTerms$,this.contracts$,(c,d,n,a,m,p)=>({errors:c,loading:d,item:n,formName:a,contractTerms:m,contracts:p}),{debounce:!0}),this.input$=this.select(this.paging$,this.contractTermId$,this.searchQuery$,(c,d,n)=>({limit:c.limit,skip:c.skip,name:n,contractTermId:d,total:c.total})),this.setFormName=this.updater((c,d)=>Object.assign(Object.assign({},c),{formName:d})),this.setContractTermId=this.updater((c,d)=>Object.assign(Object.assign({},c),{contractTermId:d})),this.filterContracts=c=>this.data.userSelectContracts({input:{name:c}}).pipe((0,g._b)(d=>{let n=d.data.items;return this.patchState({contracts:n}),n},d=>this.patchState({errors:d.graphQLErrors?d.graphQLErrors:d})),(0,B.U)(d=>d.data.items)),this.addContract=this.updater((c,d)=>Object.assign(Object.assign({},c),{contracts:c.contracts.concat(d)})),this.setItem=this.updater((c,d)=>Object.assign(Object.assign({},c),{item:d})),this.addNewContractTerm=this.updater((c,d)=>Object.assign(Object.assign({},c),{contractTerms:[...c.contractTerms,d]})),this.updateContractTerm=this.updater((c,d)=>Object.assign(Object.assign({},c),{contractTerms:c.contractTerms.map(n=>n.id===d.id?d:n)})),this.addContractTerms=this.updater((c,d)=>Object.assign(Object.assign({},c),{contractTerms:c.contractTerms.concat(d)})),this.updateContractTerms=this.updater((c,d)=>Object.assign(Object.assign({},c),{contractTerms:c.contractTerms.map(n=>d.find(m=>m.id===n.id)||n)})),this.setSearchQuery=this.updater((c,d)=>Object.assign(Object.assign({},c),{searchQuery:d})),this.loadContractTermEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.data.userContractTerm({contractTermId:d}).pipe((0,g._b)(n=>{this.patchState({item:n.data.item,errors:n.errors,loading:!1})},n=>this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})))))),this.loadContractTermsEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.input$),(0,h.w)(([d,n])=>this.data.userContractTerms({input:n}).pipe((0,g._b)(a=>this.patchState({paging:{limit:n.limit,skip:n.skip,total:a.data.count.total},contractTerms:a.data.items,errors:a.errors,loading:!1}),a=>this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})))))),this.createContractTermEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.contractTermService.createContractTerm(Object.assign({},d)).pipe((0,g._b)(n=>{this.addNewContractTerm(n),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:n,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},n=>{n.graphQLErrors?(this.toast.error(n.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})):(this.toast.error(n.Message),this.formService.setErrors(n.Data))}))))),this.updateContractTermEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([d,n])=>this.contractTermService.updateContractTerm(d,d.id).pipe((0,g._b)(a=>{this.updateContractTerm(a),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:a,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.deleteContractTermEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([d,n])=>this.data.userDeleteContractTerm({contractTermId:n.id}).pipe((0,g._b)(a=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:a.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.importExcelEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.contractTermService.importContractTerms(d).pipe((0,te.K)(n=>{var a;return this.toast.error(null!==(a=n.Message)&&void 0!==a?a:"Failed to save",{duration:3e3}),k.E}),(0,C.b)(n=>{const a=JSON.parse(n.created),m=JSON.parse(n.updated),p=JSON.parse(n.failed),_=a.length+m.length+p.length;this.addContractTerms(a),this.updateContractTerms(m),this.toast.success(`${a.length} created, ${m.length} updated, ${p.length} failed of total ${_}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("contractTermId")){var b=this.route.snapshot.paramMap.get("contractTermId");this.setFormName("contractTerm_edit")}else this.setFormName("contractTerm_create");this.route.snapshot.paramMap.has("contractTermId")&&(b=this.route.snapshot.paramMap.get("contractTermId"),this.setContractTermId(b))}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.contractTermService.validateContractTermExcelData(t,i.contracts)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(E.q),e.LFG(A.F0),e.LFG(A.gz),e.LFG(X.F),e.LFG(q.o),e.LFG(HD))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function KD(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close.emit())})("formIsReady",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.contractTerm)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let hl=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"contractTerm_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.contractTerm=i.item})):t.formName&&t.formName.currentValue&&"contractTerm_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadContractTermEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.contractTerm=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(eo),e.Y36(A.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-contract-term-form"]],inputs:{contractTerm:"contractTerm",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,KD,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[w.O5,z.M,w.Ov],encapsulation:2}),s})(),fl=(()=>{class s{constructor(){this.autoHeight=!1,this.contractTerms=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[{field:"contract.name",headerName:"Contract",filter:"agTextColumnFilter"},{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{headerName:"Max Approved",field:"maxApproved",valueFormatter:t=>{var i;return(0,S.oBD)(null===(i=t.data)||void 0===i?void 0:i.maxApproved,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{headerName:"Number Included",field:"numberIncluded",valueFormatter:t=>{var i;return(0,S.oBD)(null===(i=t.data)||void 0===i?void 0:i.numberIncluded,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{headerName:"Factor",field:"factor",valueFormatter:t=>{var i;return(0,S.oBD)(null===(i=t.data)||void 0===i?void 0:i.factor,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{field:"contractTermId",filter:"agTextColumnFilter",hide:!0}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var r;t.includes(null===(r=i.data)||void 0===r?void 0:r.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-contract-term-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(N.x,5),2&t){let r;e.iGM(r=e.CRH())&&(i.tableView=r.first)}},inputs:{autoHeight:"autoHeight",contractTerms:"contractTerms"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.contractTerms)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[N.x],encapsulation:2}),s})();function kD(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-contract-term-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","contractTerm_edit")("formControl",t.formControl)("contractTerm",t.contractTerm)}}const ZD=function(){return{}};function BD(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-contract-term-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","contractTerm_create")("formControl",t.formControl)("contractTerm",e.DdM(3,ZD))}}function YD(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-contract-term-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(u.ref.close())}),e.qZA()}2&s&&e.Q6J("contractTerms",o.data.items)}let XD=(()=>{class s extends I.fS{constructor(t){super(),this.store=t,this.store.loadContractTermsEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.contractTerms$.pipe((0,h.w)(i=>(0,T.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(eo))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","contractTerm","send","close"],[1,"w-full","h-full","bg-white",3,"contractTerms","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,kD,2,3,"ng-template",null,1,e.W1O),e.YNc(3,BD,1,4,"ng-template",null,2,e.W1O),e.YNc(5,YD,1,1,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",u)("editTemplate",r)("createTemplate",l)("key",i.field.key)}},dependencies:[x.JJ,x.oH,J.$,hl,fl],encapsulation:2}),s})();function eI(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-contract-term-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","contractTerm_edit")("contractTerm",t.value)}}const tI=function(){return{}};function iI(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-contract-term-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","contractTerm_create")("contractTerm",e.DdM(2,tI))}function sI(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-contract-term-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(null==u.ref?null:u.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("contractTerms",t.items)}}let oI=(()=>{class s extends Y{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","contractTerm","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","contractTerms","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,eI,1,2,"ng-template",null,1,e.W1O),e.YNc(3,iI,1,3,"ng-template",null,2,e.W1O),e.YNc(5,sI,1,2,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[ee,hl,fl],encapsulation:2}),s})(),rI=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[eo],imports:[w.ez,R.F,x.UX,V.o,H.u,Q.P,U.t,Z,j.h,K.G,I.X0.forChild({types:[{name:"contract-term-select",component:XD,wrappers:["form-field"]},{name:"contract-term-grid",component:oI}]})]}),s})(),aI=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[rI]}),s})();class $t extends y.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class nI extends $t{constructor(o){super("ValidateCostCategoryExcelDataAction"),this.valid=!1,this.excelData=o}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name)}),this.validationContext.addRule(new f.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof f.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(r=>r.name),newNames:[i.newName]}):i instanceof f.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,T.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class lI extends f.wS{constructor(o,t,i,r,l){super(o,t,i,r,l,!0)}}class cI extends f.ul{constructor(o,t,i,r=!1){super(o,t,r),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new f.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new lI("name","The costcategory name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class dI extends $t{constructor(o){super("CreateCostCategoryAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new cI("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateCostCategory({input:this.input}).pipe((0,h.w)(o=>(0,ie.of)(o.data.created)))}}class uI extends $t{constructor(o){super("UpdateCostCategoriesAction"),this.costCategories=o}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.costCategories,!0))}performAction(){this.response=this.businessProvider.data.userUpdateCostCategories({input:{costCategories:this.costCategories}}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}class mI extends $t{constructor(o,t){super("UpdateCostCategoryAction"),this.costCategory=o,this.costCategoryId=t}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.costCategory,!0)).addRule(new f.xF("Id","Id should be a CUID and not null",this.costCategoryId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateCostCategory({costCategoryId:this.costCategoryId,input:this.costCategory}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}let _l=(()=>{class s extends y.nH{constructor(t,i,r){super("NotificationService.CostCategoryBusinessProviderService",t,r),this.data=i}createCostCategory(t){const i=new dI(t);return i.Do(this),i.response}updateCostCategory(t,i){const r=new mI(t,i);return r.Do(this),r.response}importCostCategories(t){const i=new uI(t);return i.Do(this),i.response}validateCostCategoryExcelData(t){const i=new nI(t);return i.Do(this),i.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(O.ed),e.LFG(E.q),e.LFG(y.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),pI=(()=>{class s extends y.nH{constructor(t,i,r){super("CostCategoryService",r,t),this.businessProvider=i}createCostCategory(t){const i=Object.fromEntries(Object.entries(t).filter(([r,l])=>null!==l));return this.businessProvider.createCostCategory(i)}updateCostCategory(t,i){return this.businessProvider.updateCostCategory(t,i)}importCostCategories(t){return this.businessProvider.importCostCategories(t)}validateCostCategoryExcelData(t){return this.businessProvider.validateCostCategoryExcelData(t)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(_l,8),e.LFG(_l),e.LFG(O.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),to=(()=>{class s extends g.m1{constructor(t,i,r,l,u,P){super({loading:!1,costCategories:[],done:!1,searchQuery:"",formName:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=r,this.toast=l,this.formService=u,this.costCategoryService=P,this.errors$=this.select(c=>c.errors),this.loading$=this.select(c=>c.loading),this.done$=this.select(c=>c.done),this.item$=this.select(c=>c.item),this.costCategories$=this.select(c=>c.costCategories),this.paging$=this.select(c=>c.paging),this.searchQuery$=this.select(c=>c.searchQuery),this.formName$=this.select(c=>c.formName),this.actionResult$=this.select(this.item$,this.done$,(c,d)=>({item:c,done:d}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.costCategories$,(c,d,n,a,m)=>({errors:c,loading:d,item:n,formName:a,costCategories:m}),{debounce:!0}),this.input$=this.select(this.paging$,this.searchQuery$,(c,d)=>({limit:c.limit,skip:c.skip,name:d,total:c.total})),this.setFormName=this.updater((c,d)=>Object.assign(Object.assign({},c),{formName:d})),this.setItem=this.updater((c,d)=>Object.assign(Object.assign({},c),{item:d})),this.addNewCostCategory=this.updater((c,d)=>Object.assign(Object.assign({},c),{costCategories:[...c.costCategories,d]})),this.updateCostCategory=this.updater((c,d)=>Object.assign(Object.assign({},c),{costCategories:c.costCategories.map(n=>n.id===d.id?d:n)})),this.addCostCategories=this.updater((c,d)=>Object.assign(Object.assign({},c),{costCategories:c.costCategories.concat(d)})),this.updateCostCategories=this.updater((c,d)=>Object.assign(Object.assign({},c),{costCategories:c.costCategories.map(n=>d.find(m=>m.id===n.id)||n)})),this.setSearchQuery=this.updater((c,d)=>Object.assign(Object.assign({},c),{searchQuery:d})),this.loadCostCategoryEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.data.userCostCategory({costCategoryId:d}).pipe((0,g._b)(n=>{this.patchState({item:n.data.item,errors:n.errors,loading:!1})},n=>this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})))))),this.loadCostCategoriesEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.input$),(0,h.w)(([d,n])=>this.data.userCostCategories({input:n}).pipe((0,g._b)(a=>this.patchState({paging:{limit:n.limit,skip:n.skip,total:a.data.count.total},costCategories:a.data.items,errors:a.errors,loading:!1}),a=>this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})))))),this.createCostCategoryEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.costCategoryService.createCostCategory(Object.assign({},d)).pipe((0,g._b)(n=>{this.addNewCostCategory(n),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:n,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},n=>{n.graphQLErrors?(this.toast.error(n.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})):(this.toast.error(n.Message),this.formService.setErrors(n.Data))}))))),this.updateCostCategoryEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([d,n])=>this.costCategoryService.updateCostCategory(d,d.id).pipe((0,g._b)(a=>{this.updateCostCategory(a),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:a,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.deleteCostCategoryEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([d,n])=>this.data.userDeleteCostCategory({costCategoryId:n.id}).pipe((0,g._b)(a=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:a.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.importExcelEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.costCategoryService.importCostCategories(d).pipe((0,te.K)(n=>{var a;return this.toast.error(null!==(a=n.Message)&&void 0!==a?a:"Failed to save",{duration:3e3}),k.E}),(0,C.b)(n=>{const a=JSON.parse(n.created),m=JSON.parse(n.updated),p=JSON.parse(n.failed),_=a.length+m.length+p.length;this.addCostCategories(a),this.updateCostCategories(m),this.toast.success(`${a.length} created, ${m.length} updated, ${p.length} failed of total ${_}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("costCategoryId")?(this.route.snapshot.paramMap.get("costCategoryId"),this.setFormName("costCategory_edit")):this.setFormName("costCategory_create")}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.costCategoryService.validateCostCategoryExcelData(t)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(E.q),e.LFG(A.F0),e.LFG(A.gz),e.LFG(X.F),e.LFG(q.o),e.LFG(pI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function hI(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close.emit())})("formIsReady",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.costCategory)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let gl=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"costCategory_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.costCategory=i.item})):t.formName&&t.formName.currentValue&&"costCategory_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadCostCategoryEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.costCategory=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(to),e.Y36(A.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-cost-category-form"]],inputs:{costCategory:"costCategory",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,hI,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[w.O5,z.M,w.Ov],encapsulation:2}),s})(),Cl=(()=>{class s{constructor(){this.autoHeight=!1,this.costCategories=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[,{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var r;t.includes(null===(r=i.data)||void 0===r?void 0:r.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-cost-category-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(N.x,5),2&t){let r;e.iGM(r=e.CRH())&&(i.tableView=r.first)}},inputs:{autoHeight:"autoHeight",costCategories:"costCategories"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.costCategories)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[N.x],encapsulation:2}),s})();function fI(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-cost-category-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","costCategory_edit")("formControl",t.formControl)("costCategory",t.costCategory)}}const _I=function(){return{}};function gI(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-cost-category-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","costCategory_create")("formControl",t.formControl)("costCategory",e.DdM(3,_I))}}function CI(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-cost-category-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(u.ref.close())}),e.qZA()}2&s&&e.Q6J("costCategories",o.data.items)}let SI=(()=>{class s extends I.fS{constructor(t){super(),this.store=t,this.store.loadCostCategoriesEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.costCategories$.pipe((0,h.w)(i=>(0,T.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(to))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","costCategory","send","close"],[1,"w-full","h-full","bg-white",3,"costCategories","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,fI,2,3,"ng-template",null,1,e.W1O),e.YNc(3,gI,1,4,"ng-template",null,2,e.W1O),e.YNc(5,CI,1,1,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",u)("editTemplate",r)("createTemplate",l)("key",i.field.key)}},dependencies:[x.JJ,x.oH,J.$,gl,Cl],encapsulation:2}),s})();function vI(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-cost-category-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","costCategory_edit")("costCategory",t.value)}}const bI=function(){return{}};function TI(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-cost-category-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","costCategory_create")("costCategory",e.DdM(2,bI))}function yI(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-cost-category-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(null==u.ref?null:u.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("costCategories",t.items)}}let wI=(()=>{class s extends Y{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","costCategory","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","costCategories","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,vI,1,2,"ng-template",null,1,e.W1O),e.YNc(3,TI,1,3,"ng-template",null,2,e.W1O),e.YNc(5,yI,1,2,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[ee,gl,Cl],encapsulation:2}),s})(),xI=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[to],imports:[w.ez,R.F,x.UX,V.o,H.u,Q.P,U.t,Z,j.h,K.G,I.X0.forChild({types:[{name:"cost-category-select",component:SI,wrappers:["form-field"]},{name:"cost-category-grid",component:wI}]})]}),s})(),NI=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[xI]}),s})();var Rt=ae(59443);function AI(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close.emit())})("formIsReady",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.diagnosisCode)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let Sl=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"diagnosisCode_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({id:null,name:""}),this.store.vm$.subscribe(i=>{this.diagnosisCode=i.item})):t.formName&&t.formName.currentValue&&"diagnosisCode_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadDiagnosisCodeEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.diagnosisCode=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Rt.r),e.Y36(A.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-diagnosis-code-form"]],inputs:{diagnosisCode:"diagnosisCode",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,AI,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[w.O5,z.M,w.Ov],encapsulation:2}),s})(),vl=(()=>{class s{constructor(){this.autoHeight=!1,this.diagnosisCodes=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[,{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var r;t.includes(null===(r=i.data)||void 0===r?void 0:r.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-diagnosis-code-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(N.x,5),2&t){let r;e.iGM(r=e.CRH())&&(i.tableView=r.first)}},inputs:{autoHeight:"autoHeight",diagnosisCodes:"diagnosisCodes"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:6,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.diagnosisCodes)("showSidebar",!1)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[N.x],encapsulation:2}),s})();function FI(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-diagnosis-code-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","diagnosisCode_edit")("formControl",t.formControl)("diagnosisCode",t.diagnosisCode)}}const DI=function(){return{}};function II(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-diagnosis-code-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","diagnosisCode_create")("formControl",t.formControl)("diagnosisCode",e.DdM(3,DI))}}function PI(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-diagnosis-code-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(u.ref.close())}),e.qZA()}2&s&&e.Q6J("diagnosisCodes",o.data.items)}let WI=(()=>{class s extends I.fS{constructor(t){super(),this.store=t,this.store.loadDiagnosisCodesEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.diagnosisCodes$.pipe((0,h.w)(i=>(0,T.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Rt.r))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e._Bn([Rt.r]),e.qOj],decls:7,vars:5,consts:[[3,"to","control","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","diagnosisCode","send","close"],[1,"w-full","h-full","bg-white",3,"diagnosisCodes","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"ui-select-form",0),e.YNc(1,FI,2,3,"ng-template",null,1,e.W1O),e.YNc(3,II,1,4,"ng-template",null,2,e.W1O),e.YNc(5,PI,1,1,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[x.JJ,x.oH,J.$,Sl,vl],encapsulation:2}),s})();function MI(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-diagnosis-code-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","diagnosisCode_edit")("diagnosisCode",t.value)}}const EI=function(){return{}};function OI(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-diagnosis-code-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","diagnosisCode_create")("diagnosisCode",e.DdM(2,EI))}function LI(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-diagnosis-code-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(null==u.ref?null:u.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("diagnosisCodes",t.items)}}let GI=(()=>{class s extends Y{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:6,consts:[[3,"data","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","diagnosisCode","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","diagnosisCodes","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,MI,1,2,"ng-template",null,1,e.W1O),e.YNc(3,OI,1,3,"ng-template",null,2,e.W1O),e.YNc(5,LI,1,2,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("data",i.data)("title",i.to.title)("onSave",i.onSave)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[ee,Sl,vl],encapsulation:2}),s})(),$I=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[Rt.r],imports:[w.ez,R.F,x.UX,V.o,H.u,Q.P,U.t,Z,j.h,K.G,I.X0.forChild({types:[{name:"diagnosis-code-select",component:WI,wrappers:["form-field"]},{name:"diagnosis-code-grid",component:GI}]})]}),s})(),RI=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[$I]}),s})(),bl=(()=>{class s extends g.m1{constructor(t){super({loading:!1,documents:[]}),this.data=t,this.errors$=this.select(i=>i.errors),this.loading$=this.select(i=>i.loading),this.documents$=this.select(i=>i.documents),this.vm$=this.select(this.errors$,this.loading$,this.documents$,(i,r,l)=>({errors:i,loading:r,documents:l}),{debounce:!0}),this.addNewDocument=this.updater((i,r)=>({documents:[...i.documents,r]})),this.updateDocument=this.updater((i,r)=>Object.assign(Object.assign({},i),{documents:i.documents.map(l=>l.id===r.id?r:l)})),this.createDocumentEffect=this.effect(i=>i.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(r=>this.data.userCreateDocument({input:r.input}).pipe((0,g._b)(l=>{this.addNewDocument(l.data.created),this.patchState({errors:l.errors,loading:!1}),r.resultEmitter.emit(l.data.created)},l=>this.patchState({loading:!1,errors:l.graphQLErrors?l.graphQLErrors:l})))))),this.updateDocumentEffect=this.effect(i=>i.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(r=>this.data.userUpdateDocument({documentId:r.input.id,input:r.input}).pipe((0,g._b)(l=>{this.updateDocument(l.data.updated),this.patchState({errors:l.errors,loading:!1}),r.resultEmitter.emit(l.data.updated)},l=>this.patchState({loading:!1,errors:l.graphQLErrors?l.graphQLErrors:l})))))),this.loadDocumentsEffect=this.effect(i=>i.pipe((0,C.b)(()=>{this.patchState({loading:!0})}),(0,h.w)(()=>this.data.userDocuments({input:{}}).pipe((0,g._b)(r=>{this.patchState({loading:!1,documents:r.data.items})},r=>{this.patchState({loading:!1})})))))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(E.q))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();var Tl=ae(56794);function VI(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close.emit())})("formIsReady",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.document)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let yl=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"document_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.document=i.item})):t.formName&&t.formName.currentValue&&"document_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadDocumentEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.document=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Tl.F),e.Y36(A.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-document-form"]],inputs:{document:"document",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,VI,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[w.O5,z.M,w.Ov],encapsulation:2}),s})();const QI=function(){return{}};function UI(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-document-form",3),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("document",o.data.value||e.DdM(1,QI))}function JI(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-document-table-view",4),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(u.ref.close())}),e.qZA()}2&s&&e.Q6J("documents",o.data.items)}let jI=(()=>{class s extends I.fS{constructor(t){super(),this.store=t,this.store.loadDocumentsEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.documents$.pipe((0,h.w)(i=>(0,T.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(bl))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:5,vars:4,consts:[[3,"to","control","listTemplate","editTemplate"],["editTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"document","send","close"],[1,"w-full","h-full","bg-white",3,"documents","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"ui-select-form",0),e.YNc(1,UI,1,2,"ng-template",null,1,e.W1O),e.YNc(3,JI,1,1,"ng-template",null,2,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4);e.Q6J("to",i.to)("control",i.formControl)("listTemplate",l)("editTemplate",r)}},dependencies:[J.$,yl],encapsulation:2}),s})(),zI=(()=>{class s{constructor(){this.documents=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.autoHeight=!1,this.columnDefs=[{field:"contract.name",headerName:"Contract",filter:"agTextColumnFilter"},{field:"patient.name",headerName:"Patient",filter:"agTextColumnFilter"},{field:"prescription.name",headerName:"Prescription",filter:"agTextColumnFilter"},{field:"provider.name",headerName:"Provider",filter:"agTextColumnFilter"},{field:"patientStudies.name",headerName:"Patient Studies",filter:"agTextColumnFilter"},{field:"procedureVendor.name",headerName:"Procedure Vendor",filter:"agTextColumnFilter"},{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{field:"attachment",filter:"agTextColumnFilter"},{field:"encoding",filter:"agTextColumnFilter"},{field:"extension",filter:"agTextColumnFilter"},{field:"contractId",filter:"agTextColumnFilter",hide:!0},{field:"patientId",filter:"agTextColumnFilter",hide:!0},{field:"prescriptionId",filter:"agTextColumnFilter",hide:!0},{field:"providerId",filter:"agTextColumnFilter",hide:!0},{field:"patientStudyId",filter:"agTextColumnFilter",hide:!0},{field:"procedureVendorId",filter:"agTextColumnFilter",hide:!0}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var r;t.includes(null===(r=i.data)||void 0===r?void 0:r.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-document-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(N.x,5),2&t){let r;e.iGM(r=e.CRH())&&(i.tableView=r.first)}},inputs:{documents:"documents",autoHeight:"autoHeight"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:4,consts:[[1,"w-full","h-full",3,"autoHeight","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("data",i.documents)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[N.x],encapsulation:2}),s})();function qI(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-document-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","document_edit")("document",t.value)}}const HI=function(){return{}};function KI(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-document-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","document_create")("document",e.DdM(2,HI))}function kI(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-document-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(null==u.ref?null:u.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("documents",t.items)}}let ZI=(()=>{class s extends Y{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","document","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","documents","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,qI,1,2,"ng-template",null,1,e.W1O),e.YNc(3,KI,1,3,"ng-template",null,2,e.W1O),e.YNc(5,kI,1,2,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[ee,yl,zI],encapsulation:2}),s})(),BI=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[bl,Tl.F],imports:[w.ez,R.F,x.UX,V.o,H.u,Q.P,U.t,j.h,K.G,Z,I.X0.forChild({types:[{name:"document-select",component:jI,wrappers:["form-field"]},{name:"document-grid",component:ZI,wrappers:["form-field"]}]})]}),s})(),YI=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[BI]}),s})();class Vt extends y.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class XI extends Vt{constructor(o){super("ValidateDocumentTypeExcelDataAction"),this.valid=!1,this.excelData=o}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name)}),this.validationContext.addRule(new f.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof f.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(r=>r.name),newNames:[i.newName]}):i instanceof f.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,T.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class eP extends f.wS{constructor(o,t,i,r,l){super(o,t,i,r,l,!0)}}class tP extends f.ul{constructor(o,t,i,r=!1){super(o,t,r),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new f.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new eP("name","The documenttype name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class iP extends Vt{constructor(o){super("CreateDocumentTypeAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new tP("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateDocumentType({input:this.input}).pipe((0,h.w)(o=>(0,ie.of)(o.data.created)))}}class sP extends Vt{constructor(o){super("UpdateDocumentTypesAction"),this.documentTypes=o}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.documentTypes,!0))}performAction(){this.response=this.businessProvider.data.userUpdateDocumentTypes({input:{documentTypes:this.documentTypes}}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}class oP extends Vt{constructor(o,t){super("UpdateDocumentTypeAction"),this.documentType=o,this.documentTypeId=t}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.documentType,!0)).addRule(new f.xF("Id","Id should be a CUID and not null",this.documentTypeId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateDocumentType({documentTypeId:this.documentTypeId,input:this.documentType}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}let wl=(()=>{class s extends y.nH{constructor(t,i,r){super("NotificationService.DocumentTypeBusinessProviderService",t,r),this.data=i}createDocumentType(t){const i=new iP(t);return i.Do(this),i.response}updateDocumentType(t,i){const r=new oP(t,i);return r.Do(this),r.response}importDocumentTypes(t){const i=new sP(t);return i.Do(this),i.response}validateDocumentTypeExcelData(t){const i=new XI(t);return i.Do(this),i.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(O.ed),e.LFG(E.q),e.LFG(y.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),rP=(()=>{class s extends y.nH{constructor(t,i,r){super("DocumentTypeService",r,t),this.businessProvider=i}createDocumentType(t){const i=Object.fromEntries(Object.entries(t).filter(([r,l])=>null!==l));return this.businessProvider.createDocumentType(i)}updateDocumentType(t,i){return this.businessProvider.updateDocumentType(t,i)}importDocumentTypes(t){return this.businessProvider.importDocumentTypes(t)}validateDocumentTypeExcelData(t){return this.businessProvider.validateDocumentTypeExcelData(t)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(wl,8),e.LFG(wl),e.LFG(O.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),io=(()=>{class s extends g.m1{constructor(t,i,r,l,u,P){super({loading:!1,documentTypes:[],done:!1,searchQuery:"",formName:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=r,this.toast=l,this.formService=u,this.documentTypeService=P,this.errors$=this.select(c=>c.errors),this.loading$=this.select(c=>c.loading),this.done$=this.select(c=>c.done),this.item$=this.select(c=>c.item),this.documentTypes$=this.select(c=>c.documentTypes),this.paging$=this.select(c=>c.paging),this.searchQuery$=this.select(c=>c.searchQuery),this.formName$=this.select(c=>c.formName),this.actionResult$=this.select(this.item$,this.done$,(c,d)=>({item:c,done:d}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.documentTypes$,(c,d,n,a,m)=>({errors:c,loading:d,item:n,formName:a,documentTypes:m}),{debounce:!0}),this.input$=this.select(this.paging$,this.searchQuery$,(c,d)=>({limit:c.limit,skip:c.skip,name:d,total:c.total})),this.setFormName=this.updater((c,d)=>Object.assign(Object.assign({},c),{formName:d})),this.setItem=this.updater((c,d)=>Object.assign(Object.assign({},c),{item:d})),this.addNewDocumentType=this.updater((c,d)=>Object.assign(Object.assign({},c),{documentTypes:[...c.documentTypes,d]})),this.updateDocumentType=this.updater((c,d)=>Object.assign(Object.assign({},c),{documentTypes:c.documentTypes.map(n=>n.id===d.id?d:n)})),this.addDocumentTypes=this.updater((c,d)=>Object.assign(Object.assign({},c),{documentTypes:c.documentTypes.concat(d)})),this.updateDocumentTypes=this.updater((c,d)=>Object.assign(Object.assign({},c),{documentTypes:c.documentTypes.map(n=>d.find(m=>m.id===n.id)||n)})),this.setSearchQuery=this.updater((c,d)=>Object.assign(Object.assign({},c),{searchQuery:d})),this.loadDocumentTypeEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.data.userDocumentType({documentTypeId:d}).pipe((0,g._b)(n=>{this.patchState({item:n.data.item,errors:n.errors,loading:!1})},n=>this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})))))),this.loadDocumentTypesEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.input$),(0,h.w)(([d,n])=>this.data.userDocumentTypes({input:n}).pipe((0,g._b)(a=>this.patchState({paging:{limit:n.limit,skip:n.skip,total:a.data.count.total},documentTypes:a.data.items,errors:a.errors,loading:!1}),a=>this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})))))),this.createDocumentTypeEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.documentTypeService.createDocumentType(Object.assign({},d)).pipe((0,g._b)(n=>{this.addNewDocumentType(n),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:n,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},n=>{n.graphQLErrors?(this.toast.error(n.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})):(this.toast.error(n.Message),this.formService.setErrors(n.Data))}))))),this.updateDocumentTypeEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([d,n])=>this.documentTypeService.updateDocumentType(d,d.id).pipe((0,g._b)(a=>{this.updateDocumentType(a),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:a,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.deleteDocumentTypeEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([d,n])=>this.data.userDeleteDocumentType({documentTypeId:n.id}).pipe((0,g._b)(a=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:a.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.importExcelEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.documentTypeService.importDocumentTypes(d).pipe((0,te.K)(n=>{var a;return this.toast.error(null!==(a=n.Message)&&void 0!==a?a:"Failed to save",{duration:3e3}),k.E}),(0,C.b)(n=>{const a=JSON.parse(n.created),m=JSON.parse(n.updated),p=JSON.parse(n.failed),_=a.length+m.length+p.length;this.addDocumentTypes(a),this.updateDocumentTypes(m),this.toast.success(`${a.length} created, ${m.length} updated, ${p.length} failed of total ${_}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("documentTypeId")?(this.route.snapshot.paramMap.get("documentTypeId"),this.setFormName("documentType_edit")):this.setFormName("documentType_create")}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.documentTypeService.validateDocumentTypeExcelData(t)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(E.q),e.LFG(A.F0),e.LFG(A.gz),e.LFG(X.F),e.LFG(q.o),e.LFG(rP))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function aP(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close.emit())})("formIsReady",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.documentType)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let xl=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"documentType_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.documentType=i.item})):t.formName&&t.formName.currentValue&&"documentType_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadDocumentTypeEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.documentType=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(io),e.Y36(A.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-document-type-form"]],inputs:{documentType:"documentType",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,aP,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[w.O5,z.M,w.Ov],encapsulation:2}),s})(),Nl=(()=>{class s{constructor(){this.autoHeight=!1,this.documentTypes=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var r;t.includes(null===(r=i.data)||void 0===r?void 0:r.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-document-type-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(N.x,5),2&t){let r;e.iGM(r=e.CRH())&&(i.tableView=r.first)}},inputs:{autoHeight:"autoHeight",documentTypes:"documentTypes"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.documentTypes)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[N.x],encapsulation:2}),s})();function nP(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-document-type-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","documentType_edit")("formControl",t.formControl)("documentType",t.documentType)}}const lP=function(){return{}};function cP(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-document-type-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","documentType_create")("formControl",t.formControl)("documentType",e.DdM(3,lP))}}function dP(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-document-type-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(u.ref.close())}),e.qZA()}2&s&&e.Q6J("documentTypes",o.data.items)}let uP=(()=>{class s extends I.fS{constructor(t){super(),this.store=t,this.store.loadDocumentTypesEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.documentTypes$.pipe((0,h.w)(i=>(0,T.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(io))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","documentType","send","close"],[1,"w-full","h-full","bg-white",3,"documentTypes","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,nP,2,3,"ng-template",null,1,e.W1O),e.YNc(3,cP,1,4,"ng-template",null,2,e.W1O),e.YNc(5,dP,1,1,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",u)("editTemplate",r)("createTemplate",l)("key",i.field.key)}},dependencies:[x.JJ,x.oH,J.$,xl,Nl],encapsulation:2}),s})();function mP(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-document-type-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","documentType_edit")("documentType",t.value)}}const pP=function(){return{}};function hP(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-document-type-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","documentType_create")("documentType",e.DdM(2,pP))}function fP(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-document-type-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(null==u.ref?null:u.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("documentTypes",t.items)}}let _P=(()=>{class s extends Y{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","documentType","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","documentTypes","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,mP,1,2,"ng-template",null,1,e.W1O),e.YNc(3,hP,1,3,"ng-template",null,2,e.W1O),e.YNc(5,fP,1,2,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[ee,xl,Nl],encapsulation:2}),s})(),gP=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[io],imports:[w.ez,R.F,x.UX,V.o,H.u,Q.P,U.t,Z,j.h,K.G,I.X0.forChild({types:[{name:"document-type-select",component:uP,wrappers:["form-field"]},{name:"document-type-grid",component:_P}]})]}),s})(),CP=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[gP]}),s})();class Qt extends y.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class SP extends Qt{constructor(o,t){super("ValidateDurableMedicalEquipmentExcelDataAction"),this.valid=!1,this.excelData=o,this.vendors=t}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name),this.validationContext.addRule(new f.mi(`vendorName_${i}_is_valid}`,"Vendor Is Not Valid","vendor.name",t.vendor,this.vendors,!0))}),this.validationContext.addRule(new f.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof f.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(r=>r.name),newNames:[i.newName]}):i instanceof f.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,T.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class vP extends f.wS{constructor(o,t,i,r,l){super(o,t,i,r,l,!0)}}class bP extends f.ul{constructor(o,t,i,r=!1){super(o,t,r),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new f.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new vP("name","The durablemedicalequipment name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class TP extends Qt{constructor(o){super("CreateDurableMedicalEquipmentAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new bP("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateDurableMedicalEquipment({input:this.input}).pipe((0,h.w)(o=>(0,ie.of)(o.data.created)))}}class yP extends Qt{constructor(o){super("UpdateDurableMedicalEquipmentsAction"),this.durableMedicalEquipments=o}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.durableMedicalEquipments,!0))}performAction(){this.response=this.businessProvider.data.userUpdateDurableMedicalEquipments({input:{durableMedicalEquipments:this.durableMedicalEquipments}}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}class wP extends Qt{constructor(o,t){super("UpdateDurableMedicalEquipmentAction"),this.durableMedicalEquipment=o,this.durableMedicalEquipmentId=t}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.durableMedicalEquipment,!0)).addRule(new f.xF("Id","Id should be a CUID and not null",this.durableMedicalEquipmentId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateDurableMedicalEquipment({durableMedicalEquipmentId:this.durableMedicalEquipmentId,input:this.durableMedicalEquipment}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}let Al=(()=>{class s extends y.nH{constructor(t,i,r){super("NotificationService.DurableMedicalEquipmentBusinessProviderService",t,r),this.data=i}createDurableMedicalEquipment(t){const i=new TP(t);return i.Do(this),i.response}updateDurableMedicalEquipment(t,i){const r=new wP(t,i);return r.Do(this),r.response}importDurableMedicalEquipments(t){const i=new yP(t);return i.Do(this),i.response}validateDurableMedicalEquipmentExcelData(t,i){const r=new SP(t,i);return r.Do(this),r.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(O.ed),e.LFG(E.q),e.LFG(y.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),xP=(()=>{class s extends y.nH{constructor(t,i,r){super("DurableMedicalEquipmentService",r,t),this.businessProvider=i}createDurableMedicalEquipment(t){const i=Object.fromEntries(Object.entries(t).filter(([r,l])=>null!==l));return this.businessProvider.createDurableMedicalEquipment(i)}updateDurableMedicalEquipment(t,i){return this.businessProvider.updateDurableMedicalEquipment(t,i)}importDurableMedicalEquipments(t){return this.businessProvider.importDurableMedicalEquipments(t)}validateDurableMedicalEquipmentExcelData(t,i){return this.businessProvider.validateDurableMedicalEquipmentExcelData(t,i)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(Al,8),e.LFG(Al),e.LFG(O.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),so=(()=>{class s extends g.m1{constructor(t,i,r,l,u,P){if(super({loading:!1,durableMedicalEquipments:[],done:!1,searchQuery:"",formName:void 0,vendorId:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=r,this.toast=l,this.formService=u,this.durableMedicalEquipmentService=P,this.errors$=this.select(d=>d.errors),this.loading$=this.select(d=>d.loading),this.done$=this.select(d=>d.done),this.item$=this.select(d=>d.item),this.durableMedicalEquipments$=this.select(d=>d.durableMedicalEquipments),this.vendors$=this.select(d=>d.vendors||[]),this.vendorId$=this.select(d=>d.vendorId),this.paging$=this.select(d=>d.paging),this.searchQuery$=this.select(d=>d.searchQuery),this.formName$=this.select(d=>d.formName),this.actionResult$=this.select(this.item$,this.done$,(d,n)=>({item:d,done:n}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.durableMedicalEquipments$,this.vendors$,(d,n,a,m,p,_)=>({errors:d,loading:n,item:a,formName:m,durableMedicalEquipments:p,vendors:_}),{debounce:!0}),this.input$=this.select(this.paging$,this.vendorId$,this.searchQuery$,(d,n,a)=>({limit:d.limit,skip:d.skip,name:a,vendorId:n,total:d.total})),this.setFormName=this.updater((d,n)=>Object.assign(Object.assign({},d),{formName:n})),this.setVendorId=this.updater((d,n)=>Object.assign(Object.assign({},d),{vendorId:n})),this.filterVendors=d=>this.data.userSelectVendors({input:{name:d}}).pipe((0,g._b)(n=>{let a=n.data.items;return this.patchState({vendors:a}),a},n=>this.patchState({errors:n.graphQLErrors?n.graphQLErrors:n})),(0,B.U)(n=>n.data.items)),this.addVendor=this.updater((d,n)=>Object.assign(Object.assign({},d),{vendors:d.vendors.concat(n)})),this.setItem=this.updater((d,n)=>Object.assign(Object.assign({},d),{item:n})),this.addNewDurableMedicalEquipment=this.updater((d,n)=>Object.assign(Object.assign({},d),{durableMedicalEquipments:[...d.durableMedicalEquipments,n]})),this.updateDurableMedicalEquipment=this.updater((d,n)=>Object.assign(Object.assign({},d),{durableMedicalEquipments:d.durableMedicalEquipments.map(a=>a.id===n.id?n:a)})),this.addDurableMedicalEquipments=this.updater((d,n)=>Object.assign(Object.assign({},d),{durableMedicalEquipments:d.durableMedicalEquipments.concat(n)})),this.updateDurableMedicalEquipments=this.updater((d,n)=>Object.assign(Object.assign({},d),{durableMedicalEquipments:d.durableMedicalEquipments.map(a=>n.find(p=>p.id===a.id)||a)})),this.setSearchQuery=this.updater((d,n)=>Object.assign(Object.assign({},d),{searchQuery:n})),this.loadDurableMedicalEquipmentEffect=this.effect(d=>d.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(n=>this.data.userDurableMedicalEquipment({durableMedicalEquipmentId:n}).pipe((0,g._b)(a=>{this.patchState({item:a.data.item,errors:a.errors,loading:!1})},a=>this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})))))),this.loadDurableMedicalEquipmentsEffect=this.effect(d=>d.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.input$),(0,h.w)(([n,a])=>this.data.userDurableMedicalEquipments({input:a}).pipe((0,g._b)(m=>this.patchState({paging:{limit:a.limit,skip:a.skip,total:m.data.count.total},durableMedicalEquipments:m.data.items,errors:m.errors,loading:!1}),m=>this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})))))),this.createDurableMedicalEquipmentEffect=this.effect(d=>d.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(n=>this.durableMedicalEquipmentService.createDurableMedicalEquipment(Object.assign({},n)).pipe((0,g._b)(a=>{this.addNewDurableMedicalEquipment(a),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:a,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.updateDurableMedicalEquipmentEffect=this.effect(d=>d.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([n,a])=>this.durableMedicalEquipmentService.updateDurableMedicalEquipment(n,n.id).pipe((0,g._b)(m=>{this.updateDurableMedicalEquipment(m),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:m,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},m=>{m.graphQLErrors?(this.toast.error(m.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})):(this.toast.error(m.Message),this.formService.setErrors(m.Data))}))))),this.deleteDurableMedicalEquipmentEffect=this.effect(d=>d.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([n,a])=>this.data.userDeleteDurableMedicalEquipment({durableMedicalEquipmentId:a.id}).pipe((0,g._b)(m=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:m.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},m=>{m.graphQLErrors?(this.toast.error(m.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})):(this.toast.error(m.Message),this.formService.setErrors(m.Data))}))))),this.importExcelEffect=this.effect(d=>d.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(n=>this.durableMedicalEquipmentService.importDurableMedicalEquipments(n).pipe((0,te.K)(a=>{var m;return this.toast.error(null!==(m=a.Message)&&void 0!==m?m:"Failed to save",{duration:3e3}),k.E}),(0,C.b)(a=>{const m=JSON.parse(a.created),p=JSON.parse(a.updated),_=JSON.parse(a.failed),v=m.length+p.length+_.length;this.addDurableMedicalEquipments(m),this.updateDurableMedicalEquipments(p),this.toast.success(`${m.length} created, ${p.length} updated, ${_.length} failed of total ${v}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("durableMedicalEquipmentId")?(this.route.snapshot.paramMap.get("durableMedicalEquipmentId"),this.setFormName("durableMedicalEquipment_edit")):this.setFormName("durableMedicalEquipment_create"),this.route.snapshot.paramMap.has("vendorId")){var c=this.route.snapshot.paramMap.get("vendorId");this.setVendorId(c)}}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.durableMedicalEquipmentService.validateDurableMedicalEquipmentExcelData(t,i.vendors)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(E.q),e.LFG(A.F0),e.LFG(A.gz),e.LFG(X.F),e.LFG(q.o),e.LFG(xP))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function NP(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close.emit())})("formIsReady",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.durableMedicalEquipment)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let Fl=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"durableMedicalEquipment_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.durableMedicalEquipment=i.item})):t.formName&&t.formName.currentValue&&"durableMedicalEquipment_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadDurableMedicalEquipmentEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.durableMedicalEquipment=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(so),e.Y36(A.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-durable-medical-equipment-form"]],inputs:{durableMedicalEquipment:"durableMedicalEquipment",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,NP,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[w.O5,z.M,w.Ov],encapsulation:2}),s})(),Dl=(()=>{class s{constructor(){this.autoHeight=!1,this.durableMedicalEquipments=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[{field:"vendor.name",headerName:"Vendor",filter:"agTextColumnFilter"},{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{field:"itemCode",filter:"agTextColumnFilter"},{field:"vendorId",filter:"agTextColumnFilter",hide:!0},{field:"size",filter:"agTextColumnFilter"},{field:"brand",filter:"agTextColumnFilter"},{field:"itemURL",filter:"agTextColumnFilter"},{field:"estimatedCost",filter:"agTextColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var r;t.includes(null===(r=i.data)||void 0===r?void 0:r.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-durable-medical-equipment-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(N.x,5),2&t){let r;e.iGM(r=e.CRH())&&(i.tableView=r.first)}},inputs:{autoHeight:"autoHeight",durableMedicalEquipments:"durableMedicalEquipments"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.durableMedicalEquipments)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[N.x],encapsulation:2}),s})();function AP(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-durable-medical-equipment-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","durableMedicalEquipment_edit")("formControl",t.formControl)("durableMedicalEquipment",t.durableMedicalEquipment)}}const FP=function(){return{}};function DP(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-durable-medical-equipment-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","durableMedicalEquipment_create")("formControl",t.formControl)("durableMedicalEquipment",e.DdM(3,FP))}}function IP(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-durable-medical-equipment-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(u.ref.close())}),e.qZA()}2&s&&e.Q6J("durableMedicalEquipments",o.data.items)}let PP=(()=>{class s extends I.fS{constructor(t){super(),this.store=t,this.store.loadDurableMedicalEquipmentsEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.durableMedicalEquipments$.pipe((0,h.w)(i=>(0,T.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(so))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","durableMedicalEquipment","send","close"],[1,"w-full","h-full","bg-white",3,"durableMedicalEquipments","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,AP,2,3,"ng-template",null,1,e.W1O),e.YNc(3,DP,1,4,"ng-template",null,2,e.W1O),e.YNc(5,IP,1,1,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",u)("editTemplate",r)("createTemplate",l)("key",i.field.key)}},dependencies:[x.JJ,x.oH,J.$,Fl,Dl],encapsulation:2}),s})();function WP(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-durable-medical-equipment-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","durableMedicalEquipment_edit")("durableMedicalEquipment",t.value)}}const MP=function(){return{}};function EP(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-durable-medical-equipment-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","durableMedicalEquipment_create")("durableMedicalEquipment",e.DdM(2,MP))}function OP(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-durable-medical-equipment-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(null==u.ref?null:u.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("durableMedicalEquipments",t.items)}}let LP=(()=>{class s extends Y{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","durableMedicalEquipment","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","durableMedicalEquipments","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,WP,1,2,"ng-template",null,1,e.W1O),e.YNc(3,EP,1,3,"ng-template",null,2,e.W1O),e.YNc(5,OP,1,2,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[ee,Fl,Dl],encapsulation:2}),s})(),GP=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[so],imports:[w.ez,R.F,x.UX,V.o,H.u,Q.P,U.t,Z,j.h,K.G,I.X0.forChild({types:[{name:"durable-medical-equipment-select",component:PP,wrappers:["form-field"]},{name:"durable-medical-equipment-grid",component:LP}]})]}),s})(),$P=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[GP]}),s})();class Ut extends y.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class RP extends Ut{constructor(o){super("ValidateEquipmentExcelDataAction"),this.valid=!1,this.excelData=o}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name)}),this.validationContext.addRule(new f.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof f.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(r=>r.name),newNames:[i.newName]}):i instanceof f.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,T.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class VP extends f.wS{constructor(o,t,i,r,l){super(o,t,i,r,l,!0)}}class QP extends f.ul{constructor(o,t,i,r=!1){super(o,t,r),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new f.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new VP("name","The equipment name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class UP extends Ut{constructor(o){super("CreateEquipmentAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new QP("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateEquipment({input:this.input}).pipe((0,h.w)(o=>(0,ie.of)(o.data.created)))}}class JP extends Ut{constructor(o){super("UpdateEquipmentsAction"),this.equipments=o}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.equipments,!0))}performAction(){this.response=this.businessProvider.data.userUpdateEquipments({input:{equipments:this.equipments}}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}class jP extends Ut{constructor(o,t){super("UpdateEquipmentAction"),this.equipment=o,this.equipmentId=t}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.equipment,!0)).addRule(new f.xF("Id","Id should be a CUID and not null",this.equipmentId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateEquipment({equipmentId:this.equipmentId,input:this.equipment}).pipe((0,h.w)(()=>(0,T.of)(!0)))}}let Il=(()=>{class s extends y.nH{constructor(t,i,r){super("NotificationService.EquipmentBusinessProviderService",t,r),this.data=i}createEquipment(t){const i=new UP(t);return i.Do(this),i.response}updateEquipment(t,i){const r=new jP(t,i);return r.Do(this),r.response}importEquipments(t){const i=new JP(t);return i.Do(this),i.response}validateEquipmentExcelData(t){const i=new RP(t);return i.Do(this),i.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(O.ed),e.LFG(E.q),e.LFG(y.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),zP=(()=>{class s extends y.nH{constructor(t,i,r){super("EquipmentService",r,t),this.businessProvider=i}createEquipment(t){const i=Object.fromEntries(Object.entries(t).filter(([r,l])=>null!==l));return this.businessProvider.createEquipment(i)}updateEquipment(t,i){return this.businessProvider.updateEquipment(t,i)}importEquipments(t){return this.businessProvider.importEquipments(t)}validateEquipmentExcelData(t){return this.businessProvider.validateEquipmentExcelData(t)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(Il,8),e.LFG(Il),e.LFG(O.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),oo=(()=>{class s extends g.m1{constructor(t,i,r,l,u,P){super({loading:!1,equipments:[],done:!1,searchQuery:"",formName:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=r,this.toast=l,this.formService=u,this.equipmentService=P,this.errors$=this.select(c=>c.errors),this.loading$=this.select(c=>c.loading),this.done$=this.select(c=>c.done),this.item$=this.select(c=>c.item),this.equipments$=this.select(c=>c.equipments),this.paging$=this.select(c=>c.paging),this.searchQuery$=this.select(c=>c.searchQuery),this.formName$=this.select(c=>c.formName),this.actionResult$=this.select(this.item$,this.done$,(c,d)=>({item:c,done:d}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.equipments$,(c,d,n,a,m)=>({errors:c,loading:d,item:n,formName:a,equipments:m}),{debounce:!0}),this.input$=this.select(this.paging$,this.searchQuery$,(c,d)=>({limit:c.limit,skip:c.skip,name:d,total:c.total})),this.setFormName=this.updater((c,d)=>Object.assign(Object.assign({},c),{formName:d})),this.setItem=this.updater((c,d)=>Object.assign(Object.assign({},c),{item:d})),this.addNewEquipment=this.updater((c,d)=>Object.assign(Object.assign({},c),{equipments:[...c.equipments,d]})),this.updateEquipment=this.updater((c,d)=>Object.assign(Object.assign({},c),{equipments:c.equipments.map(n=>n.id===d.id?d:n)})),this.addEquipments=this.updater((c,d)=>Object.assign(Object.assign({},c),{equipments:c.equipments.concat(d)})),this.updateEquipments=this.updater((c,d)=>Object.assign(Object.assign({},c),{equipments:c.equipments.map(n=>d.find(m=>m.id===n.id)||n)})),this.setSearchQuery=this.updater((c,d)=>Object.assign(Object.assign({},c),{searchQuery:d})),this.loadEquipmentEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.data.userEquipment({equipmentId:d}).pipe((0,g._b)(n=>{this.patchState({item:n.data.item,errors:n.errors,loading:!1})},n=>this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})))))),this.loadEquipmentsEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.input$),(0,h.w)(([d,n])=>this.data.userEquipments({input:n}).pipe((0,g._b)(a=>this.patchState({paging:{limit:n.limit,skip:n.skip,total:a.data.count.total},equipments:a.data.items,errors:a.errors,loading:!1}),a=>this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})))))),this.createEquipmentEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.equipmentService.createEquipment(Object.assign({},d)).pipe((0,g._b)(n=>{this.addNewEquipment(n),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:n,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},n=>{n.graphQLErrors?(this.toast.error(n.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})):(this.toast.error(n.Message),this.formService.setErrors(n.Data))}))))),this.updateEquipmentEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([d,n])=>this.equipmentService.updateEquipment(d,d.id).pipe((0,g._b)(a=>{this.updateEquipment(a),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:a,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.deleteEquipmentEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([d,n])=>this.data.userDeleteEquipment({equipmentId:n.id}).pipe((0,g._b)(a=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:a.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.importExcelEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.equipmentService.importEquipments(d).pipe((0,te.K)(n=>{var a;return this.toast.error(null!==(a=n.Message)&&void 0!==a?a:"Failed to save",{duration:3e3}),k.E}),(0,C.b)(n=>{const a=JSON.parse(n.created),m=JSON.parse(n.updated),p=JSON.parse(n.failed),_=a.length+m.length+p.length;this.addEquipments(a),this.updateEquipments(m),this.toast.success(`${a.length} created, ${m.length} updated, ${p.length} failed of total ${_}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("equipmentId")?(this.route.snapshot.paramMap.get("equipmentId"),this.setFormName("equipment_edit")):this.setFormName("equipment_create")}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.equipmentService.validateEquipmentExcelData(t)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(E.q),e.LFG(A.F0),e.LFG(A.gz),e.LFG(X.F),e.LFG(q.o),e.LFG(zP))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function qP(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close.emit())})("formIsReady",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.equipment)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let Pl=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"equipment_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.equipment=i.item})):t.formName&&t.formName.currentValue&&"equipment_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadEquipmentEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.equipment=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(oo),e.Y36(A.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-equipment-form"]],inputs:{equipment:"equipment",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,qP,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[w.O5,z.M,w.Ov],encapsulation:2}),s})(),Wl=(()=>{class s{constructor(){this.autoHeight=!1,this.equipments=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[,{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var r;t.includes(null===(r=i.data)||void 0===r?void 0:r.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-equipment-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(N.x,5),2&t){let r;e.iGM(r=e.CRH())&&(i.tableView=r.first)}},inputs:{autoHeight:"autoHeight",equipments:"equipments"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.equipments)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[N.x],encapsulation:2}),s})();function HP(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-equipment-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","equipment_edit")("formControl",t.formControl)("equipment",t.equipment)}}const KP=function(){return{}};function kP(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-equipment-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","equipment_create")("formControl",t.formControl)("equipment",e.DdM(3,KP))}}function ZP(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-equipment-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(u.ref.close())}),e.qZA()}2&s&&e.Q6J("equipments",o.data.items)}let BP=(()=>{class s extends I.fS{constructor(t){super(),this.store=t,this.store.loadEquipmentsEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.equipments$.pipe((0,h.w)(i=>(0,T.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(oo))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","equipment","send","close"],[1,"w-full","h-full","bg-white",3,"equipments","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,HP,2,3,"ng-template",null,1,e.W1O),e.YNc(3,kP,1,4,"ng-template",null,2,e.W1O),e.YNc(5,ZP,1,1,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",u)("editTemplate",r)("createTemplate",l)("key",i.field.key)}},dependencies:[x.JJ,x.oH,J.$,Pl,Wl],encapsulation:2}),s})();function YP(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-equipment-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","equipment_edit")("equipment",t.value)}}const XP=function(){return{}};function e1(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-equipment-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","equipment_create")("equipment",e.DdM(2,XP))}function t1(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-equipment-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(null==u.ref?null:u.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("equipments",t.items)}}let i1=(()=>{class s extends Y{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","equipment","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","equipments","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,YP,1,2,"ng-template",null,1,e.W1O),e.YNc(3,e1,1,3,"ng-template",null,2,e.W1O),e.YNc(5,t1,1,2,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[ee,Pl,Wl],encapsulation:2}),s})(),s1=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[oo],imports:[w.ez,R.F,x.UX,V.o,H.u,Q.P,U.t,Z,j.h,K.G,I.X0.forChild({types:[{name:"equipment-select",component:BP,wrappers:["form-field"]},{name:"equipment-grid",component:i1}]})]}),s})(),o1=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[s1]}),s})();class Jt extends y.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class r1 extends Jt{constructor(o){super("ValidateEthnicityExcelDataAction"),this.valid=!1,this.excelData=o}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name)}),this.validationContext.addRule(new f.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof f.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(r=>r.name),newNames:[i.newName]}):i instanceof f.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,T.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class a1 extends f.wS{constructor(o,t,i,r,l){super(o,t,i,r,l,!0)}}class n1 extends f.ul{constructor(o,t,i,r=!1){super(o,t,r),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new f.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new a1("name","The ethnicity name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class l1 extends Jt{constructor(o){super("CreateEthnicityAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new n1("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateEthnicity({input:this.input}).pipe((0,h.w)(o=>(0,ie.of)(o.data.created)))}}class c1 extends Jt{constructor(o){super("UpdateEthnicitiesAction"),this.ethnicities=o}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.ethnicities,!0))}performAction(){this.response=this.businessProvider.data.userUpdateEthnicities({input:{ethnicities:this.ethnicities}}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}class d1 extends Jt{constructor(o,t){super("UpdateEthnicityAction"),this.ethnicity=o,this.ethnicityId=t}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.ethnicity,!0)).addRule(new f.xF("Id","Id should be a CUID and not null",this.ethnicityId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateEthnicity({ethnicityId:this.ethnicityId,input:this.ethnicity}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}let Ml=(()=>{class s extends y.nH{constructor(t,i,r){super("NotificationService.EthnicityBusinessProviderService",t,r),this.data=i}createEthnicity(t){const i=new l1(t);return i.Do(this),i.response}updateEthnicity(t,i){const r=new d1(t,i);return r.Do(this),r.response}importEthnicities(t){const i=new c1(t);return i.Do(this),i.response}validateEthnicityExcelData(t){const i=new r1(t);return i.Do(this),i.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(O.ed),e.LFG(E.q),e.LFG(y.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),u1=(()=>{class s extends y.nH{constructor(t,i,r){super("EthnicityService",r,t),this.businessProvider=i}createEthnicity(t){const i=Object.fromEntries(Object.entries(t).filter(([r,l])=>null!==l));return this.businessProvider.createEthnicity(i)}updateEthnicity(t,i){return this.businessProvider.updateEthnicity(t,i)}importEthnicities(t){return this.businessProvider.importEthnicities(t)}validateEthnicityExcelData(t){return this.businessProvider.validateEthnicityExcelData(t)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(Ml,8),e.LFG(Ml),e.LFG(O.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),ro=(()=>{class s extends g.m1{constructor(t,i,r,l,u,P){super({loading:!1,ethnicities:[],done:!1,searchQuery:"",formName:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=r,this.toast=l,this.formService=u,this.ethnicityService=P,this.errors$=this.select(c=>c.errors),this.loading$=this.select(c=>c.loading),this.done$=this.select(c=>c.done),this.item$=this.select(c=>c.item),this.ethnicities$=this.select(c=>c.ethnicities),this.paging$=this.select(c=>c.paging),this.searchQuery$=this.select(c=>c.searchQuery),this.formName$=this.select(c=>c.formName),this.actionResult$=this.select(this.item$,this.done$,(c,d)=>({item:c,done:d}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.ethnicities$,(c,d,n,a,m)=>({errors:c,loading:d,item:n,formName:a,ethnicities:m}),{debounce:!0}),this.input$=this.select(this.paging$,this.searchQuery$,(c,d)=>({limit:c.limit,skip:c.skip,name:d,total:c.total})),this.setFormName=this.updater((c,d)=>Object.assign(Object.assign({},c),{formName:d})),this.setItem=this.updater((c,d)=>Object.assign(Object.assign({},c),{item:d})),this.addNewEthnicity=this.updater((c,d)=>Object.assign(Object.assign({},c),{ethnicities:[...c.ethnicities,d]})),this.updateEthnicity=this.updater((c,d)=>Object.assign(Object.assign({},c),{ethnicities:c.ethnicities.map(n=>n.id===d.id?d:n)})),this.addEthnicities=this.updater((c,d)=>Object.assign(Object.assign({},c),{ethnicities:c.ethnicities.concat(d)})),this.updateEthnicities=this.updater((c,d)=>Object.assign(Object.assign({},c),{ethnicities:c.ethnicities.map(n=>d.find(m=>m.id===n.id)||n)})),this.setSearchQuery=this.updater((c,d)=>Object.assign(Object.assign({},c),{searchQuery:d})),this.loadEthnicityEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.data.userEthnicity({ethnicityId:d}).pipe((0,g._b)(n=>{this.patchState({item:n.data.item,errors:n.errors,loading:!1})},n=>this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})))))),this.loadEthnicitiesEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.input$),(0,h.w)(([d,n])=>this.data.userEthnicities({input:n}).pipe((0,g._b)(a=>this.patchState({paging:{limit:n.limit,skip:n.skip,total:a.data.count.total},ethnicities:a.data.items,errors:a.errors,loading:!1}),a=>this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})))))),this.createEthnicityEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.ethnicityService.createEthnicity(Object.assign({},d)).pipe((0,g._b)(n=>{this.addNewEthnicity(n),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:n,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},n=>{n.graphQLErrors?(this.toast.error(n.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})):(this.toast.error(n.Message),this.formService.setErrors(n.Data))}))))),this.updateEthnicityEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([d,n])=>this.ethnicityService.updateEthnicity(d,d.id).pipe((0,g._b)(a=>{this.updateEthnicity(a),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:a,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.deleteEthnicityEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([d,n])=>this.data.userDeleteEthnicity({ethnicityId:n.id}).pipe((0,g._b)(a=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:a.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.importExcelEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.ethnicityService.importEthnicities(d).pipe((0,te.K)(n=>{var a;return this.toast.error(null!==(a=n.Message)&&void 0!==a?a:"Failed to save",{duration:3e3}),k.E}),(0,C.b)(n=>{const a=JSON.parse(n.created),m=JSON.parse(n.updated),p=JSON.parse(n.failed),_=a.length+m.length+p.length;this.addEthnicities(a),this.updateEthnicities(m),this.toast.success(`${a.length} created, ${m.length} updated, ${p.length} failed of total ${_}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("ethnicityId")?(this.route.snapshot.paramMap.get("ethnicityId"),this.setFormName("ethnicity_edit")):this.setFormName("ethnicity_create")}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.ethnicityService.validateEthnicityExcelData(t)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(E.q),e.LFG(A.F0),e.LFG(A.gz),e.LFG(X.F),e.LFG(q.o),e.LFG(u1))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function m1(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close.emit())})("formIsReady",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.ethnicity)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let El=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"ethnicity_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.ethnicity=i.item})):t.formName&&t.formName.currentValue&&"ethnicity_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadEthnicityEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.ethnicity=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(ro),e.Y36(A.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-ethnicity-form"]],inputs:{ethnicity:"ethnicity",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,m1,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[w.O5,z.M,w.Ov],encapsulation:2}),s})(),Ol=(()=>{class s{constructor(){this.autoHeight=!1,this.ethnicities=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[,{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var r;t.includes(null===(r=i.data)||void 0===r?void 0:r.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-ethnicity-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(N.x,5),2&t){let r;e.iGM(r=e.CRH())&&(i.tableView=r.first)}},inputs:{autoHeight:"autoHeight",ethnicities:"ethnicities"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.ethnicities)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[N.x],encapsulation:2}),s})();function p1(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-ethnicity-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","ethnicity_edit")("formControl",t.formControl)("ethnicity",t.ethnicity)}}const h1=function(){return{}};function f1(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-ethnicity-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","ethnicity_create")("formControl",t.formControl)("ethnicity",e.DdM(3,h1))}}function _1(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-ethnicity-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(u.ref.close())}),e.qZA()}2&s&&e.Q6J("ethnicities",o.data.items)}let g1=(()=>{class s extends I.fS{constructor(t){super(),this.store=t,this.store.loadEthnicitiesEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.ethnicities$.pipe((0,h.w)(i=>(0,T.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(ro))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","ethnicity","send","close"],[1,"w-full","h-full","bg-white",3,"ethnicities","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,p1,2,3,"ng-template",null,1,e.W1O),e.YNc(3,f1,1,4,"ng-template",null,2,e.W1O),e.YNc(5,_1,1,1,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",u)("editTemplate",r)("createTemplate",l)("key",i.field.key)}},dependencies:[x.JJ,x.oH,J.$,El,Ol],encapsulation:2}),s})();function C1(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-ethnicity-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","ethnicity_edit")("ethnicity",t.value)}}const S1=function(){return{}};function v1(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-ethnicity-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","ethnicity_create")("ethnicity",e.DdM(2,S1))}function b1(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-ethnicity-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(null==u.ref?null:u.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("ethnicities",t.items)}}let T1=(()=>{class s extends Y{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","ethnicity","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","ethnicities","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,C1,1,2,"ng-template",null,1,e.W1O),e.YNc(3,v1,1,3,"ng-template",null,2,e.W1O),e.YNc(5,b1,1,2,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[ee,El,Ol],encapsulation:2}),s})(),y1=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[ro],imports:[w.ez,R.F,x.UX,V.o,H.u,Q.P,U.t,Z,j.h,K.G,I.X0.forChild({types:[{name:"ethnicity-select",component:g1,wrappers:["form-field"]},{name:"ethnicity-grid",component:T1}]})]}),s})(),w1=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[y1]}),s})();class jt extends y.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class x1 extends jt{constructor(o,t,i){super("ValidateFacilityFeeScheduleExcelDataAction"),this.valid=!1,this.excelData=o,this.organizations=t,this.specialties=i}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name),this.validationContext.addRule(new f.mi(`organizationName_${i}_is_valid}`,"Organization Is Not Valid","organization.name",t.organization,this.organizations,!0)),this.validationContext.addRule(new f.mi(`specialtyName_${i}_is_valid}`,"Specialty Is Not Valid","specialty.name",t.specialty,this.specialties,!0))}),this.validationContext.addRule(new f.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof f.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(r=>r.name),newNames:[i.newName]}):i instanceof f.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,T.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class N1 extends f.wS{constructor(o,t,i,r,l){super(o,t,i,r,l,!0)}}class A1 extends f.ul{constructor(o,t,i,r=!1){super(o,t,r),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new f.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new N1("name","The facilityfeeschedule name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class F1 extends jt{constructor(o){super("CreateFacilityFeeScheduleAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new A1("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateFacilityFeeSchedule({input:this.input}).pipe((0,h.w)(o=>(0,ie.of)(o.data.created)))}}class D1 extends jt{constructor(o){super("UpdateFacilityFeeSchedulesAction"),this.facilityFeeSchedules=o}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.facilityFeeSchedules,!0))}performAction(){this.response=this.businessProvider.data.userUpdateFacilityFeeSchedules({input:{facilityFeeSchedules:this.facilityFeeSchedules}}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}class I1 extends jt{constructor(o,t){super("UpdateFacilityFeeScheduleAction"),this.facilityFeeSchedule=o,this.facilityFeeScheduleId=t}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.facilityFeeSchedule,!0)).addRule(new f.xF("Id","Id should be a CUID and not null",this.facilityFeeScheduleId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateFacilityFeeSchedule({facilityFeeScheduleId:this.facilityFeeScheduleId,input:this.facilityFeeSchedule}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}let Ll=(()=>{class s extends y.nH{constructor(t,i,r){super("NotificationService.FacilityFeeScheduleBusinessProviderService",t,r),this.data=i}createFacilityFeeSchedule(t){const i=new F1(t);return i.Do(this),i.response}updateFacilityFeeSchedule(t,i){const r=new I1(t,i);return r.Do(this),r.response}importFacilityFeeSchedules(t){const i=new D1(t);return i.Do(this),i.response}validateFacilityFeeScheduleExcelData(t,i,r){const l=new x1(t,i,r);return l.Do(this),l.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(O.ed),e.LFG(E.q),e.LFG(y.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),P1=(()=>{class s extends y.nH{constructor(t,i,r){super("FacilityFeeScheduleService",r,t),this.businessProvider=i}createFacilityFeeSchedule(t){const i=Object.fromEntries(Object.entries(t).filter(([r,l])=>null!==l));return this.businessProvider.createFacilityFeeSchedule(i)}updateFacilityFeeSchedule(t,i){return this.businessProvider.updateFacilityFeeSchedule(t,i)}importFacilityFeeSchedules(t){return this.businessProvider.importFacilityFeeSchedules(t)}validateFacilityFeeScheduleExcelData(t,i,r){return this.businessProvider.validateFacilityFeeScheduleExcelData(t,i,r)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(Ll,8),e.LFG(Ll),e.LFG(O.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),ao=(()=>{class s extends g.m1{constructor(t,i,r,l,u,P){if(super({loading:!1,facilityFeeSchedules:[],done:!1,searchQuery:"",formName:void 0,organizationId:void 0,specialtyId:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=r,this.toast=l,this.formService=u,this.facilityFeeScheduleService=P,this.errors$=this.select(n=>n.errors),this.loading$=this.select(n=>n.loading),this.done$=this.select(n=>n.done),this.item$=this.select(n=>n.item),this.facilityFeeSchedules$=this.select(n=>n.facilityFeeSchedules),this.organizations$=this.select(n=>n.organizations||[]),this.specialties$=this.select(n=>n.specialties||[]),this.organizationId$=this.select(n=>n.organizationId),this.specialtyId$=this.select(n=>n.specialtyId),this.paging$=this.select(n=>n.paging),this.searchQuery$=this.select(n=>n.searchQuery),this.formName$=this.select(n=>n.formName),this.actionResult$=this.select(this.item$,this.done$,(n,a)=>({item:n,done:a}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.facilityFeeSchedules$,this.organizations$,this.specialties$,(n,a,m,p,_,v,D)=>({errors:n,loading:a,item:m,formName:p,facilityFeeSchedules:_,organizations:v,specialties:D}),{debounce:!0}),this.input$=this.select(this.paging$,this.organizationId$,this.specialtyId$,this.searchQuery$,(n,a,m,p)=>({limit:n.limit,skip:n.skip,name:p,organizationId:a,specialtyId:m,total:n.total})),this.setFormName=this.updater((n,a)=>Object.assign(Object.assign({},n),{formName:a})),this.setOrganizationId=this.updater((n,a)=>Object.assign(Object.assign({},n),{organizationId:a})),this.setSpecialtyId=this.updater((n,a)=>Object.assign(Object.assign({},n),{specialtyId:a})),this.filterOrganizations=n=>this.data.userSelectOrganizations({input:{name:n}}).pipe((0,g._b)(a=>{let m=a.data.items;return this.patchState({organizations:m}),m},a=>this.patchState({errors:a.graphQLErrors?a.graphQLErrors:a})),(0,B.U)(a=>a.data.items)),this.filterSpecialties=n=>this.data.userSelectSpecialties({input:{name:n}}).pipe((0,g._b)(a=>{let m=a.data.items;return this.patchState({specialties:m}),m},a=>this.patchState({errors:a.graphQLErrors?a.graphQLErrors:a})),(0,B.U)(a=>a.data.items)),this.addOrganization=this.updater((n,a)=>Object.assign(Object.assign({},n),{organizations:n.organizations.concat(a)})),this.addSpecialty=this.updater((n,a)=>Object.assign(Object.assign({},n),{specialties:n.specialties.concat(a)})),this.setItem=this.updater((n,a)=>Object.assign(Object.assign({},n),{item:a})),this.addNewFacilityFeeSchedule=this.updater((n,a)=>Object.assign(Object.assign({},n),{facilityFeeSchedules:[...n.facilityFeeSchedules,a]})),this.updateFacilityFeeSchedule=this.updater((n,a)=>Object.assign(Object.assign({},n),{facilityFeeSchedules:n.facilityFeeSchedules.map(m=>m.id===a.id?a:m)})),this.addFacilityFeeSchedules=this.updater((n,a)=>Object.assign(Object.assign({},n),{facilityFeeSchedules:n.facilityFeeSchedules.concat(a)})),this.updateFacilityFeeSchedules=this.updater((n,a)=>Object.assign(Object.assign({},n),{facilityFeeSchedules:n.facilityFeeSchedules.map(m=>a.find(_=>_.id===m.id)||m)})),this.setSearchQuery=this.updater((n,a)=>Object.assign(Object.assign({},n),{searchQuery:a})),this.loadFacilityFeeScheduleEffect=this.effect(n=>n.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(a=>this.data.userFacilityFeeSchedule({facilityFeeScheduleId:a}).pipe((0,g._b)(m=>{this.patchState({item:m.data.item,errors:m.errors,loading:!1})},m=>this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})))))),this.loadFacilityFeeSchedulesEffect=this.effect(n=>n.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.input$),(0,h.w)(([a,m])=>this.data.userFacilityFeeSchedules({input:m}).pipe((0,g._b)(p=>this.patchState({paging:{limit:m.limit,skip:m.skip,total:p.data.count.total},facilityFeeSchedules:p.data.items,errors:p.errors,loading:!1}),p=>this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})))))),this.createFacilityFeeScheduleEffect=this.effect(n=>n.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(a=>this.facilityFeeScheduleService.createFacilityFeeSchedule(Object.assign({},a)).pipe((0,g._b)(m=>{this.addNewFacilityFeeSchedule(m),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:m,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},m=>{m.graphQLErrors?(this.toast.error(m.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})):(this.toast.error(m.Message),this.formService.setErrors(m.Data))}))))),this.updateFacilityFeeScheduleEffect=this.effect(n=>n.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([a,m])=>this.facilityFeeScheduleService.updateFacilityFeeSchedule(a,a.id).pipe((0,g._b)(p=>{this.updateFacilityFeeSchedule(p),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:p,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},p=>{p.graphQLErrors?(this.toast.error(p.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})):(this.toast.error(p.Message),this.formService.setErrors(p.Data))}))))),this.deleteFacilityFeeScheduleEffect=this.effect(n=>n.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([a,m])=>this.data.userDeleteFacilityFeeSchedule({facilityFeeScheduleId:m.id}).pipe((0,g._b)(p=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:p.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},p=>{p.graphQLErrors?(this.toast.error(p.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})):(this.toast.error(p.Message),this.formService.setErrors(p.Data))}))))),this.importExcelEffect=this.effect(n=>n.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(a=>this.facilityFeeScheduleService.importFacilityFeeSchedules(a).pipe((0,te.K)(m=>{var p;return this.toast.error(null!==(p=m.Message)&&void 0!==p?p:"Failed to save",{duration:3e3}),k.E}),(0,C.b)(m=>{const p=JSON.parse(m.created),_=JSON.parse(m.updated),v=JSON.parse(m.failed),D=p.length+_.length+v.length;this.addFacilityFeeSchedules(p),this.updateFacilityFeeSchedules(_),this.toast.success(`${p.length} created, ${_.length} updated, ${v.length} failed of total ${D}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("facilityFeeScheduleId")?(this.route.snapshot.paramMap.get("facilityFeeScheduleId"),this.setFormName("facilityFeeSchedule_edit")):this.setFormName("facilityFeeSchedule_create"),this.route.snapshot.paramMap.has("organizationId")){var c=this.route.snapshot.paramMap.get("organizationId");this.setOrganizationId(c)}if(this.route.snapshot.paramMap.has("specialtyId")){var d=this.route.snapshot.paramMap.get("specialtyId");this.setSpecialtyId(d)}}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.facilityFeeScheduleService.validateFacilityFeeScheduleExcelData(t,i.organizations,i.specialties)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(E.q),e.LFG(A.F0),e.LFG(A.gz),e.LFG(X.F),e.LFG(q.o),e.LFG(P1))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function W1(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close.emit())})("formIsReady",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.facilityFeeSchedule)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let Gl=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"facilityFeeSchedule_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.facilityFeeSchedule=i.item})):t.formName&&t.formName.currentValue&&"facilityFeeSchedule_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadFacilityFeeScheduleEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.facilityFeeSchedule=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(ao),e.Y36(A.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-facility-fee-schedule-form"]],inputs:{facilityFeeSchedule:"facilityFeeSchedule",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,W1,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[w.O5,z.M,w.Ov],encapsulation:2}),s})(),$l=(()=>{class s{constructor(){this.autoHeight=!1,this.facilityFeeSchedules=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[{field:"organization.name",headerName:"Organization",filter:"agTextColumnFilter"},{field:"specialty.name",headerName:"Specialty",filter:"agTextColumnFilter"},{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{field:"organizationId",filter:"agTextColumnFilter",hide:!0},{field:"specialtyId",filter:"agTextColumnFilter",hide:!0},{field:"code",filter:"agTextColumnFilter"},{field:"modifier",filter:"agTextColumnFilter"},{field:"description",filter:"agTextColumnFilter"},{headerName:"Medicare Facility Rate",field:"medicareFacilityRate",valueFormatter:t=>{var i;return(0,S.oBD)(null===(i=t.data)||void 0===i?void 0:i.medicareFacilityRate,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{headerName:"Facility Fee",field:"facilityFee",valueFormatter:t=>{var i;return(0,S.oBD)(null===(i=t.data)||void 0===i?void 0:i.facilityFee,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{headerName:"Base Unit",field:"baseUnit",valueFormatter:t=>{var i;return(0,S.oBD)(null===(i=t.data)||void 0===i?void 0:i.baseUnit,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{headerName:"Prof Cf",field:"profCf",valueFormatter:t=>{var i;return(0,S.oBD)(null===(i=t.data)||void 0===i?void 0:i.profCf,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var r;t.includes(null===(r=i.data)||void 0===r?void 0:r.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-facility-fee-schedule-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(N.x,5),2&t){let r;e.iGM(r=e.CRH())&&(i.tableView=r.first)}},inputs:{autoHeight:"autoHeight",facilityFeeSchedules:"facilityFeeSchedules"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.facilityFeeSchedules)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[N.x],encapsulation:2}),s})();function M1(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-facility-fee-schedule-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","facilityFeeSchedule_edit")("formControl",t.formControl)("facilityFeeSchedule",t.facilityFeeSchedule)}}const E1=function(){return{}};function O1(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-facility-fee-schedule-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","facilityFeeSchedule_create")("formControl",t.formControl)("facilityFeeSchedule",e.DdM(3,E1))}}function L1(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-facility-fee-schedule-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(u.ref.close())}),e.qZA()}2&s&&e.Q6J("facilityFeeSchedules",o.data.items)}let G1=(()=>{class s extends I.fS{constructor(t){super(),this.store=t,this.store.loadFacilityFeeSchedulesEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.facilityFeeSchedules$.pipe((0,h.w)(i=>(0,T.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(ao))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","facilityFeeSchedule","send","close"],[1,"w-full","h-full","bg-white",3,"facilityFeeSchedules","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,M1,2,3,"ng-template",null,1,e.W1O),e.YNc(3,O1,1,4,"ng-template",null,2,e.W1O),e.YNc(5,L1,1,1,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",u)("editTemplate",r)("createTemplate",l)("key",i.field.key)}},dependencies:[x.JJ,x.oH,J.$,Gl,$l],encapsulation:2}),s})();function $1(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-facility-fee-schedule-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","facilityFeeSchedule_edit")("facilityFeeSchedule",t.value)}}const R1=function(){return{}};function V1(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-facility-fee-schedule-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","facilityFeeSchedule_create")("facilityFeeSchedule",e.DdM(2,R1))}function Q1(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-facility-fee-schedule-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(null==u.ref?null:u.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("facilityFeeSchedules",t.items)}}let U1=(()=>{class s extends Y{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","facilityFeeSchedule","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","facilityFeeSchedules","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,$1,1,2,"ng-template",null,1,e.W1O),e.YNc(3,V1,1,3,"ng-template",null,2,e.W1O),e.YNc(5,Q1,1,2,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[ee,Gl,$l],encapsulation:2}),s})(),J1=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[ao],imports:[w.ez,R.F,x.UX,V.o,H.u,Q.P,U.t,Z,j.h,K.G,I.X0.forChild({types:[{name:"facility-fee-schedule-select",component:G1,wrappers:["form-field"]},{name:"facility-fee-schedule-grid",component:U1}]})]}),s})(),j1=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[J1]}),s})();var no=ae(32944);function z1(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close.emit())})("formIsReady",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.favoriteProvider)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let Rl=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"favoriteProvider_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.favoriteProvider=i.item})):t.formName&&t.formName.currentValue&&"favoriteProvider_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadFavoriteProviderEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.favoriteProvider=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(no.m),e.Y36(A.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-favorite-provider-form"]],inputs:{favoriteProvider:"favoriteProvider",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,z1,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[w.O5,z.M,w.Ov],encapsulation:2}),s})(),Vl=(()=>{class s{constructor(){this.autoHeight=!1,this.favoriteProviders=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[{field:"clinicalProvider.name",headerName:"Clinical Provider",filter:"agTextColumnFilter"},{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{field:"clinicalProviderId",filter:"agTextColumnFilter",hide:!0},{field:"userId",filter:"agTextColumnFilter",hide:!0},{field:"specialtyId",filter:"agTextColumnFilter",hide:!0}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var r;t.includes(null===(r=i.data)||void 0===r?void 0:r.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-favorite-provider-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(N.x,5),2&t){let r;e.iGM(r=e.CRH())&&(i.tableView=r.first)}},inputs:{autoHeight:"autoHeight",favoriteProviders:"favoriteProviders"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.favoriteProviders)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[N.x],encapsulation:2}),s})();function q1(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-favorite-provider-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","favoriteProvider_edit")("formControl",t.formControl)("favoriteProvider",t.favoriteProvider)}}const H1=function(){return{}};function K1(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-favorite-provider-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","favoriteProvider_create")("formControl",t.formControl)("favoriteProvider",e.DdM(3,H1))}}function k1(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-favorite-provider-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(u.ref.close())}),e.qZA()}2&s&&e.Q6J("favoriteProviders",o.data.items)}let Z1=(()=>{class s extends I.fS{constructor(t){super(),this.store=t,this.store.loadFavoriteProvidersEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.favoriteProviders$.pipe((0,h.w)(i=>(0,T.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(no.m))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","favoriteProvider","send","close"],[1,"w-full","h-full","bg-white",3,"favoriteProviders","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,q1,2,3,"ng-template",null,1,e.W1O),e.YNc(3,K1,1,4,"ng-template",null,2,e.W1O),e.YNc(5,k1,1,1,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",u)("editTemplate",r)("createTemplate",l)("key",i.field.key)}},dependencies:[x.JJ,x.oH,J.$,Rl,Vl],encapsulation:2}),s})();function B1(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-favorite-provider-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","favoriteProvider_edit")("favoriteProvider",t.value)}}const Y1=function(){return{}};function X1(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-favorite-provider-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","favoriteProvider_create")("favoriteProvider",e.DdM(2,Y1))}function eW(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-favorite-provider-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(null==u.ref?null:u.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("favoriteProviders",t.items)}}let tW=(()=>{class s extends Y{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","favoriteProvider","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","favoriteProviders","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,B1,1,2,"ng-template",null,1,e.W1O),e.YNc(3,X1,1,3,"ng-template",null,2,e.W1O),e.YNc(5,eW,1,2,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[ee,Rl,Vl],encapsulation:2}),s})(),iW=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[no.m],imports:[w.ez,R.F,x.UX,V.o,H.u,Q.P,U.t,Z,j.h,K.G,I.X0.forChild({types:[{name:"favorite-provider-select",component:Z1,wrappers:["form-field"]},{name:"favorite-provider-grid",component:tW}]})]}),s})(),sW=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[iW]}),s})();class zt extends y.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class oW extends zt{constructor(o,t,i){super("ValidateFeeScheduleExcelDataAction"),this.valid=!1,this.excelData=o,this.organizations=t,this.specialties=i}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name),this.validationContext.addRule(new f.mi(`organizationName_${i}_is_valid}`,"Organization Is Not Valid","organization.name",t.organization,this.organizations,!0)),this.validationContext.addRule(new f.mi(`specialtyName_${i}_is_valid}`,"Specialty Is Not Valid","specialty.name",t.specialty,this.specialties,!0))}),this.validationContext.addRule(new f.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof f.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(r=>r.name),newNames:[i.newName]}):i instanceof f.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,T.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class rW extends f.wS{constructor(o,t,i,r,l){super(o,t,i,r,l,!0)}}class aW extends f.ul{constructor(o,t,i,r=!1){super(o,t,r),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new f.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new rW("name","The feeschedule name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class nW extends zt{constructor(o){super("CreateFeeScheduleAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new aW("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateFeeSchedule({input:this.input}).pipe((0,h.w)(o=>(0,ie.of)(o.data.created)))}}class lW extends zt{constructor(o){super("UpdateFeeSchedulesAction"),this.feeSchedules=o}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.feeSchedules,!0))}performAction(){this.response=this.businessProvider.data.userUpdateFeeSchedules({input:{feeSchedules:this.feeSchedules}}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}class cW extends zt{constructor(o,t){super("UpdateFeeScheduleAction"),this.feeSchedule=o,this.feeScheduleId=t}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.feeSchedule,!0)).addRule(new f.xF("Id","Id should be a CUID and not null",this.feeScheduleId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateFeeSchedule({feeScheduleId:this.feeScheduleId,input:this.feeSchedule}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}let Ql=(()=>{class s extends y.nH{constructor(t,i,r){super("NotificationService.FeeScheduleBusinessProviderService",t,r),this.data=i}createFeeSchedule(t){const i=new nW(t);return i.Do(this),i.response}updateFeeSchedule(t,i){const r=new cW(t,i);return r.Do(this),r.response}importFeeSchedules(t){const i=new lW(t);return i.Do(this),i.response}validateFeeScheduleExcelData(t,i,r){const l=new oW(t,i,r);return l.Do(this),l.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(O.ed),e.LFG(E.q),e.LFG(y.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),dW=(()=>{class s extends y.nH{constructor(t,i,r){super("FeeScheduleService",r,t),this.businessProvider=i}createFeeSchedule(t){const i=Object.fromEntries(Object.entries(t).filter(([r,l])=>null!==l));return this.businessProvider.createFeeSchedule(i)}updateFeeSchedule(t,i){return this.businessProvider.updateFeeSchedule(t,i)}importFeeSchedules(t){return this.businessProvider.importFeeSchedules(t)}validateFeeScheduleExcelData(t,i,r){return this.businessProvider.validateFeeScheduleExcelData(t,i,r)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(Ql,8),e.LFG(Ql),e.LFG(O.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),lo=(()=>{class s extends g.m1{constructor(t,i,r,l,u,P){if(super({loading:!1,feeSchedules:[],done:!1,searchQuery:"",formName:void 0,organizationId:void 0,specialtyId:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=r,this.toast=l,this.formService=u,this.feeScheduleService=P,this.errors$=this.select(n=>n.errors),this.loading$=this.select(n=>n.loading),this.done$=this.select(n=>n.done),this.item$=this.select(n=>n.item),this.feeSchedules$=this.select(n=>n.feeSchedules),this.organizations$=this.select(n=>n.organizations||[]),this.specialties$=this.select(n=>n.specialties||[]),this.organizationId$=this.select(n=>n.organizationId),this.specialtyId$=this.select(n=>n.specialtyId),this.paging$=this.select(n=>n.paging),this.searchQuery$=this.select(n=>n.searchQuery),this.formName$=this.select(n=>n.formName),this.actionResult$=this.select(this.item$,this.done$,(n,a)=>({item:n,done:a}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.feeSchedules$,this.organizations$,this.specialties$,(n,a,m,p,_,v,D)=>({errors:n,loading:a,item:m,formName:p,feeSchedules:_,organizations:v,specialties:D}),{debounce:!0}),this.input$=this.select(this.paging$,this.organizationId$,this.specialtyId$,this.searchQuery$,(n,a,m,p)=>({limit:n.limit,skip:n.skip,name:p,organizationId:a,specialtyId:m,total:n.total})),this.setFormName=this.updater((n,a)=>Object.assign(Object.assign({},n),{formName:a})),this.setOrganizationId=this.updater((n,a)=>Object.assign(Object.assign({},n),{organizationId:a})),this.setSpecialtyId=this.updater((n,a)=>Object.assign(Object.assign({},n),{specialtyId:a})),this.filterOrganizations=n=>this.data.userSelectOrganizations({input:{name:n}}).pipe((0,g._b)(a=>{let m=a.data.items;return this.patchState({organizations:m}),m},a=>this.patchState({errors:a.graphQLErrors?a.graphQLErrors:a})),(0,B.U)(a=>a.data.items)),this.filterSpecialties=n=>this.data.userSelectSpecialties({input:{name:n}}).pipe((0,g._b)(a=>{let m=a.data.items;return this.patchState({specialties:m}),m},a=>this.patchState({errors:a.graphQLErrors?a.graphQLErrors:a})),(0,B.U)(a=>a.data.items)),this.addOrganization=this.updater((n,a)=>Object.assign(Object.assign({},n),{organizations:n.organizations.concat(a)})),this.addSpecialty=this.updater((n,a)=>Object.assign(Object.assign({},n),{specialties:n.specialties.concat(a)})),this.setItem=this.updater((n,a)=>Object.assign(Object.assign({},n),{item:a})),this.addNewFeeSchedule=this.updater((n,a)=>Object.assign(Object.assign({},n),{feeSchedules:[...n.feeSchedules,a]})),this.updateFeeSchedule=this.updater((n,a)=>Object.assign(Object.assign({},n),{feeSchedules:n.feeSchedules.map(m=>m.id===a.id?a:m)})),this.addFeeSchedules=this.updater((n,a)=>Object.assign(Object.assign({},n),{feeSchedules:n.feeSchedules.concat(a)})),this.updateFeeSchedules=this.updater((n,a)=>Object.assign(Object.assign({},n),{feeSchedules:n.feeSchedules.map(m=>a.find(_=>_.id===m.id)||m)})),this.setSearchQuery=this.updater((n,a)=>Object.assign(Object.assign({},n),{searchQuery:a})),this.loadFeeScheduleEffect=this.effect(n=>n.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(a=>this.data.userFeeSchedule({feeScheduleId:a}).pipe((0,g._b)(m=>{this.patchState({item:m.data.item,errors:m.errors,loading:!1})},m=>this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})))))),this.loadFeeSchedulesEffect=this.effect(n=>n.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.input$),(0,h.w)(([a,m])=>this.data.userFeeSchedules({input:m}).pipe((0,g._b)(p=>this.patchState({paging:{limit:m.limit,skip:m.skip,total:p.data.count.total},feeSchedules:p.data.items,errors:p.errors,loading:!1}),p=>this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})))))),this.createFeeScheduleEffect=this.effect(n=>n.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(a=>this.feeScheduleService.createFeeSchedule(Object.assign({},a)).pipe((0,g._b)(m=>{this.addNewFeeSchedule(m),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:m,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},m=>{m.graphQLErrors?(this.toast.error(m.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})):(this.toast.error(m.Message),this.formService.setErrors(m.Data))}))))),this.updateFeeScheduleEffect=this.effect(n=>n.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([a,m])=>this.feeScheduleService.updateFeeSchedule(a,a.id).pipe((0,g._b)(p=>{this.updateFeeSchedule(p),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:p,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},p=>{p.graphQLErrors?(this.toast.error(p.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})):(this.toast.error(p.Message),this.formService.setErrors(p.Data))}))))),this.deleteFeeScheduleEffect=this.effect(n=>n.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([a,m])=>this.data.userDeleteFeeSchedule({feeScheduleId:m.id}).pipe((0,g._b)(p=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:p.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},p=>{p.graphQLErrors?(this.toast.error(p.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})):(this.toast.error(p.Message),this.formService.setErrors(p.Data))}))))),this.importExcelEffect=this.effect(n=>n.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(a=>this.feeScheduleService.importFeeSchedules(a).pipe((0,te.K)(m=>{var p;return this.toast.error(null!==(p=m.Message)&&void 0!==p?p:"Failed to save",{duration:3e3}),k.E}),(0,C.b)(m=>{const p=JSON.parse(m.created),_=JSON.parse(m.updated),v=JSON.parse(m.failed),D=p.length+_.length+v.length;this.addFeeSchedules(p),this.updateFeeSchedules(_),this.toast.success(`${p.length} created, ${_.length} updated, ${v.length} failed of total ${D}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("feeScheduleId")?(this.route.snapshot.paramMap.get("feeScheduleId"),this.setFormName("feeSchedule_edit")):this.setFormName("feeSchedule_create"),this.route.snapshot.paramMap.has("organizationId")){var c=this.route.snapshot.paramMap.get("organizationId");this.setOrganizationId(c)}if(this.route.snapshot.paramMap.has("specialtyId")){var d=this.route.snapshot.paramMap.get("specialtyId");this.setSpecialtyId(d)}}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.feeScheduleService.validateFeeScheduleExcelData(t,i.organizations,i.specialties)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(E.q),e.LFG(A.F0),e.LFG(A.gz),e.LFG(X.F),e.LFG(q.o),e.LFG(dW))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function uW(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close.emit())})("formIsReady",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.feeSchedule)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let Ul=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"feeSchedule_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.feeSchedule=i.item})):t.formName&&t.formName.currentValue&&"feeSchedule_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadFeeScheduleEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.feeSchedule=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(lo),e.Y36(A.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-fee-schedule-form"]],inputs:{feeSchedule:"feeSchedule",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,uW,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[w.O5,z.M,w.Ov],encapsulation:2}),s})(),Jl=(()=>{class s{constructor(){this.autoHeight=!1,this.feeSchedules=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[{field:"organization.name",headerName:"Organization",filter:"agTextColumnFilter"},{field:"specialty.name",headerName:"Specialty",filter:"agTextColumnFilter"},{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{field:"organizationId",filter:"agTextColumnFilter",hide:!0},{field:"specialtyId",filter:"agTextColumnFilter",hide:!0},{field:"code",filter:"agTextColumnFilter"},{field:"modifier",filter:"agTextColumnFilter"},{field:"description",filter:"agTextColumnFilter"},{headerName:"Medicare Physician Non Facility Rate",field:"medicarePhysicianNonFacilityRate",valueFormatter:t=>{var i;return(0,S.oBD)(null===(i=t.data)||void 0===i?void 0:i.medicarePhysicianNonFacilityRate,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{headerName:"Physician Non Facility Fee",field:"physicianNonFacilityFee",valueFormatter:t=>{var i;return(0,S.oBD)(null===(i=t.data)||void 0===i?void 0:i.physicianNonFacilityFee,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{headerName:"Medicare Physician Facility Rate",field:"medicarePhysicianFacilityRate",valueFormatter:t=>{var i;return(0,S.oBD)(null===(i=t.data)||void 0===i?void 0:i.medicarePhysicianFacilityRate,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{headerName:"Physician Facility Fee",field:"physicianFacilityFee",valueFormatter:t=>{var i;return(0,S.oBD)(null===(i=t.data)||void 0===i?void 0:i.physicianFacilityFee,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{field:"baseUnit",filter:"agTextColumnFilter"},{field:"profCf",filter:"agTextColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var r;t.includes(null===(r=i.data)||void 0===r?void 0:r.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-fee-schedule-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(N.x,5),2&t){let r;e.iGM(r=e.CRH())&&(i.tableView=r.first)}},inputs:{autoHeight:"autoHeight",feeSchedules:"feeSchedules"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.feeSchedules)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[N.x],encapsulation:2}),s})();function mW(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-fee-schedule-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","feeSchedule_edit")("formControl",t.formControl)("feeSchedule",t.feeSchedule)}}const pW=function(){return{}};function hW(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-fee-schedule-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","feeSchedule_create")("formControl",t.formControl)("feeSchedule",e.DdM(3,pW))}}function fW(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-fee-schedule-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(u.ref.close())}),e.qZA()}2&s&&e.Q6J("feeSchedules",o.data.items)}let _W=(()=>{class s extends I.fS{constructor(t){super(),this.store=t,this.store.loadFeeSchedulesEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.feeSchedules$.pipe((0,h.w)(i=>(0,T.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(lo))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","feeSchedule","send","close"],[1,"w-full","h-full","bg-white",3,"feeSchedules","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,mW,2,3,"ng-template",null,1,e.W1O),e.YNc(3,hW,1,4,"ng-template",null,2,e.W1O),e.YNc(5,fW,1,1,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",u)("editTemplate",r)("createTemplate",l)("key",i.field.key)}},dependencies:[x.JJ,x.oH,J.$,Ul,Jl],encapsulation:2}),s})();function gW(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-fee-schedule-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","feeSchedule_edit")("feeSchedule",t.value)}}const CW=function(){return{}};function SW(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-fee-schedule-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","feeSchedule_create")("feeSchedule",e.DdM(2,CW))}function vW(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-fee-schedule-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(null==u.ref?null:u.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("feeSchedules",t.items)}}let bW=(()=>{class s extends Y{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","feeSchedule","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","feeSchedules","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,gW,1,2,"ng-template",null,1,e.W1O),e.YNc(3,SW,1,3,"ng-template",null,2,e.W1O),e.YNc(5,vW,1,2,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[ee,Ul,Jl],encapsulation:2}),s})(),TW=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[lo],imports:[w.ez,R.F,x.UX,V.o,H.u,Q.P,U.t,Z,j.h,K.G,I.X0.forChild({types:[{name:"fee-schedule-select",component:_W,wrappers:["form-field"]},{name:"fee-schedule-grid",component:bW}]})]}),s})(),yW=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[TW]}),s})();class qt extends y.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class wW extends qt{constructor(o,t,i){super("ValidateFirmExcelDataAction"),this.valid=!1,this.excelData=o,this.firmStatuses=t,this.eulas=i}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name),this.validationContext.addRule(new f.mi(`firmStatusName_${i}_is_valid}`,"Firm Status Is Not Valid","firmStatus.name",t.firmStatus,this.firmStatuses,!0)),this.validationContext.addRule(new f.mi(`eulaName_${i}_is_valid}`,"Eula Is Not Valid","eula.name",t.eula,this.eulas,!0))}),this.validationContext.addRule(new f.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof f.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(r=>r.name),newNames:[i.newName]}):i instanceof f.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,T.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class xW extends f.wS{constructor(o,t,i,r,l){super(o,t,i,r,l,!0)}}class NW extends f.ul{constructor(o,t,i,r=!1){super(o,t,r),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new f.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new xW("name","The firm name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class AW extends qt{constructor(o){super("CreateFirmAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new NW("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateFirm({input:this.input}).pipe((0,h.w)(o=>(0,ie.of)(o.data.created)))}}class FW extends qt{constructor(o){super("UpdateFirmsAction"),this.firms=o}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.firms,!0))}performAction(){this.response=this.businessProvider.data.userUpdateFirms({input:{firms:this.firms}}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}class DW extends qt{constructor(o,t){super("UpdateFirmAction"),this.firm=o,this.firmId=t}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.firm,!0)).addRule(new f.xF("Id","Id should be a CUID and not null",this.firmId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateFirm({firmId:this.firmId,input:this.firm}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}let jl=(()=>{class s extends y.nH{constructor(t,i,r){super("NotificationService.FirmBusinessProviderService",t,r),this.data=i}createFirm(t){const i=new AW(t);return i.Do(this),i.response}updateFirm(t,i){const r=new DW(t,i);return r.Do(this),r.response}importFirms(t){const i=new FW(t);return i.Do(this),i.response}validateFirmExcelData(t,i,r){const l=new wW(t,i,r);return l.Do(this),l.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(O.ed),e.LFG(E.q),e.LFG(y.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),IW=(()=>{class s extends y.nH{constructor(t,i,r){super("FirmService",r,t),this.businessProvider=i}createFirm(t){var i,r,l,u,P,b;t.firmStatusNote=(null===(i=t.firmStatusNote)||void 0===i?void 0:i.length)>1e3?null===(r=t.firmStatusNote)||void 0===r?void 0:r.substring(0,999):t.firmStatusNote,t.reductionNotes=(null===(l=t.reductionNotes)||void 0===l?void 0:l.length)>1e3?null===(u=t.reductionNotes)||void 0===u?void 0:u.substring(0,999):t.reductionNotes,t.notes=(null===(P=t.notes)||void 0===P?void 0:P.length)>1e3?null===(b=t.notes)||void 0===b?void 0:b.substring(0,999):t.notes;const c=Object.fromEntries(Object.entries(t).filter(([d,n])=>null!==n));return this.businessProvider.createFirm(c)}updateFirm(t,i){var r,l,u,P,b,c;return t.firmStatusNote=(null===(r=t.firmStatusNote)||void 0===r?void 0:r.length)>1e3?null===(l=t.firmStatusNote)||void 0===l?void 0:l.substring(0,999):t.firmStatusNote,t.reductionNotes=(null===(u=t.reductionNotes)||void 0===u?void 0:u.length)>1e3?null===(P=t.reductionNotes)||void 0===P?void 0:P.substring(0,999):t.reductionNotes,t.notes=(null===(b=t.notes)||void 0===b?void 0:b.length)>1e3?null===(c=t.notes)||void 0===c?void 0:c.substring(0,999):t.notes,this.businessProvider.updateFirm(t,i)}importFirms(t){return this.businessProvider.importFirms(t)}validateFirmExcelData(t,i,r){return this.businessProvider.validateFirmExcelData(t,i,r)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(jl,8),e.LFG(jl),e.LFG(O.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),co=(()=>{class s extends g.m1{constructor(t,i,r,l,u,P){if(super({loading:!1,firms:[],done:!1,searchQuery:"",formName:void 0,firmStatusId:void 0,eulaId:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=r,this.toast=l,this.formService=u,this.firmService=P,this.errors$=this.select(n=>n.errors),this.loading$=this.select(n=>n.loading),this.done$=this.select(n=>n.done),this.item$=this.select(n=>n.item),this.firms$=this.select(n=>n.firms),this.firmStatuses$=this.select(n=>n.firmStatuses||[]),this.documents$=this.select(n=>n.documents||[]),this.firmStatusId$=this.select(n=>n.firmStatusId),this.eulaId$=this.select(n=>n.eulaId),this.paging$=this.select(n=>n.paging),this.searchQuery$=this.select(n=>n.searchQuery),this.formName$=this.select(n=>n.formName),this.actionResult$=this.select(this.item$,this.done$,(n,a)=>({item:n,done:a}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.firms$,this.firmStatuses$,this.documents$,(n,a,m,p,_,v,D)=>({errors:n,loading:a,item:m,formName:p,firms:_,firmStatuses:v,documents:D}),{debounce:!0}),this.input$=this.select(this.paging$,this.firmStatusId$,this.eulaId$,this.searchQuery$,(n,a,m,p)=>({limit:n.limit,skip:n.skip,name:p,firmStatusId:a,eulaId:m,total:n.total})),this.setFormName=this.updater((n,a)=>Object.assign(Object.assign({},n),{formName:a})),this.setFirmStatusId=this.updater((n,a)=>Object.assign(Object.assign({},n),{firmStatusId:a})),this.setEulaId=this.updater((n,a)=>Object.assign(Object.assign({},n),{eulaId:a})),this.filterFirmStatuses=n=>this.data.userSelectFirmStatuses({input:{name:n}}).pipe((0,g._b)(a=>{let m=a.data.items;return this.patchState({firmStatuses:m}),m},a=>this.patchState({errors:a.graphQLErrors?a.graphQLErrors:a})),(0,B.U)(a=>a.data.items)),this.filterDocuments=n=>this.data.userSelectDocuments({input:{name:n}}).pipe((0,g._b)(a=>{let m=a.data.items;return this.patchState({documents:m}),m},a=>this.patchState({errors:a.graphQLErrors?a.graphQLErrors:a})),(0,B.U)(a=>a.data.items)),this.addFirmStatus=this.updater((n,a)=>Object.assign(Object.assign({},n),{firmStatuses:n.firmStatuses.concat(a)})),this.addDocument=this.updater((n,a)=>Object.assign(Object.assign({},n),{documents:n.documents.concat(a)})),this.setItem=this.updater((n,a)=>Object.assign(Object.assign({},n),{item:a})),this.addNewFirm=this.updater((n,a)=>Object.assign(Object.assign({},n),{firms:[...n.firms,a]})),this.updateFirm=this.updater((n,a)=>Object.assign(Object.assign({},n),{firms:n.firms.map(m=>m.id===a.id?a:m)})),this.addFirms=this.updater((n,a)=>Object.assign(Object.assign({},n),{firms:n.firms.concat(a)})),this.updateFirms=this.updater((n,a)=>Object.assign(Object.assign({},n),{firms:n.firms.map(m=>a.find(_=>_.id===m.id)||m)})),this.setSearchQuery=this.updater((n,a)=>Object.assign(Object.assign({},n),{searchQuery:a})),this.loadFirmEffect=this.effect(n=>n.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(a=>this.data.userFirm({firmId:a}).pipe((0,g._b)(m=>{this.patchState({item:m.data.item,errors:m.errors,loading:!1})},m=>this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})))))),this.loadFirmsEffect=this.effect(n=>n.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.input$),(0,h.w)(([a,m])=>this.data.userFirms({input:m}).pipe((0,g._b)(p=>this.patchState({paging:{limit:m.limit,skip:m.skip,total:p.data.count.total},firms:p.data.items,errors:p.errors,loading:!1}),p=>this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})))))),this.createFirmEffect=this.effect(n=>n.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(a=>this.firmService.createFirm(Object.assign({},a)).pipe((0,g._b)(m=>{this.addNewFirm(m),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:m,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},m=>{m.graphQLErrors?(this.toast.error(m.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})):(this.toast.error(m.Message),this.formService.setErrors(m.Data))}))))),this.updateFirmEffect=this.effect(n=>n.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([a,m])=>this.firmService.updateFirm(a,a.id).pipe((0,g._b)(p=>{this.updateFirm(p),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:p,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},p=>{p.graphQLErrors?(this.toast.error(p.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})):(this.toast.error(p.Message),this.formService.setErrors(p.Data))}))))),this.deleteFirmEffect=this.effect(n=>n.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([a,m])=>this.data.userDeleteFirm({firmId:m.id}).pipe((0,g._b)(p=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:p.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},p=>{p.graphQLErrors?(this.toast.error(p.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})):(this.toast.error(p.Message),this.formService.setErrors(p.Data))}))))),this.importExcelEffect=this.effect(n=>n.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(a=>this.firmService.importFirms(a).pipe((0,te.K)(m=>{var p;return this.toast.error(null!==(p=m.Message)&&void 0!==p?p:"Failed to save",{duration:3e3}),k.E}),(0,C.b)(m=>{const p=JSON.parse(m.created),_=JSON.parse(m.updated),v=JSON.parse(m.failed),D=p.length+_.length+v.length;this.addFirms(p),this.updateFirms(_),this.toast.success(`${p.length} created, ${_.length} updated, ${v.length} failed of total ${D}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("firmId")?(this.route.snapshot.paramMap.get("firmId"),this.setFormName("firm_edit")):this.setFormName("firm_create"),this.route.snapshot.paramMap.has("firmStatusId")){var c=this.route.snapshot.paramMap.get("firmStatusId");this.setFirmStatusId(c)}if(this.route.snapshot.paramMap.has("eulaId")){var d=this.route.snapshot.paramMap.get("eulaId");this.setEulaId(d)}}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.firmService.validateFirmExcelData(t,i.firmStatuses,i.documents)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(E.q),e.LFG(A.F0),e.LFG(A.gz),e.LFG(X.F),e.LFG(q.o),e.LFG(IW))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function PW(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close.emit())})("formIsReady",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.firm)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let zl=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"firm_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.firm=i.item})):t.formName&&t.formName.currentValue&&"firm_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadFirmEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.firm=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(co),e.Y36(A.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-firm-form"]],inputs:{firm:"firm",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,PW,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[w.O5,z.M,w.Ov],encapsulation:2}),s})(),ql=(()=>{class s{constructor(){this.autoHeight=!1,this.firms=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[{field:"firmStatus.name",headerName:"Firm Status",filter:"agTextColumnFilter"},{field:"eula.name",headerName:"Eula",filter:"agTextColumnFilter"},{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{field:"firmStatusNote",filter:"agTextColumnFilter"},{field:"firmStatusId",filter:"agTextColumnFilter",hide:!0},{field:"firmName",filter:"agTextColumnFilter"},{field:"address",filter:"agTextColumnFilter"},{field:"address2",filter:"agTextColumnFilter"},{field:"city",filter:"agTextColumnFilter"},{field:"state",filter:"agTextColumnFilter"},{field:"zip",filter:"agTextColumnFilter"},{field:"country",filter:"agTextColumnFilter"},{field:"office",filter:"agTextColumnFilter"},{field:"fax",filter:"agTextColumnFilter"},{field:"webAddress",filter:"agTextColumnFilter"},{field:"email",filter:"agTextColumnFilter"},{headerName:"Rating",field:"rating",valueFormatter:t=>{var i;return(0,S.oBD)(null===(i=t.data)||void 0===i?void 0:i.rating,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{field:"notes",filter:"agTextColumnFilter"},{headerName:"Do Not Disturb",field:"doNotDisturb",filter:"agSetColumnFilter",cellRenderer:"checkboxRenderer"},{headerName:"Invoice Only",field:"invoiceOnly",filter:"agSetColumnFilter",cellRenderer:"checkboxRenderer"},{field:"reductionNotes",filter:"agTextColumnFilter"},{headerName:"Deceased",field:"deceased",filter:"agSetColumnFilter",cellRenderer:"checkboxRenderer"},{field:"createdBy",filter:"agTextColumnFilter"},{field:"dateCreated",filter:"agDateColumnFilter"},{field:"eulaId",filter:"agTextColumnFilter",hide:!0}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var r;t.includes(null===(r=i.data)||void 0===r?void 0:r.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-firm-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(N.x,5),2&t){let r;e.iGM(r=e.CRH())&&(i.tableView=r.first)}},inputs:{autoHeight:"autoHeight",firms:"firms"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.firms)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[N.x],encapsulation:2}),s})();function WW(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-firm-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","firm_edit")("formControl",t.formControl)("firm",t.firm)}}const MW=function(){return{}};function EW(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-firm-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","firm_create")("formControl",t.formControl)("firm",e.DdM(3,MW))}}function OW(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-firm-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(u.ref.close())}),e.qZA()}2&s&&e.Q6J("firms",o.data.items)}let LW=(()=>{class s extends I.fS{constructor(t){super(),this.store=t,this.store.loadFirmsEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.firms$.pipe((0,h.w)(i=>(0,T.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(co))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","firm","send","close"],[1,"w-full","h-full","bg-white",3,"firms","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,WW,2,3,"ng-template",null,1,e.W1O),e.YNc(3,EW,1,4,"ng-template",null,2,e.W1O),e.YNc(5,OW,1,1,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",u)("editTemplate",r)("createTemplate",l)("key",i.field.key)}},dependencies:[x.JJ,x.oH,J.$,zl,ql],encapsulation:2}),s})();function GW(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-firm-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","firm_edit")("firm",t.value)}}const $W=function(){return{}};function RW(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-firm-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","firm_create")("firm",e.DdM(2,$W))}function VW(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-firm-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(null==u.ref?null:u.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("firms",t.items)}}let QW=(()=>{class s extends Y{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","firm","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","firms","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,GW,1,2,"ng-template",null,1,e.W1O),e.YNc(3,RW,1,3,"ng-template",null,2,e.W1O),e.YNc(5,VW,1,2,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[ee,zl,ql],encapsulation:2}),s})(),UW=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[co],imports:[w.ez,R.F,x.UX,V.o,H.u,Q.P,U.t,Z,j.h,K.G,I.X0.forChild({types:[{name:"firm-select",component:LW,wrappers:["form-field"]},{name:"firm-grid",component:QW}]})]}),s})(),JW=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[UW]}),s})();class Ht extends y.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class jW extends Ht{constructor(o){super("ValidateFirmStatusExcelDataAction"),this.valid=!1,this.excelData=o}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name)}),this.validationContext.addRule(new f.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof f.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(r=>r.name),newNames:[i.newName]}):i instanceof f.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,T.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class zW extends f.wS{constructor(o,t,i,r,l){super(o,t,i,r,l,!0)}}class qW extends f.ul{constructor(o,t,i,r=!1){super(o,t,r),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new f.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new zW("name","The firmstatus name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class HW extends Ht{constructor(o){super("CreateFirmStatusAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new qW("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateFirmStatus({input:this.input}).pipe((0,h.w)(o=>(0,ie.of)(o.data.created)))}}class KW extends Ht{constructor(o){super("UpdateFirmStatusesAction"),this.firmStatuses=o}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.firmStatuses,!0))}performAction(){this.response=this.businessProvider.data.userUpdateFirmStatuses({input:{firmStatuses:this.firmStatuses}}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}class kW extends Ht{constructor(o,t){super("UpdateFirmStatusAction"),this.firmStatus=o,this.firmStatusId=t}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.firmStatus,!0)).addRule(new f.xF("Id","Id should be a CUID and not null",this.firmStatusId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateFirmStatus({firmStatusId:this.firmStatusId,input:this.firmStatus}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}let Hl=(()=>{class s extends y.nH{constructor(t,i,r){super("NotificationService.FirmStatusBusinessProviderService",t,r),this.data=i}createFirmStatus(t){const i=new HW(t);return i.Do(this),i.response}updateFirmStatus(t,i){const r=new kW(t,i);return r.Do(this),r.response}importFirmStatuses(t){const i=new KW(t);return i.Do(this),i.response}validateFirmStatusExcelData(t){const i=new jW(t);return i.Do(this),i.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(O.ed),e.LFG(E.q),e.LFG(y.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),ZW=(()=>{class s extends y.nH{constructor(t,i,r){super("FirmStatusService",r,t),this.businessProvider=i}createFirmStatus(t){var i,r;t.name=(null===(i=t.name)||void 0===i?void 0:i.length)>256?null===(r=t.name)||void 0===r?void 0:r.substring(0,255):t.name;const l=Object.fromEntries(Object.entries(t).filter(([u,P])=>null!==P));return this.businessProvider.createFirmStatus(l)}updateFirmStatus(t,i){var r,l;return t.name=(null===(r=t.name)||void 0===r?void 0:r.length)>256?null===(l=t.name)||void 0===l?void 0:l.substring(0,255):t.name,this.businessProvider.updateFirmStatus(t,i)}importFirmStatuses(t){return this.businessProvider.importFirmStatuses(t)}validateFirmStatusExcelData(t){return this.businessProvider.validateFirmStatusExcelData(t)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(Hl,8),e.LFG(Hl),e.LFG(O.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),uo=(()=>{class s extends g.m1{constructor(t,i,r,l,u,P){super({loading:!1,firmStatuses:[],done:!1,searchQuery:"",formName:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=r,this.toast=l,this.formService=u,this.firmStatusService=P,this.errors$=this.select(c=>c.errors),this.loading$=this.select(c=>c.loading),this.done$=this.select(c=>c.done),this.item$=this.select(c=>c.item),this.firmStatuses$=this.select(c=>c.firmStatuses),this.paging$=this.select(c=>c.paging),this.searchQuery$=this.select(c=>c.searchQuery),this.formName$=this.select(c=>c.formName),this.actionResult$=this.select(this.item$,this.done$,(c,d)=>({item:c,done:d}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.firmStatuses$,(c,d,n,a,m)=>({errors:c,loading:d,item:n,formName:a,firmStatuses:m}),{debounce:!0}),this.input$=this.select(this.paging$,this.searchQuery$,(c,d)=>({limit:c.limit,skip:c.skip,name:d,total:c.total})),this.setFormName=this.updater((c,d)=>Object.assign(Object.assign({},c),{formName:d})),this.setItem=this.updater((c,d)=>Object.assign(Object.assign({},c),{item:d})),this.addNewFirmStatus=this.updater((c,d)=>Object.assign(Object.assign({},c),{firmStatuses:[...c.firmStatuses,d]})),this.updateFirmStatus=this.updater((c,d)=>Object.assign(Object.assign({},c),{firmStatuses:c.firmStatuses.map(n=>n.id===d.id?d:n)})),this.addFirmStatuses=this.updater((c,d)=>Object.assign(Object.assign({},c),{firmStatuses:c.firmStatuses.concat(d)})),this.updateFirmStatuses=this.updater((c,d)=>Object.assign(Object.assign({},c),{firmStatuses:c.firmStatuses.map(n=>d.find(m=>m.id===n.id)||n)})),this.setSearchQuery=this.updater((c,d)=>Object.assign(Object.assign({},c),{searchQuery:d})),this.loadFirmStatusEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.data.userFirmStatus({firmStatusId:d}).pipe((0,g._b)(n=>{this.patchState({item:n.data.item,errors:n.errors,loading:!1})},n=>this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})))))),this.loadFirmStatusesEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.input$),(0,h.w)(([d,n])=>this.data.userFirmStatuses({input:n}).pipe((0,g._b)(a=>this.patchState({paging:{limit:n.limit,skip:n.skip,total:a.data.count.total},firmStatuses:a.data.items,errors:a.errors,loading:!1}),a=>this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})))))),this.createFirmStatusEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.firmStatusService.createFirmStatus(Object.assign({},d)).pipe((0,g._b)(n=>{this.addNewFirmStatus(n),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:n,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},n=>{n.graphQLErrors?(this.toast.error(n.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})):(this.toast.error(n.Message),this.formService.setErrors(n.Data))}))))),this.updateFirmStatusEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([d,n])=>this.firmStatusService.updateFirmStatus(d,d.id).pipe((0,g._b)(a=>{this.updateFirmStatus(a),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:a,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.deleteFirmStatusEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([d,n])=>this.data.userDeleteFirmStatus({firmStatusId:n.id}).pipe((0,g._b)(a=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:a.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.importExcelEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.firmStatusService.importFirmStatuses(d).pipe((0,te.K)(n=>{var a;return this.toast.error(null!==(a=n.Message)&&void 0!==a?a:"Failed to save",{duration:3e3}),k.E}),(0,C.b)(n=>{const a=JSON.parse(n.created),m=JSON.parse(n.updated),p=JSON.parse(n.failed),_=a.length+m.length+p.length;this.addFirmStatuses(a),this.updateFirmStatuses(m),this.toast.success(`${a.length} created, ${m.length} updated, ${p.length} failed of total ${_}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("firmStatusId")?(this.route.snapshot.paramMap.get("firmStatusId"),this.setFormName("firmStatus_edit")):this.setFormName("firmStatus_create")}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.firmStatusService.validateFirmStatusExcelData(t)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(E.q),e.LFG(A.F0),e.LFG(A.gz),e.LFG(X.F),e.LFG(q.o),e.LFG(ZW))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function BW(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close.emit())})("formIsReady",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.firmStatus)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let Kl=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"firmStatus_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.firmStatus=i.item})):t.formName&&t.formName.currentValue&&"firmStatus_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadFirmStatusEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.firmStatus=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(uo),e.Y36(A.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-firm-status-form"]],inputs:{firmStatus:"firmStatus",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,BW,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[w.O5,z.M,w.Ov],encapsulation:2}),s})(),kl=(()=>{class s{constructor(){this.autoHeight=!1,this.firmStatuses=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[,{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{headerName:"Black Listed",field:"blackListed",filter:"agSetColumnFilter",cellRenderer:"checkboxRenderer"},{headerName:"Active",field:"active",filter:"agSetColumnFilter",cellRenderer:"checkboxRenderer"},{field:"statusColor",filter:"agTextColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var r;t.includes(null===(r=i.data)||void 0===r?void 0:r.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-firm-status-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(N.x,5),2&t){let r;e.iGM(r=e.CRH())&&(i.tableView=r.first)}},inputs:{autoHeight:"autoHeight",firmStatuses:"firmStatuses"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.firmStatuses)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[N.x],encapsulation:2}),s})();function YW(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-firm-status-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","firmStatus_edit")("formControl",t.formControl)("firmStatus",t.firmStatus)}}const XW=function(){return{}};function eM(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-firm-status-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","firmStatus_create")("formControl",t.formControl)("firmStatus",e.DdM(3,XW))}}function tM(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-firm-status-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(u.ref.close())}),e.qZA()}2&s&&e.Q6J("firmStatuses",o.data.items)}let iM=(()=>{class s extends I.fS{constructor(t){super(),this.store=t,this.store.loadFirmStatusesEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.firmStatuses$.pipe((0,h.w)(i=>(0,T.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(uo))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","firmStatus","send","close"],[1,"w-full","h-full","bg-white",3,"firmStatuses","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,YW,2,3,"ng-template",null,1,e.W1O),e.YNc(3,eM,1,4,"ng-template",null,2,e.W1O),e.YNc(5,tM,1,1,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",u)("editTemplate",r)("createTemplate",l)("key",i.field.key)}},dependencies:[x.JJ,x.oH,J.$,Kl,kl],encapsulation:2}),s})();function sM(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-firm-status-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","firmStatus_edit")("firmStatus",t.value)}}const oM=function(){return{}};function rM(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-firm-status-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","firmStatus_create")("firmStatus",e.DdM(2,oM))}function aM(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-firm-status-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(null==u.ref?null:u.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("firmStatuses",t.items)}}let nM=(()=>{class s extends Y{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","firmStatus","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","firmStatuses","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,sM,1,2,"ng-template",null,1,e.W1O),e.YNc(3,rM,1,3,"ng-template",null,2,e.W1O),e.YNc(5,aM,1,2,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[ee,Kl,kl],encapsulation:2}),s})(),lM=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[uo],imports:[w.ez,R.F,x.UX,V.o,H.u,Q.P,U.t,Z,j.h,K.G,I.X0.forChild({types:[{name:"firm-status-select",component:iM,wrappers:["form-field"]},{name:"firm-status-grid",component:nM}]})]}),s})(),cM=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[lM]}),s})();var mo=ae(28816);function dM(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close.emit())})("formIsReady",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.gender)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let Zl=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"gender_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.gender=i.item})):t.formName&&t.formName.currentValue&&"gender_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadGenderEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.gender=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(mo._),e.Y36(A.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-gender-form"]],inputs:{gender:"gender",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,dM,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[w.O5,z.M,w.Ov],encapsulation:2}),s})(),Bl=(()=>{class s{constructor(){this.autoHeight=!1,this.genders=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[,{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{field:"code",filter:"agTextColumnFilter"},{headerName:"Value",field:"value",valueFormatter:t=>{var i;return(0,S.oBD)(null===(i=t.data)||void 0===i?void 0:i.value,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var r;t.includes(null===(r=i.data)||void 0===r?void 0:r.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-gender-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(N.x,5),2&t){let r;e.iGM(r=e.CRH())&&(i.tableView=r.first)}},inputs:{autoHeight:"autoHeight",genders:"genders"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.genders)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[N.x],encapsulation:2}),s})();function uM(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-gender-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","gender_edit")("formControl",t.formControl)("gender",t.gender)}}const mM=function(){return{}};function pM(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-gender-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","gender_create")("formControl",t.formControl)("gender",e.DdM(3,mM))}}function hM(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-gender-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(u.ref.close())}),e.qZA()}2&s&&e.Q6J("genders",o.data.items)}let fM=(()=>{class s extends I.fS{constructor(t){super(),this.store=t,this.store.loadGendersEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.genders$.pipe((0,h.w)(i=>(0,T.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(mo._))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","gender","send","close"],[1,"w-full","h-full","bg-white",3,"genders","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,uM,2,3,"ng-template",null,1,e.W1O),e.YNc(3,pM,1,4,"ng-template",null,2,e.W1O),e.YNc(5,hM,1,1,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",u)("editTemplate",r)("createTemplate",l)("key",i.field.key)}},dependencies:[x.JJ,x.oH,J.$,Zl,Bl],encapsulation:2}),s})();function _M(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-gender-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","gender_edit")("gender",t.value)}}const gM=function(){return{}};function CM(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-gender-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","gender_create")("gender",e.DdM(2,gM))}function SM(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-gender-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(null==u.ref?null:u.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("genders",t.items)}}let vM=(()=>{class s extends Y{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","gender","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","genders","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,_M,1,2,"ng-template",null,1,e.W1O),e.YNc(3,CM,1,3,"ng-template",null,2,e.W1O),e.YNc(5,SM,1,2,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[ee,Zl,Bl],encapsulation:2}),s})(),bM=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[mo._],imports:[w.ez,R.F,x.UX,V.o,H.u,Q.P,U.t,Z,j.h,K.G,I.X0.forChild({types:[{name:"gender-select",component:fM,wrappers:["form-field"]},{name:"gender-grid",component:vM}]})]}),s})(),TM=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[bM]}),s})();class Kt extends y.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class yM extends Kt{constructor(o){super("ValidateGuidelineExcelDataAction"),this.valid=!1,this.excelData=o}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name)}),this.validationContext.addRule(new f.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof f.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(r=>r.name),newNames:[i.newName]}):i instanceof f.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,T.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class wM extends f.wS{constructor(o,t,i,r,l){super(o,t,i,r,l,!0)}}class xM extends f.ul{constructor(o,t,i,r=!1){super(o,t,r),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new f.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new wM("name","The guideline name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class NM extends Kt{constructor(o){super("CreateGuidelineAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new xM("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateGuideline({input:this.input}).pipe((0,h.w)(o=>(0,ie.of)(o.data.created)))}}class AM extends Kt{constructor(o){super("UpdateGuidelinesAction"),this.guidelines=o}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.guidelines,!0))}performAction(){this.response=this.businessProvider.data.userUpdateGuidelines({input:{guidelines:this.guidelines}}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}class FM extends Kt{constructor(o,t){super("UpdateGuidelineAction"),this.guideline=o,this.guidelineId=t}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.guideline,!0)).addRule(new f.xF("Id","Id should be a CUID and not null",this.guidelineId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateGuideline({guidelineId:this.guidelineId,input:this.guideline}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}let Yl=(()=>{class s extends y.nH{constructor(t,i,r){super("NotificationService.GuidelineBusinessProviderService",t,r),this.data=i}createGuideline(t){const i=new NM(t);return i.Do(this),i.response}updateGuideline(t,i){const r=new FM(t,i);return r.Do(this),r.response}importGuidelines(t){const i=new AM(t);return i.Do(this),i.response}validateGuidelineExcelData(t){const i=new yM(t);return i.Do(this),i.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(O.ed),e.LFG(E.q),e.LFG(y.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),DM=(()=>{class s extends y.nH{constructor(t,i,r){super("GuidelineService",r,t),this.businessProvider=i}createGuideline(t){const i=Object.fromEntries(Object.entries(t).filter(([r,l])=>null!==l));return this.businessProvider.createGuideline(i)}updateGuideline(t,i){return this.businessProvider.updateGuideline(t,i)}importGuidelines(t){return this.businessProvider.importGuidelines(t)}validateGuidelineExcelData(t){return this.businessProvider.validateGuidelineExcelData(t)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(Yl,8),e.LFG(Yl),e.LFG(O.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),po=(()=>{class s extends g.m1{constructor(t,i,r,l,u,P){super({loading:!1,guidelines:[],done:!1,searchQuery:"",formName:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=r,this.toast=l,this.formService=u,this.guidelineService=P,this.errors$=this.select(c=>c.errors),this.loading$=this.select(c=>c.loading),this.done$=this.select(c=>c.done),this.item$=this.select(c=>c.item),this.guidelines$=this.select(c=>c.guidelines),this.paging$=this.select(c=>c.paging),this.searchQuery$=this.select(c=>c.searchQuery),this.formName$=this.select(c=>c.formName),this.actionResult$=this.select(this.item$,this.done$,(c,d)=>({item:c,done:d}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.guidelines$,(c,d,n,a,m)=>({errors:c,loading:d,item:n,formName:a,guidelines:m}),{debounce:!0}),this.input$=this.select(this.paging$,this.searchQuery$,(c,d)=>({limit:c.limit,skip:c.skip,name:d,total:c.total})),this.setFormName=this.updater((c,d)=>Object.assign(Object.assign({},c),{formName:d})),this.setItem=this.updater((c,d)=>Object.assign(Object.assign({},c),{item:d})),this.addNewGuideline=this.updater((c,d)=>Object.assign(Object.assign({},c),{guidelines:[...c.guidelines,d]})),this.updateGuideline=this.updater((c,d)=>Object.assign(Object.assign({},c),{guidelines:c.guidelines.map(n=>n.id===d.id?d:n)})),this.addGuidelines=this.updater((c,d)=>Object.assign(Object.assign({},c),{guidelines:c.guidelines.concat(d)})),this.updateGuidelines=this.updater((c,d)=>Object.assign(Object.assign({},c),{guidelines:c.guidelines.map(n=>d.find(m=>m.id===n.id)||n)})),this.setSearchQuery=this.updater((c,d)=>Object.assign(Object.assign({},c),{searchQuery:d})),this.loadGuidelineEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.data.userGuideline({guidelineId:d}).pipe((0,g._b)(n=>{this.patchState({item:n.data.item,errors:n.errors,loading:!1})},n=>this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})))))),this.loadGuidelinesEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.input$),(0,h.w)(([d,n])=>this.data.userGuidelines({input:n}).pipe((0,g._b)(a=>this.patchState({paging:{limit:n.limit,skip:n.skip,total:a.data.count.total},guidelines:a.data.items,errors:a.errors,loading:!1}),a=>this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})))))),this.createGuidelineEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.guidelineService.createGuideline(Object.assign({},d)).pipe((0,g._b)(n=>{this.addNewGuideline(n),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:n,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},n=>{n.graphQLErrors?(this.toast.error(n.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})):(this.toast.error(n.Message),this.formService.setErrors(n.Data))}))))),this.updateGuidelineEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([d,n])=>this.guidelineService.updateGuideline(d,d.id).pipe((0,g._b)(a=>{this.updateGuideline(a),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:a,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.deleteGuidelineEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([d,n])=>this.data.userDeleteGuideline({guidelineId:n.id}).pipe((0,g._b)(a=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:a.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.importExcelEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.guidelineService.importGuidelines(d).pipe((0,te.K)(n=>{var a;return this.toast.error(null!==(a=n.Message)&&void 0!==a?a:"Failed to save",{duration:3e3}),k.E}),(0,C.b)(n=>{const a=JSON.parse(n.created),m=JSON.parse(n.updated),p=JSON.parse(n.failed),_=a.length+m.length+p.length;this.addGuidelines(a),this.updateGuidelines(m),this.toast.success(`${a.length} created, ${m.length} updated, ${p.length} failed of total ${_}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("guidelineId")?(this.route.snapshot.paramMap.get("guidelineId"),this.setFormName("guideline_edit")):this.setFormName("guideline_create")}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.guidelineService.validateGuidelineExcelData(t)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(E.q),e.LFG(A.F0),e.LFG(A.gz),e.LFG(X.F),e.LFG(q.o),e.LFG(DM))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function IM(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close.emit())})("formIsReady",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.guideline)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let Xl=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"guideline_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.guideline=i.item})):t.formName&&t.formName.currentValue&&"guideline_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadGuidelineEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.guideline=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(po),e.Y36(A.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-guideline-form"]],inputs:{guideline:"guideline",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,IM,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[w.O5,z.M,w.Ov],encapsulation:2}),s})(),ec=(()=>{class s{constructor(){this.autoHeight=!1,this.guidelines=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[,{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var r;t.includes(null===(r=i.data)||void 0===r?void 0:r.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-guideline-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(N.x,5),2&t){let r;e.iGM(r=e.CRH())&&(i.tableView=r.first)}},inputs:{autoHeight:"autoHeight",guidelines:"guidelines"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.guidelines)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[N.x],encapsulation:2}),s})();function PM(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-guideline-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","guideline_edit")("formControl",t.formControl)("guideline",t.guideline)}}const WM=function(){return{}};function MM(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-guideline-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","guideline_create")("formControl",t.formControl)("guideline",e.DdM(3,WM))}}function EM(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-guideline-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(u.ref.close())}),e.qZA()}2&s&&e.Q6J("guidelines",o.data.items)}let OM=(()=>{class s extends I.fS{constructor(t){super(),this.store=t,this.store.loadGuidelinesEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.guidelines$.pipe((0,h.w)(i=>(0,T.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(po))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","guideline","send","close"],[1,"w-full","h-full","bg-white",3,"guidelines","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,PM,2,3,"ng-template",null,1,e.W1O),e.YNc(3,MM,1,4,"ng-template",null,2,e.W1O),e.YNc(5,EM,1,1,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",u)("editTemplate",r)("createTemplate",l)("key",i.field.key)}},dependencies:[x.JJ,x.oH,J.$,Xl,ec],encapsulation:2}),s})();function LM(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-guideline-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","guideline_edit")("guideline",t.value)}}const GM=function(){return{}};function $M(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-guideline-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","guideline_create")("guideline",e.DdM(2,GM))}function RM(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-guideline-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(null==u.ref?null:u.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("guidelines",t.items)}}let VM=(()=>{class s extends Y{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","guideline","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","guidelines","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,LM,1,2,"ng-template",null,1,e.W1O),e.YNc(3,$M,1,3,"ng-template",null,2,e.W1O),e.YNc(5,RM,1,2,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[ee,Xl,ec],encapsulation:2}),s})(),QM=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[po],imports:[w.ez,R.F,x.UX,V.o,H.u,Q.P,U.t,Z,j.h,K.G,I.X0.forChild({types:[{name:"guideline-select",component:OM,wrappers:["form-field"]},{name:"guideline-grid",component:VM}]})]}),s})(),UM=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[QM]}),s})();class kt extends y.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class JM extends kt{constructor(o){super("ValidateGuidelineUsedExcelDataAction"),this.valid=!1,this.excelData=o}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name)}),this.validationContext.addRule(new f.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof f.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(r=>r.name),newNames:[i.newName]}):i instanceof f.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,T.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class jM extends f.wS{constructor(o,t,i,r,l){super(o,t,i,r,l,!0)}}class zM extends f.ul{constructor(o,t,i,r=!1){super(o,t,r),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new f.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new jM("name","The guidelineused name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class qM extends kt{constructor(o){super("CreateGuidelineUsedAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new zM("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateGuidelineUsed({input:this.input}).pipe((0,h.w)(o=>(0,ie.of)(o.data.created)))}}class HM extends kt{constructor(o){super("UpdateGuidelineUsedsAction"),this.guidelineUseds=o}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.guidelineUseds,!0))}performAction(){this.response=this.businessProvider.data.userUpdateGuidelineUseds({input:{guidelineUseds:this.guidelineUseds}}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}class KM extends kt{constructor(o,t){super("UpdateGuidelineUsedAction"),this.guidelineUsed=o,this.guidelineUsedId=t}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.guidelineUsed,!0)).addRule(new f.xF("Id","Id should be a CUID and not null",this.guidelineUsedId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateGuidelineUsed({guidelineUsedId:this.guidelineUsedId,input:this.guidelineUsed}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}let tc=(()=>{class s extends y.nH{constructor(t,i,r){super("NotificationService.GuidelineUsedBusinessProviderService",t,r),this.data=i}createGuidelineUsed(t){const i=new qM(t);return i.Do(this),i.response}updateGuidelineUsed(t,i){const r=new KM(t,i);return r.Do(this),r.response}importGuidelineUseds(t){const i=new HM(t);return i.Do(this),i.response}validateGuidelineUsedExcelData(t){const i=new JM(t);return i.Do(this),i.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(O.ed),e.LFG(E.q),e.LFG(y.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),kM=(()=>{class s extends y.nH{constructor(t,i,r){super("GuidelineUsedService",r,t),this.businessProvider=i}createGuidelineUsed(t){const i=Object.fromEntries(Object.entries(t).filter(([r,l])=>null!==l));return this.businessProvider.createGuidelineUsed(i)}updateGuidelineUsed(t,i){return this.businessProvider.updateGuidelineUsed(t,i)}importGuidelineUseds(t){return this.businessProvider.importGuidelineUseds(t)}validateGuidelineUsedExcelData(t){return this.businessProvider.validateGuidelineUsedExcelData(t)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(tc,8),e.LFG(tc),e.LFG(O.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),ho=(()=>{class s extends g.m1{constructor(t,i,r,l,u,P){super({loading:!1,guidelineUseds:[],done:!1,searchQuery:"",formName:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=r,this.toast=l,this.formService=u,this.guidelineUsedService=P,this.errors$=this.select(c=>c.errors),this.loading$=this.select(c=>c.loading),this.done$=this.select(c=>c.done),this.item$=this.select(c=>c.item),this.guidelineUseds$=this.select(c=>c.guidelineUseds),this.paging$=this.select(c=>c.paging),this.searchQuery$=this.select(c=>c.searchQuery),this.formName$=this.select(c=>c.formName),this.actionResult$=this.select(this.item$,this.done$,(c,d)=>({item:c,done:d}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.guidelineUseds$,(c,d,n,a,m)=>({errors:c,loading:d,item:n,formName:a,guidelineUseds:m}),{debounce:!0}),this.input$=this.select(this.paging$,this.searchQuery$,(c,d)=>({limit:c.limit,skip:c.skip,name:d,total:c.total})),this.setFormName=this.updater((c,d)=>Object.assign(Object.assign({},c),{formName:d})),this.setItem=this.updater((c,d)=>Object.assign(Object.assign({},c),{item:d})),this.addNewGuidelineUsed=this.updater((c,d)=>Object.assign(Object.assign({},c),{guidelineUseds:[...c.guidelineUseds,d]})),this.updateGuidelineUsed=this.updater((c,d)=>Object.assign(Object.assign({},c),{guidelineUseds:c.guidelineUseds.map(n=>n.id===d.id?d:n)})),this.addGuidelineUseds=this.updater((c,d)=>Object.assign(Object.assign({},c),{guidelineUseds:c.guidelineUseds.concat(d)})),this.updateGuidelineUseds=this.updater((c,d)=>Object.assign(Object.assign({},c),{guidelineUseds:c.guidelineUseds.map(n=>d.find(m=>m.id===n.id)||n)})),this.setSearchQuery=this.updater((c,d)=>Object.assign(Object.assign({},c),{searchQuery:d})),this.loadGuidelineUsedEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.data.userGuidelineUsed({guidelineUsedId:d}).pipe((0,g._b)(n=>{this.patchState({item:n.data.item,errors:n.errors,loading:!1})},n=>this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})))))),this.loadGuidelineUsedsEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.input$),(0,h.w)(([d,n])=>this.data.userGuidelineUseds({input:n}).pipe((0,g._b)(a=>this.patchState({paging:{limit:n.limit,skip:n.skip,total:a.data.count.total},guidelineUseds:a.data.items,errors:a.errors,loading:!1}),a=>this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})))))),this.createGuidelineUsedEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.guidelineUsedService.createGuidelineUsed(Object.assign({},d)).pipe((0,g._b)(n=>{this.addNewGuidelineUsed(n),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:n,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},n=>{n.graphQLErrors?(this.toast.error(n.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})):(this.toast.error(n.Message),this.formService.setErrors(n.Data))}))))),this.updateGuidelineUsedEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([d,n])=>this.guidelineUsedService.updateGuidelineUsed(d,d.id).pipe((0,g._b)(a=>{this.updateGuidelineUsed(a),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:a,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.deleteGuidelineUsedEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([d,n])=>this.data.userDeleteGuidelineUsed({guidelineUsedId:n.id}).pipe((0,g._b)(a=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:a.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.importExcelEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.guidelineUsedService.importGuidelineUseds(d).pipe((0,te.K)(n=>{var a;return this.toast.error(null!==(a=n.Message)&&void 0!==a?a:"Failed to save",{duration:3e3}),k.E}),(0,C.b)(n=>{const a=JSON.parse(n.created),m=JSON.parse(n.updated),p=JSON.parse(n.failed),_=a.length+m.length+p.length;this.addGuidelineUseds(a),this.updateGuidelineUseds(m),this.toast.success(`${a.length} created, ${m.length} updated, ${p.length} failed of total ${_}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("guidelineUsedId")?(this.route.snapshot.paramMap.get("guidelineUsedId"),this.setFormName("guidelineUsed_edit")):this.setFormName("guidelineUsed_create")}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.guidelineUsedService.validateGuidelineUsedExcelData(t)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(E.q),e.LFG(A.F0),e.LFG(A.gz),e.LFG(X.F),e.LFG(q.o),e.LFG(kM))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function ZM(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close.emit())})("formIsReady",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.guidelineUsed)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let ic=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"guidelineUsed_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.guidelineUsed=i.item})):t.formName&&t.formName.currentValue&&"guidelineUsed_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadGuidelineUsedEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.guidelineUsed=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(ho),e.Y36(A.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-guideline-used-form"]],inputs:{guidelineUsed:"guidelineUsed",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,ZM,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[w.O5,z.M,w.Ov],encapsulation:2}),s})(),sc=(()=>{class s{constructor(){this.autoHeight=!1,this.guidelineUseds=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[,{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var r;t.includes(null===(r=i.data)||void 0===r?void 0:r.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-guideline-used-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(N.x,5),2&t){let r;e.iGM(r=e.CRH())&&(i.tableView=r.first)}},inputs:{autoHeight:"autoHeight",guidelineUseds:"guidelineUseds"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.guidelineUseds)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[N.x],encapsulation:2}),s})();function BM(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-guideline-used-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","guidelineUsed_edit")("formControl",t.formControl)("guidelineUsed",t.guidelineUsed)}}const YM=function(){return{}};function XM(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-guideline-used-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","guidelineUsed_create")("formControl",t.formControl)("guidelineUsed",e.DdM(3,YM))}}function eE(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-guideline-used-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(u.ref.close())}),e.qZA()}2&s&&e.Q6J("guidelineUseds",o.data.items)}let tE=(()=>{class s extends I.fS{constructor(t){super(),this.store=t,this.store.loadGuidelineUsedsEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.guidelineUseds$.pipe((0,h.w)(i=>(0,T.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(ho))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","guidelineUsed","send","close"],[1,"w-full","h-full","bg-white",3,"guidelineUseds","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,BM,2,3,"ng-template",null,1,e.W1O),e.YNc(3,XM,1,4,"ng-template",null,2,e.W1O),e.YNc(5,eE,1,1,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",u)("editTemplate",r)("createTemplate",l)("key",i.field.key)}},dependencies:[x.JJ,x.oH,J.$,ic,sc],encapsulation:2}),s})();function iE(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-guideline-used-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","guidelineUsed_edit")("guidelineUsed",t.value)}}const sE=function(){return{}};function oE(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-guideline-used-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","guidelineUsed_create")("guidelineUsed",e.DdM(2,sE))}function rE(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-guideline-used-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(null==u.ref?null:u.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("guidelineUseds",t.items)}}let aE=(()=>{class s extends Y{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","guidelineUsed","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","guidelineUseds","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,iE,1,2,"ng-template",null,1,e.W1O),e.YNc(3,oE,1,3,"ng-template",null,2,e.W1O),e.YNc(5,rE,1,2,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[ee,ic,sc],encapsulation:2}),s})(),nE=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[ho],imports:[w.ez,R.F,x.UX,V.o,H.u,Q.P,U.t,Z,j.h,K.G,I.X0.forChild({types:[{name:"guideline-used-select",component:tE,wrappers:["form-field"]},{name:"guideline-used-grid",component:aE}]})]}),s})(),lE=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[nE]}),s})();class Zt extends y.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class cE extends Zt{constructor(o){super("ValidateHealthInsuranceExcelDataAction"),this.valid=!1,this.excelData=o}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name)}),this.validationContext.addRule(new f.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof f.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(r=>r.name),newNames:[i.newName]}):i instanceof f.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,T.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class dE extends f.wS{constructor(o,t,i,r,l){super(o,t,i,r,l,!0)}}class uE extends f.ul{constructor(o,t,i,r=!1){super(o,t,r),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new f.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new dE("name","The healthinsurance name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class mE extends Zt{constructor(o){super("CreateHealthInsuranceAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new uE("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateHealthInsurance({input:this.input}).pipe((0,h.w)(o=>(0,ie.of)(o.data.created)))}}class pE extends Zt{constructor(o){super("UpdateHealthInsurancesAction"),this.healthInsurances=o}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.healthInsurances,!0))}performAction(){this.response=this.businessProvider.data.userUpdateHealthInsurances({input:{healthInsurances:this.healthInsurances}}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}class hE extends Zt{constructor(o,t){super("UpdateHealthInsuranceAction"),this.healthInsurance=o,this.healthInsuranceId=t}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.healthInsurance,!0)).addRule(new f.xF("Id","Id should be a CUID and not null",this.healthInsuranceId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateHealthInsurance({healthInsuranceId:this.healthInsuranceId,input:this.healthInsurance}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}let oc=(()=>{class s extends y.nH{constructor(t,i,r){super("NotificationService.HealthInsuranceBusinessProviderService",t,r),this.data=i}createHealthInsurance(t){const i=new mE(t);return i.Do(this),i.response}updateHealthInsurance(t,i){const r=new hE(t,i);return r.Do(this),r.response}importHealthInsurances(t){const i=new pE(t);return i.Do(this),i.response}validateHealthInsuranceExcelData(t){const i=new cE(t);return i.Do(this),i.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(O.ed),e.LFG(E.q),e.LFG(y.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),fE=(()=>{class s extends y.nH{constructor(t,i,r){super("HealthInsuranceService",r,t),this.businessProvider=i}createHealthInsurance(t){const i=Object.fromEntries(Object.entries(t).filter(([r,l])=>null!==l));return this.businessProvider.createHealthInsurance(i)}updateHealthInsurance(t,i){return this.businessProvider.updateHealthInsurance(t,i)}importHealthInsurances(t){return this.businessProvider.importHealthInsurances(t)}validateHealthInsuranceExcelData(t){return this.businessProvider.validateHealthInsuranceExcelData(t)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(oc,8),e.LFG(oc),e.LFG(O.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),fo=(()=>{class s extends g.m1{constructor(t,i,r,l,u,P){super({loading:!1,healthInsurances:[],done:!1,searchQuery:"",formName:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=r,this.toast=l,this.formService=u,this.healthInsuranceService=P,this.errors$=this.select(c=>c.errors),this.loading$=this.select(c=>c.loading),this.done$=this.select(c=>c.done),this.item$=this.select(c=>c.item),this.healthInsurances$=this.select(c=>c.healthInsurances),this.paging$=this.select(c=>c.paging),this.searchQuery$=this.select(c=>c.searchQuery),this.formName$=this.select(c=>c.formName),this.actionResult$=this.select(this.item$,this.done$,(c,d)=>({item:c,done:d}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.healthInsurances$,(c,d,n,a,m)=>({errors:c,loading:d,item:n,formName:a,healthInsurances:m}),{debounce:!0}),this.input$=this.select(this.paging$,this.searchQuery$,(c,d)=>({limit:c.limit,skip:c.skip,name:d,total:c.total})),this.setFormName=this.updater((c,d)=>Object.assign(Object.assign({},c),{formName:d})),this.setItem=this.updater((c,d)=>Object.assign(Object.assign({},c),{item:d})),this.addNewHealthInsurance=this.updater((c,d)=>Object.assign(Object.assign({},c),{healthInsurances:[...c.healthInsurances,d]})),this.updateHealthInsurance=this.updater((c,d)=>Object.assign(Object.assign({},c),{healthInsurances:c.healthInsurances.map(n=>n.id===d.id?d:n)})),this.addHealthInsurances=this.updater((c,d)=>Object.assign(Object.assign({},c),{healthInsurances:c.healthInsurances.concat(d)})),this.updateHealthInsurances=this.updater((c,d)=>Object.assign(Object.assign({},c),{healthInsurances:c.healthInsurances.map(n=>d.find(m=>m.id===n.id)||n)})),this.setSearchQuery=this.updater((c,d)=>Object.assign(Object.assign({},c),{searchQuery:d})),this.loadHealthInsuranceEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.data.userHealthInsurance({healthInsuranceId:d}).pipe((0,g._b)(n=>{this.patchState({item:n.data.item,errors:n.errors,loading:!1})},n=>this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})))))),this.loadHealthInsurancesEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.input$),(0,h.w)(([d,n])=>this.data.userHealthInsurances({input:n}).pipe((0,g._b)(a=>this.patchState({paging:{limit:n.limit,skip:n.skip,total:a.data.count.total},healthInsurances:a.data.items,errors:a.errors,loading:!1}),a=>this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})))))),this.createHealthInsuranceEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.healthInsuranceService.createHealthInsurance(Object.assign({},d)).pipe((0,g._b)(n=>{this.addNewHealthInsurance(n),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:n,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},n=>{n.graphQLErrors?(this.toast.error(n.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})):(this.toast.error(n.Message),this.formService.setErrors(n.Data))}))))),this.updateHealthInsuranceEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([d,n])=>this.healthInsuranceService.updateHealthInsurance(d,d.id).pipe((0,g._b)(a=>{this.updateHealthInsurance(a),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:a,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.deleteHealthInsuranceEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([d,n])=>this.data.userDeleteHealthInsurance({healthInsuranceId:n.id}).pipe((0,g._b)(a=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:a.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.importExcelEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.healthInsuranceService.importHealthInsurances(d).pipe((0,te.K)(n=>{var a;return this.toast.error(null!==(a=n.Message)&&void 0!==a?a:"Failed to save",{duration:3e3}),k.E}),(0,C.b)(n=>{const a=JSON.parse(n.created),m=JSON.parse(n.updated),p=JSON.parse(n.failed),_=a.length+m.length+p.length;this.addHealthInsurances(a),this.updateHealthInsurances(m),this.toast.success(`${a.length} created, ${m.length} updated, ${p.length} failed of total ${_}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("healthInsuranceId")?(this.route.snapshot.paramMap.get("healthInsuranceId"),this.setFormName("healthInsurance_edit")):this.setFormName("healthInsurance_create")}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.healthInsuranceService.validateHealthInsuranceExcelData(t)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(E.q),e.LFG(A.F0),e.LFG(A.gz),e.LFG(X.F),e.LFG(q.o),e.LFG(fE))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function _E(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close.emit())})("formIsReady",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.healthInsurance)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let rc=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"healthInsurance_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.healthInsurance=i.item})):t.formName&&t.formName.currentValue&&"healthInsurance_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadHealthInsuranceEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.healthInsurance=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(fo),e.Y36(A.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-health-insurance-form"]],inputs:{healthInsurance:"healthInsurance",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,_E,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[w.O5,z.M,w.Ov],encapsulation:2}),s})(),ac=(()=>{class s{constructor(){this.autoHeight=!1,this.healthInsurances=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[,{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{field:"healthInsuranceKind",filter:"agTextColumnFilter"},{field:"identificationGroupNumber",filter:"agTextColumnFilter"},{field:"mediCalNumber",filter:"agTextColumnFilter"},{field:"medicareNumber",filter:"agTextColumnFilter"},{field:"policyNumber",filter:"agTextColumnFilter"},{field:"legalCaseId",filter:"agTextColumnFilter",hide:!0}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var r;t.includes(null===(r=i.data)||void 0===r?void 0:r.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-health-insurance-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(N.x,5),2&t){let r;e.iGM(r=e.CRH())&&(i.tableView=r.first)}},inputs:{autoHeight:"autoHeight",healthInsurances:"healthInsurances"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.healthInsurances)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[N.x],encapsulation:2}),s})();function gE(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-health-insurance-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","healthInsurance_edit")("formControl",t.formControl)("healthInsurance",t.healthInsurance)}}const CE=function(){return{}};function SE(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-health-insurance-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","healthInsurance_create")("formControl",t.formControl)("healthInsurance",e.DdM(3,CE))}}function vE(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-health-insurance-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(u.ref.close())}),e.qZA()}2&s&&e.Q6J("healthInsurances",o.data.items)}let bE=(()=>{class s extends I.fS{constructor(t){super(),this.store=t,this.store.loadHealthInsurancesEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.healthInsurances$.pipe((0,h.w)(i=>(0,T.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(fo))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","healthInsurance","send","close"],[1,"w-full","h-full","bg-white",3,"healthInsurances","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,gE,2,3,"ng-template",null,1,e.W1O),e.YNc(3,SE,1,4,"ng-template",null,2,e.W1O),e.YNc(5,vE,1,1,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",u)("editTemplate",r)("createTemplate",l)("key",i.field.key)}},dependencies:[x.JJ,x.oH,J.$,rc,ac],encapsulation:2}),s})();function TE(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-health-insurance-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","healthInsurance_edit")("healthInsurance",t.value)}}const yE=function(){return{}};function wE(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-health-insurance-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","healthInsurance_create")("healthInsurance",e.DdM(2,yE))}function xE(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-health-insurance-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(null==u.ref?null:u.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("healthInsurances",t.items)}}let NE=(()=>{class s extends Y{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","healthInsurance","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","healthInsurances","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,TE,1,2,"ng-template",null,1,e.W1O),e.YNc(3,wE,1,3,"ng-template",null,2,e.W1O),e.YNc(5,xE,1,2,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[ee,rc,ac],encapsulation:2}),s})(),AE=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[fo],imports:[w.ez,R.F,x.UX,V.o,H.u,Q.P,U.t,Z,j.h,K.G,I.X0.forChild({types:[{name:"health-insurance-select",component:bE,wrappers:["form-field"]},{name:"health-insurance-grid",component:NE}]})]}),s})(),FE=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[AE]}),s})();class Bt extends y.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class DE extends Bt{constructor(o){super("ValidateImplantCategoryExcelDataAction"),this.valid=!1,this.excelData=o}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name)}),this.validationContext.addRule(new f.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof f.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(r=>r.name),newNames:[i.newName]}):i instanceof f.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,T.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class IE extends f.wS{constructor(o,t,i,r,l){super(o,t,i,r,l,!0)}}class PE extends f.ul{constructor(o,t,i,r=!1){super(o,t,r),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new f.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new IE("name","The implantcategory name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class WE extends Bt{constructor(o){super("CreateImplantCategoryAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new PE("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateImplantCategory({input:this.input}).pipe((0,h.w)(o=>(0,ie.of)(o.data.created)))}}class ME extends Bt{constructor(o){super("UpdateImplantCategoriesAction"),this.implantCategories=o}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.implantCategories,!0))}performAction(){this.response=this.businessProvider.data.userUpdateImplantCategories({input:{implantCategories:this.implantCategories}}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}class EE extends Bt{constructor(o,t){super("UpdateImplantCategoryAction"),this.implantCategory=o,this.implantCategoryId=t}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.implantCategory,!0)).addRule(new f.xF("Id","Id should be a CUID and not null",this.implantCategoryId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateImplantCategory({implantCategoryId:this.implantCategoryId,input:this.implantCategory}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}let nc=(()=>{class s extends y.nH{constructor(t,i,r){super("NotificationService.ImplantCategoryBusinessProviderService",t,r),this.data=i}createImplantCategory(t){const i=new WE(t);return i.Do(this),i.response}updateImplantCategory(t,i){const r=new EE(t,i);return r.Do(this),r.response}importImplantCategories(t){const i=new ME(t);return i.Do(this),i.response}validateImplantCategoryExcelData(t){const i=new DE(t);return i.Do(this),i.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(O.ed),e.LFG(E.q),e.LFG(y.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),OE=(()=>{class s extends y.nH{constructor(t,i,r){super("ImplantCategoryService",r,t),this.businessProvider=i}createImplantCategory(t){const i=Object.fromEntries(Object.entries(t).filter(([r,l])=>null!==l));return this.businessProvider.createImplantCategory(i)}updateImplantCategory(t,i){return this.businessProvider.updateImplantCategory(t,i)}importImplantCategories(t){return this.businessProvider.importImplantCategories(t)}validateImplantCategoryExcelData(t){return this.businessProvider.validateImplantCategoryExcelData(t)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(nc,8),e.LFG(nc),e.LFG(O.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),_o=(()=>{class s extends g.m1{constructor(t,i,r,l,u,P){super({loading:!1,implantCategories:[],done:!1,searchQuery:"",formName:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=r,this.toast=l,this.formService=u,this.implantCategoryService=P,this.errors$=this.select(c=>c.errors),this.loading$=this.select(c=>c.loading),this.done$=this.select(c=>c.done),this.item$=this.select(c=>c.item),this.implantCategories$=this.select(c=>c.implantCategories),this.paging$=this.select(c=>c.paging),this.searchQuery$=this.select(c=>c.searchQuery),this.formName$=this.select(c=>c.formName),this.actionResult$=this.select(this.item$,this.done$,(c,d)=>({item:c,done:d}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.implantCategories$,(c,d,n,a,m)=>({errors:c,loading:d,item:n,formName:a,implantCategories:m}),{debounce:!0}),this.input$=this.select(this.paging$,this.searchQuery$,(c,d)=>({limit:c.limit,skip:c.skip,name:d,total:c.total})),this.setFormName=this.updater((c,d)=>Object.assign(Object.assign({},c),{formName:d})),this.setItem=this.updater((c,d)=>Object.assign(Object.assign({},c),{item:d})),this.addNewImplantCategory=this.updater((c,d)=>Object.assign(Object.assign({},c),{implantCategories:[...c.implantCategories,d]})),this.updateImplantCategory=this.updater((c,d)=>Object.assign(Object.assign({},c),{implantCategories:c.implantCategories.map(n=>n.id===d.id?d:n)})),this.addImplantCategories=this.updater((c,d)=>Object.assign(Object.assign({},c),{implantCategories:c.implantCategories.concat(d)})),this.updateImplantCategories=this.updater((c,d)=>Object.assign(Object.assign({},c),{implantCategories:c.implantCategories.map(n=>d.find(m=>m.id===n.id)||n)})),this.setSearchQuery=this.updater((c,d)=>Object.assign(Object.assign({},c),{searchQuery:d})),this.loadImplantCategoryEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.data.userImplantCategory({implantCategoryId:d}).pipe((0,g._b)(n=>{this.patchState({item:n.data.item,errors:n.errors,loading:!1})},n=>this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})))))),this.loadImplantCategoriesEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.input$),(0,h.w)(([d,n])=>this.data.userImplantCategories({input:n}).pipe((0,g._b)(a=>this.patchState({paging:{limit:n.limit,skip:n.skip,total:a.data.count.total},implantCategories:a.data.items,errors:a.errors,loading:!1}),a=>this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})))))),this.createImplantCategoryEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.implantCategoryService.createImplantCategory(Object.assign({},d)).pipe((0,g._b)(n=>{this.addNewImplantCategory(n),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:n,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},n=>{n.graphQLErrors?(this.toast.error(n.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})):(this.toast.error(n.Message),this.formService.setErrors(n.Data))}))))),this.updateImplantCategoryEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([d,n])=>this.implantCategoryService.updateImplantCategory(d,d.id).pipe((0,g._b)(a=>{this.updateImplantCategory(a),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:a,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.deleteImplantCategoryEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([d,n])=>this.data.userDeleteImplantCategory({implantCategoryId:n.id}).pipe((0,g._b)(a=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:a.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.importExcelEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.implantCategoryService.importImplantCategories(d).pipe((0,te.K)(n=>{var a;return this.toast.error(null!==(a=n.Message)&&void 0!==a?a:"Failed to save",{duration:3e3}),k.E}),(0,C.b)(n=>{const a=JSON.parse(n.created),m=JSON.parse(n.updated),p=JSON.parse(n.failed),_=a.length+m.length+p.length;this.addImplantCategories(a),this.updateImplantCategories(m),this.toast.success(`${a.length} created, ${m.length} updated, ${p.length} failed of total ${_}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("implantCategoryId")?(this.route.snapshot.paramMap.get("implantCategoryId"),this.setFormName("implantCategory_edit")):this.setFormName("implantCategory_create")}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.implantCategoryService.validateImplantCategoryExcelData(t)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(E.q),e.LFG(A.F0),e.LFG(A.gz),e.LFG(X.F),e.LFG(q.o),e.LFG(OE))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function LE(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close.emit())})("formIsReady",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.implantCategory)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let lc=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"implantCategory_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.implantCategory=i.item})):t.formName&&t.formName.currentValue&&"implantCategory_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadImplantCategoryEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.implantCategory=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(_o),e.Y36(A.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-implant-category-form"]],inputs:{implantCategory:"implantCategory",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,LE,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[w.O5,z.M,w.Ov],encapsulation:2}),s})(),cc=(()=>{class s{constructor(){this.autoHeight=!1,this.implantCategories=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[,{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var r;t.includes(null===(r=i.data)||void 0===r?void 0:r.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-implant-category-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(N.x,5),2&t){let r;e.iGM(r=e.CRH())&&(i.tableView=r.first)}},inputs:{autoHeight:"autoHeight",implantCategories:"implantCategories"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.implantCategories)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[N.x],encapsulation:2}),s})();function GE(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-implant-category-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","implantCategory_edit")("formControl",t.formControl)("implantCategory",t.implantCategory)}}const $E=function(){return{}};function RE(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-implant-category-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","implantCategory_create")("formControl",t.formControl)("implantCategory",e.DdM(3,$E))}}function VE(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-implant-category-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(u.ref.close())}),e.qZA()}2&s&&e.Q6J("implantCategories",o.data.items)}let QE=(()=>{class s extends I.fS{constructor(t){super(),this.store=t,this.store.loadImplantCategoriesEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.implantCategories$.pipe((0,h.w)(i=>(0,T.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(_o))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","implantCategory","send","close"],[1,"w-full","h-full","bg-white",3,"implantCategories","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,GE,2,3,"ng-template",null,1,e.W1O),e.YNc(3,RE,1,4,"ng-template",null,2,e.W1O),e.YNc(5,VE,1,1,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",u)("editTemplate",r)("createTemplate",l)("key",i.field.key)}},dependencies:[x.JJ,x.oH,J.$,lc,cc],encapsulation:2}),s})();function UE(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-implant-category-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","implantCategory_edit")("implantCategory",t.value)}}const JE=function(){return{}};function jE(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-implant-category-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","implantCategory_create")("implantCategory",e.DdM(2,JE))}function zE(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-implant-category-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(null==u.ref?null:u.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("implantCategories",t.items)}}let qE=(()=>{class s extends Y{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","implantCategory","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","implantCategories","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,UE,1,2,"ng-template",null,1,e.W1O),e.YNc(3,jE,1,3,"ng-template",null,2,e.W1O),e.YNc(5,zE,1,2,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[ee,lc,cc],encapsulation:2}),s})(),HE=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[_o],imports:[w.ez,R.F,x.UX,V.o,H.u,Q.P,U.t,Z,j.h,K.G,I.X0.forChild({types:[{name:"implant-category-select",component:QE,wrappers:["form-field"]},{name:"implant-category-grid",component:qE}]})]}),s})(),KE=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[HE]}),s})();class Yt extends y.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class kE extends Yt{constructor(o,t,i,r){super("ValidateImplantExcelDataAction"),this.valid=!1,this.excelData=o,this.implantCategories=t,this.salesRepresentatives=i,this.manufacturers=r}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name),this.validationContext.addRule(new f.mi(`implantCategoryName_${i}_is_valid}`,"Implant Category Is Not Valid","implantCategory.name",t.implantCategory,this.implantCategories,!0)),this.validationContext.addRule(new f.mi(`salesRepresentativeName_${i}_is_valid}`,"Sales Representative Is Not Valid","salesRepresentative.name",t.salesRepresentative,this.salesRepresentatives,!0)),this.validationContext.addRule(new f.mi(`manufacturerName_${i}_is_valid}`,"Manufacturer Is Not Valid","manufacturer.name",t.manufacturer,this.manufacturers,!0))}),this.validationContext.addRule(new f.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof f.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(r=>r.name),newNames:[i.newName]}):i instanceof f.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,T.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class ZE extends f.wS{constructor(o,t,i,r,l){super(o,t,i,r,l,!0)}}class BE extends f.ul{constructor(o,t,i,r=!1){super(o,t,r),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new f.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new ZE("name","The implant name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class YE extends Yt{constructor(o){super("CreateImplantAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new BE("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateImplant({input:this.input}).pipe((0,h.w)(o=>(0,ie.of)(o.data.created)))}}class XE extends Yt{constructor(o){super("UpdateImplantsAction"),this.implants=o}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.implants,!0))}performAction(){this.response=this.businessProvider.data.userUpdateImplants({input:{implants:this.implants}}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}class eO extends Yt{constructor(o,t){super("UpdateImplantAction"),this.implant=o,this.implantId=t}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.implant,!0)).addRule(new f.xF("Id","Id should be a CUID and not null",this.implantId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateImplant({implantId:this.implantId,input:this.implant}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}let dc=(()=>{class s extends y.nH{constructor(t,i,r){super("NotificationService.ImplantBusinessProviderService",t,r),this.data=i}createImplant(t){const i=new YE(t);return i.Do(this),i.response}updateImplant(t,i){const r=new eO(t,i);return r.Do(this),r.response}importImplants(t){const i=new XE(t);return i.Do(this),i.response}validateImplantExcelData(t,i,r,l){const u=new kE(t,i,r,l);return u.Do(this),u.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(O.ed),e.LFG(E.q),e.LFG(y.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),tO=(()=>{class s extends y.nH{constructor(t,i,r){super("ImplantService",r,t),this.businessProvider=i}createImplant(t){const i=Object.fromEntries(Object.entries(t).filter(([r,l])=>null!==l));return this.businessProvider.createImplant(i)}updateImplant(t,i){return this.businessProvider.updateImplant(t,i)}importImplants(t){return this.businessProvider.importImplants(t)}validateImplantExcelData(t,i,r,l){return this.businessProvider.validateImplantExcelData(t,i,r,l)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(dc,8),e.LFG(dc),e.LFG(O.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),go=(()=>{class s extends g.m1{constructor(t,i,r,l,u,P){if(super({loading:!1,implants:[],done:!1,searchQuery:"",formName:void 0,implantCategoryId:void 0,salesRepresentativeId:void 0,manufacturerId:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=r,this.toast=l,this.formService=u,this.implantService=P,this.errors$=this.select(a=>a.errors),this.loading$=this.select(a=>a.loading),this.done$=this.select(a=>a.done),this.item$=this.select(a=>a.item),this.implants$=this.select(a=>a.implants),this.implantCategories$=this.select(a=>a.implantCategories||[]),this.contacts$=this.select(a=>a.contacts||[]),this.manufacturers$=this.select(a=>a.manufacturers||[]),this.implantCategoryId$=this.select(a=>a.implantCategoryId),this.salesRepresentativeId$=this.select(a=>a.salesRepresentativeId),this.manufacturerId$=this.select(a=>a.manufacturerId),this.paging$=this.select(a=>a.paging),this.searchQuery$=this.select(a=>a.searchQuery),this.formName$=this.select(a=>a.formName),this.actionResult$=this.select(this.item$,this.done$,(a,m)=>({item:a,done:m}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.implants$,this.implantCategories$,this.contacts$,this.manufacturers$,(a,m,p,_,v,D,se,me)=>({errors:a,loading:m,item:p,formName:_,implants:v,implantCategories:D,contacts:se,manufacturers:me}),{debounce:!0}),this.input$=this.select(this.paging$,this.implantCategoryId$,this.salesRepresentativeId$,this.manufacturerId$,this.searchQuery$,(a,m,p,_,v)=>({limit:a.limit,skip:a.skip,name:v,implantCategoryId:m,salesRepresentativeId:p,manufacturerId:_,total:a.total})),this.setFormName=this.updater((a,m)=>Object.assign(Object.assign({},a),{formName:m})),this.setImplantCategoryId=this.updater((a,m)=>Object.assign(Object.assign({},a),{implantCategoryId:m})),this.setSalesRepresentativeId=this.updater((a,m)=>Object.assign(Object.assign({},a),{salesRepresentativeId:m})),this.setManufacturerId=this.updater((a,m)=>Object.assign(Object.assign({},a),{manufacturerId:m})),this.filterImplantCategories=a=>this.data.userSelectImplantCategories({input:{name:a}}).pipe((0,g._b)(m=>{let p=m.data.items;return this.patchState({implantCategories:p}),p},m=>this.patchState({errors:m.graphQLErrors?m.graphQLErrors:m})),(0,B.U)(m=>m.data.items)),this.filterContacts=a=>this.data.userSelectContacts({input:{name:a}}).pipe((0,g._b)(m=>{let p=m.data.items;return this.patchState({contacts:p}),p},m=>this.patchState({errors:m.graphQLErrors?m.graphQLErrors:m})),(0,B.U)(m=>m.data.items)),this.filterManufacturers=a=>this.data.userSelectManufacturers({input:{name:a}}).pipe((0,g._b)(m=>{let p=m.data.items;return this.patchState({manufacturers:p}),p},m=>this.patchState({errors:m.graphQLErrors?m.graphQLErrors:m})),(0,B.U)(m=>m.data.items)),this.addImplantCategory=this.updater((a,m)=>Object.assign(Object.assign({},a),{implantCategories:a.implantCategories.concat(m)})),this.addContact=this.updater((a,m)=>Object.assign(Object.assign({},a),{contacts:a.contacts.concat(m)})),this.addManufacturer=this.updater((a,m)=>Object.assign(Object.assign({},a),{manufacturers:a.manufacturers.concat(m)})),this.setItem=this.updater((a,m)=>Object.assign(Object.assign({},a),{item:m})),this.addNewImplant=this.updater((a,m)=>Object.assign(Object.assign({},a),{implants:[...a.implants,m]})),this.updateImplant=this.updater((a,m)=>Object.assign(Object.assign({},a),{implants:a.implants.map(p=>p.id===m.id?m:p)})),this.addImplants=this.updater((a,m)=>Object.assign(Object.assign({},a),{implants:a.implants.concat(m)})),this.updateImplants=this.updater((a,m)=>Object.assign(Object.assign({},a),{implants:a.implants.map(p=>m.find(v=>v.id===p.id)||p)})),this.setSearchQuery=this.updater((a,m)=>Object.assign(Object.assign({},a),{searchQuery:m})),this.loadImplantEffect=this.effect(a=>a.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(m=>this.data.userImplant({implantId:m}).pipe((0,g._b)(p=>{this.patchState({item:p.data.item,errors:p.errors,loading:!1})},p=>this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})))))),this.loadImplantsEffect=this.effect(a=>a.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.input$),(0,h.w)(([m,p])=>this.data.userImplants({input:p}).pipe((0,g._b)(_=>this.patchState({paging:{limit:p.limit,skip:p.skip,total:_.data.count.total},implants:_.data.items,errors:_.errors,loading:!1}),_=>this.patchState({loading:!1,errors:_.graphQLErrors?_.graphQLErrors:_})))))),this.createImplantEffect=this.effect(a=>a.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(m=>this.implantService.createImplant(Object.assign({},m)).pipe((0,g._b)(p=>{this.addNewImplant(p),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:p,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},p=>{p.graphQLErrors?(this.toast.error(p.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})):(this.toast.error(p.Message),this.formService.setErrors(p.Data))}))))),this.updateImplantEffect=this.effect(a=>a.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([m,p])=>this.implantService.updateImplant(m,m.id).pipe((0,g._b)(_=>{this.updateImplant(_),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:_,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},_=>{_.graphQLErrors?(this.toast.error(_.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:_.graphQLErrors?_.graphQLErrors:_})):(this.toast.error(_.Message),this.formService.setErrors(_.Data))}))))),this.deleteImplantEffect=this.effect(a=>a.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([m,p])=>this.data.userDeleteImplant({implantId:p.id}).pipe((0,g._b)(_=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:_.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},_=>{_.graphQLErrors?(this.toast.error(_.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:_.graphQLErrors?_.graphQLErrors:_})):(this.toast.error(_.Message),this.formService.setErrors(_.Data))}))))),this.importExcelEffect=this.effect(a=>a.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(m=>this.implantService.importImplants(m).pipe((0,te.K)(p=>{var _;return this.toast.error(null!==(_=p.Message)&&void 0!==_?_:"Failed to save",{duration:3e3}),k.E}),(0,C.b)(p=>{const _=JSON.parse(p.created),v=JSON.parse(p.updated),D=JSON.parse(p.failed),se=_.length+v.length+D.length;this.addImplants(_),this.updateImplants(v),this.toast.success(`${_.length} created, ${v.length} updated, ${D.length} failed of total ${se}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("implantId")?(this.route.snapshot.paramMap.get("implantId"),this.setFormName("implant_edit")):this.setFormName("implant_create"),this.route.snapshot.paramMap.has("implantCategoryId")){var c=this.route.snapshot.paramMap.get("implantCategoryId");this.setImplantCategoryId(c)}if(this.route.snapshot.paramMap.has("salesRepresentativeId")){var d=this.route.snapshot.paramMap.get("salesRepresentativeId");this.setSalesRepresentativeId(d)}if(this.route.snapshot.paramMap.has("manufacturerId")){var n=this.route.snapshot.paramMap.get("manufacturerId");this.setManufacturerId(n)}}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.implantService.validateImplantExcelData(t,i.implantCategories,i.contacts,i.manufacturers)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(E.q),e.LFG(A.F0),e.LFG(A.gz),e.LFG(X.F),e.LFG(q.o),e.LFG(tO))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function iO(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close.emit())})("formIsReady",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.implant)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let uc=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"implant_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.implant=i.item})):t.formName&&t.formName.currentValue&&"implant_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadImplantEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.implant=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(go),e.Y36(A.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-implant-form"]],inputs:{implant:"implant",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,iO,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[w.O5,z.M,w.Ov],encapsulation:2}),s})(),mc=(()=>{class s{constructor(){this.autoHeight=!1,this.implants=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[{field:"implantCategory.name",headerName:"Implant Category",filter:"agTextColumnFilter"},{field:"salesRepresentative.name",headerName:"Sales Representative",filter:"agTextColumnFilter"},{field:"manufacturer.name",headerName:"Manufacturer",filter:"agTextColumnFilter"},{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{headerName:"Estimated Cost",field:"estimatedCost",valueFormatter:t=>{var i;return(0,S.oBD)(null===(i=t.data)||void 0===i?void 0:i.estimatedCost,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{field:"implantCategoryId",filter:"agTextColumnFilter",hide:!0},{field:"manufacturerId",filter:"agTextColumnFilter",hide:!0},{field:"photoUrl",filter:"agTextColumnFilter"},{field:"salesRepresentativeId",filter:"agTextColumnFilter",hide:!0},{field:"sku",filter:"agTextColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var r;t.includes(null===(r=i.data)||void 0===r?void 0:r.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-implant-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(N.x,5),2&t){let r;e.iGM(r=e.CRH())&&(i.tableView=r.first)}},inputs:{autoHeight:"autoHeight",implants:"implants"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.implants)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[N.x],encapsulation:2}),s})();function sO(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-implant-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","implant_edit")("formControl",t.formControl)("implant",t.implant)}}const oO=function(){return{}};function rO(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-implant-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","implant_create")("formControl",t.formControl)("implant",e.DdM(3,oO))}}function aO(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-implant-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(u.ref.close())}),e.qZA()}2&s&&e.Q6J("implants",o.data.items)}let nO=(()=>{class s extends I.fS{constructor(t){super(),this.store=t,this.store.loadImplantsEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.implants$.pipe((0,h.w)(i=>(0,T.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(go))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","implant","send","close"],[1,"w-full","h-full","bg-white",3,"implants","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,sO,2,3,"ng-template",null,1,e.W1O),e.YNc(3,rO,1,4,"ng-template",null,2,e.W1O),e.YNc(5,aO,1,1,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",u)("editTemplate",r)("createTemplate",l)("key",i.field.key)}},dependencies:[x.JJ,x.oH,J.$,uc,mc],encapsulation:2}),s})();function lO(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-implant-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","implant_edit")("implant",t.value)}}const cO=function(){return{}};function dO(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-implant-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","implant_create")("implant",e.DdM(2,cO))}function uO(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-implant-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(null==u.ref?null:u.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("implants",t.items)}}let mO=(()=>{class s extends Y{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","implant","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","implants","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,lO,1,2,"ng-template",null,1,e.W1O),e.YNc(3,dO,1,3,"ng-template",null,2,e.W1O),e.YNc(5,uO,1,2,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[ee,uc,mc],encapsulation:2}),s})(),pO=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[go],imports:[w.ez,R.F,x.UX,V.o,H.u,Q.P,U.t,Z,j.h,K.G,I.X0.forChild({types:[{name:"implant-select",component:nO,wrappers:["form-field"]},{name:"implant-grid",component:mO}]})]}),s})(),hO=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[pO]}),s})();class Xt extends y.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class fO extends Xt{constructor(o,t,i,r,l){super("ValidateInsuranceExcelDataAction"),this.valid=!1,this.excelData=o,this.legalCases=t,this.insuranceTypes=i,this.insuranceSectors=r,this.leads=l}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name),this.validationContext.addRule(new f.mi(`legalCaseName_${i}_is_valid}`,"Legal Case Is Not Valid","legalCase.name",t.legalCase,this.legalCases,!0)),this.validationContext.addRule(new f.mi(`insuranceTypeName_${i}_is_valid}`,"Insurance Type Is Not Valid","insuranceType.name",t.insuranceType,this.insuranceTypes,!0)),this.validationContext.addRule(new f.mi(`insuranceSectorName_${i}_is_valid}`,"Insurance Sector Is Not Valid","insuranceSector.name",t.insuranceSector,this.insuranceSectors,!0)),this.validationContext.addRule(new f.mi(`leadName_${i}_is_valid}`,"Lead Is Not Valid","lead.name",t.lead,this.leads,!0))}),this.validationContext.addRule(new f.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof f.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(r=>r.name),newNames:[i.newName]}):i instanceof f.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,T.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class _O extends f.wS{constructor(o,t,i,r,l){super(o,t,i,r,l,!0)}}class gO extends f.ul{constructor(o,t,i,r=!1){super(o,t,r),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new f.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new _O("name","The insurance name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class CO extends Xt{constructor(o){super("CreateInsuranceAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new gO("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateInsurance({input:this.input}).pipe((0,h.w)(o=>(0,ie.of)(o.data.created)))}}class SO extends Xt{constructor(o){super("UpdateInsurancesAction"),this.insurances=o}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.insurances,!0))}performAction(){this.response=this.businessProvider.data.userUpdateInsurances({input:{insurances:this.insurances}}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}class vO extends Xt{constructor(o,t){super("UpdateInsuranceAction"),this.insurance=o,this.insuranceId=t}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.insurance,!0)).addRule(new f.xF("Id","Id should be a CUID and not null",this.insuranceId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateInsurance({insuranceId:this.insuranceId,input:this.insurance}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}let pc=(()=>{class s extends y.nH{constructor(t,i,r){super("NotificationService.InsuranceBusinessProviderService",t,r),this.data=i}createInsurance(t){const i=new CO(t);return i.Do(this),i.response}updateInsurance(t,i){const r=new vO(t,i);return r.Do(this),r.response}importInsurances(t){const i=new SO(t);return i.Do(this),i.response}validateInsuranceExcelData(t,i,r,l,u){const P=new fO(t,i,r,l,u);return P.Do(this),P.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(O.ed),e.LFG(E.q),e.LFG(y.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),bO=(()=>{class s extends y.nH{constructor(t,i,r){super("InsuranceService",r,t),this.businessProvider=i}createInsurance(t){const i=Object.fromEntries(Object.entries(t).filter(([r,l])=>null!==l));return this.businessProvider.createInsurance(i)}updateInsurance(t,i){return this.businessProvider.updateInsurance(t,i)}importInsurances(t){return this.businessProvider.importInsurances(t)}validateInsuranceExcelData(t,i,r,l,u){return this.businessProvider.validateInsuranceExcelData(t,i,r,l,u)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(pc,8),e.LFG(pc),e.LFG(O.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),Co=(()=>{class s extends g.m1{constructor(t,i,r,l,u,P){if(super({loading:!1,insurances:[],done:!1,searchQuery:"",formName:void 0,legalCaseId:void 0,insuranceTypeId:void 0,insuranceSectorId:void 0,leadId:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=r,this.toast=l,this.formService=u,this.insuranceService=P,this.errors$=this.select(m=>m.errors),this.loading$=this.select(m=>m.loading),this.done$=this.select(m=>m.done),this.item$=this.select(m=>m.item),this.insurances$=this.select(m=>m.insurances),this.legalCases$=this.select(m=>m.legalCases||[]),this.insuranceTypes$=this.select(m=>m.insuranceTypes||[]),this.insuranceSectors$=this.select(m=>m.insuranceSectors||[]),this.leads$=this.select(m=>m.leads||[]),this.legalCaseId$=this.select(m=>m.legalCaseId),this.insuranceTypeId$=this.select(m=>m.insuranceTypeId),this.insuranceSectorId$=this.select(m=>m.insuranceSectorId),this.leadId$=this.select(m=>m.leadId),this.paging$=this.select(m=>m.paging),this.searchQuery$=this.select(m=>m.searchQuery),this.formName$=this.select(m=>m.formName),this.actionResult$=this.select(this.item$,this.done$,(m,p)=>({item:m,done:p}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.insurances$,this.legalCases$,this.insuranceTypes$,this.insuranceSectors$,this.leads$,(m,p,_,v,D,se,me,G,$)=>({errors:m,loading:p,item:_,formName:v,insurances:D,legalCases:se,insuranceTypes:me,insuranceSectors:G,leads:$}),{debounce:!0}),this.input$=this.select(this.paging$,this.legalCaseId$,this.insuranceTypeId$,this.insuranceSectorId$,this.leadId$,this.searchQuery$,(m,p,_,v,D,se)=>({limit:m.limit,skip:m.skip,name:se,legalCaseId:p,insuranceTypeId:_,insuranceSectorId:v,leadId:D,total:m.total})),this.setFormName=this.updater((m,p)=>Object.assign(Object.assign({},m),{formName:p})),this.setLegalCaseId=this.updater((m,p)=>Object.assign(Object.assign({},m),{legalCaseId:p})),this.setInsuranceTypeId=this.updater((m,p)=>Object.assign(Object.assign({},m),{insuranceTypeId:p})),this.setInsuranceSectorId=this.updater((m,p)=>Object.assign(Object.assign({},m),{insuranceSectorId:p})),this.setLeadId=this.updater((m,p)=>Object.assign(Object.assign({},m),{leadId:p})),this.filterLegalCases=m=>this.data.userSelectLegalCases({input:{name:m}}).pipe((0,g._b)(p=>{let _=p.data.items;return this.patchState({legalCases:_}),_},p=>this.patchState({errors:p.graphQLErrors?p.graphQLErrors:p})),(0,B.U)(p=>p.data.items)),this.filterInsuranceTypes=m=>this.data.userSelectInsuranceTypes({input:{name:m}}).pipe((0,g._b)(p=>{let _=p.data.items;return this.patchState({insuranceTypes:_}),_},p=>this.patchState({errors:p.graphQLErrors?p.graphQLErrors:p})),(0,B.U)(p=>p.data.items)),this.filterInsuranceSectors=m=>this.data.userSelectInsuranceSectors({input:{name:m}}).pipe((0,g._b)(p=>{let _=p.data.items;return this.patchState({insuranceSectors:_}),_},p=>this.patchState({errors:p.graphQLErrors?p.graphQLErrors:p})),(0,B.U)(p=>p.data.items)),this.filterLeads=m=>this.data.userSelectLeads({input:{name:m}}).pipe((0,g._b)(p=>{let _=p.data.items;return this.patchState({leads:_}),_},p=>this.patchState({errors:p.graphQLErrors?p.graphQLErrors:p})),(0,B.U)(p=>p.data.items)),this.addLegalCase=this.updater((m,p)=>Object.assign(Object.assign({},m),{legalCases:m.legalCases.concat(p)})),this.addInsuranceType=this.updater((m,p)=>Object.assign(Object.assign({},m),{insuranceTypes:m.insuranceTypes.concat(p)})),this.addInsuranceSector=this.updater((m,p)=>Object.assign(Object.assign({},m),{insuranceSectors:m.insuranceSectors.concat(p)})),this.addLead=this.updater((m,p)=>Object.assign(Object.assign({},m),{leads:m.leads.concat(p)})),this.setItem=this.updater((m,p)=>Object.assign(Object.assign({},m),{item:p})),this.addNewInsurance=this.updater((m,p)=>Object.assign(Object.assign({},m),{insurances:[...m.insurances,p]})),this.updateInsurance=this.updater((m,p)=>Object.assign(Object.assign({},m),{insurances:m.insurances.map(_=>_.id===p.id?p:_)})),this.addInsurances=this.updater((m,p)=>Object.assign(Object.assign({},m),{insurances:m.insurances.concat(p)})),this.updateInsurances=this.updater((m,p)=>Object.assign(Object.assign({},m),{insurances:m.insurances.map(_=>p.find(D=>D.id===_.id)||_)})),this.setSearchQuery=this.updater((m,p)=>Object.assign(Object.assign({},m),{searchQuery:p})),this.loadInsuranceEffect=this.effect(m=>m.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(p=>this.data.userInsurance({insuranceId:p}).pipe((0,g._b)(_=>{this.patchState({item:_.data.item,errors:_.errors,loading:!1})},_=>this.patchState({loading:!1,errors:_.graphQLErrors?_.graphQLErrors:_})))))),this.loadInsurancesEffect=this.effect(m=>m.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.input$),(0,h.w)(([p,_])=>this.data.userInsurances({input:_}).pipe((0,g._b)(v=>this.patchState({paging:{limit:_.limit,skip:_.skip,total:v.data.count.total},insurances:v.data.items,errors:v.errors,loading:!1}),v=>this.patchState({loading:!1,errors:v.graphQLErrors?v.graphQLErrors:v})))))),this.createInsuranceEffect=this.effect(m=>m.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(p=>this.insuranceService.createInsurance(Object.assign({},p)).pipe((0,g._b)(_=>{this.addNewInsurance(_),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:_,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},_=>{_.graphQLErrors?(this.toast.error(_.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:_.graphQLErrors?_.graphQLErrors:_})):(this.toast.error(_.Message),this.formService.setErrors(_.Data))}))))),this.updateInsuranceEffect=this.effect(m=>m.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([p,_])=>this.insuranceService.updateInsurance(p,p.id).pipe((0,g._b)(v=>{this.updateInsurance(v),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:v,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},v=>{v.graphQLErrors?(this.toast.error(v.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:v.graphQLErrors?v.graphQLErrors:v})):(this.toast.error(v.Message),this.formService.setErrors(v.Data))}))))),this.deleteInsuranceEffect=this.effect(m=>m.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([p,_])=>this.data.userDeleteInsurance({insuranceId:_.id}).pipe((0,g._b)(v=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:v.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},v=>{v.graphQLErrors?(this.toast.error(v.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:v.graphQLErrors?v.graphQLErrors:v})):(this.toast.error(v.Message),this.formService.setErrors(v.Data))}))))),this.importExcelEffect=this.effect(m=>m.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(p=>this.insuranceService.importInsurances(p).pipe((0,te.K)(_=>{var v;return this.toast.error(null!==(v=_.Message)&&void 0!==v?v:"Failed to save",{duration:3e3}),k.E}),(0,C.b)(_=>{const v=JSON.parse(_.created),D=JSON.parse(_.updated),se=JSON.parse(_.failed),me=v.length+D.length+se.length;this.addInsurances(v),this.updateInsurances(D),this.toast.success(`${v.length} created, ${D.length} updated, ${se.length} failed of total ${me}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("insuranceId")?(this.route.snapshot.paramMap.get("insuranceId"),this.setFormName("insurance_edit")):this.setFormName("insurance_create"),this.route.snapshot.paramMap.has("legalCaseId")){var c=this.route.snapshot.paramMap.get("legalCaseId");this.setLegalCaseId(c)}if(this.route.snapshot.paramMap.has("insuranceTypeId")){var d=this.route.snapshot.paramMap.get("insuranceTypeId");this.setInsuranceTypeId(d)}if(this.route.snapshot.paramMap.has("insuranceSectorId")){var n=this.route.snapshot.paramMap.get("insuranceSectorId");this.setInsuranceSectorId(n)}if(this.route.snapshot.paramMap.has("leadId")){var a=this.route.snapshot.paramMap.get("leadId");this.setLeadId(a)}}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.insuranceService.validateInsuranceExcelData(t,i.legalCases,i.insuranceTypes,i.insuranceSectors,i.leads)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(E.q),e.LFG(A.F0),e.LFG(A.gz),e.LFG(X.F),e.LFG(q.o),e.LFG(bO))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function TO(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close.emit())})("formIsReady",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.insurance)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let hc=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"insurance_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({id:null,name:""}),this.store.vm$.subscribe(i=>{this.insurance=i.item})):t.formName&&t.formName.currentValue&&"insurance_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadInsuranceEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.insurance=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Co),e.Y36(A.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-insurance-form"]],inputs:{insurance:"insurance",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,TO,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[w.O5,z.M,w.Ov],encapsulation:2}),s})(),fc=(()=>{class s{constructor(){this.autoHeight=!1,this.insurances=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[{field:"legalCase.name",headerName:"Legal Case",filter:"agTextColumnFilter"},{field:"insuranceType.name",headerName:"Insurance Type",filter:"agTextColumnFilter"},{field:"insuranceSector.name",headerName:"Insurance Sector",filter:"agTextColumnFilter"},{field:"lead.name",headerName:"Lead",filter:"agTextColumnFilter"},{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{field:"legalCaseId",filter:"agTextColumnFilter",hide:!0},{field:"insuranceTypeId",filter:"agTextColumnFilter",hide:!0},{field:"insuranceSectorId",filter:"agTextColumnFilter",hide:!0},{field:"policyNumber",filter:"agTextColumnFilter"},{field:"insuranceCompany",filter:"agTextColumnFilter"},{headerName:"Minimum Coverage Amount",field:"minimumCoverageAmount",valueFormatter:t=>{var i;return(0,S.oBD)(null===(i=t.data)||void 0===i?void 0:i.minimumCoverageAmount,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{headerName:"Maximum Coverage Amount",field:"maximumCoverageAmount",valueFormatter:t=>{var i;return(0,S.oBD)(null===(i=t.data)||void 0===i?void 0:i.maximumCoverageAmount,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{headerName:"Is Stackable",field:"isStackable",filter:"agSetColumnFilter",cellRenderer:"checkboxRenderer"},{field:"adjuster",filter:"agTextColumnFilter"},{field:"leadId",filter:"agTextColumnFilter",hide:!0}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var r;t.includes(null===(r=i.data)||void 0===r?void 0:r.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-insurance-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(N.x,5),2&t){let r;e.iGM(r=e.CRH())&&(i.tableView=r.first)}},inputs:{autoHeight:"autoHeight",insurances:"insurances"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.insurances)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[N.x],encapsulation:2}),s})();function yO(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-insurance-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","insurance_edit")("formControl",t.formControl)("insurance",t.insurance)}}const wO=function(){return{}};function xO(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-insurance-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","insurance_create")("formControl",t.formControl)("insurance",e.DdM(3,wO))}}function NO(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-insurance-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(u.ref.close())}),e.qZA()}2&s&&e.Q6J("insurances",o.data.items)}let AO=(()=>{class s extends I.fS{constructor(t){super(),this.store=t,this.store.loadInsurancesEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.insurances$.pipe((0,h.w)(i=>(0,T.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Co))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","insurance","send","close"],[1,"w-full","h-full","bg-white",3,"insurances","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,yO,2,3,"ng-template",null,1,e.W1O),e.YNc(3,xO,1,4,"ng-template",null,2,e.W1O),e.YNc(5,NO,1,1,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",u)("editTemplate",r)("createTemplate",l)("key",i.field.key)}},dependencies:[x.JJ,x.oH,J.$,hc,fc],encapsulation:2}),s})();function FO(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-insurance-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","insurance_edit")("insurance",t.value)}}const DO=function(){return{}};function IO(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-insurance-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","insurance_create")("insurance",e.DdM(2,DO))}function PO(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-insurance-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(null==u.ref?null:u.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("insurances",t.items)}}let WO=(()=>{class s extends Y{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:6,consts:[[3,"data","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","insurance","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","insurances","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,FO,1,2,"ng-template",null,1,e.W1O),e.YNc(3,IO,1,3,"ng-template",null,2,e.W1O),e.YNc(5,PO,1,2,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("data",i.data)("title",i.to.title)("onSave",i.onSave)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[ee,hc,fc],encapsulation:2}),s})(),MO=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[Co],imports:[w.ez,R.F,x.UX,V.o,H.u,Q.P,U.t,Z,j.h,K.G,I.X0.forChild({types:[{name:"insurance-select",component:AO,wrappers:["form-field"]},{name:"insurance-grid",component:WO}]})]}),s})(),EO=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[MO]}),s})();class ei extends y.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class OO extends ei{constructor(o){super("ValidateInsuranceSectorExcelDataAction"),this.valid=!1,this.excelData=o}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name)}),this.validationContext.addRule(new f.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof f.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(r=>r.name),newNames:[i.newName]}):i instanceof f.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,T.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class LO extends f.wS{constructor(o,t,i,r,l){super(o,t,i,r,l,!0)}}class GO extends f.ul{constructor(o,t,i,r=!1){super(o,t,r),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new f.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new LO("name","The insurancesector name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class $O extends ei{constructor(o){super("CreateInsuranceSectorAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new GO("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateInsuranceSector({input:this.input}).pipe((0,h.w)(o=>(0,ie.of)(o.data.created)))}}class RO extends ei{constructor(o){super("UpdateInsuranceSectorsAction"),this.insuranceSectors=o}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.insuranceSectors,!0))}performAction(){this.response=this.businessProvider.data.userUpdateInsuranceSectors({input:{insuranceSectors:this.insuranceSectors}}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}class VO extends ei{constructor(o,t){super("UpdateInsuranceSectorAction"),this.insuranceSector=o,this.insuranceSectorId=t}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.insuranceSector,!0)).addRule(new f.xF("Id","Id should be a CUID and not null",this.insuranceSectorId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateInsuranceSector({insuranceSectorId:this.insuranceSectorId,input:this.insuranceSector}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}let _c=(()=>{class s extends y.nH{constructor(t,i,r){super("NotificationService.InsuranceSectorBusinessProviderService",t,r),this.data=i}createInsuranceSector(t){const i=new $O(t);return i.Do(this),i.response}updateInsuranceSector(t,i){const r=new VO(t,i);return r.Do(this),r.response}importInsuranceSectors(t){const i=new RO(t);return i.Do(this),i.response}validateInsuranceSectorExcelData(t){const i=new OO(t);return i.Do(this),i.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(O.ed),e.LFG(E.q),e.LFG(y.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),QO=(()=>{class s extends y.nH{constructor(t,i,r){super("InsuranceSectorService",r,t),this.businessProvider=i}createInsuranceSector(t){const i=Object.fromEntries(Object.entries(t).filter(([r,l])=>null!==l));return this.businessProvider.createInsuranceSector(i)}updateInsuranceSector(t,i){return this.businessProvider.updateInsuranceSector(t,i)}importInsuranceSectors(t){return this.businessProvider.importInsuranceSectors(t)}validateInsuranceSectorExcelData(t){return this.businessProvider.validateInsuranceSectorExcelData(t)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(_c,8),e.LFG(_c),e.LFG(O.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),So=(()=>{class s extends g.m1{constructor(t,i,r,l,u,P){super({loading:!1,insuranceSectors:[],done:!1,searchQuery:"",formName:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=r,this.toast=l,this.formService=u,this.insuranceSectorService=P,this.errors$=this.select(c=>c.errors),this.loading$=this.select(c=>c.loading),this.done$=this.select(c=>c.done),this.item$=this.select(c=>c.item),this.insuranceSectors$=this.select(c=>c.insuranceSectors),this.paging$=this.select(c=>c.paging),this.searchQuery$=this.select(c=>c.searchQuery),this.formName$=this.select(c=>c.formName),this.actionResult$=this.select(this.item$,this.done$,(c,d)=>({item:c,done:d}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.insuranceSectors$,(c,d,n,a,m)=>({errors:c,loading:d,item:n,formName:a,insuranceSectors:m}),{debounce:!0}),this.input$=this.select(this.paging$,this.searchQuery$,(c,d)=>({limit:c.limit,skip:c.skip,name:d,total:c.total})),this.setFormName=this.updater((c,d)=>Object.assign(Object.assign({},c),{formName:d})),this.setItem=this.updater((c,d)=>Object.assign(Object.assign({},c),{item:d})),this.addNewInsuranceSector=this.updater((c,d)=>Object.assign(Object.assign({},c),{insuranceSectors:[...c.insuranceSectors,d]})),this.updateInsuranceSector=this.updater((c,d)=>Object.assign(Object.assign({},c),{insuranceSectors:c.insuranceSectors.map(n=>n.id===d.id?d:n)})),this.addInsuranceSectors=this.updater((c,d)=>Object.assign(Object.assign({},c),{insuranceSectors:c.insuranceSectors.concat(d)})),this.updateInsuranceSectors=this.updater((c,d)=>Object.assign(Object.assign({},c),{insuranceSectors:c.insuranceSectors.map(n=>d.find(m=>m.id===n.id)||n)})),this.setSearchQuery=this.updater((c,d)=>Object.assign(Object.assign({},c),{searchQuery:d})),this.loadInsuranceSectorEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.data.userInsuranceSector({insuranceSectorId:d}).pipe((0,g._b)(n=>{this.patchState({item:n.data.item,errors:n.errors,loading:!1})},n=>this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})))))),this.loadInsuranceSectorsEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.input$),(0,h.w)(([d,n])=>this.data.userInsuranceSectors({input:n}).pipe((0,g._b)(a=>this.patchState({paging:{limit:n.limit,skip:n.skip,total:a.data.count.total},insuranceSectors:a.data.items,errors:a.errors,loading:!1}),a=>this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})))))),this.createInsuranceSectorEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.insuranceSectorService.createInsuranceSector(Object.assign({},d)).pipe((0,g._b)(n=>{this.addNewInsuranceSector(n),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:n,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},n=>{n.graphQLErrors?(this.toast.error(n.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})):(this.toast.error(n.Message),this.formService.setErrors(n.Data))}))))),this.updateInsuranceSectorEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([d,n])=>this.insuranceSectorService.updateInsuranceSector(d,d.id).pipe((0,g._b)(a=>{this.updateInsuranceSector(a),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:a,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.deleteInsuranceSectorEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([d,n])=>this.data.userDeleteInsuranceSector({insuranceSectorId:n.id}).pipe((0,g._b)(a=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:a.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.importExcelEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.insuranceSectorService.importInsuranceSectors(d).pipe((0,te.K)(n=>{var a;return this.toast.error(null!==(a=n.Message)&&void 0!==a?a:"Failed to save",{duration:3e3}),k.E}),(0,C.b)(n=>{const a=JSON.parse(n.created),m=JSON.parse(n.updated),p=JSON.parse(n.failed),_=a.length+m.length+p.length;this.addInsuranceSectors(a),this.updateInsuranceSectors(m),this.toast.success(`${a.length} created, ${m.length} updated, ${p.length} failed of total ${_}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("insuranceSectorId")?(this.route.snapshot.paramMap.get("insuranceSectorId"),this.setFormName("insuranceSector_edit")):this.setFormName("insuranceSector_create")}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.insuranceSectorService.validateInsuranceSectorExcelData(t)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(E.q),e.LFG(A.F0),e.LFG(A.gz),e.LFG(X.F),e.LFG(q.o),e.LFG(QO))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function UO(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close.emit())})("formIsReady",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.insuranceSector)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let gc=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"insuranceSector_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.insuranceSector=i.item})):t.formName&&t.formName.currentValue&&"insuranceSector_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadInsuranceSectorEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.insuranceSector=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(So),e.Y36(A.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-insurance-sector-form"]],inputs:{insuranceSector:"insuranceSector",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,UO,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[w.O5,z.M,w.Ov],encapsulation:2}),s})(),Cc=(()=>{class s{constructor(){this.autoHeight=!1,this.insuranceSectors=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[,{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var r;t.includes(null===(r=i.data)||void 0===r?void 0:r.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-insurance-sector-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(N.x,5),2&t){let r;e.iGM(r=e.CRH())&&(i.tableView=r.first)}},inputs:{autoHeight:"autoHeight",insuranceSectors:"insuranceSectors"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.insuranceSectors)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[N.x],encapsulation:2}),s})();function JO(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-insurance-sector-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","insuranceSector_edit")("formControl",t.formControl)("insuranceSector",t.insuranceSector)}}const jO=function(){return{}};function zO(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-insurance-sector-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","insuranceSector_create")("formControl",t.formControl)("insuranceSector",e.DdM(3,jO))}}function qO(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-insurance-sector-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(u.ref.close())}),e.qZA()}2&s&&e.Q6J("insuranceSectors",o.data.items)}let HO=(()=>{class s extends I.fS{constructor(t){super(),this.store=t,this.store.loadInsuranceSectorsEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.insuranceSectors$.pipe((0,h.w)(i=>(0,T.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(So))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","insuranceSector","send","close"],[1,"w-full","h-full","bg-white",3,"insuranceSectors","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,JO,2,3,"ng-template",null,1,e.W1O),e.YNc(3,zO,1,4,"ng-template",null,2,e.W1O),e.YNc(5,qO,1,1,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",u)("editTemplate",r)("createTemplate",l)("key",i.field.key)}},dependencies:[x.JJ,x.oH,J.$,gc,Cc],encapsulation:2}),s})();function KO(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-insurance-sector-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","insuranceSector_edit")("insuranceSector",t.value)}}const kO=function(){return{}};function ZO(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-insurance-sector-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","insuranceSector_create")("insuranceSector",e.DdM(2,kO))}function BO(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-insurance-sector-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(null==u.ref?null:u.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("insuranceSectors",t.items)}}let YO=(()=>{class s extends Y{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","insuranceSector","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","insuranceSectors","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,KO,1,2,"ng-template",null,1,e.W1O),e.YNc(3,ZO,1,3,"ng-template",null,2,e.W1O),e.YNc(5,BO,1,2,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[ee,gc,Cc],encapsulation:2}),s})(),XO=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[So],imports:[w.ez,R.F,x.UX,V.o,H.u,Q.P,U.t,Z,j.h,K.G,I.X0.forChild({types:[{name:"insurance-sector-select",component:HO,wrappers:["form-field"]},{name:"insurance-sector-grid",component:YO}]})]}),s})(),eL=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[XO]}),s})();class ti extends y.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class tL extends ti{constructor(o){super("ValidateInsuranceTypeExcelDataAction"),this.valid=!1,this.excelData=o}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name)}),this.validationContext.addRule(new f.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof f.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(r=>r.name),newNames:[i.newName]}):i instanceof f.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,T.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class iL extends f.wS{constructor(o,t,i,r,l){super(o,t,i,r,l,!0)}}class sL extends f.ul{constructor(o,t,i,r=!1){super(o,t,r),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new f.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new iL("name","The insurancetype name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class oL extends ti{constructor(o){super("CreateInsuranceTypeAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new sL("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateInsuranceType({input:this.input}).pipe((0,h.w)(o=>(0,ie.of)(o.data.created)))}}class rL extends ti{constructor(o){super("UpdateInsuranceTypesAction"),this.insuranceTypes=o}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.insuranceTypes,!0))}performAction(){this.response=this.businessProvider.data.userUpdateInsuranceTypes({input:{insuranceTypes:this.insuranceTypes}}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}class aL extends ti{constructor(o,t){super("UpdateInsuranceTypeAction"),this.insuranceType=o,this.insuranceTypeId=t}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.insuranceType,!0)).addRule(new f.xF("Id","Id should be a CUID and not null",this.insuranceTypeId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateInsuranceType({insuranceTypeId:this.insuranceTypeId,input:this.insuranceType}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}let Sc=(()=>{class s extends y.nH{constructor(t,i,r){super("NotificationService.InsuranceTypeBusinessProviderService",t,r),this.data=i}createInsuranceType(t){const i=new oL(t);return i.Do(this),i.response}updateInsuranceType(t,i){const r=new aL(t,i);return r.Do(this),r.response}importInsuranceTypes(t){const i=new rL(t);return i.Do(this),i.response}validateInsuranceTypeExcelData(t){const i=new tL(t);return i.Do(this),i.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(O.ed),e.LFG(E.q),e.LFG(y.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),nL=(()=>{class s extends y.nH{constructor(t,i,r){super("InsuranceTypeService",r,t),this.businessProvider=i}createInsuranceType(t){const i=Object.fromEntries(Object.entries(t).filter(([r,l])=>null!==l));return this.businessProvider.createInsuranceType(i)}updateInsuranceType(t,i){return this.businessProvider.updateInsuranceType(t,i)}importInsuranceTypes(t){return this.businessProvider.importInsuranceTypes(t)}validateInsuranceTypeExcelData(t){return this.businessProvider.validateInsuranceTypeExcelData(t)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(Sc,8),e.LFG(Sc),e.LFG(O.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),vo=(()=>{class s extends g.m1{constructor(t,i,r,l,u,P){super({loading:!1,insuranceTypes:[],done:!1,searchQuery:"",formName:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=r,this.toast=l,this.formService=u,this.insuranceTypeService=P,this.errors$=this.select(c=>c.errors),this.loading$=this.select(c=>c.loading),this.done$=this.select(c=>c.done),this.item$=this.select(c=>c.item),this.insuranceTypes$=this.select(c=>c.insuranceTypes),this.paging$=this.select(c=>c.paging),this.searchQuery$=this.select(c=>c.searchQuery),this.formName$=this.select(c=>c.formName),this.actionResult$=this.select(this.item$,this.done$,(c,d)=>({item:c,done:d}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.insuranceTypes$,(c,d,n,a,m)=>({errors:c,loading:d,item:n,formName:a,insuranceTypes:m}),{debounce:!0}),this.input$=this.select(this.paging$,this.searchQuery$,(c,d)=>({limit:c.limit,skip:c.skip,name:d,total:c.total})),this.setFormName=this.updater((c,d)=>Object.assign(Object.assign({},c),{formName:d})),this.setItem=this.updater((c,d)=>Object.assign(Object.assign({},c),{item:d})),this.addNewInsuranceType=this.updater((c,d)=>Object.assign(Object.assign({},c),{insuranceTypes:[...c.insuranceTypes,d]})),this.updateInsuranceType=this.updater((c,d)=>Object.assign(Object.assign({},c),{insuranceTypes:c.insuranceTypes.map(n=>n.id===d.id?d:n)})),this.addInsuranceTypes=this.updater((c,d)=>Object.assign(Object.assign({},c),{insuranceTypes:c.insuranceTypes.concat(d)})),this.updateInsuranceTypes=this.updater((c,d)=>Object.assign(Object.assign({},c),{insuranceTypes:c.insuranceTypes.map(n=>d.find(m=>m.id===n.id)||n)})),this.setSearchQuery=this.updater((c,d)=>Object.assign(Object.assign({},c),{searchQuery:d})),this.loadInsuranceTypeEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.data.userInsuranceType({insuranceTypeId:d}).pipe((0,g._b)(n=>{this.patchState({item:n.data.item,errors:n.errors,loading:!1})},n=>this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})))))),this.loadInsuranceTypesEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.input$),(0,h.w)(([d,n])=>this.data.userInsuranceTypes({input:n}).pipe((0,g._b)(a=>this.patchState({paging:{limit:n.limit,skip:n.skip,total:a.data.count.total},insuranceTypes:a.data.items,errors:a.errors,loading:!1}),a=>this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})))))),this.createInsuranceTypeEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.insuranceTypeService.createInsuranceType(Object.assign({},d)).pipe((0,g._b)(n=>{this.addNewInsuranceType(n),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:n,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},n=>{n.graphQLErrors?(this.toast.error(n.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})):(this.toast.error(n.Message),this.formService.setErrors(n.Data))}))))),this.updateInsuranceTypeEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([d,n])=>this.insuranceTypeService.updateInsuranceType(d,d.id).pipe((0,g._b)(a=>{this.updateInsuranceType(a),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:a,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.deleteInsuranceTypeEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([d,n])=>this.data.userDeleteInsuranceType({insuranceTypeId:n.id}).pipe((0,g._b)(a=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:a.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.importExcelEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.insuranceTypeService.importInsuranceTypes(d).pipe((0,te.K)(n=>{var a;return this.toast.error(null!==(a=n.Message)&&void 0!==a?a:"Failed to save",{duration:3e3}),k.E}),(0,C.b)(n=>{const a=JSON.parse(n.created),m=JSON.parse(n.updated),p=JSON.parse(n.failed),_=a.length+m.length+p.length;this.addInsuranceTypes(a),this.updateInsuranceTypes(m),this.toast.success(`${a.length} created, ${m.length} updated, ${p.length} failed of total ${_}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("insuranceTypeId")?(this.route.snapshot.paramMap.get("insuranceTypeId"),this.setFormName("insuranceType_edit")):this.setFormName("insuranceType_create")}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.insuranceTypeService.validateInsuranceTypeExcelData(t)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(E.q),e.LFG(A.F0),e.LFG(A.gz),e.LFG(X.F),e.LFG(q.o),e.LFG(nL))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function lL(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close.emit())})("formIsReady",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.insuranceType)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let vc=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"insuranceType_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.insuranceType=i.item})):t.formName&&t.formName.currentValue&&"insuranceType_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadInsuranceTypeEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.insuranceType=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(vo),e.Y36(A.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-insurance-type-form"]],inputs:{insuranceType:"insuranceType",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,lL,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[w.O5,z.M,w.Ov],encapsulation:2}),s})(),bc=(()=>{class s{constructor(){this.autoHeight=!1,this.insuranceTypes=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[,{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var r;t.includes(null===(r=i.data)||void 0===r?void 0:r.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-insurance-type-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(N.x,5),2&t){let r;e.iGM(r=e.CRH())&&(i.tableView=r.first)}},inputs:{autoHeight:"autoHeight",insuranceTypes:"insuranceTypes"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.insuranceTypes)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[N.x],encapsulation:2}),s})();function cL(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-insurance-type-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","insuranceType_edit")("formControl",t.formControl)("insuranceType",t.insuranceType)}}const dL=function(){return{}};function uL(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-insurance-type-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","insuranceType_create")("formControl",t.formControl)("insuranceType",e.DdM(3,dL))}}function mL(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-insurance-type-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(u.ref.close())}),e.qZA()}2&s&&e.Q6J("insuranceTypes",o.data.items)}let pL=(()=>{class s extends I.fS{constructor(t){super(),this.store=t,this.store.loadInsuranceTypesEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.insuranceTypes$.pipe((0,h.w)(i=>(0,T.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(vo))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","insuranceType","send","close"],[1,"w-full","h-full","bg-white",3,"insuranceTypes","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,cL,2,3,"ng-template",null,1,e.W1O),e.YNc(3,uL,1,4,"ng-template",null,2,e.W1O),e.YNc(5,mL,1,1,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",u)("editTemplate",r)("createTemplate",l)("key",i.field.key)}},dependencies:[x.JJ,x.oH,J.$,vc,bc],encapsulation:2}),s})();function hL(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-insurance-type-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","insuranceType_edit")("insuranceType",t.value)}}const fL=function(){return{}};function _L(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-insurance-type-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","insuranceType_create")("insuranceType",e.DdM(2,fL))}function gL(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-insurance-type-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(null==u.ref?null:u.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("insuranceTypes",t.items)}}let CL=(()=>{class s extends Y{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","insuranceType","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","insuranceTypes","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,hL,1,2,"ng-template",null,1,e.W1O),e.YNc(3,_L,1,3,"ng-template",null,2,e.W1O),e.YNc(5,gL,1,2,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[ee,vc,bc],encapsulation:2}),s})(),SL=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[vo],imports:[w.ez,R.F,x.UX,V.o,H.u,Q.P,U.t,Z,j.h,K.G,I.X0.forChild({types:[{name:"insurance-type-select",component:pL,wrappers:["form-field"]},{name:"insurance-type-grid",component:CL}]})]}),s})(),vL=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[SL]}),s})();class ii extends y.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class bL extends ii{constructor(o){super("ValidateIntegrationExcelDataAction"),this.valid=!1,this.excelData=o}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name)}),this.validationContext.addRule(new f.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof f.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(r=>r.name),newNames:[i.newName]}):i instanceof f.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,T.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class TL extends f.wS{constructor(o,t,i,r,l){super(o,t,i,r,l,!0)}}class yL extends f.ul{constructor(o,t,i,r=!1){super(o,t,r),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new f.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new TL("name","The integration name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class wL extends ii{constructor(o){super("CreateIntegrationAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new yL("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateIntegration({input:this.input}).pipe((0,h.w)(o=>(0,ie.of)(o.data.created)))}}class xL extends ii{constructor(o){super("UpdateIntegrationsAction"),this.integrations=o}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.integrations,!0))}performAction(){this.response=this.businessProvider.data.userUpdateIntegrations({input:{integrations:this.integrations}}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}class NL extends ii{constructor(o,t){super("UpdateIntegrationAction"),this.integration=o,this.integrationId=t}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.integration,!0)).addRule(new f.xF("Id","Id should be a CUID and not null",this.integrationId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateIntegration({integrationId:this.integrationId,input:this.integration}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}let Tc=(()=>{class s extends y.nH{constructor(t,i,r){super("NotificationService.IntegrationBusinessProviderService",t,r),this.data=i}createIntegration(t){const i=new wL(t);return i.Do(this),i.response}updateIntegration(t,i){const r=new NL(t,i);return r.Do(this),r.response}importIntegrations(t){const i=new xL(t);return i.Do(this),i.response}validateIntegrationExcelData(t){const i=new bL(t);return i.Do(this),i.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(O.ed),e.LFG(E.q),e.LFG(y.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),AL=(()=>{class s extends y.nH{constructor(t,i,r){super("IntegrationService",r,t),this.businessProvider=i}createIntegration(t){const i=Object.fromEntries(Object.entries(t).filter(([r,l])=>null!==l));return this.businessProvider.createIntegration(i)}updateIntegration(t,i){return this.businessProvider.updateIntegration(t,i)}importIntegrations(t){return this.businessProvider.importIntegrations(t)}validateIntegrationExcelData(t){return this.businessProvider.validateIntegrationExcelData(t)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(Tc,8),e.LFG(Tc),e.LFG(O.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),bo=(()=>{class s extends g.m1{constructor(t,i,r,l,u,P){super({loading:!1,integrations:[],done:!1,searchQuery:"",formName:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=r,this.toast=l,this.formService=u,this.integrationService=P,this.errors$=this.select(c=>c.errors),this.loading$=this.select(c=>c.loading),this.done$=this.select(c=>c.done),this.item$=this.select(c=>c.item),this.integrations$=this.select(c=>c.integrations),this.paging$=this.select(c=>c.paging),this.searchQuery$=this.select(c=>c.searchQuery),this.formName$=this.select(c=>c.formName),this.actionResult$=this.select(this.item$,this.done$,(c,d)=>({item:c,done:d}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.integrations$,(c,d,n,a,m)=>({errors:c,loading:d,item:n,formName:a,integrations:m}),{debounce:!0}),this.input$=this.select(this.paging$,this.searchQuery$,(c,d)=>({limit:c.limit,skip:c.skip,name:d,total:c.total})),this.setFormName=this.updater((c,d)=>Object.assign(Object.assign({},c),{formName:d})),this.setItem=this.updater((c,d)=>Object.assign(Object.assign({},c),{item:d})),this.addNewIntegration=this.updater((c,d)=>Object.assign(Object.assign({},c),{integrations:[...c.integrations,d]})),this.updateIntegration=this.updater((c,d)=>Object.assign(Object.assign({},c),{integrations:c.integrations.map(n=>n.id===d.id?d:n)})),this.addIntegrations=this.updater((c,d)=>Object.assign(Object.assign({},c),{integrations:c.integrations.concat(d)})),this.updateIntegrations=this.updater((c,d)=>Object.assign(Object.assign({},c),{integrations:c.integrations.map(n=>d.find(m=>m.id===n.id)||n)})),this.setSearchQuery=this.updater((c,d)=>Object.assign(Object.assign({},c),{searchQuery:d})),this.loadIntegrationEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.data.userIntegration({integrationId:d}).pipe((0,g._b)(n=>{this.patchState({item:n.data.item,errors:n.errors,loading:!1})},n=>this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})))))),this.loadIntegrationsEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.input$),(0,h.w)(([d,n])=>this.data.userIntegrations({input:n}).pipe((0,g._b)(a=>this.patchState({paging:{limit:n.limit,skip:n.skip,total:a.data.count.total},integrations:a.data.items,errors:a.errors,loading:!1}),a=>this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})))))),this.createIntegrationEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.integrationService.createIntegration(Object.assign({},d)).pipe((0,g._b)(n=>{this.addNewIntegration(n),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:n,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},n=>{n.graphQLErrors?(this.toast.error(n.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})):(this.toast.error(n.Message),this.formService.setErrors(n.Data))}))))),this.updateIntegrationEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([d,n])=>this.integrationService.updateIntegration(d,d.id).pipe((0,g._b)(a=>{this.updateIntegration(a),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:a,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.deleteIntegrationEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([d,n])=>this.data.userDeleteIntegration({integrationId:n.id}).pipe((0,g._b)(a=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:a.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.importExcelEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.integrationService.importIntegrations(d).pipe((0,te.K)(n=>{var a;return this.toast.error(null!==(a=n.Message)&&void 0!==a?a:"Failed to save",{duration:3e3}),k.E}),(0,C.b)(n=>{const a=JSON.parse(n.created),m=JSON.parse(n.updated),p=JSON.parse(n.failed),_=a.length+m.length+p.length;this.addIntegrations(a),this.updateIntegrations(m),this.toast.success(`${a.length} created, ${m.length} updated, ${p.length} failed of total ${_}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("integrationId")?(this.route.snapshot.paramMap.get("integrationId"),this.setFormName("integration_edit")):this.setFormName("integration_create")}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.integrationService.validateIntegrationExcelData(t)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(E.q),e.LFG(A.F0),e.LFG(A.gz),e.LFG(X.F),e.LFG(q.o),e.LFG(AL))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function FL(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close.emit())})("formIsReady",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.integration)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let yc=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"integration_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.integration=i.item})):t.formName&&t.formName.currentValue&&"integration_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadIntegrationEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.integration=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(bo),e.Y36(A.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-integration-form"]],inputs:{integration:"integration",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,FL,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[w.O5,z.M,w.Ov],encapsulation:2}),s})(),wc=(()=>{class s{constructor(){this.autoHeight=!1,this.integrations=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[,{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var r;t.includes(null===(r=i.data)||void 0===r?void 0:r.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-integration-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(N.x,5),2&t){let r;e.iGM(r=e.CRH())&&(i.tableView=r.first)}},inputs:{autoHeight:"autoHeight",integrations:"integrations"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.integrations)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[N.x],encapsulation:2}),s})();function DL(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-integration-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","integration_edit")("formControl",t.formControl)("integration",t.integration)}}const IL=function(){return{}};function PL(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-integration-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","integration_create")("formControl",t.formControl)("integration",e.DdM(3,IL))}}function WL(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-integration-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(u.ref.close())}),e.qZA()}2&s&&e.Q6J("integrations",o.data.items)}let ML=(()=>{class s extends I.fS{constructor(t){super(),this.store=t,this.store.loadIntegrationsEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.integrations$.pipe((0,h.w)(i=>(0,T.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(bo))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","integration","send","close"],[1,"w-full","h-full","bg-white",3,"integrations","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,DL,2,3,"ng-template",null,1,e.W1O),e.YNc(3,PL,1,4,"ng-template",null,2,e.W1O),e.YNc(5,WL,1,1,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",u)("editTemplate",r)("createTemplate",l)("key",i.field.key)}},dependencies:[x.JJ,x.oH,J.$,yc,wc],encapsulation:2}),s})();function EL(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-integration-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","integration_edit")("integration",t.value)}}const OL=function(){return{}};function LL(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-integration-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","integration_create")("integration",e.DdM(2,OL))}function GL(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-integration-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(null==u.ref?null:u.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("integrations",t.items)}}let $L=(()=>{class s extends Y{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","integration","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","integrations","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,EL,1,2,"ng-template",null,1,e.W1O),e.YNc(3,LL,1,3,"ng-template",null,2,e.W1O),e.YNc(5,GL,1,2,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[ee,yc,wc],encapsulation:2}),s})(),RL=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[bo],imports:[w.ez,R.F,x.UX,V.o,H.u,Q.P,U.t,Z,j.h,K.G,I.X0.forChild({types:[{name:"integration-select",component:ML,wrappers:["form-field"]},{name:"integration-grid",component:$L}]})]}),s})(),VL=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[RL]}),s})();class si extends y.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class QL extends si{constructor(o,t){super("ValidateInvoiceDetailExcelDataAction"),this.valid=!1,this.excelData=o,this.invoices=t}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name),this.validationContext.addRule(new f.mi(`invoiceName_${i}_is_valid}`,"Invoice Is Not Valid","invoice.name",t.invoice,this.invoices,!0))}),this.validationContext.addRule(new f.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof f.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(r=>r.name),newNames:[i.newName]}):i instanceof f.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,T.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class UL extends f.wS{constructor(o,t,i,r,l){super(o,t,i,r,l,!0)}}class JL extends f.ul{constructor(o,t,i,r=!1){super(o,t,r),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new f.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new UL("name","The invoicedetail name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class jL extends si{constructor(o){super("CreateInvoiceDetailAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new JL("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateInvoiceDetail({input:this.input}).pipe((0,h.w)(o=>(0,ie.of)(o.data.created)))}}class zL extends si{constructor(o){super("UpdateInvoiceDetailsAction"),this.invoiceDetails=o}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.invoiceDetails,!0))}performAction(){this.response=this.businessProvider.data.userUpdateInvoiceDetails({input:{invoiceDetails:this.invoiceDetails}}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}class qL extends si{constructor(o,t){super("UpdateInvoiceDetailAction"),this.invoiceDetail=o,this.invoiceDetailId=t}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.invoiceDetail,!0)).addRule(new f.xF("Id","Id should be a CUID and not null",this.invoiceDetailId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateInvoiceDetail({invoiceDetailId:this.invoiceDetailId,input:this.invoiceDetail}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}let xc=(()=>{class s extends y.nH{constructor(t,i,r){super("NotificationService.InvoiceDetailBusinessProviderService",t,r),this.data=i}createInvoiceDetail(t){const i=new jL(t);return i.Do(this),i.response}updateInvoiceDetail(t,i){const r=new qL(t,i);return r.Do(this),r.response}importInvoiceDetails(t){const i=new zL(t);return i.Do(this),i.response}validateInvoiceDetailExcelData(t,i){const r=new QL(t,i);return r.Do(this),r.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(O.ed),e.LFG(E.q),e.LFG(y.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),HL=(()=>{class s extends y.nH{constructor(t,i,r){super("InvoiceDetailService",r,t),this.businessProvider=i}createInvoiceDetail(t){const i=Object.fromEntries(Object.entries(t).filter(([r,l])=>null!==l));return this.businessProvider.createInvoiceDetail(i)}updateInvoiceDetail(t,i){return this.businessProvider.updateInvoiceDetail(t,i)}importInvoiceDetails(t){return this.businessProvider.importInvoiceDetails(t)}validateInvoiceDetailExcelData(t,i){return this.businessProvider.validateInvoiceDetailExcelData(t,i)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(xc,8),e.LFG(xc),e.LFG(O.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),To=(()=>{class s extends g.m1{constructor(t,i,r,l,u,P){if(super({loading:!1,invoiceDetails:[],done:!1,searchQuery:"",formName:void 0,invoiceId:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=r,this.toast=l,this.formService=u,this.invoiceDetailService=P,this.errors$=this.select(d=>d.errors),this.loading$=this.select(d=>d.loading),this.done$=this.select(d=>d.done),this.item$=this.select(d=>d.item),this.invoiceDetails$=this.select(d=>d.invoiceDetails),this.invoices$=this.select(d=>d.invoices||[]),this.invoiceId$=this.select(d=>d.invoiceId),this.paging$=this.select(d=>d.paging),this.searchQuery$=this.select(d=>d.searchQuery),this.formName$=this.select(d=>d.formName),this.actionResult$=this.select(this.item$,this.done$,(d,n)=>({item:d,done:n}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.invoiceDetails$,this.invoices$,(d,n,a,m,p,_)=>({errors:d,loading:n,item:a,formName:m,invoiceDetails:p,invoices:_}),{debounce:!0}),this.input$=this.select(this.paging$,this.invoiceId$,this.searchQuery$,(d,n,a)=>({limit:d.limit,skip:d.skip,name:a,invoiceId:n,total:d.total})),this.setFormName=this.updater((d,n)=>Object.assign(Object.assign({},d),{formName:n})),this.setInvoiceId=this.updater((d,n)=>Object.assign(Object.assign({},d),{invoiceId:n})),this.filterInvoices=d=>this.data.userSelectInvoices({input:{name:d}}).pipe((0,g._b)(n=>{let a=n.data.items;return this.patchState({invoices:a}),a},n=>this.patchState({errors:n.graphQLErrors?n.graphQLErrors:n})),(0,B.U)(n=>n.data.items)),this.addInvoice=this.updater((d,n)=>Object.assign(Object.assign({},d),{invoices:d.invoices.concat(n)})),this.setItem=this.updater((d,n)=>Object.assign(Object.assign({},d),{item:n})),this.addNewInvoiceDetail=this.updater((d,n)=>Object.assign(Object.assign({},d),{invoiceDetails:[...d.invoiceDetails,n]})),this.updateInvoiceDetail=this.updater((d,n)=>Object.assign(Object.assign({},d),{invoiceDetails:d.invoiceDetails.map(a=>a.id===n.id?n:a)})),this.addInvoiceDetails=this.updater((d,n)=>Object.assign(Object.assign({},d),{invoiceDetails:d.invoiceDetails.concat(n)})),this.updateInvoiceDetails=this.updater((d,n)=>Object.assign(Object.assign({},d),{invoiceDetails:d.invoiceDetails.map(a=>n.find(p=>p.id===a.id)||a)})),this.setSearchQuery=this.updater((d,n)=>Object.assign(Object.assign({},d),{searchQuery:n})),this.loadInvoiceDetailEffect=this.effect(d=>d.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(n=>this.data.userInvoiceDetail({invoiceDetailId:n}).pipe((0,g._b)(a=>{this.patchState({item:a.data.item,errors:a.errors,loading:!1})},a=>this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})))))),this.loadInvoiceDetailsEffect=this.effect(d=>d.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.input$),(0,h.w)(([n,a])=>this.data.userInvoiceDetails({input:a}).pipe((0,g._b)(m=>this.patchState({paging:{limit:a.limit,skip:a.skip,total:m.data.count.total},invoiceDetails:m.data.items,errors:m.errors,loading:!1}),m=>this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})))))),this.createInvoiceDetailEffect=this.effect(d=>d.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(n=>this.invoiceDetailService.createInvoiceDetail(Object.assign({},n)).pipe((0,g._b)(a=>{this.addNewInvoiceDetail(a),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:a,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.updateInvoiceDetailEffect=this.effect(d=>d.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([n,a])=>this.invoiceDetailService.updateInvoiceDetail(n,n.id).pipe((0,g._b)(m=>{this.updateInvoiceDetail(m),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:m,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},m=>{m.graphQLErrors?(this.toast.error(m.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})):(this.toast.error(m.Message),this.formService.setErrors(m.Data))}))))),this.deleteInvoiceDetailEffect=this.effect(d=>d.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([n,a])=>this.data.userDeleteInvoiceDetail({invoiceDetailId:a.id}).pipe((0,g._b)(m=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:m.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},m=>{m.graphQLErrors?(this.toast.error(m.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})):(this.toast.error(m.Message),this.formService.setErrors(m.Data))}))))),this.importExcelEffect=this.effect(d=>d.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(n=>this.invoiceDetailService.importInvoiceDetails(n).pipe((0,te.K)(a=>{var m;return this.toast.error(null!==(m=a.Message)&&void 0!==m?m:"Failed to save",{duration:3e3}),k.E}),(0,C.b)(a=>{const m=JSON.parse(a.created),p=JSON.parse(a.updated),_=JSON.parse(a.failed),v=m.length+p.length+_.length;this.addInvoiceDetails(m),this.updateInvoiceDetails(p),this.toast.success(`${m.length} created, ${p.length} updated, ${_.length} failed of total ${v}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("invoiceDetailId")?(this.route.snapshot.paramMap.get("invoiceDetailId"),this.setFormName("invoiceDetail_edit")):this.setFormName("invoiceDetail_create"),this.route.snapshot.paramMap.has("invoiceId")){var c=this.route.snapshot.paramMap.get("invoiceId");this.setInvoiceId(c)}}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.invoiceDetailService.validateInvoiceDetailExcelData(t,i.invoices)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(E.q),e.LFG(A.F0),e.LFG(A.gz),e.LFG(X.F),e.LFG(q.o),e.LFG(HL))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function KL(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close.emit())})("formIsReady",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.invoiceDetail)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let Nc=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"invoiceDetail_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({id:null,name:""}),this.store.vm$.subscribe(i=>{this.invoiceDetail=i.item})):t.formName&&t.formName.currentValue&&"invoiceDetail_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadInvoiceDetailEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.invoiceDetail=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(To),e.Y36(A.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-invoice-detail-form"]],inputs:{invoiceDetail:"invoiceDetail",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,KL,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[w.O5,z.M,w.Ov],encapsulation:2}),s})(),Ac=(()=>{class s{constructor(){this.autoHeight=!1,this.invoiceDetails=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[{field:"invoice.name",headerName:"Invoice",filter:"agTextColumnFilter"},{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{field:"invoiceId",filter:"agTextColumnFilter",hide:!0},{field:"dateOfService",filter:"agDateColumnFilter"},{field:"providerName",filter:"agTextColumnFilter"},{field:"procedureDescription",filter:"agTextColumnFilter"},{headerName:"Quantity",field:"quantity",valueFormatter:t=>{var i;return(0,S.oBD)(null===(i=t.data)||void 0===i?void 0:i.quantity,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{headerName:"Charges",field:"charges",valueFormatter:t=>{var i;return(0,S.oBD)(null===(i=t.data)||void 0===i?void 0:i.charges,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{headerName:"Line Total",field:"lineTotal",valueFormatter:t=>{var i;return(0,S.oBD)(null===(i=t.data)||void 0===i?void 0:i.lineTotal,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var r;t.includes(null===(r=i.data)||void 0===r?void 0:r.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-invoice-detail-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(N.x,5),2&t){let r;e.iGM(r=e.CRH())&&(i.tableView=r.first)}},inputs:{autoHeight:"autoHeight",invoiceDetails:"invoiceDetails"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:6,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.invoiceDetails)("showSidebar",!1)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[N.x],encapsulation:2}),s})();function kL(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-invoice-detail-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","invoiceDetail_edit")("formControl",t.formControl)("invoiceDetail",t.invoiceDetail)}}const ZL=function(){return{}};function BL(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-invoice-detail-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","invoiceDetail_create")("formControl",t.formControl)("invoiceDetail",e.DdM(3,ZL))}}function YL(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-invoice-detail-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(u.ref.close())}),e.qZA()}2&s&&e.Q6J("invoiceDetails",o.data.items)}let XL=(()=>{class s extends I.fS{constructor(t){super(),this.store=t,this.store.loadInvoiceDetailsEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.invoiceDetails$.pipe((0,h.w)(i=>(0,T.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(To))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:5,consts:[[3,"to","control","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","invoiceDetail","send","close"],[1,"w-full","h-full","bg-white",3,"invoiceDetails","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"ui-select-form",0),e.YNc(1,kL,2,3,"ng-template",null,1,e.W1O),e.YNc(3,BL,1,4,"ng-template",null,2,e.W1O),e.YNc(5,YL,1,1,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[x.JJ,x.oH,J.$,Nc,Ac],encapsulation:2}),s})();function eG(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-invoice-detail-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","invoiceDetail_edit")("invoiceDetail",t.value)}}const tG=function(){return{}};function iG(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-invoice-detail-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","invoiceDetail_create")("invoiceDetail",e.DdM(2,tG))}function sG(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-invoice-detail-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(null==u.ref?null:u.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("invoiceDetails",t.items)}}let oG=(()=>{class s extends Y{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:6,consts:[[3,"data","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","invoiceDetail","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","invoiceDetails","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,eG,1,2,"ng-template",null,1,e.W1O),e.YNc(3,iG,1,3,"ng-template",null,2,e.W1O),e.YNc(5,sG,1,2,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("data",i.data)("title",i.to.title)("onSave",i.onSave)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[ee,Nc,Ac],encapsulation:2}),s})(),rG=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[To],imports:[w.ez,R.F,x.UX,V.o,H.u,Q.P,U.t,Z,j.h,K.G,I.X0.forChild({types:[{name:"invoice-detail-select",component:XL,wrappers:["form-field"]},{name:"invoice-detail-grid",component:oG}]})]}),s})(),aG=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[rG]}),s})();class oi extends y.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class nG extends oi{constructor(o,t,i,r){super("ValidateInvoiceExcelDataAction"),this.valid=!1,this.excelData=o,this.billingOrganizations=t,this.legalCases=i,this.invoices=r}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name),this.validationContext.addRule(new f.mi(`billingOrganizationName_${i}_is_valid}`,"Billing Organization Is Not Valid","billingOrganization.name",t.billingOrganization,this.billingOrganizations,!0)),this.validationContext.addRule(new f.mi(`legalCaseName_${i}_is_valid}`,"Legal Case Is Not Valid","legalCase.name",t.legalCase,this.legalCases,!0)),this.validationContext.addRule(new f.mi(`invoiceName_${i}_is_valid}`,"Invoice Is Not Valid","invoice.name",t.invoice,this.invoices,!0))}),this.validationContext.addRule(new f.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof f.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(r=>r.name),newNames:[i.newName]}):i instanceof f.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,T.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class lG extends f.wS{constructor(o,t,i,r,l){super(o,t,i,r,l,!0)}}class cG extends f.ul{constructor(o,t,i,r=!1){super(o,t,r),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new f.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new lG("name","The invoice name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class dG extends oi{constructor(o){super("CreateInvoiceAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new cG("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateInvoice({input:this.input}).pipe((0,h.w)(o=>(0,ie.of)(o.data.created)))}}class uG extends oi{constructor(o){super("UpdateInvoicesAction"),this.invoices=o}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.invoices,!0))}performAction(){this.response=this.businessProvider.data.userUpdateInvoices({input:{invoices:this.invoices}}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}class mG extends oi{constructor(o,t){super("UpdateInvoiceAction"),this.invoice=o,this.invoiceId=t}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.invoice,!0)).addRule(new f.xF("Id","Id should be a CUID and not null",this.invoiceId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateInvoice({invoiceId:this.invoiceId,input:this.invoice}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}let Fc=(()=>{class s extends y.nH{constructor(t,i,r){super("NotificationService.InvoiceBusinessProviderService",t,r),this.data=i}createInvoice(t){const i=new dG(t);return i.Do(this),i.response}updateInvoice(t,i){const r=new mG(t,i);return r.Do(this),r.response}importInvoices(t){const i=new uG(t);return i.Do(this),i.response}validateInvoiceExcelData(t,i,r,l){const u=new nG(t,i,r,l);return u.Do(this),u.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(O.ed),e.LFG(E.q),e.LFG(y.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),pG=(()=>{class s extends y.nH{constructor(t,i,r){super("InvoiceService",r,t),this.businessProvider=i}createInvoice(t){const i=Object.fromEntries(Object.entries(t).filter(([r,l])=>null!==l));return this.businessProvider.createInvoice(i)}updateInvoice(t,i){return this.businessProvider.updateInvoice(t,i)}importInvoices(t){return this.businessProvider.importInvoices(t)}validateInvoiceExcelData(t,i,r,l){return this.businessProvider.validateInvoiceExcelData(t,i,r,l)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(Fc,8),e.LFG(Fc),e.LFG(O.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),yo=(()=>{class s extends g.m1{constructor(t,i,r,l,u,P){if(super({loading:!1,invoices:[],done:!1,searchQuery:"",formName:void 0,organizationId:void 0,legalCaseId:void 0,invoiceId:void 0,clinicalProviderId:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=r,this.toast=l,this.formService=u,this.invoiceService=P,this.errors$=this.select(n=>n.errors),this.loading$=this.select(n=>n.loading),this.done$=this.select(n=>n.done),this.item$=this.select(n=>n.item),this.invoices$=this.select(n=>n.invoices),this.organizations$=this.select(n=>n.organizations||[]),this.legalCases$=this.select(n=>n.legalCases||[]),this.attorneyId$=this.select(n=>n.attorneyId),this.documents$=this.select(n=>n.documents||[]),this.organizationId$=this.select(n=>n.organizationId),this.legalCaseId$=this.select(n=>n.legalCaseId),this.invoiceId$=this.select(n=>n.invoiceId),this.clinicalProviderId$=this.select(n=>n.clinicalProviderId),this.paging$=this.select(n=>n.paging),this.searchQuery$=this.select(n=>n.searchQuery),this.formName$=this.select(n=>n.formName),this.actionResult$=this.select(this.item$,this.done$,(n,a)=>({item:n,done:a}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.invoices$,this.organizations$,this.legalCases$,this.documents$,(n,a,m,p,_,v,D,se)=>({errors:n,loading:a,item:m,formName:p,invoices:_,organizations:v,legalCases:D,documents:se}),{debounce:!0}),this.input$=this.select(this.paging$,this.organizationId$,this.legalCaseId$,this.invoiceId$,this.searchQuery$,this.attorneyId$,this.clinicalProviderId$,(n,a,m,p,_,v,D)=>({limit:n.limit,skip:n.skip,name:_,attorneyId:v,clinicalProviderId:D,organizationId:a,legalCaseId:m,invoiceId:p,total:n.total})),this.setFormName=this.updater((n,a)=>Object.assign(Object.assign({},n),{formName:a})),this.setOrganizationId=this.updater((n,a)=>Object.assign(Object.assign({},n),{organizationId:a})),this.setLegalCaseId=this.updater((n,a)=>Object.assign(Object.assign({},n),{legalCaseId:a})),this.setClinicalProviderId=this.updater((n,a)=>Object.assign(Object.assign({},n),{clinicalProviderId:a})),this.setAttorneyId=this.updater((n,a)=>Object.assign(Object.assign({},n),{attorneyId:a})),this.setInvoiceId=this.updater((n,a)=>Object.assign(Object.assign({},n),{invoiceId:a})),this.setSkip=this.updater((n,a)=>Object.assign(Object.assign({},n),{paging:Object.assign(Object.assign({},n.paging),{skip:a})})),this.setLimit=this.updater((n,a)=>Object.assign(Object.assign({},n),{paging:Object.assign(Object.assign({},n.paging),{limit:a})})),this.filterOrganizations=n=>this.data.userSelectOrganizations({input:{name:n}}).pipe((0,g._b)(a=>{let m=a.data.items;return this.patchState({organizations:m}),m},a=>this.patchState({errors:a.graphQLErrors?a.graphQLErrors:a})),(0,B.U)(a=>a.data.items)),this.filterLegalCases=n=>this.data.userSelectLegalCases({input:{name:n}}).pipe((0,g._b)(a=>{let m=a.data.items;return this.patchState({legalCases:m}),m},a=>this.patchState({errors:a.graphQLErrors?a.graphQLErrors:a})),(0,B.U)(a=>a.data.items)),this.filterDocuments=n=>this.data.userSelectDocuments({input:{name:n}}).pipe((0,g._b)(a=>{let m=a.data.items;return this.patchState({documents:m}),m},a=>this.patchState({errors:a.graphQLErrors?a.graphQLErrors:a})),(0,B.U)(a=>a.data.items)),this.addOrganization=this.updater((n,a)=>Object.assign(Object.assign({},n),{organizations:n.organizations.concat(a)})),this.addLegalCase=this.updater((n,a)=>Object.assign(Object.assign({},n),{legalCases:n.legalCases.concat(a)})),this.addDocument=this.updater((n,a)=>Object.assign(Object.assign({},n),{documents:n.documents.concat(a)})),this.setItem=this.updater((n,a)=>Object.assign(Object.assign({},n),{item:a})),this.addNewInvoice=this.updater((n,a)=>Object.assign(Object.assign({},n),{invoices:[...n.invoices,a]})),this.updateInvoice=this.updater((n,a)=>Object.assign(Object.assign({},n),{invoices:n.invoices.map(m=>m.id===a.id?a:m)})),this.addInvoices=this.updater((n,a)=>Object.assign(Object.assign({},n),{invoices:n.invoices.concat(a)})),this.updateInvoices=this.updater((n,a)=>Object.assign(Object.assign({},n),{invoices:n.invoices.map(m=>a.find(_=>_.id===m.id)||m)})),this.setSearchQuery=this.updater((n,a)=>Object.assign(Object.assign({},n),{searchQuery:a})),this.loadInvoiceEffect=this.effect(n=>n.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(a=>this.data.userInvoice({invoiceId:a}).pipe((0,g._b)(m=>{this.patchState({item:m.data.item,errors:m.errors,loading:!1})},m=>this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})))))),this.loadInvoicesEffect=this.effect(n=>n.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.input$),(0,h.w)(([a,m])=>this.data.userInvoices({input:m}).pipe((0,g._b)(p=>{console.log({limit:m.limit,skip:m.skip,total:p.data.count.total}),this.patchState({paging:{limit:m.limit,skip:m.skip,total:p.data.count.total},invoices:p.data.items,errors:p.errors,loading:!1})},p=>this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})))))),this.createInvoiceEffect=this.effect(n=>n.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(a=>this.invoiceService.createInvoice(Object.assign({},a)).pipe((0,g._b)(m=>{this.addNewInvoice(m),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:m,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},m=>{m.graphQLErrors?(this.toast.error(m.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})):(this.toast.error(m.Message),this.formService.setErrors(m.Data))}))))),this.updateInvoiceEffect=this.effect(n=>n.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([a,m])=>this.invoiceService.updateInvoice(a,a.id).pipe((0,g._b)(p=>{this.updateInvoice(p),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:p,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},p=>{p.graphQLErrors?(this.toast.error(p.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})):(this.toast.error(p.Message),this.formService.setErrors(p.Data))}))))),this.deleteInvoiceEffect=this.effect(n=>n.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([a,m])=>this.data.userDeleteInvoice({invoiceId:m.id}).pipe((0,g._b)(p=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:p.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},p=>{p.graphQLErrors?(this.toast.error(p.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})):(this.toast.error(p.Message),this.formService.setErrors(p.Data))}))))),this.importExcelEffect=this.effect(n=>n.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(a=>this.invoiceService.importInvoices(a).pipe((0,te.K)(m=>{var p;return this.toast.error(null!==(p=m.Message)&&void 0!==p?p:"Failed to save",{duration:3e3}),k.E}),(0,C.b)(m=>{const p=JSON.parse(m.created),_=JSON.parse(m.updated),v=JSON.parse(m.failed),D=p.length+_.length+v.length;this.addInvoices(p),this.updateInvoices(_),this.toast.success(`${p.length} created, ${_.length} updated, ${v.length} failed of total ${D}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("invoiceId")){var b=this.route.snapshot.paramMap.get("invoiceId");this.setFormName("invoice_edit")}else this.setFormName("invoice_create");if(this.route.snapshot.paramMap.has("organizationId")){var c=this.route.snapshot.paramMap.get("organizationId");this.setOrganizationId(c)}if(this.route.snapshot.paramMap.has("legalCaseId")){var d=this.route.snapshot.paramMap.get("legalCaseId");this.setLegalCaseId(d)}this.route.snapshot.paramMap.has("invoiceId")&&(b=this.route.snapshot.paramMap.get("invoiceId"),this.setInvoiceId(b))}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.invoiceService.validateInvoiceExcelData(t,i.organizations,i.legalCases,i.documents)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(E.q),e.LFG(A.F0),e.LFG(A.gz),e.LFG(X.F),e.LFG(q.o),e.LFG(pG))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function hG(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close.emit())})("formIsReady",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.invoice)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let Dc=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"invoice_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({id:null,name:""}),this.store.vm$.subscribe(i=>{this.invoice=i.item})):t.formName&&t.formName.currentValue&&"invoice_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadInvoiceEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.invoice=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(yo),e.Y36(A.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-invoice-form"]],inputs:{invoice:"invoice",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,hG,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[w.O5,z.M,w.Ov],encapsulation:2}),s})(),Ic=(()=>{class s{constructor(){this.autoHeight=!1,this.invoices=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[{field:"billingOrganization.name",headerName:"Billing Organization",filter:"agTextColumnFilter"},{field:"clinicalProvider.name",headerName:"Clinical Provider",filter:"agTextColumnFilter"},{field:"legalCase.name",headerName:"Legal Case",filter:"agTextColumnFilter"},{field:"invoice.name",headerName:"Invoice",filter:"agTextColumnFilter"},{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{field:"invoiceNumber",filter:"agTextColumnFilter"},{headerName:"Amount",field:"amount",valueFormatter:t=>{var i;return(0,S.oBD)(null===(i=t.data)||void 0===i?void 0:i.amount,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{headerName:"Paid",field:"paid",valueFormatter:t=>{var i;return(0,S.oBD)(null===(i=t.data)||void 0===i?void 0:i.paid,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{headerName:"Due",field:"due",valueFormatter:t=>{var i;return(0,S.oBD)(null===(i=t.data)||void 0===i?void 0:i.due,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{field:"organizationId",filter:"agTextColumnFilter",hide:!0},{field:"legalCaseId",filter:"agTextColumnFilter",hide:!0},{field:"invoiceId",filter:"agTextColumnFilter",hide:!0}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var r;t.includes(null===(r=i.data)||void 0===r?void 0:r.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-invoice-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(N.x,5),2&t){let r;e.iGM(r=e.CRH())&&(i.tableView=r.first)}},inputs:{autoHeight:"autoHeight",invoices:"invoices"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.invoices)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[N.x],encapsulation:2}),s})();function fG(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-invoice-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","invoice_edit")("formControl",t.formControl)("invoice",t.invoice)}}const _G=function(){return{}};function gG(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-invoice-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","invoice_create")("formControl",t.formControl)("invoice",e.DdM(3,_G))}}function CG(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-invoice-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(u.ref.close())}),e.qZA()}2&s&&e.Q6J("invoices",o.data.items)}let SG=(()=>{class s extends I.fS{constructor(t){super(),this.store=t,this.store.loadInvoicesEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.invoices$.pipe((0,h.w)(i=>(0,T.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(yo))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:5,consts:[[3,"to","control","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","invoice","send","close"],[1,"w-full","h-full","bg-white",3,"invoices","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"ui-select-form",0),e.YNc(1,fG,2,3,"ng-template",null,1,e.W1O),e.YNc(3,gG,1,4,"ng-template",null,2,e.W1O),e.YNc(5,CG,1,1,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[x.JJ,x.oH,J.$,Dc,Ic],encapsulation:2}),s})();function vG(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-invoice-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","invoice_edit")("invoice",t.value)}}const bG=function(){return{}};function TG(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-invoice-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","invoice_create")("invoice",e.DdM(2,bG))}function yG(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-invoice-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(null==u.ref?null:u.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("invoices",t.items)}}let wG=(()=>{class s extends Y{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:6,consts:[[3,"data","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","invoice","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","invoices","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,vG,1,2,"ng-template",null,1,e.W1O),e.YNc(3,TG,1,3,"ng-template",null,2,e.W1O),e.YNc(5,yG,1,2,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("data",i.data)("title",i.to.title)("onSave",i.onSave)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[ee,Dc,Ic],encapsulation:2}),s})(),xG=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[yo],imports:[w.ez,R.F,x.UX,V.o,H.u,Q.P,U.t,Z,j.h,K.G,I.X0.forChild({types:[{name:"invoice-select",component:SG,wrappers:["form-field"]},{name:"invoice-grid",component:wG}]})]}),s})(),NG=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[xG]}),s})();class ri extends y.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class AG extends ri{constructor(o,t){super("ValidateJournalEntryExcelDataAction"),this.valid=!1,this.excelData=o,this.caseAccounts=t}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name),this.validationContext.addRule(new f.mi(`caseAccountName_${i}_is_valid}`,"Case Account Is Not Valid","caseAccount.name",t.caseAccount,this.caseAccounts,!0))}),this.validationContext.addRule(new f.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof f.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(r=>r.name),newNames:[i.newName]}):i instanceof f.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,T.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class FG extends f.wS{constructor(o,t,i,r,l){super(o,t,i,r,l,!0)}}class DG extends f.ul{constructor(o,t,i,r=!1){super(o,t,r),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new f.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new FG("name","The journalentry name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class IG extends ri{constructor(o){super("CreateJournalEntryAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new DG("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateJournalEntry({input:this.input}).pipe((0,h.w)(o=>(0,ie.of)(o.data.created)))}}class PG extends ri{constructor(o){super("UpdateJournalEntriesAction"),this.journalEntries=o}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.journalEntries,!0))}performAction(){this.response=this.businessProvider.data.userUpdateJournalEntries({input:{journalEntries:this.journalEntries}}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}class WG extends ri{constructor(o,t){super("UpdateJournalEntryAction"),this.journalEntry=o,this.journalEntryId=t}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.journalEntry,!0)).addRule(new f.xF("Id","Id should be a CUID and not null",this.journalEntryId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateJournalEntry({journalEntryId:this.journalEntryId,input:this.journalEntry}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}let Pc=(()=>{class s extends y.nH{constructor(t,i,r){super("NotificationService.JournalEntryBusinessProviderService",t,r),this.data=i}createJournalEntry(t){const i=new IG(t);return i.Do(this),i.response}updateJournalEntry(t,i){const r=new WG(t,i);return r.Do(this),r.response}importJournalEntries(t){const i=new PG(t);return i.Do(this),i.response}validateJournalEntryExcelData(t,i){const r=new AG(t,i);return r.Do(this),r.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(O.ed),e.LFG(E.q),e.LFG(y.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),MG=(()=>{class s extends y.nH{constructor(t,i,r){super("JournalEntryService",r,t),this.businessProvider=i}createJournalEntry(t){const i=Object.fromEntries(Object.entries(t).filter(([r,l])=>null!==l));return this.businessProvider.createJournalEntry(i)}updateJournalEntry(t,i){return this.businessProvider.updateJournalEntry(t,i)}importJournalEntries(t){return this.businessProvider.importJournalEntries(t)}validateJournalEntryExcelData(t,i){return this.businessProvider.validateJournalEntryExcelData(t,i)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(Pc,8),e.LFG(Pc),e.LFG(O.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),wo=(()=>{class s extends g.m1{constructor(t,i,r,l,u,P){if(super({loading:!1,journalEntries:[],done:!1,searchQuery:"",formName:void 0,caseAccountId:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=r,this.toast=l,this.formService=u,this.journalEntryService=P,this.errors$=this.select(d=>d.errors),this.loading$=this.select(d=>d.loading),this.done$=this.select(d=>d.done),this.item$=this.select(d=>d.item),this.journalEntries$=this.select(d=>d.journalEntries),this.caseAccounts$=this.select(d=>d.caseAccounts||[]),this.caseAccountId$=this.select(d=>d.caseAccountId),this.paging$=this.select(d=>d.paging),this.searchQuery$=this.select(d=>d.searchQuery),this.formName$=this.select(d=>d.formName),this.actionResult$=this.select(this.item$,this.done$,(d,n)=>({item:d,done:n}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.journalEntries$,this.caseAccounts$,(d,n,a,m,p,_)=>({errors:d,loading:n,item:a,formName:m,journalEntries:p,caseAccounts:_}),{debounce:!0}),this.input$=this.select(this.paging$,this.caseAccountId$,this.searchQuery$,(d,n,a)=>({limit:d.limit,skip:d.skip,name:a,caseAccountId:n,total:d.total})),this.setFormName=this.updater((d,n)=>Object.assign(Object.assign({},d),{formName:n})),this.setCaseAccountId=this.updater((d,n)=>Object.assign(Object.assign({},d),{caseAccountId:n})),this.filterCaseAccounts=d=>this.data.userSelectCaseAccounts({input:{name:d}}).pipe((0,g._b)(n=>{let a=n.data.items;return this.patchState({caseAccounts:a}),a},n=>this.patchState({errors:n.graphQLErrors?n.graphQLErrors:n})),(0,B.U)(n=>n.data.items)),this.addCaseAccount=this.updater((d,n)=>Object.assign(Object.assign({},d),{caseAccounts:d.caseAccounts.concat(n)})),this.setItem=this.updater((d,n)=>Object.assign(Object.assign({},d),{item:n})),this.addNewJournalEntry=this.updater((d,n)=>Object.assign(Object.assign({},d),{journalEntries:[...d.journalEntries,n]})),this.updateJournalEntry=this.updater((d,n)=>Object.assign(Object.assign({},d),{journalEntries:d.journalEntries.map(a=>a.id===n.id?n:a)})),this.addJournalEntries=this.updater((d,n)=>Object.assign(Object.assign({},d),{journalEntries:d.journalEntries.concat(n)})),this.updateJournalEntries=this.updater((d,n)=>Object.assign(Object.assign({},d),{journalEntries:d.journalEntries.map(a=>n.find(p=>p.id===a.id)||a)})),this.setSearchQuery=this.updater((d,n)=>Object.assign(Object.assign({},d),{searchQuery:n})),this.loadJournalEntryEffect=this.effect(d=>d.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(n=>this.data.userJournalEntry({journalEntryId:n}).pipe((0,g._b)(a=>{this.patchState({item:a.data.item,errors:a.errors,loading:!1})},a=>this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})))))),this.loadJournalEntriesEffect=this.effect(d=>d.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.input$),(0,h.w)(([n,a])=>this.data.userJournalEntries({input:a}).pipe((0,g._b)(m=>this.patchState({paging:{limit:a.limit,skip:a.skip,total:m.data.count.total},journalEntries:m.data.items,errors:m.errors,loading:!1}),m=>this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})))))),this.createJournalEntryEffect=this.effect(d=>d.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(n=>this.journalEntryService.createJournalEntry(Object.assign({},n)).pipe((0,g._b)(a=>{this.addNewJournalEntry(a),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:a,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.updateJournalEntryEffect=this.effect(d=>d.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([n,a])=>this.journalEntryService.updateJournalEntry(n,n.id).pipe((0,g._b)(m=>{this.updateJournalEntry(m),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:m,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},m=>{m.graphQLErrors?(this.toast.error(m.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})):(this.toast.error(m.Message),this.formService.setErrors(m.Data))}))))),this.deleteJournalEntryEffect=this.effect(d=>d.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([n,a])=>this.data.userDeleteJournalEntry({journalEntryId:a.id}).pipe((0,g._b)(m=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:m.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},m=>{m.graphQLErrors?(this.toast.error(m.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})):(this.toast.error(m.Message),this.formService.setErrors(m.Data))}))))),this.importExcelEffect=this.effect(d=>d.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(n=>this.journalEntryService.importJournalEntries(n).pipe((0,te.K)(a=>{var m;return this.toast.error(null!==(m=a.Message)&&void 0!==m?m:"Failed to save",{duration:3e3}),k.E}),(0,C.b)(a=>{const m=JSON.parse(a.created),p=JSON.parse(a.updated),_=JSON.parse(a.failed),v=m.length+p.length+_.length;this.addJournalEntries(m),this.updateJournalEntries(p),this.toast.success(`${m.length} created, ${p.length} updated, ${_.length} failed of total ${v}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("journalEntryId")?(this.route.snapshot.paramMap.get("journalEntryId"),this.setFormName("journalEntry_edit")):this.setFormName("journalEntry_create"),this.route.snapshot.paramMap.has("caseAccountId")){var c=this.route.snapshot.paramMap.get("caseAccountId");this.setCaseAccountId(c)}}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.journalEntryService.validateJournalEntryExcelData(t,i.caseAccounts)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(E.q),e.LFG(A.F0),e.LFG(A.gz),e.LFG(X.F),e.LFG(q.o),e.LFG(MG))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function EG(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close.emit())})("formIsReady",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.journalEntry)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let Wc=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"journalEntry_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({id:null,name:""}),this.store.vm$.subscribe(i=>{this.journalEntry=i.item})):t.formName&&t.formName.currentValue&&"journalEntry_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadJournalEntryEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.journalEntry=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(wo),e.Y36(A.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-journal-entry-form"]],inputs:{journalEntry:"journalEntry",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,EG,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[w.O5,z.M,w.Ov],encapsulation:2}),s})(),Mc=(()=>{class s{constructor(){this.autoHeight=!1,this.journalEntries=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[{field:"caseAccount.name",headerName:"Case Account",filter:"agTextColumnFilter"},{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{field:"locationName",filter:"agTextColumnFilter"},{field:"fromTo",filter:"agTextColumnFilter"},{field:"frequency",filter:"agTextColumnFilter"},{field:"autoOrManual",filter:"agTextColumnFilter"},{field:"process",filter:"agTextColumnFilter"},{field:"perAccountOrAggregateJE",filter:"agTextColumnFilter"},{headerName:"Cost Rate",field:"costRate",valueFormatter:t=>{var i;return(0,S.oBD)(null===(i=t.data)||void 0===i?void 0:i.costRate,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{field:"postingDate",filter:"agDateColumnFilter"},{field:"documentDate",filter:"agDateColumnFilter"},{field:"dueDate",filter:"agDateColumnFilter"},{headerName:"Amount",field:"amount",valueFormatter:t=>{var i;return(0,S.oBD)(null===(i=t.data)||void 0===i?void 0:i.amount,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{field:"accountType",filter:"agTextColumnFilter"},{field:"accountNumber",filter:"agTextColumnFilter"},{field:"costCenter",filter:"agTextColumnFilter"},{field:"appliesToDocumentNumber",filter:"agTextColumnFilter"},{field:"caseAccountId",filter:"agTextColumnFilter",hide:!0}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var r;t.includes(null===(r=i.data)||void 0===r?void 0:r.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-journal-entry-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(N.x,5),2&t){let r;e.iGM(r=e.CRH())&&(i.tableView=r.first)}},inputs:{autoHeight:"autoHeight",journalEntries:"journalEntries"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.journalEntries)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[N.x],encapsulation:2}),s})();function OG(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-journal-entry-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","journalEntry_edit")("formControl",t.formControl)("journalEntry",t.journalEntry)}}const LG=function(){return{}};function GG(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-journal-entry-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","journalEntry_create")("formControl",t.formControl)("journalEntry",e.DdM(3,LG))}}function $G(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-journal-entry-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(u.ref.close())}),e.qZA()}2&s&&e.Q6J("journalEntries",o.data.items)}let RG=(()=>{class s extends I.fS{constructor(t){super(),this.store=t,this.store.loadJournalEntriesEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.journalEntries$.pipe((0,h.w)(i=>(0,T.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(wo))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","journalEntry","send","close"],[1,"w-full","h-full","bg-white",3,"journalEntries","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,OG,2,3,"ng-template",null,1,e.W1O),e.YNc(3,GG,1,4,"ng-template",null,2,e.W1O),e.YNc(5,$G,1,1,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",u)("editTemplate",r)("createTemplate",l)("key",i.field.key)}},dependencies:[x.JJ,x.oH,J.$,Wc,Mc],encapsulation:2}),s})();function VG(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-journal-entry-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","journalEntry_edit")("journalEntry",t.value)}}const QG=function(){return{}};function UG(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-journal-entry-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","journalEntry_create")("journalEntry",e.DdM(2,QG))}function JG(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-journal-entry-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(null==u.ref?null:u.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("journalEntries",t.items)}}let jG=(()=>{class s extends Y{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:6,consts:[[3,"data","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","journalEntry","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","journalEntries","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,VG,1,2,"ng-template",null,1,e.W1O),e.YNc(3,UG,1,3,"ng-template",null,2,e.W1O),e.YNc(5,JG,1,2,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("data",i.data)("title",i.to.title)("onSave",i.onSave)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[ee,Wc,Mc],encapsulation:2}),s})(),zG=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[wo],imports:[w.ez,R.F,x.UX,V.o,H.u,Q.P,U.t,Z,j.h,K.G,I.X0.forChild({types:[{name:"journal-entry-select",component:RG,wrappers:["form-field"]},{name:"journal-entry-grid",component:jG}]})]}),s})(),qG=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[zG]}),s})();class ai extends y.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class HG extends ai{constructor(o){super("ValidateLanguageExcelDataAction"),this.valid=!1,this.excelData=o}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name)}),this.validationContext.addRule(new f.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof f.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(r=>r.name),newNames:[i.newName]}):i instanceof f.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,T.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class KG extends f.wS{constructor(o,t,i,r,l){super(o,t,i,r,l,!0)}}class kG extends f.ul{constructor(o,t,i,r=!1){super(o,t,r),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new f.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new KG("name","The language name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class ZG extends ai{constructor(o){super("CreateLanguageAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new kG("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateLanguage({input:this.input}).pipe((0,h.w)(o=>(0,ie.of)(o.data.created)))}}class BG extends ai{constructor(o){super("UpdateLanguagesAction"),this.languages=o}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.languages,!0))}performAction(){this.response=this.businessProvider.data.userUpdateLanguages({input:{languages:this.languages}}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}class YG extends ai{constructor(o,t){super("UpdateLanguageAction"),this.language=o,this.languageId=t}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.language,!0)).addRule(new f.xF("Id","Id should be a CUID and not null",this.languageId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateLanguage({languageId:this.languageId,input:this.language}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}let Ec=(()=>{class s extends y.nH{constructor(t,i,r){super("NotificationService.LanguageBusinessProviderService",t,r),this.data=i}createLanguage(t){const i=new ZG(t);return i.Do(this),i.response}updateLanguage(t,i){const r=new YG(t,i);return r.Do(this),r.response}importLanguages(t){const i=new BG(t);return i.Do(this),i.response}validateLanguageExcelData(t){const i=new HG(t);return i.Do(this),i.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(O.ed),e.LFG(E.q),e.LFG(y.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),XG=(()=>{class s extends y.nH{constructor(t,i,r){super("LanguageService",r,t),this.businessProvider=i}createLanguage(t){const i=Object.fromEntries(Object.entries(t).filter(([r,l])=>null!==l));return this.businessProvider.createLanguage(i)}updateLanguage(t,i){return this.businessProvider.updateLanguage(t,i)}importLanguages(t){return this.businessProvider.importLanguages(t)}validateLanguageExcelData(t){return this.businessProvider.validateLanguageExcelData(t)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(Ec,8),e.LFG(Ec),e.LFG(O.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),xo=(()=>{class s extends g.m1{constructor(t,i,r,l,u,P){super({loading:!1,languages:[],done:!1,searchQuery:"",formName:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=r,this.toast=l,this.formService=u,this.languageService=P,this.errors$=this.select(c=>c.errors),this.loading$=this.select(c=>c.loading),this.done$=this.select(c=>c.done),this.item$=this.select(c=>c.item),this.languages$=this.select(c=>c.languages),this.paging$=this.select(c=>c.paging),this.searchQuery$=this.select(c=>c.searchQuery),this.formName$=this.select(c=>c.formName),this.actionResult$=this.select(this.item$,this.done$,(c,d)=>({item:c,done:d}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.languages$,(c,d,n,a,m)=>({errors:c,loading:d,item:n,formName:a,languages:m}),{debounce:!0}),this.input$=this.select(this.paging$,this.searchQuery$,(c,d)=>({limit:c.limit,skip:c.skip,name:d,total:c.total})),this.setFormName=this.updater((c,d)=>Object.assign(Object.assign({},c),{formName:d})),this.setItem=this.updater((c,d)=>Object.assign(Object.assign({},c),{item:d})),this.addNewLanguage=this.updater((c,d)=>Object.assign(Object.assign({},c),{languages:[...c.languages,d]})),this.updateLanguage=this.updater((c,d)=>Object.assign(Object.assign({},c),{languages:c.languages.map(n=>n.id===d.id?d:n)})),this.addLanguages=this.updater((c,d)=>Object.assign(Object.assign({},c),{languages:c.languages.concat(d)})),this.updateLanguages=this.updater((c,d)=>Object.assign(Object.assign({},c),{languages:c.languages.map(n=>d.find(m=>m.id===n.id)||n)})),this.setSearchQuery=this.updater((c,d)=>Object.assign(Object.assign({},c),{searchQuery:d})),this.loadLanguageEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.data.userLanguage({languageId:d}).pipe((0,g._b)(n=>{this.patchState({item:n.data.item,errors:n.errors,loading:!1})},n=>this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})))))),this.loadLanguagesEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.input$),(0,h.w)(([d,n])=>this.data.userLanguages({input:n}).pipe((0,g._b)(a=>this.patchState({paging:{limit:n.limit,skip:n.skip,total:a.data.count.total},languages:a.data.items,errors:a.errors,loading:!1}),a=>this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})))))),this.createLanguageEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.languageService.createLanguage(Object.assign({},d)).pipe((0,g._b)(n=>{this.addNewLanguage(n),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:n,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},n=>{n.graphQLErrors?(this.toast.error(n.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})):(this.toast.error(n.Message),this.formService.setErrors(n.Data))}))))),this.updateLanguageEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([d,n])=>this.languageService.updateLanguage(d,d.id).pipe((0,g._b)(a=>{this.updateLanguage(a),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:a,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.deleteLanguageEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([d,n])=>this.data.userDeleteLanguage({languageId:n.id}).pipe((0,g._b)(a=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:a.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.importExcelEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.languageService.importLanguages(d).pipe((0,te.K)(n=>{var a;return this.toast.error(null!==(a=n.Message)&&void 0!==a?a:"Failed to save",{duration:3e3}),k.E}),(0,C.b)(n=>{const a=JSON.parse(n.created),m=JSON.parse(n.updated),p=JSON.parse(n.failed),_=a.length+m.length+p.length;this.addLanguages(a),this.updateLanguages(m),this.toast.success(`${a.length} created, ${m.length} updated, ${p.length} failed of total ${_}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("languageId")?(this.route.snapshot.paramMap.get("languageId"),this.setFormName("language_edit")):this.setFormName("language_create")}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.languageService.validateLanguageExcelData(t)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(E.q),e.LFG(A.F0),e.LFG(A.gz),e.LFG(X.F),e.LFG(q.o),e.LFG(XG))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function e3(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close.emit())})("formIsReady",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.language)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let Oc=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"language_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.language=i.item})):t.formName&&t.formName.currentValue&&"language_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadLanguageEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.language=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(xo),e.Y36(A.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-language-form"]],inputs:{language:"language",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,e3,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[w.O5,z.M,w.Ov],encapsulation:2}),s})(),Lc=(()=>{class s{constructor(){this.autoHeight=!1,this.languages=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[,{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var r;t.includes(null===(r=i.data)||void 0===r?void 0:r.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}ngOnInit(){}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-language-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(N.x,5),2&t){let r;e.iGM(r=e.CRH())&&(i.tableView=r.first)}},inputs:{autoHeight:"autoHeight",languages:"languages"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.languages)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[N.x],encapsulation:2}),s})();function t3(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-language-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","language_edit")("formControl",t.formControl)("language",t.language)}}const i3=function(){return{}};function s3(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-language-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","language_create")("formControl",t.formControl)("language",e.DdM(3,i3))}}function o3(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-language-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(u.ref.close())}),e.qZA()}2&s&&e.Q6J("languages",o.data.items)}let r3=(()=>{class s extends I.fS{constructor(t){super(),this.store=t,this.store.loadLanguagesEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.languages$.pipe((0,h.w)(i=>(0,T.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(xo))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","language","send","close"],[1,"w-full","h-full","bg-white",3,"languages","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,t3,2,3,"ng-template",null,1,e.W1O),e.YNc(3,s3,1,4,"ng-template",null,2,e.W1O),e.YNc(5,o3,1,1,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",u)("editTemplate",r)("createTemplate",l)("key",i.field.key)}},dependencies:[x.JJ,x.oH,J.$,Oc,Lc],encapsulation:2}),s})();function a3(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-language-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","language_edit")("language",t.value)}}const n3=function(){return{}};function l3(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-language-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","language_create")("language",e.DdM(2,n3))}function c3(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-language-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(null==u.ref?null:u.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("languages",t.items)}}let d3=(()=>{class s extends Y{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","language","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","languages","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,a3,1,2,"ng-template",null,1,e.W1O),e.YNc(3,l3,1,3,"ng-template",null,2,e.W1O),e.YNc(5,c3,1,2,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[ee,Oc,Lc],encapsulation:2}),s})(),u3=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[xo],imports:[w.ez,R.F,x.UX,V.o,H.u,Q.P,U.t,Z,j.h,K.G,I.X0.forChild({types:[{name:"language-select",component:r3,wrappers:["form-field"]},{name:"language-grid",component:d3}]})]}),s})(),m3=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[u3]}),s})();class ni extends y.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class p3 extends ni{constructor(o,t){super("ValidateLeadActionExcelDataAction"),this.valid=!1,this.excelData=o,this.leads=t}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name),this.validationContext.addRule(new f.mi(`leadName_${i}_is_valid}`,"Lead Is Not Valid","lead.name",t.lead,this.leads,!0))}),this.validationContext.addRule(new f.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof f.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(r=>r.name),newNames:[i.newName]}):i instanceof f.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,T.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class h3 extends f.wS{constructor(o,t,i,r,l){super(o,t,i,r,l,!0)}}class f3 extends f.ul{constructor(o,t,i,r=!1){super(o,t,r),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new f.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new h3("name","The leadaction name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class _3 extends ni{constructor(o){super("CreateLeadActionAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new f3("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateLeadAction({input:this.input}).pipe((0,h.w)(o=>(0,ie.of)(o.data.created)))}}class g3 extends ni{constructor(o){super("UpdateLeadActionsAction"),this.leadActions=o}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.leadActions,!0))}performAction(){this.response=this.businessProvider.data.userUpdateLeadActions({input:{leadActions:this.leadActions}}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}class C3 extends ni{constructor(o,t){super("UpdateLeadActionAction"),this.leadAction=o,this.leadActionId=t}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.leadAction,!0)).addRule(new f.xF("Id","Id should be a CUID and not null",this.leadActionId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateLeadAction({leadActionId:this.leadActionId,input:this.leadAction}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}let Gc=(()=>{class s extends y.nH{constructor(t,i,r){super("NotificationService.LeadActionBusinessProviderService",t,r),this.data=i}createLeadAction(t){const i=new _3(t);return i.Do(this),i.response}updateLeadAction(t,i){const r=new C3(t,i);return r.Do(this),r.response}importLeadActions(t){const i=new g3(t);return i.Do(this),i.response}validateLeadActionExcelData(t,i){const r=new p3(t,i);return r.Do(this),r.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(O.ed),e.LFG(E.q),e.LFG(y.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),S3=(()=>{class s extends y.nH{constructor(t,i,r){super("LeadActionService",r,t),this.businessProvider=i}createLeadAction(t){const i=Object.fromEntries(Object.entries(t).filter(([r,l])=>null!==l));return this.businessProvider.createLeadAction(i)}updateLeadAction(t,i){return this.businessProvider.updateLeadAction(t,i)}importLeadActions(t){return this.businessProvider.importLeadActions(t)}validateLeadActionExcelData(t,i){return this.businessProvider.validateLeadActionExcelData(t,i)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(Gc,8),e.LFG(Gc),e.LFG(O.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),No=(()=>{class s extends g.m1{constructor(t,i,r,l,u,P){if(super({loading:!1,leadActions:[],done:!1,searchQuery:"",formName:void 0,leadId:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=r,this.toast=l,this.formService=u,this.leadActionService=P,this.errors$=this.select(d=>d.errors),this.loading$=this.select(d=>d.loading),this.done$=this.select(d=>d.done),this.item$=this.select(d=>d.item),this.leadActions$=this.select(d=>d.leadActions),this.leads$=this.select(d=>d.leads||[]),this.leadId$=this.select(d=>d.leadId),this.paging$=this.select(d=>d.paging),this.searchQuery$=this.select(d=>d.searchQuery),this.formName$=this.select(d=>d.formName),this.actionResult$=this.select(this.item$,this.done$,(d,n)=>({item:d,done:n}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.leadActions$,this.leads$,(d,n,a,m,p,_)=>({errors:d,loading:n,item:a,formName:m,leadActions:p,leads:_}),{debounce:!0}),this.input$=this.select(this.paging$,this.leadId$,this.searchQuery$,(d,n,a)=>({limit:d.limit,skip:d.skip,name:a,leadId:n,total:d.total})),this.setFormName=this.updater((d,n)=>Object.assign(Object.assign({},d),{formName:n})),this.setLeadId=this.updater((d,n)=>Object.assign(Object.assign({},d),{leadId:n})),this.filterLeads=d=>this.data.userSelectLeads({input:{name:d}}).pipe((0,g._b)(n=>{let a=n.data.items;return this.patchState({leads:a}),a},n=>this.patchState({errors:n.graphQLErrors?n.graphQLErrors:n})),(0,B.U)(n=>n.data.items)),this.addLead=this.updater((d,n)=>Object.assign(Object.assign({},d),{leads:d.leads.concat(n)})),this.setItem=this.updater((d,n)=>Object.assign(Object.assign({},d),{item:n})),this.addNewLeadAction=this.updater((d,n)=>Object.assign(Object.assign({},d),{leadActions:[...d.leadActions,n]})),this.updateLeadAction=this.updater((d,n)=>Object.assign(Object.assign({},d),{leadActions:d.leadActions.map(a=>a.id===n.id?n:a)})),this.addLeadActions=this.updater((d,n)=>Object.assign(Object.assign({},d),{leadActions:d.leadActions.concat(n)})),this.updateLeadActions=this.updater((d,n)=>Object.assign(Object.assign({},d),{leadActions:d.leadActions.map(a=>n.find(p=>p.id===a.id)||a)})),this.setSearchQuery=this.updater((d,n)=>Object.assign(Object.assign({},d),{searchQuery:n})),this.loadLeadActionEffect=this.effect(d=>d.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(n=>this.data.userLeadAction({leadActionId:n}).pipe((0,g._b)(a=>{this.patchState({item:a.data.item,errors:a.errors,loading:!1})},a=>this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})))))),this.loadLeadActionsEffect=this.effect(d=>d.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.input$),(0,h.w)(([n,a])=>this.data.userLeadActions({input:a}).pipe((0,g._b)(m=>this.patchState({paging:{limit:a.limit,skip:a.skip,total:m.data.count.total},leadActions:m.data.items,errors:m.errors,loading:!1}),m=>this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})))))),this.createLeadActionEffect=this.effect(d=>d.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(n=>this.leadActionService.createLeadAction(Object.assign({},n)).pipe((0,g._b)(a=>{this.addNewLeadAction(a),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:a,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.updateLeadActionEffect=this.effect(d=>d.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([n,a])=>this.leadActionService.updateLeadAction(n,n.id).pipe((0,g._b)(m=>{this.updateLeadAction(m),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:m,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},m=>{m.graphQLErrors?(this.toast.error(m.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})):(this.toast.error(m.Message),this.formService.setErrors(m.Data))}))))),this.deleteLeadActionEffect=this.effect(d=>d.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([n,a])=>this.data.userDeleteLeadAction({leadActionId:a.id}).pipe((0,g._b)(m=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:m.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},m=>{m.graphQLErrors?(this.toast.error(m.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})):(this.toast.error(m.Message),this.formService.setErrors(m.Data))}))))),this.importExcelEffect=this.effect(d=>d.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(n=>this.leadActionService.importLeadActions(n).pipe((0,te.K)(a=>{var m;return this.toast.error(null!==(m=a.Message)&&void 0!==m?m:"Failed to save",{duration:3e3}),k.E}),(0,C.b)(a=>{const m=JSON.parse(a.created),p=JSON.parse(a.updated),_=JSON.parse(a.failed),v=m.length+p.length+_.length;this.addLeadActions(m),this.updateLeadActions(p),this.toast.success(`${m.length} created, ${p.length} updated, ${_.length} failed of total ${v}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("leadActionId")?(this.route.snapshot.paramMap.get("leadActionId"),this.setFormName("leadAction_edit")):this.setFormName("leadAction_create"),this.route.snapshot.paramMap.has("leadId")){var c=this.route.snapshot.paramMap.get("leadId");this.setLeadId(c)}}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.leadActionService.validateLeadActionExcelData(t,i.leads)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(E.q),e.LFG(A.F0),e.LFG(A.gz),e.LFG(X.F),e.LFG(q.o),e.LFG(S3))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function v3(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close.emit())})("formIsReady",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.leadAction)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let $c=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"leadAction_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({id:null,name:""}),this.store.vm$.subscribe(i=>{this.leadAction=i.item})):t.formName&&t.formName.currentValue&&"leadAction_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadLeadActionEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.leadAction=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(No),e.Y36(A.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-lead-action-form"]],inputs:{leadAction:"leadAction",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,v3,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[w.O5,z.M,w.Ov],encapsulation:2}),s})(),Rc=(()=>{class s{constructor(){this.autoHeight=!1,this.leadActions=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[{field:"lead.name",headerName:"Lead",filter:"agTextColumnFilter"},{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{field:"leadId",filter:"agTextColumnFilter",hide:!0}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var r;t.includes(null===(r=i.data)||void 0===r?void 0:r.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-lead-action-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(N.x,5),2&t){let r;e.iGM(r=e.CRH())&&(i.tableView=r.first)}},inputs:{autoHeight:"autoHeight",leadActions:"leadActions"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.leadActions)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[N.x],encapsulation:2}),s})();function b3(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-lead-action-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","leadAction_edit")("formControl",t.formControl)("leadAction",t.leadAction)}}const T3=function(){return{}};function y3(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-lead-action-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","leadAction_create")("formControl",t.formControl)("leadAction",e.DdM(3,T3))}}function w3(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-lead-action-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(u.ref.close())}),e.qZA()}2&s&&e.Q6J("leadActions",o.data.items)}let x3=(()=>{class s extends I.fS{constructor(t){super(),this.store=t,this.store.loadLeadActionsEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.leadActions$.pipe((0,h.w)(i=>(0,T.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(No))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","leadAction","send","close"],[1,"w-full","h-full","bg-white",3,"leadActions","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,b3,2,3,"ng-template",null,1,e.W1O),e.YNc(3,y3,1,4,"ng-template",null,2,e.W1O),e.YNc(5,w3,1,1,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",u)("editTemplate",r)("createTemplate",l)("key",i.field.key)}},dependencies:[x.JJ,x.oH,J.$,$c,Rc],encapsulation:2}),s})();function N3(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-lead-action-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","leadAction_edit")("leadAction",t.value)}}const A3=function(){return{}};function F3(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-lead-action-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","leadAction_create")("leadAction",e.DdM(2,A3))}function D3(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-lead-action-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(null==u.ref?null:u.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("leadActions",t.items)}}let I3=(()=>{class s extends Y{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:6,consts:[[3,"data","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","leadAction","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","leadActions","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,N3,1,2,"ng-template",null,1,e.W1O),e.YNc(3,F3,1,3,"ng-template",null,2,e.W1O),e.YNc(5,D3,1,2,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("data",i.data)("title",i.to.title)("onSave",i.onSave)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[ee,$c,Rc],encapsulation:2}),s})(),P3=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[No],imports:[w.ez,R.F,x.UX,V.o,H.u,Q.P,U.t,Z,j.h,K.G,I.X0.forChild({types:[{name:"lead-action-select",component:x3,wrappers:["form-field"]},{name:"lead-action-grid",component:I3}]})]}),s})(),W3=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[P3]}),s})();class $e extends y.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class M3 extends $e{constructor(o,t,i,r,l){super("ValidateLeadExcelDataAction"),this.valid=!1,this.excelData=o,this.accidentTypes=t,this.statuses=i,this.sourceOfLeads=r,this.submittedBies=l}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name),this.validationContext.addRule(new f.mi(`accidentTypeName_${i}_is_valid}`,"Accident Type Is Not Valid","accidentType.name",t.accidentType,this.accidentTypes,!0)),this.validationContext.addRule(new f.mi(`statusName_${i}_is_valid}`,"Status Is Not Valid","status.name",t.status,this.statuses,!0)),this.validationContext.addRule(new f.mi(`sourceOfLeadName_${i}_is_valid}`,"Source of Lead Is Not Valid","sourceOfLead.name",t.sourceOfLead,this.sourceOfLeads,!0))}),this.validationContext.addRule(new f.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof f.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(r=>r.name),newNames:[i.newName]}):i instanceof f.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,T.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class E3 extends f.ul{constructor(o,t,i,r=!1){super(o,t,r),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new f.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser))}}class O3 extends $e{constructor(o){super("CreateLeadAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new E3("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateLead({input:this.input}).pipe((0,h.w)(o=>(0,ie.of)(o.data.created)))}}class L3 extends $e{constructor(o){super("SyncMrnToPharmacyAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.input,!0)).addRule(new f.xF("Id","Id should be a CUID and not null",this.input.id,!0))}performAction(){}}class G3 extends $e{constructor(o){super("UpdateLeadsAction"),this.leads=o}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.leads,!0))}performAction(){this.response=this.businessProvider.data.userUpdateLeads({input:{leads:this.leads}}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}class $3 extends $e{constructor(o,t){super("UpdateLeadAction"),this.lead=o,this.leadId=t}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.lead,!0)).addRule(new f.xF("Id","Id should be a CUID and not null",this.leadId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateLead({leadId:this.leadId,input:this.lead}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}let Vc=(()=>{class s extends y.nH{constructor(t,i,r){super("NotificationService.LeadBusinessProviderService",t,r),this.data=i}createLead(t){const i=new O3(t);return i.Do(this),i.response}updateLead(t,i){const r=new $3(t,i);return r.Do(this),r.response}userSyncMrnToPharmacy(t){const i=new L3(t);return i.Do(this),i.response}importLeads(t){const i=new G3(t);return i.Do(this),i.response}validateLeadExcelData(t,i,r,l,u){const P=new M3(t,i,r,l,u);return P.Do(this),P.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(O.ed),e.LFG(E.q),e.LFG(y.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),R3=(()=>{class s extends y.nH{constructor(t,i,r){super("LeadService",r,t),this.businessProvider=i}createLead(t){const i=Object.fromEntries(Object.entries(t).filter(([r,l])=>null!==l));return this.businessProvider.createLead(i)}updateLead(t,i){return this.businessProvider.updateLead(t,i)}userSyncMrnToPharmacy(t){return this.businessProvider.userSyncMrnToPharmacy(t)}importLeads(t){return this.businessProvider.importLeads(t)}validateLeadExcelData(t,i,r,l,u){return this.businessProvider.validateLeadExcelData(t,i,r,l,u)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(Vc,8),e.LFG(Vc),e.LFG(O.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),li=(()=>{class s extends g.m1{constructor(t,i,r,l,u,P){if(super({loading:!1,leads:[],done:!1,searchQuery:"",mrn:"",formName:void 0,accidentTypeId:void 0,driversLicenseId:void 0,policeReportAttachmentId:void 0,phoneRecordingId:void 0,leadStatusId:void 0,leadSourceId:void 0,submittedById:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=r,this.toast=l,this.formService=u,this.leadService=P,this.bodyPartInjured=[],this.errors$=this.select(b=>b.errors),this.loading$=this.select(b=>b.loading),this.done$=this.select(b=>b.done),this.item$=this.select(b=>b.item),this.leads$=this.select(b=>b.leads),this.accidentTypes$=this.select(b=>b.accidentTypes||[]),this.documents$=this.select(b=>b.documents||[]),this.leadStatuses$=this.select(b=>b.leadStatuses||[]),this.leadSources$=this.select(b=>b.leadSources||[]),this.users$=this.select(b=>b.users||[]),this.accidentTypeId$=this.select(b=>b.accidentTypeId),this.driversLicenseId$=this.select(b=>b.driversLicenseId),this.policeReportAttachmentId$=this.select(b=>b.policeReportAttachmentId),this.phoneRecordingId$=this.select(b=>b.phoneRecordingId),this.leadStatusId$=this.select(b=>b.leadStatusId),this.leadSourceId$=this.select(b=>b.leadSourceId),this.submittedById$=this.select(b=>b.submittedById),this.paging$=this.select(b=>b.paging),this.searchQuery$=this.select(b=>b.searchQuery),this.formName$=this.select(b=>b.formName),this.actionResult$=this.select(this.item$,this.done$,(b,c)=>({item:b,done:c}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.leads$,this.accidentTypes$,this.documents$,this.leadStatuses$,this.leadSources$,this.users$,(b,c,d,n,a,m,p,_,v,D)=>({errors:b,loading:c,item:d,formName:n,leads:a,accidentTypes:m,documents:p,leadStatuses:_,leadSources:v,users:D}),{debounce:!0}),this.input$=this.select(this.paging$,this.accidentTypeId$,this.driversLicenseId$,this.policeReportAttachmentId$,this.phoneRecordingId$,this.leadStatusId$,this.leadSourceId$,this.submittedById$,this.searchQuery$,(b,c,d,n,a,m,p,_,v)=>({limit:b.limit,skip:b.skip,name:v,accidentTypeId:c,driversLicenseId:d,policeReportAttachmentId:n,phoneRecordingId:a,leadStatusId:m,leadSourceId:p,submittedById:_,total:b.total})),this.setFormName=this.updater((b,c)=>Object.assign(Object.assign({},b),{formName:c})),this.setAccidentTypeId=this.updater((b,c)=>Object.assign(Object.assign({},b),{accidentTypeId:c})),this.setDriversLicenseId=this.updater((b,c)=>Object.assign(Object.assign({},b),{driversLicenseId:c})),this.setPoliceReportAttachmentId=this.updater((b,c)=>Object.assign(Object.assign({},b),{policeReportAttachmentId:c})),this.setPhoneRecordingId=this.updater((b,c)=>Object.assign(Object.assign({},b),{phoneRecordingId:c})),this.setLeadStatusId=this.updater((b,c)=>Object.assign(Object.assign({},b),{leadStatusId:c})),this.setLeadSourceId=this.updater((b,c)=>Object.assign(Object.assign({},b),{leadSourceId:c})),this.setSubmittedById=this.updater((b,c)=>Object.assign(Object.assign({},b),{submittedById:c})),this.filterAccidentTypes=b=>this.data.userSelectAccidentTypes({input:{name:b}}).pipe((0,g._b)(c=>{const d=c.data.items;return console.log("AccidentTypes",c.data.items),this.patchState({accidentTypes:d}),d},c=>this.patchState({errors:c.graphQLErrors?c.graphQLErrors:c})),(0,B.U)(c=>(console.log("filterAccidentTypes",c.data.items),c.data.items))),this.filterDocuments=b=>this.data.userSelectDocuments({input:{name:b}}).pipe((0,g._b)(c=>{const d=c.data.items;return this.patchState({documents:d}),d},c=>this.patchState({errors:c.graphQLErrors?c.graphQLErrors:c})),(0,B.U)(c=>c.data.items)),this.filterLeadStatuses=b=>this.data.userSelectLeadStatuses({input:{name:b}}).pipe((0,g._b)(c=>{const d=c.data.items;return this.patchState({leadStatuses:d}),d},c=>this.patchState({errors:c.graphQLErrors?c.graphQLErrors:c})),(0,B.U)(c=>c.data.items)),this.filterLeadSources=b=>this.data.userSelectLeadSources({input:{name:b}}).pipe((0,g._b)(c=>{const d=c.data.items;return this.patchState({leadSources:d}),d},c=>this.patchState({errors:c.graphQLErrors?c.graphQLErrors:c})),(0,B.U)(c=>c.data.items)),this.filterUsers=b=>this.data.userSelectUsers({input:{name:b}}).pipe((0,g._b)(c=>{const d=c.data.items;return this.patchState({users:d}),d},c=>this.patchState({errors:c.graphQLErrors?c.graphQLErrors:c})),(0,B.U)(c=>c.data.items)),this.filterBodyParts=b=>this.data.userSelectBodyParts({input:{name:b}}).pipe((0,g._b)(c=>{const d=c.data.items;return this.patchState({bodyParts:d}),d},c=>this.patchState({errors:c.graphQLErrors?c.graphQLErrors:c})),(0,B.U)(c=>c.data.items)),this.addAccidentType=this.updater((b,c)=>Object.assign(Object.assign({},b),{accidentTypes:b.accidentTypes.concat(c)})),this.addDocument=this.updater((b,c)=>Object.assign(Object.assign({},b),{documents:b.documents.concat(c)})),this.addLeadStatus=this.updater((b,c)=>Object.assign(Object.assign({},b),{leadStatuses:b.leadStatuses.concat(c)})),this.addLeadSource=this.updater((b,c)=>Object.assign(Object.assign({},b),{leadSources:b.leadSources.concat(c)})),this.addUser=this.updater((b,c)=>Object.assign(Object.assign({},b),{users:b.users.concat(c)})),this.setItem=this.updater((b,c)=>Object.assign(Object.assign({},b),{item:c})),this.addNewLead=this.updater((b,c)=>Object.assign(Object.assign({},b),{leads:[...b.leads,c]})),this.updateLead=this.updater((b,c)=>Object.assign(Object.assign({},b),{leads:b.leads.map(d=>d.id===c.id?c:d)})),this.addLeads=this.updater((b,c)=>Object.assign(Object.assign({},b),{leads:b.leads.concat(c)})),this.updateLeads=this.updater((b,c)=>Object.assign(Object.assign({},b),{leads:b.leads.map(d=>c.find(a=>a.id===d.id)||d)})),this.setSearchQuery=this.updater((b,c)=>Object.assign(Object.assign({},b),{searchQuery:c})),this.loadLeadEffect=this.effect(b=>b.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(c=>this.data.userLead({leadId:c}).pipe((0,g._b)(d=>{this.patchState({item:d.data.item,errors:d.errors,loading:!1})},d=>this.patchState({loading:!1,errors:d.graphQLErrors?d.graphQLErrors:d})))))),this.loadLeadsEffect=this.effect(b=>b.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.input$),(0,h.w)(([c,d])=>this.data.userLeads({input:d}).pipe((0,g._b)(n=>this.patchState({paging:{limit:d.limit,skip:d.skip,total:n.data.count.total},leads:n.data.items,errors:n.errors,loading:!1}),n=>this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})))))),this.createLeadEffect=this.effect(b=>b.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(c=>(console.log("input",c),this.leadService.createLead(Object.assign({},c)).pipe((0,g._b)(d=>{this.addNewLead(d),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:d,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},d=>{d.graphQLErrors?(this.toast.error(d.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:d.graphQLErrors?d.graphQLErrors:d})):(this.toast.error(d.Message),this.formService.setErrors(d.Data))})))))),this.updateLeadEffect=this.effect(b=>b.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([c,d])=>this.leadService.updateLead(d,d.id).pipe((0,g._b)(n=>{this.updateLead(n),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:n,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},n=>{n.graphQLErrors?(this.toast.error(n.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})):(this.toast.error(n.Message),this.formService.setErrors(n.Data))}))))),this.userSyncMrnToPharmacyEffect=this.effect(b=>b.pipe((0,C.b)(()=>{this.patchState({loading:!0})}),(0,h.w)(c=>this.data.userSyncMrnToPharmacy({input:c,mrn:c.legalCase.medicalRecordNumber}).pipe((0,g._b)(d=>{this.toast.success("Successfully synced mrn to pharmacy",{duration:3e3}),this.patchState({loading:!1})},d=>{this.toast.error("Failed to ",{duration:3e3}),this.patchState({loading:!1})}))))),this.deleteLeadEffect=this.effect(b=>b.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([c,d])=>this.data.userDeleteLead({leadId:d.id}).pipe((0,g._b)(n=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:n.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},n=>{n.graphQLErrors?(this.toast.error(n.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})):(this.toast.error(n.Message),this.formService.setErrors(n.Data))}))))),this.importExcelEffect=this.effect(b=>b.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(c=>this.leadService.importLeads(c).pipe((0,te.K)(d=>{var n;return this.toast.error(null!==(n=d.Message)&&void 0!==n?n:"Failed to save",{duration:3e3}),k.E}),(0,C.b)(d=>{const n=JSON.parse(d.created),a=JSON.parse(d.updated),m=JSON.parse(d.failed),p=n.length+a.length+m.length;this.addLeads(n),this.updateLeads(a),this.toast.success(`${n.length} created, ${a.length} updated, ${m.length} failed of total ${p}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("leadId")?(this.route.snapshot.paramMap.get("leadId"),this.setFormName("lead_edit")):this.setFormName("lead_create"),this.route.snapshot.paramMap.has("accidentTypeId")){const b=this.route.snapshot.paramMap.get("accidentTypeId");this.setAccidentTypeId(b)}if(this.route.snapshot.paramMap.has("driversLicenseId")){const b=this.route.snapshot.paramMap.get("driversLicenseId");this.setDriversLicenseId(b)}if(this.route.snapshot.paramMap.has("policeReportAttachmentId")){const b=this.route.snapshot.paramMap.get("policeReportAttachmentId");this.setPoliceReportAttachmentId(b)}if(this.route.snapshot.paramMap.has("phoneRecordingId")){const b=this.route.snapshot.paramMap.get("phoneRecordingId");this.setPhoneRecordingId(b)}if(this.route.snapshot.paramMap.has("leadStatusId")){const b=this.route.snapshot.paramMap.get("leadStatusId");this.setLeadStatusId(b)}if(this.route.snapshot.paramMap.has("leadSourceId")){const b=this.route.snapshot.paramMap.get("leadSourceId");this.setLeadSourceId(b)}if(this.route.snapshot.paramMap.has("submittedById")){const b=this.route.snapshot.paramMap.get("submittedById");this.setSubmittedById(b)}}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.leadService.validateLeadExcelData(t,i.accidentTypes,i.leadStatuses,i.leadSources,i.users)))}syncMrnToPharmacy(){return this.vm$.pipe((0,h.w)(t=>(0,T.of)(this.data.userSyncMrnToPharmacy({input:t.item,mrn:"123456"})).pipe((0,te.K)(r=>{var l;return this.toast.error(null!==(l=r.Message)&&void 0!==l?l:"Failed to save",{duration:3e3}),k.E}),(0,C.b)(r=>{r&&this.toast.success("Successfully synced to pharmacy, {result}",{duration:3e3})}))))}getMrn(){return this.vm$.pipe((0,h.w)(t=>(0,T.of)(this.data.getPatientMrnNumber({dateOfBirth:t.item.dateOfBirth,dateOfLoss:t.item.dateOfLoss,accidentKind:t.item.accidentTypeId,legalCaseId:t.item.id})).pipe((0,te.K)(i=>{var r;return this.toast.error(null!==(r=i.Message)&&void 0!==r?r:"Failed to save",{duration:3e3}),k.E}),(0,C.b)(i=>{i&&(console.log(i),this.toast.success(`Success, new MRN: ${i}`,{duration:3e3}))}))))}BodyPartsInjuredChanged(t){console.log("bodyParts",t),this.bodyPartInjured=t.map(i=>({bodyPartId:i}))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(E.q),e.LFG(A.F0),e.LFG(A.gz),e.LFG(X.F),e.LFG(q.o),e.LFG(R3))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function V3(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close.emit())})("formIsReady",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.lead)("formName",t.formName)("showSubmitButton",!0)("formData",t.formData)("componentStore",t.store)}}let Ao=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$,this.formData={accidentTypes:this.store.filterAccidentTypes(""),documents:this.store.filterDocuments(""),leadStatuses:this.store.filterLeadStatuses(""),leadSources:this.store.filterLeadSources(""),users:this.store.filterUsers(""),bodyParts:this.store.filterBodyParts("")}}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"lead_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.lead=i.item})):t.formName&&t.formName.currentValue&&"lead_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadLeadEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.lead=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(li),e.Y36(A.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-lead-form"]],inputs:{lead:"lead",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","formData","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,V3,4,5,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[w.O5,z.M,w.Ov],encapsulation:2}),s})(),Qc=(()=>{class s{constructor(){this.autoHeight=!1,this.leads=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[{field:"accidentType.name",headerName:"Accident Type",filter:"agTextColumnFilter"},{field:"driversLicense.name",headerName:"Drivers License",filter:"agTextColumnFilter"},{field:"policeReportAttachment.name",headerName:"Police Report Attachment",filter:"agTextColumnFilter"},{field:"phoneRecording.name",headerName:"Phone Recording",filter:"agTextColumnFilter"},{field:"status.name",headerName:"Status",filter:"agTextColumnFilter"},{field:"sourceOfLead.name",headerName:"Source of Lead",filter:"agTextColumnFilter"},{field:"submittedBy.name",headerName:"Submitted by",filter:"agTextColumnFilter"},{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{field:"firstName",filter:"agTextColumnFilter"},{field:"middleName",filter:"agTextColumnFilter"},{field:"lastName",filter:"agTextColumnFilter"},{field:"address",filter:"agTextColumnFilter"},{field:"city",filter:"agTextColumnFilter"},{field:"state",filter:"agTextColumnFilter"},{field:"postalCode",filter:"agTextColumnFilter"},{field:"dateOfBirth",filter:"agDateColumnFilter"},{field:"dateOfLoss",filter:"agDateColumnFilter"},{field:"dateOfRetention",filter:"agDateColumnFilter"},{field:"phoneNumber",filter:"agTextColumnFilter"},{field:"emailAddress",filter:"agTextColumnFilter"},{field:"priorRepresentation",filter:"agTextColumnFilter"},{field:"accidentTypeId",filter:"agTextColumnFilter",hide:!0},{field:"driversLicenseId",filter:"agTextColumnFilter",hide:!0},{field:"driversLicenseNumber",filter:"agTextColumnFilter"},{field:"driversLicenseState",filter:"agTextColumnFilter"},{headerName:"Severe Injury",field:"severeInjury",filter:"agSetColumnFilter",cellRenderer:"checkboxRenderer"},{field:"emergencyContactId",filter:"agTextColumnFilter"},{headerName:"Allowed to Contact Emergency Contact",field:"allowedToContactEmergencyContact",filter:"agSetColumnFilter",cellRenderer:"checkboxRenderer"},{headerName:"Police Report",field:"policeReport",filter:"agSetColumnFilter",cellRenderer:"checkboxRenderer"},{field:"policeReportAttachmentId",filter:"agTextColumnFilter",hide:!0},{field:"phoneRecordingId",filter:"agTextColumnFilter",hide:!0},{field:"leadStatusId",filter:"agTextColumnFilter",hide:!0},{field:"leadSpecialistId",filter:"agTextColumnFilter"},{field:"leadSourceId",filter:"agTextColumnFilter",hide:!0},{field:"submittedById",filter:"agTextColumnFilter",hide:!0},{field:"legalCaseId",filter:"agTextColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var r;t.includes(null===(r=i.data)||void 0===r?void 0:r.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-lead-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(N.x,5),2&t){let r;e.iGM(r=e.CRH())&&(i.tableView=r.first)}},inputs:{autoHeight:"autoHeight",leads:"leads"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","data","showSidebar","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("data",i.leads)("showSidebar",!1)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[N.x],encapsulation:2}),s})();function Q3(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-lead-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","lead_edit")("formControl",t.formControl)("lead",t.lead)}}const U3=function(){return{}};function J3(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-lead-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","lead_create")("formControl",t.formControl)("lead",e.DdM(3,U3))}}function j3(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-lead-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(u.ref.close())}),e.qZA()}2&s&&e.Q6J("leads",o.data.items)}let z3=(()=>{class s extends I.fS{constructor(t){super(),this.store=t,this.store.loadLeadsEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.leads$.pipe((0,h.w)(i=>(0,T.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(li))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e._Bn([li]),e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","lead","send","close"],[1,"w-full","h-full","bg-white",3,"leads","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,Q3,2,3,"ng-template",null,1,e.W1O),e.YNc(3,J3,1,4,"ng-template",null,2,e.W1O),e.YNc(5,j3,1,1,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",u)("editTemplate",r)("createTemplate",l)("key",i.field.key)}},dependencies:[x.JJ,x.oH,J.$,Ao,Qc],encapsulation:2}),s})();function q3(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-lead-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","lead_edit")("lead",t.value)}}const H3=function(){return{}};function K3(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-lead-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","lead_create")("lead",e.DdM(2,H3))}function k3(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-lead-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(null==u.ref?null:u.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("leads",t.items)}}let Z3=(()=>{class s extends Y{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:6,consts:[[3,"data","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","lead","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","leads","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,q3,1,2,"ng-template",null,1,e.W1O),e.YNc(3,K3,1,3,"ng-template",null,2,e.W1O),e.YNc(5,k3,1,2,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("data",i.data)("title",i.to.title)("onSave",i.onSave)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[ee,Ao,Qc],encapsulation:2}),s})();const B3=function(){return{}};let Y3=(()=>{class s extends I.fS{save(t){this.to.save&&this.to.save instanceof Function&&this.to.save(t)}cancel(){this.to.cancel&&this.to.cancel instanceof Function&&this.to.cancel()}}return s.\u0275fac=function(){let o;return function(i){return(o||(o=e.n5z(s)))(i||s)}}(),s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-web-lead-form"]],features:[e.qOj],decls:1,vars:4,consts:[[1,"flex-grow","flex","flex-col",3,"formName","formControl","lead","send","close"]],template:function(t,i){1&t&&(e.TgZ(0,"ui-lead-form",0),e.NdJ("send",function(l){return i.save(l)})("close",function(){return i.cancel()}),e.qZA()),2&t&&e.Q6J("formName","lead_create")("formControl",i.formControl)("lead",e.DdM(3,B3))},dependencies:[x.JJ,x.oH,Ao],encapsulation:2}),s})(),X3=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[li],imports:[w.ez,R.F,x.UX,V.o,H.u,Q.P,U.t,Z,j.h,K.G,I.X0.forChild({types:[{name:"lead-select",component:z3,wrappers:["form-field"]},{name:"lead-grid",component:Z3},{name:"lead-form",component:Y3}]})]}),s})(),e$=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[X3]}),s})();class ci extends y.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class t$ extends ci{constructor(o){super("ValidateLeadSourceExcelDataAction"),this.valid=!1,this.excelData=o}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name)}),this.validationContext.addRule(new f.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof f.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(r=>r.name),newNames:[i.newName]}):i instanceof f.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,T.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class i$ extends f.wS{constructor(o,t,i,r,l){super(o,t,i,r,l,!0)}}class s$ extends f.ul{constructor(o,t,i,r=!1){super(o,t,r),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new f.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new i$("name","The leadsource name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class o$ extends ci{constructor(o){super("CreateLeadSourceAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new s$("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateLeadSource({input:this.input}).pipe((0,h.w)(o=>(0,ie.of)(o.data.created)))}}class r$ extends ci{constructor(o){super("UpdateLeadSourcesAction"),this.leadSources=o}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.leadSources,!0))}performAction(){this.response=this.businessProvider.data.userUpdateLeadSources({input:{leadSources:this.leadSources}}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}class a$ extends ci{constructor(o,t){super("UpdateLeadSourceAction"),this.leadSource=o,this.leadSourceId=t}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.leadSource,!0)).addRule(new f.xF("Id","Id should be a CUID and not null",this.leadSourceId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateLeadSource({leadSourceId:this.leadSourceId,input:this.leadSource}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}let Uc=(()=>{class s extends y.nH{constructor(t,i,r){super("NotificationService.LeadSourceBusinessProviderService",t,r),this.data=i}createLeadSource(t){const i=new o$(t);return i.Do(this),i.response}updateLeadSource(t,i){const r=new a$(t,i);return r.Do(this),r.response}importLeadSources(t){const i=new r$(t);return i.Do(this),i.response}validateLeadSourceExcelData(t){const i=new t$(t);return i.Do(this),i.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(O.ed),e.LFG(E.q),e.LFG(y.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),n$=(()=>{class s extends y.nH{constructor(t,i,r){super("LeadSourceService",r,t),this.businessProvider=i}createLeadSource(t){const i=Object.fromEntries(Object.entries(t).filter(([r,l])=>null!==l));return this.businessProvider.createLeadSource(i)}updateLeadSource(t,i){return this.businessProvider.updateLeadSource(t,i)}importLeadSources(t){return this.businessProvider.importLeadSources(t)}validateLeadSourceExcelData(t){return this.businessProvider.validateLeadSourceExcelData(t)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(Uc,8),e.LFG(Uc),e.LFG(O.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),Fo=(()=>{class s extends g.m1{constructor(t,i,r,l,u,P){super({loading:!1,leadSources:[],done:!1,searchQuery:"",formName:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=r,this.toast=l,this.formService=u,this.leadSourceService=P,this.errors$=this.select(c=>c.errors),this.loading$=this.select(c=>c.loading),this.done$=this.select(c=>c.done),this.item$=this.select(c=>c.item),this.leadSources$=this.select(c=>c.leadSources),this.paging$=this.select(c=>c.paging),this.searchQuery$=this.select(c=>c.searchQuery),this.formName$=this.select(c=>c.formName),this.actionResult$=this.select(this.item$,this.done$,(c,d)=>({item:c,done:d}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.leadSources$,(c,d,n,a,m)=>({errors:c,loading:d,item:n,formName:a,leadSources:m}),{debounce:!0}),this.input$=this.select(this.paging$,this.searchQuery$,(c,d)=>({limit:c.limit,skip:c.skip,name:d,total:c.total})),this.setFormName=this.updater((c,d)=>Object.assign(Object.assign({},c),{formName:d})),this.setItem=this.updater((c,d)=>Object.assign(Object.assign({},c),{item:d})),this.addNewLeadSource=this.updater((c,d)=>Object.assign(Object.assign({},c),{leadSources:[...c.leadSources,d]})),this.updateLeadSource=this.updater((c,d)=>Object.assign(Object.assign({},c),{leadSources:c.leadSources.map(n=>n.id===d.id?d:n)})),this.addLeadSources=this.updater((c,d)=>Object.assign(Object.assign({},c),{leadSources:c.leadSources.concat(d)})),this.updateLeadSources=this.updater((c,d)=>Object.assign(Object.assign({},c),{leadSources:c.leadSources.map(n=>d.find(m=>m.id===n.id)||n)})),this.setSearchQuery=this.updater((c,d)=>Object.assign(Object.assign({},c),{searchQuery:d})),this.loadLeadSourceEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.data.userLeadSource({leadSourceId:d}).pipe((0,g._b)(n=>{this.patchState({item:n.data.item,errors:n.errors,loading:!1})},n=>this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})))))),this.loadLeadSourcesEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.input$),(0,h.w)(([d,n])=>this.data.userLeadSources({input:n}).pipe((0,g._b)(a=>this.patchState({paging:{limit:n.limit,skip:n.skip,total:a.data.count.total},leadSources:a.data.items,errors:a.errors,loading:!1}),a=>this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})))))),this.createLeadSourceEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.leadSourceService.createLeadSource(Object.assign({},d)).pipe((0,g._b)(n=>{this.addNewLeadSource(n),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:n,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},n=>{n.graphQLErrors?(this.toast.error(n.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})):(this.toast.error(n.Message),this.formService.setErrors(n.Data))}))))),this.updateLeadSourceEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([d,n])=>this.leadSourceService.updateLeadSource(d,d.id).pipe((0,g._b)(a=>{this.updateLeadSource(a),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:a,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.deleteLeadSourceEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([d,n])=>this.data.userDeleteLeadSource({leadSourceId:n.id}).pipe((0,g._b)(a=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:a.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.importExcelEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.leadSourceService.importLeadSources(d).pipe((0,te.K)(n=>{var a;return this.toast.error(null!==(a=n.Message)&&void 0!==a?a:"Failed to save",{duration:3e3}),k.E}),(0,C.b)(n=>{const a=JSON.parse(n.created),m=JSON.parse(n.updated),p=JSON.parse(n.failed),_=a.length+m.length+p.length;this.addLeadSources(a),this.updateLeadSources(m),this.toast.success(`${a.length} created, ${m.length} updated, ${p.length} failed of total ${_}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("leadSourceId")?(this.route.snapshot.paramMap.get("leadSourceId"),this.setFormName("leadSource_edit")):this.setFormName("leadSource_create")}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.leadSourceService.validateLeadSourceExcelData(t)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(E.q),e.LFG(A.F0),e.LFG(A.gz),e.LFG(X.F),e.LFG(q.o),e.LFG(n$))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function l$(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close.emit())})("formIsReady",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.leadSource)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let Jc=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"leadSource_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({id:null,name:""}),this.store.vm$.subscribe(i=>{this.leadSource=i.item})):t.formName&&t.formName.currentValue&&"leadSource_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadLeadSourceEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.leadSource=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Fo),e.Y36(A.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-lead-source-form"]],inputs:{leadSource:"leadSource",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,l$,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[w.O5,z.M,w.Ov],encapsulation:2}),s})(),jc=(()=>{class s{constructor(){this.autoHeight=!1,this.leadSources=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[,{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var r;t.includes(null===(r=i.data)||void 0===r?void 0:r.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-lead-source-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(N.x,5),2&t){let r;e.iGM(r=e.CRH())&&(i.tableView=r.first)}},inputs:{autoHeight:"autoHeight",leadSources:"leadSources"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.leadSources)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[N.x],encapsulation:2}),s})();function c$(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-lead-source-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","leadSource_edit")("formControl",t.formControl)("leadSource",t.leadSource)}}const d$=function(){return{}};function u$(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-lead-source-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","leadSource_create")("formControl",t.formControl)("leadSource",e.DdM(3,d$))}}function m$(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-lead-source-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(u.ref.close())}),e.qZA()}2&s&&e.Q6J("leadSources",o.data.items)}let p$=(()=>{class s extends I.fS{constructor(t){super(),this.store=t,this.store.loadLeadSourcesEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.leadSources$.pipe((0,h.w)(i=>(0,T.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Fo))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","leadSource","send","close"],[1,"w-full","h-full","bg-white",3,"leadSources","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,c$,2,3,"ng-template",null,1,e.W1O),e.YNc(3,u$,1,4,"ng-template",null,2,e.W1O),e.YNc(5,m$,1,1,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",u)("editTemplate",r)("createTemplate",l)("key",i.field.key)}},dependencies:[x.JJ,x.oH,J.$,Jc,jc],encapsulation:2}),s})();function h$(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-lead-source-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","leadSource_edit")("leadSource",t.value)}}const f$=function(){return{}};function _$(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-lead-source-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","leadSource_create")("leadSource",e.DdM(2,f$))}function g$(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-lead-source-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(null==u.ref?null:u.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("leadSources",t.items)}}let C$=(()=>{class s extends Y{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:6,consts:[[3,"data","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","leadSource","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","leadSources","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,h$,1,2,"ng-template",null,1,e.W1O),e.YNc(3,_$,1,3,"ng-template",null,2,e.W1O),e.YNc(5,g$,1,2,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("data",i.data)("title",i.to.title)("onSave",i.onSave)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[ee,Jc,jc],encapsulation:2}),s})(),S$=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[Fo],imports:[w.ez,R.F,x.UX,V.o,H.u,Q.P,U.t,Z,j.h,K.G,I.X0.forChild({types:[{name:"lead-source-select",component:p$,wrappers:["form-field"]},{name:"lead-source-grid",component:C$}]})]}),s})(),v$=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[S$]}),s})();class di extends y.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class b$ extends di{constructor(o){super("ValidateLeadStatusExcelDataAction"),this.valid=!1,this.excelData=o}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name)}),this.validationContext.addRule(new f.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof f.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(r=>r.name),newNames:[i.newName]}):i instanceof f.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,T.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class T$ extends f.wS{constructor(o,t,i,r,l){super(o,t,i,r,l,!0)}}class y$ extends f.ul{constructor(o,t,i,r=!1){super(o,t,r),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new f.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new T$("name","The leadstatus name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class w$ extends di{constructor(o){super("CreateLeadStatusAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new y$("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateLeadStatus({input:this.input}).pipe((0,h.w)(o=>(0,ie.of)(o.data.created)))}}class x$ extends di{constructor(o){super("UpdateLeadStatusesAction"),this.leadStatuses=o}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.leadStatuses,!0))}performAction(){this.response=this.businessProvider.data.userUpdateLeadStatuses({input:{leadStatuses:this.leadStatuses}}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}class N$ extends di{constructor(o,t){super("UpdateLeadStatusAction"),this.leadStatus=o,this.leadStatusId=t}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.leadStatus,!0)).addRule(new f.xF("Id","Id should be a CUID and not null",this.leadStatusId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateLeadStatus({leadStatusId:this.leadStatusId,input:this.leadStatus}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}let zc=(()=>{class s extends y.nH{constructor(t,i,r){super("NotificationService.LeadStatusBusinessProviderService",t,r),this.data=i}createLeadStatus(t){const i=new w$(t);return i.Do(this),i.response}updateLeadStatus(t,i){const r=new N$(t,i);return r.Do(this),r.response}importLeadStatuses(t){const i=new x$(t);return i.Do(this),i.response}validateLeadStatusExcelData(t){const i=new b$(t);return i.Do(this),i.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(O.ed),e.LFG(E.q),e.LFG(y.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),A$=(()=>{class s extends y.nH{constructor(t,i,r){super("LeadStatusService",r,t),this.businessProvider=i}createLeadStatus(t){const i=Object.fromEntries(Object.entries(t).filter(([r,l])=>null!==l));return this.businessProvider.createLeadStatus(i)}updateLeadStatus(t,i){return this.businessProvider.updateLeadStatus(t,i)}importLeadStatuses(t){return this.businessProvider.importLeadStatuses(t)}validateLeadStatusExcelData(t){return this.businessProvider.validateLeadStatusExcelData(t)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(zc,8),e.LFG(zc),e.LFG(O.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),Do=(()=>{class s extends g.m1{constructor(t,i,r,l,u,P){super({loading:!1,leadStatuses:[],done:!1,searchQuery:"",formName:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=r,this.toast=l,this.formService=u,this.leadStatusService=P,this.errors$=this.select(c=>c.errors),this.loading$=this.select(c=>c.loading),this.done$=this.select(c=>c.done),this.item$=this.select(c=>c.item),this.leadStatuses$=this.select(c=>c.leadStatuses),this.paging$=this.select(c=>c.paging),this.searchQuery$=this.select(c=>c.searchQuery),this.formName$=this.select(c=>c.formName),this.actionResult$=this.select(this.item$,this.done$,(c,d)=>({item:c,done:d}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.leadStatuses$,(c,d,n,a,m)=>({errors:c,loading:d,item:n,formName:a,leadStatuses:m}),{debounce:!0}),this.input$=this.select(this.paging$,this.searchQuery$,(c,d)=>({limit:c.limit,skip:c.skip,name:d,total:c.total})),this.setFormName=this.updater((c,d)=>Object.assign(Object.assign({},c),{formName:d})),this.setItem=this.updater((c,d)=>Object.assign(Object.assign({},c),{item:d})),this.addNewLeadStatus=this.updater((c,d)=>Object.assign(Object.assign({},c),{leadStatuses:[...c.leadStatuses,d]})),this.updateLeadStatus=this.updater((c,d)=>Object.assign(Object.assign({},c),{leadStatuses:c.leadStatuses.map(n=>n.id===d.id?d:n)})),this.addLeadStatuses=this.updater((c,d)=>Object.assign(Object.assign({},c),{leadStatuses:c.leadStatuses.concat(d)})),this.updateLeadStatuses=this.updater((c,d)=>Object.assign(Object.assign({},c),{leadStatuses:c.leadStatuses.map(n=>d.find(m=>m.id===n.id)||n)})),this.setSearchQuery=this.updater((c,d)=>Object.assign(Object.assign({},c),{searchQuery:d})),this.loadLeadStatusEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.data.userLeadStatus({leadStatusId:d}).pipe((0,g._b)(n=>{this.patchState({item:n.data.item,errors:n.errors,loading:!1})},n=>this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})))))),this.loadLeadStatusesEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.input$),(0,h.w)(([d,n])=>this.data.userLeadStatuses({input:n}).pipe((0,g._b)(a=>this.patchState({paging:{limit:n.limit,skip:n.skip,total:a.data.count.total},leadStatuses:a.data.items,errors:a.errors,loading:!1}),a=>this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})))))),this.createLeadStatusEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.leadStatusService.createLeadStatus(Object.assign({},d)).pipe((0,g._b)(n=>{this.addNewLeadStatus(n),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:n,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},n=>{n.graphQLErrors?(this.toast.error(n.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})):(this.toast.error(n.Message),this.formService.setErrors(n.Data))}))))),this.updateLeadStatusEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([d,n])=>this.leadStatusService.updateLeadStatus(d,d.id).pipe((0,g._b)(a=>{this.updateLeadStatus(a),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:a,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.deleteLeadStatusEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([d,n])=>this.data.userDeleteLeadStatus({leadStatusId:n.id}).pipe((0,g._b)(a=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:a.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.importExcelEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.leadStatusService.importLeadStatuses(d).pipe((0,te.K)(n=>{var a;return this.toast.error(null!==(a=n.Message)&&void 0!==a?a:"Failed to save",{duration:3e3}),k.E}),(0,C.b)(n=>{const a=JSON.parse(n.created),m=JSON.parse(n.updated),p=JSON.parse(n.failed),_=a.length+m.length+p.length;this.addLeadStatuses(a),this.updateLeadStatuses(m),this.toast.success(`${a.length} created, ${m.length} updated, ${p.length} failed of total ${_}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("leadStatusId")?(this.route.snapshot.paramMap.get("leadStatusId"),this.setFormName("leadStatus_edit")):this.setFormName("leadStatus_create")}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.leadStatusService.validateLeadStatusExcelData(t)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(E.q),e.LFG(A.F0),e.LFG(A.gz),e.LFG(X.F),e.LFG(q.o),e.LFG(A$))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function F$(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close.emit())})("formIsReady",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.leadStatus)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let qc=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"leadStatus_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({id:null,name:""}),this.store.vm$.subscribe(i=>{this.leadStatus=i.item})):t.formName&&t.formName.currentValue&&"leadStatus_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadLeadStatusEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.leadStatus=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Do),e.Y36(A.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-lead-status-form"]],inputs:{leadStatus:"leadStatus",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,F$,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[w.O5,z.M,w.Ov],encapsulation:2}),s})(),Hc=(()=>{class s{constructor(){this.autoHeight=!1,this.leadStatuses=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[,{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var r;t.includes(null===(r=i.data)||void 0===r?void 0:r.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-lead-status-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(N.x,5),2&t){let r;e.iGM(r=e.CRH())&&(i.tableView=r.first)}},inputs:{autoHeight:"autoHeight",leadStatuses:"leadStatuses"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.leadStatuses)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[N.x],encapsulation:2}),s})();function D$(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-lead-status-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","leadStatus_edit")("formControl",t.formControl)("leadStatus",t.leadStatus)}}const I$=function(){return{}};function P$(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-lead-status-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","leadStatus_create")("formControl",t.formControl)("leadStatus",e.DdM(3,I$))}}function W$(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-lead-status-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(u.ref.close())}),e.qZA()}2&s&&e.Q6J("leadStatuses",o.data.items)}let M$=(()=>{class s extends I.fS{constructor(t){super(),this.store=t,this.store.loadLeadStatusesEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.leadStatuses$.pipe((0,h.w)(i=>(0,T.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Do))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","leadStatus","send","close"],[1,"w-full","h-full","bg-white",3,"leadStatuses","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,D$,2,3,"ng-template",null,1,e.W1O),e.YNc(3,P$,1,4,"ng-template",null,2,e.W1O),e.YNc(5,W$,1,1,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",u)("editTemplate",r)("createTemplate",l)("key",i.field.key)}},dependencies:[x.JJ,x.oH,J.$,qc,Hc],encapsulation:2}),s})();function E$(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-lead-status-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","leadStatus_edit")("leadStatus",t.value)}}const O$=function(){return{}};function L$(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-lead-status-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","leadStatus_create")("leadStatus",e.DdM(2,O$))}function G$(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-lead-status-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(null==u.ref?null:u.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("leadStatuses",t.items)}}let $$=(()=>{class s extends Y{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:6,consts:[[3,"data","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","leadStatus","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","leadStatuses","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,E$,1,2,"ng-template",null,1,e.W1O),e.YNc(3,L$,1,3,"ng-template",null,2,e.W1O),e.YNc(5,G$,1,2,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("data",i.data)("title",i.to.title)("onSave",i.onSave)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[ee,qc,Hc],encapsulation:2}),s})(),R$=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[Do],imports:[w.ez,R.F,x.UX,V.o,H.u,Q.P,U.t,Z,j.h,K.G,I.X0.forChild({types:[{name:"lead-status-select",component:M$,wrappers:["form-field"]},{name:"lead-status-grid",component:$$}]})]}),s})(),V$=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[R$]}),s})();var Io=ae(19647);function Q$(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close.emit())})("formIsReady",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.legalCase)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let Kc=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"legalCase_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.legalCase=i.item})):t.formName&&t.formName.currentValue&&"legalCase_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadLegalCaseEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.legalCase=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Io.d),e.Y36(A.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-legal-case-form"]],inputs:{legalCase:"legalCase",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,Q$,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[w.O5,z.M,w.Ov],encapsulation:2}),s})(),kc=(()=>{class s{constructor(){this.autoHeight=!1,this.legalCases=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[{field:"accidentType.name",headerName:"Accident Type",filter:"agTextColumnFilter"},{field:"patient.name",headerName:"Patient",filter:"agTextColumnFilter"},{field:"medLevel.name",headerName:"Med Level",filter:"agTextColumnFilter"},{field:"firm.name",headerName:"Firm",filter:"agTextColumnFilter"},{field:"attorney.name",headerName:"Attorney",filter:"agTextColumnFilter"},{field:"caseStatus.name",headerName:"Case Status",filter:"agTextColumnFilter"},{field:"caseType.name",headerName:"Case Type",filter:"agTextColumnFilter"},{field:"patientTreatmentStatus.name",headerName:"Patient Treatment Status",filter:"agTextColumnFilter"},{field:"caseProgressStatus.name",headerName:"Case Progress Status",filter:"agTextColumnFilter"},{field:"adverseInsuranceStatus.name",headerName:"Adverse Insurance Status",filter:"agTextColumnFilter"},{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{field:"accidentTypeId",filter:"agTextColumnFilter",hide:!0},{field:"patientId",filter:"agTextColumnFilter",hide:!0},{field:"medLevelId",filter:"agTextColumnFilter",hide:!0},{field:"firmId",filter:"agTextColumnFilter",hide:!0},{field:"attorneyId",filter:"agTextColumnFilter",hide:!0},{field:"agentId",filter:"agTextColumnFilter"},{field:"caseStatusId",filter:"agTextColumnFilter",hide:!0},{field:"caseTypeId",filter:"agTextColumnFilter",hide:!0},{field:"patientTreatmentStatusId",filter:"agTextColumnFilter",hide:!0},{field:"medicalRecordNumber",filter:"agTextColumnFilter"},{field:"pharmacyControlNumber",filter:"agTextColumnFilter"},{field:"pchGroupNumber",filter:"agTextColumnFilter"},{field:"dateOfLoss",filter:"agDateColumnFilter"},{field:"caseStatusDate",filter:"agDateColumnFilter"},{field:"caseStatusOther",filter:"agTextColumnFilter"},{field:"paralegal",filter:"agTextColumnFilter"},{field:"paralegalContact",filter:"agTextColumnFilter"},{field:"caseNoteSummary",filter:"agTextColumnFilter"},{headerName:"Policy Limit",field:"policyLimit",valueFormatter:t=>{var i;return(0,S.oBD)(null===(i=t.data)||void 0===i?void 0:i.policyLimit,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{headerName:"Attorney Fee",field:"attorneyFee",valueFormatter:t=>{var i;return(0,S.oBD)(null===(i=t.data)||void 0===i?void 0:i.attorneyFee,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{field:"referringPhysician",filter:"agTextColumnFilter"},{headerName:"No More Treatment",field:"noMoreTreatment",filter:"agSetColumnFilter",cellRenderer:"checkboxRenderer"},{headerName:"Medpay",field:"medpay",filter:"agSetColumnFilter",cellRenderer:"checkboxRenderer"},{field:"fileNumber",filter:"agTextColumnFilter"},{field:"caseNumber",filter:"agTextColumnFilter"},{field:"accidentState",filter:"agTextColumnFilter"},{field:"assignedTo",filter:"agTextColumnFilter"},{headerName:"Attorney Paid",field:"attorneyPaid",filter:"agSetColumnFilter",cellRenderer:"checkboxRenderer"},{field:"attorneySentDate",filter:"agDateColumnFilter"},{headerName:"Write off",field:"writeOff",filter:"agSetColumnFilter",cellRenderer:"checkboxRenderer"},{headerName:"No MRI",field:"noMRI",filter:"agSetColumnFilter",cellRenderer:"checkboxRenderer"},{headerName:"No PT",field:"noPT",filter:"agSetColumnFilter",cellRenderer:"checkboxRenderer"},{headerName:"No First Appointment",field:"noFirstAppointment",filter:"agSetColumnFilter",cellRenderer:"checkboxRenderer"},{headerName:"Hot",field:"hot",filter:"agSetColumnFilter",cellRenderer:"checkboxRenderer"},{headerName:"Documents Uploaded",field:"documentsUploaded",filter:"agSetColumnFilter",cellRenderer:"checkboxRenderer"},{headerName:"Attorney Review",field:"attorneyReview",filter:"agSetColumnFilter",cellRenderer:"checkboxRenderer"},{headerName:"Escalated Review",field:"escalatedReview",filter:"agSetColumnFilter",cellRenderer:"checkboxRenderer"},{headerName:"In Active",field:"inActive",filter:"agSetColumnFilter",cellRenderer:"checkboxRenderer"},{headerName:"Criteria 1712",field:"criteria1712",filter:"agSetColumnFilter",cellRenderer:"checkboxRenderer"},{field:"documentUploadedDate",filter:"agDateColumnFilter"},{field:"patientDischargedGatheringRecordsDate",filter:"agDateColumnFilter"},{field:"resubmitted",filter:"agDateColumnFilter"},{field:"caseProgressStatusId",filter:"agTextColumnFilter",hide:!0},{field:"firmCaseManager",filter:"agTextColumnFilter"},{field:"adverseInsuranceStatusId",filter:"agTextColumnFilter",hide:!0},{field:"createdBy",filter:"agTextColumnFilter"},{field:"renegotiatePayOffDate",filter:"agDateColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var r;t.includes(null===(r=i.data)||void 0===r?void 0:r.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-legal-case-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(N.x,5),2&t){let r;e.iGM(r=e.CRH())&&(i.tableView=r.first)}},inputs:{autoHeight:"autoHeight",legalCases:"legalCases"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.legalCases)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[N.x],encapsulation:2}),s})();function U$(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-legal-case-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","legalCase_edit")("formControl",t.formControl)("legalCase",t.legalCase)}}const J$=function(){return{}};function j$(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-legal-case-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","legalCase_create")("formControl",t.formControl)("legalCase",e.DdM(3,J$))}}function z$(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-legal-case-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(u.ref.close())}),e.qZA()}2&s&&e.Q6J("legalCases",o.data.items)}let q$=(()=>{class s extends I.fS{constructor(t,i){if(super(),this.store=t,this.route=i,this.routerKeys=["accidentTypeId","patientId","medLevelId","firmId","attorneyId","caseStatusId","caseTypeId","patientTreatmentStatusId","caseProgressStatusId","adverseInsuranceStatusId"],this.route.snapshot.paramMap.has("patientId")){var r=this.route.snapshot.paramMap.get("patientId");this.store.setPatientId(r)}this.store.loadLegalCasesEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.legalCases$.pipe((0,h.w)(i=>(0,T.of)(i)))}formRouterKeyDidChange(t){t.accidentTypeId&&this.store.setAccidentTypeId(t.accidentTypeId),t.patientId&&this.store.setPatientId(t.patientId),t.medLevelId&&this.store.setMedLevelId(t.medLevelId),t.firmId&&this.store.setFirmId(t.firmId),t.attorneyId&&this.store.setAttorneyId(t.attorneyId),t.caseStatusId&&this.store.setCaseStatusId(t.caseStatusId),t.caseTypeId&&this.store.setCaseTypeId(t.caseTypeId),t.patientTreatmentStatusId&&this.store.setPatientTreatmentStatusId(t.patientTreatmentStatusId),t.caseProgressStatusId&&this.store.setCaseProgressStatusId(t.caseProgressStatusId),t.adverseInsuranceStatusId&&this.store.setAdverseInsuranceStatusId(t.adverseInsuranceStatusId),this.store.loadLegalCasesEffect()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Io.d),e.Y36(A.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e._Bn([Io.d]),e.qOj],decls:7,vars:7,consts:[[3,"to","control","listTemplate","editTemplate","createTemplate","key","routerKeys","selectionChanged","formRouterKeyDidChange"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","legalCase","send","close"],[1,"w-full","h-full","bg-white",3,"legalCases","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value})("formRouterKeyDidChange",function(l){return i.formRouterKeyDidChange(l)}),e.qZA(),e.YNc(1,U$,2,3,"ng-template",null,1,e.W1O),e.YNc(3,j$,1,4,"ng-template",null,2,e.W1O),e.YNc(5,z$,1,1,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("listTemplate",u)("editTemplate",r)("createTemplate",l)("key",i.field.key)("routerKeys",i.routerKeys)}},dependencies:[x.JJ,x.oH,J.$,Kc,kc],encapsulation:2}),s})();function H$(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-legal-case-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","legalCase_edit")("legalCase",t.value)}}const K$=function(){return{}};function k$(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-legal-case-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","legalCase_create")("legalCase",e.DdM(2,K$))}function Z$(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-legal-case-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(null==u.ref?null:u.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("legalCases",t.items)}}let B$=(()=>{class s extends Y{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","legalCase","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","legalCases","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,H$,1,2,"ng-template",null,1,e.W1O),e.YNc(3,k$,1,3,"ng-template",null,2,e.W1O),e.YNc(5,Z$,1,2,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[ee,Kc,kc],encapsulation:2}),s})(),Y$=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[w.ez,R.F,x.UX,V.o,H.u,Q.P,U.t,Z,j.h,K.G,I.X0.forChild({types:[{name:"legal-case-select",component:q$,wrappers:["form-field"]},{name:"legal-case-grid",component:B$}]})]}),s})(),X$=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[Y$]}),s})();var Po=ae(3866);function e2(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close.emit())})("formIsReady",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.location)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let Zc=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"location_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.location=i.item})):t.formName&&t.formName.currentValue&&"location_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadLocationEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.location=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Po.v),e.Y36(A.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-location-form"]],inputs:{location:"location",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,e2,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[w.O5,z.M,w.Ov],encapsulation:2}),s})(),Bc=(()=>{class s{constructor(){this.autoHeight=!1,this.locations=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[{field:"placeOfService.name",headerName:"Place of Service",filter:"agTextColumnFilter"},{field:"vendorLocation.name",headerName:"Vendor Location",filter:"agTextColumnFilter"},{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{field:"locationName",filter:"agTextColumnFilter"},{field:"line1",filter:"agTextColumnFilter"},{field:"line2",filter:"agTextColumnFilter"},{field:"city",filter:"agTextColumnFilter"},{field:"state",filter:"agTextColumnFilter"},{field:"postalCode",filter:"agTextColumnFilter"},{headerName:"Latitude",field:"latitude",valueFormatter:t=>{var i;return(0,S.oBD)(null===(i=t.data)||void 0===i?void 0:i.latitude,"",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{headerName:"Longitude",field:"longitude",valueFormatter:t=>{var i;return(0,S.oBD)(null===(i=t.data)||void 0===i?void 0:i.longitude,"",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{field:"abbrev",filter:"agTextColumnFilter"},{field:"division",filter:"agTextColumnFilter"},{field:"country",filter:"agTextColumnFilter"},{field:"officePhone",filter:"agTextColumnFilter"},{field:"fax",filter:"agTextColumnFilter"},{field:"attentionTo",filter:"agTextColumnFilter"},{field:"placeOfServiceId",filter:"agTextColumnFilter",hide:!0}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var r;t.includes(null===(r=i.data)||void 0===r?void 0:r.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-location-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(N.x,5),2&t){let r;e.iGM(r=e.CRH())&&(i.tableView=r.first)}},inputs:{autoHeight:"autoHeight",locations:"locations"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.locations)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[N.x],encapsulation:2}),s})();function t2(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-location-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","location_edit")("formControl",t.formControl)("location",t.location)}}const i2=function(){return{}};function s2(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-location-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","location_create")("formControl",t.formControl)("location",e.DdM(3,i2))}}function o2(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-location-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(u.ref.close())}),e.qZA()}2&s&&e.Q6J("locations",o.data.items)}let r2=(()=>{class s extends I.fS{constructor(t){super(),this.store=t,this.routerKeys=["placeOfServiceId","vendorLocationId","vendorId","clinicalProviderId"],this.store.loadLocationsEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.locations$.pipe((0,h.w)(i=>(0,T.of)(i)))}formRouterKeyDidChange(t){t.placeOfServiceId&&this.store.setPlaceOfServiceId(t.placeOfServiceId),t.vendorLocationId&&this.store.setVendorLocationId(t.vendorLocationId),t.vendorId&&this.store.setVendorId(t.vendorId),t.clinicalProviderId&&this.store.setClinicalProviderId(t.clinicalProviderId),this.store.loadLocationsEffect()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Po.v))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e._Bn([Po.v]),e.qOj],decls:7,vars:8,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","routerKeys","selectionChanged","formRouterKeyDidChange"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","location","send","close"],[1,"w-full","h-full","bg-white",3,"locations","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value})("formRouterKeyDidChange",function(l){return i.formRouterKeyDidChange(l)}),e.qZA(),e.YNc(1,t2,2,3,"ng-template",null,1,e.W1O),e.YNc(3,s2,1,4,"ng-template",null,2,e.W1O),e.YNc(5,o2,1,1,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",u)("editTemplate",r)("createTemplate",l)("key",i.field.key)("routerKeys",i.routerKeys)}},dependencies:[x.JJ,x.oH,J.$,Zc,Bc],encapsulation:2}),s})();function a2(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-location-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","location_edit")("location",t.value)}}const n2=function(){return{}};function l2(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-location-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","location_create")("location",e.DdM(2,n2))}function c2(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-location-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(null==u.ref?null:u.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("locations",t.items)}}let d2=(()=>{class s extends Y{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","location","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","locations","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,a2,1,2,"ng-template",null,1,e.W1O),e.YNc(3,l2,1,3,"ng-template",null,2,e.W1O),e.YNc(5,c2,1,2,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[ee,Zc,Bc],encapsulation:2}),s})(),u2=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[w.ez,R.F,x.UX,V.o,H.u,Q.P,U.t,Z,j.h,K.G,I.X0.forChild({types:[{name:"location-select",component:r2,wrappers:["form-field"]},{name:"location-grid",component:d2}]})]}),s})(),m2=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[u2]}),s})();class ui extends y.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class p2 extends ui{constructor(o){super("ValidateManufacturerExcelDataAction"),this.valid=!1,this.excelData=o}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name)}),this.validationContext.addRule(new f.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof f.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(r=>r.name),newNames:[i.newName]}):i instanceof f.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,T.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class h2 extends f.wS{constructor(o,t,i,r,l){super(o,t,i,r,l,!0)}}class f2 extends f.ul{constructor(o,t,i,r=!1){super(o,t,r),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new f.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new h2("name","The manufacturer name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class _2 extends ui{constructor(o){super("CreateManufacturerAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new f2("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateManufacturer({input:this.input}).pipe((0,h.w)(o=>(0,ie.of)(o.data.created)))}}class g2 extends ui{constructor(o){super("UpdateManufacturersAction"),this.manufacturers=o}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.manufacturers,!0))}performAction(){this.response=this.businessProvider.data.userUpdateManufacturers({input:{manufacturers:this.manufacturers}}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}class C2 extends ui{constructor(o,t){super("UpdateManufacturerAction"),this.manufacturer=o,this.manufacturerId=t}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.manufacturer,!0)).addRule(new f.xF("Id","Id should be a CUID and not null",this.manufacturerId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateManufacturer({manufacturerId:this.manufacturerId,input:this.manufacturer}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}let Yc=(()=>{class s extends y.nH{constructor(t,i,r){super("NotificationService.ManufacturerBusinessProviderService",t,r),this.data=i}createManufacturer(t){const i=new _2(t);return i.Do(this),i.response}updateManufacturer(t,i){const r=new C2(t,i);return r.Do(this),r.response}importManufacturers(t){const i=new g2(t);return i.Do(this),i.response}validateManufacturerExcelData(t){const i=new p2(t);return i.Do(this),i.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(O.ed),e.LFG(E.q),e.LFG(y.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),S2=(()=>{class s extends y.nH{constructor(t,i,r){super("ManufacturerService",r,t),this.businessProvider=i}createManufacturer(t){const i=Object.fromEntries(Object.entries(t).filter(([r,l])=>null!==l));return this.businessProvider.createManufacturer(i)}updateManufacturer(t,i){return this.businessProvider.updateManufacturer(t,i)}importManufacturers(t){return this.businessProvider.importManufacturers(t)}validateManufacturerExcelData(t){return this.businessProvider.validateManufacturerExcelData(t)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(Yc,8),e.LFG(Yc),e.LFG(O.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),Wo=(()=>{class s extends g.m1{constructor(t,i,r,l,u,P){super({loading:!1,manufacturers:[],done:!1,searchQuery:"",formName:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=r,this.toast=l,this.formService=u,this.manufacturerService=P,this.errors$=this.select(c=>c.errors),this.loading$=this.select(c=>c.loading),this.done$=this.select(c=>c.done),this.item$=this.select(c=>c.item),this.manufacturers$=this.select(c=>c.manufacturers),this.paging$=this.select(c=>c.paging),this.searchQuery$=this.select(c=>c.searchQuery),this.formName$=this.select(c=>c.formName),this.actionResult$=this.select(this.item$,this.done$,(c,d)=>({item:c,done:d}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.manufacturers$,(c,d,n,a,m)=>({errors:c,loading:d,item:n,formName:a,manufacturers:m}),{debounce:!0}),this.input$=this.select(this.paging$,this.searchQuery$,(c,d)=>({limit:c.limit,skip:c.skip,name:d,total:c.total})),this.setFormName=this.updater((c,d)=>Object.assign(Object.assign({},c),{formName:d})),this.setItem=this.updater((c,d)=>Object.assign(Object.assign({},c),{item:d})),this.addNewManufacturer=this.updater((c,d)=>Object.assign(Object.assign({},c),{manufacturers:[...c.manufacturers,d]})),this.updateManufacturer=this.updater((c,d)=>Object.assign(Object.assign({},c),{manufacturers:c.manufacturers.map(n=>n.id===d.id?d:n)})),this.addManufacturers=this.updater((c,d)=>Object.assign(Object.assign({},c),{manufacturers:c.manufacturers.concat(d)})),this.updateManufacturers=this.updater((c,d)=>Object.assign(Object.assign({},c),{manufacturers:c.manufacturers.map(n=>d.find(m=>m.id===n.id)||n)})),this.setSearchQuery=this.updater((c,d)=>Object.assign(Object.assign({},c),{searchQuery:d})),this.loadManufacturerEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.data.userManufacturer({manufacturerId:d}).pipe((0,g._b)(n=>{this.patchState({item:n.data.item,errors:n.errors,loading:!1})},n=>this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})))))),this.loadManufacturersEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.input$),(0,h.w)(([d,n])=>this.data.userManufacturers({input:n}).pipe((0,g._b)(a=>this.patchState({paging:{limit:n.limit,skip:n.skip,total:a.data.count.total},manufacturers:a.data.items,errors:a.errors,loading:!1}),a=>this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})))))),this.createManufacturerEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.manufacturerService.createManufacturer(Object.assign({},d)).pipe((0,g._b)(n=>{this.addNewManufacturer(n),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:n,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},n=>{n.graphQLErrors?(this.toast.error(n.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})):(this.toast.error(n.Message),this.formService.setErrors(n.Data))}))))),this.updateManufacturerEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([d,n])=>this.manufacturerService.updateManufacturer(d,d.id).pipe((0,g._b)(a=>{this.updateManufacturer(a),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:a,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.deleteManufacturerEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([d,n])=>this.data.userDeleteManufacturer({manufacturerId:n.id}).pipe((0,g._b)(a=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:a.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.importExcelEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.manufacturerService.importManufacturers(d).pipe((0,te.K)(n=>{var a;return this.toast.error(null!==(a=n.Message)&&void 0!==a?a:"Failed to save",{duration:3e3}),k.E}),(0,C.b)(n=>{const a=JSON.parse(n.created),m=JSON.parse(n.updated),p=JSON.parse(n.failed),_=a.length+m.length+p.length;this.addManufacturers(a),this.updateManufacturers(m),this.toast.success(`${a.length} created, ${m.length} updated, ${p.length} failed of total ${_}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("manufacturerId")?(this.route.snapshot.paramMap.get("manufacturerId"),this.setFormName("manufacturer_edit")):this.setFormName("manufacturer_create")}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.manufacturerService.validateManufacturerExcelData(t)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(E.q),e.LFG(A.F0),e.LFG(A.gz),e.LFG(X.F),e.LFG(q.o),e.LFG(S2))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function v2(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close.emit())})("formIsReady",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.manufacturer)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let Xc=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"manufacturer_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.manufacturer=i.item})):t.formName&&t.formName.currentValue&&"manufacturer_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadManufacturerEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.manufacturer=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Wo),e.Y36(A.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-manufacturer-form"]],inputs:{manufacturer:"manufacturer",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,v2,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[w.O5,z.M,w.Ov],encapsulation:2}),s})(),ed=(()=>{class s{constructor(){this.autoHeight=!1,this.manufacturers=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[,{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{field:"primaryPhoneNumber",filter:"agTextColumnFilter"},{field:"primaryEmailAddress",filter:"agTextColumnFilter"},{field:"primaryAddressLine1",filter:"agTextColumnFilter"},{field:"primaryAddressLine2",filter:"agTextColumnFilter"},{field:"primaryAddressCity",filter:"agTextColumnFilter"},{field:"primaryAddressStateOrProvince",filter:"agTextColumnFilter"},{field:"primaryAddressPostalCode",filter:"agTextColumnFilter"},{field:"notes",filter:"agTextColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var r;t.includes(null===(r=i.data)||void 0===r?void 0:r.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-manufacturer-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(N.x,5),2&t){let r;e.iGM(r=e.CRH())&&(i.tableView=r.first)}},inputs:{autoHeight:"autoHeight",manufacturers:"manufacturers"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.manufacturers)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[N.x],encapsulation:2}),s})();function b2(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-manufacturer-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","manufacturer_edit")("formControl",t.formControl)("manufacturer",t.manufacturer)}}const T2=function(){return{}};function y2(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-manufacturer-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","manufacturer_create")("formControl",t.formControl)("manufacturer",e.DdM(3,T2))}}function w2(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-manufacturer-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(u.ref.close())}),e.qZA()}2&s&&e.Q6J("manufacturers",o.data.items)}let x2=(()=>{class s extends I.fS{constructor(t){super(),this.store=t,this.store.loadManufacturersEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.manufacturers$.pipe((0,h.w)(i=>(0,T.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Wo))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","manufacturer","send","close"],[1,"w-full","h-full","bg-white",3,"manufacturers","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,b2,2,3,"ng-template",null,1,e.W1O),e.YNc(3,y2,1,4,"ng-template",null,2,e.W1O),e.YNc(5,w2,1,1,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",u)("editTemplate",r)("createTemplate",l)("key",i.field.key)}},dependencies:[x.JJ,x.oH,J.$,Xc,ed],encapsulation:2}),s})();function N2(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-manufacturer-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","manufacturer_edit")("manufacturer",t.value)}}const A2=function(){return{}};function F2(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-manufacturer-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","manufacturer_create")("manufacturer",e.DdM(2,A2))}function D2(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-manufacturer-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(null==u.ref?null:u.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("manufacturers",t.items)}}let I2=(()=>{class s extends Y{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","manufacturer","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","manufacturers","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,N2,1,2,"ng-template",null,1,e.W1O),e.YNc(3,F2,1,3,"ng-template",null,2,e.W1O),e.YNc(5,D2,1,2,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[ee,Xc,ed],encapsulation:2}),s})(),P2=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[Wo],imports:[w.ez,R.F,x.UX,V.o,H.u,Q.P,U.t,Z,j.h,K.G,I.X0.forChild({types:[{name:"manufacturer-select",component:x2,wrappers:["form-field"]},{name:"manufacturer-grid",component:I2}]})]}),s})(),W2=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[P2]}),s})();class mi extends y.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class M2 extends mi{constructor(o,t){super("ValidateMedicalConditionProviderExcelDataAction"),this.valid=!1,this.excelData=o,this.clinicalProviders=t}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name),this.validationContext.addRule(new f.mi(`clinicalProviderName_${i}_is_valid}`,"Clinical Provider Is Not Valid","clinicalProvider.name",t.clinicalProvider,this.clinicalProviders,!0))}),this.validationContext.addRule(new f.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof f.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(r=>r.name),newNames:[i.newName]}):i instanceof f.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,T.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class E2 extends f.wS{constructor(o,t,i,r,l){super(o,t,i,r,l,!0)}}class O2 extends f.ul{constructor(o,t,i,r=!1){super(o,t,r),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new f.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new E2("name","The medicalconditionprovider name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class L2 extends mi{constructor(o){super("CreateMedicalConditionProviderAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new O2("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateMedicalConditionProvider({input:this.input}).pipe((0,h.w)(o=>(0,ie.of)(o.data.created)))}}class G2 extends mi{constructor(o){super("UpdateMedicalConditionProvidersAction"),this.medicalConditionProviders=o}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.medicalConditionProviders,!0))}performAction(){this.response=this.businessProvider.data.userUpdateMedicalConditionProviders({input:{medicalConditionProviders:this.medicalConditionProviders}}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}class $2 extends mi{constructor(o,t){super("UpdateMedicalConditionProviderAction"),this.medicalConditionProvider=o,this.medicalConditionProviderId=t}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.medicalConditionProvider,!0)).addRule(new f.xF("Id","Id should be a CUID and not null",this.medicalConditionProviderId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateMedicalConditionProvider({medicalConditionProviderId:this.medicalConditionProviderId,input:this.medicalConditionProvider}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}let td=(()=>{class s extends y.nH{constructor(t,i,r){super("NotificationService.MedicalConditionProviderBusinessProviderService",t,r),this.data=i}createMedicalConditionProvider(t){const i=new L2(t);return i.Do(this),i.response}updateMedicalConditionProvider(t,i){const r=new $2(t,i);return r.Do(this),r.response}importMedicalConditionProviders(t){const i=new G2(t);return i.Do(this),i.response}validateMedicalConditionProviderExcelData(t,i){const r=new M2(t,i);return r.Do(this),r.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(O.ed),e.LFG(E.q),e.LFG(y.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),R2=(()=>{class s extends y.nH{constructor(t,i,r){super("MedicalConditionProviderService",r,t),this.businessProvider=i}createMedicalConditionProvider(t){const i=Object.fromEntries(Object.entries(t).filter(([r,l])=>null!==l));return this.businessProvider.createMedicalConditionProvider(i)}updateMedicalConditionProvider(t,i){return this.businessProvider.updateMedicalConditionProvider(t,i)}importMedicalConditionProviders(t){return this.businessProvider.importMedicalConditionProviders(t)}validateMedicalConditionProviderExcelData(t,i){return this.businessProvider.validateMedicalConditionProviderExcelData(t,i)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(td,8),e.LFG(td),e.LFG(O.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),Mo=(()=>{class s extends g.m1{constructor(t,i,r,l,u,P){if(super({loading:!1,medicalConditionProviders:[],done:!1,searchQuery:"",formName:void 0,clinicalProviderId:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=r,this.toast=l,this.formService=u,this.medicalConditionProviderService=P,this.errors$=this.select(d=>d.errors),this.loading$=this.select(d=>d.loading),this.done$=this.select(d=>d.done),this.item$=this.select(d=>d.item),this.medicalConditionProviders$=this.select(d=>d.medicalConditionProviders),this.clinicalProviders$=this.select(d=>d.clinicalProviders||[]),this.clinicalProviderId$=this.select(d=>d.clinicalProviderId),this.paging$=this.select(d=>d.paging),this.searchQuery$=this.select(d=>d.searchQuery),this.formName$=this.select(d=>d.formName),this.actionResult$=this.select(this.item$,this.done$,(d,n)=>({item:d,done:n}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.medicalConditionProviders$,this.clinicalProviders$,(d,n,a,m,p,_)=>({errors:d,loading:n,item:a,formName:m,medicalConditionProviders:p,clinicalProviders:_}),{debounce:!0}),this.input$=this.select(this.paging$,this.clinicalProviderId$,this.searchQuery$,(d,n,a)=>({limit:d.limit,skip:d.skip,name:a,clinicalProviderId:n,total:d.total})),this.setFormName=this.updater((d,n)=>Object.assign(Object.assign({},d),{formName:n})),this.setClinicalProviderId=this.updater((d,n)=>Object.assign(Object.assign({},d),{clinicalProviderId:n})),this.filterClinicalProviders=d=>this.data.userSelectClinicalProviders({input:{name:d}}).pipe((0,g._b)(n=>{let a=n.data.items;return this.patchState({clinicalProviders:a}),a},n=>this.patchState({errors:n.graphQLErrors?n.graphQLErrors:n})),(0,B.U)(n=>n.data.items)),this.addClinicalProvider=this.updater((d,n)=>Object.assign(Object.assign({},d),{clinicalProviders:d.clinicalProviders.concat(n)})),this.setItem=this.updater((d,n)=>Object.assign(Object.assign({},d),{item:n})),this.addNewMedicalConditionProvider=this.updater((d,n)=>Object.assign(Object.assign({},d),{medicalConditionProviders:[...d.medicalConditionProviders,n]})),this.updateMedicalConditionProvider=this.updater((d,n)=>Object.assign(Object.assign({},d),{medicalConditionProviders:d.medicalConditionProviders.map(a=>a.id===n.id?n:a)})),this.addMedicalConditionProviders=this.updater((d,n)=>Object.assign(Object.assign({},d),{medicalConditionProviders:d.medicalConditionProviders.concat(n)})),this.updateMedicalConditionProviders=this.updater((d,n)=>Object.assign(Object.assign({},d),{medicalConditionProviders:d.medicalConditionProviders.map(a=>n.find(p=>p.id===a.id)||a)})),this.setSearchQuery=this.updater((d,n)=>Object.assign(Object.assign({},d),{searchQuery:n})),this.loadMedicalConditionProviderEffect=this.effect(d=>d.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(n=>this.data.userMedicalConditionProvider({medicalConditionProviderId:n}).pipe((0,g._b)(a=>{this.patchState({item:a.data.item,errors:a.errors,loading:!1})},a=>this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})))))),this.loadMedicalConditionProvidersEffect=this.effect(d=>d.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.input$),(0,h.w)(([n,a])=>this.data.userMedicalConditionProviders({input:a}).pipe((0,g._b)(m=>this.patchState({paging:{limit:a.limit,skip:a.skip,total:m.data.count.total},medicalConditionProviders:m.data.items,errors:m.errors,loading:!1}),m=>this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})))))),this.createMedicalConditionProviderEffect=this.effect(d=>d.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(n=>this.medicalConditionProviderService.createMedicalConditionProvider(Object.assign({},n)).pipe((0,g._b)(a=>{this.addNewMedicalConditionProvider(a),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:a,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.updateMedicalConditionProviderEffect=this.effect(d=>d.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([n,a])=>this.medicalConditionProviderService.updateMedicalConditionProvider(n,n.id).pipe((0,g._b)(m=>{this.updateMedicalConditionProvider(m),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:m,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},m=>{m.graphQLErrors?(this.toast.error(m.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})):(this.toast.error(m.Message),this.formService.setErrors(m.Data))}))))),this.deleteMedicalConditionProviderEffect=this.effect(d=>d.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([n,a])=>this.data.userDeleteMedicalConditionProvider({medicalConditionProviderId:a.id}).pipe((0,g._b)(m=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:m.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},m=>{m.graphQLErrors?(this.toast.error(m.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})):(this.toast.error(m.Message),this.formService.setErrors(m.Data))}))))),this.importExcelEffect=this.effect(d=>d.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(n=>this.medicalConditionProviderService.importMedicalConditionProviders(n).pipe((0,te.K)(a=>{var m;return this.toast.error(null!==(m=a.Message)&&void 0!==m?m:"Failed to save",{duration:3e3}),k.E}),(0,C.b)(a=>{const m=JSON.parse(a.created),p=JSON.parse(a.updated),_=JSON.parse(a.failed),v=m.length+p.length+_.length;this.addMedicalConditionProviders(m),this.updateMedicalConditionProviders(p),this.toast.success(`${m.length} created, ${p.length} updated, ${_.length} failed of total ${v}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("medicalConditionProviderId")?(this.route.snapshot.paramMap.get("medicalConditionProviderId"),this.setFormName("medicalConditionProvider_edit")):this.setFormName("medicalConditionProvider_create"),this.route.snapshot.paramMap.has("clinicalProviderId")){var c=this.route.snapshot.paramMap.get("clinicalProviderId");this.setClinicalProviderId(c)}}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.medicalConditionProviderService.validateMedicalConditionProviderExcelData(t,i.clinicalProviders)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(E.q),e.LFG(A.F0),e.LFG(A.gz),e.LFG(X.F),e.LFG(q.o),e.LFG(R2))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function V2(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close.emit())})("formIsReady",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.medicalConditionProvider)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let id=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"medicalConditionProvider_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.medicalConditionProvider=i.item})):t.formName&&t.formName.currentValue&&"medicalConditionProvider_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadMedicalConditionProviderEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.medicalConditionProvider=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Mo),e.Y36(A.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-medical-condition-provider-form"]],inputs:{medicalConditionProvider:"medicalConditionProvider",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,V2,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[w.O5,z.M,w.Ov],encapsulation:2}),s})(),sd=(()=>{class s{constructor(){this.autoHeight=!1,this.medicalConditionProviders=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[{field:"clinicalProvider.name",headerName:"Clinical Provider",filter:"agTextColumnFilter"},{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{field:"medicalConditionId",filter:"agTextColumnFilter",hide:!0},{field:"clinicalProviderId",filter:"agTextColumnFilter",hide:!0}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var r;t.includes(null===(r=i.data)||void 0===r?void 0:r.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-medical-condition-provider-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(N.x,5),2&t){let r;e.iGM(r=e.CRH())&&(i.tableView=r.first)}},inputs:{autoHeight:"autoHeight",medicalConditionProviders:"medicalConditionProviders"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.medicalConditionProviders)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[N.x],encapsulation:2}),s})();function Q2(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-medical-condition-provider-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","medicalConditionProvider_edit")("formControl",t.formControl)("medicalConditionProvider",t.medicalConditionProvider)}}const U2=function(){return{}};function J2(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-medical-condition-provider-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","medicalConditionProvider_create")("formControl",t.formControl)("medicalConditionProvider",e.DdM(3,U2))}}function j2(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-medical-condition-provider-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(u.ref.close())}),e.qZA()}2&s&&e.Q6J("medicalConditionProviders",o.data.items)}let z2=(()=>{class s extends I.fS{constructor(t){super(),this.store=t,this.store.loadMedicalConditionProvidersEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.medicalConditionProviders$.pipe((0,h.w)(i=>(0,T.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Mo))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","medicalConditionProvider","send","close"],[1,"w-full","h-full","bg-white",3,"medicalConditionProviders","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,Q2,2,3,"ng-template",null,1,e.W1O),e.YNc(3,J2,1,4,"ng-template",null,2,e.W1O),e.YNc(5,j2,1,1,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",u)("editTemplate",r)("createTemplate",l)("key",i.field.key)}},dependencies:[x.JJ,x.oH,J.$,id,sd],encapsulation:2}),s})();function q2(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-medical-condition-provider-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","medicalConditionProvider_edit")("medicalConditionProvider",t.value)}}const H2=function(){return{}};function K2(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-medical-condition-provider-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","medicalConditionProvider_create")("medicalConditionProvider",e.DdM(2,H2))}function k2(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-medical-condition-provider-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(null==u.ref?null:u.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("medicalConditionProviders",t.items)}}let Z2=(()=>{class s extends Y{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","medicalConditionProvider","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","medicalConditionProviders","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,q2,1,2,"ng-template",null,1,e.W1O),e.YNc(3,K2,1,3,"ng-template",null,2,e.W1O),e.YNc(5,k2,1,2,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[ee,id,sd],encapsulation:2}),s})(),B2=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[Mo],imports:[w.ez,R.F,x.UX,V.o,H.u,Q.P,U.t,Z,j.h,K.G,I.X0.forChild({types:[{name:"medical-condition-provider-select",component:z2,wrappers:["form-field"]},{name:"medical-condition-provider-grid",component:Z2}]})]}),s})(),Y2=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[B2]}),s})();var Eo=ae(6506);function X2(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close.emit())})("formIsReady",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.medicalRecord)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let od=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"medicalRecord_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.medicalRecord=i.item})):t.formName&&t.formName.currentValue&&"medicalRecord_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadMedicalRecordEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.medicalRecord=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Eo.t),e.Y36(A.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-medical-record-form"]],inputs:{medicalRecord:"medicalRecord",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,X2,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[w.O5,z.M,w.Ov],encapsulation:2}),s})(),rd=(()=>{class s{constructor(){this.autoHeight=!1,this.medicalRecords=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[{field:"clinicalProvider.name",headerName:"Clinical Provider",filter:"agTextColumnFilter"},{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{field:"clinicalProviderId",filter:"agTextColumnFilter",hide:!0}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var r;t.includes(null===(r=i.data)||void 0===r?void 0:r.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-medical-record-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(N.x,5),2&t){let r;e.iGM(r=e.CRH())&&(i.tableView=r.first)}},inputs:{autoHeight:"autoHeight",medicalRecords:"medicalRecords"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.medicalRecords)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[N.x],encapsulation:2}),s})();function eR(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-medical-record-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","medicalRecord_edit")("formControl",t.formControl)("medicalRecord",t.medicalRecord)}}const tR=function(){return{}};function iR(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-medical-record-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","medicalRecord_create")("formControl",t.formControl)("medicalRecord",e.DdM(3,tR))}}function sR(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-medical-record-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(u.ref.close())}),e.qZA()}2&s&&e.Q6J("medicalRecords",o.data.items)}let oR=(()=>{class s extends I.fS{constructor(t){super(),this.store=t,this.store.loadMedicalRecordsEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.medicalRecords$.pipe((0,h.w)(i=>(0,T.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Eo.t))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","medicalRecord","send","close"],[1,"w-full","h-full","bg-white",3,"medicalRecords","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,eR,2,3,"ng-template",null,1,e.W1O),e.YNc(3,iR,1,4,"ng-template",null,2,e.W1O),e.YNc(5,sR,1,1,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",u)("editTemplate",r)("createTemplate",l)("key",i.field.key)}},dependencies:[x.JJ,x.oH,J.$,od,rd],encapsulation:2}),s})();function rR(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-medical-record-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","medicalRecord_edit")("medicalRecord",t.value)}}const aR=function(){return{}};function nR(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-medical-record-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","medicalRecord_create")("medicalRecord",e.DdM(2,aR))}function lR(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-medical-record-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(null==u.ref?null:u.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("medicalRecords",t.items)}}let cR=(()=>{class s extends Y{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","medicalRecord","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","medicalRecords","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,rR,1,2,"ng-template",null,1,e.W1O),e.YNc(3,nR,1,3,"ng-template",null,2,e.W1O),e.YNc(5,lR,1,2,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[ee,od,rd],encapsulation:2}),s})(),dR=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[Eo.t],imports:[w.ez,R.F,x.UX,V.o,H.u,Q.P,U.t,Z,j.h,K.G,I.X0.forChild({types:[{name:"medical-record-select",component:oR,wrappers:["form-field"]},{name:"medical-record-grid",component:cR}]})]}),s})(),uR=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[dR]}),s})();class pi extends y.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class mR extends pi{constructor(o){super("ValidateMedicalRecordStatusExcelDataAction"),this.valid=!1,this.excelData=o}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name)}),this.validationContext.addRule(new f.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof f.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(r=>r.name),newNames:[i.newName]}):i instanceof f.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,T.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class pR extends f.wS{constructor(o,t,i,r,l){super(o,t,i,r,l,!0)}}class hR extends f.ul{constructor(o,t,i,r=!1){super(o,t,r),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new f.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new pR("name","The medicalrecordstatus name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class fR extends pi{constructor(o){super("CreateMedicalRecordStatusAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new hR("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateMedicalRecordStatus({input:this.input}).pipe((0,h.w)(o=>(0,ie.of)(o.data.created)))}}class _R extends pi{constructor(o){super("UpdateMedicalRecordStatusesAction"),this.medicalRecordStatuses=o}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.medicalRecordStatuses,!0))}performAction(){this.response=this.businessProvider.data.userUpdateMedicalRecordStatuses({input:{medicalRecordStatuses:this.medicalRecordStatuses}}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}class gR extends pi{constructor(o,t){super("UpdateMedicalRecordStatusAction"),this.medicalRecordStatus=o,this.medicalRecordStatusId=t}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.medicalRecordStatus,!0)).addRule(new f.xF("Id","Id should be a CUID and not null",this.medicalRecordStatusId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateMedicalRecordStatus({medicalRecordStatusId:this.medicalRecordStatusId,input:this.medicalRecordStatus}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}let ad=(()=>{class s extends y.nH{constructor(t,i,r){super("NotificationService.MedicalRecordStatusBusinessProviderService",t,r),this.data=i}createMedicalRecordStatus(t){const i=new fR(t);return i.Do(this),i.response}updateMedicalRecordStatus(t,i){const r=new gR(t,i);return r.Do(this),r.response}importMedicalRecordStatuses(t){const i=new _R(t);return i.Do(this),i.response}validateMedicalRecordStatusExcelData(t){const i=new mR(t);return i.Do(this),i.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(O.ed),e.LFG(E.q),e.LFG(y.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),CR=(()=>{class s extends y.nH{constructor(t,i,r){super("MedicalRecordStatusService",r,t),this.businessProvider=i}createMedicalRecordStatus(t){return this.businessProvider.createMedicalRecordStatus(t)}updateMedicalRecordStatus(t,i){return this.businessProvider.updateMedicalRecordStatus(t,i)}importMedicalRecordStatuses(t){return this.businessProvider.importMedicalRecordStatuses(t)}validateMedicalRecordStatusExcelData(t){return this.businessProvider.validateMedicalRecordStatusExcelData(t)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(ad,8),e.LFG(ad),e.LFG(O.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),hi=(()=>{class s extends g.m1{constructor(t,i,r,l,u,P){super({loading:!1,medicalRecordStatuses:[],done:!1,searchQuery:"",formName:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=r,this.toast=l,this.formService=u,this.medicalRecordStatusService=P,this.errors$=this.select(c=>c.errors),this.loading$=this.select(c=>c.loading),this.done$=this.select(c=>c.done),this.item$=this.select(c=>c.item),this.medicalRecordStatuses$=this.select(c=>c.medicalRecordStatuses),this.paging$=this.select(c=>c.paging),this.searchQuery$=this.select(c=>c.searchQuery),this.formName$=this.select(c=>c.formName),this.actionResult$=this.select(this.item$,this.done$,(c,d)=>({item:c,done:d}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.medicalRecordStatuses$,(c,d,n,a,m)=>({errors:c,loading:d,item:n,formName:a,medicalRecordStatuses:m}),{debounce:!0}),this.input$=this.select(this.paging$,this.searchQuery$,(c,d)=>({limit:c.limit,skip:c.skip,name:d,total:c.total})),this.setFormName=this.updater((c,d)=>Object.assign(Object.assign({},c),{formName:d})),this.setItem=this.updater((c,d)=>Object.assign(Object.assign({},c),{item:d})),this.addNewMedicalRecordStatus=this.updater((c,d)=>Object.assign(Object.assign({},c),{medicalRecordStatuses:[...c.medicalRecordStatuses,d]})),this.updateMedicalRecordStatus=this.updater((c,d)=>Object.assign(Object.assign({},c),{medicalRecordStatuses:c.medicalRecordStatuses.map(n=>n.id===d.id?d:n)})),this.addMedicalRecordStatuses=this.updater((c,d)=>Object.assign(Object.assign({},c),{medicalRecordStatuses:c.medicalRecordStatuses.concat(d)})),this.updateMedicalRecordStatuses=this.updater((c,d)=>Object.assign(Object.assign({},c),{medicalRecordStatuses:c.medicalRecordStatuses.map(n=>d.find(m=>m.id===n.id)||n)})),this.setSearchQuery=this.updater((c,d)=>Object.assign(Object.assign({},c),{searchQuery:d})),this.loadMedicalRecordStatusEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.data.userMedicalRecordStatus({medicalRecordStatusId:d}).pipe((0,g._b)(n=>{this.patchState({item:n.data.item,errors:n.errors,loading:!1})},n=>this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})))))),this.loadMedicalRecordStatusesEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.input$),(0,h.w)(([d,n])=>this.data.userMedicalRecordStatuses({input:n}).pipe((0,g._b)(a=>this.patchState({paging:{limit:n.limit,skip:n.skip,total:a.data.count.total},medicalRecordStatuses:a.data.items,errors:a.errors,loading:!1}),a=>this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})))))),this.createMedicalRecordStatusEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.medicalRecordStatusService.createMedicalRecordStatus(Object.assign({},d)).pipe((0,g._b)(n=>{this.addNewMedicalRecordStatus(n),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:n,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},n=>{n.graphQLErrors?(this.toast.error(n.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})):(this.toast.error(n.Message),this.formService.setErrors(n.Data))}))))),this.updateMedicalRecordStatusEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([d,n])=>this.medicalRecordStatusService.updateMedicalRecordStatus(d,d.id).pipe((0,g._b)(a=>{this.updateMedicalRecordStatus(a),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:a,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.deleteMedicalRecordStatusEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([d,n])=>this.data.userDeleteMedicalRecordStatus({medicalRecordStatusId:n.id}).pipe((0,g._b)(a=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:a.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.importExcelEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.medicalRecordStatusService.importMedicalRecordStatuses(d).pipe((0,te.K)(n=>{var a;return this.toast.error(null!==(a=n.Message)&&void 0!==a?a:"Failed to save",{duration:3e3}),k.E}),(0,C.b)(n=>{const a=JSON.parse(n.created),m=JSON.parse(n.updated),p=JSON.parse(n.failed),_=a.length+m.length+p.length;this.addMedicalRecordStatuses(a),this.updateMedicalRecordStatuses(m),this.toast.success(`${a.length} created, ${m.length} updated, ${p.length} failed of total ${_}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("medicalRecordStatusId")?(this.route.snapshot.paramMap.get("medicalRecordStatusId"),this.setFormName("medicalRecordStatus_edit")):this.setFormName("medicalRecordStatus_create")}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.medicalRecordStatusService.validateMedicalRecordStatusExcelData(t)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(E.q),e.LFG(A.F0),e.LFG(A.gz),e.LFG(X.F),e.LFG(q.o),e.LFG(CR))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function SR(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close.emit())})("formIsReady",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.medicalRecordStatus)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let nd=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"medicalRecordStatus_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.medicalRecordStatus=i.item})):t.formName&&t.formName.currentValue&&"medicalRecordStatus_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadMedicalRecordStatusEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.medicalRecordStatus=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(hi),e.Y36(A.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-medical-record-status-form"]],inputs:{medicalRecordStatus:"medicalRecordStatus",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,SR,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[w.O5,z.M,w.Ov],encapsulation:2}),s})(),ld=(()=>{class s{constructor(){this.autoHeight=!1,this.medicalRecordStatuses=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[,{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var r;t.includes(null===(r=i.data)||void 0===r?void 0:r.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-medical-record-status-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(N.x,5),2&t){let r;e.iGM(r=e.CRH())&&(i.tableView=r.first)}},inputs:{autoHeight:"autoHeight",medicalRecordStatuses:"medicalRecordStatuses"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","data","showSidebar","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("data",i.medicalRecordStatuses)("showSidebar",!1)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[N.x],encapsulation:2}),s})();function vR(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-medical-record-status-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","medicalRecordStatus_edit")("formControl",t.formControl)("medicalRecordStatus",t.medicalRecordStatus)}}const bR=function(){return{}};function TR(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-medical-record-status-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","medicalRecordStatus_create")("formControl",t.formControl)("medicalRecordStatus",e.DdM(3,bR))}}function yR(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-medical-record-status-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(u.ref.close())}),e.qZA()}2&s&&e.Q6J("medicalRecordStatuses",o.data.items)}let wR=(()=>{class s extends I.fS{constructor(t){super(),this.store=t,this.store.loadMedicalRecordStatusesEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.medicalRecordStatuses$.pipe((0,h.w)(i=>(0,T.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(hi))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e._Bn([hi]),e.qOj],decls:7,vars:5,consts:[[3,"to","control","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","medicalRecordStatus","send","close"],[1,"w-full","h-full","bg-white",3,"medicalRecordStatuses","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"ui-select-form",0),e.YNc(1,vR,2,3,"ng-template",null,1,e.W1O),e.YNc(3,TR,1,4,"ng-template",null,2,e.W1O),e.YNc(5,yR,1,1,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[x.JJ,x.oH,J.$,nd,ld],encapsulation:2}),s})();function xR(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-medical-record-status-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","medicalRecordStatus_edit")("medicalRecordStatus",t.value)}}const NR=function(){return{}};function AR(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-medical-record-status-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","medicalRecordStatus_create")("medicalRecordStatus",e.DdM(2,NR))}function FR(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-medical-record-status-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(null==u.ref?null:u.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("medicalRecordStatuses",t.items)}}let DR=(()=>{class s extends Y{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:6,consts:[[3,"data","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","medicalRecordStatus","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","medicalRecordStatuses","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,xR,1,2,"ng-template",null,1,e.W1O),e.YNc(3,AR,1,3,"ng-template",null,2,e.W1O),e.YNc(5,FR,1,2,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("data",i.data)("title",i.to.title)("onSave",i.onSave)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[ee,nd,ld],encapsulation:2}),s})(),IR=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[hi],imports:[w.ez,R.F,x.UX,V.o,H.u,Q.P,U.t,Z,j.h,K.G,I.X0.forChild({types:[{name:"medical-record-status-select",component:wR,wrappers:["form-field"]},{name:"medical-record-status-grid",component:DR}]})]}),s})(),PR=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[IR]}),s})();class fi extends y.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class WR extends fi{constructor(o){super("ValidateMedLevelExcelDataAction"),this.valid=!1,this.excelData=o}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name)}),this.validationContext.addRule(new f.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof f.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(r=>r.name),newNames:[i.newName]}):i instanceof f.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,T.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class MR extends f.wS{constructor(o,t,i,r,l){super(o,t,i,r,l,!0)}}class ER extends f.ul{constructor(o,t,i,r=!1){super(o,t,r),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new f.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new MR("name","The medlevel name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class OR extends fi{constructor(o){super("CreateMedLevelAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new ER("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateMedLevel({input:this.input}).pipe((0,h.w)(o=>(0,ie.of)(o.data.created)))}}class LR extends fi{constructor(o){super("UpdateMedLevelsAction"),this.medLevels=o}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.medLevels,!0))}performAction(){this.response=this.businessProvider.data.userUpdateMedLevels({input:{medLevels:this.medLevels}}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}class GR extends fi{constructor(o,t){super("UpdateMedLevelAction"),this.medLevel=o,this.medLevelId=t}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.medLevel,!0)).addRule(new f.xF("Id","Id should be a CUID and not null",this.medLevelId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateMedLevel({medLevelId:this.medLevelId,input:this.medLevel}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}let cd=(()=>{class s extends y.nH{constructor(t,i,r){super("NotificationService.MedLevelBusinessProviderService",t,r),this.data=i}createMedLevel(t){const i=new OR(t);return i.Do(this),i.response}updateMedLevel(t,i){const r=new GR(t,i);return r.Do(this),r.response}importMedLevels(t){const i=new LR(t);return i.Do(this),i.response}validateMedLevelExcelData(t){const i=new WR(t);return i.Do(this),i.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(O.ed),e.LFG(E.q),e.LFG(y.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),$R=(()=>{class s extends y.nH{constructor(t,i,r){super("MedLevelService",r,t),this.businessProvider=i}createMedLevel(t){const i=Object.fromEntries(Object.entries(t).filter(([r,l])=>null!==l));return this.businessProvider.createMedLevel(i)}updateMedLevel(t,i){return this.businessProvider.updateMedLevel(t,i)}importMedLevels(t){return this.businessProvider.importMedLevels(t)}validateMedLevelExcelData(t){return this.businessProvider.validateMedLevelExcelData(t)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(cd,8),e.LFG(cd),e.LFG(O.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),Oo=(()=>{class s extends g.m1{constructor(t,i,r,l,u,P){super({loading:!1,medLevels:[],done:!1,searchQuery:"",formName:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=r,this.toast=l,this.formService=u,this.medLevelService=P,this.errors$=this.select(c=>c.errors),this.loading$=this.select(c=>c.loading),this.done$=this.select(c=>c.done),this.item$=this.select(c=>c.item),this.medLevels$=this.select(c=>c.medLevels),this.paging$=this.select(c=>c.paging),this.searchQuery$=this.select(c=>c.searchQuery),this.formName$=this.select(c=>c.formName),this.actionResult$=this.select(this.item$,this.done$,(c,d)=>({item:c,done:d}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.medLevels$,(c,d,n,a,m)=>({errors:c,loading:d,item:n,formName:a,medLevels:m}),{debounce:!0}),this.input$=this.select(this.paging$,this.searchQuery$,(c,d)=>({limit:c.limit,skip:c.skip,name:d,total:c.total})),this.setFormName=this.updater((c,d)=>Object.assign(Object.assign({},c),{formName:d})),this.setItem=this.updater((c,d)=>Object.assign(Object.assign({},c),{item:d})),this.addNewMedLevel=this.updater((c,d)=>Object.assign(Object.assign({},c),{medLevels:[...c.medLevels,d]})),this.updateMedLevel=this.updater((c,d)=>Object.assign(Object.assign({},c),{medLevels:c.medLevels.map(n=>n.id===d.id?d:n)})),this.addMedLevels=this.updater((c,d)=>Object.assign(Object.assign({},c),{medLevels:c.medLevels.concat(d)})),this.updateMedLevels=this.updater((c,d)=>Object.assign(Object.assign({},c),{medLevels:c.medLevels.map(n=>d.find(m=>m.id===n.id)||n)})),this.setSearchQuery=this.updater((c,d)=>Object.assign(Object.assign({},c),{searchQuery:d})),this.loadMedLevelEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.data.userMedLevel({medLevelId:d}).pipe((0,g._b)(n=>{this.patchState({item:n.data.item,errors:n.errors,loading:!1})},n=>this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})))))),this.loadMedLevelsEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.input$),(0,h.w)(([d,n])=>this.data.userMedLevels({input:n}).pipe((0,g._b)(a=>this.patchState({paging:{limit:n.limit,skip:n.skip,total:a.data.count.total},medLevels:a.data.items,errors:a.errors,loading:!1}),a=>this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})))))),this.createMedLevelEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.medLevelService.createMedLevel(Object.assign({},d)).pipe((0,g._b)(n=>{this.addNewMedLevel(n),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:n,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},n=>{n.graphQLErrors?(this.toast.error(n.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})):(this.toast.error(n.Message),this.formService.setErrors(n.Data))}))))),this.updateMedLevelEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([d,n])=>this.medLevelService.updateMedLevel(d,d.id).pipe((0,g._b)(a=>{this.updateMedLevel(a),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:a,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.deleteMedLevelEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([d,n])=>this.data.userDeleteMedLevel({medLevelId:n.id}).pipe((0,g._b)(a=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:a.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.importExcelEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.medLevelService.importMedLevels(d).pipe((0,te.K)(n=>{var a;return this.toast.error(null!==(a=n.Message)&&void 0!==a?a:"Failed to save",{duration:3e3}),k.E}),(0,C.b)(n=>{const a=JSON.parse(n.created),m=JSON.parse(n.updated),p=JSON.parse(n.failed),_=a.length+m.length+p.length;this.addMedLevels(a),this.updateMedLevels(m),this.toast.success(`${a.length} created, ${m.length} updated, ${p.length} failed of total ${_}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("medLevelId")?(this.route.snapshot.paramMap.get("medLevelId"),this.setFormName("medLevel_edit")):this.setFormName("medLevel_create")}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.medLevelService.validateMedLevelExcelData(t)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(E.q),e.LFG(A.F0),e.LFG(A.gz),e.LFG(X.F),e.LFG(q.o),e.LFG($R))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function RR(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close.emit())})("formIsReady",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.medLevel)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let dd=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"medLevel_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.medLevel=i.item})):t.formName&&t.formName.currentValue&&"medLevel_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadMedLevelEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.medLevel=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Oo),e.Y36(A.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-med-level-form"]],inputs:{medLevel:"medLevel",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,RR,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[w.O5,z.M,w.Ov],encapsulation:2}),s})(),ud=(()=>{class s{constructor(){this.autoHeight=!1,this.medLevels=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[,{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{headerName:"Approved Site Costs",field:"approvedSiteCosts",valueFormatter:t=>{var i;return(0,S.oBD)(null===(i=t.data)||void 0===i?void 0:i.approvedSiteCosts,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{headerName:"Maximum Medical Bills to Date",field:"maximumMedicalBillsToDate",valueFormatter:t=>{var i;return(0,S.oBD)(null===(i=t.data)||void 0===i?void 0:i.maximumMedicalBillsToDate,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var r;t.includes(null===(r=i.data)||void 0===r?void 0:r.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-med-level-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(N.x,5),2&t){let r;e.iGM(r=e.CRH())&&(i.tableView=r.first)}},inputs:{autoHeight:"autoHeight",medLevels:"medLevels"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.medLevels)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[N.x],encapsulation:2}),s})();function VR(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-med-level-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","medLevel_edit")("formControl",t.formControl)("medLevel",t.medLevel)}}const QR=function(){return{}};function UR(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-med-level-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","medLevel_create")("formControl",t.formControl)("medLevel",e.DdM(3,QR))}}function JR(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-med-level-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(u.ref.close())}),e.qZA()}2&s&&e.Q6J("medLevels",o.data.items)}let jR=(()=>{class s extends I.fS{constructor(t){super(),this.store=t,this.store.loadMedLevelsEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.medLevels$.pipe((0,h.w)(i=>(0,T.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Oo))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","medLevel","send","close"],[1,"w-full","h-full","bg-white",3,"medLevels","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,VR,2,3,"ng-template",null,1,e.W1O),e.YNc(3,UR,1,4,"ng-template",null,2,e.W1O),e.YNc(5,JR,1,1,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",u)("editTemplate",r)("createTemplate",l)("key",i.field.key)}},dependencies:[x.JJ,x.oH,J.$,dd,ud],encapsulation:2}),s})();function zR(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-med-level-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","medLevel_edit")("medLevel",t.value)}}const qR=function(){return{}};function HR(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-med-level-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","medLevel_create")("medLevel",e.DdM(2,qR))}function KR(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-med-level-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(null==u.ref?null:u.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("medLevels",t.items)}}let kR=(()=>{class s extends Y{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","medLevel","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","medLevels","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,zR,1,2,"ng-template",null,1,e.W1O),e.YNc(3,HR,1,3,"ng-template",null,2,e.W1O),e.YNc(5,KR,1,2,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[ee,dd,ud],encapsulation:2}),s})(),ZR=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[Oo],imports:[w.ez,R.F,x.UX,V.o,H.u,Q.P,U.t,Z,j.h,K.G,I.X0.forChild({types:[{name:"med-level-select",component:jR,wrappers:["form-field"]},{name:"med-level-grid",component:kR}]})]}),s})(),BR=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[ZR]}),s})();class _i extends y.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class YR extends _i{constructor(o){super("ValidateOrganizationExcelDataAction"),this.valid=!1,this.excelData=o}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name)}),this.validationContext.addRule(new f.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof f.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(r=>r.name),newNames:[i.newName]}):i instanceof f.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,T.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class XR extends f.wS{constructor(o,t,i,r,l){super(o,t,i,r,l,!0)}}class eV extends f.ul{constructor(o,t,i,r=!1){super(o,t,r),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new f.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new XR("name","The organization name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class tV extends _i{constructor(o){super("CreateOrganizationAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new eV("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateOrganization({input:this.input}).pipe((0,h.w)(o=>(0,ie.of)(o.data.created)))}}class iV extends _i{constructor(o){super("UpdateOrganizationsAction"),this.organizations=o}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.organizations,!0))}performAction(){this.response=this.businessProvider.data.userUpdateOrganizations({input:{organizations:this.organizations}}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}class sV extends _i{constructor(o,t){super("UpdateOrganizationAction"),this.organization=o,this.organizationId=t}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.organization,!0)).addRule(new f.xF("Id","Id should be a CUID and not null",this.organizationId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateOrganization({organizationId:this.organizationId,input:this.organization}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}let md=(()=>{class s extends y.nH{constructor(t,i,r){super("NotificationService.OrganizationBusinessProviderService",t,r),this.data=i}createOrganization(t){const i=new tV(t);return i.Do(this),i.response}updateOrganization(t,i){const r=new sV(t,i);return r.Do(this),r.response}importOrganizations(t){const i=new iV(t);return i.Do(this),i.response}validateOrganizationExcelData(t){const i=new YR(t);return i.Do(this),i.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(O.ed),e.LFG(E.q),e.LFG(y.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),oV=(()=>{class s extends y.nH{constructor(t,i,r){super("OrganizationService",r,t),this.businessProvider=i}createOrganization(t){const i=Object.fromEntries(Object.entries(t).filter(([r,l])=>null!==l));return this.businessProvider.createOrganization(i)}updateOrganization(t,i){return this.businessProvider.updateOrganization(t,i)}importOrganizations(t){return this.businessProvider.importOrganizations(t)}validateOrganizationExcelData(t){return this.businessProvider.validateOrganizationExcelData(t)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(md,8),e.LFG(md),e.LFG(O.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),Lo=(()=>{class s extends g.m1{constructor(t,i,r,l,u,P){super({loading:!1,organizations:[],done:!1,searchQuery:"",formName:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=r,this.toast=l,this.formService=u,this.organizationService=P,this.errors$=this.select(c=>c.errors),this.loading$=this.select(c=>c.loading),this.done$=this.select(c=>c.done),this.item$=this.select(c=>c.item),this.organizations$=this.select(c=>c.organizations),this.paging$=this.select(c=>c.paging),this.searchQuery$=this.select(c=>c.searchQuery),this.formName$=this.select(c=>c.formName),this.actionResult$=this.select(this.item$,this.done$,(c,d)=>({item:c,done:d}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.organizations$,(c,d,n,a,m)=>({errors:c,loading:d,item:n,formName:a,organizations:m}),{debounce:!0}),this.input$=this.select(this.paging$,this.searchQuery$,(c,d)=>({limit:c.limit,skip:c.skip,name:d,total:c.total})),this.setFormName=this.updater((c,d)=>Object.assign(Object.assign({},c),{formName:d})),this.setItem=this.updater((c,d)=>Object.assign(Object.assign({},c),{item:d})),this.addNewOrganization=this.updater((c,d)=>Object.assign(Object.assign({},c),{organizations:[...c.organizations,d]})),this.updateOrganization=this.updater((c,d)=>Object.assign(Object.assign({},c),{organizations:c.organizations.map(n=>n.id===d.id?d:n)})),this.addOrganizations=this.updater((c,d)=>Object.assign(Object.assign({},c),{organizations:c.organizations.concat(d)})),this.updateOrganizations=this.updater((c,d)=>Object.assign(Object.assign({},c),{organizations:c.organizations.map(n=>d.find(m=>m.id===n.id)||n)})),this.setSearchQuery=this.updater((c,d)=>Object.assign(Object.assign({},c),{searchQuery:d})),this.loadOrganizationEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.data.userOrganization({organizationId:d}).pipe((0,g._b)(n=>{this.patchState({item:n.data.item,errors:n.errors,loading:!1})},n=>this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})))))),this.loadOrganizationsEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.input$),(0,h.w)(([d,n])=>this.data.userOrganizations({input:n}).pipe((0,g._b)(a=>this.patchState({paging:{limit:n.limit,skip:n.skip,total:a.data.count.total},organizations:a.data.items,errors:a.errors,loading:!1}),a=>this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})))))),this.createOrganizationEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.organizationService.createOrganization(Object.assign({},d)).pipe((0,g._b)(n=>{this.addNewOrganization(n),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:n,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},n=>{n.graphQLErrors?(this.toast.error(n.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})):(this.toast.error(n.Message),this.formService.setErrors(n.Data))}))))),this.updateOrganizationEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([d,n])=>this.organizationService.updateOrganization(d,d.id).pipe((0,g._b)(a=>{this.updateOrganization(a),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:a,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.deleteOrganizationEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([d,n])=>this.data.userDeleteOrganization({organizationId:n.id}).pipe((0,g._b)(a=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:a.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.importExcelEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.organizationService.importOrganizations(d).pipe((0,te.K)(n=>{var a;return this.toast.error(null!==(a=n.Message)&&void 0!==a?a:"Failed to save",{duration:3e3}),k.E}),(0,C.b)(n=>{const a=JSON.parse(n.created),m=JSON.parse(n.updated),p=JSON.parse(n.failed),_=a.length+m.length+p.length;this.addOrganizations(a),this.updateOrganizations(m),this.toast.success(`${a.length} created, ${m.length} updated, ${p.length} failed of total ${_}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("organizationId")?(this.route.snapshot.paramMap.get("organizationId"),this.setFormName("organization_edit")):this.setFormName("organization_create")}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.organizationService.validateOrganizationExcelData(t)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(E.q),e.LFG(A.F0),e.LFG(A.gz),e.LFG(X.F),e.LFG(q.o),e.LFG(oV))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function rV(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close.emit())})("formIsReady",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.organization)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let pd=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"organization_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.organization=i.item})):t.formName&&t.formName.currentValue&&"organization_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadOrganizationEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.organization=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Lo),e.Y36(A.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-organization-form"]],inputs:{organization:"organization",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,rV,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[w.O5,z.M,w.Ov],encapsulation:2}),s})(),hd=(()=>{class s{constructor(){this.autoHeight=!1,this.organizations=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[,{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var r;t.includes(null===(r=i.data)||void 0===r?void 0:r.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-organization-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(N.x,5),2&t){let r;e.iGM(r=e.CRH())&&(i.tableView=r.first)}},inputs:{autoHeight:"autoHeight",organizations:"organizations"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.organizations)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[N.x],encapsulation:2}),s})();function aV(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-organization-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","organization_edit")("formControl",t.formControl)("organization",t.organization)}}const nV=function(){return{}};function lV(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-organization-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","organization_create")("formControl",t.formControl)("organization",e.DdM(3,nV))}}function cV(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-organization-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(u.ref.close())}),e.qZA()}2&s&&e.Q6J("organizations",o.data.items)}let dV=(()=>{class s extends I.fS{constructor(t){super(),this.store=t,this.store.loadOrganizationsEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.organizations$.pipe((0,h.w)(i=>(0,T.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Lo))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","organization","send","close"],[1,"w-full","h-full","bg-white",3,"organizations","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,aV,2,3,"ng-template",null,1,e.W1O),e.YNc(3,lV,1,4,"ng-template",null,2,e.W1O),e.YNc(5,cV,1,1,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",u)("editTemplate",r)("createTemplate",l)("key",i.field.key)}},dependencies:[x.JJ,x.oH,J.$,pd,hd],encapsulation:2}),s})();function uV(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-organization-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","organization_edit")("organization",t.value)}}const mV=function(){return{}};function pV(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-organization-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","organization_create")("organization",e.DdM(2,mV))}function hV(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-organization-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(null==u.ref?null:u.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("organizations",t.items)}}let fV=(()=>{class s extends Y{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","organization","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","organizations","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,uV,1,2,"ng-template",null,1,e.W1O),e.YNc(3,pV,1,3,"ng-template",null,2,e.W1O),e.YNc(5,hV,1,2,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[ee,pd,hd],encapsulation:2}),s})(),_V=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[Lo],imports:[w.ez,R.F,x.UX,V.o,H.u,Q.P,U.t,Z,j.h,K.G,I.X0.forChild({types:[{name:"organization-select",component:dV,wrappers:["form-field"]},{name:"organization-grid",component:fV}]})]}),s})(),gV=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[_V]}),s})();var Go=ae(51194);function CV(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close.emit())})("formIsReady",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.patient)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let fd=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"patient_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.patient=i.item})):t.formName&&t.formName.currentValue&&"patient_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadPatientEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.patient=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Go.d),e.Y36(A.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-patient-form"]],inputs:{patient:"patient",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,CV,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[w.O5,z.M,w.Ov],encapsulation:2}),s})(),_d=(()=>{class s{constructor(){this.autoHeight=!1,this.patients=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[{field:"ethnicity.name",headerName:"Ethnicity",filter:"agTextColumnFilter"},{field:"gender.name",headerName:"Gender",filter:"agTextColumnFilter"},{field:"language.name",headerName:"Language",filter:"agTextColumnFilter"},{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{field:"firstName",filter:"agTextColumnFilter"},{field:"middleName",filter:"agTextColumnFilter"},{field:"lastName",filter:"agTextColumnFilter"},{field:"suffix",filter:"agTextColumnFilter"},{field:"genderId",filter:"agTextColumnFilter",hide:!0},{field:"nickname",filter:"agTextColumnFilter"},{field:"height",filter:"agTextColumnFilter"},{field:"weight",filter:"agTextColumnFilter"},{field:"dateOfBirth",filter:"agDateColumnFilter"},{field:"primaryPhoneNumber",filter:"agTextColumnFilter"},{headerName:"Is Primary Phone Mobile",field:"isPrimaryPhoneMobile",filter:"agSetColumnFilter",cellRenderer:"checkboxRenderer"},{field:"secondaryPhoneNumber",filter:"agTextColumnFilter"},{headerName:"Is Secondary Phone Mobile",field:"isSecondaryPhoneMobile",filter:"agSetColumnFilter",cellRenderer:"checkboxRenderer"},{field:"memberRegistrationNumber",filter:"agTextColumnFilter"},{field:"ethnicityId",filter:"agTextColumnFilter",hide:!0},{field:"languageId",filter:"agTextColumnFilter",hide:!0},{headerName:"Requires Translator",field:"requiresTranslator",filter:"agSetColumnFilter",cellRenderer:"checkboxRenderer"},{field:"socialSecurityNumber",filter:"agTextColumnFilter"},{field:"honorific",filter:"agTextColumnFilter"},{field:"primaryEmailAddress",filter:"agTextColumnFilter"},{field:"primaryAddressLine1",filter:"agTextColumnFilter"},{field:"primaryAddressLine2",filter:"agTextColumnFilter"},{field:"primaryAddressCity",filter:"agTextColumnFilter"},{field:"primaryAddressStateOrProvince",filter:"agTextColumnFilter"},{field:"primaryAddressPostalCode",filter:"agTextColumnFilter"},{field:"notes",filter:"agTextColumnFilter"},{headerName:"Latitude",field:"latitude",valueFormatter:t=>{var i;return(0,S.oBD)(null===(i=t.data)||void 0===i?void 0:i.latitude,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{headerName:"Longitude",field:"longitude",valueFormatter:t=>{var i;return(0,S.oBD)(null===(i=t.data)||void 0===i?void 0:i.longitude,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{field:"emergencyContactId",filter:"agTextColumnFilter",hide:!0},{field:"homePhoneNumber",filter:"agTextColumnFilter"},{field:"mobileNumber",filter:"agTextColumnFilter"},{field:"bmi",filter:"agTextColumnFilter"},{field:"occupation",filter:"agTextColumnFilter"},{field:"debtorRemarks",filter:"agTextColumnFilter"},{field:"workAddressLine1",filter:"agTextColumnFilter"},{field:"workAddressLine2",filter:"agTextColumnFilter"},{field:"workAddressCity",filter:"agTextColumnFilter"},{field:"workAddressStateOrProvince",filter:"agTextColumnFilter"},{field:"workAddressPostalCode",filter:"agTextColumnFilter"},{headerName:"Work Latitude",field:"workLatitude",valueFormatter:t=>{var i;return(0,S.oBD)(null===(i=t.data)||void 0===i?void 0:i.latitude,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{headerName:"Work Longitude",field:"workLongitude",valueFormatter:t=>{var i;return(0,S.oBD)(null===(i=t.data)||void 0===i?void 0:i.longitude,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var r;t.includes(null===(r=i.data)||void 0===r?void 0:r.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-patient-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(N.x,5),2&t){let r;e.iGM(r=e.CRH())&&(i.tableView=r.first)}},inputs:{autoHeight:"autoHeight",patients:"patients"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.patients)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[N.x],encapsulation:2}),s})();function SV(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-patient-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","patient_edit")("formControl",t.formControl)("patient",t.patient)}}const vV=function(){return{}};function bV(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-patient-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","patient_create")("formControl",t.formControl)("patient",e.DdM(3,vV))}}function TV(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-patient-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(u.ref.close())}),e.qZA()}2&s&&e.Q6J("patients",o.data.items)}let yV=(()=>{class s extends I.fS{constructor(t){super(),this.store=t,this.store.loadPatientsEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.patients$.pipe((0,h.w)(i=>(0,T.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Go.d))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","patient","send","close"],[1,"w-full","h-full","bg-white",3,"patients","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,SV,2,3,"ng-template",null,1,e.W1O),e.YNc(3,bV,1,4,"ng-template",null,2,e.W1O),e.YNc(5,TV,1,1,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",u)("editTemplate",r)("createTemplate",l)("key",i.field.key)}},dependencies:[x.JJ,x.oH,J.$,fd,_d],encapsulation:2}),s})();function wV(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-patient-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","patient_edit")("patient",t.value)}}const xV=function(){return{}};function NV(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-patient-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","patient_create")("patient",e.DdM(2,xV))}function AV(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-patient-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(null==u.ref?null:u.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("patients",t.items)}}let FV=(()=>{class s extends Y{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","patient","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","patients","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,wV,1,2,"ng-template",null,1,e.W1O),e.YNc(3,NV,1,3,"ng-template",null,2,e.W1O),e.YNc(5,AV,1,2,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[ee,fd,_d],encapsulation:2}),s})(),DV=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[Go.d],imports:[w.ez,R.F,x.UX,V.o,H.u,Q.P,U.t,Z,j.h,K.G,I.X0.forChild({types:[{name:"patient-select",component:yV,wrappers:["form-field"]},{name:"patient-grid",component:FV}]})]}),s})(),IV=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[DV]}),s})();class gi extends y.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class PV extends gi{constructor(o,t){super("ValidatePatientStudyExcelDataAction"),this.valid=!1,this.excelData=o,this.patients=t}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name),this.validationContext.addRule(new f.mi(`patientName_${i}_is_valid}`,"Patient Is Not Valid","patient.name",t.patient,this.patients,!0))}),this.validationContext.addRule(new f.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof f.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(r=>r.name),newNames:[i.newName]}):i instanceof f.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,T.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class WV extends f.wS{constructor(o,t,i,r,l){super(o,t,i,r,l,!0)}}class MV extends f.ul{constructor(o,t,i,r=!1){super(o,t,r),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new f.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new WV("name","The patientstudy name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class EV extends gi{constructor(o){super("CreatePatientStudyAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new MV("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreatePatientStudy({input:this.input}).pipe((0,h.w)(o=>(0,ie.of)(o.data.created)))}}class OV extends gi{constructor(o){super("UpdatePatientStudiesAction"),this.patientStudies=o}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.patientStudies,!0))}performAction(){this.response=this.businessProvider.data.userUpdatePatientStudies({input:{patientStudies:this.patientStudies}}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}class LV extends gi{constructor(o,t){super("UpdatePatientStudyAction"),this.patientStudy=o,this.patientStudyId=t}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.patientStudy,!0)).addRule(new f.xF("Id","Id should be a CUID and not null",this.patientStudyId,!0))}performAction(){this.response=this.businessProvider.data.userUpdatePatientStudy({patientStudyId:this.patientStudyId,input:this.patientStudy}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}let gd=(()=>{class s extends y.nH{constructor(t,i,r){super("NotificationService.PatientStudyBusinessProviderService",t,r),this.data=i}createPatientStudy(t){const i=new EV(t);return i.Do(this),i.response}updatePatientStudy(t,i){const r=new LV(t,i);return r.Do(this),r.response}importPatientStudies(t){const i=new OV(t);return i.Do(this),i.response}validatePatientStudyExcelData(t,i){const r=new PV(t,i);return r.Do(this),r.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(O.ed),e.LFG(E.q),e.LFG(y.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),GV=(()=>{class s extends y.nH{constructor(t,i,r){super("PatientStudyService",r,t),this.businessProvider=i}createPatientStudy(t){const i=Object.fromEntries(Object.entries(t).filter(([r,l])=>null!==l));return this.businessProvider.createPatientStudy(i)}updatePatientStudy(t,i){return this.businessProvider.updatePatientStudy(t,i)}importPatientStudies(t){return this.businessProvider.importPatientStudies(t)}validatePatientStudyExcelData(t,i){return this.businessProvider.validatePatientStudyExcelData(t,i)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(gd,8),e.LFG(gd),e.LFG(O.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),$o=(()=>{class s extends g.m1{constructor(t,i,r,l,u,P){if(super({loading:!1,patientStudies:[],done:!1,searchQuery:"",formName:void 0,patientId:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=r,this.toast=l,this.formService=u,this.patientStudyService=P,this.errors$=this.select(d=>d.errors),this.loading$=this.select(d=>d.loading),this.done$=this.select(d=>d.done),this.item$=this.select(d=>d.item),this.patientStudies$=this.select(d=>d.patientStudies),this.patients$=this.select(d=>d.patients||[]),this.patientId$=this.select(d=>d.patientId),this.paging$=this.select(d=>d.paging),this.searchQuery$=this.select(d=>d.searchQuery),this.formName$=this.select(d=>d.formName),this.actionResult$=this.select(this.item$,this.done$,(d,n)=>({item:d,done:n}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.patientStudies$,this.patients$,(d,n,a,m,p,_)=>({errors:d,loading:n,item:a,formName:m,patientStudies:p,patients:_}),{debounce:!0}),this.input$=this.select(this.paging$,this.patientId$,this.searchQuery$,(d,n,a)=>({limit:d.limit,skip:d.skip,name:a,patientId:n,total:d.total})),this.setFormName=this.updater((d,n)=>Object.assign(Object.assign({},d),{formName:n})),this.setPatientId=this.updater((d,n)=>Object.assign(Object.assign({},d),{patientId:n})),this.filterPatients=d=>this.data.userSelectPatients({input:{name:d}}).pipe((0,g._b)(n=>{let a=n.data.items;return this.patchState({patients:a}),a},n=>this.patchState({errors:n.graphQLErrors?n.graphQLErrors:n})),(0,B.U)(n=>n.data.items)),this.addPatient=this.updater((d,n)=>Object.assign(Object.assign({},d),{patients:d.patients.concat(n)})),this.setItem=this.updater((d,n)=>Object.assign(Object.assign({},d),{item:n})),this.addNewPatientStudy=this.updater((d,n)=>Object.assign(Object.assign({},d),{patientStudies:[...d.patientStudies,n]})),this.updatePatientStudy=this.updater((d,n)=>Object.assign(Object.assign({},d),{patientStudies:d.patientStudies.map(a=>a.id===n.id?n:a)})),this.addPatientStudies=this.updater((d,n)=>Object.assign(Object.assign({},d),{patientStudies:d.patientStudies.concat(n)})),this.updatePatientStudies=this.updater((d,n)=>Object.assign(Object.assign({},d),{patientStudies:d.patientStudies.map(a=>n.find(p=>p.id===a.id)||a)})),this.setSearchQuery=this.updater((d,n)=>Object.assign(Object.assign({},d),{searchQuery:n})),this.loadPatientStudyEffect=this.effect(d=>d.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(n=>this.data.userPatientStudy({patientStudyId:n}).pipe((0,g._b)(a=>{this.patchState({item:a.data.item,errors:a.errors,loading:!1})},a=>this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})))))),this.loadPatientStudiesEffect=this.effect(d=>d.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.input$),(0,h.w)(([n,a])=>this.data.userPatientStudies({input:a}).pipe((0,g._b)(m=>this.patchState({paging:{limit:a.limit,skip:a.skip,total:m.data.count.total},patientStudies:m.data.items,errors:m.errors,loading:!1}),m=>this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})))))),this.createPatientStudyEffect=this.effect(d=>d.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(n=>this.patientStudyService.createPatientStudy(Object.assign({},n)).pipe((0,g._b)(a=>{this.addNewPatientStudy(a),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:a,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.updatePatientStudyEffect=this.effect(d=>d.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([n,a])=>this.patientStudyService.updatePatientStudy(n,n.id).pipe((0,g._b)(m=>{this.updatePatientStudy(m),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:m,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},m=>{m.graphQLErrors?(this.toast.error(m.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})):(this.toast.error(m.Message),this.formService.setErrors(m.Data))}))))),this.deletePatientStudyEffect=this.effect(d=>d.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([n,a])=>this.data.userDeletePatientStudy({patientStudyId:a.id}).pipe((0,g._b)(m=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:m.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},m=>{m.graphQLErrors?(this.toast.error(m.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})):(this.toast.error(m.Message),this.formService.setErrors(m.Data))}))))),this.importExcelEffect=this.effect(d=>d.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(n=>this.patientStudyService.importPatientStudies(n).pipe((0,te.K)(a=>{var m;return this.toast.error(null!==(m=a.Message)&&void 0!==m?m:"Failed to save",{duration:3e3}),k.E}),(0,C.b)(a=>{const m=JSON.parse(a.created),p=JSON.parse(a.updated),_=JSON.parse(a.failed),v=m.length+p.length+_.length;this.addPatientStudies(m),this.updatePatientStudies(p),this.toast.success(`${m.length} created, ${p.length} updated, ${_.length} failed of total ${v}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("patientStudyId")?(this.route.snapshot.paramMap.get("patientStudyId"),this.setFormName("patientStudy_edit")):this.setFormName("patientStudy_create"),this.route.snapshot.paramMap.has("patientId")){var c=this.route.snapshot.paramMap.get("patientId");this.setPatientId(c)}}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.patientStudyService.validatePatientStudyExcelData(t,i.patients)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(E.q),e.LFG(A.F0),e.LFG(A.gz),e.LFG(X.F),e.LFG(q.o),e.LFG(GV))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function $V(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close.emit())})("formIsReady",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.patientStudy)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let Cd=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"patientStudy_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.patientStudy=i.item})):t.formName&&t.formName.currentValue&&"patientStudy_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadPatientStudyEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.patientStudy=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36($o),e.Y36(A.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-patient-study-form"]],inputs:{patientStudy:"patientStudy",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,$V,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[w.O5,z.M,w.Ov],encapsulation:2}),s})(),Sd=(()=>{class s{constructor(){this.autoHeight=!1,this.patientStudies=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[{field:"patient.name",headerName:"Patient",filter:"agTextColumnFilter"},{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{field:"patientId",filter:"agTextColumnFilter",hide:!0}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var r;t.includes(null===(r=i.data)||void 0===r?void 0:r.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-patient-study-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(N.x,5),2&t){let r;e.iGM(r=e.CRH())&&(i.tableView=r.first)}},inputs:{autoHeight:"autoHeight",patientStudies:"patientStudies"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.patientStudies)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[N.x],encapsulation:2}),s})();function RV(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-patient-study-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","patientStudy_edit")("formControl",t.formControl)("patientStudy",t.patientStudy)}}const VV=function(){return{}};function QV(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-patient-study-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","patientStudy_create")("formControl",t.formControl)("patientStudy",e.DdM(3,VV))}}function UV(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-patient-study-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(u.ref.close())}),e.qZA()}2&s&&e.Q6J("patientStudies",o.data.items)}let JV=(()=>{class s extends I.fS{constructor(t){super(),this.store=t,this.store.loadPatientStudiesEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.patientStudies$.pipe((0,h.w)(i=>(0,T.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36($o))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","patientStudy","send","close"],[1,"w-full","h-full","bg-white",3,"patientStudies","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,RV,2,3,"ng-template",null,1,e.W1O),e.YNc(3,QV,1,4,"ng-template",null,2,e.W1O),e.YNc(5,UV,1,1,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",u)("editTemplate",r)("createTemplate",l)("key",i.field.key)}},dependencies:[x.JJ,x.oH,J.$,Cd,Sd],encapsulation:2}),s})();function jV(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-patient-study-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","patientStudy_edit")("patientStudy",t.value)}}const zV=function(){return{}};function qV(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-patient-study-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","patientStudy_create")("patientStudy",e.DdM(2,zV))}function HV(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-patient-study-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(null==u.ref?null:u.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("patientStudies",t.items)}}let KV=(()=>{class s extends Y{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","patientStudy","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","patientStudies","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,jV,1,2,"ng-template",null,1,e.W1O),e.YNc(3,qV,1,3,"ng-template",null,2,e.W1O),e.YNc(5,HV,1,2,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[ee,Cd,Sd],encapsulation:2}),s})(),kV=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[$o],imports:[w.ez,R.F,x.UX,V.o,H.u,Q.P,U.t,Z,j.h,K.G,I.X0.forChild({types:[{name:"patient-study-select",component:JV,wrappers:["form-field"]},{name:"patient-study-grid",component:KV}]})]}),s})(),ZV=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[kV]}),s})();class Ci extends y.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class BV extends Ci{constructor(o){super("ValidatePatientTreatmentStatusExcelDataAction"),this.valid=!1,this.excelData=o}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name)}),this.validationContext.addRule(new f.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof f.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(r=>r.name),newNames:[i.newName]}):i instanceof f.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,T.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class YV extends f.wS{constructor(o,t,i,r,l){super(o,t,i,r,l,!0)}}class XV extends f.ul{constructor(o,t,i,r=!1){super(o,t,r),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new f.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new YV("name","The patienttreatmentstatus name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class eQ extends Ci{constructor(o){super("CreatePatientTreatmentStatusAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new XV("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreatePatientTreatmentStatus({input:this.input}).pipe((0,h.w)(o=>(0,ie.of)(o.data.created)))}}class tQ extends Ci{constructor(o){super("UpdatePatientTreatmentStatusesAction"),this.patientTreatmentStatuses=o}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.patientTreatmentStatuses,!0))}performAction(){this.response=this.businessProvider.data.userUpdatePatientTreatmentStatuses({input:{patientTreatmentStatuses:this.patientTreatmentStatuses}}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}class iQ extends Ci{constructor(o,t){super("UpdatePatientTreatmentStatusAction"),this.patientTreatmentStatus=o,this.patientTreatmentStatusId=t}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.patientTreatmentStatus,!0)).addRule(new f.xF("Id","Id should be a CUID and not null",this.patientTreatmentStatusId,!0))}performAction(){this.response=this.businessProvider.data.userUpdatePatientTreatmentStatus({patientTreatmentStatusId:this.patientTreatmentStatusId,input:this.patientTreatmentStatus}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}let vd=(()=>{class s extends y.nH{constructor(t,i,r){super("NotificationService.PatientTreatmentStatusBusinessProviderService",t,r),this.data=i}createPatientTreatmentStatus(t){const i=new eQ(t);return i.Do(this),i.response}updatePatientTreatmentStatus(t,i){const r=new iQ(t,i);return r.Do(this),r.response}importPatientTreatmentStatuses(t){const i=new tQ(t);return i.Do(this),i.response}validatePatientTreatmentStatusExcelData(t){const i=new BV(t);return i.Do(this),i.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(O.ed),e.LFG(E.q),e.LFG(y.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),sQ=(()=>{class s extends y.nH{constructor(t,i,r){super("PatientTreatmentStatusService",r,t),this.businessProvider=i}createPatientTreatmentStatus(t){const i=Object.fromEntries(Object.entries(t).filter(([r,l])=>null!==l));return this.businessProvider.createPatientTreatmentStatus(i)}updatePatientTreatmentStatus(t,i){return this.businessProvider.updatePatientTreatmentStatus(t,i)}importPatientTreatmentStatuses(t){return this.businessProvider.importPatientTreatmentStatuses(t)}validatePatientTreatmentStatusExcelData(t){return this.businessProvider.validatePatientTreatmentStatusExcelData(t)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(vd,8),e.LFG(vd),e.LFG(O.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),Ro=(()=>{class s extends g.m1{constructor(t,i,r,l,u,P){super({loading:!1,patientTreatmentStatuses:[],done:!1,searchQuery:"",formName:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=r,this.toast=l,this.formService=u,this.patientTreatmentStatusService=P,this.errors$=this.select(c=>c.errors),this.loading$=this.select(c=>c.loading),this.done$=this.select(c=>c.done),this.item$=this.select(c=>c.item),this.patientTreatmentStatuses$=this.select(c=>c.patientTreatmentStatuses),this.paging$=this.select(c=>c.paging),this.searchQuery$=this.select(c=>c.searchQuery),this.formName$=this.select(c=>c.formName),this.actionResult$=this.select(this.item$,this.done$,(c,d)=>({item:c,done:d}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.patientTreatmentStatuses$,(c,d,n,a,m)=>({errors:c,loading:d,item:n,formName:a,patientTreatmentStatuses:m}),{debounce:!0}),this.input$=this.select(this.paging$,this.searchQuery$,(c,d)=>({limit:c.limit,skip:c.skip,name:d,total:c.total})),this.setFormName=this.updater((c,d)=>Object.assign(Object.assign({},c),{formName:d})),this.setItem=this.updater((c,d)=>Object.assign(Object.assign({},c),{item:d})),this.addNewPatientTreatmentStatus=this.updater((c,d)=>Object.assign(Object.assign({},c),{patientTreatmentStatuses:[...c.patientTreatmentStatuses,d]})),this.updatePatientTreatmentStatus=this.updater((c,d)=>Object.assign(Object.assign({},c),{patientTreatmentStatuses:c.patientTreatmentStatuses.map(n=>n.id===d.id?d:n)})),this.addPatientTreatmentStatuses=this.updater((c,d)=>Object.assign(Object.assign({},c),{patientTreatmentStatuses:c.patientTreatmentStatuses.concat(d)})),this.updatePatientTreatmentStatuses=this.updater((c,d)=>Object.assign(Object.assign({},c),{patientTreatmentStatuses:c.patientTreatmentStatuses.map(n=>d.find(m=>m.id===n.id)||n)})),this.setSearchQuery=this.updater((c,d)=>Object.assign(Object.assign({},c),{searchQuery:d})),this.loadPatientTreatmentStatusEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.data.userPatientTreatmentStatus({patientTreatmentStatusId:d}).pipe((0,g._b)(n=>{this.patchState({item:n.data.item,errors:n.errors,loading:!1})},n=>this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})))))),this.loadPatientTreatmentStatusesEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.input$),(0,h.w)(([d,n])=>this.data.userPatientTreatmentStatuses({input:n}).pipe((0,g._b)(a=>this.patchState({paging:{limit:n.limit,skip:n.skip,total:a.data.count.total},patientTreatmentStatuses:a.data.items,errors:a.errors,loading:!1}),a=>this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})))))),this.createPatientTreatmentStatusEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.patientTreatmentStatusService.createPatientTreatmentStatus(Object.assign({},d)).pipe((0,g._b)(n=>{this.addNewPatientTreatmentStatus(n),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:n,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},n=>{n.graphQLErrors?(this.toast.error(n.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})):(this.toast.error(n.Message),this.formService.setErrors(n.Data))}))))),this.updatePatientTreatmentStatusEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([d,n])=>this.patientTreatmentStatusService.updatePatientTreatmentStatus(d,d.id).pipe((0,g._b)(a=>{this.updatePatientTreatmentStatus(a),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:a,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.deletePatientTreatmentStatusEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([d,n])=>this.data.userDeletePatientTreatmentStatus({patientTreatmentStatusId:n.id}).pipe((0,g._b)(a=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:a.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.importExcelEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.patientTreatmentStatusService.importPatientTreatmentStatuses(d).pipe((0,te.K)(n=>{var a;return this.toast.error(null!==(a=n.Message)&&void 0!==a?a:"Failed to save",{duration:3e3}),k.E}),(0,C.b)(n=>{const a=JSON.parse(n.created),m=JSON.parse(n.updated),p=JSON.parse(n.failed),_=a.length+m.length+p.length;this.addPatientTreatmentStatuses(a),this.updatePatientTreatmentStatuses(m),this.toast.success(`${a.length} created, ${m.length} updated, ${p.length} failed of total ${_}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("patientTreatmentStatusId")?(this.route.snapshot.paramMap.get("patientTreatmentStatusId"),this.setFormName("patientTreatmentStatus_edit")):this.setFormName("patientTreatmentStatus_create")}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.patientTreatmentStatusService.validatePatientTreatmentStatusExcelData(t)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(E.q),e.LFG(A.F0),e.LFG(A.gz),e.LFG(X.F),e.LFG(q.o),e.LFG(sQ))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function oQ(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close.emit())})("formIsReady",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.patientTreatmentStatus)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let bd=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"patientTreatmentStatus_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.patientTreatmentStatus=i.item})):t.formName&&t.formName.currentValue&&"patientTreatmentStatus_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadPatientTreatmentStatusEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.patientTreatmentStatus=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Ro),e.Y36(A.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-patient-treatment-status-form"]],inputs:{patientTreatmentStatus:"patientTreatmentStatus",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,oQ,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[w.O5,z.M,w.Ov],encapsulation:2}),s})(),Td=(()=>{class s{constructor(){this.autoHeight=!1,this.patientTreatmentStatuses=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[,{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var r;t.includes(null===(r=i.data)||void 0===r?void 0:r.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-patient-treatment-status-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(N.x,5),2&t){let r;e.iGM(r=e.CRH())&&(i.tableView=r.first)}},inputs:{autoHeight:"autoHeight",patientTreatmentStatuses:"patientTreatmentStatuses"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.patientTreatmentStatuses)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[N.x],encapsulation:2}),s})();function rQ(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-patient-treatment-status-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","patientTreatmentStatus_edit")("formControl",t.formControl)("patientTreatmentStatus",t.patientTreatmentStatus)}}const aQ=function(){return{}};function nQ(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-patient-treatment-status-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","patientTreatmentStatus_create")("formControl",t.formControl)("patientTreatmentStatus",e.DdM(3,aQ))}}function lQ(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-patient-treatment-status-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(u.ref.close())}),e.qZA()}2&s&&e.Q6J("patientTreatmentStatuses",o.data.items)}let cQ=(()=>{class s extends I.fS{constructor(t){super(),this.store=t,this.store.loadPatientTreatmentStatusesEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.patientTreatmentStatuses$.pipe((0,h.w)(i=>(0,T.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Ro))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","patientTreatmentStatus","send","close"],[1,"w-full","h-full","bg-white",3,"patientTreatmentStatuses","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,rQ,2,3,"ng-template",null,1,e.W1O),e.YNc(3,nQ,1,4,"ng-template",null,2,e.W1O),e.YNc(5,lQ,1,1,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",u)("editTemplate",r)("createTemplate",l)("key",i.field.key)}},dependencies:[x.JJ,x.oH,J.$,bd,Td],encapsulation:2}),s})();function dQ(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-patient-treatment-status-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","patientTreatmentStatus_edit")("patientTreatmentStatus",t.value)}}const uQ=function(){return{}};function mQ(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-patient-treatment-status-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","patientTreatmentStatus_create")("patientTreatmentStatus",e.DdM(2,uQ))}function pQ(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-patient-treatment-status-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(null==u.ref?null:u.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("patientTreatmentStatuses",t.items)}}let hQ=(()=>{class s extends Y{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","patientTreatmentStatus","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","patientTreatmentStatuses","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,dQ,1,2,"ng-template",null,1,e.W1O),e.YNc(3,mQ,1,3,"ng-template",null,2,e.W1O),e.YNc(5,pQ,1,2,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[ee,bd,Td],encapsulation:2}),s})(),fQ=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[Ro],imports:[w.ez,R.F,x.UX,V.o,H.u,Q.P,U.t,Z,j.h,K.G,I.X0.forChild({types:[{name:"patient-treatment-status-select",component:cQ,wrappers:["form-field"]},{name:"patient-treatment-status-grid",component:hQ}]})]}),s})(),_Q=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[fQ]}),s})();class Si extends y.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class gQ extends Si{constructor(o){super("ValidatePaymentApplicationMethodExcelDataAction"),this.valid=!1,this.excelData=o}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name)}),this.validationContext.addRule(new f.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof f.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(r=>r.name),newNames:[i.newName]}):i instanceof f.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,T.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class CQ extends f.wS{constructor(o,t,i,r,l){super(o,t,i,r,l,!0)}}class SQ extends f.ul{constructor(o,t,i,r=!1){super(o,t,r),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new f.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new CQ("name","The paymentapplicationmethod name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class vQ extends Si{constructor(o){super("CreatePaymentApplicationMethodAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new SQ("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreatePaymentApplicationMethod({input:this.input}).pipe((0,h.w)(o=>(0,ie.of)(o.data.created)))}}class bQ extends Si{constructor(o){super("UpdatePaymentApplicationMethodsAction"),this.paymentApplicationMethods=o}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.paymentApplicationMethods,!0))}performAction(){this.response=this.businessProvider.data.userUpdatePaymentApplicationMethods({input:{paymentApplicationMethods:this.paymentApplicationMethods}}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}class TQ extends Si{constructor(o,t){super("UpdatePaymentApplicationMethodAction"),this.paymentApplicationMethod=o,this.paymentApplicationMethodId=t}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.paymentApplicationMethod,!0)).addRule(new f.xF("Id","Id should be a CUID and not null",this.paymentApplicationMethodId,!0))}performAction(){this.response=this.businessProvider.data.userUpdatePaymentApplicationMethod({paymentApplicationMethodId:this.paymentApplicationMethodId,input:this.paymentApplicationMethod}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}let yd=(()=>{class s extends y.nH{constructor(t,i,r){super("NotificationService.PaymentApplicationMethodBusinessProviderService",t,r),this.data=i}createPaymentApplicationMethod(t){const i=new vQ(t);return i.Do(this),i.response}updatePaymentApplicationMethod(t,i){const r=new TQ(t,i);return r.Do(this),r.response}importPaymentApplicationMethods(t){const i=new bQ(t);return i.Do(this),i.response}validatePaymentApplicationMethodExcelData(t){const i=new gQ(t);return i.Do(this),i.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(O.ed),e.LFG(E.q),e.LFG(y.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),yQ=(()=>{class s extends y.nH{constructor(t,i,r){super("PaymentApplicationMethodService",r,t),this.businessProvider=i}createPaymentApplicationMethod(t){const i=Object.fromEntries(Object.entries(t).filter(([r,l])=>null!==l));return this.businessProvider.createPaymentApplicationMethod(i)}updatePaymentApplicationMethod(t,i){return this.businessProvider.updatePaymentApplicationMethod(t,i)}importPaymentApplicationMethods(t){return this.businessProvider.importPaymentApplicationMethods(t)}validatePaymentApplicationMethodExcelData(t){return this.businessProvider.validatePaymentApplicationMethodExcelData(t)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(yd,8),e.LFG(yd),e.LFG(O.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),Vo=(()=>{class s extends g.m1{constructor(t,i,r,l,u,P){super({loading:!1,paymentApplicationMethods:[],done:!1,searchQuery:"",formName:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=r,this.toast=l,this.formService=u,this.paymentApplicationMethodService=P,this.errors$=this.select(c=>c.errors),this.loading$=this.select(c=>c.loading),this.done$=this.select(c=>c.done),this.item$=this.select(c=>c.item),this.paymentApplicationMethods$=this.select(c=>c.paymentApplicationMethods),this.paging$=this.select(c=>c.paging),this.searchQuery$=this.select(c=>c.searchQuery),this.formName$=this.select(c=>c.formName),this.actionResult$=this.select(this.item$,this.done$,(c,d)=>({item:c,done:d}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.paymentApplicationMethods$,(c,d,n,a,m)=>({errors:c,loading:d,item:n,formName:a,paymentApplicationMethods:m}),{debounce:!0}),this.input$=this.select(this.paging$,this.searchQuery$,(c,d)=>({limit:c.limit,skip:c.skip,name:d,total:c.total})),this.setFormName=this.updater((c,d)=>Object.assign(Object.assign({},c),{formName:d})),this.setItem=this.updater((c,d)=>Object.assign(Object.assign({},c),{item:d})),this.addNewPaymentApplicationMethod=this.updater((c,d)=>Object.assign(Object.assign({},c),{paymentApplicationMethods:[...c.paymentApplicationMethods,d]})),this.updatePaymentApplicationMethod=this.updater((c,d)=>Object.assign(Object.assign({},c),{paymentApplicationMethods:c.paymentApplicationMethods.map(n=>n.id===d.id?d:n)})),this.addPaymentApplicationMethods=this.updater((c,d)=>Object.assign(Object.assign({},c),{paymentApplicationMethods:c.paymentApplicationMethods.concat(d)})),this.updatePaymentApplicationMethods=this.updater((c,d)=>Object.assign(Object.assign({},c),{paymentApplicationMethods:c.paymentApplicationMethods.map(n=>d.find(m=>m.id===n.id)||n)})),this.setSearchQuery=this.updater((c,d)=>Object.assign(Object.assign({},c),{searchQuery:d})),this.loadPaymentApplicationMethodEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.data.userPaymentApplicationMethod({paymentApplicationMethodId:d}).pipe((0,g._b)(n=>{this.patchState({item:n.data.item,errors:n.errors,loading:!1})},n=>this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})))))),this.loadPaymentApplicationMethodsEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.input$),(0,h.w)(([d,n])=>this.data.userPaymentApplicationMethods({input:n}).pipe((0,g._b)(a=>this.patchState({paging:{limit:n.limit,skip:n.skip,total:a.data.count.total},paymentApplicationMethods:a.data.items,errors:a.errors,loading:!1}),a=>this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})))))),this.createPaymentApplicationMethodEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.paymentApplicationMethodService.createPaymentApplicationMethod(Object.assign({},d)).pipe((0,g._b)(n=>{this.addNewPaymentApplicationMethod(n),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:n,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},n=>{n.graphQLErrors?(this.toast.error(n.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})):(this.toast.error(n.Message),this.formService.setErrors(n.Data))}))))),this.updatePaymentApplicationMethodEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([d,n])=>this.paymentApplicationMethodService.updatePaymentApplicationMethod(d,d.id).pipe((0,g._b)(a=>{this.updatePaymentApplicationMethod(a),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:a,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.deletePaymentApplicationMethodEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([d,n])=>this.data.userDeletePaymentApplicationMethod({paymentApplicationMethodId:n.id}).pipe((0,g._b)(a=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:a.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.importExcelEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.paymentApplicationMethodService.importPaymentApplicationMethods(d).pipe((0,te.K)(n=>{var a;return this.toast.error(null!==(a=n.Message)&&void 0!==a?a:"Failed to save",{duration:3e3}),k.E}),(0,C.b)(n=>{const a=JSON.parse(n.created),m=JSON.parse(n.updated),p=JSON.parse(n.failed),_=a.length+m.length+p.length;this.addPaymentApplicationMethods(a),this.updatePaymentApplicationMethods(m),this.toast.success(`${a.length} created, ${m.length} updated, ${p.length} failed of total ${_}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("paymentApplicationMethodId")?(this.route.snapshot.paramMap.get("paymentApplicationMethodId"),this.setFormName("paymentApplicationMethod_edit")):this.setFormName("paymentApplicationMethod_create")}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.paymentApplicationMethodService.validatePaymentApplicationMethodExcelData(t)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(E.q),e.LFG(A.F0),e.LFG(A.gz),e.LFG(X.F),e.LFG(q.o),e.LFG(yQ))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function wQ(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close.emit())})("formIsReady",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.paymentApplicationMethod)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let wd=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"paymentApplicationMethod_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.paymentApplicationMethod=i.item})):t.formName&&t.formName.currentValue&&"paymentApplicationMethod_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadPaymentApplicationMethodEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.paymentApplicationMethod=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Vo),e.Y36(A.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-payment-application-method-form"]],inputs:{paymentApplicationMethod:"paymentApplicationMethod",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,wQ,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[w.O5,z.M,w.Ov],encapsulation:2}),s})(),xd=(()=>{class s{constructor(){this.autoHeight=!1,this.paymentApplicationMethods=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[,{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var r;t.includes(null===(r=i.data)||void 0===r?void 0:r.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-payment-application-method-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(N.x,5),2&t){let r;e.iGM(r=e.CRH())&&(i.tableView=r.first)}},inputs:{autoHeight:"autoHeight",paymentApplicationMethods:"paymentApplicationMethods"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.paymentApplicationMethods)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[N.x],encapsulation:2}),s})();function xQ(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-payment-application-method-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","paymentApplicationMethod_edit")("formControl",t.formControl)("paymentApplicationMethod",t.paymentApplicationMethod)}}const NQ=function(){return{}};function AQ(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-payment-application-method-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","paymentApplicationMethod_create")("formControl",t.formControl)("paymentApplicationMethod",e.DdM(3,NQ))}}function FQ(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-payment-application-method-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(u.ref.close())}),e.qZA()}2&s&&e.Q6J("paymentApplicationMethods",o.data.items)}let DQ=(()=>{class s extends I.fS{constructor(t){super(),this.store=t,this.store.loadPaymentApplicationMethodsEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.paymentApplicationMethods$.pipe((0,h.w)(i=>(0,T.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Vo))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","paymentApplicationMethod","send","close"],[1,"w-full","h-full","bg-white",3,"paymentApplicationMethods","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,xQ,2,3,"ng-template",null,1,e.W1O),e.YNc(3,AQ,1,4,"ng-template",null,2,e.W1O),e.YNc(5,FQ,1,1,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",u)("editTemplate",r)("createTemplate",l)("key",i.field.key)}},dependencies:[x.JJ,x.oH,J.$,wd,xd],encapsulation:2}),s})();function IQ(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-payment-application-method-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","paymentApplicationMethod_edit")("paymentApplicationMethod",t.value)}}const PQ=function(){return{}};function WQ(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-payment-application-method-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","paymentApplicationMethod_create")("paymentApplicationMethod",e.DdM(2,PQ))}function MQ(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-payment-application-method-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(null==u.ref?null:u.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("paymentApplicationMethods",t.items)}}let EQ=(()=>{class s extends Y{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","paymentApplicationMethod","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","paymentApplicationMethods","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,IQ,1,2,"ng-template",null,1,e.W1O),e.YNc(3,WQ,1,3,"ng-template",null,2,e.W1O),e.YNc(5,MQ,1,2,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[ee,wd,xd],encapsulation:2}),s})(),OQ=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[Vo],imports:[w.ez,R.F,x.UX,V.o,H.u,Q.P,U.t,Z,j.h,K.G,I.X0.forChild({types:[{name:"payment-application-method-select",component:DQ,wrappers:["form-field"]},{name:"payment-application-method-grid",component:EQ}]})]}),s})(),LQ=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[OQ]}),s})();class vi extends y.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class GQ extends vi{constructor(o,t,i,r,l,u){super("ValidatePaymentExcelDataAction"),this.valid=!1,this.excelData=o,this.batchControls=t,this.banks=i,this.payorTypes=r,this.paymentTypes=l,this.paymentApplicationMethods=u}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name),this.validationContext.addRule(new f.mi(`batchControlName_${i}_is_valid}`,"Batch Control Is Not Valid","batchControl.name",t.batchControl,this.batchControls,!0)),this.validationContext.addRule(new f.mi(`bankName_${i}_is_valid}`,"Bank Is Not Valid","bank.name",t.bank,this.banks,!0)),this.validationContext.addRule(new f.mi(`payorTypeName_${i}_is_valid}`,"Payor Type Is Not Valid","payorType.name",t.payorType,this.payorTypes,!0)),this.validationContext.addRule(new f.mi(`paymentTypeName_${i}_is_valid}`,"Payment Type Is Not Valid","paymentType.name",t.paymentType,this.paymentTypes,!0)),this.validationContext.addRule(new f.mi(`paymentApplicationMethodName_${i}_is_valid}`,"Payment Application Method Is Not Valid","paymentApplicationMethod.name",t.paymentApplicationMethod,this.paymentApplicationMethods,!0))}),this.validationContext.addRule(new f.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof f.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(r=>r.name),newNames:[i.newName]}):i instanceof f.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,T.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class $Q extends f.wS{constructor(o,t,i,r,l){super(o,t,i,r,l,!0)}}class RQ extends f.ul{constructor(o,t,i,r=!1){super(o,t,r),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new f.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new $Q("name","The payment name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class VQ extends vi{constructor(o){super("CreatePaymentAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new RQ("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreatePayment({input:this.input}).pipe((0,h.w)(o=>(0,ie.of)(o.data.created)))}}class QQ extends vi{constructor(o){super("UpdatePaymentsAction"),this.payments=o}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.payments,!0))}performAction(){this.response=this.businessProvider.data.userUpdatePayments({input:{payments:this.payments}}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}class UQ extends vi{constructor(o,t){super("UpdatePaymentAction"),this.payment=o,this.paymentId=t}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.payment,!0)).addRule(new f.xF("Id","Id should be a CUID and not null",this.paymentId,!0))}performAction(){this.response=this.businessProvider.data.userUpdatePayment({paymentId:this.paymentId,input:this.payment}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}let Nd=(()=>{class s extends y.nH{constructor(t,i,r){super("NotificationService.PaymentBusinessProviderService",t,r),this.data=i}createPayment(t){const i=new VQ(t);return i.Do(this),i.response}updatePayment(t,i){const r=new UQ(t,i);return r.Do(this),r.response}importPayments(t){const i=new QQ(t);return i.Do(this),i.response}validatePaymentExcelData(t,i,r,l,u,P){const b=new GQ(t,i,r,l,u,P);return b.Do(this),b.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(O.ed),e.LFG(E.q),e.LFG(y.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),JQ=(()=>{class s extends y.nH{constructor(t,i,r){super("PaymentService",r,t),this.businessProvider=i}createPayment(t){const i=Object.fromEntries(Object.entries(t).filter(([r,l])=>null!==l));return this.businessProvider.createPayment(i)}updatePayment(t,i){return this.businessProvider.updatePayment(t,i)}importPayments(t){return this.businessProvider.importPayments(t)}validatePaymentExcelData(t,i,r,l,u,P){return this.businessProvider.validatePaymentExcelData(t,i,r,l,u,P)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(Nd,8),e.LFG(Nd),e.LFG(O.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),Qo=(()=>{class s extends g.m1{constructor(t,i,r,l,u,P){if(super({loading:!1,payments:[],done:!1,searchQuery:"",formName:void 0,batchControlId:void 0,bankId:void 0,payorTypeId:void 0,paymentTypeId:void 0,paymentApplicationMethodId:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=r,this.toast=l,this.formService=u,this.paymentService=P,this.errors$=this.select(p=>p.errors),this.loading$=this.select(p=>p.loading),this.done$=this.select(p=>p.done),this.item$=this.select(p=>p.item),this.payments$=this.select(p=>p.payments),this.batchControls$=this.select(p=>p.batchControls||[]),this.banks$=this.select(p=>p.banks||[]),this.payorTypes$=this.select(p=>p.payorTypes||[]),this.paymentTypes$=this.select(p=>p.paymentTypes||[]),this.paymentApplicationMethods$=this.select(p=>p.paymentApplicationMethods||[]),this.batchControlId$=this.select(p=>p.batchControlId),this.bankId$=this.select(p=>p.bankId),this.payorTypeId$=this.select(p=>p.payorTypeId),this.paymentTypeId$=this.select(p=>p.paymentTypeId),this.paymentApplicationMethodId$=this.select(p=>p.paymentApplicationMethodId),this.paging$=this.select(p=>p.paging),this.searchQuery$=this.select(p=>p.searchQuery),this.formName$=this.select(p=>p.formName),this.actionResult$=this.select(this.item$,this.done$,(p,_)=>({item:p,done:_}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.payments$,this.batchControls$,this.banks$,this.payorTypes$,this.paymentTypes$,this.paymentApplicationMethods$,(p,_,v,D,se,me,G,$,M,L)=>({errors:p,loading:_,item:v,formName:D,payments:se,batchControls:me,banks:G,payorTypes:$,paymentTypes:M,paymentApplicationMethods:L}),{debounce:!0}),this.input$=this.select(this.paging$,this.batchControlId$,this.bankId$,this.payorTypeId$,this.paymentTypeId$,this.paymentApplicationMethodId$,this.searchQuery$,(p,_,v,D,se,me,G)=>({limit:p.limit,skip:p.skip,name:G,batchControlId:_,bankId:v,payorTypeId:D,paymentTypeId:se,paymentApplicationMethodId:me,total:p.total})),this.setFormName=this.updater((p,_)=>Object.assign(Object.assign({},p),{formName:_})),this.setBatchControlId=this.updater((p,_)=>Object.assign(Object.assign({},p),{batchControlId:_})),this.setBankId=this.updater((p,_)=>Object.assign(Object.assign({},p),{bankId:_})),this.setPayorTypeId=this.updater((p,_)=>Object.assign(Object.assign({},p),{payorTypeId:_})),this.setPaymentTypeId=this.updater((p,_)=>Object.assign(Object.assign({},p),{paymentTypeId:_})),this.setPaymentApplicationMethodId=this.updater((p,_)=>Object.assign(Object.assign({},p),{paymentApplicationMethodId:_})),this.filterBatchControls=p=>this.data.userSelectBatchControls({input:{name:p}}).pipe((0,g._b)(_=>{let v=_.data.items;return this.patchState({batchControls:v}),v},_=>this.patchState({errors:_.graphQLErrors?_.graphQLErrors:_})),(0,B.U)(_=>_.data.items)),this.filterBanks=p=>this.data.userSelectBanks({input:{name:p}}).pipe((0,g._b)(_=>{let v=_.data.items;return this.patchState({banks:v}),v},_=>this.patchState({errors:_.graphQLErrors?_.graphQLErrors:_})),(0,B.U)(_=>_.data.items)),this.filterPayorTypes=p=>this.data.userSelectPayorTypes({input:{name:p}}).pipe((0,g._b)(_=>{let v=_.data.items;return this.patchState({payorTypes:v}),v},_=>this.patchState({errors:_.graphQLErrors?_.graphQLErrors:_})),(0,B.U)(_=>_.data.items)),this.filterPaymentTypes=p=>this.data.userSelectPaymentTypes({input:{name:p}}).pipe((0,g._b)(_=>{let v=_.data.items;return this.patchState({paymentTypes:v}),v},_=>this.patchState({errors:_.graphQLErrors?_.graphQLErrors:_})),(0,B.U)(_=>_.data.items)),this.filterPaymentApplicationMethods=p=>this.data.userSelectPaymentApplicationMethods({input:{name:p}}).pipe((0,g._b)(_=>{let v=_.data.items;return this.patchState({paymentApplicationMethods:v}),v},_=>this.patchState({errors:_.graphQLErrors?_.graphQLErrors:_})),(0,B.U)(_=>_.data.items)),this.addBatchControl=this.updater((p,_)=>Object.assign(Object.assign({},p),{batchControls:p.batchControls.concat(_)})),this.addBank=this.updater((p,_)=>Object.assign(Object.assign({},p),{banks:p.banks.concat(_)})),this.addPayorType=this.updater((p,_)=>Object.assign(Object.assign({},p),{payorTypes:p.payorTypes.concat(_)})),this.addPaymentType=this.updater((p,_)=>Object.assign(Object.assign({},p),{paymentTypes:p.paymentTypes.concat(_)})),this.addPaymentApplicationMethod=this.updater((p,_)=>Object.assign(Object.assign({},p),{paymentApplicationMethods:p.paymentApplicationMethods.concat(_)})),this.setItem=this.updater((p,_)=>Object.assign(Object.assign({},p),{item:_})),this.addNewPayment=this.updater((p,_)=>Object.assign(Object.assign({},p),{payments:[...p.payments,_]})),this.updatePayment=this.updater((p,_)=>Object.assign(Object.assign({},p),{payments:p.payments.map(v=>v.id===_.id?_:v)})),this.addPayments=this.updater((p,_)=>Object.assign(Object.assign({},p),{payments:p.payments.concat(_)})),this.updatePayments=this.updater((p,_)=>Object.assign(Object.assign({},p),{payments:p.payments.map(v=>_.find(se=>se.id===v.id)||v)})),this.setSearchQuery=this.updater((p,_)=>Object.assign(Object.assign({},p),{searchQuery:_})),this.loadPaymentEffect=this.effect(p=>p.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(_=>this.data.userPayment({paymentId:_}).pipe((0,g._b)(v=>{this.patchState({item:v.data.item,errors:v.errors,loading:!1})},v=>this.patchState({loading:!1,errors:v.graphQLErrors?v.graphQLErrors:v})))))),this.loadPaymentsEffect=this.effect(p=>p.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.input$),(0,h.w)(([_,v])=>this.data.userPayments({input:v}).pipe((0,g._b)(D=>this.patchState({paging:{limit:v.limit,skip:v.skip,total:D.data.count.total},payments:D.data.items,errors:D.errors,loading:!1}),D=>this.patchState({loading:!1,errors:D.graphQLErrors?D.graphQLErrors:D})))))),this.createPaymentEffect=this.effect(p=>p.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(_=>this.paymentService.createPayment(Object.assign({},_)).pipe((0,g._b)(v=>{this.addNewPayment(v),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:v,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},v=>{v.graphQLErrors?(this.toast.error(v.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:v.graphQLErrors?v.graphQLErrors:v})):(this.toast.error(v.Message),this.formService.setErrors(v.Data))}))))),this.updatePaymentEffect=this.effect(p=>p.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([_,v])=>this.paymentService.updatePayment(_,_.id).pipe((0,g._b)(D=>{this.updatePayment(D),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:D,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},D=>{D.graphQLErrors?(this.toast.error(D.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:D.graphQLErrors?D.graphQLErrors:D})):(this.toast.error(D.Message),this.formService.setErrors(D.Data))}))))),this.deletePaymentEffect=this.effect(p=>p.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([_,v])=>this.data.userDeletePayment({paymentId:v.id}).pipe((0,g._b)(D=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:D.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},D=>{D.graphQLErrors?(this.toast.error(D.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:D.graphQLErrors?D.graphQLErrors:D})):(this.toast.error(D.Message),this.formService.setErrors(D.Data))}))))),this.importExcelEffect=this.effect(p=>p.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(_=>this.paymentService.importPayments(_).pipe((0,te.K)(v=>{var D;return this.toast.error(null!==(D=v.Message)&&void 0!==D?D:"Failed to save",{duration:3e3}),k.E}),(0,C.b)(v=>{const D=JSON.parse(v.created),se=JSON.parse(v.updated),me=JSON.parse(v.failed),G=D.length+se.length+me.length;this.addPayments(D),this.updatePayments(se),this.toast.success(`${D.length} created, ${se.length} updated, ${me.length} failed of total ${G}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("paymentId")?(this.route.snapshot.paramMap.get("paymentId"),this.setFormName("payment_edit")):this.setFormName("payment_create"),this.route.snapshot.paramMap.has("batchControlId")){var c=this.route.snapshot.paramMap.get("batchControlId");this.setBatchControlId(c)}if(this.route.snapshot.paramMap.has("bankId")){var d=this.route.snapshot.paramMap.get("bankId");this.setBankId(d)}if(this.route.snapshot.paramMap.has("payorTypeId")){var n=this.route.snapshot.paramMap.get("payorTypeId");this.setPayorTypeId(n)}if(this.route.snapshot.paramMap.has("paymentTypeId")){var a=this.route.snapshot.paramMap.get("paymentTypeId");this.setPaymentTypeId(a)}if(this.route.snapshot.paramMap.has("paymentApplicationMethodId")){var m=this.route.snapshot.paramMap.get("paymentApplicationMethodId");this.setPaymentApplicationMethodId(m)}}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.paymentService.validatePaymentExcelData(t,i.batchControls,i.banks,i.payorTypes,i.paymentTypes,i.paymentApplicationMethods)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(E.q),e.LFG(A.F0),e.LFG(A.gz),e.LFG(X.F),e.LFG(q.o),e.LFG(JQ))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function jQ(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close.emit())})("formIsReady",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.payment)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let Ad=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"payment_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.payment=i.item})):t.formName&&t.formName.currentValue&&"payment_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadPaymentEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.payment=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Qo),e.Y36(A.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-payment-form"]],inputs:{payment:"payment",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,jQ,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[w.O5,z.M,w.Ov],encapsulation:2}),s})(),Fd=(()=>{class s{constructor(){this.autoHeight=!1,this.payments=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[{field:"batchControl.name",headerName:"Batch Control",filter:"agTextColumnFilter"},{field:"bank.name",headerName:"Bank",filter:"agTextColumnFilter"},{field:"payorType.name",headerName:"Payor Type",filter:"agTextColumnFilter"},{field:"paymentType.name",headerName:"Payment Type",filter:"agTextColumnFilter"},{field:"paymentApplicationMethod.name",headerName:"Payment Application Method",filter:"agTextColumnFilter"},{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"paidOn",filter:"agDateColumnFilter"},{field:"name",filter:"agTextColumnFilter"},{field:"batchControlId",filter:"agTextColumnFilter",hide:!0},{field:"bankId",filter:"agTextColumnFilter",hide:!0},{field:"payorTypeId",filter:"agTextColumnFilter",hide:!0},{field:"paymentTypeId",filter:"agTextColumnFilter",hide:!0},{headerName:"Amount",field:"amount",valueFormatter:t=>{var i;return(0,S.oBD)(null===(i=t.data)||void 0===i?void 0:i.amount,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{headerName:"Collected",field:"collected",valueFormatter:t=>{var i;return(0,S.oBD)(null===(i=t.data)||void 0===i?void 0:i.collected,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{headerName:"Dac",field:"dac",valueFormatter:t=>{var i;return(0,S.oBD)(null===(i=t.data)||void 0===i?void 0:i.dac,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{headerName:"Is Partial",field:"isPartial",filter:"agSetColumnFilter",cellRenderer:"checkboxRenderer"},{field:"dateReceived",filter:"agDateColumnFilter"},{field:"memo",filter:"agTextColumnFilter"},{field:"createdBy",filter:"agTextColumnFilter"},{field:"dateCreated",filter:"agDateColumnFilter"},{field:"securitizationGroup",filter:"agTextColumnFilter"},{field:"paymentApplicationMethodId",filter:"agTextColumnFilter",hide:!0}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var r;t.includes(null===(r=i.data)||void 0===r?void 0:r.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-payment-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(N.x,5),2&t){let r;e.iGM(r=e.CRH())&&(i.tableView=r.first)}},inputs:{autoHeight:"autoHeight",payments:"payments"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.payments)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[N.x],encapsulation:2}),s})();function zQ(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-payment-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","payment_edit")("formControl",t.formControl)("payment",t.payment)}}const qQ=function(){return{}};function HQ(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-payment-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","payment_create")("formControl",t.formControl)("payment",e.DdM(3,qQ))}}function KQ(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-payment-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(u.ref.close())}),e.qZA()}2&s&&e.Q6J("payments",o.data.items)}let kQ=(()=>{class s extends I.fS{constructor(t){super(),this.store=t,this.store.loadPaymentsEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.payments$.pipe((0,h.w)(i=>(0,T.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Qo))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","payment","send","close"],[1,"w-full","h-full","bg-white",3,"payments","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,zQ,2,3,"ng-template",null,1,e.W1O),e.YNc(3,HQ,1,4,"ng-template",null,2,e.W1O),e.YNc(5,KQ,1,1,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",u)("editTemplate",r)("createTemplate",l)("key",i.field.key)}},dependencies:[x.JJ,x.oH,J.$,Ad,Fd],encapsulation:2}),s})();function ZQ(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-payment-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","payment_edit")("payment",t.value)}}const BQ=function(){return{}};function YQ(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-payment-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","payment_create")("payment",e.DdM(2,BQ))}function XQ(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-payment-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(null==u.ref?null:u.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("payments",t.items)}}let eU=(()=>{class s extends Y{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","payment","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","payments","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,ZQ,1,2,"ng-template",null,1,e.W1O),e.YNc(3,YQ,1,3,"ng-template",null,2,e.W1O),e.YNc(5,XQ,1,2,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[ee,Ad,Fd],encapsulation:2}),s})(),tU=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[Qo],imports:[w.ez,R.F,x.UX,V.o,H.u,Q.P,U.t,Z,j.h,K.G,I.X0.forChild({types:[{name:"payment-select",component:kQ,wrappers:["form-field"]},{name:"payment-grid",component:eU}]})]}),s})(),iU=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[tU]}),s})();class bi extends y.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class sU extends bi{constructor(o){super("ValidatePaymentTypeExcelDataAction"),this.valid=!1,this.excelData=o}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name)}),this.validationContext.addRule(new f.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof f.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(r=>r.name),newNames:[i.newName]}):i instanceof f.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,T.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class oU extends f.wS{constructor(o,t,i,r,l){super(o,t,i,r,l,!0)}}class rU extends f.ul{constructor(o,t,i,r=!1){super(o,t,r),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new f.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new oU("name","The paymenttype name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class aU extends bi{constructor(o){super("CreatePaymentTypeAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new rU("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreatePaymentType({input:this.input}).pipe((0,h.w)(o=>(0,ie.of)(o.data.created)))}}class nU extends bi{constructor(o){super("UpdatePaymentTypesAction"),this.paymentTypes=o}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.paymentTypes,!0))}performAction(){this.response=this.businessProvider.data.userUpdatePaymentTypes({input:{paymentTypes:this.paymentTypes}}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}class lU extends bi{constructor(o,t){super("UpdatePaymentTypeAction"),this.paymentType=o,this.paymentTypeId=t}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.paymentType,!0)).addRule(new f.xF("Id","Id should be a CUID and not null",this.paymentTypeId,!0))}performAction(){this.response=this.businessProvider.data.userUpdatePaymentType({paymentTypeId:this.paymentTypeId,input:this.paymentType}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}let Dd=(()=>{class s extends y.nH{constructor(t,i,r){super("NotificationService.PaymentTypeBusinessProviderService",t,r),this.data=i}createPaymentType(t){const i=new aU(t);return i.Do(this),i.response}updatePaymentType(t,i){const r=new lU(t,i);return r.Do(this),r.response}importPaymentTypes(t){const i=new nU(t);return i.Do(this),i.response}validatePaymentTypeExcelData(t){const i=new sU(t);return i.Do(this),i.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(O.ed),e.LFG(E.q),e.LFG(y.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),cU=(()=>{class s extends y.nH{constructor(t,i,r){super("PaymentTypeService",r,t),this.businessProvider=i}createPaymentType(t){const i=Object.fromEntries(Object.entries(t).filter(([r,l])=>null!==l));return this.businessProvider.createPaymentType(i)}updatePaymentType(t,i){return this.businessProvider.updatePaymentType(t,i)}importPaymentTypes(t){return this.businessProvider.importPaymentTypes(t)}validatePaymentTypeExcelData(t){return this.businessProvider.validatePaymentTypeExcelData(t)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(Dd,8),e.LFG(Dd),e.LFG(O.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),Uo=(()=>{class s extends g.m1{constructor(t,i,r,l,u,P){super({loading:!1,paymentTypes:[],done:!1,searchQuery:"",formName:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=r,this.toast=l,this.formService=u,this.paymentTypeService=P,this.errors$=this.select(c=>c.errors),this.loading$=this.select(c=>c.loading),this.done$=this.select(c=>c.done),this.item$=this.select(c=>c.item),this.paymentTypes$=this.select(c=>c.paymentTypes),this.paging$=this.select(c=>c.paging),this.searchQuery$=this.select(c=>c.searchQuery),this.formName$=this.select(c=>c.formName),this.actionResult$=this.select(this.item$,this.done$,(c,d)=>({item:c,done:d}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.paymentTypes$,(c,d,n,a,m)=>({errors:c,loading:d,item:n,formName:a,paymentTypes:m}),{debounce:!0}),this.input$=this.select(this.paging$,this.searchQuery$,(c,d)=>({limit:c.limit,skip:c.skip,name:d,total:c.total})),this.setFormName=this.updater((c,d)=>Object.assign(Object.assign({},c),{formName:d})),this.setItem=this.updater((c,d)=>Object.assign(Object.assign({},c),{item:d})),this.addNewPaymentType=this.updater((c,d)=>Object.assign(Object.assign({},c),{paymentTypes:[...c.paymentTypes,d]})),this.updatePaymentType=this.updater((c,d)=>Object.assign(Object.assign({},c),{paymentTypes:c.paymentTypes.map(n=>n.id===d.id?d:n)})),this.addPaymentTypes=this.updater((c,d)=>Object.assign(Object.assign({},c),{paymentTypes:c.paymentTypes.concat(d)})),this.updatePaymentTypes=this.updater((c,d)=>Object.assign(Object.assign({},c),{paymentTypes:c.paymentTypes.map(n=>d.find(m=>m.id===n.id)||n)})),this.setSearchQuery=this.updater((c,d)=>Object.assign(Object.assign({},c),{searchQuery:d})),this.loadPaymentTypeEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.data.userPaymentType({paymentTypeId:d}).pipe((0,g._b)(n=>{this.patchState({item:n.data.item,errors:n.errors,loading:!1})},n=>this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})))))),this.loadPaymentTypesEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.input$),(0,h.w)(([d,n])=>this.data.userPaymentTypes({input:n}).pipe((0,g._b)(a=>this.patchState({paging:{limit:n.limit,skip:n.skip,total:a.data.count.total},paymentTypes:a.data.items,errors:a.errors,loading:!1}),a=>this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})))))),this.createPaymentTypeEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.paymentTypeService.createPaymentType(Object.assign({},d)).pipe((0,g._b)(n=>{this.addNewPaymentType(n),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:n,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},n=>{n.graphQLErrors?(this.toast.error(n.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})):(this.toast.error(n.Message),this.formService.setErrors(n.Data))}))))),this.updatePaymentTypeEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([d,n])=>this.paymentTypeService.updatePaymentType(d,d.id).pipe((0,g._b)(a=>{this.updatePaymentType(a),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:a,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.deletePaymentTypeEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([d,n])=>this.data.userDeletePaymentType({paymentTypeId:n.id}).pipe((0,g._b)(a=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:a.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.importExcelEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.paymentTypeService.importPaymentTypes(d).pipe((0,te.K)(n=>{var a;return this.toast.error(null!==(a=n.Message)&&void 0!==a?a:"Failed to save",{duration:3e3}),k.E}),(0,C.b)(n=>{const a=JSON.parse(n.created),m=JSON.parse(n.updated),p=JSON.parse(n.failed),_=a.length+m.length+p.length;this.addPaymentTypes(a),this.updatePaymentTypes(m),this.toast.success(`${a.length} created, ${m.length} updated, ${p.length} failed of total ${_}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("paymentTypeId")?(this.route.snapshot.paramMap.get("paymentTypeId"),this.setFormName("paymentType_edit")):this.setFormName("paymentType_create")}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.paymentTypeService.validatePaymentTypeExcelData(t)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(E.q),e.LFG(A.F0),e.LFG(A.gz),e.LFG(X.F),e.LFG(q.o),e.LFG(cU))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function dU(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close.emit())})("formIsReady",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.paymentType)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let Id=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"paymentType_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.paymentType=i.item})):t.formName&&t.formName.currentValue&&"paymentType_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadPaymentTypeEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.paymentType=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Uo),e.Y36(A.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-payment-type-form"]],inputs:{paymentType:"paymentType",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,dU,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[w.O5,z.M,w.Ov],encapsulation:2}),s})(),Pd=(()=>{class s{constructor(){this.autoHeight=!1,this.paymentTypes=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[,{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var r;t.includes(null===(r=i.data)||void 0===r?void 0:r.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-payment-type-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(N.x,5),2&t){let r;e.iGM(r=e.CRH())&&(i.tableView=r.first)}},inputs:{autoHeight:"autoHeight",paymentTypes:"paymentTypes"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.paymentTypes)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[N.x],encapsulation:2}),s})();function uU(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-payment-type-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","paymentType_edit")("formControl",t.formControl)("paymentType",t.paymentType)}}const mU=function(){return{}};function pU(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-payment-type-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","paymentType_create")("formControl",t.formControl)("paymentType",e.DdM(3,mU))}}function hU(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-payment-type-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(u.ref.close())}),e.qZA()}2&s&&e.Q6J("paymentTypes",o.data.items)}let fU=(()=>{class s extends I.fS{constructor(t){super(),this.store=t,this.store.loadPaymentTypesEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.paymentTypes$.pipe((0,h.w)(i=>(0,T.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Uo))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","paymentType","send","close"],[1,"w-full","h-full","bg-white",3,"paymentTypes","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,uU,2,3,"ng-template",null,1,e.W1O),e.YNc(3,pU,1,4,"ng-template",null,2,e.W1O),e.YNc(5,hU,1,1,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",u)("editTemplate",r)("createTemplate",l)("key",i.field.key)}},dependencies:[x.JJ,x.oH,J.$,Id,Pd],encapsulation:2}),s})();function _U(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-payment-type-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","paymentType_edit")("paymentType",t.value)}}const gU=function(){return{}};function CU(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-payment-type-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","paymentType_create")("paymentType",e.DdM(2,gU))}function SU(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-payment-type-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(null==u.ref?null:u.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("paymentTypes",t.items)}}let vU=(()=>{class s extends Y{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","paymentType","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","paymentTypes","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,_U,1,2,"ng-template",null,1,e.W1O),e.YNc(3,CU,1,3,"ng-template",null,2,e.W1O),e.YNc(5,SU,1,2,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[ee,Id,Pd],encapsulation:2}),s})(),bU=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[Uo],imports:[w.ez,R.F,x.UX,V.o,H.u,Q.P,U.t,Z,j.h,K.G,I.X0.forChild({types:[{name:"payment-type-select",component:fU,wrappers:["form-field"]},{name:"payment-type-grid",component:vU}]})]}),s})(),TU=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[bU]}),s})();class Ti extends y.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class yU extends Ti{constructor(o){super("ValidatePayorTypeExcelDataAction"),this.valid=!1,this.excelData=o}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name)}),this.validationContext.addRule(new f.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof f.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(r=>r.name),newNames:[i.newName]}):i instanceof f.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,T.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class wU extends f.wS{constructor(o,t,i,r,l){super(o,t,i,r,l,!0)}}class xU extends f.ul{constructor(o,t,i,r=!1){super(o,t,r),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new f.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new wU("name","The payortype name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class NU extends Ti{constructor(o){super("CreatePayorTypeAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new xU("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreatePayorType({input:this.input}).pipe((0,h.w)(o=>(0,ie.of)(o.data.created)))}}class AU extends Ti{constructor(o){super("UpdatePayorTypesAction"),this.payorTypes=o}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.payorTypes,!0))}performAction(){this.response=this.businessProvider.data.userUpdatePayorTypes({input:{payorTypes:this.payorTypes}}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}class FU extends Ti{constructor(o,t){super("UpdatePayorTypeAction"),this.payorType=o,this.payorTypeId=t}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.payorType,!0)).addRule(new f.xF("Id","Id should be a CUID and not null",this.payorTypeId,!0))}performAction(){this.response=this.businessProvider.data.userUpdatePayorType({payorTypeId:this.payorTypeId,input:this.payorType}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}let Wd=(()=>{class s extends y.nH{constructor(t,i,r){super("NotificationService.PayorTypeBusinessProviderService",t,r),this.data=i}createPayorType(t){const i=new NU(t);return i.Do(this),i.response}updatePayorType(t,i){const r=new FU(t,i);return r.Do(this),r.response}importPayorTypes(t){const i=new AU(t);return i.Do(this),i.response}validatePayorTypeExcelData(t){const i=new yU(t);return i.Do(this),i.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(O.ed),e.LFG(E.q),e.LFG(y.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),DU=(()=>{class s extends y.nH{constructor(t,i,r){super("PayorTypeService",r,t),this.businessProvider=i}createPayorType(t){const i=Object.fromEntries(Object.entries(t).filter(([r,l])=>null!==l));return this.businessProvider.createPayorType(i)}updatePayorType(t,i){return this.businessProvider.updatePayorType(t,i)}importPayorTypes(t){return this.businessProvider.importPayorTypes(t)}validatePayorTypeExcelData(t){return this.businessProvider.validatePayorTypeExcelData(t)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(Wd,8),e.LFG(Wd),e.LFG(O.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),Jo=(()=>{class s extends g.m1{constructor(t,i,r,l,u,P){super({loading:!1,payorTypes:[],done:!1,searchQuery:"",formName:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=r,this.toast=l,this.formService=u,this.payorTypeService=P,this.errors$=this.select(c=>c.errors),this.loading$=this.select(c=>c.loading),this.done$=this.select(c=>c.done),this.item$=this.select(c=>c.item),this.payorTypes$=this.select(c=>c.payorTypes),this.paging$=this.select(c=>c.paging),this.searchQuery$=this.select(c=>c.searchQuery),this.formName$=this.select(c=>c.formName),this.actionResult$=this.select(this.item$,this.done$,(c,d)=>({item:c,done:d}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.payorTypes$,(c,d,n,a,m)=>({errors:c,loading:d,item:n,formName:a,payorTypes:m}),{debounce:!0}),this.input$=this.select(this.paging$,this.searchQuery$,(c,d)=>({limit:c.limit,skip:c.skip,name:d,total:c.total})),this.setFormName=this.updater((c,d)=>Object.assign(Object.assign({},c),{formName:d})),this.setItem=this.updater((c,d)=>Object.assign(Object.assign({},c),{item:d})),this.addNewPayorType=this.updater((c,d)=>Object.assign(Object.assign({},c),{payorTypes:[...c.payorTypes,d]})),this.updatePayorType=this.updater((c,d)=>Object.assign(Object.assign({},c),{payorTypes:c.payorTypes.map(n=>n.id===d.id?d:n)})),this.addPayorTypes=this.updater((c,d)=>Object.assign(Object.assign({},c),{payorTypes:c.payorTypes.concat(d)})),this.updatePayorTypes=this.updater((c,d)=>Object.assign(Object.assign({},c),{payorTypes:c.payorTypes.map(n=>d.find(m=>m.id===n.id)||n)})),this.setSearchQuery=this.updater((c,d)=>Object.assign(Object.assign({},c),{searchQuery:d})),this.loadPayorTypeEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.data.userPayorType({payorTypeId:d}).pipe((0,g._b)(n=>{this.patchState({item:n.data.item,errors:n.errors,loading:!1})},n=>this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})))))),this.loadPayorTypesEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.input$),(0,h.w)(([d,n])=>this.data.userPayorTypes({input:n}).pipe((0,g._b)(a=>this.patchState({paging:{limit:n.limit,skip:n.skip,total:a.data.count.total},payorTypes:a.data.items,errors:a.errors,loading:!1}),a=>this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})))))),this.createPayorTypeEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.payorTypeService.createPayorType(Object.assign({},d)).pipe((0,g._b)(n=>{this.addNewPayorType(n),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:n,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},n=>{n.graphQLErrors?(this.toast.error(n.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})):(this.toast.error(n.Message),this.formService.setErrors(n.Data))}))))),this.updatePayorTypeEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([d,n])=>this.payorTypeService.updatePayorType(d,d.id).pipe((0,g._b)(a=>{this.updatePayorType(a),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:a,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.deletePayorTypeEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([d,n])=>this.data.userDeletePayorType({payorTypeId:n.id}).pipe((0,g._b)(a=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:a.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.importExcelEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.payorTypeService.importPayorTypes(d).pipe((0,te.K)(n=>{var a;return this.toast.error(null!==(a=n.Message)&&void 0!==a?a:"Failed to save",{duration:3e3}),k.E}),(0,C.b)(n=>{const a=JSON.parse(n.created),m=JSON.parse(n.updated),p=JSON.parse(n.failed),_=a.length+m.length+p.length;this.addPayorTypes(a),this.updatePayorTypes(m),this.toast.success(`${a.length} created, ${m.length} updated, ${p.length} failed of total ${_}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("payorTypeId")?(this.route.snapshot.paramMap.get("payorTypeId"),this.setFormName("payorType_edit")):this.setFormName("payorType_create")}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.payorTypeService.validatePayorTypeExcelData(t)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(E.q),e.LFG(A.F0),e.LFG(A.gz),e.LFG(X.F),e.LFG(q.o),e.LFG(DU))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function IU(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close.emit())})("formIsReady",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.payorType)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let Md=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"payorType_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.payorType=i.item})):t.formName&&t.formName.currentValue&&"payorType_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadPayorTypeEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.payorType=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Jo),e.Y36(A.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-payor-type-form"]],inputs:{payorType:"payorType",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,IU,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[w.O5,z.M,w.Ov],encapsulation:2}),s})(),Ed=(()=>{class s{constructor(){this.autoHeight=!1,this.payorTypes=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[,{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var r;t.includes(null===(r=i.data)||void 0===r?void 0:r.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-payor-type-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(N.x,5),2&t){let r;e.iGM(r=e.CRH())&&(i.tableView=r.first)}},inputs:{autoHeight:"autoHeight",payorTypes:"payorTypes"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.payorTypes)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[N.x],encapsulation:2}),s})();function PU(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-payor-type-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","payorType_edit")("formControl",t.formControl)("payorType",t.payorType)}}const WU=function(){return{}};function MU(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-payor-type-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","payorType_create")("formControl",t.formControl)("payorType",e.DdM(3,WU))}}function EU(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-payor-type-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(u.ref.close())}),e.qZA()}2&s&&e.Q6J("payorTypes",o.data.items)}let OU=(()=>{class s extends I.fS{constructor(t){super(),this.store=t,this.store.loadPayorTypesEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.payorTypes$.pipe((0,h.w)(i=>(0,T.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Jo))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","payorType","send","close"],[1,"w-full","h-full","bg-white",3,"payorTypes","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,PU,2,3,"ng-template",null,1,e.W1O),e.YNc(3,MU,1,4,"ng-template",null,2,e.W1O),e.YNc(5,EU,1,1,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",u)("editTemplate",r)("createTemplate",l)("key",i.field.key)}},dependencies:[x.JJ,x.oH,J.$,Md,Ed],encapsulation:2}),s})();function LU(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-payor-type-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","payorType_edit")("payorType",t.value)}}const GU=function(){return{}};function $U(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-payor-type-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","payorType_create")("payorType",e.DdM(2,GU))}function RU(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-payor-type-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(null==u.ref?null:u.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("payorTypes",t.items)}}let VU=(()=>{class s extends Y{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","payorType","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","payorTypes","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,LU,1,2,"ng-template",null,1,e.W1O),e.YNc(3,$U,1,3,"ng-template",null,2,e.W1O),e.YNc(5,RU,1,2,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[ee,Md,Ed],encapsulation:2}),s})(),QU=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[Jo],imports:[w.ez,R.F,x.UX,V.o,H.u,Q.P,U.t,Z,j.h,K.G,I.X0.forChild({types:[{name:"payor-type-select",component:OU,wrappers:["form-field"]},{name:"payor-type-grid",component:VU}]})]}),s})(),UU=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[QU]}),s})();class yi extends y.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class JU extends yi{constructor(o,t){super("ValidatePchProviderExcelDataAction"),this.valid=!1,this.excelData=o,this.clinicalProviders=t}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name),this.validationContext.addRule(new f.mi(`clinicalProviderName_${i}_is_valid}`,"Clinical Provider Is Not Valid","clinicalProvider.name",t.clinicalProvider,this.clinicalProviders,!0))}),this.validationContext.addRule(new f.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof f.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(r=>r.name),newNames:[i.newName]}):i instanceof f.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,T.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class jU extends f.wS{constructor(o,t,i,r,l){super(o,t,i,r,l,!0)}}class zU extends f.ul{constructor(o,t,i,r=!1){super(o,t,r),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new f.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new jU("name","The pchprovider name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class qU extends yi{constructor(o){super("CreatePchProviderAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new zU("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreatePchProvider({input:this.input}).pipe((0,h.w)(o=>(0,ie.of)(o.data.created)))}}class HU extends yi{constructor(o){super("UpdatePchProvidersAction"),this.pchProviders=o}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.pchProviders,!0))}performAction(){this.response=this.businessProvider.data.userUpdatePchProviders({input:{pchProviders:this.pchProviders}}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}class KU extends yi{constructor(o,t){super("UpdatePchProviderAction"),this.pchProvider=o,this.pchProviderId=t}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.pchProvider,!0)).addRule(new f.xF("Id","Id should be a CUID and not null",this.pchProviderId,!0))}performAction(){this.response=this.businessProvider.data.userUpdatePchProvider({pchProviderId:this.pchProviderId,input:this.pchProvider}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}let Od=(()=>{class s extends y.nH{constructor(t,i,r){super("NotificationService.PchProviderBusinessProviderService",t,r),this.data=i}createPchProvider(t){const i=new qU(t);return i.Do(this),i.response}updatePchProvider(t,i){const r=new KU(t,i);return r.Do(this),r.response}importPchProviders(t){const i=new HU(t);return i.Do(this),i.response}validatePchProviderExcelData(t,i){const r=new JU(t,i);return r.Do(this),r.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(O.ed),e.LFG(E.q),e.LFG(y.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),kU=(()=>{class s extends y.nH{constructor(t,i,r){super("PchProviderService",r,t),this.businessProvider=i}createPchProvider(t){const i=Object.fromEntries(Object.entries(t).filter(([r,l])=>null!==l));return this.businessProvider.createPchProvider(i)}updatePchProvider(t,i){return this.businessProvider.updatePchProvider(t,i)}importPchProviders(t){return this.businessProvider.importPchProviders(t)}validatePchProviderExcelData(t,i){return this.businessProvider.validatePchProviderExcelData(t,i)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(Od,8),e.LFG(Od),e.LFG(O.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),jo=(()=>{class s extends g.m1{constructor(t,i,r,l,u,P){if(super({loading:!1,pchProviders:[],done:!1,searchQuery:"",formName:void 0,clinicalProviderId:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=r,this.toast=l,this.formService=u,this.pchProviderService=P,this.errors$=this.select(d=>d.errors),this.loading$=this.select(d=>d.loading),this.done$=this.select(d=>d.done),this.item$=this.select(d=>d.item),this.pchProviders$=this.select(d=>d.pchProviders),this.clinicalProviders$=this.select(d=>d.clinicalProviders||[]),this.clinicalProviderId$=this.select(d=>d.clinicalProviderId),this.paging$=this.select(d=>d.paging),this.searchQuery$=this.select(d=>d.searchQuery),this.formName$=this.select(d=>d.formName),this.actionResult$=this.select(this.item$,this.done$,(d,n)=>({item:d,done:n}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.pchProviders$,this.clinicalProviders$,(d,n,a,m,p,_)=>({errors:d,loading:n,item:a,formName:m,pchProviders:p,clinicalProviders:_}),{debounce:!0}),this.input$=this.select(this.paging$,this.clinicalProviderId$,this.searchQuery$,(d,n,a)=>({limit:d.limit,skip:d.skip,name:a,clinicalProviderId:n,total:d.total})),this.setFormName=this.updater((d,n)=>Object.assign(Object.assign({},d),{formName:n})),this.setClinicalProviderId=this.updater((d,n)=>Object.assign(Object.assign({},d),{clinicalProviderId:n})),this.filterClinicalProviders=d=>this.data.userSelectClinicalProviders({input:{name:d}}).pipe((0,g._b)(n=>{let a=n.data.items;return this.patchState({clinicalProviders:a}),a},n=>this.patchState({errors:n.graphQLErrors?n.graphQLErrors:n})),(0,B.U)(n=>n.data.items)),this.addClinicalProvider=this.updater((d,n)=>Object.assign(Object.assign({},d),{clinicalProviders:d.clinicalProviders.concat(n)})),this.setItem=this.updater((d,n)=>Object.assign(Object.assign({},d),{item:n})),this.addNewPchProvider=this.updater((d,n)=>Object.assign(Object.assign({},d),{pchProviders:[...d.pchProviders,n]})),this.updatePchProvider=this.updater((d,n)=>Object.assign(Object.assign({},d),{pchProviders:d.pchProviders.map(a=>a.id===n.id?n:a)})),this.addPchProviders=this.updater((d,n)=>Object.assign(Object.assign({},d),{pchProviders:d.pchProviders.concat(n)})),this.updatePchProviders=this.updater((d,n)=>Object.assign(Object.assign({},d),{pchProviders:d.pchProviders.map(a=>n.find(p=>p.id===a.id)||a)})),this.setSearchQuery=this.updater((d,n)=>Object.assign(Object.assign({},d),{searchQuery:n})),this.loadPchProviderEffect=this.effect(d=>d.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(n=>this.data.userPchProvider({pchProviderId:n}).pipe((0,g._b)(a=>{this.patchState({item:a.data.item,errors:a.errors,loading:!1})},a=>this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})))))),this.loadPchProvidersEffect=this.effect(d=>d.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.input$),(0,h.w)(([n,a])=>this.data.userPchProviders({input:a}).pipe((0,g._b)(m=>this.patchState({paging:{limit:a.limit,skip:a.skip,total:m.data.count.total},pchProviders:m.data.items,errors:m.errors,loading:!1}),m=>this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})))))),this.createPchProviderEffect=this.effect(d=>d.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(n=>this.pchProviderService.createPchProvider(Object.assign({},n)).pipe((0,g._b)(a=>{this.addNewPchProvider(a),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:a,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.updatePchProviderEffect=this.effect(d=>d.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([n,a])=>this.pchProviderService.updatePchProvider(n,n.id).pipe((0,g._b)(m=>{this.updatePchProvider(m),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:m,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},m=>{m.graphQLErrors?(this.toast.error(m.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})):(this.toast.error(m.Message),this.formService.setErrors(m.Data))}))))),this.deletePchProviderEffect=this.effect(d=>d.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([n,a])=>this.data.userDeletePchProvider({pchProviderId:a.id}).pipe((0,g._b)(m=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:m.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},m=>{m.graphQLErrors?(this.toast.error(m.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})):(this.toast.error(m.Message),this.formService.setErrors(m.Data))}))))),this.importExcelEffect=this.effect(d=>d.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(n=>this.pchProviderService.importPchProviders(n).pipe((0,te.K)(a=>{var m;return this.toast.error(null!==(m=a.Message)&&void 0!==m?m:"Failed to save",{duration:3e3}),k.E}),(0,C.b)(a=>{const m=JSON.parse(a.created),p=JSON.parse(a.updated),_=JSON.parse(a.failed),v=m.length+p.length+_.length;this.addPchProviders(m),this.updatePchProviders(p),this.toast.success(`${m.length} created, ${p.length} updated, ${_.length} failed of total ${v}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("pchProviderId")?(this.route.snapshot.paramMap.get("pchProviderId"),this.setFormName("pchProvider_edit")):this.setFormName("pchProvider_create"),this.route.snapshot.paramMap.has("clinicalProviderId")){var c=this.route.snapshot.paramMap.get("clinicalProviderId");this.setClinicalProviderId(c)}}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.pchProviderService.validatePchProviderExcelData(t,i.clinicalProviders)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(E.q),e.LFG(A.F0),e.LFG(A.gz),e.LFG(X.F),e.LFG(q.o),e.LFG(kU))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function ZU(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close.emit())})("formIsReady",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.pchProvider)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let Ld=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"pchProvider_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.pchProvider=i.item})):t.formName&&t.formName.currentValue&&"pchProvider_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadPchProviderEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.pchProvider=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(jo),e.Y36(A.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-pch-provider-form"]],inputs:{pchProvider:"pchProvider",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,ZU,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[w.O5,z.M,w.Ov],encapsulation:2}),s})(),Gd=(()=>{class s{constructor(){this.autoHeight=!1,this.pchProviders=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[{field:"clinicalProvider.name",headerName:"Clinical Provider",filter:"agTextColumnFilter"},{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{field:"clinicalProviderId",filter:"agTextColumnFilter",hide:!0}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var r;t.includes(null===(r=i.data)||void 0===r?void 0:r.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-pch-provider-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(N.x,5),2&t){let r;e.iGM(r=e.CRH())&&(i.tableView=r.first)}},inputs:{autoHeight:"autoHeight",pchProviders:"pchProviders"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.pchProviders)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[N.x],encapsulation:2}),s})();function BU(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-pch-provider-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","pchProvider_edit")("formControl",t.formControl)("pchProvider",t.pchProvider)}}const YU=function(){return{}};function XU(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-pch-provider-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","pchProvider_create")("formControl",t.formControl)("pchProvider",e.DdM(3,YU))}}function eJ(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-pch-provider-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(u.ref.close())}),e.qZA()}2&s&&e.Q6J("pchProviders",o.data.items)}let tJ=(()=>{class s extends I.fS{constructor(t){super(),this.store=t,this.store.loadPchProvidersEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.pchProviders$.pipe((0,h.w)(i=>(0,T.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(jo))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","pchProvider","send","close"],[1,"w-full","h-full","bg-white",3,"pchProviders","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,BU,2,3,"ng-template",null,1,e.W1O),e.YNc(3,XU,1,4,"ng-template",null,2,e.W1O),e.YNc(5,eJ,1,1,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",u)("editTemplate",r)("createTemplate",l)("key",i.field.key)}},dependencies:[x.JJ,x.oH,J.$,Ld,Gd],encapsulation:2}),s})();function iJ(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-pch-provider-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","pchProvider_edit")("pchProvider",t.value)}}const sJ=function(){return{}};function oJ(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-pch-provider-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","pchProvider_create")("pchProvider",e.DdM(2,sJ))}function rJ(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-pch-provider-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(null==u.ref?null:u.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("pchProviders",t.items)}}let aJ=(()=>{class s extends Y{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","pchProvider","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","pchProviders","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,iJ,1,2,"ng-template",null,1,e.W1O),e.YNc(3,oJ,1,3,"ng-template",null,2,e.W1O),e.YNc(5,rJ,1,2,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[ee,Ld,Gd],encapsulation:2}),s})(),nJ=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[jo],imports:[w.ez,R.F,x.UX,V.o,H.u,Q.P,U.t,Z,j.h,K.G,I.X0.forChild({types:[{name:"pch-provider-select",component:tJ,wrappers:["form-field"]},{name:"pch-provider-grid",component:aJ}]})]}),s})(),lJ=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[nJ]}),s})();class wi extends y.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class cJ extends wi{constructor(o){super("ValidatePlaceOfServiceExcelDataAction"),this.valid=!1,this.excelData=o}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name)}),this.validationContext.addRule(new f.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof f.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(r=>r.name),newNames:[i.newName]}):i instanceof f.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,T.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class dJ extends f.wS{constructor(o,t,i,r,l){super(o,t,i,r,l,!0)}}class uJ extends f.ul{constructor(o,t,i,r=!1){super(o,t,r),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new f.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new dJ("name","The placeofservice name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class mJ extends wi{constructor(o){super("CreatePlaceOfServiceAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new uJ("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreatePlaceOfService({input:this.input}).pipe((0,h.w)(o=>(0,ie.of)(o.data.created)))}}class pJ extends wi{constructor(o){super("UpdatePlaceOfServicesAction"),this.placeOfServices=o}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.placeOfServices,!0))}performAction(){this.response=this.businessProvider.data.userUpdatePlaceOfServices({input:{placeOfServices:this.placeOfServices}}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}class hJ extends wi{constructor(o,t){super("UpdatePlaceOfServiceAction"),this.placeOfService=o,this.placeOfServiceId=t}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.placeOfService,!0)).addRule(new f.xF("Id","Id should be a CUID and not null",this.placeOfServiceId,!0))}performAction(){this.response=this.businessProvider.data.userUpdatePlaceOfService({placeOfServiceId:this.placeOfServiceId,input:this.placeOfService}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}let $d=(()=>{class s extends y.nH{constructor(t,i,r){super("NotificationService.PlaceOfServiceBusinessProviderService",t,r),this.data=i}createPlaceOfService(t){const i=new mJ(t);return i.Do(this),i.response}updatePlaceOfService(t,i){const r=new hJ(t,i);return r.Do(this),r.response}importPlaceOfServices(t){const i=new pJ(t);return i.Do(this),i.response}validatePlaceOfServiceExcelData(t){const i=new cJ(t);return i.Do(this),i.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(O.ed),e.LFG(E.q),e.LFG(y.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),fJ=(()=>{class s extends y.nH{constructor(t,i,r){super("PlaceOfServiceService",r,t),this.businessProvider=i}createPlaceOfService(t){const i=Object.fromEntries(Object.entries(t).filter(([r,l])=>null!==l));return this.businessProvider.createPlaceOfService(i)}updatePlaceOfService(t,i){return this.businessProvider.updatePlaceOfService(t,i)}importPlaceOfServices(t){return this.businessProvider.importPlaceOfServices(t)}validatePlaceOfServiceExcelData(t){return this.businessProvider.validatePlaceOfServiceExcelData(t)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG($d,8),e.LFG($d),e.LFG(O.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),zo=(()=>{class s extends g.m1{constructor(t,i,r,l,u,P){super({loading:!1,placeOfServices:[],done:!1,searchQuery:"",formName:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=r,this.toast=l,this.formService=u,this.placeOfServiceService=P,this.errors$=this.select(c=>c.errors),this.loading$=this.select(c=>c.loading),this.done$=this.select(c=>c.done),this.item$=this.select(c=>c.item),this.placeOfServices$=this.select(c=>c.placeOfServices),this.paging$=this.select(c=>c.paging),this.searchQuery$=this.select(c=>c.searchQuery),this.formName$=this.select(c=>c.formName),this.actionResult$=this.select(this.item$,this.done$,(c,d)=>({item:c,done:d}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.placeOfServices$,(c,d,n,a,m)=>({errors:c,loading:d,item:n,formName:a,placeOfServices:m}),{debounce:!0}),this.input$=this.select(this.paging$,this.searchQuery$,(c,d)=>({limit:c.limit,skip:c.skip,name:d,total:c.total})),this.setFormName=this.updater((c,d)=>Object.assign(Object.assign({},c),{formName:d})),this.setItem=this.updater((c,d)=>Object.assign(Object.assign({},c),{item:d})),this.addNewPlaceOfService=this.updater((c,d)=>Object.assign(Object.assign({},c),{placeOfServices:[...c.placeOfServices,d]})),this.updatePlaceOfService=this.updater((c,d)=>Object.assign(Object.assign({},c),{placeOfServices:c.placeOfServices.map(n=>n.id===d.id?d:n)})),this.addPlaceOfServices=this.updater((c,d)=>Object.assign(Object.assign({},c),{placeOfServices:c.placeOfServices.concat(d)})),this.updatePlaceOfServices=this.updater((c,d)=>Object.assign(Object.assign({},c),{placeOfServices:c.placeOfServices.map(n=>d.find(m=>m.id===n.id)||n)})),this.setSearchQuery=this.updater((c,d)=>Object.assign(Object.assign({},c),{searchQuery:d})),this.loadPlaceOfServiceEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.data.userPlaceOfService({placeOfServiceId:d}).pipe((0,g._b)(n=>{this.patchState({item:n.data.item,errors:n.errors,loading:!1})},n=>this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})))))),this.loadPlaceOfServicesEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.input$),(0,h.w)(([d,n])=>this.data.userPlaceOfServices({input:n}).pipe((0,g._b)(a=>this.patchState({paging:{limit:n.limit,skip:n.skip,total:a.data.count.total},placeOfServices:a.data.items,errors:a.errors,loading:!1}),a=>this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})))))),this.createPlaceOfServiceEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.placeOfServiceService.createPlaceOfService(Object.assign({},d)).pipe((0,g._b)(n=>{this.addNewPlaceOfService(n),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:n,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},n=>{n.graphQLErrors?(this.toast.error(n.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})):(this.toast.error(n.Message),this.formService.setErrors(n.Data))}))))),this.updatePlaceOfServiceEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([d,n])=>this.placeOfServiceService.updatePlaceOfService(d,d.id).pipe((0,g._b)(a=>{this.updatePlaceOfService(a),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:a,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.deletePlaceOfServiceEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([d,n])=>this.data.userDeletePlaceOfService({placeOfServiceId:n.id}).pipe((0,g._b)(a=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:a.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.importExcelEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.placeOfServiceService.importPlaceOfServices(d).pipe((0,te.K)(n=>{var a;return this.toast.error(null!==(a=n.Message)&&void 0!==a?a:"Failed to save",{duration:3e3}),k.E}),(0,C.b)(n=>{const a=JSON.parse(n.created),m=JSON.parse(n.updated),p=JSON.parse(n.failed),_=a.length+m.length+p.length;this.addPlaceOfServices(a),this.updatePlaceOfServices(m),this.toast.success(`${a.length} created, ${m.length} updated, ${p.length} failed of total ${_}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("placeOfServiceId")?(this.route.snapshot.paramMap.get("placeOfServiceId"),this.setFormName("placeOfService_edit")):this.setFormName("placeOfService_create")}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.placeOfServiceService.validatePlaceOfServiceExcelData(t)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(E.q),e.LFG(A.F0),e.LFG(A.gz),e.LFG(X.F),e.LFG(q.o),e.LFG(fJ))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function _J(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close.emit())})("formIsReady",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.placeOfService)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let Rd=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"placeOfService_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({id:null,name:""}),this.store.vm$.subscribe(i=>{this.placeOfService=i.item})):t.formName&&t.formName.currentValue&&"placeOfService_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadPlaceOfServiceEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.placeOfService=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(zo),e.Y36(A.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-place-of-service-form"]],inputs:{placeOfService:"placeOfService",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,_J,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[w.O5,z.M,w.Ov],encapsulation:2}),s})(),Vd=(()=>{class s{constructor(){this.autoHeight=!1,this.placeOfServices=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[,{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{headerName:"Is Facility",field:"isFacility",filter:"agSetColumnFilter",cellRenderer:"checkboxRenderer"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var r;t.includes(null===(r=i.data)||void 0===r?void 0:r.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-place-of-service-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(N.x,5),2&t){let r;e.iGM(r=e.CRH())&&(i.tableView=r.first)}},inputs:{autoHeight:"autoHeight",placeOfServices:"placeOfServices"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.placeOfServices)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[N.x],encapsulation:2}),s})();function gJ(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-place-of-service-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","placeOfService_edit")("formControl",t.formControl)("placeOfService",t.placeOfService)}}const CJ=function(){return{}};function SJ(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-place-of-service-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","placeOfService_create")("formControl",t.formControl)("placeOfService",e.DdM(3,CJ))}}function vJ(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-place-of-service-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(u.ref.close())}),e.qZA()}2&s&&e.Q6J("placeOfServices",o.data.items)}let bJ=(()=>{class s extends I.fS{constructor(t){super(),this.store=t,this.store.loadPlaceOfServicesEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.placeOfServices$.pipe((0,h.w)(i=>(0,T.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(zo))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","placeOfService","send","close"],[1,"w-full","h-full","bg-white",3,"placeOfServices","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,gJ,2,3,"ng-template",null,1,e.W1O),e.YNc(3,SJ,1,4,"ng-template",null,2,e.W1O),e.YNc(5,vJ,1,1,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",u)("editTemplate",r)("createTemplate",l)("key",i.field.key)}},dependencies:[x.JJ,x.oH,J.$,Rd,Vd],encapsulation:2}),s})();function TJ(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-place-of-service-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","placeOfService_edit")("placeOfService",t.value)}}const yJ=function(){return{}};function wJ(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-place-of-service-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","placeOfService_create")("placeOfService",e.DdM(2,yJ))}function xJ(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-place-of-service-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(null==u.ref?null:u.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("placeOfServices",t.items)}}let NJ=(()=>{class s extends Y{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","placeOfService","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","placeOfServices","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,TJ,1,2,"ng-template",null,1,e.W1O),e.YNc(3,wJ,1,3,"ng-template",null,2,e.W1O),e.YNc(5,xJ,1,2,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[ee,Rd,Vd],encapsulation:2}),s})(),AJ=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[zo],imports:[w.ez,R.F,x.UX,V.o,H.u,Q.P,U.t,Z,j.h,K.G,I.X0.forChild({types:[{name:"place-of-service-select",component:bJ,wrappers:["form-field"]},{name:"place-of-service-grid",component:NJ}]})]}),s})(),FJ=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[AJ]}),s})();class xi extends y.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class DJ extends xi{constructor(o){super("ValidatePortfolioExcelDataAction"),this.valid=!1,this.excelData=o}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name)}),this.validationContext.addRule(new f.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof f.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(r=>r.name),newNames:[i.newName]}):i instanceof f.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,T.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class IJ extends f.wS{constructor(o,t,i,r,l){super(o,t,i,r,l,!0)}}class PJ extends f.ul{constructor(o,t,i,r=!1){super(o,t,r),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new f.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new IJ("name","The portfolio name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class WJ extends xi{constructor(o){super("CreatePortfolioAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new PJ("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreatePortfolio({input:this.input}).pipe((0,h.w)(o=>(0,ie.of)(o.data.created)))}}class MJ extends xi{constructor(o){super("UpdatePortfoliosAction"),this.portfolios=o}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.portfolios,!0))}performAction(){this.response=this.businessProvider.data.userUpdatePortfolios({input:{portfolios:this.portfolios}}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}class EJ extends xi{constructor(o,t){super("UpdatePortfolioAction"),this.portfolio=o,this.portfolioId=t}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.portfolio,!0)).addRule(new f.xF("Id","Id should be a CUID and not null",this.portfolioId,!0))}performAction(){this.response=this.businessProvider.data.userUpdatePortfolio({portfolioId:this.portfolioId,input:this.portfolio}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}let Qd=(()=>{class s extends y.nH{constructor(t,i,r){super("NotificationService.PortfolioBusinessProviderService",t,r),this.data=i}createPortfolio(t){const i=new WJ(t);return i.Do(this),i.response}updatePortfolio(t,i){const r=new EJ(t,i);return r.Do(this),r.response}importPortfolios(t){const i=new MJ(t);return i.Do(this),i.response}validatePortfolioExcelData(t){const i=new DJ(t);return i.Do(this),i.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(O.ed),e.LFG(E.q),e.LFG(y.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),OJ=(()=>{class s extends y.nH{constructor(t,i,r){super("PortfolioService",r,t),this.businessProvider=i}createPortfolio(t){const i=Object.fromEntries(Object.entries(t).filter(([r,l])=>null!==l));return this.businessProvider.createPortfolio(i)}updatePortfolio(t,i){return this.businessProvider.updatePortfolio(t,i)}importPortfolios(t){return this.businessProvider.importPortfolios(t)}validatePortfolioExcelData(t){return this.businessProvider.validatePortfolioExcelData(t)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(Qd,8),e.LFG(Qd),e.LFG(O.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),qo=(()=>{class s extends g.m1{constructor(t,i,r,l,u,P){super({loading:!1,portfolios:[],done:!1,searchQuery:"",formName:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=r,this.toast=l,this.formService=u,this.portfolioService=P,this.errors$=this.select(c=>c.errors),this.loading$=this.select(c=>c.loading),this.done$=this.select(c=>c.done),this.item$=this.select(c=>c.item),this.portfolios$=this.select(c=>c.portfolios),this.paging$=this.select(c=>c.paging),this.searchQuery$=this.select(c=>c.searchQuery),this.formName$=this.select(c=>c.formName),this.actionResult$=this.select(this.item$,this.done$,(c,d)=>({item:c,done:d}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.portfolios$,(c,d,n,a,m)=>({errors:c,loading:d,item:n,formName:a,portfolios:m}),{debounce:!0}),this.input$=this.select(this.paging$,this.searchQuery$,(c,d)=>({limit:c.limit,skip:c.skip,name:d,total:c.total})),this.setFormName=this.updater((c,d)=>Object.assign(Object.assign({},c),{formName:d})),this.setItem=this.updater((c,d)=>Object.assign(Object.assign({},c),{item:d})),this.addNewPortfolio=this.updater((c,d)=>Object.assign(Object.assign({},c),{portfolios:[...c.portfolios,d]})),this.updatePortfolio=this.updater((c,d)=>Object.assign(Object.assign({},c),{portfolios:c.portfolios.map(n=>n.id===d.id?d:n)})),this.addPortfolios=this.updater((c,d)=>Object.assign(Object.assign({},c),{portfolios:c.portfolios.concat(d)})),this.updatePortfolios=this.updater((c,d)=>Object.assign(Object.assign({},c),{portfolios:c.portfolios.map(n=>d.find(m=>m.id===n.id)||n)})),this.setSearchQuery=this.updater((c,d)=>Object.assign(Object.assign({},c),{searchQuery:d})),this.loadPortfolioEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.data.userPortfolio({portfolioId:d}).pipe((0,g._b)(n=>{this.patchState({item:n.data.item,errors:n.errors,loading:!1})},n=>this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})))))),this.loadPortfoliosEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.input$),(0,h.w)(([d,n])=>this.data.userPortfolios({input:n}).pipe((0,g._b)(a=>this.patchState({paging:{limit:n.limit,skip:n.skip,total:a.data.count.total},portfolios:a.data.items,errors:a.errors,loading:!1}),a=>this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})))))),this.createPortfolioEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.portfolioService.createPortfolio(Object.assign({},d)).pipe((0,g._b)(n=>{this.addNewPortfolio(n),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:n,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},n=>{n.graphQLErrors?(this.toast.error(n.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})):(this.toast.error(n.Message),this.formService.setErrors(n.Data))}))))),this.updatePortfolioEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([d,n])=>this.portfolioService.updatePortfolio(d,d.id).pipe((0,g._b)(a=>{this.updatePortfolio(a),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:a,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.deletePortfolioEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([d,n])=>this.data.userDeletePortfolio({portfolioId:n.id}).pipe((0,g._b)(a=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:a.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.importExcelEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.portfolioService.importPortfolios(d).pipe((0,te.K)(n=>{var a;return this.toast.error(null!==(a=n.Message)&&void 0!==a?a:"Failed to save",{duration:3e3}),k.E}),(0,C.b)(n=>{const a=JSON.parse(n.created),m=JSON.parse(n.updated),p=JSON.parse(n.failed),_=a.length+m.length+p.length;this.addPortfolios(a),this.updatePortfolios(m),this.toast.success(`${a.length} created, ${m.length} updated, ${p.length} failed of total ${_}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("portfolioId")?(this.route.snapshot.paramMap.get("portfolioId"),this.setFormName("portfolio_edit")):this.setFormName("portfolio_create")}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.portfolioService.validatePortfolioExcelData(t)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(E.q),e.LFG(A.F0),e.LFG(A.gz),e.LFG(X.F),e.LFG(q.o),e.LFG(OJ))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function LJ(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close.emit())})("formIsReady",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.portfolio)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let Ud=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"portfolio_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.portfolio=i.item})):t.formName&&t.formName.currentValue&&"portfolio_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadPortfolioEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.portfolio=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(qo),e.Y36(A.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-portfolio-form"]],inputs:{portfolio:"portfolio",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,LJ,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[w.O5,z.M,w.Ov],encapsulation:2}),s})(),Jd=(()=>{class s{constructor(){this.autoHeight=!1,this.portfolios=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[,{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var r;t.includes(null===(r=i.data)||void 0===r?void 0:r.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-portfolio-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(N.x,5),2&t){let r;e.iGM(r=e.CRH())&&(i.tableView=r.first)}},inputs:{autoHeight:"autoHeight",portfolios:"portfolios"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.portfolios)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[N.x],encapsulation:2}),s})();function GJ(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-portfolio-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","portfolio_edit")("formControl",t.formControl)("portfolio",t.portfolio)}}const $J=function(){return{}};function RJ(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-portfolio-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","portfolio_create")("formControl",t.formControl)("portfolio",e.DdM(3,$J))}}function VJ(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-portfolio-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(u.ref.close())}),e.qZA()}2&s&&e.Q6J("portfolios",o.data.items)}let QJ=(()=>{class s extends I.fS{constructor(t){super(),this.store=t,this.store.loadPortfoliosEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.portfolios$.pipe((0,h.w)(i=>(0,T.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(qo))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","portfolio","send","close"],[1,"w-full","h-full","bg-white",3,"portfolios","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,GJ,2,3,"ng-template",null,1,e.W1O),e.YNc(3,RJ,1,4,"ng-template",null,2,e.W1O),e.YNc(5,VJ,1,1,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",u)("editTemplate",r)("createTemplate",l)("key",i.field.key)}},dependencies:[x.JJ,x.oH,J.$,Ud,Jd],encapsulation:2}),s})();function UJ(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-portfolio-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","portfolio_edit")("portfolio",t.value)}}const JJ=function(){return{}};function jJ(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-portfolio-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","portfolio_create")("portfolio",e.DdM(2,JJ))}function zJ(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-portfolio-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(null==u.ref?null:u.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("portfolios",t.items)}}let qJ=(()=>{class s extends Y{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","portfolio","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","portfolios","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,UJ,1,2,"ng-template",null,1,e.W1O),e.YNc(3,jJ,1,3,"ng-template",null,2,e.W1O),e.YNc(5,zJ,1,2,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[ee,Ud,Jd],encapsulation:2}),s})(),HJ=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[qo],imports:[w.ez,R.F,x.UX,V.o,H.u,Q.P,U.t,Z,j.h,K.G,I.X0.forChild({types:[{name:"portfolio-select",component:QJ,wrappers:["form-field"]},{name:"portfolio-grid",component:qJ}]})]}),s})(),KJ=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[HJ]}),s})();var Ho=ae(96236);function kJ(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close.emit())})("formIsReady",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.prescription)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let jd=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"prescription_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.prescription=i.item})):t.formName&&t.formName.currentValue&&"prescription_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadPrescriptionEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.prescription=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Ho.r),e.Y36(A.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-prescription-form"]],inputs:{prescription:"prescription",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,kJ,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[w.O5,z.M,w.Ov],encapsulation:2}),s})(),zd=(()=>{class s{constructor(){this.autoHeight=!1,this.prescriptions=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[{field:"patient.name",headerName:"Patient",filter:"agTextColumnFilter"},{field:"document.name",headerName:"Document",filter:"agTextColumnFilter"},{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{field:"medicalProvider",filter:"agTextColumnFilter"},{field:"dateWritten",filter:"agDateColumnFilter"},{field:"days",filter:"agTextColumnFilter"},{field:"note",filter:"agTextColumnFilter"},{field:"category",filter:"agTextColumnFilter"},{field:"kind",filter:"agTextColumnFilter"},{headerName:"Quantity",field:"quantity",valueFormatter:t=>{var i;return(0,S.oBD)(null===(i=t.data)||void 0===i?void 0:i.quantity,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{field:"refills",filter:"agTextColumnFilter"},{field:"rxNumber",filter:"agTextColumnFilter"},{field:"sig",filter:"agTextColumnFilter"},{field:"strength",filter:"agTextColumnFilter"},{field:"unit",filter:"agTextColumnFilter"},{field:"patientId",filter:"agTextColumnFilter",hide:!0},{field:"documentId",filter:"agTextColumnFilter",hide:!0}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var r;t.includes(null===(r=i.data)||void 0===r?void 0:r.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-prescription-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(N.x,5),2&t){let r;e.iGM(r=e.CRH())&&(i.tableView=r.first)}},inputs:{autoHeight:"autoHeight",prescriptions:"prescriptions"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.prescriptions)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[N.x],encapsulation:2}),s})();function ZJ(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-prescription-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","prescription_edit")("formControl",t.formControl)("prescription",t.prescription)}}const BJ=function(){return{}};function YJ(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-prescription-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","prescription_create")("formControl",t.formControl)("prescription",e.DdM(3,BJ))}}function XJ(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-prescription-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(u.ref.close())}),e.qZA()}2&s&&e.Q6J("prescriptions",o.data.items)}let ej=(()=>{class s extends I.fS{constructor(t){super(),this.store=t,this.store.loadPrescriptionsEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.prescriptions$.pipe((0,h.w)(i=>(0,T.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Ho.r))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","prescription","send","close"],[1,"w-full","h-full","bg-white",3,"prescriptions","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,ZJ,2,3,"ng-template",null,1,e.W1O),e.YNc(3,YJ,1,4,"ng-template",null,2,e.W1O),e.YNc(5,XJ,1,1,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",u)("editTemplate",r)("createTemplate",l)("key",i.field.key)}},dependencies:[x.JJ,x.oH,J.$,jd,zd],encapsulation:2}),s})();function tj(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-prescription-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","prescription_edit")("prescription",t.value)}}const ij=function(){return{}};function sj(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-prescription-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","prescription_create")("prescription",e.DdM(2,ij))}function oj(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-prescription-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(null==u.ref?null:u.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("prescriptions",t.items)}}let rj=(()=>{class s extends Y{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","prescription","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","prescriptions","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,tj,1,2,"ng-template",null,1,e.W1O),e.YNc(3,sj,1,3,"ng-template",null,2,e.W1O),e.YNc(5,oj,1,2,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[ee,jd,zd],encapsulation:2}),s})(),aj=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[Ho.r],imports:[w.ez,R.F,x.UX,V.o,H.u,Q.P,U.t,Z,j.h,K.G,I.X0.forChild({types:[{name:"prescription-select",component:ej,wrappers:["form-field"]},{name:"prescription-grid",component:rj}]})]}),s})(),nj=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[aj]}),s})();class Ni extends y.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class lj extends Ni{constructor(o,t,i){super("ValidatePriorAuthDmeExcelDataAction"),this.valid=!1,this.excelData=o,this.priorAuthorizationRequests=t,this.durableMedicalEquipments=i}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name),this.validationContext.addRule(new f.mi(`priorAuthorizationRequestName_${i}_is_valid}`,"Prior Authorization Request Is Not Valid","priorAuthorizationRequest.name",t.priorAuthorizationRequest,this.priorAuthorizationRequests,!0)),this.validationContext.addRule(new f.mi(`durableMedicalEquipmentName_${i}_is_valid}`,"Durable Medical Equipment Is Not Valid","durableMedicalEquipment.name",t.durableMedicalEquipment,this.durableMedicalEquipments,!0))}),this.validationContext.addRule(new f.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof f.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(r=>r.name),newNames:[i.newName]}):i instanceof f.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,T.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class cj extends f.wS{constructor(o,t,i,r,l){super(o,t,i,r,l,!0)}}class dj extends f.ul{constructor(o,t,i,r=!1){super(o,t,r),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new f.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new cj("name","The priorauthdme name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class uj extends Ni{constructor(o){super("CreatePriorAuthDmeAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new dj("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreatePriorAuthDme({input:this.input}).pipe((0,h.w)(o=>(0,ie.of)(o.data.created)))}}class mj extends Ni{constructor(o){super("UpdatePriorAuthDmesAction"),this.priorAuthDmes=o}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.priorAuthDmes,!0))}performAction(){this.response=this.businessProvider.data.userUpdatePriorAuthDmes({input:{priorAuthDmes:this.priorAuthDmes}}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}class pj extends Ni{constructor(o,t){super("UpdatePriorAuthDmeAction"),this.priorAuthDme=o,this.priorAuthDmeId=t}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.priorAuthDme,!0)).addRule(new f.xF("Id","Id should be a CUID and not null",this.priorAuthDmeId,!0))}performAction(){this.response=this.businessProvider.data.userUpdatePriorAuthDme({priorAuthDmeId:this.priorAuthDmeId,input:this.priorAuthDme}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}let qd=(()=>{class s extends y.nH{constructor(t,i,r){super("NotificationService.PriorAuthDmeBusinessProviderService",t,r),this.data=i}createPriorAuthDme(t){const i=new uj(t);return i.Do(this),i.response}updatePriorAuthDme(t,i){const r=new pj(t,i);return r.Do(this),r.response}importPriorAuthDmes(t){const i=new mj(t);return i.Do(this),i.response}validatePriorAuthDmeExcelData(t,i,r){const l=new lj(t,i,r);return l.Do(this),l.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(O.ed),e.LFG(E.q),e.LFG(y.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),hj=(()=>{class s extends y.nH{constructor(t,i,r){super("PriorAuthDmeService",r,t),this.businessProvider=i}createPriorAuthDme(t){const i=Object.fromEntries(Object.entries(t).filter(([r,l])=>null!==l));return this.businessProvider.createPriorAuthDme(i)}updatePriorAuthDme(t,i){return this.businessProvider.updatePriorAuthDme(t,i)}importPriorAuthDmes(t){return this.businessProvider.importPriorAuthDmes(t)}validatePriorAuthDmeExcelData(t,i,r){return this.businessProvider.validatePriorAuthDmeExcelData(t,i,r)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(qd,8),e.LFG(qd),e.LFG(O.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),Ko=(()=>{class s extends g.m1{constructor(t,i,r,l,u,P){if(super({loading:!1,priorAuthDmes:[],done:!1,searchQuery:"",formName:void 0,priorAuthId:void 0,durableMedicalEquipmentId:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=r,this.toast=l,this.formService=u,this.priorAuthDmeService=P,this.errors$=this.select(n=>n.errors),this.loading$=this.select(n=>n.loading),this.done$=this.select(n=>n.done),this.item$=this.select(n=>n.item),this.priorAuthDmes$=this.select(n=>n.priorAuthDmes),this.priorAuthorizationRequests$=this.select(n=>n.priorAuthorizationRequests||[]),this.durableMedicalEquipments$=this.select(n=>n.durableMedicalEquipments||[]),this.priorAuthId$=this.select(n=>n.priorAuthId),this.durableMedicalEquipmentId$=this.select(n=>n.durableMedicalEquipmentId),this.paging$=this.select(n=>n.paging),this.searchQuery$=this.select(n=>n.searchQuery),this.formName$=this.select(n=>n.formName),this.actionResult$=this.select(this.item$,this.done$,(n,a)=>({item:n,done:a}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.priorAuthDmes$,this.priorAuthorizationRequests$,this.durableMedicalEquipments$,(n,a,m,p,_,v,D)=>({errors:n,loading:a,item:m,formName:p,priorAuthDmes:_,priorAuthorizationRequests:v,durableMedicalEquipments:D}),{debounce:!0}),this.input$=this.select(this.paging$,this.priorAuthId$,this.durableMedicalEquipmentId$,this.searchQuery$,(n,a,m,p)=>({limit:n.limit,skip:n.skip,name:p,priorAuthId:a,durableMedicalEquipmentId:m,total:n.total})),this.setFormName=this.updater((n,a)=>Object.assign(Object.assign({},n),{formName:a})),this.setPriorAuthId=this.updater((n,a)=>Object.assign(Object.assign({},n),{priorAuthId:a})),this.setDurableMedicalEquipmentId=this.updater((n,a)=>Object.assign(Object.assign({},n),{durableMedicalEquipmentId:a})),this.filterPriorAuthorizationRequests=n=>this.data.userSelectPriorAuthorizationRequests({input:{name:n}}).pipe((0,g._b)(a=>{let m=a.data.items;return this.patchState({priorAuthorizationRequests:m}),m},a=>this.patchState({errors:a.graphQLErrors?a.graphQLErrors:a})),(0,B.U)(a=>a.data.items)),this.filterDurableMedicalEquipments=n=>this.data.userSelectDurableMedicalEquipments({input:{name:n}}).pipe((0,g._b)(a=>{let m=a.data.items;return this.patchState({durableMedicalEquipments:m}),m},a=>this.patchState({errors:a.graphQLErrors?a.graphQLErrors:a})),(0,B.U)(a=>a.data.items)),this.addPriorAuthorizationRequest=this.updater((n,a)=>Object.assign(Object.assign({},n),{priorAuthorizationRequests:n.priorAuthorizationRequests.concat(a)})),this.addDurableMedicalEquipment=this.updater((n,a)=>Object.assign(Object.assign({},n),{durableMedicalEquipments:n.durableMedicalEquipments.concat(a)})),this.setItem=this.updater((n,a)=>Object.assign(Object.assign({},n),{item:a})),this.addNewPriorAuthDme=this.updater((n,a)=>Object.assign(Object.assign({},n),{priorAuthDmes:[...n.priorAuthDmes,a]})),this.updatePriorAuthDme=this.updater((n,a)=>Object.assign(Object.assign({},n),{priorAuthDmes:n.priorAuthDmes.map(m=>m.id===a.id?a:m)})),this.addPriorAuthDmes=this.updater((n,a)=>Object.assign(Object.assign({},n),{priorAuthDmes:n.priorAuthDmes.concat(a)})),this.updatePriorAuthDmes=this.updater((n,a)=>Object.assign(Object.assign({},n),{priorAuthDmes:n.priorAuthDmes.map(m=>a.find(_=>_.id===m.id)||m)})),this.setSearchQuery=this.updater((n,a)=>Object.assign(Object.assign({},n),{searchQuery:a})),this.loadPriorAuthDmeEffect=this.effect(n=>n.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(a=>this.data.userPriorAuthDme({priorAuthDmeId:a}).pipe((0,g._b)(m=>{this.patchState({item:m.data.item,errors:m.errors,loading:!1})},m=>this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})))))),this.loadPriorAuthDmesEffect=this.effect(n=>n.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.input$),(0,h.w)(([a,m])=>this.data.userPriorAuthDmes({input:m}).pipe((0,g._b)(p=>(console.log("$$$$$$$$$$$$$$$$$$$$$$"),console.log(p.data.items),this.patchState({paging:{limit:m.limit,skip:m.skip,total:p.data.count.total},priorAuthDmes:p.data.items,errors:p.errors,loading:!1})),p=>this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})))))),this.createPriorAuthDmeEffect=this.effect(n=>n.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(a=>{const m=Object.fromEntries(Object.entries(a).filter(([p,_])=>null!==_));return this.priorAuthDmeService.createPriorAuthDme(m).pipe((0,g._b)(p=>{this.addNewPriorAuthDme(p),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:p,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},p=>{p.graphQLErrors?(this.toast.error(p.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})):(this.toast.error(p.Message),this.formService.setErrors(p.Data))}))}))),this.updatePriorAuthDmeEffect=this.effect(n=>n.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([a,m])=>this.priorAuthDmeService.updatePriorAuthDme(a,a.id).pipe((0,g._b)(p=>{this.updatePriorAuthDme(p),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:p,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},p=>{p.graphQLErrors?(this.toast.error(p.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})):(this.toast.error(p.Message),this.formService.setErrors(p.Data))}))))),this.deletePriorAuthDmeEffect=this.effect(n=>n.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([a,m])=>this.data.userDeletePriorAuthDme({priorAuthDmeId:m.id}).pipe((0,g._b)(p=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:p.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},p=>{p.graphQLErrors?(this.toast.error(p.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})):(this.toast.error(p.Message),this.formService.setErrors(p.Data))}))))),this.importExcelEffect=this.effect(n=>n.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(a=>this.priorAuthDmeService.importPriorAuthDmes(a).pipe((0,te.K)(m=>{var p;return this.toast.error(null!==(p=m.Message)&&void 0!==p?p:"Failed to save",{duration:3e3}),k.E}),(0,C.b)(m=>{const p=JSON.parse(m.created),_=JSON.parse(m.updated),v=JSON.parse(m.failed),D=p.length+_.length+v.length;this.addPriorAuthDmes(p),this.updatePriorAuthDmes(_),this.toast.success(`${p.length} created, ${_.length} updated, ${v.length} failed of total ${D}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("priorAuthDmeId")?(this.route.snapshot.paramMap.get("priorAuthDmeId"),this.setFormName("priorAuthDme_edit")):this.setFormName("priorAuthDme_create"),this.route.snapshot.paramMap.has("priorAuthId")){var c=this.route.snapshot.paramMap.get("priorAuthId");this.setPriorAuthId(c)}if(this.route.snapshot.paramMap.has("durableMedicalEquipmentId")){var d=this.route.snapshot.paramMap.get("durableMedicalEquipmentId");this.setDurableMedicalEquipmentId(d)}}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.priorAuthDmeService.validatePriorAuthDmeExcelData(t,i.priorAuthorizationRequests,i.durableMedicalEquipments)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(E.q),e.LFG(A.F0),e.LFG(A.gz),e.LFG(X.F),e.LFG(q.o),e.LFG(hj))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function fj(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close.emit())})("formIsReady",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.priorAuthDme)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let Hd=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"priorAuthDme_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({id:null,name:""}),this.store.vm$.subscribe(i=>{this.priorAuthDme=i.item})):t.formName&&t.formName.currentValue&&"priorAuthDme_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadPriorAuthDmeEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.priorAuthDme=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Ko),e.Y36(A.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-prior-auth-dme-form"]],inputs:{priorAuthDme:"priorAuthDme",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,fj,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[w.O5,z.M,w.Ov],encapsulation:2}),s})(),Kd=(()=>{class s{constructor(){this.autoHeight=!1,this.priorAuthDmes=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[{field:"priorAuthorizationRequest.name",headerName:"Prior Authorization Request",filter:"agTextColumnFilter"},{field:"durableMedicalEquipment.name",headerName:"Durable Medical Equipment",filter:"agTextColumnFilter"},{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{headerName:"Estimated Cost",field:"estimatedCost",valueFormatter:t=>{var i;return(0,S.oBD)(null===(i=t.data)||void 0===i?void 0:i.estimatedCost,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{field:"priorAuthId",filter:"agTextColumnFilter",hide:!0},{field:"durableMedicalEquipmentId",filter:"agTextColumnFilter",hide:!0}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var r;t.includes(null===(r=i.data)||void 0===r?void 0:r.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-prior-auth-dme-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(N.x,5),2&t){let r;e.iGM(r=e.CRH())&&(i.tableView=r.first)}},inputs:{autoHeight:"autoHeight",priorAuthDmes:"priorAuthDmes"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.priorAuthDmes)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[N.x],encapsulation:2}),s})();function _j(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-prior-auth-dme-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","priorAuthDme_edit")("formControl",t.formControl)("priorAuthDme",t.priorAuthDme)}}const gj=function(){return{}};function Cj(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-prior-auth-dme-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","priorAuthDme_create")("formControl",t.formControl)("priorAuthDme",e.DdM(3,gj))}}function Sj(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-prior-auth-dme-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(u.ref.close())}),e.qZA()}2&s&&e.Q6J("priorAuthDmes",o.data.items)}let vj=(()=>{class s extends I.fS{constructor(t){super(),this.store=t,this.store.loadPriorAuthDmesEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.priorAuthDmes$.pipe((0,h.w)(i=>(0,T.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Ko))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","priorAuthDme","send","close"],[1,"w-full","h-full","bg-white",3,"priorAuthDmes","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,_j,2,3,"ng-template",null,1,e.W1O),e.YNc(3,Cj,1,4,"ng-template",null,2,e.W1O),e.YNc(5,Sj,1,1,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",u)("editTemplate",r)("createTemplate",l)("key",i.field.key)}},dependencies:[x.JJ,x.oH,J.$,Hd,Kd],encapsulation:2}),s})();function bj(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-prior-auth-dme-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","priorAuthDme_edit")("priorAuthDme",t.value)}}const Tj=function(){return{}};function yj(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-prior-auth-dme-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","priorAuthDme_create")("priorAuthDme",e.DdM(2,Tj))}function wj(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-prior-auth-dme-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(null==u.ref?null:u.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("priorAuthDmes",t.items)}}let xj=(()=>{class s extends Y{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","priorAuthDme","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","priorAuthDmes","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,bj,1,2,"ng-template",null,1,e.W1O),e.YNc(3,yj,1,3,"ng-template",null,2,e.W1O),e.YNc(5,wj,1,2,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[ee,Hd,Kd],encapsulation:2}),s})(),Nj=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[Ko],imports:[w.ez,R.F,x.UX,V.o,H.u,Q.P,U.t,Z,j.h,K.G,I.X0.forChild({types:[{name:"prior-auth-dme-select",component:vj,wrappers:["form-field"]},{name:"prior-auth-dme-grid",component:xj}]})]}),s})(),Aj=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[Nj]}),s})();class Ai extends y.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class Fj extends Ai{constructor(o,t,i){super("ValidatePriorAuthGuidelineExcelDataAction"),this.valid=!1,this.excelData=o,this.guidelines=t,this.priorAuthorizationRequests=i}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name),this.validationContext.addRule(new f.mi(`guidelineName_${i}_is_valid}`,"Guideline Is Not Valid","guideline.name",t.guideline,this.guidelines,!0)),this.validationContext.addRule(new f.mi(`priorAuthorizationRequestName_${i}_is_valid}`,"Prior Authorization Request Is Not Valid","priorAuthorizationRequest.name",t.priorAuthorizationRequest,this.priorAuthorizationRequests,!0))}),this.validationContext.addRule(new f.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof f.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(r=>r.name),newNames:[i.newName]}):i instanceof f.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,T.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class Dj extends f.wS{constructor(o,t,i,r,l){super(o,t,i,r,l,!0)}}class Ij extends f.ul{constructor(o,t,i,r=!1){super(o,t,r),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new f.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new Dj("name","The priorauthguideline name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class Pj extends Ai{constructor(o){super("CreatePriorAuthGuidelineAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new Ij("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreatePriorAuthGuideline({input:this.input}).pipe((0,h.w)(o=>(0,ie.of)(o.data.created)))}}class Wj extends Ai{constructor(o){super("UpdatePriorAuthGuidelinesAction"),this.priorAuthGuidelines=o}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.priorAuthGuidelines,!0))}performAction(){this.response=this.businessProvider.data.userUpdatePriorAuthGuidelines({input:{priorAuthGuidelines:this.priorAuthGuidelines}}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}class Mj extends Ai{constructor(o,t){super("UpdatePriorAuthGuidelineAction"),this.priorAuthGuideline=o,this.priorAuthGuidelineId=t}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.priorAuthGuideline,!0)).addRule(new f.xF("Id","Id should be a CUID and not null",this.priorAuthGuidelineId,!0))}performAction(){this.response=this.businessProvider.data.userUpdatePriorAuthGuideline({priorAuthGuidelineId:this.priorAuthGuidelineId,input:this.priorAuthGuideline}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}let kd=(()=>{class s extends y.nH{constructor(t,i,r){super("NotificationService.PriorAuthGuidelineBusinessProviderService",t,r),this.data=i}createPriorAuthGuideline(t){const i=new Pj(t);return i.Do(this),i.response}updatePriorAuthGuideline(t,i){const r=new Mj(t,i);return r.Do(this),r.response}importPriorAuthGuidelines(t){const i=new Wj(t);return i.Do(this),i.response}validatePriorAuthGuidelineExcelData(t,i,r){const l=new Fj(t,i,r);return l.Do(this),l.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(O.ed),e.LFG(E.q),e.LFG(y.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),Ej=(()=>{class s extends y.nH{constructor(t,i,r){super("PriorAuthGuidelineService",r,t),this.businessProvider=i}createPriorAuthGuideline(t){const i=Object.fromEntries(Object.entries(t).filter(([r,l])=>null!==l));return this.businessProvider.createPriorAuthGuideline(i)}updatePriorAuthGuideline(t,i){return this.businessProvider.updatePriorAuthGuideline(t,i)}importPriorAuthGuidelines(t){return this.businessProvider.importPriorAuthGuidelines(t)}validatePriorAuthGuidelineExcelData(t,i,r){return this.businessProvider.validatePriorAuthGuidelineExcelData(t,i,r)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(kd,8),e.LFG(kd),e.LFG(O.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),ko=(()=>{class s extends g.m1{constructor(t,i,r,l,u,P){if(super({loading:!1,priorAuthGuidelines:[],done:!1,searchQuery:"",formName:void 0,guidelineId:void 0,priorAuthorizationRequestId:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=r,this.toast=l,this.formService=u,this.priorAuthGuidelineService=P,this.errors$=this.select(n=>n.errors),this.loading$=this.select(n=>n.loading),this.done$=this.select(n=>n.done),this.item$=this.select(n=>n.item),this.priorAuthGuidelines$=this.select(n=>n.priorAuthGuidelines),this.guidelines$=this.select(n=>n.guidelines||[]),this.priorAuthorizationRequests$=this.select(n=>n.priorAuthorizationRequests||[]),this.guidelineId$=this.select(n=>n.guidelineId),this.priorAuthorizationRequestId$=this.select(n=>n.priorAuthorizationRequestId),this.paging$=this.select(n=>n.paging),this.searchQuery$=this.select(n=>n.searchQuery),this.formName$=this.select(n=>n.formName),this.actionResult$=this.select(this.item$,this.done$,(n,a)=>({item:n,done:a}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.priorAuthGuidelines$,this.guidelines$,this.priorAuthorizationRequests$,(n,a,m,p,_,v,D)=>({errors:n,loading:a,item:m,formName:p,priorAuthGuidelines:_,guidelines:v,priorAuthorizationRequests:D}),{debounce:!0}),this.input$=this.select(this.paging$,this.guidelineId$,this.priorAuthorizationRequestId$,this.searchQuery$,(n,a,m,p)=>({limit:n.limit,skip:n.skip,name:p,guidelineId:a,priorAuthorizationRequestId:m,total:n.total})),this.setFormName=this.updater((n,a)=>Object.assign(Object.assign({},n),{formName:a})),this.setGuidelineId=this.updater((n,a)=>Object.assign(Object.assign({},n),{guidelineId:a})),this.setPriorAuthorizationRequestId=this.updater((n,a)=>Object.assign(Object.assign({},n),{priorAuthorizationRequestId:a})),this.filterGuidelines=n=>this.data.userSelectGuidelines({input:{name:n}}).pipe((0,g._b)(a=>{let m=a.data.items;return this.patchState({guidelines:m}),m},a=>this.patchState({errors:a.graphQLErrors?a.graphQLErrors:a})),(0,B.U)(a=>a.data.items)),this.filterPriorAuthorizationRequests=n=>this.data.userSelectPriorAuthorizationRequests({input:{name:n}}).pipe((0,g._b)(a=>{let m=a.data.items;return this.patchState({priorAuthorizationRequests:m}),m},a=>this.patchState({errors:a.graphQLErrors?a.graphQLErrors:a})),(0,B.U)(a=>a.data.items)),this.addGuideline=this.updater((n,a)=>Object.assign(Object.assign({},n),{guidelines:n.guidelines.concat(a)})),this.addPriorAuthorizationRequest=this.updater((n,a)=>Object.assign(Object.assign({},n),{priorAuthorizationRequests:n.priorAuthorizationRequests.concat(a)})),this.setItem=this.updater((n,a)=>Object.assign(Object.assign({},n),{item:a})),this.addNewPriorAuthGuideline=this.updater((n,a)=>Object.assign(Object.assign({},n),{priorAuthGuidelines:[...n.priorAuthGuidelines,a]})),this.updatePriorAuthGuideline=this.updater((n,a)=>Object.assign(Object.assign({},n),{priorAuthGuidelines:n.priorAuthGuidelines.map(m=>m.id===a.id?a:m)})),this.addPriorAuthGuidelines=this.updater((n,a)=>Object.assign(Object.assign({},n),{priorAuthGuidelines:n.priorAuthGuidelines.concat(a)})),this.updatePriorAuthGuidelines=this.updater((n,a)=>Object.assign(Object.assign({},n),{priorAuthGuidelines:n.priorAuthGuidelines.map(m=>a.find(_=>_.id===m.id)||m)})),this.setSearchQuery=this.updater((n,a)=>Object.assign(Object.assign({},n),{searchQuery:a})),this.loadPriorAuthGuidelineEffect=this.effect(n=>n.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(a=>this.data.userPriorAuthGuideline({priorAuthGuidelineId:a}).pipe((0,g._b)(m=>{this.patchState({item:m.data.item,errors:m.errors,loading:!1})},m=>this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})))))),this.loadPriorAuthGuidelinesEffect=this.effect(n=>n.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.input$),(0,h.w)(([a,m])=>this.data.userPriorAuthGuidelines({input:m}).pipe((0,g._b)(p=>this.patchState({paging:{limit:m.limit,skip:m.skip,total:p.data.count.total},priorAuthGuidelines:p.data.items,errors:p.errors,loading:!1}),p=>this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})))))),this.createPriorAuthGuidelineEffect=this.effect(n=>n.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(a=>this.priorAuthGuidelineService.createPriorAuthGuideline(Object.assign({},a)).pipe((0,g._b)(m=>{this.addNewPriorAuthGuideline(m),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:m,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},m=>{m.graphQLErrors?(this.toast.error(m.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})):(this.toast.error(m.Message),this.formService.setErrors(m.Data))}))))),this.updatePriorAuthGuidelineEffect=this.effect(n=>n.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([a,m])=>this.priorAuthGuidelineService.updatePriorAuthGuideline(a,a.id).pipe((0,g._b)(p=>{this.updatePriorAuthGuideline(p),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:p,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},p=>{p.graphQLErrors?(this.toast.error(p.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})):(this.toast.error(p.Message),this.formService.setErrors(p.Data))}))))),this.deletePriorAuthGuidelineEffect=this.effect(n=>n.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([a,m])=>this.data.userDeletePriorAuthGuideline({priorAuthGuidelineId:m.id}).pipe((0,g._b)(p=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:p.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},p=>{p.graphQLErrors?(this.toast.error(p.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})):(this.toast.error(p.Message),this.formService.setErrors(p.Data))}))))),this.importExcelEffect=this.effect(n=>n.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(a=>this.priorAuthGuidelineService.importPriorAuthGuidelines(a).pipe((0,te.K)(m=>{var p;return this.toast.error(null!==(p=m.Message)&&void 0!==p?p:"Failed to save",{duration:3e3}),k.E}),(0,C.b)(m=>{const p=JSON.parse(m.created),_=JSON.parse(m.updated),v=JSON.parse(m.failed),D=p.length+_.length+v.length;this.addPriorAuthGuidelines(p),this.updatePriorAuthGuidelines(_),this.toast.success(`${p.length} created, ${_.length} updated, ${v.length} failed of total ${D}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("priorAuthGuidelineId")?(this.route.snapshot.paramMap.get("priorAuthGuidelineId"),this.setFormName("priorAuthGuideline_edit")):this.setFormName("priorAuthGuideline_create"),this.route.snapshot.paramMap.has("guidelineId")){var c=this.route.snapshot.paramMap.get("guidelineId");this.setGuidelineId(c)}if(this.route.snapshot.paramMap.has("priorAuthorizationRequestId")){var d=this.route.snapshot.paramMap.get("priorAuthorizationRequestId");this.setPriorAuthorizationRequestId(d)}}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.priorAuthGuidelineService.validatePriorAuthGuidelineExcelData(t,i.guidelines,i.priorAuthorizationRequests)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(E.q),e.LFG(A.F0),e.LFG(A.gz),e.LFG(X.F),e.LFG(q.o),e.LFG(Ej))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function Oj(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close.emit())})("formIsReady",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.priorAuthGuideline)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let Zd=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"priorAuthGuideline_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.priorAuthGuideline=i.item})):t.formName&&t.formName.currentValue&&"priorAuthGuideline_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadPriorAuthGuidelineEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.priorAuthGuideline=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(ko),e.Y36(A.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-prior-auth-guideline-form"]],inputs:{priorAuthGuideline:"priorAuthGuideline",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,Oj,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[w.O5,z.M,w.Ov],encapsulation:2}),s})(),Bd=(()=>{class s{constructor(){this.autoHeight=!1,this.priorAuthGuidelines=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[{field:"guideline.name",headerName:"Guideline",filter:"agTextColumnFilter"},{field:"priorAuthorizationRequest.name",headerName:"Prior Authorization Request",filter:"agTextColumnFilter"},{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{field:"guidelineId",filter:"agTextColumnFilter",hide:!0},{field:"priorAuthorizationRequestId",filter:"agTextColumnFilter",hide:!0}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var r;t.includes(null===(r=i.data)||void 0===r?void 0:r.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-prior-auth-guideline-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(N.x,5),2&t){let r;e.iGM(r=e.CRH())&&(i.tableView=r.first)}},inputs:{autoHeight:"autoHeight",priorAuthGuidelines:"priorAuthGuidelines"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.priorAuthGuidelines)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[N.x],encapsulation:2}),s})();function Lj(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-prior-auth-guideline-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","priorAuthGuideline_edit")("formControl",t.formControl)("priorAuthGuideline",t.priorAuthGuideline)}}const Gj=function(){return{}};function $j(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-prior-auth-guideline-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","priorAuthGuideline_create")("formControl",t.formControl)("priorAuthGuideline",e.DdM(3,Gj))}}function Rj(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-prior-auth-guideline-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(u.ref.close())}),e.qZA()}2&s&&e.Q6J("priorAuthGuidelines",o.data.items)}let Vj=(()=>{class s extends I.fS{constructor(t){super(),this.store=t,this.store.loadPriorAuthGuidelinesEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.priorAuthGuidelines$.pipe((0,h.w)(i=>(0,T.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(ko))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","priorAuthGuideline","send","close"],[1,"w-full","h-full","bg-white",3,"priorAuthGuidelines","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,Lj,2,3,"ng-template",null,1,e.W1O),e.YNc(3,$j,1,4,"ng-template",null,2,e.W1O),e.YNc(5,Rj,1,1,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",u)("editTemplate",r)("createTemplate",l)("key",i.field.key)}},dependencies:[x.JJ,x.oH,J.$,Zd,Bd],encapsulation:2}),s})();function Qj(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-prior-auth-guideline-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","priorAuthGuideline_edit")("priorAuthGuideline",t.value)}}const Uj=function(){return{}};function Jj(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-prior-auth-guideline-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","priorAuthGuideline_create")("priorAuthGuideline",e.DdM(2,Uj))}function jj(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-prior-auth-guideline-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(null==u.ref?null:u.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("priorAuthGuidelines",t.items)}}let zj=(()=>{class s extends Y{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","priorAuthGuideline","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","priorAuthGuidelines","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,Qj,1,2,"ng-template",null,1,e.W1O),e.YNc(3,Jj,1,3,"ng-template",null,2,e.W1O),e.YNc(5,jj,1,2,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[ee,Zd,Bd],encapsulation:2}),s})(),qj=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[ko],imports:[w.ez,R.F,x.UX,V.o,H.u,Q.P,U.t,Z,j.h,K.G,I.X0.forChild({types:[{name:"prior-auth-guideline-select",component:Vj,wrappers:["form-field"]},{name:"prior-auth-guideline-grid",component:zj}]})]}),s})(),Hj=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[qj]}),s})();class Fi extends y.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class Kj extends Fi{constructor(o,t,i){super("ValidatePriorAuthorizationDiagnosisCodeExcelDataAction"),this.valid=!1,this.excelData=o,this.diagnoses=t,this.priorAuthorizationRequests=i}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name),this.validationContext.addRule(new f.mi(`diagnosisName_${i}_is_valid}`,"Diagnosis Is Not Valid","diagnosis.name",t.diagnosis,this.diagnoses,!0)),this.validationContext.addRule(new f.mi(`priorAuthorizationRequestName_${i}_is_valid}`,"Prior Authorization Request Is Not Valid","priorAuthorizationRequest.name",t.priorAuthorizationRequest,this.priorAuthorizationRequests,!0))}),this.validationContext.addRule(new f.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof f.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(r=>r.name),newNames:[i.newName]}):i instanceof f.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,T.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class kj extends f.wS{constructor(o,t,i,r,l){super(o,t,i,r,l,!0)}}class Zj extends f.ul{constructor(o,t,i,r=!1){super(o,t,r),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new f.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new kj("name","The priorauthorizationdiagnosiscode name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class Bj extends Fi{constructor(o){super("CreatePriorAuthorizationDiagnosisCodeAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new Zj("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreatePriorAuthorizationDiagnosisCode({input:this.input}).pipe((0,h.w)(o=>(0,ie.of)(o.data.created)))}}class Yj extends Fi{constructor(o){super("UpdatePriorAuthorizationDiagnosisCodesAction"),this.priorAuthorizationDiagnosisCodes=o}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.priorAuthorizationDiagnosisCodes,!0))}performAction(){this.response=this.businessProvider.data.userUpdatePriorAuthorizationDiagnosisCodes({input:{priorAuthorizationDiagnosisCodes:this.priorAuthorizationDiagnosisCodes}}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}class Xj extends Fi{constructor(o,t){super("UpdatePriorAuthorizationDiagnosisCodeAction"),this.priorAuthorizationDiagnosisCode=o,this.priorAuthorizationDiagnosisCodeId=t}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.priorAuthorizationDiagnosisCode,!0)).addRule(new f.xF("Id","Id should be a CUID and not null",this.priorAuthorizationDiagnosisCodeId,!0))}performAction(){this.response=this.businessProvider.data.userUpdatePriorAuthorizationDiagnosisCode({priorAuthorizationDiagnosisCodeId:this.priorAuthorizationDiagnosisCodeId,input:this.priorAuthorizationDiagnosisCode}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}let Yd=(()=>{class s extends y.nH{constructor(t,i,r){super("NotificationService.PriorAuthorizationDiagnosisCodeBusinessProviderService",t,r),this.data=i}createPriorAuthorizationDiagnosisCode(t){const i=new Bj(t);return i.Do(this),i.response}updatePriorAuthorizationDiagnosisCode(t,i){const r=new Xj(t,i);return r.Do(this),r.response}importPriorAuthorizationDiagnosisCodes(t){const i=new Yj(t);return i.Do(this),i.response}validatePriorAuthorizationDiagnosisCodeExcelData(t,i,r){const l=new Kj(t,i,r);return l.Do(this),l.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(O.ed),e.LFG(E.q),e.LFG(y.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),e6=(()=>{class s extends y.nH{constructor(t,i,r){super("PriorAuthorizationDiagnosisCodeService",r,t),this.businessProvider=i}createPriorAuthorizationDiagnosisCode(t){const i=Object.fromEntries(Object.entries(t).filter(([r,l])=>null!==l));return this.businessProvider.createPriorAuthorizationDiagnosisCode(i)}updatePriorAuthorizationDiagnosisCode(t,i){return this.businessProvider.updatePriorAuthorizationDiagnosisCode(t,i)}importPriorAuthorizationDiagnosisCodes(t){return this.businessProvider.importPriorAuthorizationDiagnosisCodes(t)}validatePriorAuthorizationDiagnosisCodeExcelData(t,i,r){return this.businessProvider.validatePriorAuthorizationDiagnosisCodeExcelData(t,i,r)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(Yd,8),e.LFG(Yd),e.LFG(O.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),Zo=(()=>{class s extends g.m1{constructor(t,i,r,l,u,P){if(super({loading:!1,priorAuthorizationDiagnosisCodes:[],done:!1,searchQuery:"",formName:void 0,diagnosisCodeId:void 0,priorAuthorizationRequestId:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=r,this.toast=l,this.formService=u,this.priorAuthorizationDiagnosisCodeService=P,this.errors$=this.select(n=>n.errors),this.loading$=this.select(n=>n.loading),this.done$=this.select(n=>n.done),this.item$=this.select(n=>n.item),this.priorAuthorizationDiagnosisCodes$=this.select(n=>n.priorAuthorizationDiagnosisCodes),this.diagnosisCodes$=this.select(n=>n.diagnosisCodes||[]),this.priorAuthorizationRequests$=this.select(n=>n.priorAuthorizationRequests||[]),this.diagnosisCodeId$=this.select(n=>n.diagnosisCodeId),this.priorAuthorizationRequestId$=this.select(n=>n.priorAuthorizationRequestId),this.paging$=this.select(n=>n.paging),this.searchQuery$=this.select(n=>n.searchQuery),this.formName$=this.select(n=>n.formName),this.actionResult$=this.select(this.item$,this.done$,(n,a)=>({item:n,done:a}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.priorAuthorizationDiagnosisCodes$,this.diagnosisCodes$,this.priorAuthorizationRequests$,(n,a,m,p,_,v,D)=>({errors:n,loading:a,item:m,formName:p,priorAuthorizationDiagnosisCodes:_,diagnosisCodes:v,priorAuthorizationRequests:D}),{debounce:!0}),this.input$=this.select(this.paging$,this.diagnosisCodeId$,this.priorAuthorizationRequestId$,this.searchQuery$,(n,a,m,p)=>({limit:n.limit,skip:n.skip,name:p,diagnosisCodeId:a,priorAuthorizationRequestId:m,total:n.total})),this.setFormName=this.updater((n,a)=>Object.assign(Object.assign({},n),{formName:a})),this.setDiagnosisCodeId=this.updater((n,a)=>Object.assign(Object.assign({},n),{diagnosisCodeId:a})),this.setPriorAuthorizationRequestId=this.updater((n,a)=>Object.assign(Object.assign({},n),{priorAuthorizationRequestId:a})),this.filterDiagnosisCodes=n=>this.data.userSelectDiagnosisCodes({input:{name:n}}).pipe((0,g._b)(a=>{let m=a.data.items;return this.patchState({diagnosisCodes:m}),m},a=>this.patchState({errors:a.graphQLErrors?a.graphQLErrors:a})),(0,B.U)(a=>a.data.items)),this.filterPriorAuthorizationRequests=n=>this.data.userSelectPriorAuthorizationRequests({input:{name:n}}).pipe((0,g._b)(a=>{let m=a.data.items;return this.patchState({priorAuthorizationRequests:m}),m},a=>this.patchState({errors:a.graphQLErrors?a.graphQLErrors:a})),(0,B.U)(a=>a.data.items)),this.addDiagnosisCode=this.updater((n,a)=>Object.assign(Object.assign({},n),{diagnosisCodes:n.diagnosisCodes.concat(a)})),this.addPriorAuthorizationRequest=this.updater((n,a)=>Object.assign(Object.assign({},n),{priorAuthorizationRequests:n.priorAuthorizationRequests.concat(a)})),this.setItem=this.updater((n,a)=>Object.assign(Object.assign({},n),{item:a})),this.addNewPriorAuthorizationDiagnosisCode=this.updater((n,a)=>Object.assign(Object.assign({},n),{priorAuthorizationDiagnosisCodes:[...n.priorAuthorizationDiagnosisCodes,a]})),this.updatePriorAuthorizationDiagnosisCode=this.updater((n,a)=>Object.assign(Object.assign({},n),{priorAuthorizationDiagnosisCodes:n.priorAuthorizationDiagnosisCodes.map(m=>m.id===a.id?a:m)})),this.addPriorAuthorizationDiagnosisCodes=this.updater((n,a)=>Object.assign(Object.assign({},n),{priorAuthorizationDiagnosisCodes:n.priorAuthorizationDiagnosisCodes.concat(a)})),this.updatePriorAuthorizationDiagnosisCodes=this.updater((n,a)=>Object.assign(Object.assign({},n),{priorAuthorizationDiagnosisCodes:n.priorAuthorizationDiagnosisCodes.map(m=>a.find(_=>_.id===m.id)||m)})),this.setSearchQuery=this.updater((n,a)=>Object.assign(Object.assign({},n),{searchQuery:a})),this.loadPriorAuthorizationDiagnosisCodeEffect=this.effect(n=>n.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(a=>this.data.userPriorAuthorizationDiagnosisCode({priorAuthorizationDiagnosisCodeId:a}).pipe((0,g._b)(m=>{this.patchState({item:m.data.item,errors:m.errors,loading:!1})},m=>this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})))))),this.loadPriorAuthorizationDiagnosisCodesEffect=this.effect(n=>n.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.input$),(0,h.w)(([a,m])=>this.data.userPriorAuthorizationDiagnosisCodes({input:m}).pipe((0,g._b)(p=>this.patchState({paging:{limit:m.limit,skip:m.skip,total:p.data.count.total},priorAuthorizationDiagnosisCodes:p.data.items,errors:p.errors,loading:!1}),p=>this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})))))),this.createPriorAuthorizationDiagnosisCodeEffect=this.effect(n=>n.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(a=>this.priorAuthorizationDiagnosisCodeService.createPriorAuthorizationDiagnosisCode(Object.assign({},a)).pipe((0,g._b)(m=>{this.addNewPriorAuthorizationDiagnosisCode(m),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:m,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},m=>{m.graphQLErrors?(this.toast.error(m.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})):(this.toast.error(m.Message),this.formService.setErrors(m.Data))}))))),this.updatePriorAuthorizationDiagnosisCodeEffect=this.effect(n=>n.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([a,m])=>this.priorAuthorizationDiagnosisCodeService.updatePriorAuthorizationDiagnosisCode(a,a.id).pipe((0,g._b)(p=>{this.updatePriorAuthorizationDiagnosisCode(p),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:p,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},p=>{p.graphQLErrors?(this.toast.error(p.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})):(this.toast.error(p.Message),this.formService.setErrors(p.Data))}))))),this.deletePriorAuthorizationDiagnosisCodeEffect=this.effect(n=>n.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([a,m])=>this.data.userDeletePriorAuthorizationDiagnosisCode({priorAuthorizationDiagnosisCodeId:m.id}).pipe((0,g._b)(p=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:p.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},p=>{p.graphQLErrors?(this.toast.error(p.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})):(this.toast.error(p.Message),this.formService.setErrors(p.Data))}))))),this.importExcelEffect=this.effect(n=>n.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(a=>this.priorAuthorizationDiagnosisCodeService.importPriorAuthorizationDiagnosisCodes(a).pipe((0,te.K)(m=>{var p;return this.toast.error(null!==(p=m.Message)&&void 0!==p?p:"Failed to save",{duration:3e3}),k.E}),(0,C.b)(m=>{const p=JSON.parse(m.created),_=JSON.parse(m.updated),v=JSON.parse(m.failed),D=p.length+_.length+v.length;this.addPriorAuthorizationDiagnosisCodes(p),this.updatePriorAuthorizationDiagnosisCodes(_),this.toast.success(`${p.length} created, ${_.length} updated, ${v.length} failed of total ${D}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("priorAuthorizationDiagnosisCodeId")?(this.route.snapshot.paramMap.get("priorAuthorizationDiagnosisCodeId"),this.setFormName("priorAuthorizationDiagnosisCode_edit")):this.setFormName("priorAuthorizationDiagnosisCode_create"),this.route.snapshot.paramMap.has("diagnosisCodeId")){var c=this.route.snapshot.paramMap.get("diagnosisCodeId");this.setDiagnosisCodeId(c)}if(this.route.snapshot.paramMap.has("priorAuthorizationRequestId")){var d=this.route.snapshot.paramMap.get("priorAuthorizationRequestId");this.setPriorAuthorizationRequestId(d)}}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.priorAuthorizationDiagnosisCodeService.validatePriorAuthorizationDiagnosisCodeExcelData(t,i.diagnosisCodes,i.priorAuthorizationRequests)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(E.q),e.LFG(A.F0),e.LFG(A.gz),e.LFG(X.F),e.LFG(q.o),e.LFG(e6))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function t6(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close.emit())})("formIsReady",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.priorAuthorizationDiagnosisCode)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let Xd=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"priorAuthorizationDiagnosisCode_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.priorAuthorizationDiagnosisCode=i.item})):t.formName&&t.formName.currentValue&&"priorAuthorizationDiagnosisCode_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadPriorAuthorizationDiagnosisCodeEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.priorAuthorizationDiagnosisCode=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Zo),e.Y36(A.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-prior-authorization-diagnosis-code-form"]],inputs:{priorAuthorizationDiagnosisCode:"priorAuthorizationDiagnosisCode",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,t6,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[w.O5,z.M,w.Ov],encapsulation:2}),s})(),eu=(()=>{class s{constructor(){this.autoHeight=!1,this.priorAuthorizationDiagnosisCodes=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[{field:"diagnosis.name",headerName:"Diagnosis",filter:"agTextColumnFilter"},{field:"priorAuthorizationRequest.name",headerName:"Prior Authorization Request",filter:"agTextColumnFilter"},{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{field:"diagnosisCodeId",filter:"agTextColumnFilter",hide:!0},{field:"priorAuthorizationRequestId",filter:"agTextColumnFilter",hide:!0}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var r;t.includes(null===(r=i.data)||void 0===r?void 0:r.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-prior-authorization-diagnosis-code-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(N.x,5),2&t){let r;e.iGM(r=e.CRH())&&(i.tableView=r.first)}},inputs:{autoHeight:"autoHeight",priorAuthorizationDiagnosisCodes:"priorAuthorizationDiagnosisCodes"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.priorAuthorizationDiagnosisCodes)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[N.x],encapsulation:2}),s})();function i6(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-prior-authorization-diagnosis-code-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","priorAuthorizationDiagnosisCode_edit")("formControl",t.formControl)("priorAuthorizationDiagnosisCode",t.priorAuthorizationDiagnosisCode)}}const s6=function(){return{}};function o6(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-prior-authorization-diagnosis-code-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","priorAuthorizationDiagnosisCode_create")("formControl",t.formControl)("priorAuthorizationDiagnosisCode",e.DdM(3,s6))}}function r6(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-prior-authorization-diagnosis-code-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(u.ref.close())}),e.qZA()}2&s&&e.Q6J("priorAuthorizationDiagnosisCodes",o.data.items)}let a6=(()=>{class s extends I.fS{constructor(t){super(),this.store=t,this.store.loadPriorAuthorizationDiagnosisCodesEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.priorAuthorizationDiagnosisCodes$.pipe((0,h.w)(i=>(0,T.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Zo))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","priorAuthorizationDiagnosisCode","send","close"],[1,"w-full","h-full","bg-white",3,"priorAuthorizationDiagnosisCodes","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,i6,2,3,"ng-template",null,1,e.W1O),e.YNc(3,o6,1,4,"ng-template",null,2,e.W1O),e.YNc(5,r6,1,1,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",u)("editTemplate",r)("createTemplate",l)("key",i.field.key)}},dependencies:[x.JJ,x.oH,J.$,Xd,eu],encapsulation:2}),s})();function n6(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-prior-authorization-diagnosis-code-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","priorAuthorizationDiagnosisCode_edit")("priorAuthorizationDiagnosisCode",t.value)}}const l6=function(){return{}};function c6(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-prior-authorization-diagnosis-code-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","priorAuthorizationDiagnosisCode_create")("priorAuthorizationDiagnosisCode",e.DdM(2,l6))}function d6(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-prior-authorization-diagnosis-code-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(null==u.ref?null:u.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("priorAuthorizationDiagnosisCodes",t.items)}}let u6=(()=>{class s extends Y{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","priorAuthorizationDiagnosisCode","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","priorAuthorizationDiagnosisCodes","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,n6,1,2,"ng-template",null,1,e.W1O),e.YNc(3,c6,1,3,"ng-template",null,2,e.W1O),e.YNc(5,d6,1,2,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[ee,Xd,eu],encapsulation:2}),s})(),m6=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[Zo],imports:[w.ez,R.F,x.UX,V.o,H.u,Q.P,U.t,Z,j.h,K.G,I.X0.forChild({types:[{name:"prior-authorization-diagnosis-code-select",component:a6,wrappers:["form-field"]},{name:"prior-authorization-diagnosis-code-grid",component:u6}]})]}),s})(),p6=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[m6]}),s})();class Di extends y.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class h6 extends Di{constructor(o,t,i){super("ValidatePriorAuthorizationEquipmentExcelDataAction"),this.valid=!1,this.excelData=o,this.equipment=t,this.priorAuthorizationRequests=i}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name),this.validationContext.addRule(new f.mi(`equipmentName_${i}_is_valid}`,"Equipment Is Not Valid","equipment.name",t.equipment,this.equipment,!0)),this.validationContext.addRule(new f.mi(`priorAuthorizationRequestName_${i}_is_valid}`,"Prior Authorization Request Is Not Valid","priorAuthorizationRequest.name",t.priorAuthorizationRequest,this.priorAuthorizationRequests,!0))}),this.validationContext.addRule(new f.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof f.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(r=>r.name),newNames:[i.newName]}):i instanceof f.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,T.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class f6 extends f.wS{constructor(o,t,i,r,l){super(o,t,i,r,l,!0)}}class _6 extends f.ul{constructor(o,t,i,r=!1){super(o,t,r),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new f.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new f6("name","The priorauthorizationequipment name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class g6 extends Di{constructor(o){super("CreatePriorAuthorizationEquipmentAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new _6("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreatePriorAuthorizationEquipment({input:this.input}).pipe((0,h.w)(o=>(0,ie.of)(o.data.created)))}}class C6 extends Di{constructor(o){super("UpdatePriorAuthorizationEquipmentsAction"),this.priorAuthorizationEquipments=o}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.priorAuthorizationEquipments,!0))}performAction(){this.response=this.businessProvider.data.userUpdatePriorAuthorizationEquipments({input:{priorAuthorizationEquipments:this.priorAuthorizationEquipments}}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}class S6 extends Di{constructor(o,t){super("UpdatePriorAuthorizationEquipmentAction"),this.priorAuthorizationEquipment=o,this.priorAuthorizationEquipmentId=t}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.priorAuthorizationEquipment,!0)).addRule(new f.xF("Id","Id should be a CUID and not null",this.priorAuthorizationEquipmentId,!0))}performAction(){this.response=this.businessProvider.data.userUpdatePriorAuthorizationEquipment({priorAuthorizationEquipmentId:this.priorAuthorizationEquipmentId,input:this.priorAuthorizationEquipment}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}let tu=(()=>{class s extends y.nH{constructor(t,i,r){super("NotificationService.PriorAuthorizationEquipmentBusinessProviderService",t,r),this.data=i}createPriorAuthorizationEquipment(t){const i=new g6(t);return i.Do(this),i.response}updatePriorAuthorizationEquipment(t,i){const r=new S6(t,i);return r.Do(this),r.response}importPriorAuthorizationEquipments(t){const i=new C6(t);return i.Do(this),i.response}validatePriorAuthorizationEquipmentExcelData(t,i,r){const l=new h6(t,i,r);return l.Do(this),l.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(O.ed),e.LFG(E.q),e.LFG(y.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),v6=(()=>{class s extends y.nH{constructor(t,i,r){super("PriorAuthorizationEquipmentService",r,t),this.businessProvider=i}createPriorAuthorizationEquipment(t){const i=Object.fromEntries(Object.entries(t).filter(([r,l])=>null!==l));return this.businessProvider.createPriorAuthorizationEquipment(i)}updatePriorAuthorizationEquipment(t,i){return this.businessProvider.updatePriorAuthorizationEquipment(t,i)}importPriorAuthorizationEquipments(t){return this.businessProvider.importPriorAuthorizationEquipments(t)}validatePriorAuthorizationEquipmentExcelData(t,i,r){return this.businessProvider.validatePriorAuthorizationEquipmentExcelData(t,i,r)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(tu,8),e.LFG(tu),e.LFG(O.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),Bo=(()=>{class s extends g.m1{constructor(t,i,r,l,u,P){if(super({loading:!1,priorAuthorizationEquipments:[],done:!1,searchQuery:"",formName:void 0,equipmentId:void 0,priorAuthorizationRequestId:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=r,this.toast=l,this.formService=u,this.priorAuthorizationEquipmentService=P,this.errors$=this.select(n=>n.errors),this.loading$=this.select(n=>n.loading),this.done$=this.select(n=>n.done),this.item$=this.select(n=>n.item),this.priorAuthorizationEquipments$=this.select(n=>n.priorAuthorizationEquipments),this.equipments$=this.select(n=>n.equipments||[]),this.priorAuthorizationRequests$=this.select(n=>n.priorAuthorizationRequests||[]),this.equipmentId$=this.select(n=>n.equipmentId),this.priorAuthorizationRequestId$=this.select(n=>n.priorAuthorizationRequestId),this.paging$=this.select(n=>n.paging),this.searchQuery$=this.select(n=>n.searchQuery),this.formName$=this.select(n=>n.formName),this.actionResult$=this.select(this.item$,this.done$,(n,a)=>({item:n,done:a}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.priorAuthorizationEquipments$,this.equipments$,this.priorAuthorizationRequests$,(n,a,m,p,_,v,D)=>({errors:n,loading:a,item:m,formName:p,priorAuthorizationEquipments:_,equipments:v,priorAuthorizationRequests:D}),{debounce:!0}),this.input$=this.select(this.paging$,this.equipmentId$,this.priorAuthorizationRequestId$,this.searchQuery$,(n,a,m,p)=>({limit:n.limit,skip:n.skip,name:p,equipmentId:a,priorAuthorizationRequestId:m,total:n.total})),this.setFormName=this.updater((n,a)=>Object.assign(Object.assign({},n),{formName:a})),this.setEquipmentId=this.updater((n,a)=>Object.assign(Object.assign({},n),{equipmentId:a})),this.setPriorAuthorizationRequestId=this.updater((n,a)=>Object.assign(Object.assign({},n),{priorAuthorizationRequestId:a})),this.filterEquipments=n=>this.data.userSelectEquipments({input:{name:n}}).pipe((0,g._b)(a=>{let m=a.data.items;return this.patchState({equipments:m}),m},a=>this.patchState({errors:a.graphQLErrors?a.graphQLErrors:a})),(0,B.U)(a=>a.data.items)),this.filterPriorAuthorizationRequests=n=>this.data.userSelectPriorAuthorizationRequests({input:{name:n}}).pipe((0,g._b)(a=>{let m=a.data.items;return this.patchState({priorAuthorizationRequests:m}),m},a=>this.patchState({errors:a.graphQLErrors?a.graphQLErrors:a})),(0,B.U)(a=>a.data.items)),this.addEquipment=this.updater((n,a)=>Object.assign(Object.assign({},n),{equipments:n.equipments.concat(a)})),this.addPriorAuthorizationRequest=this.updater((n,a)=>Object.assign(Object.assign({},n),{priorAuthorizationRequests:n.priorAuthorizationRequests.concat(a)})),this.setItem=this.updater((n,a)=>Object.assign(Object.assign({},n),{item:a})),this.addNewPriorAuthorizationEquipment=this.updater((n,a)=>Object.assign(Object.assign({},n),{priorAuthorizationEquipments:[...n.priorAuthorizationEquipments,a]})),this.updatePriorAuthorizationEquipment=this.updater((n,a)=>Object.assign(Object.assign({},n),{priorAuthorizationEquipments:n.priorAuthorizationEquipments.map(m=>m.id===a.id?a:m)})),this.addPriorAuthorizationEquipments=this.updater((n,a)=>Object.assign(Object.assign({},n),{priorAuthorizationEquipments:n.priorAuthorizationEquipments.concat(a)})),this.updatePriorAuthorizationEquipments=this.updater((n,a)=>Object.assign(Object.assign({},n),{priorAuthorizationEquipments:n.priorAuthorizationEquipments.map(m=>a.find(_=>_.id===m.id)||m)})),this.setSearchQuery=this.updater((n,a)=>Object.assign(Object.assign({},n),{searchQuery:a})),this.loadPriorAuthorizationEquipmentEffect=this.effect(n=>n.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(a=>this.data.userPriorAuthorizationEquipment({priorAuthorizationEquipmentId:a}).pipe((0,g._b)(m=>{this.patchState({item:m.data.item,errors:m.errors,loading:!1})},m=>this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})))))),this.loadPriorAuthorizationEquipmentsEffect=this.effect(n=>n.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.input$),(0,h.w)(([a,m])=>this.data.userPriorAuthorizationEquipments({input:m}).pipe((0,g._b)(p=>this.patchState({paging:{limit:m.limit,skip:m.skip,total:p.data.count.total},priorAuthorizationEquipments:p.data.items,errors:p.errors,loading:!1}),p=>this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})))))),this.createPriorAuthorizationEquipmentEffect=this.effect(n=>n.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(a=>this.priorAuthorizationEquipmentService.createPriorAuthorizationEquipment(Object.assign({},a)).pipe((0,g._b)(m=>{this.addNewPriorAuthorizationEquipment(m),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:m,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},m=>{m.graphQLErrors?(this.toast.error(m.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})):(this.toast.error(m.Message),this.formService.setErrors(m.Data))}))))),this.updatePriorAuthorizationEquipmentEffect=this.effect(n=>n.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([a,m])=>this.priorAuthorizationEquipmentService.updatePriorAuthorizationEquipment(a,a.id).pipe((0,g._b)(p=>{this.updatePriorAuthorizationEquipment(p),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:p,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},p=>{p.graphQLErrors?(this.toast.error(p.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})):(this.toast.error(p.Message),this.formService.setErrors(p.Data))}))))),this.deletePriorAuthorizationEquipmentEffect=this.effect(n=>n.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([a,m])=>this.data.userDeletePriorAuthorizationEquipment({priorAuthorizationEquipmentId:m.id}).pipe((0,g._b)(p=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:p.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},p=>{p.graphQLErrors?(this.toast.error(p.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})):(this.toast.error(p.Message),this.formService.setErrors(p.Data))}))))),this.importExcelEffect=this.effect(n=>n.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(a=>this.priorAuthorizationEquipmentService.importPriorAuthorizationEquipments(a).pipe((0,te.K)(m=>{var p;return this.toast.error(null!==(p=m.Message)&&void 0!==p?p:"Failed to save",{duration:3e3}),k.E}),(0,C.b)(m=>{const p=JSON.parse(m.created),_=JSON.parse(m.updated),v=JSON.parse(m.failed),D=p.length+_.length+v.length;this.addPriorAuthorizationEquipments(p),this.updatePriorAuthorizationEquipments(_),this.toast.success(`${p.length} created, ${_.length} updated, ${v.length} failed of total ${D}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("priorAuthorizationEquipmentId")?(this.route.snapshot.paramMap.get("priorAuthorizationEquipmentId"),this.setFormName("priorAuthorizationEquipment_edit")):this.setFormName("priorAuthorizationEquipment_create"),this.route.snapshot.paramMap.has("equipmentId")){var c=this.route.snapshot.paramMap.get("equipmentId");this.setEquipmentId(c)}if(this.route.snapshot.paramMap.has("priorAuthorizationRequestId")){var d=this.route.snapshot.paramMap.get("priorAuthorizationRequestId");this.setPriorAuthorizationRequestId(d)}}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.priorAuthorizationEquipmentService.validatePriorAuthorizationEquipmentExcelData(t,i.equipments,i.priorAuthorizationRequests)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(E.q),e.LFG(A.F0),e.LFG(A.gz),e.LFG(X.F),e.LFG(q.o),e.LFG(v6))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function b6(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close.emit())})("formIsReady",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.priorAuthorizationEquipment)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let iu=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"priorAuthorizationEquipment_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.priorAuthorizationEquipment=i.item})):t.formName&&t.formName.currentValue&&"priorAuthorizationEquipment_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadPriorAuthorizationEquipmentEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.priorAuthorizationEquipment=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Bo),e.Y36(A.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-prior-authorization-equipment-form"]],inputs:{priorAuthorizationEquipment:"priorAuthorizationEquipment",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,b6,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[w.O5,z.M,w.Ov],encapsulation:2}),s})(),su=(()=>{class s{constructor(){this.autoHeight=!1,this.priorAuthorizationEquipments=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[{field:"equipment.name",headerName:"Equipment",filter:"agTextColumnFilter"},{field:"priorAuthorizationRequest.name",headerName:"Prior Authorization Request",filter:"agTextColumnFilter"},{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{headerName:"Estimated Cost",field:"estimatedCost",valueFormatter:t=>{var i;return(0,S.oBD)(null===(i=t.data)||void 0===i?void 0:i.estimatedCost,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{field:"equipmentId",filter:"agTextColumnFilter",hide:!0},{field:"priorAuthorizationRequestId",filter:"agTextColumnFilter",hide:!0}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var r;t.includes(null===(r=i.data)||void 0===r?void 0:r.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-prior-authorization-equipment-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(N.x,5),2&t){let r;e.iGM(r=e.CRH())&&(i.tableView=r.first)}},inputs:{autoHeight:"autoHeight",priorAuthorizationEquipments:"priorAuthorizationEquipments"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.priorAuthorizationEquipments)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[N.x],encapsulation:2}),s})();function T6(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-prior-authorization-equipment-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","priorAuthorizationEquipment_edit")("formControl",t.formControl)("priorAuthorizationEquipment",t.priorAuthorizationEquipment)}}const y6=function(){return{}};function w6(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-prior-authorization-equipment-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","priorAuthorizationEquipment_create")("formControl",t.formControl)("priorAuthorizationEquipment",e.DdM(3,y6))}}function x6(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-prior-authorization-equipment-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(u.ref.close())}),e.qZA()}2&s&&e.Q6J("priorAuthorizationEquipments",o.data.items)}let N6=(()=>{class s extends I.fS{constructor(t){super(),this.store=t,this.store.loadPriorAuthorizationEquipmentsEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.priorAuthorizationEquipments$.pipe((0,h.w)(i=>(0,T.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Bo))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","priorAuthorizationEquipment","send","close"],[1,"w-full","h-full","bg-white",3,"priorAuthorizationEquipments","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,T6,2,3,"ng-template",null,1,e.W1O),e.YNc(3,w6,1,4,"ng-template",null,2,e.W1O),e.YNc(5,x6,1,1,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",u)("editTemplate",r)("createTemplate",l)("key",i.field.key)}},dependencies:[x.JJ,x.oH,J.$,iu,su],encapsulation:2}),s})();function A6(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-prior-authorization-equipment-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","priorAuthorizationEquipment_edit")("priorAuthorizationEquipment",t.value)}}const F6=function(){return{}};function D6(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-prior-authorization-equipment-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","priorAuthorizationEquipment_create")("priorAuthorizationEquipment",e.DdM(2,F6))}function I6(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-prior-authorization-equipment-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(null==u.ref?null:u.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("priorAuthorizationEquipments",t.items)}}let P6=(()=>{class s extends Y{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","priorAuthorizationEquipment","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","priorAuthorizationEquipments","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,A6,1,2,"ng-template",null,1,e.W1O),e.YNc(3,D6,1,3,"ng-template",null,2,e.W1O),e.YNc(5,I6,1,2,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[ee,iu,su],encapsulation:2}),s})(),W6=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[Bo],imports:[w.ez,R.F,x.UX,V.o,H.u,Q.P,U.t,Z,j.h,K.G,I.X0.forChild({types:[{name:"prior-authorization-equipment-select",component:N6,wrappers:["form-field"]},{name:"prior-authorization-equipment-grid",component:P6}]})]}),s})(),M6=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[W6]}),s})();class Ii extends y.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class E6 extends Ii{constructor(o,t,i){super("ValidatePriorAuthorizationImplantExcelDataAction"),this.valid=!1,this.excelData=o,this.implants=t,this.priorAuthorizationRequests=i}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name),this.validationContext.addRule(new f.mi(`implantName_${i}_is_valid}`,"Implant Is Not Valid","implant.name",t.implant,this.implants,!0)),this.validationContext.addRule(new f.mi(`priorAuthorizationRequestName_${i}_is_valid}`,"Prior Authorization Request Is Not Valid","priorAuthorizationRequest.name",t.priorAuthorizationRequest,this.priorAuthorizationRequests,!0))}),this.validationContext.addRule(new f.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof f.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(r=>r.name),newNames:[i.newName]}):i instanceof f.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,T.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class O6 extends f.wS{constructor(o,t,i,r,l){super(o,t,i,r,l,!0)}}class L6 extends f.ul{constructor(o,t,i,r=!1){super(o,t,r),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new f.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new O6("name","The priorauthorizationimplant name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class G6 extends Ii{constructor(o){super("CreatePriorAuthorizationImplantAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new L6("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreatePriorAuthorizationImplant({input:this.input}).pipe((0,h.w)(o=>(0,ie.of)(o.data.created)))}}class $6 extends Ii{constructor(o){super("UpdatePriorAuthorizationImplantsAction"),this.priorAuthorizationImplants=o}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.priorAuthorizationImplants,!0))}performAction(){this.response=this.businessProvider.data.userUpdatePriorAuthorizationImplants({input:{priorAuthorizationImplants:this.priorAuthorizationImplants}}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}class R6 extends Ii{constructor(o,t){super("UpdatePriorAuthorizationImplantAction"),this.priorAuthorizationImplant=o,this.priorAuthorizationImplantId=t}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.priorAuthorizationImplant,!0)).addRule(new f.xF("Id","Id should be a CUID and not null",this.priorAuthorizationImplantId,!0))}performAction(){this.response=this.businessProvider.data.userUpdatePriorAuthorizationImplant({priorAuthorizationImplantId:this.priorAuthorizationImplantId,input:this.priorAuthorizationImplant}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}let ou=(()=>{class s extends y.nH{constructor(t,i,r){super("NotificationService.PriorAuthorizationImplantBusinessProviderService",t,r),this.data=i}createPriorAuthorizationImplant(t){const i=new G6(t);return i.Do(this),i.response}updatePriorAuthorizationImplant(t,i){const r=new R6(t,i);return r.Do(this),r.response}importPriorAuthorizationImplants(t){const i=new $6(t);return i.Do(this),i.response}validatePriorAuthorizationImplantExcelData(t,i,r){const l=new E6(t,i,r);return l.Do(this),l.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(O.ed),e.LFG(E.q),e.LFG(y.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),V6=(()=>{class s extends y.nH{constructor(t,i,r){super("PriorAuthorizationImplantService",r,t),this.businessProvider=i}createPriorAuthorizationImplant(t){const i=Object.fromEntries(Object.entries(t).filter(([r,l])=>null!==l));return this.businessProvider.createPriorAuthorizationImplant(i)}updatePriorAuthorizationImplant(t,i){return this.businessProvider.updatePriorAuthorizationImplant(t,i)}importPriorAuthorizationImplants(t){return this.businessProvider.importPriorAuthorizationImplants(t)}validatePriorAuthorizationImplantExcelData(t,i,r){return this.businessProvider.validatePriorAuthorizationImplantExcelData(t,i,r)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(ou,8),e.LFG(ou),e.LFG(O.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),Yo=(()=>{class s extends g.m1{constructor(t,i,r,l,u,P){if(super({loading:!1,priorAuthorizationImplants:[],done:!1,searchQuery:"",formName:void 0,implantId:void 0,priorAuthorizationRequestId:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=r,this.toast=l,this.formService=u,this.priorAuthorizationImplantService=P,this.errors$=this.select(n=>n.errors),this.loading$=this.select(n=>n.loading),this.done$=this.select(n=>n.done),this.item$=this.select(n=>n.item),this.priorAuthorizationImplants$=this.select(n=>n.priorAuthorizationImplants),this.implants$=this.select(n=>n.implants||[]),this.priorAuthorizationRequests$=this.select(n=>n.priorAuthorizationRequests||[]),this.implantId$=this.select(n=>n.implantId),this.priorAuthorizationRequestId$=this.select(n=>n.priorAuthorizationRequestId),this.paging$=this.select(n=>n.paging),this.searchQuery$=this.select(n=>n.searchQuery),this.formName$=this.select(n=>n.formName),this.actionResult$=this.select(this.item$,this.done$,(n,a)=>({item:n,done:a}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.priorAuthorizationImplants$,this.implants$,this.priorAuthorizationRequests$,(n,a,m,p,_,v,D)=>({errors:n,loading:a,item:m,formName:p,priorAuthorizationImplants:_,implants:v,priorAuthorizationRequests:D}),{debounce:!0}),this.input$=this.select(this.paging$,this.implantId$,this.priorAuthorizationRequestId$,this.searchQuery$,(n,a,m,p)=>({limit:n.limit,skip:n.skip,name:p,implantId:a,priorAuthorizationRequestId:m,total:n.total})),this.setFormName=this.updater((n,a)=>Object.assign(Object.assign({},n),{formName:a})),this.setImplantId=this.updater((n,a)=>Object.assign(Object.assign({},n),{implantId:a})),this.setPriorAuthorizationRequestId=this.updater((n,a)=>Object.assign(Object.assign({},n),{priorAuthorizationRequestId:a})),this.filterImplants=n=>this.data.userSelectImplants({input:{name:n}}).pipe((0,g._b)(a=>{let m=a.data.items;return this.patchState({implants:m}),m},a=>this.patchState({errors:a.graphQLErrors?a.graphQLErrors:a})),(0,B.U)(a=>a.data.items)),this.filterPriorAuthorizationRequests=n=>this.data.userSelectPriorAuthorizationRequests({input:{name:n}}).pipe((0,g._b)(a=>{let m=a.data.items;return this.patchState({priorAuthorizationRequests:m}),m},a=>this.patchState({errors:a.graphQLErrors?a.graphQLErrors:a})),(0,B.U)(a=>a.data.items)),this.addImplant=this.updater((n,a)=>Object.assign(Object.assign({},n),{implants:n.implants.concat(a)})),this.addPriorAuthorizationRequest=this.updater((n,a)=>Object.assign(Object.assign({},n),{priorAuthorizationRequests:n.priorAuthorizationRequests.concat(a)})),this.setItem=this.updater((n,a)=>Object.assign(Object.assign({},n),{item:a})),this.addNewPriorAuthorizationImplant=this.updater((n,a)=>Object.assign(Object.assign({},n),{priorAuthorizationImplants:[...n.priorAuthorizationImplants,a]})),this.updatePriorAuthorizationImplant=this.updater((n,a)=>Object.assign(Object.assign({},n),{priorAuthorizationImplants:n.priorAuthorizationImplants.map(m=>m.id===a.id?a:m)})),this.addPriorAuthorizationImplants=this.updater((n,a)=>Object.assign(Object.assign({},n),{priorAuthorizationImplants:n.priorAuthorizationImplants.concat(a)})),this.updatePriorAuthorizationImplants=this.updater((n,a)=>Object.assign(Object.assign({},n),{priorAuthorizationImplants:n.priorAuthorizationImplants.map(m=>a.find(_=>_.id===m.id)||m)})),this.setSearchQuery=this.updater((n,a)=>Object.assign(Object.assign({},n),{searchQuery:a})),this.loadPriorAuthorizationImplantEffect=this.effect(n=>n.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(a=>this.data.userPriorAuthorizationImplant({priorAuthorizationImplantId:a}).pipe((0,g._b)(m=>{this.patchState({item:m.data.item,errors:m.errors,loading:!1})},m=>this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})))))),this.loadPriorAuthorizationImplantsEffect=this.effect(n=>n.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.input$),(0,h.w)(([a,m])=>this.data.userPriorAuthorizationImplants({input:m}).pipe((0,g._b)(p=>this.patchState({paging:{limit:m.limit,skip:m.skip,total:p.data.count.total},priorAuthorizationImplants:p.data.items,errors:p.errors,loading:!1}),p=>this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})))))),this.createPriorAuthorizationImplantEffect=this.effect(n=>n.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(a=>this.priorAuthorizationImplantService.createPriorAuthorizationImplant(Object.assign({},a)).pipe((0,g._b)(m=>{this.addNewPriorAuthorizationImplant(m),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:m,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},m=>{m.graphQLErrors?(this.toast.error(m.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})):(this.toast.error(m.Message),this.formService.setErrors(m.Data))}))))),this.updatePriorAuthorizationImplantEffect=this.effect(n=>n.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([a,m])=>this.priorAuthorizationImplantService.updatePriorAuthorizationImplant(a,a.id).pipe((0,g._b)(p=>{this.updatePriorAuthorizationImplant(p),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:p,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},p=>{p.graphQLErrors?(this.toast.error(p.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})):(this.toast.error(p.Message),this.formService.setErrors(p.Data))}))))),this.deletePriorAuthorizationImplantEffect=this.effect(n=>n.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([a,m])=>this.data.userDeletePriorAuthorizationImplant({priorAuthorizationImplantId:m.id}).pipe((0,g._b)(p=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:p.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},p=>{p.graphQLErrors?(this.toast.error(p.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})):(this.toast.error(p.Message),this.formService.setErrors(p.Data))}))))),this.importExcelEffect=this.effect(n=>n.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(a=>this.priorAuthorizationImplantService.importPriorAuthorizationImplants(a).pipe((0,te.K)(m=>{var p;return this.toast.error(null!==(p=m.Message)&&void 0!==p?p:"Failed to save",{duration:3e3}),k.E}),(0,C.b)(m=>{const p=JSON.parse(m.created),_=JSON.parse(m.updated),v=JSON.parse(m.failed),D=p.length+_.length+v.length;this.addPriorAuthorizationImplants(p),this.updatePriorAuthorizationImplants(_),this.toast.success(`${p.length} created, ${_.length} updated, ${v.length} failed of total ${D}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("priorAuthorizationImplantId")?(this.route.snapshot.paramMap.get("priorAuthorizationImplantId"),this.setFormName("priorAuthorizationImplant_edit")):this.setFormName("priorAuthorizationImplant_create"),this.route.snapshot.paramMap.has("implantId")){var c=this.route.snapshot.paramMap.get("implantId");this.setImplantId(c)}if(this.route.snapshot.paramMap.has("priorAuthorizationRequestId")){var d=this.route.snapshot.paramMap.get("priorAuthorizationRequestId");this.setPriorAuthorizationRequestId(d)}}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.priorAuthorizationImplantService.validatePriorAuthorizationImplantExcelData(t,i.implants,i.priorAuthorizationRequests)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(E.q),e.LFG(A.F0),e.LFG(A.gz),e.LFG(X.F),e.LFG(q.o),e.LFG(V6))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function Q6(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close.emit())})("formIsReady",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.priorAuthorizationImplant)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let ru=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"priorAuthorizationImplant_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.priorAuthorizationImplant=i.item})):t.formName&&t.formName.currentValue&&"priorAuthorizationImplant_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadPriorAuthorizationImplantEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.priorAuthorizationImplant=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Yo),e.Y36(A.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-prior-authorization-implant-form"]],inputs:{priorAuthorizationImplant:"priorAuthorizationImplant",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,Q6,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[w.O5,z.M,w.Ov],encapsulation:2}),s})(),au=(()=>{class s{constructor(){this.autoHeight=!1,this.priorAuthorizationImplants=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[{field:"implant.name",headerName:"Implant",filter:"agTextColumnFilter"},{field:"priorAuthorizationRequest.name",headerName:"Prior Authorization Request",filter:"agTextColumnFilter"},{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{headerName:"Estimated Cost",field:"estimatedCost",valueFormatter:t=>{var i;return(0,S.oBD)(null===(i=t.data)||void 0===i?void 0:i.estimatedCost,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{field:"implantId",filter:"agTextColumnFilter",hide:!0},{field:"priorAuthorizationRequestId",filter:"agTextColumnFilter",hide:!0}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var r;t.includes(null===(r=i.data)||void 0===r?void 0:r.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-prior-authorization-implant-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(N.x,5),2&t){let r;e.iGM(r=e.CRH())&&(i.tableView=r.first)}},inputs:{autoHeight:"autoHeight",priorAuthorizationImplants:"priorAuthorizationImplants"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.priorAuthorizationImplants)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[N.x],encapsulation:2}),s})();function U6(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-prior-authorization-implant-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","priorAuthorizationImplant_edit")("formControl",t.formControl)("priorAuthorizationImplant",t.priorAuthorizationImplant)}}const J6=function(){return{}};function j6(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-prior-authorization-implant-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","priorAuthorizationImplant_create")("formControl",t.formControl)("priorAuthorizationImplant",e.DdM(3,J6))}}function z6(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-prior-authorization-implant-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(u.ref.close())}),e.qZA()}2&s&&e.Q6J("priorAuthorizationImplants",o.data.items)}let q6=(()=>{class s extends I.fS{constructor(t){super(),this.store=t,this.store.loadPriorAuthorizationImplantsEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.priorAuthorizationImplants$.pipe((0,h.w)(i=>(0,T.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Yo))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","priorAuthorizationImplant","send","close"],[1,"w-full","h-full","bg-white",3,"priorAuthorizationImplants","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,U6,2,3,"ng-template",null,1,e.W1O),e.YNc(3,j6,1,4,"ng-template",null,2,e.W1O),e.YNc(5,z6,1,1,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",u)("editTemplate",r)("createTemplate",l)("key",i.field.key)}},dependencies:[x.JJ,x.oH,J.$,ru,au],encapsulation:2}),s})();function H6(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-prior-authorization-implant-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","priorAuthorizationImplant_edit")("priorAuthorizationImplant",t.value)}}const K6=function(){return{}};function k6(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-prior-authorization-implant-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","priorAuthorizationImplant_create")("priorAuthorizationImplant",e.DdM(2,K6))}function Z6(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-prior-authorization-implant-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(null==u.ref?null:u.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("priorAuthorizationImplants",t.items)}}let B6=(()=>{class s extends Y{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","priorAuthorizationImplant","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","priorAuthorizationImplants","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,H6,1,2,"ng-template",null,1,e.W1O),e.YNc(3,k6,1,3,"ng-template",null,2,e.W1O),e.YNc(5,Z6,1,2,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[ee,ru,au],encapsulation:2}),s})(),Y6=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[Yo],imports:[w.ez,R.F,x.UX,V.o,H.u,Q.P,U.t,Z,j.h,K.G,I.X0.forChild({types:[{name:"prior-authorization-implant-select",component:q6,wrappers:["form-field"]},{name:"prior-authorization-implant-grid",component:B6}]})]}),s})(),X6=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[Y6]}),s})();class Pi extends y.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class ez extends Pi{constructor(o,t,i,r){super("ValidatePriorAuthorizationProcedureCodeExcelDataAction"),this.valid=!1,this.excelData=o,this.costCategories=t,this.procedures=i,this.priorAuthorizationRequests=r}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name),this.validationContext.addRule(new f.mi(`costCategoryName_${i}_is_valid}`,"Cost Category Is Not Valid","costCategory.name",t.costCategory,this.costCategories,!0)),this.validationContext.addRule(new f.mi(`procedureName_${i}_is_valid}`,"Procedure Is Not Valid","procedure.name",t.procedure,this.procedures,!0)),this.validationContext.addRule(new f.mi(`priorAuthorizationRequestName_${i}_is_valid}`,"Prior Authorization Request Is Not Valid","priorAuthorizationRequest.name",t.priorAuthorizationRequest,this.priorAuthorizationRequests,!0))}),this.validationContext.addRule(new f.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof f.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(r=>r.name),newNames:[i.newName]}):i instanceof f.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,T.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class tz extends f.wS{constructor(o,t,i,r,l){super(o,t,i,r,l,!0)}}class iz extends f.ul{constructor(o,t,i,r=!1){super(o,t,r),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new f.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new tz("name","The priorauthorizationprocedurecode name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class sz extends Pi{constructor(o){super("CreatePriorAuthorizationProcedureCodeAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new iz("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreatePriorAuthorizationProcedureCode({input:this.input}).pipe((0,h.w)(o=>(0,ie.of)(o.data.created)))}}class oz extends Pi{constructor(o){super("UpdatePriorAuthorizationProcedureCodesAction"),this.priorAuthorizationProcedureCodes=o}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.priorAuthorizationProcedureCodes,!0))}performAction(){this.response=this.businessProvider.data.userUpdatePriorAuthorizationProcedureCodes({input:{priorAuthorizationProcedureCodes:this.priorAuthorizationProcedureCodes}}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}class rz extends Pi{constructor(o,t){super("UpdatePriorAuthorizationProcedureCodeAction"),this.priorAuthorizationProcedureCode=o,this.priorAuthorizationProcedureCodeId=t}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.priorAuthorizationProcedureCode,!0)).addRule(new f.xF("Id","Id should be a CUID and not null",this.priorAuthorizationProcedureCodeId,!0))}performAction(){this.response=this.businessProvider.data.userUpdatePriorAuthorizationProcedureCode({priorAuthorizationProcedureCodeId:this.priorAuthorizationProcedureCodeId,input:this.priorAuthorizationProcedureCode}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}let nu=(()=>{class s extends y.nH{constructor(t,i,r){super("NotificationService.PriorAuthorizationProcedureCodeBusinessProviderService",t,r),this.data=i}createPriorAuthorizationProcedureCode(t){const i=new sz(t);return i.Do(this),i.response}updatePriorAuthorizationProcedureCode(t,i){const r=new rz(t,i);return r.Do(this),r.response}importPriorAuthorizationProcedureCodes(t){const i=new oz(t);return i.Do(this),i.response}validatePriorAuthorizationProcedureCodeExcelData(t,i,r,l){const u=new ez(t,i,r,l);return u.Do(this),u.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(O.ed),e.LFG(E.q),e.LFG(y.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),az=(()=>{class s extends y.nH{constructor(t,i,r){super("PriorAuthorizationProcedureCodeService",r,t),this.businessProvider=i}createPriorAuthorizationProcedureCode(t){const i=Object.fromEntries(Object.entries(t).filter(([r,l])=>null!==l));return this.businessProvider.createPriorAuthorizationProcedureCode(i)}updatePriorAuthorizationProcedureCode(t,i){return this.businessProvider.updatePriorAuthorizationProcedureCode(t,i)}importPriorAuthorizationProcedureCodes(t){return this.businessProvider.importPriorAuthorizationProcedureCodes(t)}validatePriorAuthorizationProcedureCodeExcelData(t,i,r,l){return this.businessProvider.validatePriorAuthorizationProcedureCodeExcelData(t,i,r,l)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(nu,8),e.LFG(nu),e.LFG(O.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),Xo=(()=>{class s extends g.m1{constructor(t,i,r,l,u,P){if(super({loading:!1,priorAuthorizationProcedureCodes:[],done:!1,searchQuery:"",formName:void 0,costCategoryId:void 0,procedureId:void 0,priorAuthorizationRequestId:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=r,this.toast=l,this.formService=u,this.priorAuthorizationProcedureCodeService=P,this.errors$=this.select(a=>a.errors),this.loading$=this.select(a=>a.loading),this.done$=this.select(a=>a.done),this.item$=this.select(a=>a.item),this.priorAuthorizationProcedureCodes$=this.select(a=>a.priorAuthorizationProcedureCodes),this.costCategories$=this.select(a=>a.costCategories||[]),this.procedures$=this.select(a=>a.procedures||[]),this.priorAuthorizationRequests$=this.select(a=>a.priorAuthorizationRequests||[]),this.costCategoryId$=this.select(a=>a.costCategoryId),this.procedureId$=this.select(a=>a.procedureId),this.priorAuthorizationRequestId$=this.select(a=>a.priorAuthorizationRequestId),this.paging$=this.select(a=>a.paging),this.searchQuery$=this.select(a=>a.searchQuery),this.formName$=this.select(a=>a.formName),this.actionResult$=this.select(this.item$,this.done$,(a,m)=>({item:a,done:m}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.priorAuthorizationProcedureCodes$,this.costCategories$,this.procedures$,this.priorAuthorizationRequests$,(a,m,p,_,v,D,se,me)=>({errors:a,loading:m,item:p,formName:_,priorAuthorizationProcedureCodes:v,costCategories:D,procedures:se,priorAuthorizationRequests:me}),{debounce:!0}),this.input$=this.select(this.paging$,this.costCategoryId$,this.procedureId$,this.priorAuthorizationRequestId$,this.searchQuery$,(a,m,p,_,v)=>({limit:a.limit,skip:a.skip,name:v,costCategoryId:m,procedureId:p,priorAuthorizationRequestId:_,total:a.total})),this.setFormName=this.updater((a,m)=>Object.assign(Object.assign({},a),{formName:m})),this.setCostCategoryId=this.updater((a,m)=>Object.assign(Object.assign({},a),{costCategoryId:m})),this.setProcedureId=this.updater((a,m)=>Object.assign(Object.assign({},a),{procedureId:m})),this.setPriorAuthorizationRequestId=this.updater((a,m)=>Object.assign(Object.assign({},a),{priorAuthorizationRequestId:m})),this.filterCostCategories=a=>this.data.userSelectCostCategories({input:{name:a}}).pipe((0,g._b)(m=>{let p=m.data.items;return this.patchState({costCategories:p}),p},m=>this.patchState({errors:m.graphQLErrors?m.graphQLErrors:m})),(0,B.U)(m=>m.data.items)),this.filterProcedures=a=>this.data.userSelectProcedures({input:{name:a}}).pipe((0,g._b)(m=>{let p=m.data.items;return this.patchState({procedures:p}),p},m=>this.patchState({errors:m.graphQLErrors?m.graphQLErrors:m})),(0,B.U)(m=>m.data.items)),this.filterPriorAuthorizationRequests=a=>this.data.userSelectPriorAuthorizationRequests({input:{name:a}}).pipe((0,g._b)(m=>{let p=m.data.items;return this.patchState({priorAuthorizationRequests:p}),p},m=>this.patchState({errors:m.graphQLErrors?m.graphQLErrors:m})),(0,B.U)(m=>m.data.items)),this.addCostCategory=this.updater((a,m)=>Object.assign(Object.assign({},a),{costCategories:a.costCategories.concat(m)})),this.addProcedure=this.updater((a,m)=>Object.assign(Object.assign({},a),{procedures:a.procedures.concat(m)})),this.addPriorAuthorizationRequest=this.updater((a,m)=>Object.assign(Object.assign({},a),{priorAuthorizationRequests:a.priorAuthorizationRequests.concat(m)})),this.setItem=this.updater((a,m)=>Object.assign(Object.assign({},a),{item:m})),this.addNewPriorAuthorizationProcedureCode=this.updater((a,m)=>Object.assign(Object.assign({},a),{priorAuthorizationProcedureCodes:[...a.priorAuthorizationProcedureCodes,m]})),this.updatePriorAuthorizationProcedureCode=this.updater((a,m)=>Object.assign(Object.assign({},a),{priorAuthorizationProcedureCodes:a.priorAuthorizationProcedureCodes.map(p=>p.id===m.id?m:p)})),this.addPriorAuthorizationProcedureCodes=this.updater((a,m)=>Object.assign(Object.assign({},a),{priorAuthorizationProcedureCodes:a.priorAuthorizationProcedureCodes.concat(m)})),this.updatePriorAuthorizationProcedureCodes=this.updater((a,m)=>Object.assign(Object.assign({},a),{priorAuthorizationProcedureCodes:a.priorAuthorizationProcedureCodes.map(p=>m.find(v=>v.id===p.id)||p)})),this.setSearchQuery=this.updater((a,m)=>Object.assign(Object.assign({},a),{searchQuery:m})),this.loadPriorAuthorizationProcedureCodeEffect=this.effect(a=>a.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(m=>this.data.userPriorAuthorizationProcedureCode({priorAuthorizationProcedureCodeId:m}).pipe((0,g._b)(p=>{this.patchState({item:p.data.item,errors:p.errors,loading:!1})},p=>this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})))))),this.loadPriorAuthorizationProcedureCodesEffect=this.effect(a=>a.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.input$),(0,h.w)(([m,p])=>this.data.userPriorAuthorizationProcedureCodes({input:p}).pipe((0,g._b)(_=>this.patchState({paging:{limit:p.limit,skip:p.skip,total:_.data.count.total},priorAuthorizationProcedureCodes:_.data.items,errors:_.errors,loading:!1}),_=>this.patchState({loading:!1,errors:_.graphQLErrors?_.graphQLErrors:_})))))),this.createPriorAuthorizationProcedureCodeEffect=this.effect(a=>a.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(m=>this.priorAuthorizationProcedureCodeService.createPriorAuthorizationProcedureCode(Object.assign({},m)).pipe((0,g._b)(p=>{this.addNewPriorAuthorizationProcedureCode(p),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:p,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},p=>{p.graphQLErrors?(this.toast.error(p.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})):(this.toast.error(p.Message),this.formService.setErrors(p.Data))}))))),this.updatePriorAuthorizationProcedureCodeEffect=this.effect(a=>a.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([m,p])=>this.priorAuthorizationProcedureCodeService.updatePriorAuthorizationProcedureCode(m,m.id).pipe((0,g._b)(_=>{this.updatePriorAuthorizationProcedureCode(_),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:_,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},_=>{_.graphQLErrors?(this.toast.error(_.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:_.graphQLErrors?_.graphQLErrors:_})):(this.toast.error(_.Message),this.formService.setErrors(_.Data))}))))),this.deletePriorAuthorizationProcedureCodeEffect=this.effect(a=>a.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([m,p])=>this.data.userDeletePriorAuthorizationProcedureCode({priorAuthorizationProcedureCodeId:p.id}).pipe((0,g._b)(_=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:_.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},_=>{_.graphQLErrors?(this.toast.error(_.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:_.graphQLErrors?_.graphQLErrors:_})):(this.toast.error(_.Message),this.formService.setErrors(_.Data))}))))),this.importExcelEffect=this.effect(a=>a.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(m=>this.priorAuthorizationProcedureCodeService.importPriorAuthorizationProcedureCodes(m).pipe((0,te.K)(p=>{var _;return this.toast.error(null!==(_=p.Message)&&void 0!==_?_:"Failed to save",{duration:3e3}),k.E}),(0,C.b)(p=>{const _=JSON.parse(p.created),v=JSON.parse(p.updated),D=JSON.parse(p.failed),se=_.length+v.length+D.length;this.addPriorAuthorizationProcedureCodes(_),this.updatePriorAuthorizationProcedureCodes(v),this.toast.success(`${_.length} created, ${v.length} updated, ${D.length} failed of total ${se}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("priorAuthorizationProcedureCodeId")?(this.route.snapshot.paramMap.get("priorAuthorizationProcedureCodeId"),this.setFormName("priorAuthorizationProcedureCode_edit")):this.setFormName("priorAuthorizationProcedureCode_create"),this.route.snapshot.paramMap.has("costCategoryId")){var c=this.route.snapshot.paramMap.get("costCategoryId");this.setCostCategoryId(c)}if(this.route.snapshot.paramMap.has("procedureId")){var d=this.route.snapshot.paramMap.get("procedureId");this.setProcedureId(d)}if(this.route.snapshot.paramMap.has("priorAuthorizationRequestId")){var n=this.route.snapshot.paramMap.get("priorAuthorizationRequestId");this.setPriorAuthorizationRequestId(n)}}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.priorAuthorizationProcedureCodeService.validatePriorAuthorizationProcedureCodeExcelData(t,i.costCategories,i.procedures,i.priorAuthorizationRequests)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(E.q),e.LFG(A.F0),e.LFG(A.gz),e.LFG(X.F),e.LFG(q.o),e.LFG(az))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function nz(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close.emit())})("formIsReady",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.priorAuthorizationProcedureCode)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let lu=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"priorAuthorizationProcedureCode_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.priorAuthorizationProcedureCode=i.item})):t.formName&&t.formName.currentValue&&"priorAuthorizationProcedureCode_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadPriorAuthorizationProcedureCodeEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.priorAuthorizationProcedureCode=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Xo),e.Y36(A.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-prior-authorization-procedure-code-form"]],inputs:{priorAuthorizationProcedureCode:"priorAuthorizationProcedureCode",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,nz,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[w.O5,z.M,w.Ov],encapsulation:2}),s})(),cu=(()=>{class s{constructor(){this.autoHeight=!1,this.priorAuthorizationProcedureCodes=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[{field:"costCategory.name",headerName:"Cost Category",filter:"agTextColumnFilter"},{field:"procedure.name",headerName:"Procedure",filter:"agTextColumnFilter"},{field:"priorAuthorizationRequest.name",headerName:"Prior Authorization Request",filter:"agTextColumnFilter"},{field:"procedureId",filter:"agTextColumnFilter",hide:!0},{field:"priorAuthorizationRequestId",filter:"agTextColumnFilter",hide:!0},{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{field:"costCategoryId",filter:"agTextColumnFilter",hide:!0},{headerName:"Estimated Cost",field:"estimatedCost",valueFormatter:t=>{var i;return(0,S.oBD)(null===(i=t.data)||void 0===i?void 0:i.estimatedCost,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var r;t.includes(null===(r=i.data)||void 0===r?void 0:r.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-prior-authorization-procedure-code-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(N.x,5),2&t){let r;e.iGM(r=e.CRH())&&(i.tableView=r.first)}},inputs:{autoHeight:"autoHeight",priorAuthorizationProcedureCodes:"priorAuthorizationProcedureCodes"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.priorAuthorizationProcedureCodes)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[N.x],encapsulation:2}),s})();function lz(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-prior-authorization-procedure-code-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","priorAuthorizationProcedureCode_edit")("formControl",t.formControl)("priorAuthorizationProcedureCode",t.priorAuthorizationProcedureCode)}}const cz=function(){return{}};function dz(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-prior-authorization-procedure-code-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","priorAuthorizationProcedureCode_create")("formControl",t.formControl)("priorAuthorizationProcedureCode",e.DdM(3,cz))}}function uz(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-prior-authorization-procedure-code-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(u.ref.close())}),e.qZA()}2&s&&e.Q6J("priorAuthorizationProcedureCodes",o.data.items)}let mz=(()=>{class s extends I.fS{constructor(t){super(),this.store=t,this.store.loadPriorAuthorizationProcedureCodesEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.priorAuthorizationProcedureCodes$.pipe((0,h.w)(i=>(0,T.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Xo))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","priorAuthorizationProcedureCode","send","close"],[1,"w-full","h-full","bg-white",3,"priorAuthorizationProcedureCodes","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,lz,2,3,"ng-template",null,1,e.W1O),e.YNc(3,dz,1,4,"ng-template",null,2,e.W1O),e.YNc(5,uz,1,1,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",u)("editTemplate",r)("createTemplate",l)("key",i.field.key)}},dependencies:[x.JJ,x.oH,J.$,lu,cu],encapsulation:2}),s})();function pz(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-prior-authorization-procedure-code-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","priorAuthorizationProcedureCode_edit")("priorAuthorizationProcedureCode",t.value)}}const hz=function(){return{}};function fz(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-prior-authorization-procedure-code-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","priorAuthorizationProcedureCode_create")("priorAuthorizationProcedureCode",e.DdM(2,hz))}function _z(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-prior-authorization-procedure-code-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(null==u.ref?null:u.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("priorAuthorizationProcedureCodes",t.items)}}let gz=(()=>{class s extends Y{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","priorAuthorizationProcedureCode","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","priorAuthorizationProcedureCodes","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,pz,1,2,"ng-template",null,1,e.W1O),e.YNc(3,fz,1,3,"ng-template",null,2,e.W1O),e.YNc(5,_z,1,2,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[ee,lu,cu],encapsulation:2}),s})(),Cz=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[Xo],imports:[w.ez,R.F,x.UX,V.o,H.u,Q.P,U.t,Z,j.h,K.G,I.X0.forChild({types:[{name:"prior-authorization-procedure-code-select",component:mz,wrappers:["form-field"]},{name:"prior-authorization-procedure-code-grid",component:gz}]})]}),s})(),Sz=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[Cz]}),s})();class Wi extends y.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class vz extends Wi{constructor(o,t,i,r,l,u,P,b,c,d,n,a){super("ValidatePriorAuthorizationRequestExcelDataAction"),this.valid=!1,this.excelData=o,this.procedureSites=t,this.surgicalPositions=i,this.treatingProviders=r,this.referredTos=l,this.prescriptions=u,this.visitKinds=P,this.guidelineUseds=b,this.authorizationKinds=c,this.authorizationStatuses=d,this.patients=n,this.caseProcedures=a}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name),this.validationContext.addRule(new f.mi(`procedureSiteName_${i}_is_valid}`,"Procedure Site Is Not Valid","procedureSite.name",t.procedureSite,this.procedureSites,!0)),this.validationContext.addRule(new f.mi(`surgicalPositionName_${i}_is_valid}`,"Surgical Position Is Not Valid","surgicalPosition.name",t.surgicalPosition,this.surgicalPositions,!0)),this.validationContext.addRule(new f.mi(`treatingProviderName_${i}_is_valid}`,"Treating Provider Is Not Valid","treatingProvider.name",t.treatingProvider,this.treatingProviders,!0)),this.validationContext.addRule(new f.mi(`referredToName_${i}_is_valid}`,"Referred to Is Not Valid","referredTo.name",t.referredTo,this.referredTos,!0)),this.validationContext.addRule(new f.mi(`prescriptionName_${i}_is_valid}`,"Prescription Is Not Valid","prescription.name",t.prescription,this.prescriptions,!0)),this.validationContext.addRule(new f.mi(`visitKindName_${i}_is_valid}`,"Visit Kind Is Not Valid","visitKind.name",t.visitKind,this.visitKinds,!0)),this.validationContext.addRule(new f.mi(`guidelineUsedName_${i}_is_valid}`,"Guideline Used Is Not Valid","guidelineUsed.name",t.guidelineUsed,this.guidelineUseds,!0)),this.validationContext.addRule(new f.mi(`authorizationKindName_${i}_is_valid}`,"Authorization Kind Is Not Valid","authorizationKind.name",t.authorizationKind,this.authorizationKinds,!0)),this.validationContext.addRule(new f.mi(`authorizationStatusName_${i}_is_valid}`,"Authorization Status Is Not Valid","authorizationStatus.name",t.authorizationStatus,this.authorizationStatuses,!0)),this.validationContext.addRule(new f.mi(`patientName_${i}_is_valid}`,"Patient Is Not Valid","patient.name",t.patient,this.patients,!0)),this.validationContext.addRule(new f.mi(`caseProcedureName_${i}_is_valid}`,"Case Procedure Is Not Valid","caseProcedure.name",t.caseProcedure,this.caseProcedures,!0))}),this.validationContext.addRule(new f.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof f.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(r=>r.name),newNames:[i.newName]}):i instanceof f.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,T.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class bz extends f.wS{constructor(o,t,i,r,l){super(o,t,i,r,l,!0)}}class Tz extends f.ul{constructor(o,t,i,r=!1){super(o,t,r),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new f.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new bz("name","The priorauthorizationrequest name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class yz extends Wi{constructor(o){super("CreatePriorAuthorizationRequestAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new Tz("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreatePriorAuthorizationRequest({input:this.input}).pipe((0,h.w)(o=>(0,ie.of)(o.data.created)))}}class wz extends Wi{constructor(o){super("UpdatePriorAuthorizationRequestsAction"),this.priorAuthorizationRequests=o}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.priorAuthorizationRequests,!0))}performAction(){this.response=this.businessProvider.data.userUpdatePriorAuthorizationRequests({input:{priorAuthorizationRequests:this.priorAuthorizationRequests}}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}class xz extends Wi{constructor(o,t){super("UpdatePriorAuthorizationRequestAction"),this.priorAuthorizationRequest=o,this.priorAuthorizationRequestId=t}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.priorAuthorizationRequest,!0)).addRule(new f.xF("Id","Id should be a CUID and not null",this.priorAuthorizationRequestId,!0))}performAction(){this.response=this.businessProvider.data.userUpdatePriorAuthorizationRequest({priorAuthorizationRequestId:this.priorAuthorizationRequestId,input:this.priorAuthorizationRequest}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}let du=(()=>{class s extends y.nH{constructor(t,i,r){super("NotificationService.PriorAuthorizationRequestBusinessProviderService",t,r),this.data=i}createPriorAuthorizationRequest(t){const i=new yz(t);return i.Do(this),i.response}updatePriorAuthorizationRequest(t,i){const r=new xz(t,i);return r.Do(this),r.response}importPriorAuthorizationRequests(t){const i=new wz(t);return i.Do(this),i.response}validatePriorAuthorizationRequestExcelData(t,i,r,l,u,P,b,c,d,n,a,m){const p=new vz(t,i,r,l,u,P,b,c,d,n,a,m);return p.Do(this),p.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(O.ed),e.LFG(E.q),e.LFG(y.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),Nz=(()=>{class s extends y.nH{constructor(t,i,r){super("PriorAuthorizationRequestService",r,t),this.businessProvider=i}createPriorAuthorizationRequest(t){const i=Object.fromEntries(Object.entries(t).filter(([r,l])=>null!==l));return this.businessProvider.createPriorAuthorizationRequest(i)}updatePriorAuthorizationRequest(t,i){return this.businessProvider.updatePriorAuthorizationRequest(t,i)}importPriorAuthorizationRequests(t){return this.businessProvider.importPriorAuthorizationRequests(t)}validatePriorAuthorizationRequestExcelData(t,i,r,l,u,P,b,c,d,n,a,m){return this.businessProvider.validatePriorAuthorizationRequestExcelData(t,i,r,l,u,P,b,c,d,n,a,m)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(du,8),e.LFG(du),e.LFG(O.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),er=(()=>{class s extends g.m1{constructor(t,i,r,l,u,P){if(super({loading:!1,priorAuthorizationRequests:[],done:!1,searchQuery:"",formName:void 0,procedureSiteId:void 0,surgicalPositionId:void 0,treatingProviderId:void 0,referredToId:void 0,prescriptionId:void 0,visitKindId:void 0,guidelineUsedId:void 0,authorizationKindId:void 0,authorizationStatusId:void 0,billId:void 0,medicalReportId:void 0,patientId:void 0,caseProcedureId:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=r,this.toast=l,this.formService=u,this.priorAuthorizationRequestService=P,this.errors$=this.select(M=>M.errors),this.loading$=this.select(M=>M.loading),this.done$=this.select(M=>M.done),this.item$=this.select(M=>M.item),this.priorAuthorizationRequests$=this.select(M=>M.priorAuthorizationRequests),this.procedureSites$=this.select(M=>M.procedureSites||[]),this.surgicalPositions$=this.select(M=>M.surgicalPositions||[]),this.clinicalProviders$=this.select(M=>M.clinicalProviders||[]),this.documents$=this.select(M=>M.documents||[]),this.visitKinds$=this.select(M=>M.visitKinds||[]),this.guidelineUseds$=this.select(M=>M.guidelineUseds||[]),this.authorizationKinds$=this.select(M=>M.authorizationKinds||[]),this.authorizationStatuses$=this.select(M=>M.authorizationStatuses||[]),this.patients$=this.select(M=>M.patients||[]),this.caseProcedures$=this.select(M=>M.caseProcedures||[]),this.procedureSiteId$=this.select(M=>M.procedureSiteId),this.surgicalPositionId$=this.select(M=>M.surgicalPositionId),this.treatingProviderId$=this.select(M=>M.treatingProviderId),this.referredToId$=this.select(M=>M.referredToId),this.prescriptionId$=this.select(M=>M.prescriptionId),this.visitKindId$=this.select(M=>M.visitKindId),this.guidelineUsedId$=this.select(M=>M.guidelineUsedId),this.authorizationKindId$=this.select(M=>M.authorizationKindId),this.authorizationStatusId$=this.select(M=>M.authorizationStatusId),this.billId$=this.select(M=>M.billId),this.medicalReportId$=this.select(M=>M.medicalReportId),this.patientId$=this.select(M=>M.patientId),this.caseProcedureId$=this.select(M=>M.caseProcedureId),this.paging$=this.select(M=>M.paging),this.searchQuery$=this.select(M=>M.searchQuery),this.formName$=this.select(M=>M.formName),this.actionResult$=this.select(this.item$,this.done$,(M,L)=>({item:M,done:L}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.priorAuthorizationRequests$,this.procedureSites$,this.surgicalPositions$,this.clinicalProviders$,this.documents$,this.visitKinds$,this.guidelineUseds$,this.authorizationKinds$,this.authorizationStatuses$,this.patients$,this.caseProcedures$,(M,L,ne,ue,ve,we,xe,De,Ie,Pe,We,Re,Ve,Qe,Ar)=>({errors:M,loading:L,item:ne,formName:ue,priorAuthorizationRequests:ve,procedureSites:we,surgicalPositions:xe,clinicalProviders:De,documents:Ie,visitKinds:Pe,guidelineUseds:We,authorizationKinds:Re,authorizationStatuses:Ve,patients:Qe,caseProcedures:Ar}),{debounce:!0}),this.input$=this.select(this.paging$,this.procedureSiteId$,this.surgicalPositionId$,this.treatingProviderId$,this.referredToId$,this.prescriptionId$,this.visitKindId$,this.guidelineUsedId$,this.authorizationKindId$,this.authorizationStatusId$,this.billId$,this.medicalReportId$,this.patientId$,this.caseProcedureId$,this.searchQuery$,(M,L,ne,ue,ve,we,xe,De,Ie,Pe,We,Re,Ve,Qe,Ar)=>({limit:M.limit,skip:M.skip,name:Ar,procedureSiteId:L,surgicalPositionId:ne,treatingProviderId:ue,referredToId:ve,prescriptionId:we,visitKindId:xe,guidelineUsedId:De,authorizationKindId:Ie,authorizationStatusId:Pe,billId:We,medicalReportId:Re,patientId:Ve,caseProcedureId:Qe,total:M.total})),this.setFormName=this.updater((M,L)=>Object.assign(Object.assign({},M),{formName:L})),this.setProcedureSiteId=this.updater((M,L)=>Object.assign(Object.assign({},M),{procedureSiteId:L})),this.setSurgicalPositionId=this.updater((M,L)=>Object.assign(Object.assign({},M),{surgicalPositionId:L})),this.setTreatingProviderId=this.updater((M,L)=>Object.assign(Object.assign({},M),{treatingProviderId:L})),this.setReferredToId=this.updater((M,L)=>Object.assign(Object.assign({},M),{referredToId:L})),this.setPrescriptionId=this.updater((M,L)=>Object.assign(Object.assign({},M),{prescriptionId:L})),this.setVisitKindId=this.updater((M,L)=>Object.assign(Object.assign({},M),{visitKindId:L})),this.setGuidelineUsedId=this.updater((M,L)=>Object.assign(Object.assign({},M),{guidelineUsedId:L})),this.setAuthorizationKindId=this.updater((M,L)=>Object.assign(Object.assign({},M),{authorizationKindId:L})),this.setAuthorizationStatusId=this.updater((M,L)=>Object.assign(Object.assign({},M),{authorizationStatusId:L})),this.setBillId=this.updater((M,L)=>Object.assign(Object.assign({},M),{billId:L})),this.setMedicalReportId=this.updater((M,L)=>Object.assign(Object.assign({},M),{medicalReportId:L})),this.setPatientId=this.updater((M,L)=>Object.assign(Object.assign({},M),{patientId:L})),this.setCaseProcedureId=this.updater((M,L)=>Object.assign(Object.assign({},M),{caseProcedureId:L})),this.filterProcedureSites=M=>this.data.userSelectProcedureSites({input:{name:M}}).pipe((0,g._b)(L=>{let ne=L.data.items;return this.patchState({procedureSites:ne}),ne},L=>this.patchState({errors:L.graphQLErrors?L.graphQLErrors:L})),(0,B.U)(L=>L.data.items)),this.filterSurgicalPositions=M=>this.data.userSelectSurgicalPositions({input:{name:M}}).pipe((0,g._b)(L=>{let ne=L.data.items;return this.patchState({surgicalPositions:ne}),ne},L=>this.patchState({errors:L.graphQLErrors?L.graphQLErrors:L})),(0,B.U)(L=>L.data.items)),this.filterClinicalProviders=M=>this.data.userSelectClinicalProviders({input:{name:M}}).pipe((0,g._b)(L=>{let ne=L.data.items;return this.patchState({clinicalProviders:ne}),ne},L=>this.patchState({errors:L.graphQLErrors?L.graphQLErrors:L})),(0,B.U)(L=>L.data.items)),this.filterDocuments=M=>this.data.userSelectDocuments({input:{name:M}}).pipe((0,g._b)(L=>{let ne=L.data.items;return this.patchState({documents:ne}),ne},L=>this.patchState({errors:L.graphQLErrors?L.graphQLErrors:L})),(0,B.U)(L=>L.data.items)),this.filterVisitKinds=M=>this.data.userSelectVisitKinds({input:{name:M}}).pipe((0,g._b)(L=>{let ne=L.data.items;return this.patchState({visitKinds:ne}),ne},L=>this.patchState({errors:L.graphQLErrors?L.graphQLErrors:L})),(0,B.U)(L=>L.data.items)),this.filterGuidelineUseds=M=>this.data.userSelectGuidelineUseds({input:{name:M}}).pipe((0,g._b)(L=>{let ne=L.data.items;return this.patchState({guidelineUseds:ne}),ne},L=>this.patchState({errors:L.graphQLErrors?L.graphQLErrors:L})),(0,B.U)(L=>L.data.items)),this.filterAuthorizationKinds=M=>this.data.userSelectAuthorizationKinds({input:{name:M}}).pipe((0,g._b)(L=>{let ne=L.data.items;return this.patchState({authorizationKinds:ne}),ne},L=>this.patchState({errors:L.graphQLErrors?L.graphQLErrors:L})),(0,B.U)(L=>L.data.items)),this.filterAuthorizationStatuses=M=>this.data.userSelectAuthorizationStatuses({input:{name:M}}).pipe((0,g._b)(L=>{let ne=L.data.items;return this.patchState({authorizationStatuses:ne}),ne},L=>this.patchState({errors:L.graphQLErrors?L.graphQLErrors:L})),(0,B.U)(L=>L.data.items)),this.filterPatients=M=>this.data.userSelectPatients({input:{name:M}}).pipe((0,g._b)(L=>{let ne=L.data.items;return this.patchState({patients:ne}),ne},L=>this.patchState({errors:L.graphQLErrors?L.graphQLErrors:L})),(0,B.U)(L=>L.data.items)),this.filterCaseProcedures=M=>this.data.userSelectCaseProcedures({input:{name:M}}).pipe((0,g._b)(L=>{let ne=L.data.items;return this.patchState({caseProcedures:ne}),ne},L=>this.patchState({errors:L.graphQLErrors?L.graphQLErrors:L})),(0,B.U)(L=>L.data.items)),this.addProcedureSite=this.updater((M,L)=>Object.assign(Object.assign({},M),{procedureSites:M.procedureSites.concat(L)})),this.addSurgicalPosition=this.updater((M,L)=>Object.assign(Object.assign({},M),{surgicalPositions:M.surgicalPositions.concat(L)})),this.addClinicalProvider=this.updater((M,L)=>Object.assign(Object.assign({},M),{clinicalProviders:M.clinicalProviders.concat(L)})),this.addDocument=this.updater((M,L)=>Object.assign(Object.assign({},M),{documents:M.documents.concat(L)})),this.addVisitKind=this.updater((M,L)=>Object.assign(Object.assign({},M),{visitKinds:M.visitKinds.concat(L)})),this.addGuidelineUsed=this.updater((M,L)=>Object.assign(Object.assign({},M),{guidelineUseds:M.guidelineUseds.concat(L)})),this.addAuthorizationKind=this.updater((M,L)=>Object.assign(Object.assign({},M),{authorizationKinds:M.authorizationKinds.concat(L)})),this.addAuthorizationStatus=this.updater((M,L)=>Object.assign(Object.assign({},M),{authorizationStatuses:M.authorizationStatuses.concat(L)})),this.addPatient=this.updater((M,L)=>Object.assign(Object.assign({},M),{patients:M.patients.concat(L)})),this.addCaseProcedure=this.updater((M,L)=>Object.assign(Object.assign({},M),{caseProcedures:M.caseProcedures.concat(L)})),this.setItem=this.updater((M,L)=>Object.assign(Object.assign({},M),{item:L})),this.addNewPriorAuthorizationRequest=this.updater((M,L)=>Object.assign(Object.assign({},M),{priorAuthorizationRequests:[...M.priorAuthorizationRequests,L]})),this.updatePriorAuthorizationRequest=this.updater((M,L)=>Object.assign(Object.assign({},M),{priorAuthorizationRequests:M.priorAuthorizationRequests.map(ne=>ne.id===L.id?L:ne)})),this.addPriorAuthorizationRequests=this.updater((M,L)=>Object.assign(Object.assign({},M),{priorAuthorizationRequests:M.priorAuthorizationRequests.concat(L)})),this.updatePriorAuthorizationRequests=this.updater((M,L)=>Object.assign(Object.assign({},M),{priorAuthorizationRequests:M.priorAuthorizationRequests.map(ne=>L.find(ve=>ve.id===ne.id)||ne)})),this.setSearchQuery=this.updater((M,L)=>Object.assign(Object.assign({},M),{searchQuery:L})),this.loadPriorAuthorizationRequestEffect=this.effect(M=>M.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(L=>this.data.userPriorAuthorizationRequest({priorAuthorizationRequestId:L}).pipe((0,g._b)(ne=>(console.log("-----------------------------------"),console.log(ne.data.item),this.patchState({item:ne.data.item,errors:ne.errors,loading:!1})),ne=>this.patchState({loading:!1,errors:ne.graphQLErrors?ne.graphQLErrors:ne})))))),this.loadPriorAuthorizationRequestsEffect=this.effect(M=>M.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.input$),(0,h.w)(([L,ne])=>this.data.userPriorAuthorizationRequests({input:ne}).pipe((0,g._b)(ue=>this.patchState({paging:{limit:ne.limit,skip:ne.skip,total:ue.data.count.total},priorAuthorizationRequests:ue.data.items,errors:ue.errors,loading:!1}),ue=>this.patchState({loading:!1,errors:ue.graphQLErrors?ue.graphQLErrors:ue})))))),this.createPriorAuthorizationRequestEffect=this.effect(M=>M.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(L=>this.priorAuthorizationRequestService.createPriorAuthorizationRequest(Object.assign({},L)).pipe((0,g._b)(ne=>{this.addNewPriorAuthorizationRequest(ne),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:ne,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},ne=>{ne.graphQLErrors?(this.toast.error(ne.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:ne.graphQLErrors?ne.graphQLErrors:ne})):(this.toast.error(ne.Message),this.formService.setErrors(ne.Data))}))))),this.updatePriorAuthorizationRequestEffect=this.effect(M=>M.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([L,ne])=>this.priorAuthorizationRequestService.updatePriorAuthorizationRequest(L,L.id).pipe((0,g._b)(ue=>{this.updatePriorAuthorizationRequest(ue),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:ue,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},ue=>{ue.graphQLErrors?(this.toast.error(ue.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:ue.graphQLErrors?ue.graphQLErrors:ue})):(this.toast.error(ue.Message),this.formService.setErrors(ue.Data))}))))),this.deletePriorAuthorizationRequestEffect=this.effect(M=>M.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([L,ne])=>this.data.userDeletePriorAuthorizationRequest({priorAuthorizationRequestId:ne.id}).pipe((0,g._b)(ue=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:ue.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},ue=>{ue.graphQLErrors?(this.toast.error(ue.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:ue.graphQLErrors?ue.graphQLErrors:ue})):(this.toast.error(ue.Message),this.formService.setErrors(ue.Data))}))))),this.importExcelEffect=this.effect(M=>M.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(L=>this.priorAuthorizationRequestService.importPriorAuthorizationRequests(L).pipe((0,te.K)(ne=>{var ue;return this.toast.error(null!==(ue=ne.Message)&&void 0!==ue?ue:"Failed to save",{duration:3e3}),k.E}),(0,C.b)(ne=>{const ue=JSON.parse(ne.created),ve=JSON.parse(ne.updated),we=JSON.parse(ne.failed),xe=ue.length+ve.length+we.length;this.addPriorAuthorizationRequests(ue),this.updatePriorAuthorizationRequests(ve),this.toast.success(`${ue.length} created, ${ve.length} updated, ${we.length} failed of total ${xe}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("priorAuthorizationRequestId")?(this.route.snapshot.paramMap.get("priorAuthorizationRequestId"),this.setFormName("priorAuthorizationRequest_edit")):this.setFormName("priorAuthorizationRequest_create"),this.route.snapshot.paramMap.has("procedureSiteId")){var c=this.route.snapshot.paramMap.get("procedureSiteId");this.setProcedureSiteId(c)}if(this.route.snapshot.paramMap.has("surgicalPositionId")){var d=this.route.snapshot.paramMap.get("surgicalPositionId");this.setSurgicalPositionId(d)}if(this.route.snapshot.paramMap.has("treatingProviderId")){var n=this.route.snapshot.paramMap.get("treatingProviderId");this.setTreatingProviderId(n)}if(this.route.snapshot.paramMap.has("referredToId")){var a=this.route.snapshot.paramMap.get("referredToId");this.setReferredToId(a)}if(this.route.snapshot.paramMap.has("prescriptionId")){var m=this.route.snapshot.paramMap.get("prescriptionId");this.setPrescriptionId(m)}if(this.route.snapshot.paramMap.has("visitKindId")){var p=this.route.snapshot.paramMap.get("visitKindId");this.setVisitKindId(p)}if(this.route.snapshot.paramMap.has("guidelineUsedId")){var _=this.route.snapshot.paramMap.get("guidelineUsedId");this.setGuidelineUsedId(_)}if(this.route.snapshot.paramMap.has("authorizationKindId")){var v=this.route.snapshot.paramMap.get("authorizationKindId");this.setAuthorizationKindId(v)}if(this.route.snapshot.paramMap.has("authorizationStatusId")){var D=this.route.snapshot.paramMap.get("authorizationStatusId");this.setAuthorizationStatusId(D)}if(this.route.snapshot.paramMap.has("billId")){var se=this.route.snapshot.paramMap.get("billId");this.setBillId(se)}if(this.route.snapshot.paramMap.has("medicalReportId")){var me=this.route.snapshot.paramMap.get("medicalReportId");this.setMedicalReportId(me)}if(this.route.snapshot.paramMap.has("patientId")){var G=this.route.snapshot.paramMap.get("patientId");this.setPatientId(G)}if(this.route.snapshot.paramMap.has("caseProcedureId")){var $=this.route.snapshot.paramMap.get("caseProcedureId");this.setCaseProcedureId($)}}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.priorAuthorizationRequestService.validatePriorAuthorizationRequestExcelData(t,i.procedureSites,i.surgicalPositions,i.clinicalProviders,i.clinicalProviders,i.documents,i.visitKinds,i.guidelineUseds,i.authorizationKinds,i.authorizationStatuses,i.patients,i.caseProcedures)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(E.q),e.LFG(A.F0),e.LFG(A.gz),e.LFG(X.F),e.LFG(q.o),e.LFG(Nz))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function Az(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close.emit())})("formIsReady",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.priorAuthorizationRequest)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let uu=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"priorAuthorizationRequest_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({id:null,name:""}),this.store.vm$.subscribe(i=>{this.priorAuthorizationRequest=i.item})):t.formName&&t.formName.currentValue&&"priorAuthorizationRequest_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadPriorAuthorizationRequestEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.priorAuthorizationRequest=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(er),e.Y36(A.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-prior-authorization-request-form"]],inputs:{priorAuthorizationRequest:"priorAuthorizationRequest",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,Az,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[w.O5,z.M,w.Ov],encapsulation:2}),s})(),mu=(()=>{class s{constructor(){this.autoHeight=!1,this.priorAuthorizationRequests=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[{field:"procedureSite.name",headerName:"Procedure Site",filter:"agTextColumnFilter"},{field:"surgicalPosition.name",headerName:"Surgical Position",filter:"agTextColumnFilter"},{field:"treatingProvider.name",headerName:"Treating Provider",filter:"agTextColumnFilter"},{field:"referredTo.name",headerName:"Referred to",filter:"agTextColumnFilter"},{field:"prescription.name",headerName:"Prescription",filter:"agTextColumnFilter"},{field:"visitKind.name",headerName:"Visit Kind",filter:"agTextColumnFilter"},{field:"guidelineUsed.name",headerName:"Guideline Used",filter:"agTextColumnFilter"},{field:"authorizationKind.name",headerName:"Authorization Kind",filter:"agTextColumnFilter"},{field:"authorizationStatus.name",headerName:"Authorization Status",filter:"agTextColumnFilter"},{field:"bill.name",headerName:"Bill",filter:"agTextColumnFilter"},{field:"medicalReport.name",headerName:"Medical Report",filter:"agTextColumnFilter"},{field:"patient.name",headerName:"Patient",filter:"agTextColumnFilter"},{field:"caseProcedure.name",headerName:"Case Procedure",filter:"agTextColumnFilter"},{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{field:"referredOn",filter:"agDateColumnFilter"},{field:"approvedOn",filter:"agDateColumnFilter"},{field:"effectiveAsOf",filter:"agDateColumnFilter"},{field:"expiresOn",filter:"agDateColumnFilter"},{headerName:"Duration",field:"duration",valueFormatter:t=>{var i;return(0,S.oBD)(null===(i=t.data)||void 0===i?void 0:i.duration,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{field:"procedureSiteId",filter:"agTextColumnFilter",hide:!0},{field:"surgicalPositionId",filter:"agTextColumnFilter",hide:!0},{field:"procedureDescription",filter:"agTextColumnFilter"},{field:"remarks",filter:"agTextColumnFilter"},{headerName:"Underwriting Approved",field:"underwritingApproved",filter:"agSetColumnFilter",cellRenderer:"checkboxRenderer"},{headerName:"Tpa Approved",field:"tpaApproved",filter:"agSetColumnFilter",cellRenderer:"checkboxRenderer"},{headerName:"Requires Medical Director",field:"requiresMedicalDirector",filter:"agSetColumnFilter",cellRenderer:"checkboxRenderer"},{field:"reviewedOn",filter:"agDateColumnFilter"},{field:"treatingProviderId",filter:"agTextColumnFilter",hide:!0},{field:"referredToId",filter:"agTextColumnFilter",hide:!0},{field:"priorAuthorizationNumber",filter:"agTextColumnFilter"},{field:"caseManager",filter:"agTextColumnFilter"},{field:"memberNumber",filter:"agTextColumnFilter"},{field:"medicalDirector",filter:"agTextColumnFilter"},{field:"tpaApprover",filter:"agTextColumnFilter"},{field:"underwriter",filter:"agTextColumnFilter"},{field:"prescriptionId",filter:"agTextColumnFilter",hide:!0},{field:"visitKindId",filter:"agTextColumnFilter",hide:!0},{field:"guidelineUsedId",filter:"agTextColumnFilter",hide:!0},{field:"guidelineRequires",filter:"agTextColumnFilter"},{field:"authorizationKindId",filter:"agTextColumnFilter",hide:!0},{field:"authorizationStatusId",filter:"agTextColumnFilter",hide:!0},{field:"billId",filter:"agTextColumnFilter",hide:!0},{field:"medicalReportId",filter:"agTextColumnFilter",hide:!0},{field:"patientId",filter:"agTextColumnFilter",hide:!0},{field:"caseProcedureId",filter:"agTextColumnFilter",hide:!0}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var r;t.includes(null===(r=i.data)||void 0===r?void 0:r.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-prior-authorization-request-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(N.x,5),2&t){let r;e.iGM(r=e.CRH())&&(i.tableView=r.first)}},inputs:{autoHeight:"autoHeight",priorAuthorizationRequests:"priorAuthorizationRequests"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.priorAuthorizationRequests)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[N.x],encapsulation:2}),s})();function Fz(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-prior-authorization-request-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","priorAuthorizationRequest_edit")("formControl",t.formControl)("priorAuthorizationRequest",t.priorAuthorizationRequest)}}const Dz=function(){return{}};function Iz(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-prior-authorization-request-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","priorAuthorizationRequest_create")("formControl",t.formControl)("priorAuthorizationRequest",e.DdM(3,Dz))}}function Pz(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-prior-authorization-request-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(u.ref.close())}),e.qZA()}2&s&&e.Q6J("priorAuthorizationRequests",o.data.items)}let Wz=(()=>{class s extends I.fS{constructor(t){super(),this.store=t,this.store.loadPriorAuthorizationRequestsEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.priorAuthorizationRequests$.pipe((0,h.w)(i=>(0,T.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(er))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","priorAuthorizationRequest","send","close"],[1,"w-full","h-full","bg-white",3,"priorAuthorizationRequests","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,Fz,2,3,"ng-template",null,1,e.W1O),e.YNc(3,Iz,1,4,"ng-template",null,2,e.W1O),e.YNc(5,Pz,1,1,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",u)("editTemplate",r)("createTemplate",l)("key",i.field.key)}},dependencies:[x.JJ,x.oH,J.$,uu,mu],encapsulation:2}),s})();function Mz(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-prior-authorization-request-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","priorAuthorizationRequest_edit")("priorAuthorizationRequest",t.value)}}const Ez=function(){return{}};function Oz(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-prior-authorization-request-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","priorAuthorizationRequest_create")("priorAuthorizationRequest",e.DdM(2,Ez))}function Lz(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-prior-authorization-request-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(null==u.ref?null:u.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("priorAuthorizationRequests",t.items)}}let Gz=(()=>{class s extends Y{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:6,consts:[[3,"data","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","priorAuthorizationRequest","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","priorAuthorizationRequests","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,Mz,1,2,"ng-template",null,1,e.W1O),e.YNc(3,Oz,1,3,"ng-template",null,2,e.W1O),e.YNc(5,Lz,1,2,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("data",i.data)("title",i.to.title)("onSave",i.onSave)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[ee,uu,mu],encapsulation:2}),s})(),$z=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[er],imports:[w.ez,R.F,x.UX,V.o,H.u,Q.P,U.t,Z,j.h,K.G,I.X0.forChild({types:[{name:"prior-authorization-request-select",component:Wz,wrappers:["form-field"]},{name:"prior-authorization-request-grid",component:Gz}]})]}),s})(),Rz=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[$z]}),s})();class Mi extends y.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class Vz extends Mi{constructor(o,t,i){super("ValidatePriorMedsToDateExcelDataAction"),this.valid=!1,this.excelData=o,this.legalCases=t,this.priorMedsToDateStatuses=i}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name),this.validationContext.addRule(new f.mi(`legalCaseName_${i}_is_valid}`,"Legal Case Is Not Valid","legalCase.name",t.legalCase,this.legalCases,!0)),this.validationContext.addRule(new f.mi(`priorMedsToDateStatusName_${i}_is_valid}`,"Prior Meds to Date Status Is Not Valid","priorMedsToDateStatus.name",t.priorMedsToDateStatus,this.priorMedsToDateStatuses,!0))}),this.validationContext.addRule(new f.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof f.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(r=>r.name),newNames:[i.newName]}):i instanceof f.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,T.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class Qz extends f.wS{constructor(o,t,i,r,l){super(o,t,i,r,l,!0)}}class Uz extends f.ul{constructor(o,t,i,r=!1){super(o,t,r),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new f.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new Qz("name","The priormedstodate name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class Jz extends Mi{constructor(o){super("CreatePriorMedsToDateAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new Uz("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreatePriorMedsToDate({input:this.input}).pipe((0,h.w)(o=>(0,ie.of)(o.data.created)))}}class jz extends Mi{constructor(o){super("UpdatePriorMedsToDatesAction"),this.priorMedsToDates=o}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.priorMedsToDates,!0))}performAction(){this.response=this.businessProvider.data.userUpdatePriorMedsToDates({input:{priorMedsToDates:this.priorMedsToDates}}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}class zz extends Mi{constructor(o,t){super("UpdatePriorMedsToDateAction"),this.priorMedsToDate=o,this.priorMedsToDateId=t}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.priorMedsToDate,!0)).addRule(new f.xF("Id","Id should be a CUID and not null",this.priorMedsToDateId,!0))}performAction(){this.response=this.businessProvider.data.userUpdatePriorMedsToDate({priorMedsToDateId:this.priorMedsToDateId,input:this.priorMedsToDate}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}let pu=(()=>{class s extends y.nH{constructor(t,i,r){super("NotificationService.PriorMedsToDateBusinessProviderService",t,r),this.data=i}createPriorMedsToDate(t){const i=new Jz(t);return i.Do(this),i.response}updatePriorMedsToDate(t,i){const r=new zz(t,i);return r.Do(this),r.response}importPriorMedsToDates(t){const i=new jz(t);return i.Do(this),i.response}validatePriorMedsToDateExcelData(t,i,r){const l=new Vz(t,i,r);return l.Do(this),l.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(O.ed),e.LFG(E.q),e.LFG(y.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),qz=(()=>{class s extends y.nH{constructor(t,i,r){super("PriorMedsToDateService",r,t),this.businessProvider=i}createPriorMedsToDate(t){const i=Object.fromEntries(Object.entries(t).filter(([r,l])=>null!==l));return this.businessProvider.createPriorMedsToDate(i)}updatePriorMedsToDate(t,i){return this.businessProvider.updatePriorMedsToDate(t,i)}importPriorMedsToDates(t){return this.businessProvider.importPriorMedsToDates(t)}validatePriorMedsToDateExcelData(t,i,r){return this.businessProvider.validatePriorMedsToDateExcelData(t,i,r)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(pu,8),e.LFG(pu),e.LFG(O.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),tr=(()=>{class s extends g.m1{constructor(t,i,r,l,u,P){if(super({loading:!1,priorMedsToDates:[],done:!1,searchQuery:"",formName:void 0,legalCaseId:void 0,priorMedsToDateStatusId:void 0,specialtyId:void 0,visitKindId:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=r,this.toast=l,this.formService=u,this.priorMedsToDateService=P,this.errors$=this.select(m=>m.errors),this.loading$=this.select(m=>m.loading),this.done$=this.select(m=>m.done),this.item$=this.select(m=>m.item),this.priorMedsToDates$=this.select(m=>m.priorMedsToDates),this.legalCases$=this.select(m=>m.legalCases||[]),this.priorMedsToDateStatuses$=this.select(m=>m.priorMedsToDateStatuses||[]),this.specialties$=this.select(m=>m.specialties||[]),this.visitKinds$=this.select(m=>m.visitKinds||[]),this.legalCaseId$=this.select(m=>m.legalCaseId),this.priorMedsToDateStatusId$=this.select(m=>m.priorMedsToDateStatusId),this.specialtyId$=this.select(m=>m.specialtyId),this.visitKindId$=this.select(m=>m.visitKindId),this.paging$=this.select(m=>m.paging),this.searchQuery$=this.select(m=>m.searchQuery),this.formName$=this.select(m=>m.formName),this.actionResult$=this.select(this.item$,this.done$,(m,p)=>({item:m,done:p}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.priorMedsToDates$,this.legalCases$,this.priorMedsToDateStatuses$,this.specialties$,this.visitKinds$,(m,p,_,v,D,se,me,G,$)=>({errors:m,loading:p,item:_,formName:v,priorMedsToDates:D,legalCases:se,priorMedsToDateStatuses:me,specialties:G,visitKinds:$}),{debounce:!0}),this.input$=this.select(this.paging$,this.legalCaseId$,this.priorMedsToDateStatusId$,this.specialtyId$,this.visitKindId$,this.searchQuery$,(m,p,_,v,D,se)=>({limit:m.limit,skip:m.skip,name:se,legalCaseId:p,priorMedsToDateStatusId:_,specialtyId:v,visitKindId:D,total:m.total})),this.setFormName=this.updater((m,p)=>Object.assign(Object.assign({},m),{formName:p})),this.setLegalCaseId=this.updater((m,p)=>Object.assign(Object.assign({},m),{legalCaseId:p})),this.setPriorMedsToDateStatusId=this.updater((m,p)=>Object.assign(Object.assign({},m),{priorMedsToDateStatusId:p})),this.setSpecialtyId=this.updater((m,p)=>Object.assign(Object.assign({},m),{specialtyId:p})),this.setVisitKindId=this.updater((m,p)=>Object.assign(Object.assign({},m),{visitKindId:p})),this.filterLegalCases=m=>this.data.userSelectLegalCases({input:{name:m}}).pipe((0,g._b)(p=>{let _=p.data.items;return this.patchState({legalCases:_}),_},p=>this.patchState({errors:p.graphQLErrors?p.graphQLErrors:p})),(0,B.U)(p=>p.data.items)),this.filterPriorMedsToDateStatuses=m=>this.data.userSelectPriorMedsToDateStatuses({input:{name:m}}).pipe((0,g._b)(p=>{let _=p.data.items;return this.patchState({priorMedsToDateStatuses:_}),_},p=>this.patchState({errors:p.graphQLErrors?p.graphQLErrors:p})),(0,B.U)(p=>p.data.items)),this.filterSpecialties=m=>this.data.userSelectSpecialties({input:{name:m}}).pipe((0,g._b)(p=>{let _=p.data.items;return this.patchState({specialties:_}),_},p=>this.patchState({errors:p.graphQLErrors?p.graphQLErrors:p})),(0,B.U)(p=>p.data.items)),this.filterVisitKinds=m=>this.data.userSelectVisitKinds({input:{name:m}}).pipe((0,g._b)(p=>{let _=p.data.items;return this.patchState({visitKinds:_}),_},p=>this.patchState({errors:p.graphQLErrors?p.graphQLErrors:p})),(0,B.U)(p=>p.data.items)),this.addLegalCase=this.updater((m,p)=>Object.assign(Object.assign({},m),{legalCases:m.legalCases.concat(p)})),this.addPriorMedsToDateStatus=this.updater((m,p)=>Object.assign(Object.assign({},m),{priorMedsToDateStatuses:m.priorMedsToDateStatuses.concat(p)})),this.addSpecialty=this.updater((m,p)=>Object.assign(Object.assign({},m),{specialties:m.specialties.concat(p)})),this.addVisitKind=this.updater((m,p)=>Object.assign(Object.assign({},m),{visitKinds:m.visitKinds.concat(p)})),this.setItem=this.updater((m,p)=>Object.assign(Object.assign({},m),{item:p})),this.addNewPriorMedsToDate=this.updater((m,p)=>Object.assign(Object.assign({},m),{priorMedsToDates:[...m.priorMedsToDates,p]})),this.updatePriorMedsToDate=this.updater((m,p)=>Object.assign(Object.assign({},m),{priorMedsToDates:m.priorMedsToDates.map(_=>_.id===p.id?p:_)})),this.addPriorMedsToDates=this.updater((m,p)=>Object.assign(Object.assign({},m),{priorMedsToDates:m.priorMedsToDates.concat(p)})),this.updatePriorMedsToDates=this.updater((m,p)=>Object.assign(Object.assign({},m),{priorMedsToDates:m.priorMedsToDates.map(_=>p.find(D=>D.id===_.id)||_)})),this.setSearchQuery=this.updater((m,p)=>Object.assign(Object.assign({},m),{searchQuery:p})),this.loadPriorMedsToDateEffect=this.effect(m=>m.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(p=>this.data.userPriorMedsToDate({priorMedsToDateId:p}).pipe((0,g._b)(_=>{this.patchState({item:_.data.item,errors:_.errors,loading:!1})},_=>this.patchState({loading:!1,errors:_.graphQLErrors?_.graphQLErrors:_})))))),this.loadPriorMedsToDatesEffect=this.effect(m=>m.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.input$),(0,h.w)(([p,_])=>this.data.userPriorMedsToDates({input:_}).pipe((0,g._b)(v=>(console.log("userPriorMedsToDates",v.data.items),this.patchState({paging:{limit:_.limit,skip:_.skip,total:v.data.count.total},priorMedsToDates:v.data.items,errors:v.errors,loading:!1})),v=>this.patchState({loading:!1,errors:v.graphQLErrors?v.graphQLErrors:v})))))),this.createPriorMedsToDateEffect=this.effect(m=>m.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(p=>this.priorMedsToDateService.createPriorMedsToDate(Object.assign({},p)).pipe((0,g._b)(_=>{this.addNewPriorMedsToDate(_),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:_,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},_=>{_.graphQLErrors?(this.toast.error(_.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:_.graphQLErrors?_.graphQLErrors:_})):(this.toast.error(_.Message),this.formService.setErrors(_.Data))}))))),this.updatePriorMedsToDateEffect=this.effect(m=>m.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([p,_])=>this.priorMedsToDateService.updatePriorMedsToDate(p,p.id).pipe((0,g._b)(v=>{this.updatePriorMedsToDate(v),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:v,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},v=>{v.graphQLErrors?(this.toast.error(v.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:v.graphQLErrors?v.graphQLErrors:v})):(this.toast.error(v.Message),this.formService.setErrors(v.Data))}))))),this.deletePriorMedsToDateEffect=this.effect(m=>m.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([p,_])=>this.data.userDeletePriorMedsToDate({priorMedsToDateId:_.id}).pipe((0,g._b)(v=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:v.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},v=>{v.graphQLErrors?(this.toast.error(v.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:v.graphQLErrors?v.graphQLErrors:v})):(this.toast.error(v.Message),this.formService.setErrors(v.Data))}))))),this.importExcelEffect=this.effect(m=>m.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(p=>this.priorMedsToDateService.importPriorMedsToDates(p).pipe((0,te.K)(_=>{var v;return this.toast.error(null!==(v=_.Message)&&void 0!==v?v:"Failed to save",{duration:3e3}),k.E}),(0,C.b)(_=>{const v=JSON.parse(_.created),D=JSON.parse(_.updated),se=JSON.parse(_.failed),me=v.length+D.length+se.length;this.addPriorMedsToDates(v),this.updatePriorMedsToDates(D),this.toast.success(`${v.length} created, ${D.length} updated, ${se.length} failed of total ${me}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("priorMedsToDateId")?(this.route.snapshot.paramMap.get("priorMedsToDateId"),this.setFormName("priorMedsToDate_edit")):this.setFormName("priorMedsToDate_create"),this.route.snapshot.paramMap.has("legalCaseId")){var c=this.route.snapshot.paramMap.get("legalCaseId");this.setLegalCaseId(c)}if(this.route.snapshot.paramMap.has("priorMedsToDateStatusId")){var d=this.route.snapshot.paramMap.get("priorMedsToDateStatusId");this.setPriorMedsToDateStatusId(d)}if(this.route.snapshot.paramMap.has("specialtyId")){var n=this.route.snapshot.paramMap.get("specialtyId");this.setSpecialtyId(n)}if(this.route.snapshot.paramMap.has("visitKindId")){var a=this.route.snapshot.paramMap.get("visitKindId");this.setVisitKindId(a)}}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.priorMedsToDateService.validatePriorMedsToDateExcelData(t,i.legalCases,i.priorMedsToDateStatuses)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(E.q),e.LFG(A.F0),e.LFG(A.gz),e.LFG(X.F),e.LFG(q.o),e.LFG(qz))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function Hz(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close.emit())})("formIsReady",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.priorMedsToDate)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let hu=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"priorMedsToDate_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.priorMedsToDate=i.item})):t.formName&&t.formName.currentValue&&"priorMedsToDate_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadPriorMedsToDateEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.priorMedsToDate=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(tr),e.Y36(A.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-prior-meds-to-date-form"]],inputs:{priorMedsToDate:"priorMedsToDate",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,Hz,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[w.O5,z.M,w.Ov],encapsulation:2}),s})(),fu=(()=>{class s{constructor(){this.autoHeight=!1,this.priorMedsToDates=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[{field:"legalCase.name",headerName:"Legal Case",filter:"agTextColumnFilter"},{field:"priorMedsToDateStatus.name",headerName:"Prior Meds to Date Status",filter:"agTextColumnFilter"},{field:"specialty.name",headerName:"Specialty",filter:"agTextColumnFilter"},{field:"visitKind.name",headerName:"Visit Kind",filter:"agTextColumnFilter"},{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{field:"legalCaseId",filter:"agTextColumnFilter",hide:!0},{field:"priorMedsToDateStatusId",filter:"agTextColumnFilter",hide:!0},{field:"specialtyId",filter:"agTextColumnFilter",hide:!0},{field:"visitKindId",filter:"agTextColumnFilter",hide:!0},{headerName:"Quantity",field:"quantity",valueFormatter:t=>{var i;return(0,S.oBD)(null===(i=t.data)||void 0===i?void 0:i.quantity,"",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{headerName:"Amount",field:"amount",valueFormatter:t=>{var i;return(0,S.oBD)(null===(i=t.data)||void 0===i?void 0:i.amount,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var r;t.includes(null===(r=i.data)||void 0===r?void 0:r.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-prior-meds-to-date-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(N.x,5),2&t){let r;e.iGM(r=e.CRH())&&(i.tableView=r.first)}},inputs:{autoHeight:"autoHeight",priorMedsToDates:"priorMedsToDates"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.priorMedsToDates)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[N.x],encapsulation:2}),s})();function Kz(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-prior-meds-to-date-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","priorMedsToDate_edit")("formControl",t.formControl)("priorMedsToDate",t.priorMedsToDate)}}const kz=function(){return{}};function Zz(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-prior-meds-to-date-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","priorMedsToDate_create")("formControl",t.formControl)("priorMedsToDate",e.DdM(3,kz))}}function Bz(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-prior-meds-to-date-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(u.ref.close())}),e.qZA()}2&s&&e.Q6J("priorMedsToDates",o.data.items)}let Yz=(()=>{class s extends I.fS{constructor(t){super(),this.store=t,this.store.loadPriorMedsToDatesEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.priorMedsToDates$.pipe((0,h.w)(i=>(0,T.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(tr))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","priorMedsToDate","send","close"],[1,"w-full","h-full","bg-white",3,"priorMedsToDates","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,Kz,2,3,"ng-template",null,1,e.W1O),e.YNc(3,Zz,1,4,"ng-template",null,2,e.W1O),e.YNc(5,Bz,1,1,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",u)("editTemplate",r)("createTemplate",l)("key",i.field.key)}},dependencies:[x.JJ,x.oH,J.$,hu,fu],encapsulation:2}),s})();function Xz(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-prior-meds-to-date-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","priorMedsToDate_edit")("priorMedsToDate",t.value)}}const eq=function(){return{}};function tq(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-prior-meds-to-date-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","priorMedsToDate_create")("priorMedsToDate",e.DdM(2,eq))}function iq(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-prior-meds-to-date-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(null==u.ref?null:u.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("priorMedsToDates",t.items)}}let sq=(()=>{class s extends Y{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","priorMedsToDate","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","priorMedsToDates","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,Xz,1,2,"ng-template",null,1,e.W1O),e.YNc(3,tq,1,3,"ng-template",null,2,e.W1O),e.YNc(5,iq,1,2,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[ee,hu,fu],encapsulation:2}),s})(),oq=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[tr],imports:[w.ez,R.F,x.UX,V.o,H.u,Q.P,U.t,Z,j.h,K.G,I.X0.forChild({types:[{name:"prior-meds-to-date-select",component:Yz,wrappers:["form-field"]},{name:"prior-meds-to-date-grid",component:sq}]})]}),s})(),rq=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[oq]}),s})();class Ei extends y.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class aq extends Ei{constructor(o){super("ValidatePriorMedsToDateStatusExcelDataAction"),this.valid=!1,this.excelData=o}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name)}),this.validationContext.addRule(new f.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof f.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(r=>r.name),newNames:[i.newName]}):i instanceof f.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,T.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class nq extends f.wS{constructor(o,t,i,r,l){super(o,t,i,r,l,!0)}}class lq extends f.ul{constructor(o,t,i,r=!1){super(o,t,r),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new f.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new nq("name","The priormedstodatestatus name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class cq extends Ei{constructor(o){super("CreatePriorMedsToDateStatusAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new lq("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreatePriorMedsToDateStatus({input:this.input}).pipe((0,h.w)(o=>(0,ie.of)(o.data.created)))}}class dq extends Ei{constructor(o){super("UpdatePriorMedsToDateStatusesAction"),this.priorMedsToDateStatuses=o}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.priorMedsToDateStatuses,!0))}performAction(){this.response=this.businessProvider.data.userUpdatePriorMedsToDateStatuses({input:{priorMedsToDateStatuses:this.priorMedsToDateStatuses}}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}class uq extends Ei{constructor(o,t){super("UpdatePriorMedsToDateStatusAction"),this.priorMedsToDateStatus=o,this.priorMedsToDateStatusId=t}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.priorMedsToDateStatus,!0)).addRule(new f.xF("Id","Id should be a CUID and not null",this.priorMedsToDateStatusId,!0))}performAction(){this.response=this.businessProvider.data.userUpdatePriorMedsToDateStatus({priorMedsToDateStatusId:this.priorMedsToDateStatusId,input:this.priorMedsToDateStatus}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}let _u=(()=>{class s extends y.nH{constructor(t,i,r){super("NotificationService.PriorMedsToDateStatusBusinessProviderService",t,r),this.data=i}createPriorMedsToDateStatus(t){const i=new cq(t);return i.Do(this),i.response}updatePriorMedsToDateStatus(t,i){const r=new uq(t,i);return r.Do(this),r.response}importPriorMedsToDateStatuses(t){const i=new dq(t);return i.Do(this),i.response}validatePriorMedsToDateStatusExcelData(t){const i=new aq(t);return i.Do(this),i.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(O.ed),e.LFG(E.q),e.LFG(y.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),mq=(()=>{class s extends y.nH{constructor(t,i,r){super("PriorMedsToDateStatusService",r,t),this.businessProvider=i}createPriorMedsToDateStatus(t){const i=Object.fromEntries(Object.entries(t).filter(([r,l])=>null!==l));return this.businessProvider.createPriorMedsToDateStatus(i)}updatePriorMedsToDateStatus(t,i){return this.businessProvider.updatePriorMedsToDateStatus(t,i)}importPriorMedsToDateStatuses(t){return this.businessProvider.importPriorMedsToDateStatuses(t)}validatePriorMedsToDateStatusExcelData(t){return this.businessProvider.validatePriorMedsToDateStatusExcelData(t)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(_u,8),e.LFG(_u),e.LFG(O.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),ir=(()=>{class s extends g.m1{constructor(t,i,r,l,u,P){super({loading:!1,priorMedsToDateStatuses:[],done:!1,searchQuery:"",formName:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=r,this.toast=l,this.formService=u,this.priorMedsToDateStatusService=P,this.errors$=this.select(c=>c.errors),this.loading$=this.select(c=>c.loading),this.done$=this.select(c=>c.done),this.item$=this.select(c=>c.item),this.priorMedsToDateStatuses$=this.select(c=>c.priorMedsToDateStatuses),this.paging$=this.select(c=>c.paging),this.searchQuery$=this.select(c=>c.searchQuery),this.formName$=this.select(c=>c.formName),this.actionResult$=this.select(this.item$,this.done$,(c,d)=>({item:c,done:d}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.priorMedsToDateStatuses$,(c,d,n,a,m)=>({errors:c,loading:d,item:n,formName:a,priorMedsToDateStatuses:m}),{debounce:!0}),this.input$=this.select(this.paging$,this.searchQuery$,(c,d)=>({limit:c.limit,skip:c.skip,name:d,total:c.total})),this.setFormName=this.updater((c,d)=>Object.assign(Object.assign({},c),{formName:d})),this.setItem=this.updater((c,d)=>Object.assign(Object.assign({},c),{item:d})),this.addNewPriorMedsToDateStatus=this.updater((c,d)=>Object.assign(Object.assign({},c),{priorMedsToDateStatuses:[...c.priorMedsToDateStatuses,d]})),this.updatePriorMedsToDateStatus=this.updater((c,d)=>Object.assign(Object.assign({},c),{priorMedsToDateStatuses:c.priorMedsToDateStatuses.map(n=>n.id===d.id?d:n)})),this.addPriorMedsToDateStatuses=this.updater((c,d)=>Object.assign(Object.assign({},c),{priorMedsToDateStatuses:c.priorMedsToDateStatuses.concat(d)})),this.updatePriorMedsToDateStatuses=this.updater((c,d)=>Object.assign(Object.assign({},c),{priorMedsToDateStatuses:c.priorMedsToDateStatuses.map(n=>d.find(m=>m.id===n.id)||n)})),this.setSearchQuery=this.updater((c,d)=>Object.assign(Object.assign({},c),{searchQuery:d})),this.loadPriorMedsToDateStatusEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.data.userPriorMedsToDateStatus({priorMedsToDateStatusId:d}).pipe((0,g._b)(n=>{this.patchState({item:n.data.item,errors:n.errors,loading:!1})},n=>this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})))))),this.loadPriorMedsToDateStatusesEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.input$),(0,h.w)(([d,n])=>this.data.userPriorMedsToDateStatuses({input:n}).pipe((0,g._b)(a=>this.patchState({paging:{limit:n.limit,skip:n.skip,total:a.data.count.total},priorMedsToDateStatuses:a.data.items,errors:a.errors,loading:!1}),a=>this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})))))),this.createPriorMedsToDateStatusEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.priorMedsToDateStatusService.createPriorMedsToDateStatus(Object.assign({},d)).pipe((0,g._b)(n=>{this.addNewPriorMedsToDateStatus(n),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:n,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},n=>{n.graphQLErrors?(this.toast.error(n.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})):(this.toast.error(n.Message),this.formService.setErrors(n.Data))}))))),this.updatePriorMedsToDateStatusEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([d,n])=>this.priorMedsToDateStatusService.updatePriorMedsToDateStatus(d,d.id).pipe((0,g._b)(a=>{this.updatePriorMedsToDateStatus(a),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:a,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.deletePriorMedsToDateStatusEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([d,n])=>this.data.userDeletePriorMedsToDateStatus({priorMedsToDateStatusId:n.id}).pipe((0,g._b)(a=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:a.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.importExcelEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.priorMedsToDateStatusService.importPriorMedsToDateStatuses(d).pipe((0,te.K)(n=>{var a;return this.toast.error(null!==(a=n.Message)&&void 0!==a?a:"Failed to save",{duration:3e3}),k.E}),(0,C.b)(n=>{const a=JSON.parse(n.created),m=JSON.parse(n.updated),p=JSON.parse(n.failed),_=a.length+m.length+p.length;this.addPriorMedsToDateStatuses(a),this.updatePriorMedsToDateStatuses(m),this.toast.success(`${a.length} created, ${m.length} updated, ${p.length} failed of total ${_}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("priorMedsToDateStatusId")?(this.route.snapshot.paramMap.get("priorMedsToDateStatusId"),this.setFormName("priorMedsToDateStatus_edit")):this.setFormName("priorMedsToDateStatus_create")}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.priorMedsToDateStatusService.validatePriorMedsToDateStatusExcelData(t)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(E.q),e.LFG(A.F0),e.LFG(A.gz),e.LFG(X.F),e.LFG(q.o),e.LFG(mq))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function pq(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close.emit())})("formIsReady",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.priorMedsToDateStatus)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let gu=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"priorMedsToDateStatus_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.priorMedsToDateStatus=i.item})):t.formName&&t.formName.currentValue&&"priorMedsToDateStatus_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadPriorMedsToDateStatusEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.priorMedsToDateStatus=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(ir),e.Y36(A.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-prior-meds-to-date-status-form"]],inputs:{priorMedsToDateStatus:"priorMedsToDateStatus",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,pq,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[w.O5,z.M,w.Ov],encapsulation:2}),s})(),Cu=(()=>{class s{constructor(){this.autoHeight=!1,this.priorMedsToDateStatuses=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[,{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var r;t.includes(null===(r=i.data)||void 0===r?void 0:r.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-prior-meds-to-date-status-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(N.x,5),2&t){let r;e.iGM(r=e.CRH())&&(i.tableView=r.first)}},inputs:{autoHeight:"autoHeight",priorMedsToDateStatuses:"priorMedsToDateStatuses"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.priorMedsToDateStatuses)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[N.x],encapsulation:2}),s})();function hq(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-prior-meds-to-date-status-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","priorMedsToDateStatus_edit")("formControl",t.formControl)("priorMedsToDateStatus",t.priorMedsToDateStatus)}}const fq=function(){return{}};function _q(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-prior-meds-to-date-status-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","priorMedsToDateStatus_create")("formControl",t.formControl)("priorMedsToDateStatus",e.DdM(3,fq))}}function gq(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-prior-meds-to-date-status-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(u.ref.close())}),e.qZA()}2&s&&e.Q6J("priorMedsToDateStatuses",o.data.items)}let Cq=(()=>{class s extends I.fS{constructor(t){super(),this.store=t,this.store.loadPriorMedsToDateStatusesEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.priorMedsToDateStatuses$.pipe((0,h.w)(i=>(0,T.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(ir))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","priorMedsToDateStatus","send","close"],[1,"w-full","h-full","bg-white",3,"priorMedsToDateStatuses","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,hq,2,3,"ng-template",null,1,e.W1O),e.YNc(3,_q,1,4,"ng-template",null,2,e.W1O),e.YNc(5,gq,1,1,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",u)("editTemplate",r)("createTemplate",l)("key",i.field.key)}},dependencies:[x.JJ,x.oH,J.$,gu,Cu],encapsulation:2}),s})();function Sq(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-prior-meds-to-date-status-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","priorMedsToDateStatus_edit")("priorMedsToDateStatus",t.value)}}const vq=function(){return{}};function bq(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-prior-meds-to-date-status-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","priorMedsToDateStatus_create")("priorMedsToDateStatus",e.DdM(2,vq))}function Tq(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-prior-meds-to-date-status-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(null==u.ref?null:u.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("priorMedsToDateStatuses",t.items)}}let yq=(()=>{class s extends Y{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","priorMedsToDateStatus","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","priorMedsToDateStatuses","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,Sq,1,2,"ng-template",null,1,e.W1O),e.YNc(3,bq,1,3,"ng-template",null,2,e.W1O),e.YNc(5,Tq,1,2,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[ee,gu,Cu],encapsulation:2}),s})(),wq=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[ir],imports:[w.ez,R.F,x.UX,V.o,H.u,Q.P,U.t,Z,j.h,K.G,I.X0.forChild({types:[{name:"prior-meds-to-date-status-select",component:Cq,wrappers:["form-field"]},{name:"prior-meds-to-date-status-grid",component:yq}]})]}),s})(),xq=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[wq]}),s})();class Oi extends y.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class Nq extends Oi{constructor(o){super("ValidateProcedureExcelDataAction"),this.valid=!1,this.excelData=o}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name)}),this.validationContext.addRule(new f.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof f.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(r=>r.name),newNames:[i.newName]}):i instanceof f.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,T.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class Aq extends f.wS{constructor(o,t,i,r,l){super(o,t,i,r,l,!0)}}class Fq extends f.ul{constructor(o,t,i,r=!1){super(o,t,r),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new f.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new Aq("name","The procedure name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class Dq extends Oi{constructor(o){super("CreateProcedureAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new Fq("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateProcedure({input:this.input}).pipe((0,h.w)(o=>(0,ie.of)(o.data.created)))}}class Iq extends Oi{constructor(o){super("UpdateProceduresAction"),this.procedures=o}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.procedures,!0))}performAction(){this.response=this.businessProvider.data.userUpdateProcedures({input:{procedures:this.procedures}}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}class Pq extends Oi{constructor(o,t){super("UpdateProcedureAction"),this.procedure=o,this.procedureId=t}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.procedure,!0)).addRule(new f.xF("Id","Id should be a CUID and not null",this.procedureId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateProcedure({procedureId:this.procedureId,input:this.procedure}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}let Su=(()=>{class s extends y.nH{constructor(t,i,r){super("NotificationService.ProcedureBusinessProviderService",t,r),this.data=i}createProcedure(t){const i=new Dq(t);return i.Do(this),i.response}updateProcedure(t,i){const r=new Pq(t,i);return r.Do(this),r.response}importProcedures(t){const i=new Iq(t);return i.Do(this),i.response}validateProcedureExcelData(t){const i=new Nq(t);return i.Do(this),i.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(O.ed),e.LFG(E.q),e.LFG(y.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),Wq=(()=>{class s extends y.nH{constructor(t,i,r){super("ProcedureService",r,t),this.businessProvider=i}createProcedure(t){const i=Object.fromEntries(Object.entries(t).filter(([r,l])=>null!==l));return this.businessProvider.createProcedure(i)}updateProcedure(t,i){return this.businessProvider.updateProcedure(t,i)}importProcedures(t){return this.businessProvider.importProcedures(t)}validateProcedureExcelData(t){return this.businessProvider.validateProcedureExcelData(t)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(Su,8),e.LFG(Su),e.LFG(O.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),sr=(()=>{class s extends g.m1{constructor(t,i,r,l,u,P){super({loading:!1,procedures:[],done:!1,searchQuery:"",formName:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=r,this.toast=l,this.formService=u,this.procedureService=P,this.errors$=this.select(c=>c.errors),this.loading$=this.select(c=>c.loading),this.done$=this.select(c=>c.done),this.item$=this.select(c=>c.item),this.procedures$=this.select(c=>c.procedures),this.paging$=this.select(c=>c.paging),this.searchQuery$=this.select(c=>c.searchQuery),this.formName$=this.select(c=>c.formName),this.actionResult$=this.select(this.item$,this.done$,(c,d)=>({item:c,done:d}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.procedures$,(c,d,n,a,m)=>({errors:c,loading:d,item:n,formName:a,procedures:m}),{debounce:!0}),this.input$=this.select(this.paging$,this.searchQuery$,(c,d)=>({limit:c.limit,skip:c.skip,name:d,total:c.total})),this.setFormName=this.updater((c,d)=>Object.assign(Object.assign({},c),{formName:d})),this.setItem=this.updater((c,d)=>Object.assign(Object.assign({},c),{item:d})),this.addNewProcedure=this.updater((c,d)=>Object.assign(Object.assign({},c),{procedures:[...c.procedures,d]})),this.updateProcedure=this.updater((c,d)=>Object.assign(Object.assign({},c),{procedures:c.procedures.map(n=>n.id===d.id?d:n)})),this.addProcedures=this.updater((c,d)=>Object.assign(Object.assign({},c),{procedures:c.procedures.concat(d)})),this.updateProcedures=this.updater((c,d)=>Object.assign(Object.assign({},c),{procedures:c.procedures.map(n=>d.find(m=>m.id===n.id)||n)})),this.setSearchQuery=this.updater((c,d)=>Object.assign(Object.assign({},c),{searchQuery:d})),this.loadProcedureEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.data.userProcedure({procedureId:d}).pipe((0,g._b)(n=>{this.patchState({item:n.data.item,errors:n.errors,loading:!1})},n=>this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})))))),this.loadProceduresEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.input$),(0,h.w)(([d,n])=>this.data.userProcedures({input:n}).pipe((0,g._b)(a=>this.patchState({paging:{limit:n.limit,skip:n.skip,total:a.data.count.total},procedures:a.data.items,errors:a.errors,loading:!1}),a=>this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})))))),this.createProcedureEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.procedureService.createProcedure(Object.assign({},d)).pipe((0,g._b)(n=>{this.addNewProcedure(n),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:n,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},n=>{n.graphQLErrors?(this.toast.error(n.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})):(this.toast.error(n.Message),this.formService.setErrors(n.Data))}))))),this.updateProcedureEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([d,n])=>this.procedureService.updateProcedure(d,d.id).pipe((0,g._b)(a=>{this.updateProcedure(a),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:a,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.deleteProcedureEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([d,n])=>this.data.userDeleteProcedure({procedureId:n.id}).pipe((0,g._b)(a=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:a.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.importExcelEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.procedureService.importProcedures(d).pipe((0,te.K)(n=>{var a;return this.toast.error(null!==(a=n.Message)&&void 0!==a?a:"Failed to save",{duration:3e3}),k.E}),(0,C.b)(n=>{const a=JSON.parse(n.created),m=JSON.parse(n.updated),p=JSON.parse(n.failed),_=a.length+m.length+p.length;this.addProcedures(a),this.updateProcedures(m),this.toast.success(`${a.length} created, ${m.length} updated, ${p.length} failed of total ${_}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("procedureId")?(this.route.snapshot.paramMap.get("procedureId"),this.setFormName("procedure_edit")):this.setFormName("procedure_create")}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.procedureService.validateProcedureExcelData(t)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(E.q),e.LFG(A.F0),e.LFG(A.gz),e.LFG(X.F),e.LFG(q.o),e.LFG(Wq))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function Mq(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close.emit())})("formIsReady",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.procedure)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let vu=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"procedure_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.procedure=i.item})):t.formName&&t.formName.currentValue&&"procedure_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadProcedureEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.procedure=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(sr),e.Y36(A.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-procedure-form"]],inputs:{procedure:"procedure",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,Mq,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[w.O5,z.M,w.Ov],encapsulation:2}),s})(),bu=(()=>{class s{constructor(){this.autoHeight=!1,this.procedures=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[,{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{field:"code",filter:"agTextColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var r;t.includes(null===(r=i.data)||void 0===r?void 0:r.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-procedure-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(N.x,5),2&t){let r;e.iGM(r=e.CRH())&&(i.tableView=r.first)}},inputs:{autoHeight:"autoHeight",procedures:"procedures"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.procedures)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[N.x],encapsulation:2}),s})();function Eq(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-procedure-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","procedure_edit")("formControl",t.formControl)("procedure",t.procedure)}}const Oq=function(){return{}};function Lq(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-procedure-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","procedure_create")("formControl",t.formControl)("procedure",e.DdM(3,Oq))}}function Gq(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-procedure-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(u.ref.close())}),e.qZA()}2&s&&e.Q6J("procedures",o.data.items)}let $q=(()=>{class s extends I.fS{constructor(t){super(),this.store=t,this.store.loadProceduresEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.procedures$.pipe((0,h.w)(i=>(0,T.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(sr))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","procedure","send","close"],[1,"w-full","h-full","bg-white",3,"procedures","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,Eq,2,3,"ng-template",null,1,e.W1O),e.YNc(3,Lq,1,4,"ng-template",null,2,e.W1O),e.YNc(5,Gq,1,1,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",u)("editTemplate",r)("createTemplate",l)("key",i.field.key)}},dependencies:[x.JJ,x.oH,J.$,vu,bu],encapsulation:2}),s})();function Rq(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-procedure-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","procedure_edit")("procedure",t.value)}}const Vq=function(){return{}};function Qq(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-procedure-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","procedure_create")("procedure",e.DdM(2,Vq))}function Uq(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-procedure-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(null==u.ref?null:u.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("procedures",t.items)}}let Jq=(()=>{class s extends Y{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","procedure","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","procedures","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,Rq,1,2,"ng-template",null,1,e.W1O),e.YNc(3,Qq,1,3,"ng-template",null,2,e.W1O),e.YNc(5,Uq,1,2,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[ee,vu,bu],encapsulation:2}),s})(),jq=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[sr],imports:[w.ez,R.F,x.UX,V.o,H.u,Q.P,U.t,Z,j.h,K.G,I.X0.forChild({types:[{name:"procedure-select",component:$q,wrappers:["form-field"]},{name:"procedure-grid",component:Jq}]})]}),s})(),zq=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[jq]}),s})();class Li extends y.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class qq extends Li{constructor(o,t,i){super("ValidateProcedureOrTreatmentRequestAuthorizationExcelDataAction"),this.valid=!1,this.excelData=o,this.authorizations=t,this.procedureOrTreatmentRequests=i}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name),this.validationContext.addRule(new f.mi(`authorizationName_${i}_is_valid}`,"Authorization Is Not Valid","authorization.name",t.authorization,this.authorizations,!0)),this.validationContext.addRule(new f.mi(`procedureOrTreatmentRequestName_${i}_is_valid}`,"Procedure or Treatment Request Is Not Valid","procedureOrTreatmentRequest.name",t.procedureOrTreatmentRequest,this.procedureOrTreatmentRequests,!0))}),this.validationContext.addRule(new f.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof f.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(r=>r.name),newNames:[i.newName]}):i instanceof f.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,T.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class Hq extends f.wS{constructor(o,t,i,r,l){super(o,t,i,r,l,!0)}}class Kq extends f.ul{constructor(o,t,i,r=!1){super(o,t,r),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new f.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new Hq("name","The procedureortreatmentrequestauthorization name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class kq extends Li{constructor(o){super("CreateProcedureOrTreatmentRequestAuthorizationAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new Kq("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateProcedureOrTreatmentRequestAuthorization({input:this.input}).pipe((0,h.w)(o=>(0,ie.of)(o.data.created)))}}class Zq extends Li{constructor(o){super("UpdateProcedureOrTreatmentRequestAuthorizationsAction"),this.procedureOrTreatmentRequestAuthorizations=o}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.procedureOrTreatmentRequestAuthorizations,!0))}performAction(){this.response=this.businessProvider.data.userUpdateProcedureOrTreatmentRequestAuthorizations({input:{procedureOrTreatmentRequestAuthorizations:this.procedureOrTreatmentRequestAuthorizations}}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}class Bq extends Li{constructor(o,t){super("UpdateProcedureOrTreatmentRequestAuthorizationAction"),this.procedureOrTreatmentRequestAuthorization=o,this.procedureOrTreatmentRequestAuthorizationId=t}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.procedureOrTreatmentRequestAuthorization,!0)).addRule(new f.xF("Id","Id should be a CUID and not null",this.procedureOrTreatmentRequestAuthorizationId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateProcedureOrTreatmentRequestAuthorization({procedureOrTreatmentRequestAuthorizationId:this.procedureOrTreatmentRequestAuthorizationId,input:this.procedureOrTreatmentRequestAuthorization}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}let Tu=(()=>{class s extends y.nH{constructor(t,i,r){super("NotificationService.ProcedureOrTreatmentRequestAuthorizationBusinessProviderService",t,r),this.data=i}createProcedureOrTreatmentRequestAuthorization(t){const i=new kq(t);return i.Do(this),i.response}updateProcedureOrTreatmentRequestAuthorization(t,i){const r=new Bq(t,i);return r.Do(this),r.response}importProcedureOrTreatmentRequestAuthorizations(t){const i=new Zq(t);return i.Do(this),i.response}validateProcedureOrTreatmentRequestAuthorizationExcelData(t,i,r){const l=new qq(t,i,r);return l.Do(this),l.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(O.ed),e.LFG(E.q),e.LFG(y.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),Yq=(()=>{class s extends y.nH{constructor(t,i,r){super("ProcedureOrTreatmentRequestAuthorizationService",r,t),this.businessProvider=i}createProcedureOrTreatmentRequestAuthorization(t){return this.businessProvider.createProcedureOrTreatmentRequestAuthorization(t)}updateProcedureOrTreatmentRequestAuthorization(t,i){return this.businessProvider.updateProcedureOrTreatmentRequestAuthorization(t,i)}importProcedureOrTreatmentRequestAuthorizations(t){return this.businessProvider.importProcedureOrTreatmentRequestAuthorizations(t)}validateProcedureOrTreatmentRequestAuthorizationExcelData(t,i,r){return this.businessProvider.validateProcedureOrTreatmentRequestAuthorizationExcelData(t,i,r)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(Tu,8),e.LFG(Tu),e.LFG(O.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),Gi=(()=>{class s extends g.m1{constructor(t,i,r,l,u,P){if(super({loading:!1,procedureOrTreatmentRequestAuthorizations:[],done:!1,searchQuery:"",formName:void 0,authorizationId:void 0,procedureOrTreatmentRequestId:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=r,this.toast=l,this.formService=u,this.procedureOrTreatmentRequestAuthorizationService=P,this.errors$=this.select(n=>n.errors),this.loading$=this.select(n=>n.loading),this.done$=this.select(n=>n.done),this.item$=this.select(n=>n.item),this.procedureOrTreatmentRequestAuthorizations$=this.select(n=>n.procedureOrTreatmentRequestAuthorizations),this.authorizations$=this.select(n=>n.authorizations||[]),this.procedureOrTreatmentRequests$=this.select(n=>n.procedureOrTreatmentRequests||[]),this.authorizationId$=this.select(n=>n.authorizationId),this.procedureOrTreatmentRequestId$=this.select(n=>n.procedureOrTreatmentRequestId),this.paging$=this.select(n=>n.paging),this.searchQuery$=this.select(n=>n.searchQuery),this.formName$=this.select(n=>n.formName),this.actionResult$=this.select(this.item$,this.done$,(n,a)=>({item:n,done:a}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.procedureOrTreatmentRequestAuthorizations$,this.authorizations$,this.procedureOrTreatmentRequests$,(n,a,m,p,_,v,D)=>({errors:n,loading:a,item:m,formName:p,procedureOrTreatmentRequestAuthorizations:_,authorizations:v,procedureOrTreatmentRequests:D}),{debounce:!0}),this.input$=this.select(this.paging$,this.authorizationId$,this.procedureOrTreatmentRequestId$,this.searchQuery$,(n,a,m,p)=>({limit:n.limit,skip:n.skip,name:p,authorizationId:a,procedureOrTreatmentRequestId:m,total:n.total})),this.setFormName=this.updater((n,a)=>Object.assign(Object.assign({},n),{formName:a})),this.setAuthorizationId=this.updater((n,a)=>Object.assign(Object.assign({},n),{authorizationId:a})),this.setProcedureOrTreatmentRequestId=this.updater((n,a)=>Object.assign(Object.assign({},n),{procedureOrTreatmentRequestId:a})),this.filterAuthorizations=n=>this.data.userSelectAuthorizations({input:{name:n}}).pipe((0,g._b)(a=>{let m=a.data.items;return this.patchState({authorizations:m}),m},a=>this.patchState({errors:a.graphQLErrors?a.graphQLErrors:a})),(0,B.U)(a=>a.data.items)),this.filterProcedureOrTreatmentRequests=n=>this.data.userSelectProcedureOrTreatmentRequests({input:{name:n}}).pipe((0,g._b)(a=>{let m=a.data.items;return this.patchState({procedureOrTreatmentRequests:m}),m},a=>this.patchState({errors:a.graphQLErrors?a.graphQLErrors:a})),(0,B.U)(a=>a.data.items)),this.addAuthorization=this.updater((n,a)=>Object.assign(Object.assign({},n),{authorizations:n.authorizations.concat(a)})),this.addProcedureOrTreatmentRequest=this.updater((n,a)=>Object.assign(Object.assign({},n),{procedureOrTreatmentRequests:n.procedureOrTreatmentRequests.concat(a)})),this.setItem=this.updater((n,a)=>Object.assign(Object.assign({},n),{item:a})),this.addNewProcedureOrTreatmentRequestAuthorization=this.updater((n,a)=>Object.assign(Object.assign({},n),{procedureOrTreatmentRequestAuthorizations:[...n.procedureOrTreatmentRequestAuthorizations,a]})),this.updateProcedureOrTreatmentRequestAuthorization=this.updater((n,a)=>Object.assign(Object.assign({},n),{procedureOrTreatmentRequestAuthorizations:n.procedureOrTreatmentRequestAuthorizations.map(m=>m.id===a.id?a:m)})),this.addProcedureOrTreatmentRequestAuthorizations=this.updater((n,a)=>Object.assign(Object.assign({},n),{procedureOrTreatmentRequestAuthorizations:n.procedureOrTreatmentRequestAuthorizations.concat(a)})),this.updateProcedureOrTreatmentRequestAuthorizations=this.updater((n,a)=>Object.assign(Object.assign({},n),{procedureOrTreatmentRequestAuthorizations:n.procedureOrTreatmentRequestAuthorizations.map(m=>a.find(_=>_.id===m.id)||m)})),this.setSearchQuery=this.updater((n,a)=>Object.assign(Object.assign({},n),{searchQuery:a})),this.loadProcedureOrTreatmentRequestAuthorizationEffect=this.effect(n=>n.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(a=>this.data.userProcedureOrTreatmentRequestAuthorization({procedureOrTreatmentRequestAuthorizationId:a}).pipe((0,g._b)(m=>{this.patchState({item:m.data.item,errors:m.errors,loading:!1})},m=>this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})))))),this.loadProcedureOrTreatmentRequestAuthorizationsEffect=this.effect(n=>n.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.input$),(0,h.w)(([a,m])=>this.data.userProcedureOrTreatmentRequestAuthorizations({input:m}).pipe((0,g._b)(p=>this.patchState({paging:{limit:m.limit,skip:m.skip,total:p.data.count.total},procedureOrTreatmentRequestAuthorizations:p.data.items,errors:p.errors,loading:!1}),p=>this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})))))),this.createProcedureOrTreatmentRequestAuthorizationEffect=this.effect(n=>n.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(a=>this.procedureOrTreatmentRequestAuthorizationService.createProcedureOrTreatmentRequestAuthorization(Object.assign({},a)).pipe((0,g._b)(m=>{this.addNewProcedureOrTreatmentRequestAuthorization(m),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:m,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},m=>{m.graphQLErrors?(this.toast.error(m.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})):(this.toast.error(m.Message),this.formService.setErrors(m.Data))}))))),this.updateProcedureOrTreatmentRequestAuthorizationEffect=this.effect(n=>n.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([a,m])=>this.procedureOrTreatmentRequestAuthorizationService.updateProcedureOrTreatmentRequestAuthorization(a,a.id).pipe((0,g._b)(p=>{this.updateProcedureOrTreatmentRequestAuthorization(p),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:p,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},p=>{p.graphQLErrors?(this.toast.error(p.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})):(this.toast.error(p.Message),this.formService.setErrors(p.Data))}))))),this.deleteProcedureOrTreatmentRequestAuthorizationEffect=this.effect(n=>n.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([a,m])=>this.data.userDeleteProcedureOrTreatmentRequestAuthorization({procedureOrTreatmentRequestAuthorizationId:m.id}).pipe((0,g._b)(p=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:p.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},p=>{p.graphQLErrors?(this.toast.error(p.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})):(this.toast.error(p.Message),this.formService.setErrors(p.Data))}))))),this.importExcelEffect=this.effect(n=>n.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(a=>this.procedureOrTreatmentRequestAuthorizationService.importProcedureOrTreatmentRequestAuthorizations(a).pipe((0,te.K)(m=>{var p;return this.toast.error(null!==(p=m.Message)&&void 0!==p?p:"Failed to save",{duration:3e3}),k.E}),(0,C.b)(m=>{const p=JSON.parse(m.created),_=JSON.parse(m.updated),v=JSON.parse(m.failed),D=p.length+_.length+v.length;this.addProcedureOrTreatmentRequestAuthorizations(p),this.updateProcedureOrTreatmentRequestAuthorizations(_),this.toast.success(`${p.length} created, ${_.length} updated, ${v.length} failed of total ${D}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("procedureOrTreatmentRequestAuthorizationId")?(this.route.snapshot.paramMap.get("procedureOrTreatmentRequestAuthorizationId"),this.setFormName("procedureOrTreatmentRequestAuthorization_edit")):this.setFormName("procedureOrTreatmentRequestAuthorization_create"),this.route.snapshot.paramMap.has("authorizationId")){var c=this.route.snapshot.paramMap.get("authorizationId");this.setAuthorizationId(c)}if(this.route.snapshot.paramMap.has("procedureOrTreatmentRequestId")){var d=this.route.snapshot.paramMap.get("procedureOrTreatmentRequestId");this.setProcedureOrTreatmentRequestId(d)}}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.procedureOrTreatmentRequestAuthorizationService.validateProcedureOrTreatmentRequestAuthorizationExcelData(t,i.authorizations,i.procedureOrTreatmentRequests)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(E.q),e.LFG(A.F0),e.LFG(A.gz),e.LFG(X.F),e.LFG(q.o),e.LFG(Yq))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function Xq(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close.emit())})("formIsReady",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.procedureOrTreatmentRequestAuthorization)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let yu=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"procedureOrTreatmentRequestAuthorization_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({id:null,name:""}),this.store.vm$.subscribe(i=>{this.procedureOrTreatmentRequestAuthorization=i.item})):t.formName&&t.formName.currentValue&&"procedureOrTreatmentRequestAuthorization_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadProcedureOrTreatmentRequestAuthorizationEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.procedureOrTreatmentRequestAuthorization=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Gi),e.Y36(A.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-procedure-or-treatment-request-authorization-form"]],inputs:{procedureOrTreatmentRequestAuthorization:"procedureOrTreatmentRequestAuthorization",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,Xq,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[w.O5,z.M,w.Ov],encapsulation:2}),s})(),wu=(()=>{class s{constructor(){this.autoHeight=!1,this.procedureOrTreatmentRequestAuthorizations=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[{field:"authorization.name",headerName:"Authorization",filter:"agTextColumnFilter"},{field:"procedureOrTreatmentRequest.name",headerName:"Procedure or Treatment Request",filter:"agTextColumnFilter"},{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{field:"authorizationId",filter:"agTextColumnFilter",hide:!0},{field:"procedureOrTreatmentRequestId",filter:"agTextColumnFilter",hide:!0}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var r;t.includes(null===(r=i.data)||void 0===r?void 0:r.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-procedure-or-treatment-request-authorization-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(N.x,5),2&t){let r;e.iGM(r=e.CRH())&&(i.tableView=r.first)}},inputs:{autoHeight:"autoHeight",procedureOrTreatmentRequestAuthorizations:"procedureOrTreatmentRequestAuthorizations"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:6,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.procedureOrTreatmentRequestAuthorizations)("showSidebar",!1)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[N.x],encapsulation:2}),s})();function eH(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-procedure-or-treatment-request-authorization-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","procedureOrTreatmentRequestAuthorization_edit")("formControl",t.formControl)("procedureOrTreatmentRequestAuthorization",t.procedureOrTreatmentRequestAuthorization)}}const tH=function(){return{}};function iH(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-procedure-or-treatment-request-authorization-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","procedureOrTreatmentRequestAuthorization_create")("formControl",t.formControl)("procedureOrTreatmentRequestAuthorization",e.DdM(3,tH))}}function sH(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-procedure-or-treatment-request-authorization-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(u.ref.close())}),e.qZA()}2&s&&e.Q6J("procedureOrTreatmentRequestAuthorizations",o.data.items)}let oH=(()=>{class s extends I.fS{constructor(t){super(),this.store=t,this.store.loadProcedureOrTreatmentRequestAuthorizationsEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.procedureOrTreatmentRequestAuthorizations$.pipe((0,h.w)(i=>(0,T.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Gi))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e._Bn([Gi]),e.qOj],decls:7,vars:5,consts:[[3,"to","control","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","procedureOrTreatmentRequestAuthorization","send","close"],[1,"w-full","h-full","bg-white",3,"procedureOrTreatmentRequestAuthorizations","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"ui-select-form",0),e.YNc(1,eH,2,3,"ng-template",null,1,e.W1O),e.YNc(3,iH,1,4,"ng-template",null,2,e.W1O),e.YNc(5,sH,1,1,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[x.JJ,x.oH,J.$,yu,wu],encapsulation:2}),s})();function rH(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-procedure-or-treatment-request-authorization-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","procedureOrTreatmentRequestAuthorization_edit")("procedureOrTreatmentRequestAuthorization",t.value)}}const aH=function(){return{}};function nH(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-procedure-or-treatment-request-authorization-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","procedureOrTreatmentRequestAuthorization_create")("procedureOrTreatmentRequestAuthorization",e.DdM(2,aH))}function lH(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-procedure-or-treatment-request-authorization-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(null==u.ref?null:u.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("procedureOrTreatmentRequestAuthorizations",t.items)}}let cH=(()=>{class s extends Y{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:6,consts:[[3,"data","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","procedureOrTreatmentRequestAuthorization","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","procedureOrTreatmentRequestAuthorizations","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,rH,1,2,"ng-template",null,1,e.W1O),e.YNc(3,nH,1,3,"ng-template",null,2,e.W1O),e.YNc(5,lH,1,2,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("data",i.data)("title",i.to.title)("onSave",i.onSave)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[ee,yu,wu],encapsulation:2}),s})(),dH=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[Gi],imports:[w.ez,R.F,x.UX,V.o,H.u,Q.P,U.t,Z,j.h,K.G,I.X0.forChild({types:[{name:"procedure-or-treatment-request-authorization-select",component:oH,wrappers:["form-field"]},{name:"procedure-or-treatment-request-authorization-grid",component:cH}]})]}),s})(),uH=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[dH]}),s})();class $i extends y.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class mH extends $i{constructor(o){super("ValidateProcedureSiteExcelDataAction"),this.valid=!1,this.excelData=o}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name)}),this.validationContext.addRule(new f.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof f.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(r=>r.name),newNames:[i.newName]}):i instanceof f.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,T.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class pH extends f.wS{constructor(o,t,i,r,l){super(o,t,i,r,l,!0)}}class hH extends f.ul{constructor(o,t,i,r=!1){super(o,t,r),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new f.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new pH("name","The proceduresite name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class fH extends $i{constructor(o){super("CreateProcedureSiteAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new hH("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateProcedureSite({input:this.input}).pipe((0,h.w)(o=>(0,ie.of)(o.data.created)))}}class _H extends $i{constructor(o){super("UpdateProcedureSitesAction"),this.procedureSites=o}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.procedureSites,!0))}performAction(){this.response=this.businessProvider.data.userUpdateProcedureSites({input:{procedureSites:this.procedureSites}}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}class gH extends $i{constructor(o,t){super("UpdateProcedureSiteAction"),this.procedureSite=o,this.procedureSiteId=t}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.procedureSite,!0)).addRule(new f.xF("Id","Id should be a CUID and not null",this.procedureSiteId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateProcedureSite({procedureSiteId:this.procedureSiteId,input:this.procedureSite}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}let xu=(()=>{class s extends y.nH{constructor(t,i,r){super("NotificationService.ProcedureSiteBusinessProviderService",t,r),this.data=i}createProcedureSite(t){const i=new fH(t);return i.Do(this),i.response}updateProcedureSite(t,i){const r=new gH(t,i);return r.Do(this),r.response}importProcedureSites(t){const i=new _H(t);return i.Do(this),i.response}validateProcedureSiteExcelData(t){const i=new mH(t);return i.Do(this),i.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(O.ed),e.LFG(E.q),e.LFG(y.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),CH=(()=>{class s extends y.nH{constructor(t,i,r){super("ProcedureSiteService",r,t),this.businessProvider=i}createProcedureSite(t){const i=Object.fromEntries(Object.entries(t).filter(([r,l])=>null!==l));return this.businessProvider.createProcedureSite(i)}updateProcedureSite(t,i){return this.businessProvider.updateProcedureSite(t,i)}importProcedureSites(t){return this.businessProvider.importProcedureSites(t)}validateProcedureSiteExcelData(t){return this.businessProvider.validateProcedureSiteExcelData(t)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(xu,8),e.LFG(xu),e.LFG(O.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),or=(()=>{class s extends g.m1{constructor(t,i,r,l,u,P){super({loading:!1,procedureSites:[],done:!1,searchQuery:"",formName:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=r,this.toast=l,this.formService=u,this.procedureSiteService=P,this.errors$=this.select(c=>c.errors),this.loading$=this.select(c=>c.loading),this.done$=this.select(c=>c.done),this.item$=this.select(c=>c.item),this.procedureSites$=this.select(c=>c.procedureSites),this.paging$=this.select(c=>c.paging),this.searchQuery$=this.select(c=>c.searchQuery),this.formName$=this.select(c=>c.formName),this.actionResult$=this.select(this.item$,this.done$,(c,d)=>({item:c,done:d}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.procedureSites$,(c,d,n,a,m)=>({errors:c,loading:d,item:n,formName:a,procedureSites:m}),{debounce:!0}),this.input$=this.select(this.paging$,this.searchQuery$,(c,d)=>({limit:c.limit,skip:c.skip,name:d,total:c.total})),this.setFormName=this.updater((c,d)=>Object.assign(Object.assign({},c),{formName:d})),this.setItem=this.updater((c,d)=>Object.assign(Object.assign({},c),{item:d})),this.addNewProcedureSite=this.updater((c,d)=>Object.assign(Object.assign({},c),{procedureSites:[...c.procedureSites,d]})),this.updateProcedureSite=this.updater((c,d)=>Object.assign(Object.assign({},c),{procedureSites:c.procedureSites.map(n=>n.id===d.id?d:n)})),this.addProcedureSites=this.updater((c,d)=>Object.assign(Object.assign({},c),{procedureSites:c.procedureSites.concat(d)})),this.updateProcedureSites=this.updater((c,d)=>Object.assign(Object.assign({},c),{procedureSites:c.procedureSites.map(n=>d.find(m=>m.id===n.id)||n)})),this.setSearchQuery=this.updater((c,d)=>Object.assign(Object.assign({},c),{searchQuery:d})),this.loadProcedureSiteEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.data.userProcedureSite({procedureSiteId:d}).pipe((0,g._b)(n=>{this.patchState({item:n.data.item,errors:n.errors,loading:!1})},n=>this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})))))),this.loadProcedureSitesEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.input$),(0,h.w)(([d,n])=>this.data.userProcedureSites({input:n}).pipe((0,g._b)(a=>this.patchState({paging:{limit:n.limit,skip:n.skip,total:a.data.count.total},procedureSites:a.data.items,errors:a.errors,loading:!1}),a=>this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})))))),this.createProcedureSiteEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.procedureSiteService.createProcedureSite(Object.assign({},d)).pipe((0,g._b)(n=>{this.addNewProcedureSite(n),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:n,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},n=>{n.graphQLErrors?(this.toast.error(n.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})):(this.toast.error(n.Message),this.formService.setErrors(n.Data))}))))),this.updateProcedureSiteEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([d,n])=>this.procedureSiteService.updateProcedureSite(d,d.id).pipe((0,g._b)(a=>{this.updateProcedureSite(a),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:a,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.deleteProcedureSiteEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([d,n])=>this.data.userDeleteProcedureSite({procedureSiteId:n.id}).pipe((0,g._b)(a=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:a.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.importExcelEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.procedureSiteService.importProcedureSites(d).pipe((0,te.K)(n=>{var a;return this.toast.error(null!==(a=n.Message)&&void 0!==a?a:"Failed to save",{duration:3e3}),k.E}),(0,C.b)(n=>{const a=JSON.parse(n.created),m=JSON.parse(n.updated),p=JSON.parse(n.failed),_=a.length+m.length+p.length;this.addProcedureSites(a),this.updateProcedureSites(m),this.toast.success(`${a.length} created, ${m.length} updated, ${p.length} failed of total ${_}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("procedureSiteId")?(this.route.snapshot.paramMap.get("procedureSiteId"),this.setFormName("procedureSite_edit")):this.setFormName("procedureSite_create")}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.procedureSiteService.validateProcedureSiteExcelData(t)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(E.q),e.LFG(A.F0),e.LFG(A.gz),e.LFG(X.F),e.LFG(q.o),e.LFG(CH))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function SH(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close.emit())})("formIsReady",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.procedureSite)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let Nu=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"procedureSite_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.procedureSite=i.item})):t.formName&&t.formName.currentValue&&"procedureSite_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadProcedureSiteEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.procedureSite=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(or),e.Y36(A.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-procedure-site-form"]],inputs:{procedureSite:"procedureSite",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,SH,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[w.O5,z.M,w.Ov],encapsulation:2}),s})(),Au=(()=>{class s{constructor(){this.autoHeight=!1,this.procedureSites=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[,{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{field:"code",filter:"agTextColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var r;t.includes(null===(r=i.data)||void 0===r?void 0:r.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-procedure-site-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(N.x,5),2&t){let r;e.iGM(r=e.CRH())&&(i.tableView=r.first)}},inputs:{autoHeight:"autoHeight",procedureSites:"procedureSites"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.procedureSites)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[N.x],encapsulation:2}),s})();function vH(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-procedure-site-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","procedureSite_edit")("formControl",t.formControl)("procedureSite",t.procedureSite)}}const bH=function(){return{}};function TH(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-procedure-site-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","procedureSite_create")("formControl",t.formControl)("procedureSite",e.DdM(3,bH))}}function yH(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-procedure-site-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(u.ref.close())}),e.qZA()}2&s&&e.Q6J("procedureSites",o.data.items)}let wH=(()=>{class s extends I.fS{constructor(t){super(),this.store=t,this.store.loadProcedureSitesEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.procedureSites$.pipe((0,h.w)(i=>(0,T.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(or))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","procedureSite","send","close"],[1,"w-full","h-full","bg-white",3,"procedureSites","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,vH,2,3,"ng-template",null,1,e.W1O),e.YNc(3,TH,1,4,"ng-template",null,2,e.W1O),e.YNc(5,yH,1,1,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",u)("editTemplate",r)("createTemplate",l)("key",i.field.key)}},dependencies:[x.JJ,x.oH,J.$,Nu,Au],encapsulation:2}),s})();function xH(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-procedure-site-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","procedureSite_edit")("procedureSite",t.value)}}const NH=function(){return{}};function AH(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-procedure-site-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","procedureSite_create")("procedureSite",e.DdM(2,NH))}function FH(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-procedure-site-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(null==u.ref?null:u.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("procedureSites",t.items)}}let DH=(()=>{class s extends Y{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","procedureSite","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","procedureSites","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,xH,1,2,"ng-template",null,1,e.W1O),e.YNc(3,AH,1,3,"ng-template",null,2,e.W1O),e.YNc(5,FH,1,2,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[ee,Nu,Au],encapsulation:2}),s})(),IH=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[or],imports:[w.ez,R.F,x.UX,V.o,H.u,Q.P,U.t,Z,j.h,K.G,I.X0.forChild({types:[{name:"procedure-site-select",component:wH,wrappers:["form-field"]},{name:"procedure-site-grid",component:DH}]})]}),s})(),PH=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[IH]}),s})();class Ri extends y.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class WH extends Ri{constructor(o){super("ValidateProcedureStatusExcelDataAction"),this.valid=!1,this.excelData=o}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name)}),this.validationContext.addRule(new f.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof f.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(r=>r.name),newNames:[i.newName]}):i instanceof f.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,T.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class MH extends f.wS{constructor(o,t,i,r,l){super(o,t,i,r,l,!0)}}class EH extends f.ul{constructor(o,t,i,r=!1){super(o,t,r),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new f.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new MH("name","The procedurestatus name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class OH extends Ri{constructor(o){super("CreateProcedureStatusAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new EH("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateProcedureStatus({input:this.input}).pipe((0,h.w)(o=>(0,ie.of)(o.data.created)))}}class LH extends Ri{constructor(o){super("UpdateProcedureStatusesAction"),this.procedureStatuses=o}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.procedureStatuses,!0))}performAction(){this.response=this.businessProvider.data.userUpdateProcedureStatuses({input:{procedureStatuses:this.procedureStatuses}}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}class GH extends Ri{constructor(o,t){super("UpdateProcedureStatusAction"),this.procedureStatus=o,this.procedureStatusId=t}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.procedureStatus,!0)).addRule(new f.xF("Id","Id should be a CUID and not null",this.procedureStatusId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateProcedureStatus({procedureStatusId:this.procedureStatusId,input:this.procedureStatus}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}let Fu=(()=>{class s extends y.nH{constructor(t,i,r){super("NotificationService.ProcedureStatusBusinessProviderService",t,r),this.data=i}createProcedureStatus(t){const i=new OH(t);return i.Do(this),i.response}updateProcedureStatus(t,i){const r=new GH(t,i);return r.Do(this),r.response}importProcedureStatuses(t){const i=new LH(t);return i.Do(this),i.response}validateProcedureStatusExcelData(t){const i=new WH(t);return i.Do(this),i.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(O.ed),e.LFG(E.q),e.LFG(y.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),$H=(()=>{class s extends y.nH{constructor(t,i,r){super("ProcedureStatusService",r,t),this.businessProvider=i}createProcedureStatus(t){const i=Object.fromEntries(Object.entries(t).filter(([r,l])=>null!==l));return this.businessProvider.createProcedureStatus(i)}updateProcedureStatus(t,i){return this.businessProvider.updateProcedureStatus(t,i)}importProcedureStatuses(t){return this.businessProvider.importProcedureStatuses(t)}validateProcedureStatusExcelData(t){return this.businessProvider.validateProcedureStatusExcelData(t)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(Fu,8),e.LFG(Fu),e.LFG(O.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),rr=(()=>{class s extends g.m1{constructor(t,i,r,l,u,P){super({loading:!1,procedureStatuses:[],done:!1,searchQuery:"",formName:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=r,this.toast=l,this.formService=u,this.procedureStatusService=P,this.errors$=this.select(c=>c.errors),this.loading$=this.select(c=>c.loading),this.done$=this.select(c=>c.done),this.item$=this.select(c=>c.item),this.procedureStatuses$=this.select(c=>c.procedureStatuses),this.paging$=this.select(c=>c.paging),this.searchQuery$=this.select(c=>c.searchQuery),this.formName$=this.select(c=>c.formName),this.actionResult$=this.select(this.item$,this.done$,(c,d)=>({item:c,done:d}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.procedureStatuses$,(c,d,n,a,m)=>({errors:c,loading:d,item:n,formName:a,procedureStatuses:m}),{debounce:!0}),this.input$=this.select(this.paging$,this.searchQuery$,(c,d)=>({limit:c.limit,skip:c.skip,name:d,total:c.total})),this.setFormName=this.updater((c,d)=>Object.assign(Object.assign({},c),{formName:d})),this.setItem=this.updater((c,d)=>Object.assign(Object.assign({},c),{item:d})),this.addNewProcedureStatus=this.updater((c,d)=>Object.assign(Object.assign({},c),{procedureStatuses:[...c.procedureStatuses,d]})),this.updateProcedureStatus=this.updater((c,d)=>Object.assign(Object.assign({},c),{procedureStatuses:c.procedureStatuses.map(n=>n.id===d.id?d:n)})),this.addProcedureStatuses=this.updater((c,d)=>Object.assign(Object.assign({},c),{procedureStatuses:c.procedureStatuses.concat(d)})),this.updateProcedureStatuses=this.updater((c,d)=>Object.assign(Object.assign({},c),{procedureStatuses:c.procedureStatuses.map(n=>d.find(m=>m.id===n.id)||n)})),this.setSearchQuery=this.updater((c,d)=>Object.assign(Object.assign({},c),{searchQuery:d})),this.loadProcedureStatusEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.data.userProcedureStatus({procedureStatusId:d}).pipe((0,g._b)(n=>{this.patchState({item:n.data.item,errors:n.errors,loading:!1})},n=>this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})))))),this.loadProcedureStatusesEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.input$),(0,h.w)(([d,n])=>this.data.userProcedureStatuses({input:n}).pipe((0,g._b)(a=>this.patchState({paging:{limit:n.limit,skip:n.skip,total:a.data.count.total},procedureStatuses:a.data.items,errors:a.errors,loading:!1}),a=>this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})))))),this.createProcedureStatusEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.procedureStatusService.createProcedureStatus(Object.assign({},d)).pipe((0,g._b)(n=>{this.addNewProcedureStatus(n),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:n,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},n=>{n.graphQLErrors?(this.toast.error(n.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})):(this.toast.error(n.Message),this.formService.setErrors(n.Data))}))))),this.updateProcedureStatusEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([d,n])=>this.procedureStatusService.updateProcedureStatus(d,d.id).pipe((0,g._b)(a=>{this.updateProcedureStatus(a),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:a,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.deleteProcedureStatusEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([d,n])=>this.data.userDeleteProcedureStatus({procedureStatusId:n.id}).pipe((0,g._b)(a=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:a.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.importExcelEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.procedureStatusService.importProcedureStatuses(d).pipe((0,te.K)(n=>{var a;return this.toast.error(null!==(a=n.Message)&&void 0!==a?a:"Failed to save",{duration:3e3}),k.E}),(0,C.b)(n=>{const a=JSON.parse(n.created),m=JSON.parse(n.updated),p=JSON.parse(n.failed),_=a.length+m.length+p.length;this.addProcedureStatuses(a),this.updateProcedureStatuses(m),this.toast.success(`${a.length} created, ${m.length} updated, ${p.length} failed of total ${_}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("procedureStatusId")?(this.route.snapshot.paramMap.get("procedureStatusId"),this.setFormName("procedureStatus_edit")):this.setFormName("procedureStatus_create")}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.procedureStatusService.validateProcedureStatusExcelData(t)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(E.q),e.LFG(A.F0),e.LFG(A.gz),e.LFG(X.F),e.LFG(q.o),e.LFG($H))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function RH(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close.emit())})("formIsReady",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.procedureStatus)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let Du=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"procedureStatus_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.procedureStatus=i.item})):t.formName&&t.formName.currentValue&&"procedureStatus_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadProcedureStatusEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.procedureStatus=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(rr),e.Y36(A.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-procedure-status-form"]],inputs:{procedureStatus:"procedureStatus",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,RH,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[w.O5,z.M,w.Ov],encapsulation:2}),s})(),Iu=(()=>{class s{constructor(){this.autoHeight=!1,this.procedureStatuses=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[,{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var r;t.includes(null===(r=i.data)||void 0===r?void 0:r.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-procedure-status-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(N.x,5),2&t){let r;e.iGM(r=e.CRH())&&(i.tableView=r.first)}},inputs:{autoHeight:"autoHeight",procedureStatuses:"procedureStatuses"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.procedureStatuses)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[N.x],encapsulation:2}),s})();function VH(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-procedure-status-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","procedureStatus_edit")("formControl",t.formControl)("procedureStatus",t.procedureStatus)}}const QH=function(){return{}};function UH(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-procedure-status-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","procedureStatus_create")("formControl",t.formControl)("procedureStatus",e.DdM(3,QH))}}function JH(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-procedure-status-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(u.ref.close())}),e.qZA()}2&s&&e.Q6J("procedureStatuses",o.data.items)}let jH=(()=>{class s extends I.fS{constructor(t){super(),this.store=t,this.store.loadProcedureStatusesEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.procedureStatuses$.pipe((0,h.w)(i=>(0,T.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(rr))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","procedureStatus","send","close"],[1,"w-full","h-full","bg-white",3,"procedureStatuses","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,VH,2,3,"ng-template",null,1,e.W1O),e.YNc(3,UH,1,4,"ng-template",null,2,e.W1O),e.YNc(5,JH,1,1,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",u)("editTemplate",r)("createTemplate",l)("key",i.field.key)}},dependencies:[x.JJ,x.oH,J.$,Du,Iu],encapsulation:2}),s})();function zH(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-procedure-status-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","procedureStatus_edit")("procedureStatus",t.value)}}const qH=function(){return{}};function HH(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-procedure-status-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","procedureStatus_create")("procedureStatus",e.DdM(2,qH))}function KH(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-procedure-status-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(null==u.ref?null:u.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("procedureStatuses",t.items)}}let kH=(()=>{class s extends Y{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","procedureStatus","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","procedureStatuses","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,zH,1,2,"ng-template",null,1,e.W1O),e.YNc(3,HH,1,3,"ng-template",null,2,e.W1O),e.YNc(5,KH,1,2,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[ee,Du,Iu],encapsulation:2}),s})(),ZH=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[rr],imports:[w.ez,R.F,x.UX,V.o,H.u,Q.P,U.t,Z,j.h,K.G,I.X0.forChild({types:[{name:"procedure-status-select",component:jH,wrappers:["form-field"]},{name:"procedure-status-grid",component:kH}]})]}),s})(),BH=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[ZH]}),s})();class Vi extends y.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class YH extends Vi{constructor(o){super("ValidateProcedureTypeExcelDataAction"),this.valid=!1,this.excelData=o}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name)}),this.validationContext.addRule(new f.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof f.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(r=>r.name),newNames:[i.newName]}):i instanceof f.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,T.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class XH extends f.wS{constructor(o,t,i,r,l){super(o,t,i,r,l,!0)}}class eK extends f.ul{constructor(o,t,i,r=!1){super(o,t,r),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new f.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new XH("name","The proceduretype name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class tK extends Vi{constructor(o){super("CreateProcedureTypeAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new eK("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateProcedureType({input:this.input}).pipe((0,h.w)(o=>(0,ie.of)(o.data.created)))}}class iK extends Vi{constructor(o){super("UpdateProcedureTypesAction"),this.procedureTypes=o}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.procedureTypes,!0))}performAction(){this.response=this.businessProvider.data.userUpdateProcedureTypes({input:{procedureTypes:this.procedureTypes}}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}class sK extends Vi{constructor(o,t){super("UpdateProcedureTypeAction"),this.procedureType=o,this.procedureTypeId=t}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.procedureType,!0)).addRule(new f.xF("Id","Id should be a CUID and not null",this.procedureTypeId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateProcedureType({procedureTypeId:this.procedureTypeId,input:this.procedureType}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}let Pu=(()=>{class s extends y.nH{constructor(t,i,r){super("NotificationService.ProcedureTypeBusinessProviderService",t,r),this.data=i}createProcedureType(t){const i=new tK(t);return i.Do(this),i.response}updateProcedureType(t,i){const r=new sK(t,i);return r.Do(this),r.response}importProcedureTypes(t){const i=new iK(t);return i.Do(this),i.response}validateProcedureTypeExcelData(t){const i=new YH(t);return i.Do(this),i.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(O.ed),e.LFG(E.q),e.LFG(y.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),oK=(()=>{class s extends y.nH{constructor(t,i,r){super("ProcedureTypeService",r,t),this.businessProvider=i}createProcedureType(t){const i=Object.fromEntries(Object.entries(t).filter(([r,l])=>null!==l));return this.businessProvider.createProcedureType(i)}updateProcedureType(t,i){return this.businessProvider.updateProcedureType(t,i)}importProcedureTypes(t){return this.businessProvider.importProcedureTypes(t)}validateProcedureTypeExcelData(t){return this.businessProvider.validateProcedureTypeExcelData(t)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(Pu,8),e.LFG(Pu),e.LFG(O.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),ar=(()=>{class s extends g.m1{constructor(t,i,r,l,u,P){super({loading:!1,procedureTypes:[],done:!1,searchQuery:"",formName:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=r,this.toast=l,this.formService=u,this.procedureTypeService=P,this.errors$=this.select(c=>c.errors),this.loading$=this.select(c=>c.loading),this.done$=this.select(c=>c.done),this.item$=this.select(c=>c.item),this.procedureTypes$=this.select(c=>c.procedureTypes),this.paging$=this.select(c=>c.paging),this.searchQuery$=this.select(c=>c.searchQuery),this.formName$=this.select(c=>c.formName),this.actionResult$=this.select(this.item$,this.done$,(c,d)=>({item:c,done:d}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.procedureTypes$,(c,d,n,a,m)=>({errors:c,loading:d,item:n,formName:a,procedureTypes:m}),{debounce:!0}),this.input$=this.select(this.paging$,this.searchQuery$,(c,d)=>({limit:c.limit,skip:c.skip,name:d,total:c.total})),this.setFormName=this.updater((c,d)=>Object.assign(Object.assign({},c),{formName:d})),this.setItem=this.updater((c,d)=>Object.assign(Object.assign({},c),{item:d})),this.addNewProcedureType=this.updater((c,d)=>Object.assign(Object.assign({},c),{procedureTypes:[...c.procedureTypes,d]})),this.updateProcedureType=this.updater((c,d)=>Object.assign(Object.assign({},c),{procedureTypes:c.procedureTypes.map(n=>n.id===d.id?d:n)})),this.addProcedureTypes=this.updater((c,d)=>Object.assign(Object.assign({},c),{procedureTypes:c.procedureTypes.concat(d)})),this.updateProcedureTypes=this.updater((c,d)=>Object.assign(Object.assign({},c),{procedureTypes:c.procedureTypes.map(n=>d.find(m=>m.id===n.id)||n)})),this.setSearchQuery=this.updater((c,d)=>Object.assign(Object.assign({},c),{searchQuery:d})),this.loadProcedureTypeEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.data.userProcedureType({procedureTypeId:d}).pipe((0,g._b)(n=>{this.patchState({item:n.data.item,errors:n.errors,loading:!1})},n=>this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})))))),this.loadProcedureTypesEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.input$),(0,h.w)(([d,n])=>this.data.userProcedureTypes({input:n}).pipe((0,g._b)(a=>this.patchState({paging:{limit:n.limit,skip:n.skip,total:a.data.count.total},procedureTypes:a.data.items,errors:a.errors,loading:!1}),a=>this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})))))),this.createProcedureTypeEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.procedureTypeService.createProcedureType(Object.assign({},d)).pipe((0,g._b)(n=>{this.addNewProcedureType(n),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:n,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},n=>{n.graphQLErrors?(this.toast.error(n.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})):(this.toast.error(n.Message),this.formService.setErrors(n.Data))}))))),this.updateProcedureTypeEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([d,n])=>this.procedureTypeService.updateProcedureType(d,d.id).pipe((0,g._b)(a=>{this.updateProcedureType(a),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:a,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.deleteProcedureTypeEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([d,n])=>this.data.userDeleteProcedureType({procedureTypeId:n.id}).pipe((0,g._b)(a=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:a.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.importExcelEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.procedureTypeService.importProcedureTypes(d).pipe((0,te.K)(n=>{var a;return this.toast.error(null!==(a=n.Message)&&void 0!==a?a:"Failed to save",{duration:3e3}),k.E}),(0,C.b)(n=>{const a=JSON.parse(n.created),m=JSON.parse(n.updated),p=JSON.parse(n.failed),_=a.length+m.length+p.length;this.addProcedureTypes(a),this.updateProcedureTypes(m),this.toast.success(`${a.length} created, ${m.length} updated, ${p.length} failed of total ${_}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("procedureTypeId")?(this.route.snapshot.paramMap.get("procedureTypeId"),this.setFormName("procedureType_edit")):this.setFormName("procedureType_create")}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.procedureTypeService.validateProcedureTypeExcelData(t)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(E.q),e.LFG(A.F0),e.LFG(A.gz),e.LFG(X.F),e.LFG(q.o),e.LFG(oK))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function rK(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close.emit())})("formIsReady",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.procedureType)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let Wu=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"procedureType_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.procedureType=i.item})):t.formName&&t.formName.currentValue&&"procedureType_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadProcedureTypeEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.procedureType=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(ar),e.Y36(A.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-procedure-type-form"]],inputs:{procedureType:"procedureType",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,rK,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[w.O5,z.M,w.Ov],encapsulation:2}),s})(),Mu=(()=>{class s{constructor(){this.autoHeight=!1,this.procedureTypes=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[,{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{field:"orderIndex",filter:"agTextColumnFilter"},{field:"dateCreated",filter:"agDateColumnFilter"},{headerName:"Is System",field:"isSystem",filter:"agSetColumnFilter",cellRenderer:"checkboxRenderer"},{headerName:"Removed",field:"removed",filter:"agSetColumnFilter",cellRenderer:"checkboxRenderer"},{field:"modality",filter:"agTextColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var r;t.includes(null===(r=i.data)||void 0===r?void 0:r.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-procedure-type-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(N.x,5),2&t){let r;e.iGM(r=e.CRH())&&(i.tableView=r.first)}},inputs:{autoHeight:"autoHeight",procedureTypes:"procedureTypes"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.procedureTypes)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[N.x],encapsulation:2}),s})();function aK(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-procedure-type-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","procedureType_edit")("formControl",t.formControl)("procedureType",t.procedureType)}}const nK=function(){return{}};function lK(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-procedure-type-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","procedureType_create")("formControl",t.formControl)("procedureType",e.DdM(3,nK))}}function cK(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-procedure-type-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(u.ref.close())}),e.qZA()}2&s&&e.Q6J("procedureTypes",o.data.items)}let dK=(()=>{class s extends I.fS{constructor(t){super(),this.store=t,this.store.loadProcedureTypesEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.procedureTypes$.pipe((0,h.w)(i=>(0,T.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(ar))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","procedureType","send","close"],[1,"w-full","h-full","bg-white",3,"procedureTypes","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,aK,2,3,"ng-template",null,1,e.W1O),e.YNc(3,lK,1,4,"ng-template",null,2,e.W1O),e.YNc(5,cK,1,1,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",u)("editTemplate",r)("createTemplate",l)("key",i.field.key)}},dependencies:[x.JJ,x.oH,J.$,Wu,Mu],encapsulation:2}),s})();function uK(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-procedure-type-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","procedureType_edit")("procedureType",t.value)}}const mK=function(){return{}};function pK(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-procedure-type-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","procedureType_create")("procedureType",e.DdM(2,mK))}function hK(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-procedure-type-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(null==u.ref?null:u.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("procedureTypes",t.items)}}let fK=(()=>{class s extends Y{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","procedureType","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","procedureTypes","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,uK,1,2,"ng-template",null,1,e.W1O),e.YNc(3,pK,1,3,"ng-template",null,2,e.W1O),e.YNc(5,hK,1,2,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[ee,Wu,Mu],encapsulation:2}),s})(),_K=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[ar],imports:[w.ez,R.F,x.UX,V.o,H.u,Q.P,U.t,Z,j.h,K.G,I.X0.forChild({types:[{name:"procedure-type-select",component:dK,wrappers:["form-field"]},{name:"procedure-type-grid",component:fK}]})]}),s})(),gK=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[_K]}),s})();class Qi extends y.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class CK extends Qi{constructor(o,t,i,r,l){super("ValidateProcedureVendorExcelDataAction"),this.valid=!1,this.excelData=o,this.procedures=t,this.contracts=i,this.vendors=r,this.statuses=l}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name),this.validationContext.addRule(new f.mi(`procedureName_${i}_is_valid}`,"Procedure Is Not Valid","procedure.name",t.procedure,this.procedures,!0)),this.validationContext.addRule(new f.mi(`contractName_${i}_is_valid}`,"Contract Is Not Valid","contract.name",t.contract,this.contracts,!0)),this.validationContext.addRule(new f.mi(`vendorName_${i}_is_valid}`,"Vendor Is Not Valid","vendor.name",t.vendor,this.vendors,!0)),this.validationContext.addRule(new f.mi(`statusName_${i}_is_valid}`,"Status Is Not Valid","status.name",t.status,this.statuses,!0))}),this.validationContext.addRule(new f.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof f.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(r=>r.name),newNames:[i.newName]}):i instanceof f.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,T.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class SK extends f.wS{constructor(o,t,i,r,l){super(o,t,i,r,l,!0)}}class vK extends f.ul{constructor(o,t,i,r=!1){super(o,t,r),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new f.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new SK("name","The procedurevendor name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class bK extends Qi{constructor(o){super("CreateProcedureVendorAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new vK("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateProcedureVendor({input:this.input}).pipe((0,h.w)(o=>(0,ie.of)(o.data.created)))}}class TK extends Qi{constructor(o){super("UpdateProcedureVendorsAction"),this.procedureVendors=o}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.procedureVendors,!0))}performAction(){this.response=this.businessProvider.data.userUpdateProcedureVendors({input:{procedureVendors:this.procedureVendors}}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}class yK extends Qi{constructor(o,t){super("UpdateProcedureVendorAction"),this.procedureVendor=o,this.procedureVendorId=t}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.procedureVendor,!0)).addRule(new f.xF("Id","Id should be a CUID and not null",this.procedureVendorId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateProcedureVendor({procedureVendorId:this.procedureVendorId,input:this.procedureVendor}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}let Eu=(()=>{class s extends y.nH{constructor(t,i,r){super("NotificationService.ProcedureVendorBusinessProviderService",t,r),this.data=i}createProcedureVendor(t){const i=new bK(t);return i.Do(this),i.response}updateProcedureVendor(t,i){const r=new yK(t,i);return r.Do(this),r.response}importProcedureVendors(t){const i=new TK(t);return i.Do(this),i.response}validateProcedureVendorExcelData(t,i,r,l,u){const P=new CK(t,i,r,l,u);return P.Do(this),P.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(O.ed),e.LFG(E.q),e.LFG(y.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),wK=(()=>{class s extends y.nH{constructor(t,i,r){super("ProcedureVendorService",r,t),this.businessProvider=i}createProcedureVendor(t){return this.businessProvider.createProcedureVendor(t)}updateProcedureVendor(t,i){return this.businessProvider.updateProcedureVendor(t,i)}importProcedureVendors(t){return this.businessProvider.importProcedureVendors(t)}validateProcedureVendorExcelData(t,i,r,l,u){return this.businessProvider.validateProcedureVendorExcelData(t,i,r,l,u)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(Eu,8),e.LFG(Eu),e.LFG(O.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),Ui=(()=>{class s extends g.m1{constructor(t,i,r,l,u,P){if(super({loading:!1,procedureVendors:[],done:!1,searchQuery:"",formName:void 0,procedureId:void 0,contractId:void 0,vendorId:void 0,statusId:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=r,this.toast=l,this.formService=u,this.procedureVendorService=P,this.errors$=this.select(m=>m.errors),this.loading$=this.select(m=>m.loading),this.done$=this.select(m=>m.done),this.item$=this.select(m=>m.item),this.procedureVendors$=this.select(m=>m.procedureVendors),this.caseProcedures$=this.select(m=>m.caseProcedures||[]),this.contracts$=this.select(m=>m.contracts||[]),this.vendors$=this.select(m=>m.vendors||[]),this.procedureVendorStatuses$=this.select(m=>m.procedureVendorStatuses||[]),this.procedureId$=this.select(m=>m.procedureId),this.contractId$=this.select(m=>m.contractId),this.vendorId$=this.select(m=>m.vendorId),this.statusId$=this.select(m=>m.statusId),this.paging$=this.select(m=>m.paging),this.searchQuery$=this.select(m=>m.searchQuery),this.formName$=this.select(m=>m.formName),this.actionResult$=this.select(this.item$,this.done$,(m,p)=>({item:m,done:p}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.procedureVendors$,this.caseProcedures$,this.contracts$,this.vendors$,this.procedureVendorStatuses$,(m,p,_,v,D,se,me,G,$)=>({errors:m,loading:p,item:_,formName:v,procedureVendors:D,caseProcedures:se,contracts:me,vendors:G,procedureVendorStatuses:$}),{debounce:!0}),this.input$=this.select(this.paging$,this.procedureId$,this.contractId$,this.vendorId$,this.statusId$,this.searchQuery$,(m,p,_,v,D,se)=>({limit:m.limit,skip:m.skip,name:se,procedureId:p,contractId:_,vendorId:v,statusId:D,total:m.total})),this.setFormName=this.updater((m,p)=>Object.assign(Object.assign({},m),{formName:p})),this.setProcedureId=this.updater((m,p)=>Object.assign(Object.assign({},m),{procedureId:p})),this.setContractId=this.updater((m,p)=>Object.assign(Object.assign({},m),{contractId:p})),this.setVendorId=this.updater((m,p)=>Object.assign(Object.assign({},m),{vendorId:p})),this.setStatusId=this.updater((m,p)=>Object.assign(Object.assign({},m),{statusId:p})),this.filterCaseProcedures=m=>this.data.userSelectCaseProcedures({input:{name:m}}).pipe((0,g._b)(p=>{let _=p.data.items;return this.patchState({caseProcedures:_}),_},p=>this.patchState({errors:p.graphQLErrors?p.graphQLErrors:p})),(0,B.U)(p=>p.data.items)),this.filterContracts=m=>this.data.userSelectContracts({input:{name:m}}).pipe((0,g._b)(p=>{let _=p.data.items;return this.patchState({contracts:_}),_},p=>this.patchState({errors:p.graphQLErrors?p.graphQLErrors:p})),(0,B.U)(p=>p.data.items)),this.filterVendors=m=>this.data.userSelectVendors({input:{name:m}}).pipe((0,g._b)(p=>{let _=p.data.items;return this.patchState({vendors:_}),_},p=>this.patchState({errors:p.graphQLErrors?p.graphQLErrors:p})),(0,B.U)(p=>p.data.items)),this.filterProcedureVendorStatuses=m=>this.data.userSelectProcedureVendorStatuses({input:{name:m}}).pipe((0,g._b)(p=>{let _=p.data.items;return this.patchState({procedureVendorStatuses:_}),_},p=>this.patchState({errors:p.graphQLErrors?p.graphQLErrors:p})),(0,B.U)(p=>p.data.items)),this.addCaseProcedure=this.updater((m,p)=>Object.assign(Object.assign({},m),{caseProcedures:m.caseProcedures.concat(p)})),this.addContract=this.updater((m,p)=>Object.assign(Object.assign({},m),{contracts:m.contracts.concat(p)})),this.addVendor=this.updater((m,p)=>Object.assign(Object.assign({},m),{vendors:m.vendors.concat(p)})),this.addProcedureVendorStatus=this.updater((m,p)=>Object.assign(Object.assign({},m),{procedureVendorStatuses:m.procedureVendorStatuses.concat(p)})),this.setItem=this.updater((m,p)=>Object.assign(Object.assign({},m),{item:p})),this.addNewProcedureVendor=this.updater((m,p)=>Object.assign(Object.assign({},m),{procedureVendors:[...m.procedureVendors,p]})),this.updateProcedureVendor=this.updater((m,p)=>Object.assign(Object.assign({},m),{procedureVendors:m.procedureVendors.map(_=>_.id===p.id?p:_)})),this.addProcedureVendors=this.updater((m,p)=>Object.assign(Object.assign({},m),{procedureVendors:m.procedureVendors.concat(p)})),this.updateProcedureVendors=this.updater((m,p)=>Object.assign(Object.assign({},m),{procedureVendors:m.procedureVendors.map(_=>p.find(D=>D.id===_.id)||_)})),this.setSearchQuery=this.updater((m,p)=>Object.assign(Object.assign({},m),{searchQuery:p})),this.loadProcedureVendorEffect=this.effect(m=>m.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(p=>this.data.userProcedureVendor({procedureVendorId:p}).pipe((0,g._b)(_=>{this.patchState({item:_.data.item,errors:_.errors,loading:!1})},_=>this.patchState({loading:!1,errors:_.graphQLErrors?_.graphQLErrors:_})))))),this.loadProcedureVendorsEffect=this.effect(m=>m.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.input$),(0,h.w)(([p,_])=>this.data.userProcedureVendors({input:_}).pipe((0,g._b)(v=>this.patchState({paging:{limit:_.limit,skip:_.skip,total:v.data.count.total},procedureVendors:v.data.items,errors:v.errors,loading:!1}),v=>this.patchState({loading:!1,errors:v.graphQLErrors?v.graphQLErrors:v})))))),this.createProcedureVendorEffect=this.effect(m=>m.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(p=>this.procedureVendorService.createProcedureVendor(Object.assign({},p)).pipe((0,g._b)(_=>{this.addNewProcedureVendor(_),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:_,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},_=>{_.graphQLErrors?(this.toast.error(_.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:_.graphQLErrors?_.graphQLErrors:_})):(this.toast.error(_.Message),this.formService.setErrors(_.Data))}))))),this.updateProcedureVendorEffect=this.effect(m=>m.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([p,_])=>this.procedureVendorService.updateProcedureVendor(p,p.id).pipe((0,g._b)(v=>{this.updateProcedureVendor(v),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:v,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},v=>{v.graphQLErrors?(this.toast.error(v.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:v.graphQLErrors?v.graphQLErrors:v})):(this.toast.error(v.Message),this.formService.setErrors(v.Data))}))))),this.deleteProcedureVendorEffect=this.effect(m=>m.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([p,_])=>this.data.userDeleteProcedureVendor({procedureVendorId:_.id}).pipe((0,g._b)(v=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:v.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},v=>{v.graphQLErrors?(this.toast.error(v.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:v.graphQLErrors?v.graphQLErrors:v})):(this.toast.error(v.Message),this.formService.setErrors(v.Data))}))))),this.importExcelEffect=this.effect(m=>m.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(p=>this.procedureVendorService.importProcedureVendors(p).pipe((0,te.K)(_=>{var v;return this.toast.error(null!==(v=_.Message)&&void 0!==v?v:"Failed to save",{duration:3e3}),k.E}),(0,C.b)(_=>{const v=JSON.parse(_.created),D=JSON.parse(_.updated),se=JSON.parse(_.failed),me=v.length+D.length+se.length;this.addProcedureVendors(v),this.updateProcedureVendors(D),this.toast.success(`${v.length} created, ${D.length} updated, ${se.length} failed of total ${me}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("procedureVendorId")?(this.route.snapshot.paramMap.get("procedureVendorId"),this.setFormName("procedureVendor_edit")):this.setFormName("procedureVendor_create"),this.route.snapshot.paramMap.has("caseProcedureId")){var c=this.route.snapshot.paramMap.get("caseProcedureId");this.setProcedureId(c)}if(this.route.snapshot.paramMap.has("contractId")){var d=this.route.snapshot.paramMap.get("contractId");this.setContractId(d)}if(this.route.snapshot.paramMap.has("vendorId")){var n=this.route.snapshot.paramMap.get("vendorId");this.setVendorId(n)}if(this.route.snapshot.paramMap.has("statusId")){var a=this.route.snapshot.paramMap.get("statusId");this.setStatusId(a)}}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.procedureVendorService.validateProcedureVendorExcelData(t,i.caseProcedures,i.contracts,i.vendors,i.procedureVendorStatuses)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(E.q),e.LFG(A.F0),e.LFG(A.gz),e.LFG(X.F),e.LFG(q.o),e.LFG(wK))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function xK(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close.emit())})("formIsReady",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.procedureVendor)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let Ou=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"procedureVendor_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({id:null,name:""}),this.store.vm$.subscribe(i=>{this.procedureVendor=i.item})):t.formName&&t.formName.currentValue&&"procedureVendor_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadProcedureVendorEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.procedureVendor=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Ui),e.Y36(A.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-procedure-vendor-form"]],inputs:{procedureVendor:"procedureVendor",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,xK,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[w.O5,z.M,w.Ov],encapsulation:2}),s})(),Lu=(()=>{class s{constructor(){this.autoHeight=!1,this.procedureVendors=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[{field:"procedure.name",headerName:"Procedure",filter:"agTextColumnFilter"},{field:"contract.name",headerName:"Contract",filter:"agTextColumnFilter"},{field:"vendor.name",headerName:"Vendor",filter:"agTextColumnFilter"},{field:"status.name",headerName:"Status",filter:"agTextColumnFilter"},{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{field:"procedureId",filter:"agTextColumnFilter",hide:!0},{field:"contractId",filter:"agTextColumnFilter",hide:!0},{field:"vendorId",filter:"agTextColumnFilter",hide:!0},{field:"statusId",filter:"agTextColumnFilter",hide:!0},{headerName:"Estimate",field:"estimate",valueFormatter:t=>{var i;return(0,S.oBD)(null===(i=t.data)||void 0===i?void 0:i.estimate,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{headerName:"Funding Approved",field:"fundingApproved",filter:"agSetColumnFilter",cellRenderer:"checkboxRenderer"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var r;t.includes(null===(r=i.data)||void 0===r?void 0:r.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-procedure-vendor-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(N.x,5),2&t){let r;e.iGM(r=e.CRH())&&(i.tableView=r.first)}},inputs:{autoHeight:"autoHeight",procedureVendors:"procedureVendors"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","data","showSidebar","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("data",i.procedureVendors)("showSidebar",!1)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[N.x],encapsulation:2}),s})();function NK(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-procedure-vendor-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","procedureVendor_edit")("formControl",t.formControl)("procedureVendor",t.procedureVendor)}}const AK=function(){return{}};function FK(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-procedure-vendor-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","procedureVendor_create")("formControl",t.formControl)("procedureVendor",e.DdM(3,AK))}}function DK(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-procedure-vendor-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(u.ref.close())}),e.qZA()}2&s&&e.Q6J("procedureVendors",o.data.items)}let IK=(()=>{class s extends I.fS{constructor(t){super(),this.store=t,this.store.loadProcedureVendorsEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.procedureVendors$.pipe((0,h.w)(i=>(0,T.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Ui))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e._Bn([Ui]),e.qOj],decls:7,vars:5,consts:[[3,"to","control","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","procedureVendor","send","close"],[1,"w-full","h-full","bg-white",3,"procedureVendors","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"ui-select-form",0),e.YNc(1,NK,2,3,"ng-template",null,1,e.W1O),e.YNc(3,FK,1,4,"ng-template",null,2,e.W1O),e.YNc(5,DK,1,1,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[x.JJ,x.oH,J.$,Ou,Lu],encapsulation:2}),s})();function PK(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-procedure-vendor-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","procedureVendor_edit")("procedureVendor",t.value)}}const WK=function(){return{}};function MK(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-procedure-vendor-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","procedureVendor_create")("procedureVendor",e.DdM(2,WK))}function EK(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-procedure-vendor-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(null==u.ref?null:u.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("procedureVendors",t.items)}}let OK=(()=>{class s extends Y{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:6,consts:[[3,"data","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","procedureVendor","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","procedureVendors","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,PK,1,2,"ng-template",null,1,e.W1O),e.YNc(3,MK,1,3,"ng-template",null,2,e.W1O),e.YNc(5,EK,1,2,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("data",i.data)("title",i.to.title)("onSave",i.onSave)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[ee,Ou,Lu],encapsulation:2}),s})(),LK=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[Ui],imports:[w.ez,R.F,x.UX,V.o,H.u,Q.P,U.t,Z,j.h,K.G,I.X0.forChild({types:[{name:"procedure-vendor-select",component:IK,wrappers:["form-field"]},{name:"procedure-vendor-grid",component:OK}]})]}),s})(),GK=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[LK]}),s})();class Ji extends y.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class $K extends Ji{constructor(o){super("ValidateProcedureVendorStatusExcelDataAction"),this.valid=!1,this.excelData=o}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name)}),this.validationContext.addRule(new f.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof f.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(r=>r.name),newNames:[i.newName]}):i instanceof f.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,T.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class RK extends f.wS{constructor(o,t,i,r,l){super(o,t,i,r,l,!0)}}class VK extends f.ul{constructor(o,t,i,r=!1){super(o,t,r),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new f.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new RK("name","The procedurevendorstatus name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class QK extends Ji{constructor(o){super("CreateProcedureVendorStatusAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new VK("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateProcedureVendorStatus({input:this.input}).pipe((0,h.w)(o=>(0,ie.of)(o.data.created)))}}class UK extends Ji{constructor(o){super("UpdateProcedureVendorStatusesAction"),this.procedureVendorStatuses=o}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.procedureVendorStatuses,!0))}performAction(){this.response=this.businessProvider.data.userUpdateProcedureVendorStatuses({input:{procedureVendorStatuses:this.procedureVendorStatuses}}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}class JK extends Ji{constructor(o,t){super("UpdateProcedureVendorStatusAction"),this.procedureVendorStatus=o,this.procedureVendorStatusId=t}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.procedureVendorStatus,!0)).addRule(new f.xF("Id","Id should be a CUID and not null",this.procedureVendorStatusId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateProcedureVendorStatus({procedureVendorStatusId:this.procedureVendorStatusId,input:this.procedureVendorStatus}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}let Gu=(()=>{class s extends y.nH{constructor(t,i,r){super("NotificationService.ProcedureVendorStatusBusinessProviderService",t,r),this.data=i}createProcedureVendorStatus(t){const i=new QK(t);return i.Do(this),i.response}updateProcedureVendorStatus(t,i){const r=new JK(t,i);return r.Do(this),r.response}importProcedureVendorStatuses(t){const i=new UK(t);return i.Do(this),i.response}validateProcedureVendorStatusExcelData(t){const i=new $K(t);return i.Do(this),i.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(O.ed),e.LFG(E.q),e.LFG(y.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),jK=(()=>{class s extends y.nH{constructor(t,i,r){super("ProcedureVendorStatusService",r,t),this.businessProvider=i}createProcedureVendorStatus(t){return this.businessProvider.createProcedureVendorStatus(t)}updateProcedureVendorStatus(t,i){return this.businessProvider.updateProcedureVendorStatus(t,i)}importProcedureVendorStatuses(t){return this.businessProvider.importProcedureVendorStatuses(t)}validateProcedureVendorStatusExcelData(t){return this.businessProvider.validateProcedureVendorStatusExcelData(t)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(Gu,8),e.LFG(Gu),e.LFG(O.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),ji=(()=>{class s extends g.m1{constructor(t,i,r,l,u,P){super({loading:!1,procedureVendorStatuses:[],done:!1,searchQuery:"",formName:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=r,this.toast=l,this.formService=u,this.procedureVendorStatusService=P,this.errors$=this.select(c=>c.errors),this.loading$=this.select(c=>c.loading),this.done$=this.select(c=>c.done),this.item$=this.select(c=>c.item),this.procedureVendorStatuses$=this.select(c=>c.procedureVendorStatuses),this.paging$=this.select(c=>c.paging),this.searchQuery$=this.select(c=>c.searchQuery),this.formName$=this.select(c=>c.formName),this.actionResult$=this.select(this.item$,this.done$,(c,d)=>({item:c,done:d}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.procedureVendorStatuses$,(c,d,n,a,m)=>({errors:c,loading:d,item:n,formName:a,procedureVendorStatuses:m}),{debounce:!0}),this.input$=this.select(this.paging$,this.searchQuery$,(c,d)=>({limit:c.limit,skip:c.skip,name:d,total:c.total})),this.setFormName=this.updater((c,d)=>Object.assign(Object.assign({},c),{formName:d})),this.setItem=this.updater((c,d)=>Object.assign(Object.assign({},c),{item:d})),this.addNewProcedureVendorStatus=this.updater((c,d)=>Object.assign(Object.assign({},c),{procedureVendorStatuses:[...c.procedureVendorStatuses,d]})),this.updateProcedureVendorStatus=this.updater((c,d)=>Object.assign(Object.assign({},c),{procedureVendorStatuses:c.procedureVendorStatuses.map(n=>n.id===d.id?d:n)})),this.addProcedureVendorStatuses=this.updater((c,d)=>Object.assign(Object.assign({},c),{procedureVendorStatuses:c.procedureVendorStatuses.concat(d)})),this.updateProcedureVendorStatuses=this.updater((c,d)=>Object.assign(Object.assign({},c),{procedureVendorStatuses:c.procedureVendorStatuses.map(n=>d.find(m=>m.id===n.id)||n)})),this.setSearchQuery=this.updater((c,d)=>Object.assign(Object.assign({},c),{searchQuery:d})),this.loadProcedureVendorStatusEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.data.userProcedureVendorStatus({procedureVendorStatusId:d}).pipe((0,g._b)(n=>{this.patchState({item:n.data.item,errors:n.errors,loading:!1})},n=>this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})))))),this.loadProcedureVendorStatusesEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.input$),(0,h.w)(([d,n])=>this.data.userProcedureVendorStatuses({input:n}).pipe((0,g._b)(a=>this.patchState({paging:{limit:n.limit,skip:n.skip,total:a.data.count.total},procedureVendorStatuses:a.data.items,errors:a.errors,loading:!1}),a=>this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})))))),this.createProcedureVendorStatusEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.procedureVendorStatusService.createProcedureVendorStatus(Object.assign({},d)).pipe((0,g._b)(n=>{this.addNewProcedureVendorStatus(n),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:n,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},n=>{n.graphQLErrors?(this.toast.error(n.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})):(this.toast.error(n.Message),this.formService.setErrors(n.Data))}))))),this.updateProcedureVendorStatusEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([d,n])=>this.procedureVendorStatusService.updateProcedureVendorStatus(d,d.id).pipe((0,g._b)(a=>{this.updateProcedureVendorStatus(a),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:a,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.deleteProcedureVendorStatusEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([d,n])=>this.data.userDeleteProcedureVendorStatus({procedureVendorStatusId:n.id}).pipe((0,g._b)(a=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:a.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.importExcelEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.procedureVendorStatusService.importProcedureVendorStatuses(d).pipe((0,te.K)(n=>{var a;return this.toast.error(null!==(a=n.Message)&&void 0!==a?a:"Failed to save",{duration:3e3}),k.E}),(0,C.b)(n=>{const a=JSON.parse(n.created),m=JSON.parse(n.updated),p=JSON.parse(n.failed),_=a.length+m.length+p.length;this.addProcedureVendorStatuses(a),this.updateProcedureVendorStatuses(m),this.toast.success(`${a.length} created, ${m.length} updated, ${p.length} failed of total ${_}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("procedureVendorStatusId")?(this.route.snapshot.paramMap.get("procedureVendorStatusId"),this.setFormName("procedureVendorStatus_edit")):this.setFormName("procedureVendorStatus_create")}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.procedureVendorStatusService.validateProcedureVendorStatusExcelData(t)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(E.q),e.LFG(A.F0),e.LFG(A.gz),e.LFG(X.F),e.LFG(q.o),e.LFG(jK))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function zK(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close.emit())})("formIsReady",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.procedureVendorStatus)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let $u=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"procedureVendorStatus_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.procedureVendorStatus=i.item})):t.formName&&t.formName.currentValue&&"procedureVendorStatus_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadProcedureVendorStatusEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.procedureVendorStatus=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(ji),e.Y36(A.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-procedure-vendor-status-form"]],inputs:{procedureVendorStatus:"procedureVendorStatus",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,zK,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[w.O5,z.M,w.Ov],encapsulation:2}),s})(),Ru=(()=>{class s{constructor(){this.autoHeight=!1,this.procedureVendorStatuses=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[,{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var r;t.includes(null===(r=i.data)||void 0===r?void 0:r.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-procedure-vendor-status-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(N.x,5),2&t){let r;e.iGM(r=e.CRH())&&(i.tableView=r.first)}},inputs:{autoHeight:"autoHeight",procedureVendorStatuses:"procedureVendorStatuses"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","data","showSidebar","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("data",i.procedureVendorStatuses)("showSidebar",!1)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[N.x],encapsulation:2}),s})();function qK(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-procedure-vendor-status-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","procedureVendorStatus_edit")("formControl",t.formControl)("procedureVendorStatus",t.procedureVendorStatus)}}const HK=function(){return{}};function KK(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-procedure-vendor-status-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","procedureVendorStatus_create")("formControl",t.formControl)("procedureVendorStatus",e.DdM(3,HK))}}function kK(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-procedure-vendor-status-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(u.ref.close())}),e.qZA()}2&s&&e.Q6J("procedureVendorStatuses",o.data.items)}let ZK=(()=>{class s extends I.fS{constructor(t){super(),this.store=t,this.store.loadProcedureVendorStatusesEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.procedureVendorStatuses$.pipe((0,h.w)(i=>(0,T.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(ji))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e._Bn([ji]),e.qOj],decls:7,vars:5,consts:[[3,"to","control","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","procedureVendorStatus","send","close"],[1,"w-full","h-full","bg-white",3,"procedureVendorStatuses","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"ui-select-form",0),e.YNc(1,qK,2,3,"ng-template",null,1,e.W1O),e.YNc(3,KK,1,4,"ng-template",null,2,e.W1O),e.YNc(5,kK,1,1,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[x.JJ,x.oH,J.$,$u,Ru],encapsulation:2}),s})();function BK(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-procedure-vendor-status-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","procedureVendorStatus_edit")("procedureVendorStatus",t.value)}}const YK=function(){return{}};function XK(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-procedure-vendor-status-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","procedureVendorStatus_create")("procedureVendorStatus",e.DdM(2,YK))}function ek(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-procedure-vendor-status-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(null==u.ref?null:u.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("procedureVendorStatuses",t.items)}}let tk=(()=>{class s extends Y{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:6,consts:[[3,"data","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","procedureVendorStatus","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","procedureVendorStatuses","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,BK,1,2,"ng-template",null,1,e.W1O),e.YNc(3,XK,1,3,"ng-template",null,2,e.W1O),e.YNc(5,ek,1,2,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("data",i.data)("title",i.to.title)("onSave",i.onSave)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[ee,$u,Ru],encapsulation:2}),s})(),ik=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[ji],imports:[w.ez,R.F,x.UX,V.o,H.u,Q.P,U.t,Z,j.h,K.G,I.X0.forChild({types:[{name:"procedure-vendor-status-select",component:ZK,wrappers:["form-field"]},{name:"procedure-vendor-status-grid",component:tk}]})]}),s})(),sk=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[ik]}),s})();class zi extends y.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class ok extends zi{constructor(o){super("ValidateProcessExcelDataAction"),this.valid=!1,this.excelData=o}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name)}),this.validationContext.addRule(new f.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof f.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(r=>r.name),newNames:[i.newName]}):i instanceof f.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,T.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class rk extends f.wS{constructor(o,t,i,r,l){super(o,t,i,r,l,!0)}}class ak extends f.ul{constructor(o,t,i,r=!1){super(o,t,r),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new f.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new rk("name","The process name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class nk extends zi{constructor(o){super("CreateProcessAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new ak("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateProcess({input:this.input}).pipe((0,h.w)(o=>(0,ie.of)(o.data.created)))}}class lk extends zi{constructor(o){super("UpdateProcessesAction"),this.processes=o}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.processes,!0))}performAction(){this.response=this.businessProvider.data.userUpdateProcesses({input:{processes:this.processes}}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}class ck extends zi{constructor(o,t){super("UpdateProcessAction"),this.process=o,this.processId=t}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.process,!0)).addRule(new f.xF("Id","Id should be a CUID and not null",this.processId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateProcess({processId:this.processId,input:this.process}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}let Vu=(()=>{class s extends y.nH{constructor(t,i,r){super("NotificationService.ProcessBusinessProviderService",t,r),this.data=i}createProcess(t){const i=new nk(t);return i.Do(this),i.response}updateProcess(t,i){const r=new ck(t,i);return r.Do(this),r.response}importProcesses(t){const i=new lk(t);return i.Do(this),i.response}validateProcessExcelData(t){const i=new ok(t);return i.Do(this),i.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(O.ed),e.LFG(E.q),e.LFG(y.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),dk=(()=>{class s extends y.nH{constructor(t,i,r){super("ProcessService",r,t),this.businessProvider=i}createProcess(t){const i=Object.fromEntries(Object.entries(t).filter(([r,l])=>null!==l));return this.businessProvider.createProcess(i)}updateProcess(t,i){return this.businessProvider.updateProcess(t,i)}importProcesses(t){return this.businessProvider.importProcesses(t)}validateProcessExcelData(t){return this.businessProvider.validateProcessExcelData(t)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(Vu,8),e.LFG(Vu),e.LFG(O.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),nr=(()=>{class s extends g.m1{constructor(t,i,r,l,u,P){super({loading:!1,processes:[],done:!1,searchQuery:"",formName:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=r,this.toast=l,this.formService=u,this.processService=P,this.errors$=this.select(c=>c.errors),this.loading$=this.select(c=>c.loading),this.done$=this.select(c=>c.done),this.item$=this.select(c=>c.item),this.processes$=this.select(c=>c.processes),this.paging$=this.select(c=>c.paging),this.searchQuery$=this.select(c=>c.searchQuery),this.formName$=this.select(c=>c.formName),this.actionResult$=this.select(this.item$,this.done$,(c,d)=>({item:c,done:d}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.processes$,(c,d,n,a,m)=>({errors:c,loading:d,item:n,formName:a,processes:m}),{debounce:!0}),this.input$=this.select(this.paging$,this.searchQuery$,(c,d)=>({limit:c.limit,skip:c.skip,name:d,total:c.total})),this.setFormName=this.updater((c,d)=>Object.assign(Object.assign({},c),{formName:d})),this.setItem=this.updater((c,d)=>Object.assign(Object.assign({},c),{item:d})),this.addNewProcess=this.updater((c,d)=>Object.assign(Object.assign({},c),{processes:[...c.processes,d]})),this.updateProcess=this.updater((c,d)=>Object.assign(Object.assign({},c),{processes:c.processes.map(n=>n.id===d.id?d:n)})),this.addProcesses=this.updater((c,d)=>Object.assign(Object.assign({},c),{processes:c.processes.concat(d)})),this.updateProcesses=this.updater((c,d)=>Object.assign(Object.assign({},c),{processes:c.processes.map(n=>d.find(m=>m.id===n.id)||n)})),this.setSearchQuery=this.updater((c,d)=>Object.assign(Object.assign({},c),{searchQuery:d})),this.loadProcessEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.data.userProcess({processId:d}).pipe((0,g._b)(n=>{this.patchState({item:n.data.item,errors:n.errors,loading:!1})},n=>this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})))))),this.loadProcessesEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.input$),(0,h.w)(([d,n])=>this.data.userProcesses({input:n}).pipe((0,g._b)(a=>this.patchState({paging:{limit:n.limit,skip:n.skip,total:a.data.count.total},processes:a.data.items,errors:a.errors,loading:!1}),a=>this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})))))),this.createProcessEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.processService.createProcess(Object.assign({},d)).pipe((0,g._b)(n=>{this.addNewProcess(n),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:n,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},n=>{n.graphQLErrors?(this.toast.error(n.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})):(this.toast.error(n.Message),this.formService.setErrors(n.Data))}))))),this.updateProcessEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([d,n])=>this.processService.updateProcess(d,d.id).pipe((0,g._b)(a=>{this.updateProcess(a),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:a,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.deleteProcessEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([d,n])=>this.data.userDeleteProcess({processId:n.id}).pipe((0,g._b)(a=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:a.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.importExcelEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.processService.importProcesses(d).pipe((0,te.K)(n=>{var a;return this.toast.error(null!==(a=n.Message)&&void 0!==a?a:"Failed to save",{duration:3e3}),k.E}),(0,C.b)(n=>{const a=JSON.parse(n.created),m=JSON.parse(n.updated),p=JSON.parse(n.failed),_=a.length+m.length+p.length;this.addProcesses(a),this.updateProcesses(m),this.toast.success(`${a.length} created, ${m.length} updated, ${p.length} failed of total ${_}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("processId")?(this.route.snapshot.paramMap.get("processId"),this.setFormName("process_edit")):this.setFormName("process_create")}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.processService.validateProcessExcelData(t)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(E.q),e.LFG(A.F0),e.LFG(A.gz),e.LFG(X.F),e.LFG(q.o),e.LFG(dk))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function uk(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close.emit())})("formIsReady",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.process)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let Qu=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"process_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.process=i.item})):t.formName&&t.formName.currentValue&&"process_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadProcessEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.process=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(nr),e.Y36(A.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-process-form"]],inputs:{process:"process",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,uk,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[w.O5,z.M,w.Ov],encapsulation:2}),s})(),Uu=(()=>{class s{constructor(){this.autoHeight=!1,this.processes=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[,{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var r;t.includes(null===(r=i.data)||void 0===r?void 0:r.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-process-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(N.x,5),2&t){let r;e.iGM(r=e.CRH())&&(i.tableView=r.first)}},inputs:{autoHeight:"autoHeight",processes:"processes"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.processes)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[N.x],encapsulation:2}),s})();function mk(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-process-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","process_edit")("formControl",t.formControl)("process",t.process)}}const pk=function(){return{}};function hk(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-process-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","process_create")("formControl",t.formControl)("process",e.DdM(3,pk))}}function fk(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-process-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(u.ref.close())}),e.qZA()}2&s&&e.Q6J("processes",o.data.items)}let _k=(()=>{class s extends I.fS{constructor(t){super(),this.store=t,this.store.loadProcessesEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.processes$.pipe((0,h.w)(i=>(0,T.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(nr))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","process","send","close"],[1,"w-full","h-full","bg-white",3,"processes","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,mk,2,3,"ng-template",null,1,e.W1O),e.YNc(3,hk,1,4,"ng-template",null,2,e.W1O),e.YNc(5,fk,1,1,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",u)("editTemplate",r)("createTemplate",l)("key",i.field.key)}},dependencies:[x.JJ,x.oH,J.$,Qu,Uu],encapsulation:2}),s})();function gk(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-process-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","process_edit")("process",t.value)}}const Ck=function(){return{}};function Sk(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-process-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","process_create")("process",e.DdM(2,Ck))}function vk(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-process-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(null==u.ref?null:u.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("processes",t.items)}}let bk=(()=>{class s extends Y{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","process","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","processes","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,gk,1,2,"ng-template",null,1,e.W1O),e.YNc(3,Sk,1,3,"ng-template",null,2,e.W1O),e.YNc(5,vk,1,2,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[ee,Qu,Uu],encapsulation:2}),s})(),Tk=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[nr],imports:[w.ez,R.F,x.UX,V.o,H.u,Q.P,U.t,Z,j.h,K.G,I.X0.forChild({types:[{name:"process-select",component:_k,wrappers:["form-field"]},{name:"process-grid",component:bk}]})]}),s})(),yk=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[Tk]}),s})();class qi extends y.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class wk extends qi{constructor(o){super("ValidateRecommendedOrderExcelDataAction"),this.valid=!1,this.excelData=o}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name)}),this.validationContext.addRule(new f.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof f.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(r=>r.name),newNames:[i.newName]}):i instanceof f.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,T.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class xk extends f.wS{constructor(o,t,i,r,l){super(o,t,i,r,l,!0)}}class Nk extends f.ul{constructor(o,t,i,r=!1){super(o,t,r),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new f.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new xk("name","The recommendedorder name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class Ak extends qi{constructor(o){super("CreateRecommendedOrderAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new Nk("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateRecommendedOrder({input:this.input}).pipe((0,h.w)(o=>(0,ie.of)(o.data.created)))}}class Fk extends qi{constructor(o){super("UpdateRecommendedOrdersAction"),this.recommendedOrders=o}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.recommendedOrders,!0))}performAction(){this.response=this.businessProvider.data.userUpdateRecommendedOrders({input:{recommendedOrders:this.recommendedOrders}}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}class Dk extends qi{constructor(o,t){super("UpdateRecommendedOrderAction"),this.recommendedOrder=o,this.recommendedOrderId=t}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.recommendedOrder,!0)).addRule(new f.xF("Id","Id should be a CUID and not null",this.recommendedOrderId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateRecommendedOrder({recommendedOrderId:this.recommendedOrderId,input:this.recommendedOrder}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}let Ju=(()=>{class s extends y.nH{constructor(t,i,r){super("NotificationService.RecommendedOrderBusinessProviderService",t,r),this.data=i}createRecommendedOrder(t){const i=new Ak(t);return i.Do(this),i.response}updateRecommendedOrder(t,i){const r=new Dk(t,i);return r.Do(this),r.response}importRecommendedOrders(t){const i=new Fk(t);return i.Do(this),i.response}validateRecommendedOrderExcelData(t){const i=new wk(t);return i.Do(this),i.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(O.ed),e.LFG(E.q),e.LFG(y.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),Ik=(()=>{class s extends y.nH{constructor(t,i,r){super("RecommendedOrderService",r,t),this.businessProvider=i}createRecommendedOrder(t){return this.businessProvider.createRecommendedOrder(t)}updateRecommendedOrder(t,i){return this.businessProvider.updateRecommendedOrder(t,i)}importRecommendedOrders(t){return this.businessProvider.importRecommendedOrders(t)}validateRecommendedOrderExcelData(t){return this.businessProvider.validateRecommendedOrderExcelData(t)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(Ju,8),e.LFG(Ju),e.LFG(O.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),Hi=(()=>{class s extends g.m1{constructor(t,i,r,l,u,P){super({loading:!1,recommendedOrders:[],done:!1,searchQuery:"",formName:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=r,this.toast=l,this.formService=u,this.recommendedOrderService=P,this.errors$=this.select(c=>c.errors),this.loading$=this.select(c=>c.loading),this.done$=this.select(c=>c.done),this.item$=this.select(c=>c.item),this.recommendedOrders$=this.select(c=>c.recommendedOrders),this.paging$=this.select(c=>c.paging),this.searchQuery$=this.select(c=>c.searchQuery),this.formName$=this.select(c=>c.formName),this.actionResult$=this.select(this.item$,this.done$,(c,d)=>({item:c,done:d}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.recommendedOrders$,(c,d,n,a,m)=>({errors:c,loading:d,item:n,formName:a,recommendedOrders:m}),{debounce:!0}),this.input$=this.select(this.paging$,this.searchQuery$,(c,d)=>({limit:c.limit,skip:c.skip,name:d,total:c.total})),this.setFormName=this.updater((c,d)=>Object.assign(Object.assign({},c),{formName:d})),this.setItem=this.updater((c,d)=>Object.assign(Object.assign({},c),{item:d})),this.addNewRecommendedOrder=this.updater((c,d)=>Object.assign(Object.assign({},c),{recommendedOrders:[...c.recommendedOrders,d]})),this.updateRecommendedOrder=this.updater((c,d)=>Object.assign(Object.assign({},c),{recommendedOrders:c.recommendedOrders.map(n=>n.id===d.id?d:n)})),this.addRecommendedOrders=this.updater((c,d)=>Object.assign(Object.assign({},c),{recommendedOrders:c.recommendedOrders.concat(d)})),this.updateRecommendedOrders=this.updater((c,d)=>Object.assign(Object.assign({},c),{recommendedOrders:c.recommendedOrders.map(n=>d.find(m=>m.id===n.id)||n)})),this.setSearchQuery=this.updater((c,d)=>Object.assign(Object.assign({},c),{searchQuery:d})),this.loadRecommendedOrderEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.data.userRecommendedOrder({recommendedOrderId:d}).pipe((0,g._b)(n=>{this.patchState({item:n.data.item,errors:n.errors,loading:!1})},n=>this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})))))),this.loadRecommendedOrdersEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.input$),(0,h.w)(([d,n])=>this.data.userRecommendedOrders({input:n}).pipe((0,g._b)(a=>this.patchState({paging:{limit:n.limit,skip:n.skip,total:a.data.count.total},recommendedOrders:a.data.items,errors:a.errors,loading:!1}),a=>this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})))))),this.createRecommendedOrderEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.recommendedOrderService.createRecommendedOrder(Object.assign({},d)).pipe((0,g._b)(n=>{this.addNewRecommendedOrder(n),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:n,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},n=>{n.graphQLErrors?(this.toast.error(n.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})):(this.toast.error(n.Message),this.formService.setErrors(n.Data))}))))),this.updateRecommendedOrderEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([d,n])=>this.recommendedOrderService.updateRecommendedOrder(d,d.id).pipe((0,g._b)(a=>{this.updateRecommendedOrder(a),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:a,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.deleteRecommendedOrderEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([d,n])=>this.data.userDeleteRecommendedOrder({recommendedOrderId:n.id}).pipe((0,g._b)(a=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:a.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.importExcelEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.recommendedOrderService.importRecommendedOrders(d).pipe((0,te.K)(n=>{var a;return this.toast.error(null!==(a=n.Message)&&void 0!==a?a:"Failed to save",{duration:3e3}),k.E}),(0,C.b)(n=>{const a=JSON.parse(n.created),m=JSON.parse(n.updated),p=JSON.parse(n.failed),_=a.length+m.length+p.length;this.addRecommendedOrders(a),this.updateRecommendedOrders(m),this.toast.success(`${a.length} created, ${m.length} updated, ${p.length} failed of total ${_}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("recommendedOrderId")?(this.route.snapshot.paramMap.get("recommendedOrderId"),this.setFormName("recommendedOrder_edit")):this.setFormName("recommendedOrder_create")}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.recommendedOrderService.validateRecommendedOrderExcelData(t)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(E.q),e.LFG(A.F0),e.LFG(A.gz),e.LFG(X.F),e.LFG(q.o),e.LFG(Ik))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function Pk(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close.emit())})("formIsReady",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.recommendedOrder)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let ju=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"recommendedOrder_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({id:null,name:""}),this.store.vm$.subscribe(i=>{this.recommendedOrder=i.item})):t.formName&&t.formName.currentValue&&"recommendedOrder_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadRecommendedOrderEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.recommendedOrder=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Hi),e.Y36(A.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-recommended-order-form"]],inputs:{recommendedOrder:"recommendedOrder",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,Pk,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[w.O5,z.M,w.Ov],encapsulation:2}),s})(),zu=(()=>{class s{constructor(){this.autoHeight=!1,this.recommendedOrders=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[,{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{field:"patientId",filter:"agTextColumnFilter"},{field:"legalCaseId",filter:"agTextColumnFilter"},{field:"requestingProviderId",filter:"agTextColumnFilter"},{field:"status",filter:"agTextColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var r;t.includes(null===(r=i.data)||void 0===r?void 0:r.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-recommended-order-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(N.x,5),2&t){let r;e.iGM(r=e.CRH())&&(i.tableView=r.first)}},inputs:{autoHeight:"autoHeight",recommendedOrders:"recommendedOrders"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:6,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.recommendedOrders)("showSidebar",!1)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[N.x],encapsulation:2}),s})();function Wk(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-recommended-order-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","recommendedOrder_edit")("formControl",t.formControl)("recommendedOrder",t.recommendedOrder)}}const Mk=function(){return{}};function Ek(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-recommended-order-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","recommendedOrder_create")("formControl",t.formControl)("recommendedOrder",e.DdM(3,Mk))}}function Ok(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-recommended-order-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(u.ref.close())}),e.qZA()}2&s&&e.Q6J("recommendedOrders",o.data.items)}let Lk=(()=>{class s extends I.fS{constructor(t){super(),this.store=t,this.store.loadRecommendedOrdersEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.recommendedOrders$.pipe((0,h.w)(i=>(0,T.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Hi))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e._Bn([Hi]),e.qOj],decls:7,vars:5,consts:[[3,"to","control","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","recommendedOrder","send","close"],[1,"w-full","h-full","bg-white",3,"recommendedOrders","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"ui-select-form",0),e.YNc(1,Wk,2,3,"ng-template",null,1,e.W1O),e.YNc(3,Ek,1,4,"ng-template",null,2,e.W1O),e.YNc(5,Ok,1,1,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[x.JJ,x.oH,J.$,ju,zu],encapsulation:2}),s})();function Gk(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-recommended-order-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","recommendedOrder_edit")("recommendedOrder",t.value)}}const $k=function(){return{}};function Rk(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-recommended-order-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","recommendedOrder_create")("recommendedOrder",e.DdM(2,$k))}function Vk(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-recommended-order-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(null==u.ref?null:u.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("recommendedOrders",t.items)}}let Qk=(()=>{class s extends Y{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:6,consts:[[3,"data","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","recommendedOrder","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","recommendedOrders","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,Gk,1,2,"ng-template",null,1,e.W1O),e.YNc(3,Rk,1,3,"ng-template",null,2,e.W1O),e.YNc(5,Vk,1,2,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("data",i.data)("title",i.to.title)("onSave",i.onSave)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[ee,ju,zu],encapsulation:2}),s})(),Uk=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[Hi],imports:[w.ez,R.F,x.UX,V.o,H.u,Q.P,U.t,Z,j.h,K.G,I.X0.forChild({types:[{name:"recommended-order-select",component:Lk,wrappers:["form-field"]},{name:"recommended-order-grid",component:Qk}]})]}),s})(),Jk=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[Uk]}),s})();class Ki extends y.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class jk extends Ki{constructor(o){super("ValidateReconciliationPeriodTypeExcelDataAction"),this.valid=!1,this.excelData=o}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name)}),this.validationContext.addRule(new f.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof f.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(r=>r.name),newNames:[i.newName]}):i instanceof f.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,T.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class zk extends f.wS{constructor(o,t,i,r,l){super(o,t,i,r,l,!0)}}class qk extends f.ul{constructor(o,t,i,r=!1){super(o,t,r),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new f.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new zk("name","The reconciliationperiodtype name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class Hk extends Ki{constructor(o){super("CreateReconciliationPeriodTypeAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new qk("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateReconciliationPeriodType({input:this.input}).pipe((0,h.w)(o=>(0,ie.of)(o.data.created)))}}class Kk extends Ki{constructor(o){super("UpdateReconciliationPeriodTypesAction"),this.reconciliationPeriodTypes=o}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.reconciliationPeriodTypes,!0))}performAction(){this.response=this.businessProvider.data.userUpdateReconciliationPeriodTypes({input:{reconciliationPeriodTypes:this.reconciliationPeriodTypes}}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}class kk extends Ki{constructor(o,t){super("UpdateReconciliationPeriodTypeAction"),this.reconciliationPeriodType=o,this.reconciliationPeriodTypeId=t}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.reconciliationPeriodType,!0)).addRule(new f.xF("Id","Id should be a CUID and not null",this.reconciliationPeriodTypeId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateReconciliationPeriodType({reconciliationPeriodTypeId:this.reconciliationPeriodTypeId,input:this.reconciliationPeriodType}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}let qu=(()=>{class s extends y.nH{constructor(t,i,r){super("NotificationService.ReconciliationPeriodTypeBusinessProviderService",t,r),this.data=i}createReconciliationPeriodType(t){const i=new Hk(t);return i.Do(this),i.response}updateReconciliationPeriodType(t,i){const r=new kk(t,i);return r.Do(this),r.response}importReconciliationPeriodTypes(t){const i=new Kk(t);return i.Do(this),i.response}validateReconciliationPeriodTypeExcelData(t){const i=new jk(t);return i.Do(this),i.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(O.ed),e.LFG(E.q),e.LFG(y.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),Zk=(()=>{class s extends y.nH{constructor(t,i,r){super("ReconciliationPeriodTypeService",r,t),this.businessProvider=i}createReconciliationPeriodType(t){const i=Object.fromEntries(Object.entries(t).filter(([r,l])=>null!==l));return this.businessProvider.createReconciliationPeriodType(i)}updateReconciliationPeriodType(t,i){return this.businessProvider.updateReconciliationPeriodType(t,i)}importReconciliationPeriodTypes(t){return this.businessProvider.importReconciliationPeriodTypes(t)}validateReconciliationPeriodTypeExcelData(t){return this.businessProvider.validateReconciliationPeriodTypeExcelData(t)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(qu,8),e.LFG(qu),e.LFG(O.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),lr=(()=>{class s extends g.m1{constructor(t,i,r,l,u,P){super({loading:!1,reconciliationPeriodTypes:[],done:!1,searchQuery:"",formName:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=r,this.toast=l,this.formService=u,this.reconciliationPeriodTypeService=P,this.errors$=this.select(c=>c.errors),this.loading$=this.select(c=>c.loading),this.done$=this.select(c=>c.done),this.item$=this.select(c=>c.item),this.reconciliationPeriodTypes$=this.select(c=>c.reconciliationPeriodTypes),this.paging$=this.select(c=>c.paging),this.searchQuery$=this.select(c=>c.searchQuery),this.formName$=this.select(c=>c.formName),this.actionResult$=this.select(this.item$,this.done$,(c,d)=>({item:c,done:d}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.reconciliationPeriodTypes$,(c,d,n,a,m)=>({errors:c,loading:d,item:n,formName:a,reconciliationPeriodTypes:m}),{debounce:!0}),this.input$=this.select(this.paging$,this.searchQuery$,(c,d)=>({limit:c.limit,skip:c.skip,name:d,total:c.total})),this.setFormName=this.updater((c,d)=>Object.assign(Object.assign({},c),{formName:d})),this.setItem=this.updater((c,d)=>Object.assign(Object.assign({},c),{item:d})),this.addNewReconciliationPeriodType=this.updater((c,d)=>Object.assign(Object.assign({},c),{reconciliationPeriodTypes:[...c.reconciliationPeriodTypes,d]})),this.updateReconciliationPeriodType=this.updater((c,d)=>Object.assign(Object.assign({},c),{reconciliationPeriodTypes:c.reconciliationPeriodTypes.map(n=>n.id===d.id?d:n)})),this.addReconciliationPeriodTypes=this.updater((c,d)=>Object.assign(Object.assign({},c),{reconciliationPeriodTypes:c.reconciliationPeriodTypes.concat(d)})),this.updateReconciliationPeriodTypes=this.updater((c,d)=>Object.assign(Object.assign({},c),{reconciliationPeriodTypes:c.reconciliationPeriodTypes.map(n=>d.find(m=>m.id===n.id)||n)})),this.setSearchQuery=this.updater((c,d)=>Object.assign(Object.assign({},c),{searchQuery:d})),this.loadReconciliationPeriodTypeEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.data.userReconciliationPeriodType({reconciliationPeriodTypeId:d}).pipe((0,g._b)(n=>{this.patchState({item:n.data.item,errors:n.errors,loading:!1})},n=>this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})))))),this.loadReconciliationPeriodTypesEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.input$),(0,h.w)(([d,n])=>this.data.userReconciliationPeriodTypes({input:n}).pipe((0,g._b)(a=>this.patchState({paging:{limit:n.limit,skip:n.skip,total:a.data.count.total},reconciliationPeriodTypes:a.data.items,errors:a.errors,loading:!1}),a=>this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})))))),this.createReconciliationPeriodTypeEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.reconciliationPeriodTypeService.createReconciliationPeriodType(Object.assign({},d)).pipe((0,g._b)(n=>{this.addNewReconciliationPeriodType(n),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:n,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},n=>{n.graphQLErrors?(this.toast.error(n.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})):(this.toast.error(n.Message),this.formService.setErrors(n.Data))}))))),this.updateReconciliationPeriodTypeEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([d,n])=>this.reconciliationPeriodTypeService.updateReconciliationPeriodType(d,d.id).pipe((0,g._b)(a=>{this.updateReconciliationPeriodType(a),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:a,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.deleteReconciliationPeriodTypeEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([d,n])=>this.data.userDeleteReconciliationPeriodType({reconciliationPeriodTypeId:n.id}).pipe((0,g._b)(a=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:a.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.importExcelEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.reconciliationPeriodTypeService.importReconciliationPeriodTypes(d).pipe((0,te.K)(n=>{var a;return this.toast.error(null!==(a=n.Message)&&void 0!==a?a:"Failed to save",{duration:3e3}),k.E}),(0,C.b)(n=>{const a=JSON.parse(n.created),m=JSON.parse(n.updated),p=JSON.parse(n.failed),_=a.length+m.length+p.length;this.addReconciliationPeriodTypes(a),this.updateReconciliationPeriodTypes(m),this.toast.success(`${a.length} created, ${m.length} updated, ${p.length} failed of total ${_}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("reconciliationPeriodTypeId")?(this.route.snapshot.paramMap.get("reconciliationPeriodTypeId"),this.setFormName("reconciliationPeriodType_edit")):this.setFormName("reconciliationPeriodType_create")}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.reconciliationPeriodTypeService.validateReconciliationPeriodTypeExcelData(t)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(E.q),e.LFG(A.F0),e.LFG(A.gz),e.LFG(X.F),e.LFG(q.o),e.LFG(Zk))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function Bk(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close.emit())})("formIsReady",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.reconciliationPeriodType)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let Hu=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"reconciliationPeriodType_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.reconciliationPeriodType=i.item})):t.formName&&t.formName.currentValue&&"reconciliationPeriodType_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadReconciliationPeriodTypeEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.reconciliationPeriodType=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(lr),e.Y36(A.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-reconciliation-period-type-form"]],inputs:{reconciliationPeriodType:"reconciliationPeriodType",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,Bk,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[w.O5,z.M,w.Ov],encapsulation:2}),s})(),Ku=(()=>{class s{constructor(){this.autoHeight=!1,this.reconciliationPeriodTypes=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[,{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var r;t.includes(null===(r=i.data)||void 0===r?void 0:r.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-reconciliation-period-type-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(N.x,5),2&t){let r;e.iGM(r=e.CRH())&&(i.tableView=r.first)}},inputs:{autoHeight:"autoHeight",reconciliationPeriodTypes:"reconciliationPeriodTypes"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.reconciliationPeriodTypes)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[N.x],encapsulation:2}),s})();function Yk(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-reconciliation-period-type-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","reconciliationPeriodType_edit")("formControl",t.formControl)("reconciliationPeriodType",t.reconciliationPeriodType)}}const Xk=function(){return{}};function eZ(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-reconciliation-period-type-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","reconciliationPeriodType_create")("formControl",t.formControl)("reconciliationPeriodType",e.DdM(3,Xk))}}function tZ(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-reconciliation-period-type-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(u.ref.close())}),e.qZA()}2&s&&e.Q6J("reconciliationPeriodTypes",o.data.items)}let iZ=(()=>{class s extends I.fS{constructor(t){super(),this.store=t,this.store.loadReconciliationPeriodTypesEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.reconciliationPeriodTypes$.pipe((0,h.w)(i=>(0,T.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(lr))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","reconciliationPeriodType","send","close"],[1,"w-full","h-full","bg-white",3,"reconciliationPeriodTypes","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,Yk,2,3,"ng-template",null,1,e.W1O),e.YNc(3,eZ,1,4,"ng-template",null,2,e.W1O),e.YNc(5,tZ,1,1,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",u)("editTemplate",r)("createTemplate",l)("key",i.field.key)}},dependencies:[x.JJ,x.oH,J.$,Hu,Ku],encapsulation:2}),s})();function sZ(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-reconciliation-period-type-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","reconciliationPeriodType_edit")("reconciliationPeriodType",t.value)}}const oZ=function(){return{}};function rZ(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-reconciliation-period-type-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","reconciliationPeriodType_create")("reconciliationPeriodType",e.DdM(2,oZ))}function aZ(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-reconciliation-period-type-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(null==u.ref?null:u.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("reconciliationPeriodTypes",t.items)}}let nZ=(()=>{class s extends Y{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","reconciliationPeriodType","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","reconciliationPeriodTypes","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,sZ,1,2,"ng-template",null,1,e.W1O),e.YNc(3,rZ,1,3,"ng-template",null,2,e.W1O),e.YNc(5,aZ,1,2,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[ee,Hu,Ku],encapsulation:2}),s})(),lZ=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[lr],imports:[w.ez,R.F,x.UX,V.o,H.u,Q.P,U.t,Z,j.h,K.G,I.X0.forChild({types:[{name:"reconciliation-period-type-select",component:iZ,wrappers:["form-field"]},{name:"reconciliation-period-type-grid",component:nZ}]})]}),s})(),cZ=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[lZ]}),s})();class ki extends y.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class dZ extends ki{constructor(o,t,i){super("ValidateRequiredFieldExcelDataAction"),this.valid=!1,this.excelData=o,this.accidentTypes=t,this.medLevels=i}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name),this.validationContext.addRule(new f.mi(`accidentTypeName_${i}_is_valid}`,"Accident Type Is Not Valid","accidentType.name",t.accidentType,this.accidentTypes,!0)),this.validationContext.addRule(new f.mi(`medLevelName_${i}_is_valid}`,"Med Level Is Not Valid","medLevel.name",t.medLevel,this.medLevels,!0))}),this.validationContext.addRule(new f.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof f.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(r=>r.name),newNames:[i.newName]}):i instanceof f.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,T.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class uZ extends f.wS{constructor(o,t,i,r,l){super(o,t,i,r,l,!0)}}class mZ extends f.ul{constructor(o,t,i,r=!1){super(o,t,r),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new f.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new uZ("name","The requiredfield name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class pZ extends ki{constructor(o){super("CreateRequiredFieldAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new mZ("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateRequiredField({input:this.input}).pipe((0,h.w)(o=>(0,ie.of)(o.data.created)))}}class hZ extends ki{constructor(o){super("UpdateRequiredFieldsAction"),this.requiredFields=o}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.requiredFields,!0))}performAction(){this.response=this.businessProvider.data.userUpdateRequiredFields({input:{requiredFields:this.requiredFields}}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}class fZ extends ki{constructor(o,t){super("UpdateRequiredFieldAction"),this.requiredField=o,this.requiredFieldId=t}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.requiredField,!0)).addRule(new f.xF("Id","Id should be a CUID and not null",this.requiredFieldId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateRequiredField({requiredFieldId:this.requiredFieldId,input:this.requiredField}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}let ku=(()=>{class s extends y.nH{constructor(t,i,r){super("NotificationService.RequiredFieldBusinessProviderService",t,r),this.data=i}createRequiredField(t){const i=new pZ(t);return i.Do(this),i.response}updateRequiredField(t,i){const r=new fZ(t,i);return r.Do(this),r.response}importRequiredFields(t){const i=new hZ(t);return i.Do(this),i.response}validateRequiredFieldExcelData(t,i,r){const l=new dZ(t,i,r);return l.Do(this),l.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(O.ed),e.LFG(E.q),e.LFG(y.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),_Z=(()=>{class s extends y.nH{constructor(t,i,r){super("RequiredFieldService",r,t),this.businessProvider=i}createRequiredField(t){const i=Object.fromEntries(Object.entries(t).filter(([r,l])=>null!==l));return this.businessProvider.createRequiredField(i)}updateRequiredField(t,i){return this.businessProvider.updateRequiredField(t,i)}importRequiredFields(t){return this.businessProvider.importRequiredFields(t)}validateRequiredFieldExcelData(t,i,r){return this.businessProvider.validateRequiredFieldExcelData(t,i,r)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(ku,8),e.LFG(ku),e.LFG(O.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),cr=(()=>{class s extends g.m1{constructor(t,i,r,l,u,P){if(super({loading:!1,requiredFields:[],done:!1,searchQuery:"",formName:void 0,accidentTypeId:void 0,medLevelId:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=r,this.toast=l,this.formService=u,this.requiredFieldService=P,this.errors$=this.select(n=>n.errors),this.loading$=this.select(n=>n.loading),this.done$=this.select(n=>n.done),this.item$=this.select(n=>n.item),this.requiredFields$=this.select(n=>n.requiredFields),this.accidentTypes$=this.select(n=>n.accidentTypes||[]),this.medLevels$=this.select(n=>n.medLevels||[]),this.accidentTypeId$=this.select(n=>n.accidentTypeId),this.medLevelId$=this.select(n=>n.medLevelId),this.paging$=this.select(n=>n.paging),this.searchQuery$=this.select(n=>n.searchQuery),this.formName$=this.select(n=>n.formName),this.actionResult$=this.select(this.item$,this.done$,(n,a)=>({item:n,done:a}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.requiredFields$,this.accidentTypes$,this.medLevels$,(n,a,m,p,_,v,D)=>({errors:n,loading:a,item:m,formName:p,requiredFields:_,accidentTypes:v,medLevels:D}),{debounce:!0}),this.input$=this.select(this.paging$,this.accidentTypeId$,this.medLevelId$,this.searchQuery$,(n,a,m,p)=>({limit:n.limit,skip:n.skip,name:p,accidentTypeId:a,medLevelId:m,total:n.total})),this.setFormName=this.updater((n,a)=>Object.assign(Object.assign({},n),{formName:a})),this.setAccidentTypeId=this.updater((n,a)=>Object.assign(Object.assign({},n),{accidentTypeId:a})),this.setMedLevelId=this.updater((n,a)=>Object.assign(Object.assign({},n),{medLevelId:a})),this.filterAccidentTypes=n=>this.data.userSelectAccidentTypes({input:{name:n}}).pipe((0,g._b)(a=>{let m=a.data.items;return this.patchState({accidentTypes:m}),m},a=>this.patchState({errors:a.graphQLErrors?a.graphQLErrors:a})),(0,B.U)(a=>a.data.items)),this.filterMedLevels=n=>this.data.userSelectMedLevels({input:{name:n}}).pipe((0,g._b)(a=>{let m=a.data.items;return this.patchState({medLevels:m}),m},a=>this.patchState({errors:a.graphQLErrors?a.graphQLErrors:a})),(0,B.U)(a=>a.data.items)),this.addAccidentType=this.updater((n,a)=>Object.assign(Object.assign({},n),{accidentTypes:n.accidentTypes.concat(a)})),this.addMedLevel=this.updater((n,a)=>Object.assign(Object.assign({},n),{medLevels:n.medLevels.concat(a)})),this.setItem=this.updater((n,a)=>Object.assign(Object.assign({},n),{item:a})),this.addNewRequiredField=this.updater((n,a)=>Object.assign(Object.assign({},n),{requiredFields:[...n.requiredFields,a]})),this.updateRequiredField=this.updater((n,a)=>Object.assign(Object.assign({},n),{requiredFields:n.requiredFields.map(m=>m.id===a.id?a:m)})),this.addRequiredFields=this.updater((n,a)=>Object.assign(Object.assign({},n),{requiredFields:n.requiredFields.concat(a)})),this.updateRequiredFields=this.updater((n,a)=>Object.assign(Object.assign({},n),{requiredFields:n.requiredFields.map(m=>a.find(_=>_.id===m.id)||m)})),this.setSearchQuery=this.updater((n,a)=>Object.assign(Object.assign({},n),{searchQuery:a})),this.loadRequiredFieldEffect=this.effect(n=>n.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(a=>this.data.userRequiredField({requiredFieldId:a}).pipe((0,g._b)(m=>{this.patchState({item:m.data.item,errors:m.errors,loading:!1})},m=>this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})))))),this.loadRequiredFieldsEffect=this.effect(n=>n.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.input$),(0,h.w)(([a,m])=>this.data.userRequiredFields({input:m}).pipe((0,g._b)(p=>this.patchState({paging:{limit:m.limit,skip:m.skip,total:p.data.count.total},requiredFields:p.data.items,errors:p.errors,loading:!1}),p=>this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})))))),this.createRequiredFieldEffect=this.effect(n=>n.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(a=>this.requiredFieldService.createRequiredField(Object.assign({},a)).pipe((0,g._b)(m=>{this.addNewRequiredField(m),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:m,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},m=>{m.graphQLErrors?(this.toast.error(m.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})):(this.toast.error(m.Message),this.formService.setErrors(m.Data))}))))),this.updateRequiredFieldEffect=this.effect(n=>n.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([a,m])=>this.requiredFieldService.updateRequiredField(a,a.id).pipe((0,g._b)(p=>{this.updateRequiredField(p),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:p,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},p=>{p.graphQLErrors?(this.toast.error(p.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})):(this.toast.error(p.Message),this.formService.setErrors(p.Data))}))))),this.deleteRequiredFieldEffect=this.effect(n=>n.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([a,m])=>this.data.userDeleteRequiredField({requiredFieldId:m.id}).pipe((0,g._b)(p=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:p.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},p=>{p.graphQLErrors?(this.toast.error(p.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})):(this.toast.error(p.Message),this.formService.setErrors(p.Data))}))))),this.importExcelEffect=this.effect(n=>n.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(a=>this.requiredFieldService.importRequiredFields(a).pipe((0,te.K)(m=>{var p;return this.toast.error(null!==(p=m.Message)&&void 0!==p?p:"Failed to save",{duration:3e3}),k.E}),(0,C.b)(m=>{const p=JSON.parse(m.created),_=JSON.parse(m.updated),v=JSON.parse(m.failed),D=p.length+_.length+v.length;this.addRequiredFields(p),this.updateRequiredFields(_),this.toast.success(`${p.length} created, ${_.length} updated, ${v.length} failed of total ${D}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("requiredFieldId")?(this.route.snapshot.paramMap.get("requiredFieldId"),this.setFormName("requiredField_edit")):this.setFormName("requiredField_create"),this.route.snapshot.paramMap.has("accidentTypeId")){var c=this.route.snapshot.paramMap.get("accidentTypeId");this.setAccidentTypeId(c)}if(this.route.snapshot.paramMap.has("medLevelId")){var d=this.route.snapshot.paramMap.get("medLevelId");this.setMedLevelId(d)}}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.requiredFieldService.validateRequiredFieldExcelData(t,i.accidentTypes,i.medLevels)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(E.q),e.LFG(A.F0),e.LFG(A.gz),e.LFG(X.F),e.LFG(q.o),e.LFG(_Z))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function gZ(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close.emit())})("formIsReady",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.requiredField)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let Zu=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"requiredField_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.requiredField=i.item})):t.formName&&t.formName.currentValue&&"requiredField_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadRequiredFieldEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.requiredField=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(cr),e.Y36(A.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-required-field-form"]],inputs:{requiredField:"requiredField",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,gZ,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[w.O5,z.M,w.Ov],encapsulation:2}),s})(),Bu=(()=>{class s{constructor(){this.autoHeight=!1,this.requiredFields=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[{field:"accidentType.name",headerName:"Accident Type",filter:"agTextColumnFilter"},{field:"medLevel.name",headerName:"Med Level",filter:"agTextColumnFilter"},{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{field:"entityName",filter:"agTextColumnFilter"},{field:"accidentTypeId",filter:"agTextColumnFilter",hide:!0},{field:"medLevelId",filter:"agTextColumnFilter",hide:!0}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var r;t.includes(null===(r=i.data)||void 0===r?void 0:r.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-required-field-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(N.x,5),2&t){let r;e.iGM(r=e.CRH())&&(i.tableView=r.first)}},inputs:{autoHeight:"autoHeight",requiredFields:"requiredFields"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.requiredFields)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[N.x],encapsulation:2}),s})();function CZ(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-required-field-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","requiredField_edit")("formControl",t.formControl)("requiredField",t.requiredField)}}const SZ=function(){return{}};function vZ(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-required-field-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","requiredField_create")("formControl",t.formControl)("requiredField",e.DdM(3,SZ))}}function bZ(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-required-field-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(u.ref.close())}),e.qZA()}2&s&&e.Q6J("requiredFields",o.data.items)}let TZ=(()=>{class s extends I.fS{constructor(t){super(),this.store=t,this.store.loadRequiredFieldsEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.requiredFields$.pipe((0,h.w)(i=>(0,T.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(cr))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","requiredField","send","close"],[1,"w-full","h-full","bg-white",3,"requiredFields","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,CZ,2,3,"ng-template",null,1,e.W1O),e.YNc(3,vZ,1,4,"ng-template",null,2,e.W1O),e.YNc(5,bZ,1,1,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",u)("editTemplate",r)("createTemplate",l)("key",i.field.key)}},dependencies:[x.JJ,x.oH,J.$,Zu,Bu],encapsulation:2}),s})();function yZ(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-required-field-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","requiredField_edit")("requiredField",t.value)}}const wZ=function(){return{}};function xZ(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-required-field-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","requiredField_create")("requiredField",e.DdM(2,wZ))}function NZ(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-required-field-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(null==u.ref?null:u.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("requiredFields",t.items)}}let AZ=(()=>{class s extends Y{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","requiredField","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","requiredFields","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,yZ,1,2,"ng-template",null,1,e.W1O),e.YNc(3,xZ,1,3,"ng-template",null,2,e.W1O),e.YNc(5,NZ,1,2,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[ee,Zu,Bu],encapsulation:2}),s})(),FZ=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[cr],imports:[w.ez,R.F,x.UX,V.o,H.u,Q.P,U.t,Z,j.h,K.G,I.X0.forChild({types:[{name:"required-field-select",component:TZ,wrappers:["form-field"]},{name:"required-field-grid",component:AZ}]})]}),s})(),DZ=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[FZ]}),s})();var dr=ae(62336);function IZ(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close.emit())})("formIsReady",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.review)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let Yu=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"review_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({id:null,name:""}),this.store.vm$.subscribe(i=>{this.review=i.item})):t.formName&&t.formName.currentValue&&"review_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadReviewEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.review=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(dr.J),e.Y36(A.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-review-form"]],inputs:{review:"review",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,IZ,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[w.O5,z.M,w.Ov],encapsulation:2}),s})(),Xu=(()=>{class s{constructor(){this.autoHeight=!1,this.reviews=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[{field:"clinicalProvider.name",headerName:"Clinical Provider",filter:"agTextColumnFilter"},{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{field:"patientId",filter:"agTextColumnFilter"},{field:"clinicalProviderId",filter:"agTextColumnFilter",hide:!0},{field:"comment",filter:"agTextColumnFilter"},{headerName:"Rating",field:"rating",valueFormatter:t=>{var i;return(0,S.oBD)(null===(i=t.data)||void 0===i?void 0:i.rating,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{field:"reivewDateAndTime",filter:"agDateColumnFilter"},{field:"parentId",filter:"agTextColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var r;t.includes(null===(r=i.data)||void 0===r?void 0:r.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-review-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(N.x,5),2&t){let r;e.iGM(r=e.CRH())&&(i.tableView=r.first)}},inputs:{autoHeight:"autoHeight",reviews:"reviews"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.reviews)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[N.x],encapsulation:2}),s})();function PZ(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-review-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","review_edit")("formControl",t.formControl)("review",t.review)}}const WZ=function(){return{}};function MZ(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-review-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","review_create")("formControl",t.formControl)("review",e.DdM(3,WZ))}}function EZ(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-review-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(u.ref.close())}),e.qZA()}2&s&&e.Q6J("reviews",o.data.items)}let OZ=(()=>{class s extends I.fS{constructor(t){super(),this.store=t,this.store.loadReviewsEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.reviews$.pipe((0,h.w)(i=>(0,T.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(dr.J))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","review","send","close"],[1,"w-full","h-full","bg-white",3,"reviews","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,PZ,2,3,"ng-template",null,1,e.W1O),e.YNc(3,MZ,1,4,"ng-template",null,2,e.W1O),e.YNc(5,EZ,1,1,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",u)("editTemplate",r)("createTemplate",l)("key",i.field.key)}},dependencies:[x.JJ,x.oH,J.$,Yu,Xu],encapsulation:2}),s})();function LZ(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-review-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","review_edit")("review",t.value)}}const GZ=function(){return{}};function $Z(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-review-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","review_create")("review",e.DdM(2,GZ))}function RZ(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-review-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(null==u.ref?null:u.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("reviews",t.items)}}let VZ=(()=>{class s extends Y{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:6,consts:[[3,"data","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","review","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","reviews","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,LZ,1,2,"ng-template",null,1,e.W1O),e.YNc(3,$Z,1,3,"ng-template",null,2,e.W1O),e.YNc(5,RZ,1,2,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("data",i.data)("title",i.to.title)("onSave",i.onSave)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[ee,Yu,Xu],encapsulation:2}),s})(),QZ=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[dr.J],imports:[w.ez,R.F,x.UX,V.o,H.u,Q.P,U.t,Z,j.h,K.G,I.X0.forChild({types:[{name:"review-select",component:OZ,wrappers:["form-field"]},{name:"review-grid",component:VZ}]})]}),s})(),UZ=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[QZ]}),s})();class Zi extends y.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class JZ extends Zi{constructor(o){super("ValidateRoleExcelDataAction"),this.valid=!1,this.excelData=o}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name)}),this.validationContext.addRule(new f.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof f.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(r=>r.name),newNames:[i.newName]}):i instanceof f.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,T.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class jZ extends f.wS{constructor(o,t,i,r,l){super(o,t,i,r,l,!0)}}class zZ extends f.ul{constructor(o,t,i,r=!1){super(o,t,r),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new f.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new jZ("name","The role name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class qZ extends Zi{constructor(o){super("CreateRoleAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new zZ("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateRole({input:this.input}).pipe((0,h.w)(o=>(0,ie.of)(o.data.created)))}}class HZ extends Zi{constructor(o){super("UpdateRolesAction"),this.roles=o}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.roles,!0))}performAction(){this.response=this.businessProvider.data.userUpdateRoles({input:{roles:this.roles}}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}class KZ extends Zi{constructor(o,t){super("UpdateRoleAction"),this.role=o,this.roleId=t}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.role,!0)).addRule(new f.xF("Id","Id should be a CUID and not null",this.roleId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateRole({roleId:this.roleId,input:this.role}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}let em=(()=>{class s extends y.nH{constructor(t,i,r){super("NotificationService.RoleBusinessProviderService",t,r),this.data=i}createRole(t){const i=new qZ(t);return i.Do(this),i.response}updateRole(t,i){const r=new KZ(t,i);return r.Do(this),r.response}importRoles(t){const i=new HZ(t);return i.Do(this),i.response}validateRoleExcelData(t){const i=new JZ(t);return i.Do(this),i.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(O.ed),e.LFG(E.q),e.LFG(y.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),kZ=(()=>{class s extends y.nH{constructor(t,i,r){super("RoleService",r,t),this.businessProvider=i}createRole(t){const i=Object.fromEntries(Object.entries(t).filter(([r,l])=>null!==l));return this.businessProvider.createRole(i)}updateRole(t,i){return this.businessProvider.updateRole(t,i)}importRoles(t){return this.businessProvider.importRoles(t)}validateRoleExcelData(t){return this.businessProvider.validateRoleExcelData(t)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(em,8),e.LFG(em),e.LFG(O.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),ur=(()=>{class s extends g.m1{constructor(t,i,r,l,u,P){super({loading:!1,roles:[],done:!1,searchQuery:"",formName:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=r,this.toast=l,this.formService=u,this.roleService=P,this.errors$=this.select(c=>c.errors),this.loading$=this.select(c=>c.loading),this.done$=this.select(c=>c.done),this.item$=this.select(c=>c.item),this.roles$=this.select(c=>c.roles),this.paging$=this.select(c=>c.paging),this.searchQuery$=this.select(c=>c.searchQuery),this.formName$=this.select(c=>c.formName),this.actionResult$=this.select(this.item$,this.done$,(c,d)=>({item:c,done:d}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.roles$,(c,d,n,a,m)=>({errors:c,loading:d,item:n,formName:a,roles:m}),{debounce:!0}),this.input$=this.select(this.paging$,this.searchQuery$,(c,d)=>({limit:c.limit,skip:c.skip,name:d,total:c.total})),this.setFormName=this.updater((c,d)=>Object.assign(Object.assign({},c),{formName:d})),this.setItem=this.updater((c,d)=>Object.assign(Object.assign({},c),{item:d})),this.addNewRole=this.updater((c,d)=>Object.assign(Object.assign({},c),{roles:[...c.roles,d]})),this.updateRole=this.updater((c,d)=>Object.assign(Object.assign({},c),{roles:c.roles.map(n=>n.id===d.id?d:n)})),this.addRoles=this.updater((c,d)=>Object.assign(Object.assign({},c),{roles:c.roles.concat(d)})),this.updateRoles=this.updater((c,d)=>Object.assign(Object.assign({},c),{roles:c.roles.map(n=>d.find(m=>m.id===n.id)||n)})),this.setSearchQuery=this.updater((c,d)=>Object.assign(Object.assign({},c),{searchQuery:d})),this.loadRoleEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.data.userRole({roleId:d}).pipe((0,g._b)(n=>{this.patchState({item:n.data.item,errors:n.errors,loading:!1})},n=>this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})))))),this.loadRolesEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.input$),(0,h.w)(([d,n])=>this.data.userRoles({input:n}).pipe((0,g._b)(a=>this.patchState({paging:{limit:n.limit,skip:n.skip,total:a.data.count.total},roles:a.data.items,errors:a.errors,loading:!1}),a=>this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})))))),this.createRoleEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.roleService.createRole(Object.assign({},d)).pipe((0,g._b)(n=>{this.addNewRole(n),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:n,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},n=>{n.graphQLErrors?(this.toast.error(n.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})):(this.toast.error(n.Message),this.formService.setErrors(n.Data))}))))),this.updateRoleEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([d,n])=>this.roleService.updateRole(d,d.id).pipe((0,g._b)(a=>{this.updateRole(a),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:a,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.deleteRoleEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([d,n])=>this.data.userDeleteRole({roleId:n.id}).pipe((0,g._b)(a=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:a.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.importExcelEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.roleService.importRoles(d).pipe((0,te.K)(n=>{var a;return this.toast.error(null!==(a=n.Message)&&void 0!==a?a:"Failed to save",{duration:3e3}),k.E}),(0,C.b)(n=>{const a=JSON.parse(n.created),m=JSON.parse(n.updated),p=JSON.parse(n.failed),_=a.length+m.length+p.length;this.addRoles(a),this.updateRoles(m),this.toast.success(`${a.length} created, ${m.length} updated, ${p.length} failed of total ${_}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("roleId")?(this.route.snapshot.paramMap.get("roleId"),this.setFormName("role_edit")):this.setFormName("role_create")}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.roleService.validateRoleExcelData(t)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(E.q),e.LFG(A.F0),e.LFG(A.gz),e.LFG(X.F),e.LFG(q.o),e.LFG(kZ))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function ZZ(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close.emit())})("formIsReady",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.role)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let tm=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"role_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.role=i.item})):t.formName&&t.formName.currentValue&&"role_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadRoleEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.role=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(ur),e.Y36(A.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-role-form"]],inputs:{role:"role",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,ZZ,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[w.O5,z.M,w.Ov],encapsulation:2}),s})(),im=(()=>{class s{constructor(){this.autoHeight=!1,this.roles=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[,{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var r;t.includes(null===(r=i.data)||void 0===r?void 0:r.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-role-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(N.x,5),2&t){let r;e.iGM(r=e.CRH())&&(i.tableView=r.first)}},inputs:{autoHeight:"autoHeight",roles:"roles"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.roles)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[N.x],encapsulation:2}),s})();function BZ(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-role-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","role_edit")("formControl",t.formControl)("role",t.role)}}const YZ=function(){return{}};function XZ(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-role-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","role_create")("formControl",t.formControl)("role",e.DdM(3,YZ))}}function e4(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-role-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(u.ref.close())}),e.qZA()}2&s&&e.Q6J("roles",o.data.items)}let t4=(()=>{class s extends I.fS{constructor(t){super(),this.store=t,this.store.loadRolesEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.roles$.pipe((0,h.w)(i=>(0,T.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(ur))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","role","send","close"],[1,"w-full","h-full","bg-white",3,"roles","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,BZ,2,3,"ng-template",null,1,e.W1O),e.YNc(3,XZ,1,4,"ng-template",null,2,e.W1O),e.YNc(5,e4,1,1,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",u)("editTemplate",r)("createTemplate",l)("key",i.field.key)}},dependencies:[x.JJ,x.oH,J.$,tm,im],encapsulation:2}),s})();function i4(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-role-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","role_edit")("role",t.value)}}const s4=function(){return{}};function o4(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-role-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","role_create")("role",e.DdM(2,s4))}function r4(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-role-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(null==u.ref?null:u.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("roles",t.items)}}let a4=(()=>{class s extends Y{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","role","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","roles","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,i4,1,2,"ng-template",null,1,e.W1O),e.YNc(3,o4,1,3,"ng-template",null,2,e.W1O),e.YNc(5,r4,1,2,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[ee,tm,im],encapsulation:2}),s})(),n4=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[ur],imports:[w.ez,R.F,x.UX,V.o,H.u,Q.P,U.t,Z,j.h,K.G,I.X0.forChild({types:[{name:"role-select",component:t4,wrappers:["form-field"]},{name:"role-grid",component:a4}]})]}),s})(),l4=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[n4]}),s})();class Bi extends y.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class c4 extends Bi{constructor(o){super("ValidateServiceExcelDataAction"),this.valid=!1,this.excelData=o}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name)}),this.validationContext.addRule(new f.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof f.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(r=>r.name),newNames:[i.newName]}):i instanceof f.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,T.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class d4 extends f.wS{constructor(o,t,i,r,l){super(o,t,i,r,l,!0)}}class u4 extends f.ul{constructor(o,t,i,r=!1){super(o,t,r),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new f.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new d4("name","The service name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class m4 extends Bi{constructor(o){super("CreateServiceAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new u4("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateService({input:this.input}).pipe((0,h.w)(o=>(0,ie.of)(o.data.created)))}}class p4 extends Bi{constructor(o){super("UpdateServicesAction"),this.services=o}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.services,!0))}performAction(){this.response=this.businessProvider.data.userUpdateServices({input:{services:this.services}}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}class h4 extends Bi{constructor(o,t){super("UpdateServiceAction"),this.service=o,this.serviceId=t}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.service,!0)).addRule(new f.xF("Id","Id should be a CUID and not null",this.serviceId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateService({serviceId:this.serviceId,input:this.service}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}let sm=(()=>{class s extends y.nH{constructor(t,i,r){super("NotificationService.ServiceBusinessProviderService",t,r),this.data=i}createService(t){const i=new m4(t);return i.Do(this),i.response}updateService(t,i){const r=new h4(t,i);return r.Do(this),r.response}importServices(t){const i=new p4(t);return i.Do(this),i.response}validateServiceExcelData(t){const i=new c4(t);return i.Do(this),i.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(O.ed),e.LFG(E.q),e.LFG(y.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),f4=(()=>{class s extends y.nH{constructor(t,i,r){super("ServiceService",r,t),this.businessProvider=i}createService(t){const i=Object.fromEntries(Object.entries(t).filter(([r,l])=>null!==l));return this.businessProvider.createService(i)}updateService(t,i){return this.businessProvider.updateService(t,i)}importServices(t){return this.businessProvider.importServices(t)}validateServiceExcelData(t){return this.businessProvider.validateServiceExcelData(t)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(sm,8),e.LFG(sm),e.LFG(O.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),mr=(()=>{class s extends g.m1{constructor(t,i,r,l,u,P){super({loading:!1,services:[],done:!1,searchQuery:"",formName:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=r,this.toast=l,this.formService=u,this.serviceService=P,this.errors$=this.select(c=>c.errors),this.loading$=this.select(c=>c.loading),this.done$=this.select(c=>c.done),this.item$=this.select(c=>c.item),this.services$=this.select(c=>c.services),this.paging$=this.select(c=>c.paging),this.searchQuery$=this.select(c=>c.searchQuery),this.formName$=this.select(c=>c.formName),this.actionResult$=this.select(this.item$,this.done$,(c,d)=>({item:c,done:d}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.services$,(c,d,n,a,m)=>({errors:c,loading:d,item:n,formName:a,services:m}),{debounce:!0}),this.input$=this.select(this.paging$,this.searchQuery$,(c,d)=>({limit:c.limit,skip:c.skip,name:d,total:c.total})),this.setFormName=this.updater((c,d)=>Object.assign(Object.assign({},c),{formName:d})),this.setItem=this.updater((c,d)=>Object.assign(Object.assign({},c),{item:d})),this.addNewService=this.updater((c,d)=>Object.assign(Object.assign({},c),{services:[...c.services,d]})),this.updateService=this.updater((c,d)=>Object.assign(Object.assign({},c),{services:c.services.map(n=>n.id===d.id?d:n)})),this.addServices=this.updater((c,d)=>Object.assign(Object.assign({},c),{services:c.services.concat(d)})),this.updateServices=this.updater((c,d)=>Object.assign(Object.assign({},c),{services:c.services.map(n=>d.find(m=>m.id===n.id)||n)})),this.setSearchQuery=this.updater((c,d)=>Object.assign(Object.assign({},c),{searchQuery:d})),this.loadServiceEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.data.userService({serviceId:d}).pipe((0,g._b)(n=>{this.patchState({item:n.data.item,errors:n.errors,loading:!1})},n=>this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})))))),this.loadServicesEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.input$),(0,h.w)(([d,n])=>this.data.userServices({input:n}).pipe((0,g._b)(a=>this.patchState({paging:{limit:n.limit,skip:n.skip,total:a.data.count.total},services:a.data.items,errors:a.errors,loading:!1}),a=>this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})))))),this.createServiceEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.serviceService.createService(Object.assign({},d)).pipe((0,g._b)(n=>{this.addNewService(n),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:n,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},n=>{n.graphQLErrors?(this.toast.error(n.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})):(this.toast.error(n.Message),this.formService.setErrors(n.Data))}))))),this.updateServiceEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([d,n])=>this.serviceService.updateService(d,d.id).pipe((0,g._b)(a=>{this.updateService(a),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:a,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.deleteServiceEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([d,n])=>this.data.userDeleteService({serviceId:n.id}).pipe((0,g._b)(a=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:a.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.importExcelEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.serviceService.importServices(d).pipe((0,te.K)(n=>{var a;return this.toast.error(null!==(a=n.Message)&&void 0!==a?a:"Failed to save",{duration:3e3}),k.E}),(0,C.b)(n=>{const a=JSON.parse(n.created),m=JSON.parse(n.updated),p=JSON.parse(n.failed),_=a.length+m.length+p.length;this.addServices(a),this.updateServices(m),this.toast.success(`${a.length} created, ${m.length} updated, ${p.length} failed of total ${_}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("serviceId")?(this.route.snapshot.paramMap.get("serviceId"),this.setFormName("service_edit")):this.setFormName("service_create")}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.serviceService.validateServiceExcelData(t)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(E.q),e.LFG(A.F0),e.LFG(A.gz),e.LFG(X.F),e.LFG(q.o),e.LFG(f4))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function _4(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close.emit())})("formIsReady",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.service)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let om=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"service_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({id:null,name:""}),this.store.vm$.subscribe(i=>{this.service=i.item})):t.formName&&t.formName.currentValue&&"service_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadServiceEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.service=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(mr),e.Y36(A.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-service-form"]],inputs:{service:"service",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,_4,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[w.O5,z.M,w.Ov],encapsulation:2}),s})(),rm=(()=>{class s{constructor(){this.autoHeight=!1,this.services=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[,{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var r;t.includes(null===(r=i.data)||void 0===r?void 0:r.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-service-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(N.x,5),2&t){let r;e.iGM(r=e.CRH())&&(i.tableView=r.first)}},inputs:{autoHeight:"autoHeight",services:"services"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.services)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[N.x],encapsulation:2}),s})();function g4(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-service-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","service_edit")("formControl",t.formControl)("service",t.service)}}const C4=function(){return{}};function S4(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-service-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","service_create")("formControl",t.formControl)("service",e.DdM(3,C4))}}function v4(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-service-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(u.ref.close())}),e.qZA()}2&s&&e.Q6J("services",o.data.items)}let b4=(()=>{class s extends I.fS{constructor(t){super(),this.store=t,this.store.loadServicesEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.services$.pipe((0,h.w)(i=>(0,T.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(mr))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","service","send","close"],[1,"w-full","h-full","bg-white",3,"services","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,g4,2,3,"ng-template",null,1,e.W1O),e.YNc(3,S4,1,4,"ng-template",null,2,e.W1O),e.YNc(5,v4,1,1,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",u)("editTemplate",r)("createTemplate",l)("key",i.field.key)}},dependencies:[x.JJ,x.oH,J.$,om,rm],encapsulation:2}),s})();function T4(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-service-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","service_edit")("service",t.value)}}const y4=function(){return{}};function w4(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-service-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","service_create")("service",e.DdM(2,y4))}function x4(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-service-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(null==u.ref?null:u.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("services",t.items)}}let N4=(()=>{class s extends Y{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:6,consts:[[3,"data","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","service","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","services","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,T4,1,2,"ng-template",null,1,e.W1O),e.YNc(3,w4,1,3,"ng-template",null,2,e.W1O),e.YNc(5,x4,1,2,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("data",i.data)("title",i.to.title)("onSave",i.onSave)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[ee,om,rm],encapsulation:2}),s})(),A4=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[mr],imports:[w.ez,R.F,x.UX,V.o,H.u,Q.P,U.t,Z,j.h,K.G,I.X0.forChild({types:[{name:"service-select",component:b4,wrappers:["form-field"]},{name:"service-grid",component:N4}]})]}),s})(),F4=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[A4]}),s})();class Yi extends y.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class D4 extends Yi{constructor(o,t){super("ValidateSettingExcelDataAction"),this.valid=!1,this.excelData=o,this.users=t}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name),this.validationContext.addRule(new f.mi(`userName_${i}_is_valid}`,"User Is Not Valid","user.name",t.user,this.users,!0))}),this.validationContext.addRule(new f.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof f.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(r=>r.name),newNames:[i.newName]}):i instanceof f.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,T.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class I4 extends f.wS{constructor(o,t,i,r,l){super(o,t,i,r,l,!0)}}class P4 extends f.ul{constructor(o,t,i,r=!1){super(o,t,r),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new f.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new I4("name","The setting name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class W4 extends Yi{constructor(o){super("CreateSettingAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new P4("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateSetting({input:this.input}).pipe((0,h.w)(o=>(0,ie.of)(o.data.created)))}}class M4 extends Yi{constructor(o){super("UpdateSettingsAction"),this.settings=o}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.settings,!0))}performAction(){this.response=this.businessProvider.data.userUpdateSettings({input:{settings:this.settings}}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}class E4 extends Yi{constructor(o,t){super("UpdateSettingAction"),this.setting=o,this.settingId=t}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.setting,!0)).addRule(new f.xF("Id","Id should be a CUID and not null",this.settingId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateSetting({settingId:this.settingId,input:this.setting}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}let am=(()=>{class s extends y.nH{constructor(t,i,r){super("NotificationService.SettingBusinessProviderService",t,r),this.data=i}createSetting(t){const i=new W4(t);return i.Do(this),i.response}updateSetting(t,i){const r=new E4(t,i);return r.Do(this),r.response}importSettings(t){const i=new M4(t);return i.Do(this),i.response}validateSettingExcelData(t,i){const r=new D4(t,i);return r.Do(this),r.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(O.ed),e.LFG(E.q),e.LFG(y.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),O4=(()=>{class s extends y.nH{constructor(t,i,r){super("SettingService",r,t),this.businessProvider=i}createSetting(t){const i=Object.fromEntries(Object.entries(t).filter(([r,l])=>null!==l));return this.businessProvider.createSetting(i)}updateSetting(t,i){return this.businessProvider.updateSetting(t,i)}importSettings(t){return this.businessProvider.importSettings(t)}validateSettingExcelData(t,i){return this.businessProvider.validateSettingExcelData(t,i)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(am,8),e.LFG(am),e.LFG(O.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),pr=(()=>{class s extends g.m1{constructor(t,i,r,l,u,P){if(super({loading:!1,settings:[],done:!1,searchQuery:"",formName:void 0,userId:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=r,this.toast=l,this.formService=u,this.settingService=P,this.errors$=this.select(d=>d.errors),this.loading$=this.select(d=>d.loading),this.done$=this.select(d=>d.done),this.item$=this.select(d=>d.item),this.settings$=this.select(d=>d.settings),this.users$=this.select(d=>d.users||[]),this.userId$=this.select(d=>d.userId),this.paging$=this.select(d=>d.paging),this.searchQuery$=this.select(d=>d.searchQuery),this.formName$=this.select(d=>d.formName),this.actionResult$=this.select(this.item$,this.done$,(d,n)=>({item:d,done:n}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.settings$,this.users$,(d,n,a,m,p,_)=>({errors:d,loading:n,item:a,formName:m,settings:p,users:_}),{debounce:!0}),this.input$=this.select(this.paging$,this.userId$,this.searchQuery$,(d,n,a)=>({limit:d.limit,skip:d.skip,name:a,userId:n,total:d.total})),this.setFormName=this.updater((d,n)=>Object.assign(Object.assign({},d),{formName:n})),this.setUserId=this.updater((d,n)=>Object.assign(Object.assign({},d),{userId:n})),this.filterUsers=d=>this.data.userSelectUsers({input:{name:d}}).pipe((0,g._b)(n=>{let a=n.data.items;return this.patchState({users:a}),a},n=>this.patchState({errors:n.graphQLErrors?n.graphQLErrors:n})),(0,B.U)(n=>n.data.items)),this.addUser=this.updater((d,n)=>Object.assign(Object.assign({},d),{users:d.users.concat(n)})),this.setItem=this.updater((d,n)=>Object.assign(Object.assign({},d),{item:n})),this.addNewSetting=this.updater((d,n)=>Object.assign(Object.assign({},d),{settings:[...d.settings,n]})),this.updateSetting=this.updater((d,n)=>Object.assign(Object.assign({},d),{settings:d.settings.map(a=>a.id===n.id?n:a)})),this.addSettings=this.updater((d,n)=>Object.assign(Object.assign({},d),{settings:d.settings.concat(n)})),this.updateSettings=this.updater((d,n)=>Object.assign(Object.assign({},d),{settings:d.settings.map(a=>n.find(p=>p.id===a.id)||a)})),this.setSearchQuery=this.updater((d,n)=>Object.assign(Object.assign({},d),{searchQuery:n})),this.loadSettingEffect=this.effect(d=>d.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(n=>this.data.userSetting({settingId:n}).pipe((0,g._b)(a=>{this.patchState({item:a.data.item,errors:a.errors,loading:!1})},a=>this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})))))),this.loadSettingsEffect=this.effect(d=>d.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.input$),(0,h.w)(([n,a])=>this.data.userSettings({input:a}).pipe((0,g._b)(m=>this.patchState({paging:{limit:a.limit,skip:a.skip,total:m.data.count.total},settings:m.data.items,errors:m.errors,loading:!1}),m=>this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})))))),this.createSettingEffect=this.effect(d=>d.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(n=>this.settingService.createSetting(Object.assign({},n)).pipe((0,g._b)(a=>{this.addNewSetting(a),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:a,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.updateSettingEffect=this.effect(d=>d.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([n,a])=>this.settingService.updateSetting(n,n.id).pipe((0,g._b)(m=>{this.updateSetting(m),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:m,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},m=>{m.graphQLErrors?(this.toast.error(m.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})):(this.toast.error(m.Message),this.formService.setErrors(m.Data))}))))),this.deleteSettingEffect=this.effect(d=>d.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([n,a])=>this.data.userDeleteSetting({settingId:a.id}).pipe((0,g._b)(m=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:m.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},m=>{m.graphQLErrors?(this.toast.error(m.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})):(this.toast.error(m.Message),this.formService.setErrors(m.Data))}))))),this.importExcelEffect=this.effect(d=>d.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(n=>this.settingService.importSettings(n).pipe((0,te.K)(a=>{var m;return this.toast.error(null!==(m=a.Message)&&void 0!==m?m:"Failed to save",{duration:3e3}),k.E}),(0,C.b)(a=>{const m=JSON.parse(a.created),p=JSON.parse(a.updated),_=JSON.parse(a.failed),v=m.length+p.length+_.length;this.addSettings(m),this.updateSettings(p),this.toast.success(`${m.length} created, ${p.length} updated, ${_.length} failed of total ${v}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("settingId")?(this.route.snapshot.paramMap.get("settingId"),this.setFormName("setting_edit")):this.setFormName("setting_create"),this.route.snapshot.paramMap.has("userId")){var c=this.route.snapshot.paramMap.get("userId");this.setUserId(c)}}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.settingService.validateSettingExcelData(t,i.users)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(E.q),e.LFG(A.F0),e.LFG(A.gz),e.LFG(X.F),e.LFG(q.o),e.LFG(O4))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function L4(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close.emit())})("formIsReady",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.setting)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let nm=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"setting_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.setting=i.item})):t.formName&&t.formName.currentValue&&"setting_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadSettingEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.setting=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(pr),e.Y36(A.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-setting-form"]],inputs:{setting:"setting",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,L4,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[w.O5,z.M,w.Ov],encapsulation:2}),s})(),lm=(()=>{class s{constructor(){this.autoHeight=!1,this.settings=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[{field:"user.name",headerName:"User",filter:"agTextColumnFilter"},{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{field:"value",filter:"agTextColumnFilter"},{field:"dateFormat",filter:"agTextColumnFilter"},{field:"timeFormat",filter:"agTextColumnFilter"},{field:"startWeekOn",filter:"agTextColumnFilter"},{field:"userId",filter:"agTextColumnFilter",hide:!0}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var r;t.includes(null===(r=i.data)||void 0===r?void 0:r.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-setting-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(N.x,5),2&t){let r;e.iGM(r=e.CRH())&&(i.tableView=r.first)}},inputs:{autoHeight:"autoHeight",settings:"settings"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.settings)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[N.x],encapsulation:2}),s})();function G4(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-setting-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","setting_edit")("formControl",t.formControl)("setting",t.setting)}}const $4=function(){return{}};function R4(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-setting-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","setting_create")("formControl",t.formControl)("setting",e.DdM(3,$4))}}function V4(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-setting-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(u.ref.close())}),e.qZA()}2&s&&e.Q6J("settings",o.data.items)}let Q4=(()=>{class s extends I.fS{constructor(t){super(),this.store=t,this.store.loadSettingsEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.settings$.pipe((0,h.w)(i=>(0,T.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(pr))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","setting","send","close"],[1,"w-full","h-full","bg-white",3,"settings","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,G4,2,3,"ng-template",null,1,e.W1O),e.YNc(3,R4,1,4,"ng-template",null,2,e.W1O),e.YNc(5,V4,1,1,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",u)("editTemplate",r)("createTemplate",l)("key",i.field.key)}},dependencies:[x.JJ,x.oH,J.$,nm,lm],encapsulation:2}),s})();function U4(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-setting-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","setting_edit")("setting",t.value)}}const J4=function(){return{}};function j4(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-setting-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","setting_create")("setting",e.DdM(2,J4))}function z4(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-setting-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(null==u.ref?null:u.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("settings",t.items)}}let q4=(()=>{class s extends Y{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","setting","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","settings","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,U4,1,2,"ng-template",null,1,e.W1O),e.YNc(3,j4,1,3,"ng-template",null,2,e.W1O),e.YNc(5,z4,1,2,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[ee,nm,lm],encapsulation:2}),s})(),H4=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[pr],imports:[w.ez,R.F,x.UX,V.o,H.u,Q.P,U.t,Z,j.h,K.G,I.X0.forChild({types:[{name:"setting-select",component:Q4,wrappers:["form-field"]},{name:"setting-grid",component:q4}]})]}),s})(),K4=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[H4]}),s})();class Xi extends y.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class k4 extends Xi{constructor(o){super("ValidateSeverityExcelDataAction"),this.valid=!1,this.excelData=o}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name)}),this.validationContext.addRule(new f.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof f.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(r=>r.name),newNames:[i.newName]}):i instanceof f.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,T.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class Z4 extends f.wS{constructor(o,t,i,r,l){super(o,t,i,r,l,!0)}}class B4 extends f.ul{constructor(o,t,i,r=!1){super(o,t,r),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new f.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new Z4("name","The severity name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class Y4 extends Xi{constructor(o){super("CreateSeverityAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new B4("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateSeverity({input:this.input}).pipe((0,h.w)(o=>(0,ie.of)(o.data.created)))}}class X4 extends Xi{constructor(o){super("UpdateSeveritiesAction"),this.severities=o}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.severities,!0))}performAction(){this.response=this.businessProvider.data.userUpdateSeverities({input:{severities:this.severities}}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}class eB extends Xi{constructor(o,t){super("UpdateSeverityAction"),this.severity=o,this.severityId=t}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.severity,!0)).addRule(new f.xF("Id","Id should be a CUID and not null",this.severityId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateSeverity({severityId:this.severityId,input:this.severity}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}let cm=(()=>{class s extends y.nH{constructor(t,i,r){super("NotificationService.SeverityBusinessProviderService",t,r),this.data=i}createSeverity(t){const i=new Y4(t);return i.Do(this),i.response}updateSeverity(t,i){const r=new eB(t,i);return r.Do(this),r.response}importSeverities(t){const i=new X4(t);return i.Do(this),i.response}validateSeverityExcelData(t){const i=new k4(t);return i.Do(this),i.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(O.ed),e.LFG(E.q),e.LFG(y.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),tB=(()=>{class s extends y.nH{constructor(t,i,r){super("SeverityService",r,t),this.businessProvider=i}createSeverity(t){const i=Object.fromEntries(Object.entries(t).filter(([r,l])=>null!==l));return this.businessProvider.createSeverity(i)}updateSeverity(t,i){return this.businessProvider.updateSeverity(t,i)}importSeverities(t){return this.businessProvider.importSeverities(t)}validateSeverityExcelData(t){return this.businessProvider.validateSeverityExcelData(t)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(cm,8),e.LFG(cm),e.LFG(O.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),hr=(()=>{class s extends g.m1{constructor(t,i,r,l,u,P){super({loading:!1,severities:[],done:!1,searchQuery:"",formName:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=r,this.toast=l,this.formService=u,this.severityService=P,this.errors$=this.select(c=>c.errors),this.loading$=this.select(c=>c.loading),this.done$=this.select(c=>c.done),this.item$=this.select(c=>c.item),this.severities$=this.select(c=>c.severities),this.paging$=this.select(c=>c.paging),this.searchQuery$=this.select(c=>c.searchQuery),this.formName$=this.select(c=>c.formName),this.actionResult$=this.select(this.item$,this.done$,(c,d)=>({item:c,done:d}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.severities$,(c,d,n,a,m)=>({errors:c,loading:d,item:n,formName:a,severities:m}),{debounce:!0}),this.input$=this.select(this.paging$,this.searchQuery$,(c,d)=>({limit:c.limit,skip:c.skip,name:d,total:c.total})),this.setFormName=this.updater((c,d)=>Object.assign(Object.assign({},c),{formName:d})),this.setItem=this.updater((c,d)=>Object.assign(Object.assign({},c),{item:d})),this.addNewSeverity=this.updater((c,d)=>Object.assign(Object.assign({},c),{severities:[...c.severities,d]})),this.updateSeverity=this.updater((c,d)=>Object.assign(Object.assign({},c),{severities:c.severities.map(n=>n.id===d.id?d:n)})),this.addSeverities=this.updater((c,d)=>Object.assign(Object.assign({},c),{severities:c.severities.concat(d)})),this.updateSeverities=this.updater((c,d)=>Object.assign(Object.assign({},c),{severities:c.severities.map(n=>d.find(m=>m.id===n.id)||n)})),this.setSearchQuery=this.updater((c,d)=>Object.assign(Object.assign({},c),{searchQuery:d})),this.loadSeverityEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.data.userSeverity({severityId:d}).pipe((0,g._b)(n=>{this.patchState({item:n.data.item,errors:n.errors,loading:!1})},n=>this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})))))),this.loadSeveritiesEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.input$),(0,h.w)(([d,n])=>this.data.userSeverities({input:n}).pipe((0,g._b)(a=>this.patchState({paging:{limit:n.limit,skip:n.skip,total:a.data.count.total},severities:a.data.items,errors:a.errors,loading:!1}),a=>this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})))))),this.createSeverityEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.severityService.createSeverity(Object.assign({},d)).pipe((0,g._b)(n=>{this.addNewSeverity(n),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:n,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},n=>{n.graphQLErrors?(this.toast.error(n.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})):(this.toast.error(n.Message),this.formService.setErrors(n.Data))}))))),this.updateSeverityEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([d,n])=>this.severityService.updateSeverity(d,d.id).pipe((0,g._b)(a=>{this.updateSeverity(a),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:a,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.deleteSeverityEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([d,n])=>this.data.userDeleteSeverity({severityId:n.id}).pipe((0,g._b)(a=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:a.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.importExcelEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.severityService.importSeverities(d).pipe((0,te.K)(n=>{var a;return this.toast.error(null!==(a=n.Message)&&void 0!==a?a:"Failed to save",{duration:3e3}),k.E}),(0,C.b)(n=>{const a=JSON.parse(n.created),m=JSON.parse(n.updated),p=JSON.parse(n.failed),_=a.length+m.length+p.length;this.addSeverities(a),this.updateSeverities(m),this.toast.success(`${a.length} created, ${m.length} updated, ${p.length} failed of total ${_}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("severityId")?(this.route.snapshot.paramMap.get("severityId"),this.setFormName("severity_edit")):this.setFormName("severity_create")}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.severityService.validateSeverityExcelData(t)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(E.q),e.LFG(A.F0),e.LFG(A.gz),e.LFG(X.F),e.LFG(q.o),e.LFG(tB))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function iB(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close.emit())})("formIsReady",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.severity)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let dm=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"severity_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({id:null,name:""}),this.store.vm$.subscribe(i=>{this.severity=i.item})):t.formName&&t.formName.currentValue&&"severity_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadSeverityEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.severity=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(hr),e.Y36(A.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-severity-form"]],inputs:{severity:"severity",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,iB,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[w.O5,z.M,w.Ov],encapsulation:2}),s})(),um=(()=>{class s{constructor(){this.autoHeight=!1,this.severities=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[,{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var r;t.includes(null===(r=i.data)||void 0===r?void 0:r.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-severity-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(N.x,5),2&t){let r;e.iGM(r=e.CRH())&&(i.tableView=r.first)}},inputs:{autoHeight:"autoHeight",severities:"severities"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.severities)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[N.x],encapsulation:2}),s})();function sB(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-severity-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","severity_edit")("formControl",t.formControl)("severity",t.severity)}}const oB=function(){return{}};function rB(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-severity-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","severity_create")("formControl",t.formControl)("severity",e.DdM(3,oB))}}function aB(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-severity-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(u.ref.close())}),e.qZA()}2&s&&e.Q6J("severities",o.data.items)}let nB=(()=>{class s extends I.fS{constructor(t){super(),this.store=t,this.store.loadSeveritiesEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.severities$.pipe((0,h.w)(i=>(0,T.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(hr))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","severity","send","close"],[1,"w-full","h-full","bg-white",3,"severities","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,sB,2,3,"ng-template",null,1,e.W1O),e.YNc(3,rB,1,4,"ng-template",null,2,e.W1O),e.YNc(5,aB,1,1,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",u)("editTemplate",r)("createTemplate",l)("key",i.field.key)}},dependencies:[x.JJ,x.oH,J.$,dm,um],encapsulation:2}),s})();function lB(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-severity-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","severity_edit")("severity",t.value)}}const cB=function(){return{}};function dB(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-severity-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","severity_create")("severity",e.DdM(2,cB))}function uB(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-severity-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(null==u.ref?null:u.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("severities",t.items)}}let mB=(()=>{class s extends Y{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:6,consts:[[3,"data","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","severity","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","severities","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,lB,1,2,"ng-template",null,1,e.W1O),e.YNc(3,dB,1,3,"ng-template",null,2,e.W1O),e.YNc(5,uB,1,2,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("data",i.data)("title",i.to.title)("onSave",i.onSave)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[ee,dm,um],encapsulation:2}),s})(),pB=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[hr],imports:[w.ez,R.F,x.UX,V.o,H.u,Q.P,U.t,Z,j.h,K.G,I.X0.forChild({types:[{name:"severity-select",component:nB,wrappers:["form-field"]},{name:"severity-grid",component:mB}]})]}),s})(),hB=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[pB]}),s})();var fr=ae(53783);function fB(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close.emit())})("formIsReady",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.specialty)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let mm=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"specialty_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({id:null,name:""}),this.store.vm$.subscribe(i=>{this.specialty=i.item})):t.formName&&t.formName.currentValue&&"specialty_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadSpecialtyEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.specialty=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(fr.T),e.Y36(A.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-specialty-form"]],inputs:{specialty:"specialty",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,fB,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[w.O5,z.M,w.Ov],encapsulation:2}),s})(),pm=(()=>{class s{constructor(){this.autoHeight=!1,this.specialties=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[,{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{headerName:"Active",field:"active",filter:"agSetColumnFilter",cellRenderer:"checkboxRenderer"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var r;t.includes(null===(r=i.data)||void 0===r?void 0:r.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-specialty-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(N.x,5),2&t){let r;e.iGM(r=e.CRH())&&(i.tableView=r.first)}},inputs:{autoHeight:"autoHeight",specialties:"specialties"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.specialties)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[N.x],encapsulation:2}),s})();function _B(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-specialty-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","specialty_edit")("formControl",t.formControl)("specialty",t.specialty)}}const gB=function(){return{}};function CB(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-specialty-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","specialty_create")("formControl",t.formControl)("specialty",e.DdM(3,gB))}}function SB(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-specialty-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(u.ref.close())}),e.qZA()}2&s&&e.Q6J("specialties",o.data.items)}let vB=(()=>{class s extends I.fS{constructor(t){super(),this.store=t,this.store.loadSpecialtiesEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.specialties$.pipe((0,h.w)(i=>(0,T.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(fr.T))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","specialty","send","close"],[1,"w-full","h-full","bg-white",3,"specialties","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,_B,2,3,"ng-template",null,1,e.W1O),e.YNc(3,CB,1,4,"ng-template",null,2,e.W1O),e.YNc(5,SB,1,1,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",u)("editTemplate",r)("createTemplate",l)("key",i.field.key)}},dependencies:[x.JJ,x.oH,J.$,mm,pm],encapsulation:2}),s})();function bB(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-specialty-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","specialty_edit")("specialty",t.value)}}const TB=function(){return{}};function yB(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-specialty-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","specialty_create")("specialty",e.DdM(2,TB))}function wB(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-specialty-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(null==u.ref?null:u.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("specialties",t.items)}}let xB=(()=>{class s extends Y{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:6,consts:[[3,"data","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","specialty","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","specialties","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,bB,1,2,"ng-template",null,1,e.W1O),e.YNc(3,yB,1,3,"ng-template",null,2,e.W1O),e.YNc(5,wB,1,2,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("data",i.data)("title",i.to.title)("onSave",i.onSave)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[ee,mm,pm],encapsulation:2}),s})(),NB=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[fr.T],imports:[w.ez,R.F,x.UX,V.o,H.u,Q.P,U.t,Z,j.h,K.G,I.X0.forChild({types:[{name:"specialty-select",component:vB,wrappers:["form-field"]},{name:"specialty-grid",component:xB}]})]}),s})(),AB=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[NB]}),s})();class es extends y.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class FB extends es{constructor(o){super("ValidateSurgicalPositionExcelDataAction"),this.valid=!1,this.excelData=o}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name)}),this.validationContext.addRule(new f.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof f.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(r=>r.name),newNames:[i.newName]}):i instanceof f.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,T.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class DB extends f.wS{constructor(o,t,i,r,l){super(o,t,i,r,l,!0)}}class IB extends f.ul{constructor(o,t,i,r=!1){super(o,t,r),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new f.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new DB("name","The surgicalposition name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class PB extends es{constructor(o){super("CreateSurgicalPositionAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new IB("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateSurgicalPosition({input:this.input}).pipe((0,h.w)(o=>(0,ie.of)(o.data.created)))}}class WB extends es{constructor(o){super("UpdateSurgicalPositionsAction"),this.surgicalPositions=o}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.surgicalPositions,!0))}performAction(){this.response=this.businessProvider.data.userUpdateSurgicalPositions({input:{surgicalPositions:this.surgicalPositions}}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}class MB extends es{constructor(o,t){super("UpdateSurgicalPositionAction"),this.surgicalPosition=o,this.surgicalPositionId=t}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.surgicalPosition,!0)).addRule(new f.xF("Id","Id should be a CUID and not null",this.surgicalPositionId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateSurgicalPosition({surgicalPositionId:this.surgicalPositionId,input:this.surgicalPosition}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}let hm=(()=>{class s extends y.nH{constructor(t,i,r){super("NotificationService.SurgicalPositionBusinessProviderService",t,r),this.data=i}createSurgicalPosition(t){const i=new PB(t);return i.Do(this),i.response}updateSurgicalPosition(t,i){const r=new MB(t,i);return r.Do(this),r.response}importSurgicalPositions(t){const i=new WB(t);return i.Do(this),i.response}validateSurgicalPositionExcelData(t){const i=new FB(t);return i.Do(this),i.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(O.ed),e.LFG(E.q),e.LFG(y.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),EB=(()=>{class s extends y.nH{constructor(t,i,r){super("SurgicalPositionService",r,t),this.businessProvider=i}createSurgicalPosition(t){const i=Object.fromEntries(Object.entries(t).filter(([r,l])=>null!==l));return this.businessProvider.createSurgicalPosition(i)}updateSurgicalPosition(t,i){return this.businessProvider.updateSurgicalPosition(t,i)}importSurgicalPositions(t){return this.businessProvider.importSurgicalPositions(t)}validateSurgicalPositionExcelData(t){return this.businessProvider.validateSurgicalPositionExcelData(t)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(hm,8),e.LFG(hm),e.LFG(O.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),_r=(()=>{class s extends g.m1{constructor(t,i,r,l,u,P){super({loading:!1,surgicalPositions:[],done:!1,searchQuery:"",formName:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=r,this.toast=l,this.formService=u,this.surgicalPositionService=P,this.errors$=this.select(c=>c.errors),this.loading$=this.select(c=>c.loading),this.done$=this.select(c=>c.done),this.item$=this.select(c=>c.item),this.surgicalPositions$=this.select(c=>c.surgicalPositions),this.paging$=this.select(c=>c.paging),this.searchQuery$=this.select(c=>c.searchQuery),this.formName$=this.select(c=>c.formName),this.actionResult$=this.select(this.item$,this.done$,(c,d)=>({item:c,done:d}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.surgicalPositions$,(c,d,n,a,m)=>({errors:c,loading:d,item:n,formName:a,surgicalPositions:m}),{debounce:!0}),this.input$=this.select(this.paging$,this.searchQuery$,(c,d)=>({limit:c.limit,skip:c.skip,name:d,total:c.total})),this.setFormName=this.updater((c,d)=>Object.assign(Object.assign({},c),{formName:d})),this.setItem=this.updater((c,d)=>Object.assign(Object.assign({},c),{item:d})),this.addNewSurgicalPosition=this.updater((c,d)=>Object.assign(Object.assign({},c),{surgicalPositions:[...c.surgicalPositions,d]})),this.updateSurgicalPosition=this.updater((c,d)=>Object.assign(Object.assign({},c),{surgicalPositions:c.surgicalPositions.map(n=>n.id===d.id?d:n)})),this.addSurgicalPositions=this.updater((c,d)=>Object.assign(Object.assign({},c),{surgicalPositions:c.surgicalPositions.concat(d)})),this.updateSurgicalPositions=this.updater((c,d)=>Object.assign(Object.assign({},c),{surgicalPositions:c.surgicalPositions.map(n=>d.find(m=>m.id===n.id)||n)})),this.setSearchQuery=this.updater((c,d)=>Object.assign(Object.assign({},c),{searchQuery:d})),this.loadSurgicalPositionEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.data.userSurgicalPosition({surgicalPositionId:d}).pipe((0,g._b)(n=>{this.patchState({item:n.data.item,errors:n.errors,loading:!1})},n=>this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})))))),this.loadSurgicalPositionsEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.input$),(0,h.w)(([d,n])=>this.data.userSurgicalPositions({input:n}).pipe((0,g._b)(a=>this.patchState({paging:{limit:n.limit,skip:n.skip,total:a.data.count.total},surgicalPositions:a.data.items,errors:a.errors,loading:!1}),a=>this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})))))),this.createSurgicalPositionEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.surgicalPositionService.createSurgicalPosition(Object.assign({},d)).pipe((0,g._b)(n=>{this.addNewSurgicalPosition(n),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:n,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},n=>{n.graphQLErrors?(this.toast.error(n.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})):(this.toast.error(n.Message),this.formService.setErrors(n.Data))}))))),this.updateSurgicalPositionEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([d,n])=>this.surgicalPositionService.updateSurgicalPosition(d,d.id).pipe((0,g._b)(a=>{this.updateSurgicalPosition(a),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:a,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.deleteSurgicalPositionEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([d,n])=>this.data.userDeleteSurgicalPosition({surgicalPositionId:n.id}).pipe((0,g._b)(a=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:a.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.importExcelEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.surgicalPositionService.importSurgicalPositions(d).pipe((0,te.K)(n=>{var a;return this.toast.error(null!==(a=n.Message)&&void 0!==a?a:"Failed to save",{duration:3e3}),k.E}),(0,C.b)(n=>{const a=JSON.parse(n.created),m=JSON.parse(n.updated),p=JSON.parse(n.failed),_=a.length+m.length+p.length;this.addSurgicalPositions(a),this.updateSurgicalPositions(m),this.toast.success(`${a.length} created, ${m.length} updated, ${p.length} failed of total ${_}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("surgicalPositionId")?(this.route.snapshot.paramMap.get("surgicalPositionId"),this.setFormName("surgicalPosition_edit")):this.setFormName("surgicalPosition_create")}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.surgicalPositionService.validateSurgicalPositionExcelData(t)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(E.q),e.LFG(A.F0),e.LFG(A.gz),e.LFG(X.F),e.LFG(q.o),e.LFG(EB))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function OB(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close.emit())})("formIsReady",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.surgicalPosition)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let fm=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"surgicalPosition_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.surgicalPosition=i.item})):t.formName&&t.formName.currentValue&&"surgicalPosition_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadSurgicalPositionEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.surgicalPosition=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(_r),e.Y36(A.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-surgical-position-form"]],inputs:{surgicalPosition:"surgicalPosition",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,OB,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[w.O5,z.M,w.Ov],encapsulation:2}),s})(),_m=(()=>{class s{constructor(){this.autoHeight=!1,this.surgicalPositions=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[,{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var r;t.includes(null===(r=i.data)||void 0===r?void 0:r.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-surgical-position-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(N.x,5),2&t){let r;e.iGM(r=e.CRH())&&(i.tableView=r.first)}},inputs:{autoHeight:"autoHeight",surgicalPositions:"surgicalPositions"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.surgicalPositions)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[N.x],encapsulation:2}),s})();function LB(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-surgical-position-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","surgicalPosition_edit")("formControl",t.formControl)("surgicalPosition",t.surgicalPosition)}}const GB=function(){return{}};function $B(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-surgical-position-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","surgicalPosition_create")("formControl",t.formControl)("surgicalPosition",e.DdM(3,GB))}}function RB(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-surgical-position-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(u.ref.close())}),e.qZA()}2&s&&e.Q6J("surgicalPositions",o.data.items)}let VB=(()=>{class s extends I.fS{constructor(t){super(),this.store=t,this.store.loadSurgicalPositionsEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.surgicalPositions$.pipe((0,h.w)(i=>(0,T.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(_r))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","surgicalPosition","send","close"],[1,"w-full","h-full","bg-white",3,"surgicalPositions","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,LB,2,3,"ng-template",null,1,e.W1O),e.YNc(3,$B,1,4,"ng-template",null,2,e.W1O),e.YNc(5,RB,1,1,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",u)("editTemplate",r)("createTemplate",l)("key",i.field.key)}},dependencies:[x.JJ,x.oH,J.$,fm,_m],encapsulation:2}),s})();function QB(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-surgical-position-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","surgicalPosition_edit")("surgicalPosition",t.value)}}const UB=function(){return{}};function JB(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-surgical-position-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","surgicalPosition_create")("surgicalPosition",e.DdM(2,UB))}function jB(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-surgical-position-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(null==u.ref?null:u.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("surgicalPositions",t.items)}}let zB=(()=>{class s extends Y{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","surgicalPosition","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","surgicalPositions","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,QB,1,2,"ng-template",null,1,e.W1O),e.YNc(3,JB,1,3,"ng-template",null,2,e.W1O),e.YNc(5,jB,1,2,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[ee,fm,_m],encapsulation:2}),s})(),qB=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[_r],imports:[w.ez,R.F,x.UX,V.o,H.u,Q.P,U.t,Z,j.h,K.G,I.X0.forChild({types:[{name:"surgical-position-select",component:VB,wrappers:["form-field"]},{name:"surgical-position-grid",component:zB}]})]}),s})(),HB=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[qB]}),s})();class ts extends y.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class KB extends ts{constructor(o){super("ValidateTagExcelDataAction"),this.valid=!1,this.excelData=o}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name)}),this.validationContext.addRule(new f.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof f.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(r=>r.name),newNames:[i.newName]}):i instanceof f.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,T.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class kB extends f.wS{constructor(o,t,i,r,l){super(o,t,i,r,l,!0)}}class ZB extends f.ul{constructor(o,t,i,r=!1){super(o,t,r),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new f.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new kB("name","The tag name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class BB extends ts{constructor(o){super("CreateTagAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new ZB("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateTag({input:this.input}).pipe((0,h.w)(o=>(0,ie.of)(o.data.created)))}}class YB extends ts{constructor(o){super("UpdateTagsAction"),this.tags=o}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.tags,!0))}performAction(){this.response=this.businessProvider.data.userUpdateTags({input:{tags:this.tags}}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}class XB extends ts{constructor(o,t){super("UpdateTagAction"),this.tag=o,this.tagId=t}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.tag,!0)).addRule(new f.xF("Id","Id should be a CUID and not null",this.tagId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateTag({tagId:this.tagId,input:this.tag}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}let gm=(()=>{class s extends y.nH{constructor(t,i,r){super("NotificationService.TagBusinessProviderService",t,r),this.data=i}createTag(t){const i=new BB(t);return i.Do(this),i.response}updateTag(t,i){const r=new XB(t,i);return r.Do(this),r.response}importTags(t){const i=new YB(t);return i.Do(this),i.response}validateTagExcelData(t){const i=new KB(t);return i.Do(this),i.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(O.ed),e.LFG(E.q),e.LFG(y.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),e5=(()=>{class s extends y.nH{constructor(t,i,r){super("TagService",r,t),this.businessProvider=i}createTag(t){return this.businessProvider.createTag(t)}updateTag(t,i){return this.businessProvider.updateTag(t,i)}importTags(t){return this.businessProvider.importTags(t)}validateTagExcelData(t){return this.businessProvider.validateTagExcelData(t)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(gm,8),e.LFG(gm),e.LFG(O.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),is=(()=>{class s extends g.m1{constructor(t,i,r,l,u,P){super({loading:!1,tags:[],done:!1,searchQuery:"",formName:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=r,this.toast=l,this.formService=u,this.tagService=P,this.errors$=this.select(c=>c.errors),this.loading$=this.select(c=>c.loading),this.done$=this.select(c=>c.done),this.item$=this.select(c=>c.item),this.tags$=this.select(c=>c.tags),this.paging$=this.select(c=>c.paging),this.searchQuery$=this.select(c=>c.searchQuery),this.formName$=this.select(c=>c.formName),this.actionResult$=this.select(this.item$,this.done$,(c,d)=>({item:c,done:d}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.tags$,(c,d,n,a,m)=>({errors:c,loading:d,item:n,formName:a,tags:m}),{debounce:!0}),this.input$=this.select(this.paging$,this.searchQuery$,(c,d)=>({limit:c.limit,skip:c.skip,name:d,total:c.total})),this.setFormName=this.updater((c,d)=>Object.assign(Object.assign({},c),{formName:d})),this.setItem=this.updater((c,d)=>Object.assign(Object.assign({},c),{item:d})),this.addNewTag=this.updater((c,d)=>Object.assign(Object.assign({},c),{tags:[...c.tags,d]})),this.updateTag=this.updater((c,d)=>Object.assign(Object.assign({},c),{tags:c.tags.map(n=>n.id===d.id?d:n)})),this.addTags=this.updater((c,d)=>Object.assign(Object.assign({},c),{tags:c.tags.concat(d)})),this.updateTags=this.updater((c,d)=>Object.assign(Object.assign({},c),{tags:c.tags.map(n=>d.find(m=>m.id===n.id)||n)})),this.setSearchQuery=this.updater((c,d)=>Object.assign(Object.assign({},c),{searchQuery:d})),this.loadTagEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.data.userTag({tagId:d}).pipe((0,g._b)(n=>{this.patchState({item:n.data.item,errors:n.errors,loading:!1})},n=>this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})))))),this.loadTagsEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.input$),(0,h.w)(([d,n])=>this.data.userTags({input:n}).pipe((0,g._b)(a=>this.patchState({paging:{limit:n.limit,skip:n.skip,total:a.data.count.total},tags:a.data.items,errors:a.errors,loading:!1}),a=>this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})))))),this.createTagEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.tagService.createTag(Object.assign({},d)).pipe((0,g._b)(n=>{this.addNewTag(n),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:n,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},n=>{n.graphQLErrors?(this.toast.error(n.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})):(this.toast.error(n.Message),this.formService.setErrors(n.Data))}))))),this.updateTagEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([d,n])=>this.tagService.updateTag(d,d.id).pipe((0,g._b)(a=>{this.updateTag(a),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:a,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.deleteTagEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([d,n])=>this.data.userDeleteTag({tagId:n.id}).pipe((0,g._b)(a=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:a.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.importExcelEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.tagService.importTags(d).pipe((0,te.K)(n=>{var a;return this.toast.error(null!==(a=n.Message)&&void 0!==a?a:"Failed to save",{duration:3e3}),k.E}),(0,C.b)(n=>{const a=JSON.parse(n.created),m=JSON.parse(n.updated),p=JSON.parse(n.failed),_=a.length+m.length+p.length;this.addTags(a),this.updateTags(m),this.toast.success(`${a.length} created, ${m.length} updated, ${p.length} failed of total ${_}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("tagId")?(this.route.snapshot.paramMap.get("tagId"),this.setFormName("tag_edit")):this.setFormName("tag_create")}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.tagService.validateTagExcelData(t)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(E.q),e.LFG(A.F0),e.LFG(A.gz),e.LFG(X.F),e.LFG(q.o),e.LFG(e5))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function t5(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close.emit())})("formIsReady",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.tag)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let Cm=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"tag_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({id:null,name:""}),this.store.vm$.subscribe(i=>{this.tag=i.item})):t.formName&&t.formName.currentValue&&"tag_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadTagEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.tag=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(is),e.Y36(A.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-tag-form"]],inputs:{tag:"tag",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,t5,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[w.O5,z.M,w.Ov],encapsulation:2}),s})(),Sm=(()=>{class s{constructor(){this.autoHeight=!1,this.tags=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[,{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var r;t.includes(null===(r=i.data)||void 0===r?void 0:r.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-tag-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(N.x,5),2&t){let r;e.iGM(r=e.CRH())&&(i.tableView=r.first)}},inputs:{autoHeight:"autoHeight",tags:"tags"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","data","showSidebar","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("data",i.tags)("showSidebar",!1)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[N.x],encapsulation:2}),s})();function i5(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-tag-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","tag_edit")("formControl",t.formControl)("tag",t.tag)}}const s5=function(){return{}};function o5(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-tag-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","tag_create")("formControl",t.formControl)("tag",e.DdM(3,s5))}}function r5(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-tag-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(u.ref.close())}),e.qZA()}2&s&&e.Q6J("tags",o.data.items)}let a5=(()=>{class s extends I.fS{constructor(t){super(),this.store=t,this.store.loadTagsEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.tags$.pipe((0,h.w)(i=>(0,T.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(is))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e._Bn([is]),e.qOj],decls:7,vars:5,consts:[[3,"to","control","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","tag","send","close"],[1,"w-full","h-full","bg-white",3,"tags","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"ui-select-form",0),e.YNc(1,i5,2,3,"ng-template",null,1,e.W1O),e.YNc(3,o5,1,4,"ng-template",null,2,e.W1O),e.YNc(5,r5,1,1,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[x.JJ,x.oH,J.$,Cm,Sm],encapsulation:2}),s})();function n5(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-tag-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","tag_edit")("tag",t.value)}}const l5=function(){return{}};function c5(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-tag-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","tag_create")("tag",e.DdM(2,l5))}function d5(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-tag-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(null==u.ref?null:u.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("tags",t.items)}}let u5=(()=>{class s extends Y{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:6,consts:[[3,"data","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","tag","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","tags","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,n5,1,2,"ng-template",null,1,e.W1O),e.YNc(3,c5,1,3,"ng-template",null,2,e.W1O),e.YNc(5,d5,1,2,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("data",i.data)("title",i.to.title)("onSave",i.onSave)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[ee,Cm,Sm],encapsulation:2}),s})(),m5=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[is],imports:[w.ez,R.F,x.UX,V.o,H.u,Q.P,U.t,Z,j.h,K.G,I.X0.forChild({types:[{name:"tag-select",component:a5,wrappers:["form-field"]},{name:"tag-grid",component:u5}]})]}),s})(),p5=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[m5]}),s})(),h5=(()=>{class s extends g.m1{constructor(t){super({loading:!1,templates:[]}),this.data=t,this.errors$=this.select(i=>i.errors),this.loading$=this.select(i=>i.loading),this.templates$=this.select(i=>i.templates),this.vm$=this.select(this.errors$,this.loading$,this.templates$,(i,r,l)=>({errors:i,loading:r,templates:l}),{debounce:!0}),this.addNewTemplate=this.updater((i,r)=>({templates:[...i.templates,r]})),this.updateTemplate=this.updater((i,r)=>Object.assign(Object.assign({},i),{templates:i.templates.map(l=>l.id===r.id?r:l)})),this.createTemplateEffect=this.effect(i=>i.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(r=>this.data.userCreateTemplate({input:r.input}).pipe((0,g._b)(l=>{this.addNewTemplate(l.data.created),this.patchState({errors:l.errors,loading:!1}),r.resultEmitter.emit(l.data.created)},l=>this.patchState({loading:!1,errors:l.graphQLErrors?l.graphQLErrors:l})))))),this.updateTemplateEffect=this.effect(i=>i.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(r=>this.data.userUpdateTemplate({templateId:r.input.id,input:r.input}).pipe((0,g._b)(l=>{this.updateTemplate(l.data.updated),this.patchState({errors:l.errors,loading:!1}),r.resultEmitter.emit(l.data.updated)},l=>this.patchState({loading:!1,errors:l.graphQLErrors?l.graphQLErrors:l})))))),this.loadTemplatesEffect=this.effect(i=>i.pipe((0,C.b)(()=>{this.patchState({loading:!0})}),(0,h.w)(()=>this.data.userTemplates({input:{}}).pipe((0,g._b)(r=>{this.patchState({loading:!1,templates:r.data.items})},r=>{this.patchState({loading:!1})})))))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(E.q))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();class gr extends y.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class f5 extends f.wS{constructor(o,t,i,r,l){super(o,t,i,r,l,!0)}}class _5 extends f.ul{constructor(o,t,i,r=!1){super(o,t,r),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new f.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new f5("name","The teamuser name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class g5 extends gr{constructor(o){super("CreateTemplateAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new _5("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateTemplate({input:this.input}).pipe((0,h.w)(o=>(0,ie.of)(o.data.created)))}}class C5 extends gr{constructor(o){super("UpdateTemplatesAction"),this.teamUsers=o}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.teamUsers,!0))}performAction(){}}class S5 extends gr{constructor(o,t){super("UpdateTemplateAction"),this.teamUser=o,this.teamUserId=t}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.teamUser,!0)).addRule(new f.xF("Id","Id should be a CUID and not null",this.teamUserId,!0))}performAction(){}}let vm=(()=>{class s extends y.nH{constructor(t,i,r){super("NotificationService.TemplateBusinessProviderService",t,r),this.data=i}createTemplate(t){const i=new g5(t);return i.Do(this),i.response}updateTemplate(t,i){const r=new S5(t,i);return r.Do(this),r.response}importTemplates(t){const i=new C5(t);return i.Do(this),i.response}validateTemplateExcelData(t,i,r,l){}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(O.ed),e.LFG(E.q),e.LFG(y.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),v5=(()=>{class s extends y.nH{constructor(t,i,r){super("templateService",r,t),this.businessProvider=i}createTemplate(t){const i=Object.fromEntries(Object.entries(t).filter(([r,l])=>null!==l));return this.businessProvider.createTemplate(i)}updateTemplate(t,i){return this.businessProvider.updateTemplate(t,i)}importTemplates(t){return this.businessProvider.importTemplates(t)}validateTemplateExcelData(t){}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(vm,8),e.LFG(vm),e.LFG(O.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),Cr=(()=>{class s extends g.m1{constructor(t,i,r,l,u,P){super({loading:!1,templates:[],done:!1,searchQuery:"",formName:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=r,this.toast=l,this.formService=u,this.templateService=P,this.errors$=this.select(c=>c.errors),this.loading$=this.select(c=>c.loading),this.done$=this.select(c=>c.done),this.item$=this.select(c=>c.item),this.templates$=this.select(c=>c.templates),this.paging$=this.select(c=>c.paging),this.searchQuery$=this.select(c=>c.searchQuery),this.formName$=this.select(c=>c.formName),this.actionResult$=this.select(this.item$,this.done$,(c,d)=>({item:c,done:d}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.templates$,(c,d,n,a,m)=>({errors:c,loading:d,item:n,formName:a,templates:m}),{debounce:!0}),this.input$=this.select(this.paging$,this.searchQuery$,(c,d)=>({limit:c.limit,skip:c.skip,name:d,total:c.total})),this.setFormName=this.updater((c,d)=>Object.assign(Object.assign({},c),{formName:d})),this.setItem=this.updater((c,d)=>Object.assign(Object.assign({},c),{item:d})),this.addNewTemplate=this.updater((c,d)=>(console.log(c.templates),Object.assign(Object.assign({},c),{templates:[...c.templates,d]}))),this.updateTemplate=this.updater((c,d)=>Object.assign(Object.assign({},c),{templates:c.templates.map(n=>n.id===d.id?d:n)})),this.addTemplates=this.updater((c,d)=>Object.assign(Object.assign({},c),{templates:c.templates.concat(d)})),this.updateTemplates=this.updater((c,d)=>Object.assign(Object.assign({},c),{templates:c.templates.map(n=>d.find(m=>m.id===n.id)||n)})),this.setSearchQuery=this.updater((c,d)=>Object.assign(Object.assign({},c),{searchQuery:d})),this.loadTemplateEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.data.userTemplate({templateId:d}).pipe((0,g._b)(n=>{this.patchState({item:n.data.item,errors:n.errors,loading:!1})},n=>this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})))))),this.loadTemplatesEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.input$),(0,h.w)(([d,n])=>this.data.userTemplates({input:n}).pipe((0,g._b)(a=>this.patchState({paging:{limit:n.limit,skip:n.skip,total:a.data.count.total},templates:a.data.items,errors:a.errors,loading:!1}),a=>this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})))))),this.createTemplateEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.templateService.createTemplate(Object.assign({},d)).pipe((0,g._b)(n=>{this.addNewTemplate(n),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:n,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},n=>{n.graphQLErrors?(this.toast.error(n.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})):(this.toast.error(n.Message),this.formService.setErrors(n.Data))}))))),this.updateTemplateEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([d,n])=>this.templateService.updateTemplate(d,d.id).pipe((0,g._b)(a=>{this.updateTemplate(a),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:a,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.deleteTemplateEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([d,n])=>this.data.userDeleteTemplate({templateId:n.id}).pipe((0,g._b)(a=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:a.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.route.snapshot.paramMap.has("templateId")?(this.route.snapshot.paramMap.get("templateId"),this.setFormName("template_edit")):this.setFormName("template_create")}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(E.q),e.LFG(A.F0),e.LFG(A.gz),e.LFG(X.F),e.LFG(q.o),e.LFG(v5))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})(),b5=(()=>{class s{constructor(){this.templates=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.autoHeight=!1,this.columnDefs=[{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{field:"attachment",filter:"agTextColumnFilter"},{field:"encoding",filter:"agTextColumnFilter"},{field:"signatureFileType",filter:"agTextColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var r;t.includes(null===(r=i.data)||void 0===r?void 0:r.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-template-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(N.x,5),2&t){let r;e.iGM(r=e.CRH())&&(i.tableView=r.first)}},inputs:{templates:"templates",autoHeight:"autoHeight"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.templates)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[N.x],encapsulation:2}),s})(),T5=(()=>{class s extends g.m1{constructor(t){super({loading:!1}),this.data=t,this.errors$=this.select(i=>i.errors),this.loading$=this.select(i=>i.loading),this.item$=this.select(i=>i.item),this.vm$=this.select(this.errors$,this.loading$,this.item$,(i,r,l)=>({errors:i,loading:r,item:l}),{debounce:!0}),this.createTemplateEffect=this.effect(i=>i.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(r=>this.data.userCreateTemplate({input:r}).pipe((0,g._b)(l=>{this.patchState({item:l.data.created,errors:l.errors,loading:!1})},l=>this.patchState({loading:!1,errors:l.graphQLErrors?l.graphQLErrors:l}))))))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(E.q))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function y5(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close.emit())})("formIsReady",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.template)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let w5=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"template_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.template=i.item})):t.formName&&t.formName.currentValue&&"template_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadTemplateEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.template=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Cr),e.Y36(A.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-template-form"]],inputs:{template:"template",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e._Bn([T5]),e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,y5,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[w.O5,z.M,w.Ov],encapsulation:2}),s})();function x5(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-template-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","template_edit")("formControl",t.formControl)("template",t.template)}}const N5=function(){return{}};function A5(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-template-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","template_create")("formControl",t.formControl)("template",e.DdM(3,N5))}}function F5(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-template-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(u.ref.close())}),e.qZA()}2&s&&e.Q6J("templates",o.data.items)}let D5=(()=>{class s extends I.fS{constructor(t){super(),this.store=t,this.store.loadTemplatesEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.templates$.pipe((0,h.w)(i=>(0,T.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Cr))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","template","send","close"],[1,"w-full","h-full","bg-white",3,"templates","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,x5,2,3,"ng-template",null,1,e.W1O),e.YNc(3,A5,1,4,"ng-template",null,2,e.W1O),e.YNc(5,F5,1,1,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",u)("editTemplate",r)("createTemplate",l)("key",i.field.key)}},dependencies:[x.JJ,x.oH,J.$,b5,w5],encapsulation:2}),s})(),I5=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[h5,Cr],imports:[w.ez,R.F,x.UX,V.o,H.u,Q.P,U.t,j.h,K.G,I.X0.forChild({types:[{name:"template-select",component:D5,wrappers:["form-field"]}]})]}),s})(),P5=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[I5]}),s})();class ss extends y.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class W5 extends f.wS{constructor(o,t,i,r,l){super(o,t,i,r,l,!0)}}class M5 extends f.ul{constructor(o,t,i,r=!1){super(o,t,r),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new f.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new W5("name","The user name is not valid. Must be within 2 and 255 characters.",this.target.firstName,2,255))}}class E5 extends ss{constructor(o){super("CreateUserAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new M5("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateUser({input:this.input}).pipe((0,te.K)(()=>(this.response=this.createFailResponse(),k.E)),(0,h.w)(o=>(0,ie.of)(o.data.created)))}}class O5 extends ss{constructor(o){super("UpdateUsersAction"),this.users=o}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.users,!0))}performAction(){this.response=this.businessProvider.data.userUpdateUsers({input:{users:this.users}}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}class L5 extends ss{constructor(o,t){super("UpdateUserAction"),this.user=o,this.userId=t}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.user,!0)).addRule(new f.xF("Id","Id should be a CUID and not null",this.userId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateUser({userId:this.userId,input:this.user}).pipe((0,h.w)(()=>(0,T.of)(!0)))}}class G5 extends ss{constructor(o){super("ValidateUserExcelDataAction"),this.valid=!1,this.excelData=o}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name)}),this.validationContext.addRule(new f.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof f.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(r=>r.name),newNames:[i.newName]}):i instanceof f.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,T.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}let bm=(()=>{class s extends y.nH{constructor(t,i,r){super("NotificationService.UserBusinessProviderService",t,r),this.data=i}createUser(t){const i=new E5(t);return i.Do(this),i.response}updateUser(t,i){const r=new L5(t,i);return r.Do(this),r.response}importUsers(t){const i=new O5(t);return i.Do(this),i.response}validateUserExcelData(t){const i=new G5(t);return i.Do(this),i.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(O.ed),e.LFG(E.q),e.LFG(y.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),$5=(()=>{class s extends y.nH{constructor(t,i,r){super("UserService",r,t),this.businessProvider=i}createUser(t){return this.businessProvider.createUser(t)}updateUser(t,i){return this.businessProvider.updateUser(t,i)}importUsers(t){return this.businessProvider.importUsers(t)}validateUserExcelData(t){return this.businessProvider.validateUserExcelData(t)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(bm,8),e.LFG(bm),e.LFG(O.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),Sr=(()=>{class s extends g.m1{constructor(t,i,r,l,u,P){super({loading:!1,users:[],done:!1}),this.data=t,this.router=i,this.route=r,this.toast=l,this.formService=u,this.userService=P,this.errors$=this.select(b=>b.errors),this.loading$=this.select(b=>b.loading),this.done$=this.select(b=>b.done),this.item$=this.select(b=>b.item),this.users$=this.select(b=>b.users),this.actionResult$=this.select(this.item$,this.done$,(b,c)=>({item:b,done:c}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,(b,c,d)=>({errors:b,loading:c,item:d}),{debounce:!0}),this.initialize=this.updater(b=>Object.assign(Object.assign({},b),{item:null,done:!1})),this.addNewUser=this.updater((b,c)=>Object.assign(Object.assign({},b),{users:[...b.users,c]})),this.updateUser=this.updater((b,c)=>Object.assign(Object.assign({},b),{users:b.users.map(d=>d.id===c.id?c:d)})),this.loadUserEffect=this.effect(b=>b.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(c=>this.data.userUser({userId:c}).pipe((0,g._b)(d=>{this.patchState({item:d.data.item,errors:d.errors,loading:!1})},d=>this.patchState({loading:!1,errors:d.graphQLErrors?d.graphQLErrors:d})))))),this.loadUsersEffect=this.effect(b=>b.pipe((0,C.b)(()=>{this.patchState({loading:!0})}),(0,h.w)(()=>this.data.userUsers({input:{}}).pipe((0,g._b)(c=>{this.patchState({loading:!1,users:c.data.items})},c=>{this.patchState({loading:!1})}))))),this.updateUserEffect=this.effect(b=>b.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([c,d])=>this.userService.updateUser(c,c.id).pipe((0,g._b)(n=>{this.updateUser(n),this.toast.success("Changed Successfully"),this.patchState({done:!0,item:n})},n=>{this.toast.error(n.Message),this.formService.setErrors(n.Data),this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})}))))),this.createUserEffect=this.effect(b=>b.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(c=>this.userService.createUser(Object.assign({},c)).pipe((0,g._b)(d=>(this.patchState({item:d,loading:!1}),this.router.navigate(["..",d?.id],{relativeTo:this.route})),d=>{this.toast.error(d.Message),this.formService.setErrors(d.Data),this.patchState({loading:!1,errors:d.graphQLErrors?d.graphQLErrors:d})})))))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(E.q),e.LFG(A.F0),e.LFG(A.gz),e.LFG(X.F),e.LFG(q.o),e.LFG($5))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();const R5=function(){return{}};let V5=(()=>{class s{constructor(t){this.store=t,this.user={},this.send=new e.vpe,this.close=new e.vpe,this._unsubscribeAll=new be.x,this.store.initialize()}ngOnInit(){this.store.actionResult$.pipe((0,ge.R)(this._unsubscribeAll)).subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Sr))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-user-form"]],inputs:{user:"user"},outputs:{send:"send",close:"close"},decls:3,vars:5,consts:[[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"formName","showSubmitButton","model","componentStore","discard"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"ui-formly-json-form",2),e.NdJ("discard",function(){return i.close.emit()}),e.qZA()()()),2&t&&(e.xp6(2),e.Q6J("formName",i.user.id?"user_edit":"user_create")("showSubmitButton",!0)("model",i.user||e.DdM(4,R5))("componentStore",i.store))},dependencies:[z.M],encapsulation:2}),s})(),Q5=(()=>{class s{constructor(){this.users=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[,{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{headerName:"Developer",field:"developer",filter:"agSetColumnFilter",cellRenderer:"checkboxRenderer"},{field:"username",filter:"agTextColumnFilter"},{field:"password",filter:"agTextColumnFilter"},{field:"firstName",filter:"agTextColumnFilter"},{field:"lastName",filter:"agTextColumnFilter"},{field:"avatarUrl",filter:"agTextColumnFilter"},{field:"line1",filter:"agTextColumnFilter"},{field:"line2",filter:"agTextColumnFilter"},{field:"city",filter:"agTextColumnFilter"},{field:"state",filter:"agTextColumnFilter"},{field:"postalCode",filter:"agTextColumnFilter"},{field:"phone",filter:"agTextColumnFilter"},{field:"bio",filter:"agTextColumnFilter"},{field:"slug",filter:"agTextColumnFilter"},{field:"status",filter:"agTextColumnFilter"},{headerName:"Signup Status",field:"signupStatus",valueFormatter:t=>{var i;return(0,S.oBD)(null===(i=t.data)||void 0===i?void 0:i.signupStatus,"",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{headerName:"Verified",field:"verified",filter:"agSetColumnFilter",cellRenderer:"checkboxRenderer"},{field:"customerId",filter:"agTextColumnFilter",hide:!0},{field:"planId",filter:"agTextColumnFilter",hide:!0},{field:"dateOfBirth",filter:"agDateColumnFilter"},{field:"cellPhone",filter:"agTextColumnFilter"},{field:"education",filter:"agTextColumnFilter"},{field:"officeName",filter:"agTextColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var r;t.includes(null===(r=i.data)||void 0===r?void 0:r.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-user-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(N.x,5),2&t){let r;e.iGM(r=e.CRH())&&(i.tableView=r.first)}},inputs:{users:"users"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:3,consts:[[1,"w-full","h-full",3,"data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("data",i.users)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[N.x],encapsulation:2}),s})();const U5=function(){return{}};function J5(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-user-form",3),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("user",o.data.value||e.DdM(1,U5))}function j5(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-user-select-table-view",4),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(u.ref.close())}),e.qZA()}2&s&&e.Q6J("users",o.data.items)}let z5=(()=>{class s extends I.fS{constructor(t){super(),this.store=t,this.store.loadUsersEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.users$.pipe((0,h.w)(i=>(0,T.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Sr))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:5,vars:4,consts:[[3,"to","control","listTemplate","editTemplate"],["editTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"user","send","close"],[1,"w-full","h-full","bg-white",3,"users","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"ui-select-form",0),e.YNc(1,J5,1,2,"ng-template",null,1,e.W1O),e.YNc(3,j5,1,1,"ng-template",null,2,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4);e.Q6J("to",i.to)("control",i.formControl)("listTemplate",l)("editTemplate",r)}},dependencies:[J.$,V5,Q5],encapsulation:2}),s})(),q5=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[Sr],imports:[w.ez,R.F,x.UX,V.o,H.u,Q.P,U.t,j.h,K.G,I.X0.forChild({types:[{name:"user-select",component:z5,wrappers:["form-field"]}]})]}),s})(),H5=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[q5]}),s})();class os extends y.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class K5 extends os{constructor(o,t,i){super("ValidateUserRoleExcelDataAction"),this.valid=!1,this.excelData=o,this.roles=t,this.users=i}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name),this.validationContext.addRule(new f.mi(`roleName_${i}_is_valid}`,"Role Is Not Valid","role.name",t.role,this.roles,!0)),this.validationContext.addRule(new f.mi(`userName_${i}_is_valid}`,"User Is Not Valid","user.name",t.user,this.users,!0))}),this.validationContext.addRule(new f.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof f.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(r=>r.name),newNames:[i.newName]}):i instanceof f.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,T.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class k5 extends f.wS{constructor(o,t,i,r,l){super(o,t,i,r,l,!0)}}class Z5 extends f.ul{constructor(o,t,i,r=!1){super(o,t,r),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new f.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new k5("name","The userrole name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class B5 extends os{constructor(o){super("CreateUserRoleAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new Z5("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateUserRole({input:this.input}).pipe((0,h.w)(o=>(0,ie.of)(o.data.created)))}}class Y5 extends os{constructor(o){super("UpdateUserRolesAction"),this.userRoles=o}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.userRoles,!0))}performAction(){this.response=this.businessProvider.data.userUpdateUserRoles({input:{userRoles:this.userRoles}}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}class X5 extends os{constructor(o,t){super("UpdateUserRoleAction"),this.userRole=o,this.userRoleId=t}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.userRole,!0)).addRule(new f.xF("Id","Id should be a CUID and not null",this.userRoleId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateUserRole({userRoleId:this.userRoleId,input:this.userRole}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}let Tm=(()=>{class s extends y.nH{constructor(t,i,r){super("NotificationService.UserRoleBusinessProviderService",t,r),this.data=i}createUserRole(t){const i=new B5(t);return i.Do(this),i.response}updateUserRole(t,i){const r=new X5(t,i);return r.Do(this),r.response}importUserRoles(t){const i=new Y5(t);return i.Do(this),i.response}validateUserRoleExcelData(t,i,r){const l=new K5(t,i,r);return l.Do(this),l.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(O.ed),e.LFG(E.q),e.LFG(y.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),eY=(()=>{class s extends y.nH{constructor(t,i,r){super("UserRoleService",r,t),this.businessProvider=i}createUserRole(t){const i=Object.fromEntries(Object.entries(t).filter(([r,l])=>null!==l));return this.businessProvider.createUserRole(i)}updateUserRole(t,i){return this.businessProvider.updateUserRole(t,i)}importUserRoles(t){return this.businessProvider.importUserRoles(t)}validateUserRoleExcelData(t,i,r){return this.businessProvider.validateUserRoleExcelData(t,i,r)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(Tm,8),e.LFG(Tm),e.LFG(O.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),vr=(()=>{class s extends g.m1{constructor(t,i,r,l,u,P){if(super({loading:!1,userRoles:[],done:!1,searchQuery:"",formName:void 0,roleId:void 0,userId:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=r,this.toast=l,this.formService=u,this.userRoleService=P,this.errors$=this.select(n=>n.errors),this.loading$=this.select(n=>n.loading),this.done$=this.select(n=>n.done),this.item$=this.select(n=>n.item),this.userRoles$=this.select(n=>n.userRoles),this.roles$=this.select(n=>n.roles||[]),this.users$=this.select(n=>n.users||[]),this.roleId$=this.select(n=>n.roleId),this.userId$=this.select(n=>n.userId),this.paging$=this.select(n=>n.paging),this.searchQuery$=this.select(n=>n.searchQuery),this.formName$=this.select(n=>n.formName),this.actionResult$=this.select(this.item$,this.done$,(n,a)=>({item:n,done:a}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.userRoles$,this.roles$,this.users$,(n,a,m,p,_,v,D)=>({errors:n,loading:a,item:m,formName:p,userRoles:_,roles:v,users:D}),{debounce:!0}),this.input$=this.select(this.paging$,this.roleId$,this.userId$,this.searchQuery$,(n,a,m,p)=>({limit:n.limit,skip:n.skip,name:p,roleId:a,userId:m,total:n.total})),this.setFormName=this.updater((n,a)=>Object.assign(Object.assign({},n),{formName:a})),this.setRoleId=this.updater((n,a)=>Object.assign(Object.assign({},n),{roleId:a})),this.setUserId=this.updater((n,a)=>Object.assign(Object.assign({},n),{userId:a})),this.filterRoles=n=>this.data.userSelectRoles({input:{name:n}}).pipe((0,g._b)(a=>{let m=a.data.items;return this.patchState({roles:m}),m},a=>this.patchState({errors:a.graphQLErrors?a.graphQLErrors:a})),(0,B.U)(a=>a.data.items)),this.filterUsers=n=>this.data.userSelectUsers({input:{name:n}}).pipe((0,g._b)(a=>{let m=a.data.items;return this.patchState({users:m}),m},a=>this.patchState({errors:a.graphQLErrors?a.graphQLErrors:a})),(0,B.U)(a=>a.data.items)),this.addRole=this.updater((n,a)=>Object.assign(Object.assign({},n),{roles:n.roles.concat(a)})),this.addUser=this.updater((n,a)=>Object.assign(Object.assign({},n),{users:n.users.concat(a)})),this.setItem=this.updater((n,a)=>Object.assign(Object.assign({},n),{item:a})),this.addNewUserRole=this.updater((n,a)=>Object.assign(Object.assign({},n),{userRoles:[...n.userRoles,a]})),this.updateUserRole=this.updater((n,a)=>Object.assign(Object.assign({},n),{userRoles:n.userRoles.map(m=>m.id===a.id?a:m)})),this.addUserRoles=this.updater((n,a)=>Object.assign(Object.assign({},n),{userRoles:n.userRoles.concat(a)})),this.updateUserRoles=this.updater((n,a)=>Object.assign(Object.assign({},n),{userRoles:n.userRoles.map(m=>a.find(_=>_.id===m.id)||m)})),this.setSearchQuery=this.updater((n,a)=>Object.assign(Object.assign({},n),{searchQuery:a})),this.loadUserRoleEffect=this.effect(n=>n.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(a=>this.data.userUserRole({userRoleId:a}).pipe((0,g._b)(m=>{this.patchState({item:m.data.item,errors:m.errors,loading:!1})},m=>this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})))))),this.loadUserRolesEffect=this.effect(n=>n.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.input$),(0,h.w)(([a,m])=>this.data.userUserRoles({input:m}).pipe((0,g._b)(p=>this.patchState({paging:{limit:m.limit,skip:m.skip,total:p.data.count.total},userRoles:p.data.items,errors:p.errors,loading:!1}),p=>this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})))))),this.createUserRoleEffect=this.effect(n=>n.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(a=>this.userRoleService.createUserRole(Object.assign({},a)).pipe((0,g._b)(m=>{this.addNewUserRole(m),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:m,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},m=>{m.graphQLErrors?(this.toast.error(m.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})):(this.toast.error(m.Message),this.formService.setErrors(m.Data))}))))),this.updateUserRoleEffect=this.effect(n=>n.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([a,m])=>this.userRoleService.updateUserRole(a,a.id).pipe((0,g._b)(p=>{this.updateUserRole(p),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:p,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},p=>{p.graphQLErrors?(this.toast.error(p.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})):(this.toast.error(p.Message),this.formService.setErrors(p.Data))}))))),this.deleteUserRoleEffect=this.effect(n=>n.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([a,m])=>this.data.userDeleteUserRole({userRoleId:m.id}).pipe((0,g._b)(p=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:p.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},p=>{p.graphQLErrors?(this.toast.error(p.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})):(this.toast.error(p.Message),this.formService.setErrors(p.Data))}))))),this.importExcelEffect=this.effect(n=>n.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(a=>this.userRoleService.importUserRoles(a).pipe((0,te.K)(m=>{var p;return this.toast.error(null!==(p=m.Message)&&void 0!==p?p:"Failed to save",{duration:3e3}),k.E}),(0,C.b)(m=>{const p=JSON.parse(m.created),_=JSON.parse(m.updated),v=JSON.parse(m.failed),D=p.length+_.length+v.length;this.addUserRoles(p),this.updateUserRoles(_),this.toast.success(`${p.length} created, ${_.length} updated, ${v.length} failed of total ${D}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("userRoleId")?(this.route.snapshot.paramMap.get("userRoleId"),this.setFormName("userRole_edit")):this.setFormName("userRole_create"),this.route.snapshot.paramMap.has("roleId")){var c=this.route.snapshot.paramMap.get("roleId");this.setRoleId(c)}if(this.route.snapshot.paramMap.has("userId")){var d=this.route.snapshot.paramMap.get("userId");this.setUserId(d)}}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.userRoleService.validateUserRoleExcelData(t,i.roles,i.users)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(E.q),e.LFG(A.F0),e.LFG(A.gz),e.LFG(X.F),e.LFG(q.o),e.LFG(eY))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function tY(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close.emit())})("formIsReady",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.userRole)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let ym=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"userRole_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.userRole=i.item})):t.formName&&t.formName.currentValue&&"userRole_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadUserRoleEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.userRole=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(vr),e.Y36(A.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-user-role-form"]],inputs:{userRole:"userRole",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,tY,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[w.O5,z.M,w.Ov],encapsulation:2}),s})(),wm=(()=>{class s{constructor(){this.autoHeight=!1,this.userRoles=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[{field:"role.name",headerName:"Role",filter:"agTextColumnFilter"},{field:"user.name",headerName:"User",filter:"agTextColumnFilter"},{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{field:"roleId",filter:"agTextColumnFilter",hide:!0},{field:"userId",filter:"agTextColumnFilter",hide:!0}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var r;t.includes(null===(r=i.data)||void 0===r?void 0:r.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-user-role-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(N.x,5),2&t){let r;e.iGM(r=e.CRH())&&(i.tableView=r.first)}},inputs:{autoHeight:"autoHeight",userRoles:"userRoles"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.userRoles)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[N.x],encapsulation:2}),s})();function iY(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-user-role-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","userRole_edit")("formControl",t.formControl)("userRole",t.userRole)}}const sY=function(){return{}};function oY(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-user-role-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","userRole_create")("formControl",t.formControl)("userRole",e.DdM(3,sY))}}function rY(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-user-role-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(u.ref.close())}),e.qZA()}2&s&&e.Q6J("userRoles",o.data.items)}let aY=(()=>{class s extends I.fS{constructor(t){super(),this.store=t,this.store.loadUserRolesEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.userRoles$.pipe((0,h.w)(i=>(0,T.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(vr))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","userRole","send","close"],[1,"w-full","h-full","bg-white",3,"userRoles","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,iY,2,3,"ng-template",null,1,e.W1O),e.YNc(3,oY,1,4,"ng-template",null,2,e.W1O),e.YNc(5,rY,1,1,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",u)("editTemplate",r)("createTemplate",l)("key",i.field.key)}},dependencies:[x.JJ,x.oH,J.$,ym,wm],encapsulation:2}),s})();function nY(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-user-role-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","userRole_edit")("userRole",t.value)}}const lY=function(){return{}};function cY(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-user-role-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","userRole_create")("userRole",e.DdM(2,lY))}function dY(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-user-role-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(null==u.ref?null:u.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("userRoles",t.items)}}let uY=(()=>{class s extends Y{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","userRole","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","userRoles","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,nY,1,2,"ng-template",null,1,e.W1O),e.YNc(3,cY,1,3,"ng-template",null,2,e.W1O),e.YNc(5,dY,1,2,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[ee,ym,wm],encapsulation:2}),s})(),mY=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[vr],imports:[w.ez,R.F,x.UX,V.o,H.u,Q.P,U.t,Z,j.h,K.G,I.X0.forChild({types:[{name:"user-role-select",component:aY,wrappers:["form-field"]},{name:"user-role-grid",component:uY}]})]}),s})(),pY=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[mY]}),s})();class rs extends y.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class hY extends rs{constructor(o,t,i){super("ValidateVendorLocationExcelDataAction"),this.valid=!1,this.excelData=o,this.locations=t,this.vendors=i}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name),this.validationContext.addRule(new f.mi(`locationName_${i}_is_valid}`,"Location Is Not Valid","location.name",t.location,this.locations,!0)),this.validationContext.addRule(new f.mi(`vendorName_${i}_is_valid}`,"Vendor Is Not Valid","vendor.name",t.vendor,this.vendors,!0))}),this.validationContext.addRule(new f.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof f.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(r=>r.name),newNames:[i.newName]}):i instanceof f.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,T.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class fY extends f.wS{constructor(o,t,i,r,l){super(o,t,i,r,l,!0)}}class _Y extends f.ul{constructor(o,t,i,r=!1){super(o,t,r),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new f.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new fY("name","The vendorlocation name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class gY extends rs{constructor(o){super("CreateVendorLocationAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new _Y("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateVendorLocation({input:this.input}).pipe((0,h.w)(o=>(0,ie.of)(o.data.created)))}}class CY extends rs{constructor(o){super("UpdateVendorLocationsAction"),this.vendorLocations=o}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.vendorLocations,!0))}performAction(){this.response=this.businessProvider.data.userUpdateVendorLocations({input:{vendorLocations:this.vendorLocations}}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}class SY extends rs{constructor(o,t){super("UpdateVendorLocationAction"),this.vendorLocation=o,this.vendorLocationId=t}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.vendorLocation,!0)).addRule(new f.xF("Id","Id should be a CUID and not null",this.vendorLocationId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateVendorLocation({vendorLocationId:this.vendorLocationId,input:this.vendorLocation}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}let xm=(()=>{class s extends y.nH{constructor(t,i,r){super("NotificationService.VendorLocationBusinessProviderService",t,r),this.data=i}createVendorLocation(t){const i=new gY(t);return i.Do(this),i.response}updateVendorLocation(t,i){const r=new SY(t,i);return r.Do(this),r.response}importVendorLocations(t){const i=new CY(t);return i.Do(this),i.response}validateVendorLocationExcelData(t,i,r){const l=new hY(t,i,r);return l.Do(this),l.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(O.ed),e.LFG(E.q),e.LFG(y.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),vY=(()=>{class s extends y.nH{constructor(t,i,r){super("VendorLocationService",r,t),this.businessProvider=i}createVendorLocation(t){const i=Object.fromEntries(Object.entries(t).filter(([r,l])=>null!==l));return this.businessProvider.createVendorLocation(i)}updateVendorLocation(t,i){return this.businessProvider.updateVendorLocation(t,i)}importVendorLocations(t){return this.businessProvider.importVendorLocations(t)}validateVendorLocationExcelData(t,i,r){return this.businessProvider.validateVendorLocationExcelData(t,i,r)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(xm,8),e.LFG(xm),e.LFG(O.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),br=(()=>{class s extends g.m1{constructor(t,i,r,l,u,P){if(super({loading:!1,vendorLocations:[],done:!1,searchQuery:"",formName:void 0,locationId:void 0,vendorId:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=r,this.toast=l,this.formService=u,this.vendorLocationService=P,this.errors$=this.select(n=>n.errors),this.loading$=this.select(n=>n.loading),this.done$=this.select(n=>n.done),this.item$=this.select(n=>n.item),this.vendorLocations$=this.select(n=>n.vendorLocations),this.locations$=this.select(n=>n.locations||[]),this.vendors$=this.select(n=>n.vendors||[]),this.locationId$=this.select(n=>n.locationId),this.vendorId$=this.select(n=>n.vendorId),this.paging$=this.select(n=>n.paging),this.searchQuery$=this.select(n=>n.searchQuery),this.formName$=this.select(n=>n.formName),this.actionResult$=this.select(this.item$,this.done$,(n,a)=>({item:n,done:a}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.vendorLocations$,this.locations$,this.vendors$,(n,a,m,p,_,v,D)=>({errors:n,loading:a,item:m,formName:p,vendorLocations:_,locations:v,vendors:D}),{debounce:!0}),this.input$=this.select(this.paging$,this.locationId$,this.vendorId$,this.searchQuery$,(n,a,m,p)=>({limit:n.limit,skip:n.skip,name:p,locationId:a,vendorId:m,total:n.total})),this.setFormName=this.updater((n,a)=>Object.assign(Object.assign({},n),{formName:a})),this.setLocationId=this.updater((n,a)=>Object.assign(Object.assign({},n),{locationId:a})),this.setVendorId=this.updater((n,a)=>Object.assign(Object.assign({},n),{vendorId:a})),this.filterLocations=n=>this.data.userSelectLocations({input:{name:n}}).pipe((0,g._b)(a=>{let m=a.data.items;return this.patchState({locations:m}),m},a=>this.patchState({errors:a.graphQLErrors?a.graphQLErrors:a})),(0,B.U)(a=>a.data.items)),this.filterVendors=n=>this.data.userSelectVendors({input:{name:n}}).pipe((0,g._b)(a=>{let m=a.data.items;return this.patchState({vendors:m}),m},a=>this.patchState({errors:a.graphQLErrors?a.graphQLErrors:a})),(0,B.U)(a=>a.data.items)),this.addLocation=this.updater((n,a)=>Object.assign(Object.assign({},n),{locations:n.locations.concat(a)})),this.addVendor=this.updater((n,a)=>Object.assign(Object.assign({},n),{vendors:n.vendors.concat(a)})),this.setItem=this.updater((n,a)=>Object.assign(Object.assign({},n),{item:a})),this.addNewVendorLocation=this.updater((n,a)=>Object.assign(Object.assign({},n),{vendorLocations:[...n.vendorLocations,a]})),this.updateVendorLocation=this.updater((n,a)=>Object.assign(Object.assign({},n),{vendorLocations:n.vendorLocations.map(m=>m.id===a.id?a:m)})),this.addVendorLocations=this.updater((n,a)=>Object.assign(Object.assign({},n),{vendorLocations:n.vendorLocations.concat(a)})),this.updateVendorLocations=this.updater((n,a)=>Object.assign(Object.assign({},n),{vendorLocations:n.vendorLocations.map(m=>a.find(_=>_.id===m.id)||m)})),this.setSearchQuery=this.updater((n,a)=>Object.assign(Object.assign({},n),{searchQuery:a})),this.loadVendorLocationEffect=this.effect(n=>n.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(a=>this.data.userVendorLocation({vendorLocationId:a}).pipe((0,g._b)(m=>{this.patchState({item:m.data.item,errors:m.errors,loading:!1})},m=>this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})))))),this.loadVendorLocationsEffect=this.effect(n=>n.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.input$),(0,h.w)(([a,m])=>this.data.userVendorLocations({input:m}).pipe((0,g._b)(p=>this.patchState({paging:{limit:m.limit,skip:m.skip,total:p.data.count.total},vendorLocations:p.data.items,errors:p.errors,loading:!1}),p=>this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})))))),this.createVendorLocationEffect=this.effect(n=>n.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(a=>this.vendorLocationService.createVendorLocation(Object.assign({},a)).pipe((0,g._b)(m=>{this.addNewVendorLocation(m),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:m,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},m=>{m.graphQLErrors?(this.toast.error(m.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})):(this.toast.error(m.Message),this.formService.setErrors(m.Data))}))))),this.updateVendorLocationEffect=this.effect(n=>n.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([a,m])=>this.vendorLocationService.updateVendorLocation(a,a.id).pipe((0,g._b)(p=>{this.updateVendorLocation(p),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:p,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},p=>{p.graphQLErrors?(this.toast.error(p.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})):(this.toast.error(p.Message),this.formService.setErrors(p.Data))}))))),this.deleteVendorLocationEffect=this.effect(n=>n.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([a,m])=>this.data.userDeleteVendorLocation({vendorLocationId:m.id}).pipe((0,g._b)(p=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:p.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},p=>{p.graphQLErrors?(this.toast.error(p.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})):(this.toast.error(p.Message),this.formService.setErrors(p.Data))}))))),this.importExcelEffect=this.effect(n=>n.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(a=>this.vendorLocationService.importVendorLocations(a).pipe((0,te.K)(m=>{var p;return this.toast.error(null!==(p=m.Message)&&void 0!==p?p:"Failed to save",{duration:3e3}),k.E}),(0,C.b)(m=>{const p=JSON.parse(m.created),_=JSON.parse(m.updated),v=JSON.parse(m.failed),D=p.length+_.length+v.length;this.addVendorLocations(p),this.updateVendorLocations(_),this.toast.success(`${p.length} created, ${_.length} updated, ${v.length} failed of total ${D}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("vendorLocationId")?(this.route.snapshot.paramMap.get("vendorLocationId"),this.setFormName("vendorLocation_edit")):this.setFormName("vendorLocation_create"),this.route.snapshot.paramMap.has("locationId")){var c=this.route.snapshot.paramMap.get("locationId");this.setLocationId(c)}if(this.route.snapshot.paramMap.has("vendorId")){var d=this.route.snapshot.paramMap.get("vendorId");this.setVendorId(d)}}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.vendorLocationService.validateVendorLocationExcelData(t,i.locations,i.vendors)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(E.q),e.LFG(A.F0),e.LFG(A.gz),e.LFG(X.F),e.LFG(q.o),e.LFG(vY))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function bY(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close.emit())})("formIsReady",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.vendorLocation)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let Nm=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"vendorLocation_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({id:null,name:""}),this.store.vm$.subscribe(i=>{this.vendorLocation=i.item})):t.formName&&t.formName.currentValue&&"vendorLocation_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadVendorLocationEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.vendorLocation=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(br),e.Y36(A.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-vendor-location-form"]],inputs:{vendorLocation:"vendorLocation",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,bY,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[w.O5,z.M,w.Ov],encapsulation:2}),s})(),Am=(()=>{class s{constructor(){this.autoHeight=!1,this.vendorLocations=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[{field:"vendor.name",headerName:"Vendor",filter:"agTextColumnFilter"},{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{field:"locationId",filter:"agTextColumnFilter",hide:!0},{field:"vendorId",filter:"agTextColumnFilter",hide:!0}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var r;t.includes(null===(r=i.data)||void 0===r?void 0:r.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-vendor-location-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(N.x,5),2&t){let r;e.iGM(r=e.CRH())&&(i.tableView=r.first)}},inputs:{autoHeight:"autoHeight",vendorLocations:"vendorLocations"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.vendorLocations)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[N.x],encapsulation:2}),s})();function TY(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-vendor-location-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","vendorLocation_edit")("formControl",t.formControl)("vendorLocation",t.vendorLocation)}}const yY=function(){return{}};function wY(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-vendor-location-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","vendorLocation_create")("formControl",t.formControl)("vendorLocation",e.DdM(3,yY))}}function xY(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-vendor-location-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(u.ref.close())}),e.qZA()}2&s&&e.Q6J("vendorLocations",o.data.items)}let NY=(()=>{class s extends I.fS{constructor(t){super(),this.store=t,this.store.loadVendorLocationsEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.vendorLocations$.pipe((0,h.w)(i=>(0,T.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(br))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","vendorLocation","send","close"],[1,"w-full","h-full","bg-white",3,"vendorLocations","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,TY,2,3,"ng-template",null,1,e.W1O),e.YNc(3,wY,1,4,"ng-template",null,2,e.W1O),e.YNc(5,xY,1,1,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",u)("editTemplate",r)("createTemplate",l)("key",i.field.key)}},dependencies:[x.JJ,x.oH,J.$,Nm,Am],encapsulation:2}),s})();function AY(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-vendor-location-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","vendorLocation_edit")("vendorLocation",t.value)}}const FY=function(){return{}};function DY(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-vendor-location-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","vendorLocation_create")("vendorLocation",e.DdM(2,FY))}function IY(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-vendor-location-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(null==u.ref?null:u.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("vendorLocations",t.items)}}let PY=(()=>{class s extends Y{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","vendorLocation","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","vendorLocations","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,AY,1,2,"ng-template",null,1,e.W1O),e.YNc(3,DY,1,3,"ng-template",null,2,e.W1O),e.YNc(5,IY,1,2,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[ee,Nm,Am],encapsulation:2}),s})(),WY=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[br],imports:[w.ez,R.F,x.UX,V.o,H.u,Q.P,U.t,Z,j.h,K.G,I.X0.forChild({types:[{name:"vendor-location-select",component:NY,wrappers:["form-field"]},{name:"vendor-location-grid",component:PY}]})]}),s})(),MY=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[WY]}),s})();class as extends y.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class EY extends as{constructor(o,t){super("ValidateVendorExcelDataAction"),this.valid=!1,this.excelData=o,this.vendorTypes=t}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name),this.validationContext.addRule(new f.mi(`vendorTypeName_${i}_is_valid}`,"Vendor Type Is Not Valid","vendorType.name",t.vendorType,this.vendorTypes,!0))}),this.validationContext.addRule(new f.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof f.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(r=>r.name),newNames:[i.newName]}):i instanceof f.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,T.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class OY extends f.wS{constructor(o,t,i,r,l){super(o,t,i,r,l,!0)}}class LY extends f.ul{constructor(o,t,i,r=!1){super(o,t,r),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new f.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new OY("name","The vendor name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class GY extends as{constructor(o){super("CreateVendorAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new LY("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){console.log("performAction"),this.response=this.businessProvider.data.userCreateVendor({input:this.input}).pipe((0,h.w)(o=>(0,ie.of)(o.data.created)))}}class $Y extends as{constructor(o){super("UpdateVendorsAction"),this.vendors=o}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.vendors,!0))}performAction(){this.response=this.businessProvider.data.userUpdateVendors({input:{vendors:this.vendors}}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}class RY extends as{constructor(o,t){super("UpdateVendorAction"),this.vendor=o,this.vendorId=t}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.vendor,!0)).addRule(new f.xF("Id","Id should be a CUID and not null",this.vendorId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateVendor({vendorId:this.vendorId,input:this.vendor}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}let Fm=(()=>{class s extends y.nH{constructor(t,i,r){super("NotificationService.VendorBusinessProviderService",t,r),this.data=i}createVendor(t){const i=new GY(t);return i.Do(this),i.response}updateVendor(t,i){const r=new RY(t,i);return r.Do(this),r.response}importVendors(t){const i=new $Y(t);return i.Do(this),i.response}validateVendorExcelData(t,i){const r=new EY(t,i);return r.Do(this),r.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(O.ed),e.LFG(E.q),e.LFG(y.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),VY=(()=>{class s extends y.nH{constructor(t,i,r){super("VendorService",r,t),this.businessProvider=i}createVendor(t){const i=Object.fromEntries(Object.entries(t).filter(([r,l])=>null!==l));return this.businessProvider.createVendor(i)}updateVendor(t,i){return this.businessProvider.updateVendor(t,i)}importVendors(t){return this.businessProvider.importVendors(t)}validateVendorExcelData(t,i){return this.businessProvider.validateVendorExcelData(t,i)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(Fm,8),e.LFG(Fm),e.LFG(O.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),Tr=(()=>{class s extends g.m1{constructor(t,i,r,l,u,P){if(super({loading:!1,vendors:[],done:!1,searchQuery:"",formName:void 0,vendorTypeId:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=r,this.toast=l,this.formService=u,this.vendorService=P,this.errors$=this.select(d=>d.errors),this.loading$=this.select(d=>d.loading),this.done$=this.select(d=>d.done),this.item$=this.select(d=>d.item),this.vendors$=this.select(d=>d.vendors),this.vendorTypes$=this.select(d=>d.vendorTypes||[]),this.vendorTypeId$=this.select(d=>d.vendorTypeId),this.paging$=this.select(d=>d.paging),this.searchQuery$=this.select(d=>d.searchQuery),this.formName$=this.select(d=>d.formName),this.actionResult$=this.select(this.item$,this.done$,(d,n)=>({item:d,done:n}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.vendors$,this.vendorTypes$,(d,n,a,m,p,_)=>({errors:d,loading:n,item:a,formName:m,vendors:p,vendorTypes:_}),{debounce:!0}),this.input$=this.select(this.paging$,this.vendorTypeId$,this.searchQuery$,(d,n,a)=>({limit:d.limit,skip:d.skip,name:a,vendorTypeId:n,total:d.total})),this.setFormName=this.updater((d,n)=>Object.assign(Object.assign({},d),{formName:n})),this.setVendorTypeId=this.updater((d,n)=>Object.assign(Object.assign({},d),{vendorTypeId:n})),this.filterVendorTypes=d=>this.data.userSelectVendorTypes({input:{name:d}}).pipe((0,g._b)(n=>{let a=n.data.items;return this.patchState({vendorTypes:a}),a},n=>this.patchState({errors:n.graphQLErrors?n.graphQLErrors:n})),(0,B.U)(n=>n.data.items)),this.addVendorType=this.updater((d,n)=>Object.assign(Object.assign({},d),{vendorTypes:d.vendorTypes.concat(n)})),this.setItem=this.updater((d,n)=>Object.assign(Object.assign({},d),{item:n})),this.addNewVendor=this.updater((d,n)=>Object.assign(Object.assign({},d),{vendors:[...d.vendors,n]})),this.updateVendor=this.updater((d,n)=>Object.assign(Object.assign({},d),{vendors:d.vendors.map(a=>a.id===n.id?n:a)})),this.addVendors=this.updater((d,n)=>Object.assign(Object.assign({},d),{vendors:d.vendors.concat(n)})),this.updateVendors=this.updater((d,n)=>Object.assign(Object.assign({},d),{vendors:d.vendors.map(a=>n.find(p=>p.id===a.id)||a)})),this.setSearchQuery=this.updater((d,n)=>Object.assign(Object.assign({},d),{searchQuery:n})),this.loadVendorEffect=this.effect(d=>d.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(n=>this.data.userVendor({vendorId:n}).pipe((0,g._b)(a=>{console.log(a.data.item),this.patchState({item:a.data.item,errors:a.errors,loading:!1})},a=>this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})))))),this.loadVendorsEffect=this.effect(d=>d.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.input$),(0,h.w)(([n,a])=>this.data.userVendors({input:a}).pipe((0,g._b)(m=>this.patchState({paging:{limit:a.limit,skip:a.skip,total:m.data.count.total},vendors:m.data.items,errors:m.errors,loading:!1}),m=>this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})))))),this.createVendorEffect=this.effect(d=>d.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(n=>this.vendorService.createVendor(Object.assign({},n)).pipe((0,g._b)(a=>{this.addNewVendor(a),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:a,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.updateVendorEffect=this.effect(d=>d.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([n,a])=>this.vendorService.updateVendor(n,n.id).pipe((0,g._b)(m=>{this.updateVendor(m),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:m,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},m=>{m.graphQLErrors?(this.toast.error(m.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})):(this.toast.error(m.Message),this.formService.setErrors(m.Data))}))))),this.deleteVendorEffect=this.effect(d=>d.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([n,a])=>this.data.userDeleteVendor({vendorId:a.id}).pipe((0,g._b)(m=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:m.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},m=>{m.graphQLErrors?(this.toast.error(m.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})):(this.toast.error(m.Message),this.formService.setErrors(m.Data))}))))),this.importExcelEffect=this.effect(d=>d.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(n=>this.vendorService.importVendors(n).pipe((0,te.K)(a=>{var m;return this.toast.error(null!==(m=a.Message)&&void 0!==m?m:"Failed to save",{duration:3e3}),k.E}),(0,C.b)(a=>{const m=JSON.parse(a.created),p=JSON.parse(a.updated),_=JSON.parse(a.failed),v=m.length+p.length+_.length;this.addVendors(m),this.updateVendors(p),this.toast.success(`${m.length} created, ${p.length} updated, ${_.length} failed of total ${v}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("vendorId")?(this.route.snapshot.paramMap.get("vendorId"),this.setFormName("vendor_edit")):this.setFormName("vendor_create"),this.route.snapshot.paramMap.has("vendorTypeId")){var c=this.route.snapshot.paramMap.get("vendorTypeId");this.setVendorTypeId(c)}}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.vendorService.validateVendorExcelData(t,i.vendorTypes)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(E.q),e.LFG(A.F0),e.LFG(A.gz),e.LFG(X.F),e.LFG(q.o),e.LFG(VY))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function QY(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close.emit())})("formIsReady",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.vendor)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let Dm=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"vendor_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({id:null,name:""}),this.store.vm$.subscribe(i=>{this.vendor=i.item})):t.formName&&t.formName.currentValue&&"vendor_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadVendorEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.vendor=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Tr),e.Y36(A.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-vendor-form"]],inputs:{vendor:"vendor",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,QY,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[w.O5,z.M,w.Ov],encapsulation:2}),s})(),Im=(()=>{class s{constructor(){this.autoHeight=!1,this.vendors=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[{field:"vendorType.name",headerName:"Vendor Type",filter:"agTextColumnFilter"},{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{field:"taxId",filter:"agTextColumnFilter",hide:!0},{field:"line1",filter:"agTextColumnFilter"},{field:"city",filter:"agTextColumnFilter"},{field:"state",filter:"agTextColumnFilter"},{field:"postalCode",filter:"agTextColumnFilter"},{field:"emailAddress",filter:"agTextColumnFilter"},{field:"phoneNumber",filter:"agTextColumnFilter"},{field:"fax",filter:"agTextColumnFilter"},{field:"mailingAddress",filter:"agTextColumnFilter"},{field:"vendorTypeId",filter:"agTextColumnFilter",hide:!0},{field:"line2",filter:"agTextColumnFilter"},{field:"country",filter:"agTextColumnFilter"},{field:"office",filter:"agTextColumnFilter"},{field:"email",filter:"agTextColumnFilter"},{field:"website",filter:"agTextColumnFilter"},{field:"contactPerson",filter:"agTextColumnFilter"},{field:"owner",filter:"agTextColumnFilter"},{field:"bankRoutingNumber",filter:"agTextColumnFilter"},{field:"bankAccountNumber",filter:"agTextColumnFilter"},{field:"bankName",filter:"agTextColumnFilter"},{field:"bankCity",filter:"agTextColumnFilter"},{field:"bankState",filter:"agTextColumnFilter"},{field:"bankZip",filter:"agTextColumnFilter"},{field:"notes",filter:"agTextColumnFilter"},{field:"agreementDetails",filter:"agTextColumnFilter"},{field:"providerSearchNameDisplayType",filter:"agTextColumnFilter"},{field:"driversLicenseId",filter:"agTextColumnFilter",hide:!0},{field:"logoId",filter:"agTextColumnFilter",hide:!0},{field:"cellphone",filter:"agTextColumnFilter"},{field:"achCheckOrWire",filter:"agTextColumnFilter"},{field:"reductionNotes",filter:"agTextColumnFilter"},{headerName:"Latitude",field:"latitude",valueFormatter:t=>{var i;return(0,S.oBD)(null===(i=t.data)||void 0===i?void 0:i.latitude,"",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{headerName:"Longitude",field:"longitude",valueFormatter:t=>{var i;return(0,S.oBD)(null===(i=t.data)||void 0===i?void 0:i.longitude,"",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{field:"businessCentralName",filter:"agTextColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var r;t.includes(null===(r=i.data)||void 0===r?void 0:r.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-vendor-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(N.x,5),2&t){let r;e.iGM(r=e.CRH())&&(i.tableView=r.first)}},inputs:{autoHeight:"autoHeight",vendors:"vendors"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.vendors)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[N.x],encapsulation:2}),s})();function UY(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-vendor-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","vendor_edit")("formControl",t.formControl)("vendor",t.vendor)}}const JY=function(){return{}};function jY(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-vendor-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","vendor_create")("formControl",t.formControl)("vendor",e.DdM(3,JY))}}function zY(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-vendor-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(u.ref.close())}),e.qZA()}2&s&&e.Q6J("vendors",o.data.items)}let qY=(()=>{class s extends I.fS{constructor(t){super(),this.store=t,this.store.loadVendorsEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.vendors$.pipe((0,h.w)(i=>(0,T.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Tr))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","vendor","send","close"],[1,"w-full","h-full","bg-white",3,"vendors","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,UY,2,3,"ng-template",null,1,e.W1O),e.YNc(3,jY,1,4,"ng-template",null,2,e.W1O),e.YNc(5,zY,1,1,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",u)("editTemplate",r)("createTemplate",l)("key",i.field.key)}},dependencies:[x.JJ,x.oH,J.$,Dm,Im],encapsulation:2}),s})();function HY(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-vendor-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","vendor_edit")("vendor",t.value)}}const KY=function(){return{}};function kY(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-vendor-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","vendor_create")("vendor",e.DdM(2,KY))}function ZY(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-vendor-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(null==u.ref?null:u.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("vendors",t.items)}}let BY=(()=>{class s extends Y{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","vendor","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","vendors","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,HY,1,2,"ng-template",null,1,e.W1O),e.YNc(3,kY,1,3,"ng-template",null,2,e.W1O),e.YNc(5,ZY,1,2,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[ee,Dm,Im],encapsulation:2}),s})(),YY=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[Tr],imports:[w.ez,R.F,x.UX,V.o,H.u,Q.P,U.t,Z,j.h,K.G,I.X0.forChild({types:[{name:"vendor-select",component:qY,wrappers:["form-field"]},{name:"vendor-grid",component:BY}]})]}),s})(),XY=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[YY]}),s})();class ns extends y.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class e7 extends ns{constructor(o){super("ValidateVendorTypeExcelDataAction"),this.valid=!1,this.excelData=o}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name)}),this.validationContext.addRule(new f.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof f.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(r=>r.name),newNames:[i.newName]}):i instanceof f.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,T.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class t7 extends f.wS{constructor(o,t,i,r,l){super(o,t,i,r,l,!0)}}class i7 extends f.ul{constructor(o,t,i,r=!1){super(o,t,r),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new f.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new t7("name","The vendortype name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class s7 extends ns{constructor(o){super("CreateVendorTypeAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new i7("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateVendorType({input:this.input}).pipe((0,h.w)(o=>(0,ie.of)(o.data.created)))}}class o7 extends ns{constructor(o){super("UpdateVendorTypesAction"),this.vendorTypes=o}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.vendorTypes,!0))}performAction(){this.response=this.businessProvider.data.userUpdateVendorTypes({input:{vendorTypes:this.vendorTypes}}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}class r7 extends ns{constructor(o,t){super("UpdateVendorTypeAction"),this.vendorType=o,this.vendorTypeId=t}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.vendorType,!0)).addRule(new f.xF("Id","Id should be a CUID and not null",this.vendorTypeId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateVendorType({vendorTypeId:this.vendorTypeId,input:this.vendorType}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}let Pm=(()=>{class s extends y.nH{constructor(t,i,r){super("NotificationService.VendorTypeBusinessProviderService",t,r),this.data=i}createVendorType(t){const i=new s7(t);return i.Do(this),i.response}updateVendorType(t,i){const r=new r7(t,i);return r.Do(this),r.response}importVendorTypes(t){const i=new o7(t);return i.Do(this),i.response}validateVendorTypeExcelData(t){const i=new e7(t);return i.Do(this),i.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(O.ed),e.LFG(E.q),e.LFG(y.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),a7=(()=>{class s extends y.nH{constructor(t,i,r){super("VendorTypeService",r,t),this.businessProvider=i}createVendorType(t){const i=Object.fromEntries(Object.entries(t).filter(([r,l])=>null!==l));return this.businessProvider.createVendorType(i)}updateVendorType(t,i){return this.businessProvider.updateVendorType(t,i)}importVendorTypes(t){return this.businessProvider.importVendorTypes(t)}validateVendorTypeExcelData(t){return this.businessProvider.validateVendorTypeExcelData(t)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(Pm,8),e.LFG(Pm),e.LFG(O.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),yr=(()=>{class s extends g.m1{constructor(t,i,r,l,u,P){super({loading:!1,vendorTypes:[],done:!1,searchQuery:"",formName:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=r,this.toast=l,this.formService=u,this.vendorTypeService=P,this.errors$=this.select(c=>c.errors),this.loading$=this.select(c=>c.loading),this.done$=this.select(c=>c.done),this.item$=this.select(c=>c.item),this.vendorTypes$=this.select(c=>c.vendorTypes),this.paging$=this.select(c=>c.paging),this.searchQuery$=this.select(c=>c.searchQuery),this.formName$=this.select(c=>c.formName),this.actionResult$=this.select(this.item$,this.done$,(c,d)=>({item:c,done:d}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.vendorTypes$,(c,d,n,a,m)=>({errors:c,loading:d,item:n,formName:a,vendorTypes:m}),{debounce:!0}),this.input$=this.select(this.paging$,this.searchQuery$,(c,d)=>({limit:c.limit,skip:c.skip,name:d,total:c.total})),this.setFormName=this.updater((c,d)=>Object.assign(Object.assign({},c),{formName:d})),this.setItem=this.updater((c,d)=>Object.assign(Object.assign({},c),{item:d})),this.addNewVendorType=this.updater((c,d)=>Object.assign(Object.assign({},c),{vendorTypes:[...c.vendorTypes,d]})),this.updateVendorType=this.updater((c,d)=>Object.assign(Object.assign({},c),{vendorTypes:c.vendorTypes.map(n=>n.id===d.id?d:n)})),this.addVendorTypes=this.updater((c,d)=>Object.assign(Object.assign({},c),{vendorTypes:c.vendorTypes.concat(d)})),this.updateVendorTypes=this.updater((c,d)=>Object.assign(Object.assign({},c),{vendorTypes:c.vendorTypes.map(n=>d.find(m=>m.id===n.id)||n)})),this.setSearchQuery=this.updater((c,d)=>Object.assign(Object.assign({},c),{searchQuery:d})),this.loadVendorTypeEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.data.userVendorType({vendorTypeId:d}).pipe((0,g._b)(n=>{this.patchState({item:n.data.item,errors:n.errors,loading:!1})},n=>this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})))))),this.loadVendorTypesEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.input$),(0,h.w)(([d,n])=>this.data.userVendorTypes({input:n}).pipe((0,g._b)(a=>this.patchState({paging:{limit:n.limit,skip:n.skip,total:a.data.count.total},vendorTypes:a.data.items,errors:a.errors,loading:!1}),a=>this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})))))),this.createVendorTypeEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.vendorTypeService.createVendorType(Object.assign({},d)).pipe((0,g._b)(n=>{this.addNewVendorType(n),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:n,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},n=>{n.graphQLErrors?(this.toast.error(n.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})):(this.toast.error(n.Message),this.formService.setErrors(n.Data))}))))),this.updateVendorTypeEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([d,n])=>this.vendorTypeService.updateVendorType(d,d.id).pipe((0,g._b)(a=>{this.updateVendorType(a),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:a,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.deleteVendorTypeEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([d,n])=>this.data.userDeleteVendorType({vendorTypeId:n.id}).pipe((0,g._b)(a=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:a.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.importExcelEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.vendorTypeService.importVendorTypes(d).pipe((0,te.K)(n=>{var a;return this.toast.error(null!==(a=n.Message)&&void 0!==a?a:"Failed to save",{duration:3e3}),k.E}),(0,C.b)(n=>{const a=JSON.parse(n.created),m=JSON.parse(n.updated),p=JSON.parse(n.failed),_=a.length+m.length+p.length;this.addVendorTypes(a),this.updateVendorTypes(m),this.toast.success(`${a.length} created, ${m.length} updated, ${p.length} failed of total ${_}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("vendorTypeId")?(this.route.snapshot.paramMap.get("vendorTypeId"),this.setFormName("vendorType_edit")):this.setFormName("vendorType_create")}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.vendorTypeService.validateVendorTypeExcelData(t)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(E.q),e.LFG(A.F0),e.LFG(A.gz),e.LFG(X.F),e.LFG(q.o),e.LFG(a7))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function n7(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close.emit())})("formIsReady",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.vendorType)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let Wm=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"vendorType_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.vendorType=i.item})):t.formName&&t.formName.currentValue&&"vendorType_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadVendorTypeEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.vendorType=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(yr),e.Y36(A.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-vendor-type-form"]],inputs:{vendorType:"vendorType",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,n7,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[w.O5,z.M,w.Ov],encapsulation:2}),s})(),Mm=(()=>{class s{constructor(){this.autoHeight=!1,this.vendorTypes=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[,{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var r;t.includes(null===(r=i.data)||void 0===r?void 0:r.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-vendor-type-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(N.x,5),2&t){let r;e.iGM(r=e.CRH())&&(i.tableView=r.first)}},inputs:{autoHeight:"autoHeight",vendorTypes:"vendorTypes"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.vendorTypes)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[N.x],encapsulation:2}),s})();function l7(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-vendor-type-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","vendorType_edit")("formControl",t.formControl)("vendorType",t.vendorType)}}const c7=function(){return{}};function d7(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-vendor-type-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","vendorType_create")("formControl",t.formControl)("vendorType",e.DdM(3,c7))}}function u7(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-vendor-type-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(u.ref.close())}),e.qZA()}2&s&&e.Q6J("vendorTypes",o.data.items)}let m7=(()=>{class s extends I.fS{constructor(t){super(),this.store=t,this.store.loadVendorTypesEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.vendorTypes$.pipe((0,h.w)(i=>(0,T.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(yr))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","vendorType","send","close"],[1,"w-full","h-full","bg-white",3,"vendorTypes","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,l7,2,3,"ng-template",null,1,e.W1O),e.YNc(3,d7,1,4,"ng-template",null,2,e.W1O),e.YNc(5,u7,1,1,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",u)("editTemplate",r)("createTemplate",l)("key",i.field.key)}},dependencies:[x.JJ,x.oH,J.$,Wm,Mm],encapsulation:2}),s})();function p7(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-vendor-type-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","vendorType_edit")("vendorType",t.value)}}const h7=function(){return{}};function f7(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-vendor-type-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","vendorType_create")("vendorType",e.DdM(2,h7))}function _7(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-vendor-type-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(null==u.ref?null:u.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("vendorTypes",t.items)}}let g7=(()=>{class s extends Y{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","vendorType","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","vendorTypes","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,p7,1,2,"ng-template",null,1,e.W1O),e.YNc(3,f7,1,3,"ng-template",null,2,e.W1O),e.YNc(5,_7,1,2,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[ee,Wm,Mm],encapsulation:2}),s})(),C7=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[yr],imports:[w.ez,R.F,x.UX,V.o,H.u,Q.P,U.t,Z,j.h,K.G,I.X0.forChild({types:[{name:"vendor-type-select",component:m7,wrappers:["form-field"]},{name:"vendor-type-grid",component:g7}]})]}),s})(),S7=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[C7]}),s})();class ls extends y.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class v7 extends ls{constructor(o){super("ValidateVisitKindExcelDataAction"),this.valid=!1,this.excelData=o}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name)}),this.validationContext.addRule(new f.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof f.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(r=>r.name),newNames:[i.newName]}):i instanceof f.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,T.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class b7 extends f.wS{constructor(o,t,i,r,l){super(o,t,i,r,l,!0)}}class T7 extends f.ul{constructor(o,t,i,r=!1){super(o,t,r),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new f.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new b7("name","The visitkind name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class y7 extends ls{constructor(o){super("CreateVisitKindAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new T7("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateVisitKind({input:this.input}).pipe((0,h.w)(o=>(0,ie.of)(o.data.created)))}}class w7 extends ls{constructor(o){super("UpdateVisitKindsAction"),this.visitKinds=o}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.visitKinds,!0))}performAction(){this.response=this.businessProvider.data.userUpdateVisitKinds({input:{visitKinds:this.visitKinds}}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}class x7 extends ls{constructor(o,t){super("UpdateVisitKindAction"),this.visitKind=o,this.visitKindId=t}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.visitKind,!0)).addRule(new f.xF("Id","Id should be a CUID and not null",this.visitKindId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateVisitKind({visitKindId:this.visitKindId,input:this.visitKind}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}let Em=(()=>{class s extends y.nH{constructor(t,i,r){super("NotificationService.VisitKindBusinessProviderService",t,r),this.data=i}createVisitKind(t){const i=new y7(t);return i.Do(this),i.response}updateVisitKind(t,i){const r=new x7(t,i);return r.Do(this),r.response}importVisitKinds(t){const i=new w7(t);return i.Do(this),i.response}validateVisitKindExcelData(t){const i=new v7(t);return i.Do(this),i.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(O.ed),e.LFG(E.q),e.LFG(y.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),N7=(()=>{class s extends y.nH{constructor(t,i,r){super("VisitKindService",r,t),this.businessProvider=i}createVisitKind(t){const i=Object.fromEntries(Object.entries(t).filter(([r,l])=>null!==l));return this.businessProvider.createVisitKind(i)}updateVisitKind(t,i){return this.businessProvider.updateVisitKind(t,i)}importVisitKinds(t){return this.businessProvider.importVisitKinds(t)}validateVisitKindExcelData(t){return this.businessProvider.validateVisitKindExcelData(t)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(Em,8),e.LFG(Em),e.LFG(O.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),wr=(()=>{class s extends g.m1{constructor(t,i,r,l,u,P){super({loading:!1,visitKinds:[],done:!1,searchQuery:"",formName:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=r,this.toast=l,this.formService=u,this.visitKindService=P,this.errors$=this.select(c=>c.errors),this.loading$=this.select(c=>c.loading),this.done$=this.select(c=>c.done),this.item$=this.select(c=>c.item),this.visitKinds$=this.select(c=>c.visitKinds),this.paging$=this.select(c=>c.paging),this.searchQuery$=this.select(c=>c.searchQuery),this.formName$=this.select(c=>c.formName),this.actionResult$=this.select(this.item$,this.done$,(c,d)=>({item:c,done:d}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.visitKinds$,(c,d,n,a,m)=>({errors:c,loading:d,item:n,formName:a,visitKinds:m}),{debounce:!0}),this.input$=this.select(this.paging$,this.searchQuery$,(c,d)=>({limit:c.limit,skip:c.skip,name:d,total:c.total})),this.setFormName=this.updater((c,d)=>Object.assign(Object.assign({},c),{formName:d})),this.setItem=this.updater((c,d)=>Object.assign(Object.assign({},c),{item:d})),this.addNewVisitKind=this.updater((c,d)=>Object.assign(Object.assign({},c),{visitKinds:[...c.visitKinds,d]})),this.updateVisitKind=this.updater((c,d)=>Object.assign(Object.assign({},c),{visitKinds:c.visitKinds.map(n=>n.id===d.id?d:n)})),this.addVisitKinds=this.updater((c,d)=>Object.assign(Object.assign({},c),{visitKinds:c.visitKinds.concat(d)})),this.updateVisitKinds=this.updater((c,d)=>Object.assign(Object.assign({},c),{visitKinds:c.visitKinds.map(n=>d.find(m=>m.id===n.id)||n)})),this.setSearchQuery=this.updater((c,d)=>Object.assign(Object.assign({},c),{searchQuery:d})),this.loadVisitKindEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.data.userVisitKind({visitKindId:d}).pipe((0,g._b)(n=>{this.patchState({item:n.data.item,errors:n.errors,loading:!1})},n=>this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})))))),this.loadVisitKindsEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.input$),(0,h.w)(([d,n])=>this.data.userVisitKinds({input:n}).pipe((0,g._b)(a=>this.patchState({paging:{limit:n.limit,skip:n.skip,total:a.data.count.total},visitKinds:a.data.items,errors:a.errors,loading:!1}),a=>this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})))))),this.createVisitKindEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.visitKindService.createVisitKind(Object.assign({},d)).pipe((0,g._b)(n=>{this.addNewVisitKind(n),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:n,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},n=>{n.graphQLErrors?(this.toast.error(n.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})):(this.toast.error(n.Message),this.formService.setErrors(n.Data))}))))),this.updateVisitKindEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([d,n])=>this.visitKindService.updateVisitKind(d,d.id).pipe((0,g._b)(a=>{this.updateVisitKind(a),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:a,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.deleteVisitKindEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([d,n])=>this.data.userDeleteVisitKind({visitKindId:n.id}).pipe((0,g._b)(a=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:a.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.importExcelEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.visitKindService.importVisitKinds(d).pipe((0,te.K)(n=>{var a;return this.toast.error(null!==(a=n.Message)&&void 0!==a?a:"Failed to save",{duration:3e3}),k.E}),(0,C.b)(n=>{const a=JSON.parse(n.created),m=JSON.parse(n.updated),p=JSON.parse(n.failed),_=a.length+m.length+p.length;this.addVisitKinds(a),this.updateVisitKinds(m),this.toast.success(`${a.length} created, ${m.length} updated, ${p.length} failed of total ${_}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("visitKindId")?(this.route.snapshot.paramMap.get("visitKindId"),this.setFormName("visitKind_edit")):this.setFormName("visitKind_create")}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.visitKindService.validateVisitKindExcelData(t)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(E.q),e.LFG(A.F0),e.LFG(A.gz),e.LFG(X.F),e.LFG(q.o),e.LFG(N7))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function A7(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close.emit())})("formIsReady",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.visitKind)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let Om=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"visitKind_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.visitKind=i.item})):t.formName&&t.formName.currentValue&&"visitKind_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadVisitKindEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.visitKind=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(wr),e.Y36(A.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-visit-kind-form"]],inputs:{visitKind:"visitKind",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,A7,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[w.O5,z.M,w.Ov],encapsulation:2}),s})(),Lm=(()=>{class s{constructor(){this.autoHeight=!1,this.visitKinds=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[,{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{field:"code",filter:"agTextColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var r;t.includes(null===(r=i.data)||void 0===r?void 0:r.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-visit-kind-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(N.x,5),2&t){let r;e.iGM(r=e.CRH())&&(i.tableView=r.first)}},inputs:{autoHeight:"autoHeight",visitKinds:"visitKinds"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.visitKinds)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[N.x],encapsulation:2}),s})();function F7(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-visit-kind-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","visitKind_edit")("formControl",t.formControl)("visitKind",t.visitKind)}}const D7=function(){return{}};function I7(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-visit-kind-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","visitKind_create")("formControl",t.formControl)("visitKind",e.DdM(3,D7))}}function P7(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-visit-kind-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(u.ref.close())}),e.qZA()}2&s&&e.Q6J("visitKinds",o.data.items)}let W7=(()=>{class s extends I.fS{constructor(t){super(),this.store=t,this.store.loadVisitKindsEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.visitKinds$.pipe((0,h.w)(i=>(0,T.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(wr))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","visitKind","send","close"],[1,"w-full","h-full","bg-white",3,"visitKinds","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,F7,2,3,"ng-template",null,1,e.W1O),e.YNc(3,I7,1,4,"ng-template",null,2,e.W1O),e.YNc(5,P7,1,1,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",u)("editTemplate",r)("createTemplate",l)("key",i.field.key)}},dependencies:[x.JJ,x.oH,J.$,Om,Lm],encapsulation:2}),s})();function M7(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-visit-kind-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","visitKind_edit")("visitKind",t.value)}}const E7=function(){return{}};function O7(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-visit-kind-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","visitKind_create")("visitKind",e.DdM(2,E7))}function L7(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-visit-kind-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(null==u.ref?null:u.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("visitKinds",t.items)}}let G7=(()=>{class s extends Y{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","visitKind","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","visitKinds","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,M7,1,2,"ng-template",null,1,e.W1O),e.YNc(3,O7,1,3,"ng-template",null,2,e.W1O),e.YNc(5,L7,1,2,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[ee,Om,Lm],encapsulation:2}),s})(),$7=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[wr],imports:[w.ez,R.F,x.UX,V.o,H.u,Q.P,U.t,Z,j.h,K.G,I.X0.forChild({types:[{name:"visit-kind-select",component:W7,wrappers:["form-field"]},{name:"visit-kind-grid",component:G7}]})]}),s})(),R7=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[$7]}),s})();class cs extends y.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class V7 extends cs{constructor(o,t,i){super("ValidateWriteOffExcelDataAction"),this.valid=!1,this.excelData=o,this.accounts=t,this.writeOffStatuses=i}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name),this.validationContext.addRule(new f.mi(`accountName_${i}_is_valid}`,"Account Is Not Valid","account.name",t.account,this.accounts,!0)),this.validationContext.addRule(new f.mi(`writeOffStatusName_${i}_is_valid}`,"Write off Status Is Not Valid","writeOffStatus.name",t.writeOffStatus,this.writeOffStatuses,!0))}),this.validationContext.addRule(new f.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof f.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(r=>r.name),newNames:[i.newName]}):i instanceof f.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,T.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class Q7 extends f.wS{constructor(o,t,i,r,l){super(o,t,i,r,l,!0)}}class U7 extends f.ul{constructor(o,t,i,r=!1){super(o,t,r),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new f.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new Q7("name","The writeoff name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class J7 extends cs{constructor(o){super("CreateWriteOffAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new U7("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateWriteOff({input:this.input}).pipe((0,h.w)(o=>(0,ie.of)(o.data.created)))}}class j7 extends cs{constructor(o){super("UpdateWriteOffsAction"),this.writeOffs=o}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.writeOffs,!0))}performAction(){this.response=this.businessProvider.data.userUpdateWriteOffs({input:{writeOffs:this.writeOffs}}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}class z7 extends cs{constructor(o,t){super("UpdateWriteOffAction"),this.writeOff=o,this.writeOffId=t}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.writeOff,!0)).addRule(new f.xF("Id","Id should be a CUID and not null",this.writeOffId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateWriteOff({writeOffId:this.writeOffId,input:this.writeOff}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}let Gm=(()=>{class s extends y.nH{constructor(t,i,r){super("NotificationService.WriteOffBusinessProviderService",t,r),this.data=i}createWriteOff(t){const i=new J7(t);return i.Do(this),i.response}updateWriteOff(t,i){const r=new z7(t,i);return r.Do(this),r.response}importWriteOffs(t){const i=new j7(t);return i.Do(this),i.response}validateWriteOffExcelData(t,i,r){const l=new V7(t,i,r);return l.Do(this),l.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(O.ed),e.LFG(E.q),e.LFG(y.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),q7=(()=>{class s extends y.nH{constructor(t,i,r){super("WriteOffService",r,t),this.businessProvider=i}createWriteOff(t){const i=Object.fromEntries(Object.entries(t).filter(([r,l])=>null!==l));return this.businessProvider.createWriteOff(i)}updateWriteOff(t,i){return this.businessProvider.updateWriteOff(t,i)}importWriteOffs(t){return this.businessProvider.importWriteOffs(t)}validateWriteOffExcelData(t,i,r){return this.businessProvider.validateWriteOffExcelData(t,i,r)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(Gm,8),e.LFG(Gm),e.LFG(O.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),xr=(()=>{class s extends g.m1{constructor(t,i,r,l,u,P){if(super({loading:!1,writeOffs:[],done:!1,searchQuery:"",formName:void 0,accountId:void 0,writeOffStatusId:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=r,this.toast=l,this.formService=u,this.writeOffService=P,this.errors$=this.select(n=>n.errors),this.loading$=this.select(n=>n.loading),this.done$=this.select(n=>n.done),this.item$=this.select(n=>n.item),this.writeOffs$=this.select(n=>n.writeOffs),this.caseAccounts$=this.select(n=>n.caseAccounts||[]),this.writeOffStatuses$=this.select(n=>n.writeOffStatuses||[]),this.accountId$=this.select(n=>n.accountId),this.writeOffStatusId$=this.select(n=>n.writeOffStatusId),this.paging$=this.select(n=>n.paging),this.searchQuery$=this.select(n=>n.searchQuery),this.formName$=this.select(n=>n.formName),this.actionResult$=this.select(this.item$,this.done$,(n,a)=>({item:n,done:a}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.writeOffs$,this.caseAccounts$,this.writeOffStatuses$,(n,a,m,p,_,v,D)=>({errors:n,loading:a,item:m,formName:p,writeOffs:_,caseAccounts:v,writeOffStatuses:D}),{debounce:!0}),this.input$=this.select(this.paging$,this.accountId$,this.writeOffStatusId$,this.searchQuery$,(n,a,m,p)=>({limit:n.limit,skip:n.skip,name:p,accountId:a,writeOffStatusId:m,total:n.total})),this.setFormName=this.updater((n,a)=>Object.assign(Object.assign({},n),{formName:a})),this.setAccountId=this.updater((n,a)=>Object.assign(Object.assign({},n),{accountId:a})),this.setWriteOffStatusId=this.updater((n,a)=>Object.assign(Object.assign({},n),{writeOffStatusId:a})),this.filterCaseAccounts=n=>this.data.userSelectCaseAccounts({input:{name:n}}).pipe((0,g._b)(a=>{let m=a.data.items;return this.patchState({caseAccounts:m}),m},a=>this.patchState({errors:a.graphQLErrors?a.graphQLErrors:a})),(0,B.U)(a=>a.data.items)),this.filterWriteOffStatuses=n=>this.data.userSelectWriteOffStatuses({input:{name:n}}).pipe((0,g._b)(a=>{let m=a.data.items;return this.patchState({writeOffStatuses:m}),m},a=>this.patchState({errors:a.graphQLErrors?a.graphQLErrors:a})),(0,B.U)(a=>a.data.items)),this.addCaseAccount=this.updater((n,a)=>Object.assign(Object.assign({},n),{caseAccounts:n.caseAccounts.concat(a)})),this.addWriteOffStatus=this.updater((n,a)=>Object.assign(Object.assign({},n),{writeOffStatuses:n.writeOffStatuses.concat(a)})),this.setItem=this.updater((n,a)=>Object.assign(Object.assign({},n),{item:a})),this.addNewWriteOff=this.updater((n,a)=>Object.assign(Object.assign({},n),{writeOffs:[...n.writeOffs,a]})),this.updateWriteOff=this.updater((n,a)=>Object.assign(Object.assign({},n),{writeOffs:n.writeOffs.map(m=>m.id===a.id?a:m)})),this.addWriteOffs=this.updater((n,a)=>Object.assign(Object.assign({},n),{writeOffs:n.writeOffs.concat(a)})),this.updateWriteOffs=this.updater((n,a)=>Object.assign(Object.assign({},n),{writeOffs:n.writeOffs.map(m=>a.find(_=>_.id===m.id)||m)})),this.setSearchQuery=this.updater((n,a)=>Object.assign(Object.assign({},n),{searchQuery:a})),this.loadWriteOffEffect=this.effect(n=>n.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(a=>this.data.userWriteOff({writeOffId:a}).pipe((0,g._b)(m=>{this.patchState({item:m.data.item,errors:m.errors,loading:!1})},m=>this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})))))),this.loadWriteOffsEffect=this.effect(n=>n.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.input$),(0,h.w)(([a,m])=>this.data.userWriteOffs({input:m}).pipe((0,g._b)(p=>this.patchState({paging:{limit:m.limit,skip:m.skip,total:p.data.count.total},writeOffs:p.data.items,errors:p.errors,loading:!1}),p=>this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})))))),this.createWriteOffEffect=this.effect(n=>n.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(a=>this.writeOffService.createWriteOff(Object.assign({},a)).pipe((0,g._b)(m=>{this.addNewWriteOff(m),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:m,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},m=>{m.graphQLErrors?(this.toast.error(m.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})):(this.toast.error(m.Message),this.formService.setErrors(m.Data))}))))),this.updateWriteOffEffect=this.effect(n=>n.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([a,m])=>this.writeOffService.updateWriteOff(a,a.id).pipe((0,g._b)(p=>{this.updateWriteOff(p),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:p,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},p=>{p.graphQLErrors?(this.toast.error(p.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})):(this.toast.error(p.Message),this.formService.setErrors(p.Data))}))))),this.deleteWriteOffEffect=this.effect(n=>n.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([a,m])=>this.data.userDeleteWriteOff({writeOffId:m.id}).pipe((0,g._b)(p=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:p.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},p=>{p.graphQLErrors?(this.toast.error(p.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})):(this.toast.error(p.Message),this.formService.setErrors(p.Data))}))))),this.importExcelEffect=this.effect(n=>n.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(a=>this.writeOffService.importWriteOffs(a).pipe((0,te.K)(m=>{var p;return this.toast.error(null!==(p=m.Message)&&void 0!==p?p:"Failed to save",{duration:3e3}),k.E}),(0,C.b)(m=>{const p=JSON.parse(m.created),_=JSON.parse(m.updated),v=JSON.parse(m.failed),D=p.length+_.length+v.length;this.addWriteOffs(p),this.updateWriteOffs(_),this.toast.success(`${p.length} created, ${_.length} updated, ${v.length} failed of total ${D}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("writeOffId")?(this.route.snapshot.paramMap.get("writeOffId"),this.setFormName("writeOff_edit")):this.setFormName("writeOff_create"),this.route.snapshot.paramMap.has("accountId")){var c=this.route.snapshot.paramMap.get("accountId");this.setAccountId(c)}if(this.route.snapshot.paramMap.has("writeOffStatusId")){var d=this.route.snapshot.paramMap.get("writeOffStatusId");this.setWriteOffStatusId(d)}}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.writeOffService.validateWriteOffExcelData(t,i.caseAccounts,i.writeOffStatuses)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(E.q),e.LFG(A.F0),e.LFG(A.gz),e.LFG(X.F),e.LFG(q.o),e.LFG(q7))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function H7(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close.emit())})("formIsReady",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.writeOff)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let $m=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"writeOff_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.writeOff=i.item})):t.formName&&t.formName.currentValue&&"writeOff_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadWriteOffEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.writeOff=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(xr),e.Y36(A.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-write-off-form"]],inputs:{writeOff:"writeOff",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,H7,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[w.O5,z.M,w.Ov],encapsulation:2}),s})(),Rm=(()=>{class s{constructor(){this.autoHeight=!1,this.writeOffs=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[{field:"account.name",headerName:"Account",filter:"agTextColumnFilter"},{field:"writeOffStatus.name",headerName:"Write off Status",filter:"agTextColumnFilter"},{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{field:"accountId",filter:"agTextColumnFilter",hide:!0},{field:"writeOffStatusId",filter:"agTextColumnFilter",hide:!0},{headerName:"Amount",field:"amount",valueFormatter:t=>{var i;return(0,S.oBD)(null===(i=t.data)||void 0===i?void 0:i.amount,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{field:"createdBy",filter:"agTextColumnFilter"},{field:"dateCreated",filter:"agDateColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var r;t.includes(null===(r=i.data)||void 0===r?void 0:r.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-write-off-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(N.x,5),2&t){let r;e.iGM(r=e.CRH())&&(i.tableView=r.first)}},inputs:{autoHeight:"autoHeight",writeOffs:"writeOffs"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.writeOffs)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[N.x],encapsulation:2}),s})();function K7(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-write-off-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","writeOff_edit")("formControl",t.formControl)("writeOff",t.writeOff)}}const k7=function(){return{}};function Z7(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-write-off-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","writeOff_create")("formControl",t.formControl)("writeOff",e.DdM(3,k7))}}function B7(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-write-off-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(u.ref.close())}),e.qZA()}2&s&&e.Q6J("writeOffs",o.data.items)}let Y7=(()=>{class s extends I.fS{constructor(t){super(),this.store=t,this.store.loadWriteOffsEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.writeOffs$.pipe((0,h.w)(i=>(0,T.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(xr))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","writeOff","send","close"],[1,"w-full","h-full","bg-white",3,"writeOffs","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,K7,2,3,"ng-template",null,1,e.W1O),e.YNc(3,Z7,1,4,"ng-template",null,2,e.W1O),e.YNc(5,B7,1,1,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",u)("editTemplate",r)("createTemplate",l)("key",i.field.key)}},dependencies:[x.JJ,x.oH,J.$,$m,Rm],encapsulation:2}),s})();function X7(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-write-off-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","writeOff_edit")("writeOff",t.value)}}const eX=function(){return{}};function tX(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-write-off-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","writeOff_create")("writeOff",e.DdM(2,eX))}function iX(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-write-off-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(null==u.ref?null:u.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("writeOffs",t.items)}}let sX=(()=>{class s extends Y{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","writeOff","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","writeOffs","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,X7,1,2,"ng-template",null,1,e.W1O),e.YNc(3,tX,1,3,"ng-template",null,2,e.W1O),e.YNc(5,iX,1,2,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[ee,$m,Rm],encapsulation:2}),s})(),oX=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[xr],imports:[w.ez,R.F,x.UX,V.o,H.u,Q.P,U.t,Z,j.h,K.G,I.X0.forChild({types:[{name:"write-off-select",component:Y7,wrappers:["form-field"]},{name:"write-off-grid",component:sX}]})]}),s})(),rX=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[oX]}),s})();class ds extends y.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class aX extends ds{constructor(o){super("ValidateWriteOffStatusExcelDataAction"),this.valid=!1,this.excelData=o}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name)}),this.validationContext.addRule(new f.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof f.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(r=>r.name),newNames:[i.newName]}):i instanceof f.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,T.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class nX extends f.wS{constructor(o,t,i,r,l){super(o,t,i,r,l,!0)}}class lX extends f.ul{constructor(o,t,i,r=!1){super(o,t,r),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new f.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new nX("name","The writeoffstatus name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class cX extends ds{constructor(o){super("CreateWriteOffStatusAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new lX("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateWriteOffStatus({input:this.input}).pipe((0,h.w)(o=>(0,ie.of)(o.data.created)))}}class dX extends ds{constructor(o){super("UpdateWriteOffStatusesAction"),this.writeOffStatuses=o}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.writeOffStatuses,!0))}performAction(){this.response=this.businessProvider.data.userUpdateWriteOffStatuses({input:{writeOffStatuses:this.writeOffStatuses}}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}class uX extends ds{constructor(o,t){super("UpdateWriteOffStatusAction"),this.writeOffStatus=o,this.writeOffStatusId=t}preValidateAction(){this.validationContext.addRule(new f.DJ("Input","Input should have values",this.writeOffStatus,!0)).addRule(new f.xF("Id","Id should be a CUID and not null",this.writeOffStatusId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateWriteOffStatus({writeOffStatusId:this.writeOffStatusId,input:this.writeOffStatus}).pipe((0,h.w)(o=>(0,T.of)(o.data.updated)))}}let Vm=(()=>{class s extends y.nH{constructor(t,i,r){super("NotificationService.WriteOffStatusBusinessProviderService",t,r),this.data=i}createWriteOffStatus(t){const i=new cX(t);return i.Do(this),i.response}updateWriteOffStatus(t,i){const r=new uX(t,i);return r.Do(this),r.response}importWriteOffStatuses(t){const i=new dX(t);return i.Do(this),i.response}validateWriteOffStatusExcelData(t){const i=new aX(t);return i.Do(this),i.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(O.ed),e.LFG(E.q),e.LFG(y.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),mX=(()=>{class s extends y.nH{constructor(t,i,r){super("WriteOffStatusService",r,t),this.businessProvider=i}createWriteOffStatus(t){const i=Object.fromEntries(Object.entries(t).filter(([r,l])=>null!==l));return this.businessProvider.createWriteOffStatus(i)}updateWriteOffStatus(t,i){return this.businessProvider.updateWriteOffStatus(t,i)}importWriteOffStatuses(t){return this.businessProvider.importWriteOffStatuses(t)}validateWriteOffStatusExcelData(t){return this.businessProvider.validateWriteOffStatusExcelData(t)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(Vm,8),e.LFG(Vm),e.LFG(O.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),Nr=(()=>{class s extends g.m1{constructor(t,i,r,l,u,P){super({loading:!1,writeOffStatuses:[],done:!1,searchQuery:"",formName:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=r,this.toast=l,this.formService=u,this.writeOffStatusService=P,this.errors$=this.select(c=>c.errors),this.loading$=this.select(c=>c.loading),this.done$=this.select(c=>c.done),this.item$=this.select(c=>c.item),this.writeOffStatuses$=this.select(c=>c.writeOffStatuses),this.paging$=this.select(c=>c.paging),this.searchQuery$=this.select(c=>c.searchQuery),this.formName$=this.select(c=>c.formName),this.actionResult$=this.select(this.item$,this.done$,(c,d)=>({item:c,done:d}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.writeOffStatuses$,(c,d,n,a,m)=>({errors:c,loading:d,item:n,formName:a,writeOffStatuses:m}),{debounce:!0}),this.input$=this.select(this.paging$,this.searchQuery$,(c,d)=>({limit:c.limit,skip:c.skip,name:d,total:c.total})),this.setFormName=this.updater((c,d)=>Object.assign(Object.assign({},c),{formName:d})),this.setItem=this.updater((c,d)=>Object.assign(Object.assign({},c),{item:d})),this.addNewWriteOffStatus=this.updater((c,d)=>Object.assign(Object.assign({},c),{writeOffStatuses:[...c.writeOffStatuses,d]})),this.updateWriteOffStatus=this.updater((c,d)=>Object.assign(Object.assign({},c),{writeOffStatuses:c.writeOffStatuses.map(n=>n.id===d.id?d:n)})),this.addWriteOffStatuses=this.updater((c,d)=>Object.assign(Object.assign({},c),{writeOffStatuses:c.writeOffStatuses.concat(d)})),this.updateWriteOffStatuses=this.updater((c,d)=>Object.assign(Object.assign({},c),{writeOffStatuses:c.writeOffStatuses.map(n=>d.find(m=>m.id===n.id)||n)})),this.setSearchQuery=this.updater((c,d)=>Object.assign(Object.assign({},c),{searchQuery:d})),this.loadWriteOffStatusEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.data.userWriteOffStatus({writeOffStatusId:d}).pipe((0,g._b)(n=>{this.patchState({item:n.data.item,errors:n.errors,loading:!1})},n=>this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})))))),this.loadWriteOffStatusesEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.input$),(0,h.w)(([d,n])=>this.data.userWriteOffStatuses({input:n}).pipe((0,g._b)(a=>this.patchState({paging:{limit:n.limit,skip:n.skip,total:a.data.count.total},writeOffStatuses:a.data.items,errors:a.errors,loading:!1}),a=>this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})))))),this.createWriteOffStatusEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.writeOffStatusService.createWriteOffStatus(Object.assign({},d)).pipe((0,g._b)(n=>{this.addNewWriteOffStatus(n),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:n,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},n=>{n.graphQLErrors?(this.toast.error(n.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})):(this.toast.error(n.Message),this.formService.setErrors(n.Data))}))))),this.updateWriteOffStatusEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([d,n])=>this.writeOffStatusService.updateWriteOffStatus(d,d.id).pipe((0,g._b)(a=>{this.updateWriteOffStatus(a),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:a,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.deleteWriteOffStatusEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,F.M)(this.item$),(0,h.w)(([d,n])=>this.data.userDeleteWriteOffStatus({writeOffStatusId:n.id}).pipe((0,g._b)(a=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:a.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},a=>{a.graphQLErrors?(this.toast.error(a.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:a.graphQLErrors?a.graphQLErrors:a})):(this.toast.error(a.Message),this.formService.setErrors(a.Data))}))))),this.importExcelEffect=this.effect(c=>c.pipe((0,C.b)(()=>this.patchState({loading:!0})),(0,h.w)(d=>this.writeOffStatusService.importWriteOffStatuses(d).pipe((0,te.K)(n=>{var a;return this.toast.error(null!==(a=n.Message)&&void 0!==a?a:"Failed to save",{duration:3e3}),k.E}),(0,C.b)(n=>{const a=JSON.parse(n.created),m=JSON.parse(n.updated),p=JSON.parse(n.failed),_=a.length+m.length+p.length;this.addWriteOffStatuses(a),this.updateWriteOffStatuses(m),this.toast.success(`${a.length} created, ${m.length} updated, ${p.length} failed of total ${_}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("writeOffStatusId")?(this.route.snapshot.paramMap.get("writeOffStatusId"),this.setFormName("writeOffStatus_edit")):this.setFormName("writeOffStatus_create")}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.writeOffStatusService.validateWriteOffStatusExcelData(t)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(E.q),e.LFG(A.F0),e.LFG(A.gz),e.LFG(X.F),e.LFG(q.o),e.LFG(mX))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function pX(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close.emit())})("formIsReady",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.writeOffStatus)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let Qm=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"writeOffStatus_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.writeOffStatus=i.item})):t.formName&&t.formName.currentValue&&"writeOffStatus_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadWriteOffStatusEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.writeOffStatus=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Nr),e.Y36(A.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-write-off-status-form"]],inputs:{writeOffStatus:"writeOffStatus",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,pX,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[w.O5,z.M,w.Ov],encapsulation:2}),s})(),Um=(()=>{class s{constructor(){this.autoHeight=!1,this.writeOffStatuses=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[,{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,S.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var r;t.includes(null===(r=i.data)||void 0===r?void 0:r.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-write-off-status-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(N.x,5),2&t){let r;e.iGM(r=e.CRH())&&(i.tableView=r.first)}},inputs:{autoHeight:"autoHeight",writeOffStatuses:"writeOffStatuses"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.writeOffStatuses)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[N.x],encapsulation:2}),s})();function hX(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-write-off-status-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","writeOffStatus_edit")("formControl",t.formControl)("writeOffStatus",t.writeOffStatus)}}const fX=function(){return{}};function _X(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-write-off-status-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","writeOffStatus_create")("formControl",t.formControl)("writeOffStatus",e.DdM(3,fX))}}function gX(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-write-off-status-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(u.ref.close())}),e.qZA()}2&s&&e.Q6J("writeOffStatuses",o.data.items)}let CX=(()=>{class s extends I.fS{constructor(t){super(),this.store=t,this.store.loadWriteOffStatusesEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.writeOffStatuses$.pipe((0,h.w)(i=>(0,T.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Nr))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","writeOffStatus","send","close"],[1,"w-full","h-full","bg-white",3,"writeOffStatuses","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,hX,2,3,"ng-template",null,1,e.W1O),e.YNc(3,_X,1,4,"ng-template",null,2,e.W1O),e.YNc(5,gX,1,1,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",u)("editTemplate",r)("createTemplate",l)("key",i.field.key)}},dependencies:[x.JJ,x.oH,J.$,Qm,Um],encapsulation:2}),s})();function SX(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-write-off-status-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","writeOffStatus_edit")("writeOffStatus",t.value)}}const vX=function(){return{}};function bX(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-write-off-status-form",4),e.NdJ("send",function(r){const u=e.CHM(t).data;return u.onSave(r),e.KtG(u.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","writeOffStatus_create")("writeOffStatus",e.DdM(2,vX))}function TX(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-write-off-status-select-table-view",5),e.NdJ("itemDidSelect",function(r){const u=e.CHM(t).data;return u.itemDidSelect(r),e.KtG(null==u.ref?null:u.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("writeOffStatuses",t.items)}}let yX=(()=>{class s extends Y{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","writeOffStatus","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","writeOffStatuses","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,SX,1,2,"ng-template",null,1,e.W1O),e.YNc(3,bX,1,3,"ng-template",null,2,e.W1O),e.YNc(5,TX,1,2,"ng-template",null,3,e.W1O)),2&t){const r=e.MAs(2),l=e.MAs(4),u=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",u)("editTemplate",r)("createTemplate",l)}},dependencies:[ee,Qm,Um],encapsulation:2}),s})(),wX=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[Nr],imports:[w.ez,R.F,x.UX,V.o,H.u,Q.P,U.t,Z,j.h,K.G,I.X0.forChild({types:[{name:"write-off-status-select",component:CX,wrappers:["form-field"]},{name:"write-off-status-grid",component:yX}]})]}),s})(),xX=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[wX]}),s})();var NX=ae(17196);let AX=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[w.ez,x.u5,x.UX,y_,cp,Dp,kp,fh,Fh,Kh,Zh,gf,Gf,s_,J_,cg,Dg,kg,fC,OC,tS,bS,QS,nv,Av,Hv,pb,Mb,Xb,S0,R0,rT,xT,zT,uy,Py,jy,dw,Iw,Jw,ix,fx,Ox,tN,bN,QN,nA,AA,HA,pF,MF,XF,SD,VD,aI,NI,RI,YI,CP,$P,o1,w1,j1,sW,yW,JW,cM,TM,UM,lE,FE,KE,hO,EO,eL,vL,VL,aG,NG,qG,m3,W3,e$,v$,V$,X$,m2,W2,Y2,uR,PR,BR,gV,IV,ZV,_Q,LQ,iU,TU,UU,lJ,FJ,KJ,nj,Aj,Hj,p6,M6,X6,Sz,Rz,rq,xq,zq,uH,PH,BH,gK,GK,sk,yk,Jk,cZ,DZ,UZ,l4,F4,K4,hB,AB,HB,p5,P5,H5,pY,MY,XY,S7,R7,rX,xX,NX.h,w.ez,x.u5,x.UX]}),s})()}}]);