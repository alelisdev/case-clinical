"use strict";(self.webpackChunkattorney=self.webpackChunkattorney||[]).push([[592],{78858:(O,f,e)=>{e.d(f,{i:()=>n});var _=e(36895),v=e(46277),g=e(94650);let n=(()=>{class l{}return l.\u0275fac=function(S){return new(S||l)},l.\u0275mod=g.oAB({type:l}),l.\u0275inj=g.cJS({providers:[v.h],imports:[_.ez]}),l})()},46277:(O,f,e)=>{e.d(f,{h:()=>P});var _=e(24280),v=e(18505),g=e(63900),n=e(94650),l=e(4523),r=e(71873),S=e(73602),M=e(12282);let P=(()=>{class h extends _.m1{constructor(p,C,L,A){super({query:"",loading:!1,canGoNext:!1}),this.formService=p,this.toast=C,this.data=L,this.fuseConfigService=A,this.loading$=this.select(o=>o.loading),this.formlySetting$=this.select(o=>o.formlySetting),this.canGoNext$=this.select(o=>o.canGoNext,{debounce:!0}),this.vm$=this.select(this.loading$,this.canGoNext$,this.formlySetting$,(o,t,i)=>({loading:o,canGoNext:t,formlySetting:i})),this.loadFormlySettingsEffect=this.effect(o=>o.pipe((0,v.b)(()=>{this.patchState({loading:!0})}),(0,g.w)(()=>this.data.userSettings({input:{name:"formly_Page_Settings"}}).pipe((0,_._b)(t=>{var i,s;const a=null!==(s=null===(i=t.data)||void 0===i?void 0:i.items)&&void 0!==s?s:[];a.length>0&&this.patchState({loading:!1,formlySetting:{id:a[0].id,name:a[0].name,value:{selectLanguage:a[0].value?JSON.parse(a[0].value).language:"",selectDateFormat:a[0].value?JSON.parse(a[0].value).dateFormat:"",selectCurrency:a[0].value?JSON.parse(a[0].value).currency:"",timeFormat:a[0].value?JSON.parse(a[0].value).timeFormat:"",id:a[0].id}}})},()=>{this.patchState({loading:!1})}))))),this.createFormlySettingsEffect=this.effect(o=>o.pipe((0,v.b)(t=>{this.patchState({loading:!0})}),(0,g.w)(t=>{var i,s,a,u;const E={name:"formly_Page_Settings",value:JSON.stringify({language:null!==(i=t?.selectLanguage)&&void 0!==i?i:"en",currency:null!==(s=t?.selectCurrency)&&void 0!==s?s:"$",timeFormat:null!==(a=t?.timeFormat)&&void 0!==a?a:"12",dateFormat:null!==(u=t?.selectDateFomat)&&void 0!==u?u:"MM/DD/YYYY"})};return this.data.userCreateSetting({input:E}).pipe((0,_._b)(c=>{var m,d;const D=null===(m=c.data)||void 0===m?void 0:m.created,y=JSON.parse(null!==(d=D?.value)&&void 0!==d?d:"{}");this.fuseConfigService.setFormlyConfig(y.language,y.currency,y.dateFormat,y.timeFormat),this.toast.success("Successfully created PageSetting",{duration:3e3}),this.patchState({loading:!1,canGoNext:!0})},c=>{c.graphQLErrors?this.toast.error(c.message,{duration:3e3}):(this.toast.error(c.Message,{duration:3e3}),this.formService.setErrors(c.Data),this.patchState({loading:!1}))}))}))),this.updateFormlySettingsEffect=this.effect(o=>o.pipe((0,v.b)(t=>{this.patchState({loading:!0})}),(0,g.w)(t=>{var i,s;const a=JSON.stringify({language:t?.selectLanguage,currency:t?.selectCurrency,dateFormat:t?.selectDateFormat,timeFormat:t?.timeFormat});return console.log({updateData:a}),this.data.userUpdateSetting({settingId:null===(i=this.get().formlySetting)||void 0===i?void 0:i.id,input:{value:a,name:null===(s=this.get().formlySetting)||void 0===s?void 0:s.name}}).pipe((0,_._b)(u=>{var E,c,m;const d=JSON.parse(null!==(m=null===(c=null===(E=u.data)||void 0===E?void 0:E.updated)||void 0===c?void 0:c.value)&&void 0!==m?m:"{}");this.fuseConfigService.setFormlyConfig(d.language,d.currency,d.dateFormat,d.timeFormat),this.toast.success("Successfully updated pageSetting",{duration:3e3}),this.patchState({loading:!1,canGoNext:!0})},u=>{u.graphQLErrors?this.toast.error(u.message,{duration:3e3}):(this.toast.error(u.Message,{duration:3e3}),this.formService.setErrors(u.Data),this.patchState({loading:!1}))}))}))),this.patchState({formlySetting:{}})}}return h.\u0275fac=function(p){return new(p||h)(n.LFG(l.o),n.LFG(r.F),n.LFG(S.q),n.LFG(M.m))},h.\u0275prov=n.Yz7({token:h,factory:h.\u0275fac}),h})()},57267:(O,f,e)=>{e.d(f,{I:()=>l});var _=e(36895),v=e(30144),g=e(19859),n=e(94650);let l=(()=>{class r{}return r.\u0275fac=function(M){return new(M||r)},r.\u0275mod=n.oAB({type:r}),r.\u0275inj=n.cJS({imports:[_.ez,v.Bz,g.t]}),r})()}}]);