"use strict";(self.webpackChunkprovider=self.webpackChunkprovider||[]).push([[777],{71767:(Ft,Be,U)=>{U.d(Be,{T_:()=>ct,nH:()=>k,oI:()=>W});var w=(()=>{return(S=w||(w={})).Success="Success",S.Fail="Fail",S.Unknown="Unknown",w;var S})(),C=U(26177);class ue{constructor(){this.allowExecution=!0,this._validationContext=new C._t,this.actionResult=w.Unknown}get validationContext(){return this._validationContext}execute(){this.processActionPipeline()}processActionPipeline(){this.startAction(),this.allowExecution&&this.processAction(),this.finishAction()}startAction(){this.start(),this.audit(),this.preValidateAction(),this.evaluateRules(),this.postValidateAction(),this.preExecuteAction()}finishAction(){this.postExecuteAction(),this.validateActionResult(),this.finish()}processAction(){this.performAction()}evaluateRules(){this.validateAction().isValid?(this.allowExecution=!0,this.validationContext.state=C.kk.Success):(this.allowExecution=!1,this.validationContext.state=C.kk.Failure)}validateAction(){return this.validationContext}}class Ce{constructor(){this.isSuccess=!1,this.message="",this.messages=new Array,this.timestamp=new Date}}var Y=U(56869),ye=U(39646),se=U(62843);class le{constructor(){this.Errors=new Array}}class A extends le{constructor(){super(),this.IsSuccess=!1}}var oe=(()=>{return(S=oe||(oe={}))[S.Information=1]="Information",S[S.Warning=2]="Warning",S[S.Error=3]="Error",oe;var S})(),ce=U(94650);let W=(()=>{class S{constructor(){this.Messages=new Array}addMessage(h){this.Messages.push(h)}hasErrors(){return!!(this.Messages&&this.Messages.length>0&&this.Messages.filter(b=>b.MessageType===oe.Error).length>0)}isGood(){return!(this.Messages&&this.Messages.length>0&&this.Messages.filter(b=>b.MessageType===oe.Error).length>0)}}return S.\u0275fac=function(h){return new(h||S)},S.\u0275prov=ce.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})();class Je{constructor(f,h,b,O,G=!1){this.MessageType=oe.Information,this.Source="",this.DisplayToUser=!1,this.Name=f,this.Message=h,h&&(this.MessageType=b),O&&(this.Source=O),this.DisplayToUser=G}WithName(f){return this.Name=f,this}WithMessage(f){return this.Message=f,this}WithMessageType(f){return this.MessageType=f,this}WithSource(f){return this.Source=f,this}WithDisplayToUser(f){return this.DisplayToUser=f,this}toString(){return`Name: ${this.Name}; Message: ${this.Message}; MessageType: ${this.MessageType.toString()}; Source: ${this.Source}; DisplayToUser: ${this.DisplayToUser}`}}class ct extends ue{constructor(f){super(),this.serviceContext=new W,this.response=this.createUnknownResponse(),this.actionName=f??""}start(){this.serviceContext.Messages=[]}audit(){var f;null===(f=this.loggingService)||void 0===f||f.log(this.actionName,Y.zb.Information,"Preparing to [audit] action.")}createUnknownResponse(){const f=new Ce;return(0,ye.of)(f)}preExecuteAction(){var f;null===(f=this.loggingService)||void 0===f||f.log(this.actionName,Y.zb.Information,"Preparing to [preExecuteAction] action.")}performAction(){var f;null===(f=this.loggingService)||void 0===f||f.log(this.actionName,Y.zb.Information,`Preparing to perform [${this.actionName}].`)}preValidateAction(){var f;null===(f=this.loggingService)||void 0===f||f.log(this.actionName,Y.zb.Information,`Preparing to preValidateAction [${this.actionName}].`)}finish(){var f;null===(f=this.loggingService)||void 0===f||f.log(this.actionName,Y.zb.Information,"Preparing to [finish] action.")}validateAction(){return this.validationContext.renderRules()}postValidateAction(){var f,h;null===(f=this.loggingService)||void 0===f||f.log(this.actionName,Y.zb.Information,`Preparing to determine if the action contains validation errors in ${this.actionName}`),this.validationContext.hasRuleViolations()&&(null===(h=this.loggingService)||void 0===h||h.log(this.actionName,Y.zb.Information,`The target contains validation errors in ${this.actionName}`),this.validationContext.results.forEach(b=>{b.isValid||(this.publishRuleResult(b),this.retrieveRuleDetails(b))}),this.response=this.createFailResponse())}createFailResponse(f=null){const h=new A;h.IsSuccess=!1,h.Message=f??"Request failed.";const b={};this.serviceContext.Messages.forEach(O=>{O.MessageType===oe.Error&&(b[O.Name]=O.Message)}),h.Data=b,this.response=(0,se._)(h)}postExecuteAction(){this.actionResult===w.Fail&&this.serviceContext.Messages.forEach(f=>{var h;f.MessageType===oe.Error&&(null===(h=this.loggingService)||void 0===h||h.log(this.actionName,Y.zb.Error,f.toString()))})}validateActionResult(){var f,h,b,O;if(null===(f=this.loggingService)||void 0===f||f.log(this.actionName,Y.zb.Information,`Running [validateActionResult] for ${this.actionName}.`),this.validationContext.hasRuleViolations()){null===(h=this.loggingService)||void 0===h||h.log(this.actionName,Y.zb.Error,`The ${this.actionName} contains rule violations.`),this.actionResult=w.Fail;const G=new A;G.IsSuccess=!1,G.Message=null!==(O=null===(b=this.serviceContext.Messages[0])||void 0===b?void 0:b.Message)&&void 0!==O?O:"Validation errors exist";const Se={};this.serviceContext.Messages.forEach(Te=>{Te.MessageType===oe.Error&&(Se[Te.Name]=Te.Message)}),G.Data=Se,this.response=(0,se._)(G)}return this.actionResult=this.serviceContext.isGood()?w.Success:w.Fail,this.actionResult}retrieveRuleDetails(f){if(f.rulePolicy instanceof C.ul){const h=f.rulePolicy;h&&h.hasErrors&&h.results.filter(O=>!O.isValid&&O.rulePolicy&&O.rulePolicy.isDisplayable).forEach(O=>{this.publishRuleResult(O),O.rulePolicy instanceof C.ul&&this.retrieveRuleDetails(O)})}}publishRuleResult(f){var h;const b=new Je(f.rulePolicy.name,f.rulePolicy.message,oe.Error);b.DisplayToUser=f.rulePolicy.isDisplayable,b.Source=this.actionName,this.serviceContext.Messages.push(b),null===(h=this.loggingService)||void 0===h||h.log(this.actionName,Y.zb.Error,`${b.toString()}`)}}var Me=U(70655),qe=U(30144),Ge=U(53098),Tt=U(50727);let je=(()=>{class S{}return S.Information="alert-info",S.Warning="alert-warning",S.Danger="alert-danger",S.Success="alert-success",S})();class B{constructor(f,h,b,O){this.type=je.Information,this.messages=new Array,this.showAlert=!1,O&&(this.type=O),this.header=f,this.title=h,b&&(this.messages=b),this.header&&this.title&&(this.showAlert=!0)}}let De=class{constructor(f,h,b){this.loggingService=h,this.router=b,this.navSubscription=new Tt.w0,this.id=Ge.i.create(),this.subscriptions=[],this.componentName=f,this.alertNotification=new B("",""),this.loggingService.log(this.componentName,Y.zb.Information,`Preparing to load [${this.componentName}] component.`,[`ComponentId:${this.id}`])}subscribe(f){this.subscriptions.push(f)}ngOnDestroy(){this.subscriptions.forEach(f=>{f&&"function"==typeof f.unsubscribe&&f.unsubscribe()})}updateUrls(f){f.urlAfterRedirects&&(this.previousUrl=this.currentUrl,this.currentUrl=f.urlAfterRedirects)}googleAnalyticsSendEvent(f,h,b,O){window.gtag("event",h,{event_category:f,event_label:b,value:O})}createErrorResponse(f){this.loggingService.log(this.componentName,Y.zb.Information,"Preparing to create error response for component.");const h=new A;return h.Message=f,h}handleServiceErrors(f,h){if(this.loggingService.log(this.componentName,Y.zb.Information,"Preparing to handle service errors for component."),h&&h.hasErrors()){this.loggingService.log(this.componentName,Y.zb.Information,"Retrieving error messages from the ServiceContext/ValidationContext;");const b=this.retrieveServiceContextErrorMessages(h);this.alertNotification=new B("Errors",f.Message,b,je.Warning)}else if(f&&f.Message){this.loggingService.log(this.componentName,Y.zb.Information,"Retrieving error messages from the [ErrorResponse].");const b=this.retrieveResponseErrorMessages(f);this.alertNotification=new B("Error",f.Message,b,je.Warning),this.loggingService.log(this.componentName,Y.zb.Error,`Error: ${f.Message}`)}}markFormAsTouched(f){f.markAsTouched({onlySelf:!1}),Object.values(f.controls).forEach(h=>{h.markAsTouched()})}logError(f,h){f instanceof Error?this.loggingService.log(this.componentName,Y.zb.Error,h,[`${f.stack}`]):this.loggingService.log(this.componentName,Y.zb.Error,h)}retrieveServiceContextErrorMessages(f){const h=Array();return f.Messages.forEach(b=>{b.MessageType===oe.Error&&b.DisplayToUser&&h.push(b.Message)}),h}retrieveResponseErrorMessages(f){const h=new Array;return f&&f.Errors&&f.Errors.forEach(b=>{b.DisplayToUser&&h.push(b.Message)}),h}resetAlertNotifications(){this.alertNotification=new B("","")}routeTo(f){try{this.router.navigate([f])}catch(h){this.loggingService.log(this.componentName,Y.zb.Error,`Error while attempting to navigate to [${f}] route from ${this.componentName}. Error: ${h.message.toString()}`)}}showResponseErrors(f){this.handleServiceErrors(f,void 0)}finishRequest(f){this.loggingService.log(this.componentName,Y.zb.Information,`${this.componentName}: ${f}`)}showAlertMessage(f){alert(f)}};De=(0,Me.gn)([(0,ce.tBr)({}),(0,Me.w6)("design:paramtypes",[String,Y.ed,qe.F0])],De);let k=class{constructor(f,h,b){this.serviceName=f,this.loggingService=h,this.serviceContext=b,this.accessToken="",this.id=Ge.i.create().toString(),this.subscriptions=[],this.loggingService.log(this.serviceName,Y.zb.Information,`Initializing ${this.serviceName} at ${Date.now()} with id: ${this.id}`)}extractData(f){return f.json()||{}}handleUnexpectedError(f){const h=new Je(f.name,f.message).WithDisplayToUser(!1).WithMessageType(oe.Error).WithSource(this.serviceName),b=[`${this.serviceName}`],O=`${h.toString()}; ${f.stack}`;this.loggingService.log(this.serviceName,Y.zb.Error,O,b),this.serviceContext.addMessage(h)}handleError(f){const h=new Je(f.name,f.message).WithDisplayToUser(!1).WithMessageType(oe.Error).WithSource(this.serviceName),b=[`${this.serviceName}`];this.loggingService.log(this.serviceName,Y.zb.Error,h.toString(),b),this.serviceContext.addMessage(h)}createErrorResponse(f){const h=new A;return h.Message=f,h}createAPIResponse(f,h,b=!0){const O={id:Ge.i.create().toString(),isSuccess:b,data:h,message:f,messages:[],timestamp:new Date};return(0,ye.of)(O)}finishRequest(f){this.loggingService.log(this.serviceName,Y.zb.Information,`Request for [${f}] by ${this.serviceName} is complete.`),this.serviceContext.hasErrors()&&(this.loggingService.log(this.serviceName,Y.zb.Information,"Preparing to write any messages."),this.serviceContext.Messages.filter(h=>h.MessageType===oe.Error&&h.DisplayToUser).forEach(h=>this.loggingService.log(this.serviceName,Y.zb.Error,h.toString())))}logError(f,h){this.loggingService.log(this.serviceName,Y.zb.Error,`${h}; Error: ${f.message}`)}ngOnDestroy(){this.unsubscribeAllSubscriptions()}resetServiceContext(){this.loggingService.log(this.serviceName,Y.zb.Information,"Preparing to reset the Messages of the current [ServiceContext]."),this.serviceContext&&this.serviceContext.Messages?this.serviceContext.Messages.length>0?(this.loggingService.log(this.serviceName,Y.zb.Information,"Resetting the Messages of the current [ServiceContext]."),this.serviceContext.Messages=new Array):this.loggingService.log(this.serviceName,Y.zb.Information,"The current [ServiceContext] does not contain any [Messages]."):this.loggingService.log(this.serviceName,Y.zb.Warning,"The current [ServiceContext] is not valid."),this.loggingService.log(this.serviceName,Y.zb.Information,"Finished  processing request to [reset] the Messages of the current [ServiceContext].")}subscribe(f){this.subscriptions.push(f)}unsubscribeAllSubscriptions(){this.subscriptions.forEach(f=>{f&&"function"==typeof f.unsubscribe&&f.unsubscribe()})}writeMessages(){this.serviceContext&&this.serviceContext.Messages&&this.serviceContext.Messages.forEach(f=>{f.MessageType===oe.Error&&f.DisplayToUser&&this.loggingService.log(this.serviceName,Y.zb.Error,f.toString())})}};k=(0,Me.gn)([(0,ce.tBr)({}),(0,Me.fM)(1,(0,ce.tBr)(Y.ed)),(0,Me.w6)("design:paramtypes",[String,Object,W])],k)},56869:(Ft,Be,U)=>{U.d(Be,{ed:()=>A,zb:()=>ye}),U(26177);var ue=U(53098),Ce=U(4707);class Y{constructor(t,r,n,a,o){this.application=t,this.source=r,this.severity=n,this.message=a,this.timestamp=new Date(Date.now()),this.tags=o}}var ye=(()=>{return(e=ye||(ye={})).Information="Information",e.Warning="Warning",e.Error="Error",e.Critical="Critical",e.Debug="Debug",ye;var e})(),se=U(94650);let le=(()=>{class e{constructor(){this.isProduction=!1}}return e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=se.Yz7({token:e,factory:e.\u0275fac}),e})(),A=(()=>{class e{constructor(r){this.loggingConfig=r,this.serviceName="LoggingService",this.timestamp=new Date,this.id=ue.i.create(),this.logEntriesSubject=new Ce.t(1),this.logEntries$=this.logEntriesSubject.asObservable(),this.log(this.serviceName,ye.Information,`Starting logging service [${this.id.toString()}] at: ${this.timestamp}`),this.initializeService(r)}initializeService(r){r&&(this.isProduction=this.loggingConfig.isProduction,this.applicationName=this.loggingConfig.applicationName?this.loggingConfig.applicationName:"Angular")}handleSettings(r){if(!r)throw new Error("The logging service configuration is not valid. Cannot initialize - you can do better, really.")}log(r,n,a,o){this.source=this.applicationName!==r?`${this.applicationName}.${r}`:this.applicationName,this.severity=n,this.message=a,this.timestamp=new Date,o?o.push(`LoggerId:${this.id.toString()}`):o=[`LoggerId:${this.id.toString()}`];const s=new Y(this.applicationName,this.source,this.severity,this.message,o);this.logEntriesSubject.next(s)}}return e.\u0275fac=function(r){return new(r||e)(se.LFG(le,8))},e.\u0275prov=se.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var ce={log:"log",debug:"debug",info:"info",warn:"warn",error:"error"},W=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];Object.prototype.hasOwnProperty.call(ce,e)||(e=ce.log),W[e].apply(W,t)};function Je(e,t){return function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];try{return e.apply(void 0,r)}catch(a){W.error(t,a)}}}W.debug=console.debug.bind(console),W.log=console.log.bind(console),W.info=console.info.bind(console),W.warn=console.warn.bind(console),W.error=console.error.bind(console);var We,ct=function(e,t,r){if(r||2===arguments.length)for(var o,n=0,a=t.length;n<a;n++)(o||!(n in t))&&(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return e.concat(o||Array.prototype.slice.call(t))},Me=!1;function Ge(e){Me=e}function je(e,t,r){var n=r.value;r.value=function(){for(var a=[],o=0;o<arguments.length;o++)a[o]=arguments[o];return(We?B(n):n).apply(this,a)}}function B(e){return function(){return De(e,this,arguments)}}function De(e,t,r){try{return e.apply(t,r)}catch(n){if(k(ce.error,n),We)try{We(n)}catch(a){k(ce.error,a)}}}function k(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];Me&&W.apply(void 0,ct([e,"[MONITOR]"],t,!1))}function J(e,t){return-1!==e.indexOf(t)}function S(e){if(Array.from)return Array.from(e);var t=[];if(e instanceof Set)e.forEach(function(n){return t.push(n)});else for(var r=0;r<e.length;r++)t.push(e[r]);return t}function f(e,t){for(var r=0;r<e.length;r+=1){var n=e[r];if(t(n,r))return n}}function O(e){return Object.keys(e).map(function(t){return e[t]})}function G(e){return Object.keys(e).map(function(t){return[t,e[t]]})}function Se(e,t){return e.slice(0,t.length)===t}function Ne(e){return window.CSS&&window.CSS.escape?window.CSS.escape(e):e.replace(/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g,function(t,r){return r?"\0"===t?"\ufffd":"".concat(t.slice(0,-1),"\\").concat(t.charCodeAt(t.length-1).toString(16)," "):"\\".concat(t)})}function K(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return t.forEach(function(n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}),e}function Q(e){var t=K({version:"4.39.0",onReady:function(r){r()}},e);return Object.defineProperty(t,"_setDebug",{get:function(){return Ge},enumerable:!1}),t}function me(e,t,r){var n=e[t];e[t]=r,n&&n.q&&n.q.forEach(function(a){return Je(a,"onReady callback threw an error:")()})}function X(){if("object"==typeof globalThis)return globalThis;Object.defineProperty(Object.prototype,"_dd_temp_",{get:function(){return this},configurable:!0});var e=_dd_temp_;return delete Object.prototype._dd_temp_,"object"!=typeof e&&(e="object"==typeof self?self:"object"==typeof window?window:{}),e}var H=(()=>{return(e=H||(H={})).PAGEHIDE="pagehide",e.FEATURE_FLAGS="feature_flags",e.RESOURCE_PAGE_STATES="resource_page_states",e.CLICKMAP="clickmap",e.COLLECT_FLUSH_REASON="collect_flush_reason",e.SANITIZE_INPUTS="sanitize_inputs",H;var e})(),P=new Set;function re(e){return P.has(e)}var y=1024,M=1024*y,j=/[^\u0000-\u007F]/;function ie(e){return j.test(e)?void 0!==window.TextEncoder?(new TextEncoder).encode(e).length:new Blob([e]).size:e.length}function fe(e,t){var n,r=X();return r.Zone&&"function"==typeof r.Zone.__symbol__&&(n=e[r.Zone.__symbol__(t)]),n||(n=e[t]),n}function xe(e,t){return fe(X(),"setTimeout")(B(e),t)}function Pe(e){fe(X(),"clearTimeout")(e)}function it(e,t){return fe(window,"setInterval")(B(e),t)}function br(e){fe(window,"clearInterval")(e)}function Ct(e,t,r){var s,u,n=!r||void 0===r.leading||r.leading,a=!r||void 0===r.trailing||r.trailing,o=!1;return{throttled:function(){for(var c=[],v=0;v<arguments.length;v++)c[v]=arguments[v];o?s=c:(n?e.apply(void 0,c):s=c,o=!0,u=xe(function(){a&&s&&e.apply(void 0,s),o=!1,s=void 0},t))},cancel:function(){Pe(u),o=!1,s=void 0}}}function Oe(){}function Wt(e){return null===e?"null":Array.isArray(e)?"array":typeof e}function Sr(e,t,r){if(void 0===r&&(r=function cn(){if(typeof WeakSet<"u"){var e=new WeakSet;return{hasAlreadyBeenSeen:function(r){var n=e.has(r);return n||e.add(r),n}}}var t=[];return{hasAlreadyBeenSeen:function(r){var n=t.indexOf(r)>=0;return n||t.push(r),n}}}()),void 0===t)return e;if("object"!=typeof t||null===t)return t;if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp){var n=t.flags||[t.global?"g":"",t.ignoreCase?"i":"",t.multiline?"m":"",t.sticky?"y":"",t.unicode?"u":""].join("");return new RegExp(t.source,n)}if(!r.hasAlreadyBeenSeen(t)){if(Array.isArray(t)){for(var a=Array.isArray(e)?e:[],o=0;o<t.length;++o)a[o]=Sr(a[o],t[o],r);return a}var s="object"===Wt(e)?e:{};for(var u in t)Object.prototype.hasOwnProperty.call(t,u)&&(s[u]=Sr(s[u],t[u],r));return s}}function dt(e){return Sr(void 0,e)}function Qe(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var r,n=0,a=e;n<a.length;n++){var o=a[n];null!=o&&(r=Sr(r,o))}return r}function Pt(e,t,r){if("object"!=typeof e||null===e)return JSON.stringify(e);var n=Gt(Object.prototype),a=Gt(Array.prototype),o=Gt(Object.getPrototypeOf(e)),s=Gt(e);try{return JSON.stringify(e,t,r)}catch{return"<error: unable to serialize object>"}finally{n(),a(),o(),s()}}function Gt(e){var t=e,r=t.toJSON;return r?(delete t.toJSON,function(){t.toJSON=r}):Oe}var ne=220*y,ke="$",yr=3;function $e(e,t){var r;void 0===t&&(t=ne);var n=Gt(Object.prototype),a=Gt(Array.prototype),o=[],s=new WeakMap,u=Zn(e,ke,void 0,o,s),c=(null===(r=JSON.stringify(u))||void 0===r?void 0:r.length)||0;if(!(c>t)){for(;o.length>0&&c<t;){var v=o.shift(),g=0;if(Array.isArray(v.source))for(var _=0;_<v.source.length;_++){if(c+=void 0!==(E=Zn(v.source[_],v.path,_,o,s))?JSON.stringify(E).length:4,c+=g,g=1,c>t){Kn(t,"truncated",e);break}v.target[_]=E}else for(var _ in v.source)if(Object.prototype.hasOwnProperty.call(v.source,_)){var E;if(void 0!==(E=Zn(v.source[_],v.path,_,o,s))&&(c+=JSON.stringify(E).length+g+_.length+yr,g=1),c>t){Kn(t,"truncated",e);break}v.target[_]=E}}return n(),a(),u}Kn(t,"discarded",e)}function Zn(e,t,r,n,a){var o=function tu(e){var t=e;if(t&&"function"==typeof t.toJSON)try{return t.toJSON()}catch{}return e}(e);if(!o||"object"!=typeof o)return function Qs(e){return"bigint"==typeof e?"[BigInt] ".concat(e.toString()):"function"==typeof e?"[Function] ".concat(e.name||"unknown"):"symbol"==typeof e?"[Symbol] ".concat(e.description||e.toString()):e}(o);var s=function eu(e){try{if(e instanceof Event)return{isTrusted:e.isTrusted};var r=Object.prototype.toString.call(e).match(/\[object (.*)\]/);if(r&&r[1])return"[".concat(r[1],"]")}catch{}return"[Unserializable]"}(o);if("[Object]"!==s&&"[Array]"!==s)return s;var u=e;if(a.has(u))return"[Reference seen at ".concat(a.get(u),"]");var c=void 0!==r?"".concat(t,".").concat(r):t,v=Array.isArray(o)?[]:{};return a.set(u,c),n.push({source:o,target:v,path:c}),v}function Kn(e,t,r){W.warn("The data provided has been ".concat(t," as it is over the limit of ").concat(e," characters:"),r)}var ta=3*y;function ra(e,t){return e>ta&&(W.warn("The ".concat(t," data is over ").concat(ta/y,"KiB. On low connectivity, the SDK has the potential to exhaust the user's upload bandwidth.")),!0)}var ru=200;function Lr(e,t){void 0===t&&(t=ie);var n,r={},a=!1,o=Ct(function(s){n=t(Pt(s)),a||(a=ra(n,e))},ru).throttled;return{getBytesCount:function(){return n},get:function(){return r},add:function(s,u){r[s]=u,o(r)},remove:function(s){delete r[s],o(r)},set:function(s){o(r=s)},getContext:function(){return dt(r)},setContext:function(s){r=re(H.SANITIZE_INPUTS)?$e(s):dt(s),o(r)},setContextProperty:function(s,u){r[s]=re(H.SANITIZE_INPUTS)?$e(u):dt(u),o(r)},removeContextProperty:function(s){delete r[s],o(r)},clearContext:function(){r={},n=0}}}var jn=function(){function e(){this.buffer=[]}return e.prototype.add=function(t){this.buffer.push(t)>500&&this.buffer.splice(0,1)},e.prototype.drain=function(){this.buffer.forEach(function(t){return t()}),this.buffer.length=0},e}();function nr(e){return 0!==e&&100*Math.random()<=e}function na(e,t){return+e.toFixed(t)}function wr(e){return Er(e)&&e>=0&&e<=100}function Er(e){return"number"==typeof e}var dn,ft=1e3,ht=60*ft,ia=60*ht,au=24*ia*365;function $n(e){return{relative:e,timeStamp:ou(e)}}function ou(e){var t=xt()-performance.now();return t>Mr()?Math.round(ir(t,e)):function uu(e){return Math.round(ir(Mr(),e))}(e)}function Fe(e){return Er(e)?na(1e6*e,0):e}function xt(){return(new Date).getTime()}function Le(){return xt()}function gt(){return performance.now()}function et(){return{relative:gt(),timeStamp:Le()}}function aa(){return{relative:0,timeStamp:Mr()}}function at(e,t){return t-e}function ir(e,t){return e+t}function Yn(e){return e-Mr()}function Mr(){return void 0===dn&&(dn=performance.timing.navigationStart),dn}function Dr(){var e=function cu(){return X().DatadogEventBridge}();if(e)return{getAllowedWebViewHosts:function(){return JSON.parse(e.getAllowedWebViewHosts())},send:function(t,r){e.send(JSON.stringify({eventType:t,event:r}))}}}function Rt(e){var t;void 0===e&&(e=null===(t=X().location)||void 0===t?void 0:t.hostname);var r=Dr();return!!r&&r.getAllowedWebViewHosts().some(function(n){return e===n||function Te(e,t){return e.slice(-t.length)===t}(e,".".concat(n))})}function fn(e){var t=K({},e);return["id","name","email"].forEach(function(n){n in t&&(t[n]=String(t[n]))}),t}function oa(e){var t="object"===Wt(e);return t||W.error("Unsupported user:",e),t}function ot(e){return e?(parseInt(e,10)^16*Math.random()>>parseInt(e,10)/4).toString(16):"".concat(1e7,"-").concat(1e3,"-").concat(4e3,"-").concat(8e3,"-").concat(1e11).replace(/[018]/g,ot)}function Xn(e,t){var n=new RegExp("(?:^|;)\\s*".concat(t,"\\s*=\\s*([^;]+)")).exec(e);return n?n[1]:void 0}function sa(e,t,r){void 0===r&&(r="");var n=e.charCodeAt(t-1),o=n>=55296&&n<=56319?t+1:t;return e.length<=o?e:"".concat(e.slice(0,o)).concat(r)}var qn,ua=ft;function hn(e,t,r,n){var a=new Date;a.setTime(a.getTime()+r);var o="expires=".concat(a.toUTCString()),s=n&&n.crossSite?"none":"strict",u=n&&n.domain?";domain=".concat(n.domain):"",c=n&&n.secure?";secure":"";document.cookie="".concat(e,"=").concat(t,";").concat(o,";path=/;samesite=").concat(s).concat(u).concat(c)}function It(e){return Xn(document.cookie,e)}function Jn(e,t){hn(e,"",0,t)}function la(e){if(void 0===document.cookie||null===document.cookie)return!1;try{var t="dd_cookie_test_".concat(ot()),r="test";hn(t,r,ht,e);var n=It(t)===r;return Jn(t,e),n}catch(a){return W.error(a),!1}}function Fr(e){return K({},e)}function ca(e,t){return Object.keys(e).some(function(r){return e[r]===t})}function At(e){return 0===Object.keys(e).length}function vn(e){return ar(e,function gu(){return fa(window.location)}()).href}function pn(e){return fa(ar(e))}function ar(e,t){var r=function pu(){if(void 0===gn)try{var e=new da("http://test/path");gn="http://test/path"===e.href}catch{gn=!1}return gn?da:void 0}();if(r)try{return void 0!==t?new r(e,t):new r(e)}catch(s){throw new Error("Failed to construct URL: ".concat(String(s)," ").concat(Pt({url:e,base:t})))}if(void 0===t&&!/:/.test(e))throw new Error("Invalid URL: '".concat(e,"'"));var n=document,a=n.createElement("a");if(void 0!==t){var o=(n=document.implementation.createHTMLDocument("")).createElement("base");o.href=t,n.head.appendChild(o),n.body.appendChild(a)}return a.href=e,a}var gn,da=URL;function fa(e){if(e.origin)return e.origin;var t=e.host.replace(/(:80|:443)$/,"");return"".concat(e.protocol,"//").concat(t)}var ha="datad0g.com",Tr="datadoghq.com",mu="datadoghq.eu",_u="ap1.datadoghq.com",Su={logs:"logs",rum:"rum",sessionReplay:"session-replay"},yu={logs:"logs",rum:"rum",sessionReplay:"replay"};function Ur(e,t,r){var n=function wu(e,t){var r="/api/v2/".concat(yu[t]),n=e.proxy,a=e.proxyUrl;if(n){var o=vn(n);return function(c){return"".concat(o,"?ddforward=").concat(encodeURIComponent("".concat(r,"?").concat(c)))}}var s=function Eu(e,t){var r=e.site,n=void 0===r?Tr:r,a=e.internalAnalyticsSubdomain;if(a&&n===Tr)return"".concat(a,".").concat(Tr);var o=n.split("."),s=o.pop(),u=n!==_u?"".concat(Su[t],"."):"";return"".concat(u,"browser-intake-").concat(o.join("-"),".").concat(s)}(e,t);if(void 0===n&&a){var u=vn(a);return function(c){return"".concat(u,"?ddforward=").concat(encodeURIComponent("https://".concat(s).concat(r,"?").concat(c)))}}return function(c){return"https://".concat(s).concat(r,"?").concat(c)}}(e,t);return{build:function(a,o,s){var u=function Tu(e,t,r,n,a,o){var s=e.clientToken,u=e.internalAnalyticsSubdomain,c=["sdk_version:".concat("4.39.0"),"api:".concat(n)].concat(r);a&&re(H.COLLECT_FLUSH_REASON)&&c.push("flush_reason:".concat(a)),o&&c.push("retry_count:".concat(o.count),"retry_after:".concat(o.lastFailureStatus));var v=["ddsource=browser","ddtags=".concat(encodeURIComponent(c.join(","))),"dd-api-key=".concat(s),"dd-evp-origin-version=".concat(encodeURIComponent("4.39.0")),"dd-evp-origin=browser","dd-request-id=".concat(ot())];return"rum"===t&&v.push("batch_time=".concat(Le())),u&&v.reverse(),v.join("&")}(e,t,r,a,o,s);return n(u)},urlPrefix:n(""),endpointType:t}}var Cu=200,Ru=/[^a-z0-9_:./-]/;function mn(e,t){(t.length>Cu-e.length-1||Ru.test(t))&&W.warn("".concat(e," value doesn't meet tag requirements and will be sanitized"));var n=t.replace(/,/g,"_");return"".concat(e,":").concat(n)}var Pr={ALLOW:"allow",MASK:"mask",MASK_USER_INPUT:"mask-user-input"};function va(e){var t,r,n;if(e&&e.clientToken){var a=null!==(t=e.sessionSampleRate)&&void 0!==t?t:e.sampleRate;if(void 0===a||wr(a))if(void 0===e.telemetrySampleRate||wr(e.telemetrySampleRate)){if(void 0===e.telemetryConfigurationSampleRate||wr(e.telemetryConfigurationSampleRate))return Array.isArray(e.enableExperimentalFeatures)&&function Z(e){e.forEach(function(t){P.add(t)})}(e.enableExperimentalFeatures.filter(function(o){return ca(H,o)})),K({beforeSend:e.beforeSend&&Je(e.beforeSend,"beforeSend threw an error:"),cookieOptions:pa(e),sessionSampleRate:a??100,telemetrySampleRate:null!==(r=e.telemetrySampleRate)&&void 0!==r?r:20,telemetryConfigurationSampleRate:null!==(n=e.telemetryConfigurationSampleRate)&&void 0!==n?n:5,service:e.service,silentMultipleInit:!!e.silentMultipleInit,batchBytesLimit:16*y,eventRateLimiterThreshold:3e3,maxTelemetryEventsPerPage:15,flushTimeout:30*ft,batchMessagesLimit:50,messageBytesLimit:256*y},function Iu(e){var t=function xu(e){var t=e.env,r=e.service,n=e.version,a=e.datacenter,o=[];return t&&o.push(mn("env",t)),r&&o.push(mn("service",r)),n&&o.push(mn("version",n)),a&&o.push(mn("datacenter",a)),o}(e),r=function Au(e,t){return{logsEndpointBuilder:Ur(e,"logs",t),rumEndpointBuilder:Ur(e,"rum",t),sessionReplayEndpointBuilder:Ur(e,"sessionReplay",t)}}(e,t),n=O(r).map(function(o){return o.urlPrefix}),a=function Nu(e,t,r){if(e.replica){var n=K({},e,{site:Tr,clientToken:e.replica.clientToken}),a={logsEndpointBuilder:Ur(n,"logs",r),rumEndpointBuilder:Ur(n,"rum",r)};return t.push.apply(t,O(a).map(function(o){return o.urlPrefix})),K({applicationId:e.replica.applicationId},a)}}(e,n,t);return K({isIntakeUrl:function(o){return n.some(function(s){return 0===o.indexOf(s)})},replica:a,site:e.site||Tr},r)}(e));W.error("Telemetry Configuration Sample Rate should be a number between 0 and 100")}else W.error("Telemetry Sample Rate should be a number between 0 and 100");else W.error("Session Sample Rate should be a number between 0 and 100")}else W.error("Client Token is not configured, we will not send any data.")}function pa(e){var t={};return t.secure=function Ou(e){return!!e.useSecureSessionCookie||!!e.useCrossSiteSessionCookie}(e),t.crossSite=!!e.useCrossSiteSessionCookie,e.trackSessionAcrossSubdomains&&(t.domain=function du(){if(void 0===qn){for(var e="dd_site_test_".concat(ot()),r=window.location.hostname.split("."),n=r.pop();r.length&&!It(e);)n="".concat(r.pop(),".").concat(n),hn(e,"test",ft,{domain:n});Jn(e,{domain:n}),qn=n}return qn}()),t}function ga(e){var t,r,n=null!==(t=e.proxy)&&void 0!==t?t:e.proxyUrl;return{session_sample_rate:null!==(r=e.sessionSampleRate)&&void 0!==r?r:e.sampleRate,telemetry_sample_rate:e.telemetrySampleRate,telemetry_configuration_sample_rate:e.telemetryConfigurationSampleRate,use_before_send:!!e.beforeSend,use_cross_site_session_cookie:e.useCrossSiteSessionCookie,use_secure_session_cookie:e.useSecureSessionCookie,use_proxy:void 0!==n?!!n:void 0,silent_multiple_init:e.silentMultipleInit,track_session_across_subdomains:e.trackSessionAcrossSubdomains,track_resources:e.trackResources,track_long_task:e.trackLongTasks}}var Vr="?";function Nt(e){var t=[],r=Qn(e,"stack"),n=String(e);return r&&Se(r,n)&&(r=r.slice(n.length)),r&&r.split("\n").forEach(function(a){var o=function Mu(e){var t=ku.exec(e);if(t){var r=t[2]&&0===t[2].indexOf("native"),n=t[2]&&0===t[2].indexOf("eval"),a=Lu.exec(t[2]);return n&&a&&(t[2]=a[1],t[3]=a[2],t[4]=a[3]),{args:r?[t[2]]:[],column:t[4]?+t[4]:void 0,func:t[1]||Vr,line:t[3]?+t[3]:void 0,url:r?void 0:t[2]}}}(a)||function Fu(e){var t=Du.exec(e);if(t)return{args:[],column:t[3]?+t[3]:void 0,func:Vr,line:t[2]?+t[2]:void 0,url:t[1]}}(a)||function Pu(e){var t=Uu.exec(e);if(t)return{args:[],column:t[4]?+t[4]:void 0,func:t[1]||Vr,line:+t[3],url:t[2]}}(a)||function zu(e){var t=Vu.exec(e);if(t){var r=t[3]&&t[3].indexOf(" > eval")>-1,n=Bu.exec(t[3]);return r&&n&&(t[3]=n[1],t[4]=n[2],t[5]=void 0),{args:t[2]?t[2].split(","):[],column:t[5]?+t[5]:void 0,func:t[1]||Vr,line:t[4]?+t[4]:void 0,url:t[3]}}}(a);o&&(!o.func&&o.line&&(o.func=Vr),t.push(o))}),{message:Qn(e,"message"),name:Qn(e,"name"),stack:t}}var ma="((?:file|https?|blob|chrome-extension|native|eval|webpack|snippet|<anonymous>|\\w+\\.|\\/).*?)",Cr="(?::(\\d+))",ku=new RegExp("^\\s*at (.*?) ?\\(".concat(ma).concat(Cr,"?").concat(Cr,"?\\)?\\s*$"),"i"),Lu=new RegExp("\\((\\S*)".concat(Cr).concat(Cr,"\\)")),Du=new RegExp("^\\s*at ?".concat(ma).concat(Cr,"?").concat(Cr,"??\\s*$"),"i"),Uu=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,Vu=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)((?:file|https?|blob|chrome|webpack|resource|capacitor|\[native).*?|[^@]*bundle)(?::(\d+))?(?::(\d+))?\s*$/i,Bu=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i;function Qn(e,t){if("object"==typeof e&&e&&t in e){var r=e[t];return"string"==typeof r?r:void 0}}var _a="Provided",Ue={AGENT:"agent",CONSOLE:"console",CUSTOM:"custom",LOGGER:"logger",NETWORK:"network",SOURCE:"source",REPORT:"report"};function ei(e){var t=e.stackTrace,r=e.originalError,n=e.handlingStack,a=e.startClocks,o=e.nonErrorPrefix,s=e.source,u=e.handling;if(!t||void 0===t.message&&!(r instanceof Error)){var c=re(H.SANITIZE_INPUTS)?$e(r):r;return{startClocks:a,source:s,handling:u,originalError:c,message:"".concat(o," ").concat(Pt(c)),stack:"No stack, consider using an instance of Error",handlingStack:n,type:t&&t.name}}return{startClocks:a,source:s,handling:u,originalError:r,message:t.message||"Empty message",stack:or(t),handlingStack:n,type:t.name,causes:Wu(r,s)}}function or(e){var t=ba(e);return e.stack.forEach(function(r){var n="?"===r.func?"<anonymous>":r.func,a=r.args&&r.args.length>0?"(".concat(r.args.join(", "),")"):"",o=r.line?":".concat(r.line):"",s=r.line&&r.column?":".concat(r.column):"";t+="\n  at ".concat(n).concat(a," @ ").concat(r.url).concat(o).concat(s)}),t}function ba(e){return"".concat(e.name||"Error",": ").concat(e.message)}function Sa(){var r,t=new Error;if(!t.stack)try{throw t}catch{}return De(function(){var n=Nt(t);n.stack=n.stack.slice(2),r=or(n)}),r}function Wu(e,t){for(var r=e,n=[];r?.cause instanceof Error&&n.length<10;){var a=Nt(r.cause);n.push({message:r.cause.message,source:t,type:a?.name,stack:a&&or(a)}),r=r.cause}return n.length?n:void 0}var ze=function(){function e(t){this.onFirstSubscribe=t,this.observers=[]}return e.prototype.subscribe=function(t){var r=this;return!this.observers.length&&this.onFirstSubscribe&&(this.onLastUnsubscribe=this.onFirstSubscribe()||void 0),this.observers.push(t),{unsubscribe:function(){r.observers=r.observers.filter(function(n){return t!==n}),!r.observers.length&&r.onLastUnsubscribe&&r.onLastUnsubscribe()}}},e.prototype.notify=function(t){this.observers.forEach(function(r){return r(t)})},e}();function ya(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=new ze(function(){var n=e.map(function(a){return a.subscribe(function(o){return r.notify(o)})});return function(){return n.forEach(function(a){return a.unsubscribe()})}});return r}function Ve(e,t,r,n){return tt(e,[t],r,n)}function tt(e,t,r,n){var a=void 0===n?{}:n,s=a.capture,u=a.passive,c=B(a.once?function(E){_(),r(E)}:r),v=u?{capture:s,passive:u}:s,g=fe(e,"addEventListener");function _(){var E=fe(e,"removeEventListener");t.forEach(function(T){return E.call(e,T,c,v)})}return t.forEach(function(E){return g.call(e,E,c,v)}),{stop:_}}var Ot={intervention:"intervention",deprecation:"deprecation",cspViolation:"csp_violation"};function wa(e){var t=[];J(e,Ot.cspViolation)&&t.push(function Zu(){var e=new ze(function(){var t=Ve(document,"securitypolicyviolation",function(r){e.notify(function ju(e){var t=Ot.cspViolation,r="'".concat(e.blockedURI,"' blocked by '").concat(e.effectiveDirective,"' directive");return{type:Ot.cspViolation,subtype:e.effectiveDirective,message:"".concat(t,": ").concat(r),stack:Ea(e.effectiveDirective,e.originalPolicy?"".concat(r,' of the policy "').concat(sa(e.originalPolicy,100,"..."),'"'):"no policy",e.sourceFile,e.lineNumber,e.columnNumber)}}(r))}).stop;return t});return e}());var r=e.filter(function(n){return n!==Ot.cspViolation});return r.length&&t.push(function Gu(e){var t=new ze(function(){if(window.ReportingObserver){var r=B(function(a){return a.forEach(function(o){t.notify(function Ku(e){var t=e.type,r=e.body;return{type:t,subtype:r.id,message:"".concat(t,": ").concat(r.message),stack:Ea(r.id,r.message,r.sourceFile,r.lineNumber,r.columnNumber)}}(o))})}),n=new window.ReportingObserver(r,{types:e,buffered:!0});return n.observe(),function(){n.disconnect()}}});return t}(r)),ya.apply(void 0,t)}function Ea(e,t,r,n,a){return r&&or({name:e,message:t,stack:[{func:"?",url:r,line:n,column:a}]})}var Yu=32*y;function Ta(e,t,r){return void 0===e?[]:"all"===e||Array.isArray(e)&&e.every(function(n){return J(t,n)})?"all"===e?t:function $u(e){var t=new Set;return e.forEach(function(r){return t.add(r)}),S(t)}(e):void W.error("".concat(r,' should be "all" or an array with allowed values "').concat(t.join('", "'),'"'))}var Ae={debug:"debug",error:"error",info:"info",warn:"warn"},ti={console:"console",http:"http",silent:"silent"},Qu=Object.keys(Ae),Ca=function(){function e(t,r,n,a,o){void 0===n&&(n=ti.http),void 0===a&&(a=Ae.debug),void 0===o&&(o={}),this.handleLogStrategy=t,this.handlerType=n,this.level=a,this.contextManager=Lr("logger context"),this.contextManager.set(K({},o,r?{logger:{name:r}}:void 0))}return e.prototype.log=function(t,r,n,a){var o;if(void 0===n&&(n=Ae.info),n===Ae.error&&(o={origin:Ue.LOGGER}),null!=a){var u=ei({stackTrace:a instanceof Error?Nt(a):void 0,originalError:a,nonErrorPrefix:_a,source:Ue.LOGGER,handling:"handled",startClocks:et()});o={origin:Ue.LOGGER,stack:u.stack,kind:u.type,message:u.message}}var c=re(H.SANITIZE_INPUTS)?$e(r):dt(r),v=o?Qe({error:o},c):c;this.handleLogStrategy({message:re(H.SANITIZE_INPUTS)?$e(t):t,context:v,status:n},this)},e.prototype.debug=function(t,r,n){this.log(t,r,Ae.debug,n)},e.prototype.info=function(t,r,n){this.log(t,r,Ae.info,n)},e.prototype.warn=function(t,r,n){this.log(t,r,Ae.warn,n)},e.prototype.error=function(t,r,n){this.log(t,r,Ae.error,n)},e.prototype.setContext=function(t){this.contextManager.set(t)},e.prototype.getContext=function(){return this.contextManager.get()},e.prototype.addContext=function(t,r){this.contextManager.add(t,r)},e.prototype.removeContext=function(t){this.contextManager.remove(t)},e.prototype.setHandler=function(t){this.handlerType=t},e.prototype.getHandler=function(){return this.handlerType},e.prototype.setLevel=function(t){this.level=t},e.prototype.getLevel=function(){return this.level},function(e,t,r,n){var s,a=arguments.length,o=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var u=e.length-1;u>=0;u--)(s=e[u])&&(o=(a<3?s(o):a>3?s(t,r,o):s(t,r))||o);a>3&&o&&Object.defineProperty(t,r,o)}([je],e.prototype,"log",null),e}();function Br(e,t){var r=window.__ddBrowserSdkExtensionCallback;r&&r({type:e,payload:t})}var sr={HIDDEN:"visibility_hidden",UNLOADING:"before_unload",PAGEHIDE:"page_hide",FROZEN:"page_frozen"};function xa(){var e=new ze(function(){var t=re(H.PAGEHIDE),r=tt(window,["visibilitychange","freeze","pagehide"],function(a){"pagehide"===a.type&&t?e.notify({reason:sr.PAGEHIDE}):"visibilitychange"===a.type&&"hidden"===document.visibilityState?e.notify({reason:sr.HIDDEN}):"freeze"===a.type&&e.notify({reason:sr.FROZEN})},{capture:!0}).stop,n=Oe;return t||(n=Ve(window,"beforeunload",function(){e.notify({reason:sr.UNLOADING})}).stop),function(){r(),n()}});return e}function Ra(e){return J(O(sr),e)}var tl="datadog-synthetics-public-id",rl="datadog-synthetics-result-id",nl="datadog-synthetics-injects-rum";function _n(){return Boolean(window._DATADOG_SYNTHETICS_INJECTS_RUM||It(nl))}function Ia(){var e=window._DATADOG_SYNTHETICS_PUBLIC_ID||It(tl);return"string"==typeof e?e:void 0}function Aa(){var e=window._DATADOG_SYNTHETICS_RESULT_ID||It(rl);return"string"==typeof e?e:void 0}var zr,ri={log:"log",configuration:"configuration"},il=["https://www.datadoghq-browser-agent.com","https://www.datad0g-browser-agent.com","http://localhost","<anonymous>"],al=["ddog-gov.com"],mt={maxEventsPerPage:0,sentEventCount:0,telemetryEnabled:!1,telemetryConfigurationEnabled:!1};function Na(e,t){var r,n=new ze;return mt.telemetryEnabled=!J(al,t.site)&&nr(t.telemetrySampleRate),mt.telemetryConfigurationEnabled=mt.telemetryEnabled&&nr(t.telemetryConfigurationSampleRate),zr=function(o){if(mt.telemetryEnabled){var s=function a(o,s){return Qe({type:"telemetry",date:Le(),service:o,version:"4.39.0",source:"browser",_dd:{format_version:2},telemetry:s,experimental_features:S(P)},void 0!==r?r():{})}(e,o);n.notify(s),Br("telemetry",s)}},function qe(e){We=e}(bn),K(mt,{maxEventsPerPage:t.maxTelemetryEventsPerPage,sentEventCount:0}),{setContextProvider:function(o){r=o},observable:n,enabled:mt.telemetryEnabled}}function Oa(e){return e.site===ha}function Hr(e,t){k(ce.debug,e,t),ni(K({type:ri.log,message:e,status:"debug"},t))}function bn(e){ni(K({type:ri.log,status:"error"},function ol(e){if(e instanceof Error){var t=Nt(e);return{error:{kind:t.name,stack:or(sl(t))},message:t.message}}return{error:{stack:"Not an instance of error"},message:"Uncaught ".concat(Pt(e))}}(e)))}function ka(e){mt.telemetryConfigurationEnabled&&ni({type:ri.configuration,configuration:e})}function ni(e){zr&&mt.sentEventCount<mt.maxEventsPerPage&&(mt.sentEventCount+=1,zr(e))}function sl(e){return e.stack=e.stack.filter(function(t){return!t.url||il.some(function(r){return Se(t.url,r)})}),e}var La=function(){function e(t,r,n){var a=this;this.request=t,this.flushController=r,this.messageBytesLimit=n,this.pushOnlyBuffer=[],this.upsertBuffer={},this.flushController.flushObservable.subscribe(function(o){return a.flush(o)})}return e.prototype.add=function(t){this.addOrUpdate(t)},e.prototype.upsert=function(t,r){this.addOrUpdate(t,r)},e.prototype.flush=function(t){var r=this.pushOnlyBuffer.concat(O(this.upsertBuffer));this.pushOnlyBuffer=[],this.upsertBuffer={};var n={data:r.join("\n"),bytesCount:t.bytesCount,flushReason:t.reason};Ra(t.reason)?this.request.sendOnExit(n):this.request.send(n)},e.prototype.addOrUpdate=function(t,r){var n=this.process(t),a=n.processedMessage,o=n.messageBytesCount;o>=this.messageBytesLimit?W.warn("Discarded a message whose size was bigger than the maximum allowed size ".concat(this.messageBytesLimit,"KB.")):(this.hasMessageFor(r)&&this.remove(r),this.push(a,o,r))},e.prototype.process=function(t){var r=Pt(t);return{processedMessage:r,messageBytesCount:ie(r)}},e.prototype.push=function(t,r,n){this.flushController.notifyBeforeAddMessage(r+(this.flushController.messagesCount>0?1:0)),void 0!==n?this.upsertBuffer[n]=t:this.pushOnlyBuffer.push(t),this.flushController.notifyAfterAddMessage()},e.prototype.remove=function(t){var r=this.upsertBuffer[t];delete this.upsertBuffer[t];var n=ie(r);this.flushController.notifyAfterRemoveMessage(n+(this.flushController.messagesCount>1?1:0))},e.prototype.hasMessageFor=function(t){return void 0!==t&&void 0!==this.upsertBuffer[t]},e}();function Ma(e){return e>=500}function Da(e){try{return e.clone()}catch{return}}var ul=80*y,ll=32,Fa=3*M,cl=ht,Ua=ft;function Pa(e,t,r,n,a){0===t.transportStatus&&0===t.queuedPayloads.size()&&t.bandwidthMonitor.canHandle(e)?Ba(e,t,r,{onSuccess:function(){return za(0,t,r,n,a)},onFailure:function(){t.queuedPayloads.enqueue(e),Va(t,r,n,a)}}):t.queuedPayloads.enqueue(e)}function Va(e,t,r,n){2===e.transportStatus&&xe(function(){Ba(e.queuedPayloads.first(),e,t,{onSuccess:function(){e.queuedPayloads.dequeue(),e.currentBackoffTime=Ua,za(1,e,t,r,n)},onFailure:function(){e.currentBackoffTime=Math.min(cl,2*e.currentBackoffTime),Va(e,t,r,n)}})},e.currentBackoffTime)}function Ba(e,t,r,n){var a=n.onSuccess,o=n.onFailure;t.bandwidthMonitor.add(e),r(e,function(s){t.bandwidthMonitor.remove(e),function dl(e){return"opaque"!==e.type&&(0===e.status&&!navigator.onLine||408===e.status||429===e.status||Ma(e.status))}(s)?(t.transportStatus=t.bandwidthMonitor.ongoingRequestCount>0?1:2,e.retry={count:e.retry?e.retry.count+1:1,lastFailureStatus:s.status},o()):(t.transportStatus=0,a())})}function za(e,t,r,n,a){0===e&&t.queuedPayloads.isFull()&&!t.queueFullReported&&(a({message:"Reached max ".concat(n," events size queued for upload: ").concat(Fa/M,"MiB"),source:Ue.AGENT,startClocks:et()}),t.queueFullReported=!0);var o=t.queuedPayloads;for(t.queuedPayloads=Ha();o.size()>0;)Pa(o.dequeue(),t,r,n,a)}function Ha(){var e=[];return{bytesCount:0,enqueue:function(t){this.isFull()||(e.push(t),this.bytesCount+=t.bytesCount)},first:function(){return e[0]},dequeue:function(){var t=e.shift();return t&&(this.bytesCount-=t.bytesCount),t},size:function(){return e.length},isFull:function(){return this.bytesCount>=Fa}}}function ii(e,t,r){var n=function fl(){return{transportStatus:0,currentBackoffTime:Ua,bandwidthMonitor:{ongoingRequestCount:0,ongoingByteCount:0,canHandle:function(e){return 0===this.ongoingRequestCount||this.ongoingByteCount+e.bytesCount<=ul&&this.ongoingRequestCount<ll},add:function(e){this.ongoingRequestCount+=1,this.ongoingByteCount+=e.bytesCount},remove:function(e){this.ongoingRequestCount-=1,this.ongoingByteCount-=e.bytesCount}},queuedPayloads:Ha(),queueFullReported:!1}}(),a=function(o,s){return function gl(e,t,r,n){var a=r.data,o=r.bytesCount,s=r.flushReason,u=r.retry;if(function ml(){try{return window.Request&&"keepalive"in new Request("http://a")}catch{return!1}}()&&o<t){var v=e.build("fetch",s,u);fetch(v,{method:"POST",body:a,keepalive:!0,mode:"cors"}).then(B(function(_){return n?.({status:_.status,type:_.type})}),B(function(){ai(e.build("xhr",s,u),a,n)}))}else ai(e.build("xhr",s,u),a,n)}(e,t,o,s)};return{send:function(o){Pa(o,n,a,e.endpointType,r)},sendOnExit:function(o){!function vl(e,t,r){var n=r.data,o=r.flushReason;if(!!navigator.sendBeacon&&r.bytesCount<t)try{var u=e.build("beacon",o);if(navigator.sendBeacon(u,n))return}catch(g){!function pl(e){Wa||(Wa=!0,bn(e))}(g)}ai(e.build("xhr",o),n)}(e,t,o)}}}var Wa=!1;function ai(e,t,r){var n=new XMLHttpRequest;n.open("POST",e,!0),Ve(n,"loadend",function(){r?.({status:n.status})},{once:!0}),n.send(t)}function Ga(e){var t=e.messagesLimit,r=e.bytesLimit,n=e.durationLimit,a=e.pageExitObservable,o=new ze;a.subscribe(function(E){return c(E.reason)});var v,s=0,u=0;function c(E){if(0!==u){var T=u,x=s;u=0,s=0,_(),o.notify({reason:E,messagesCount:T,bytesCount:x})}}function _(){Pe(v),v=void 0}return{flushObservable:o,get messagesCount(){return u},notifyBeforeAddMessage:function(E){s+E>=r&&c("bytes_limit"),u+=1,s+=E,function g(){void 0===v&&(v=xe(function(){c("duration_limit")},n))}()},notifyAfterAddMessage:function(){u>=t?c("messages_limit"):s>=r&&c("bytes_limit")},notifyAfterRemoveMessage:function(E){s-=E,0==(u-=1)&&_()}}}function Za(e,t,r,n,a){var s,o=u(t);function u(c){return new La(ii(c,e.batchBytesLimit,r),Ga({messagesLimit:e.batchMessagesLimit,bytesLimit:e.batchBytesLimit,durationLimit:e.flushTimeout,pageExitObservable:n}),e.messageBytesLimit)}return a&&(s=u(a)),{add:function(c,v){void 0===v&&(v=!0),o.add(c),s&&v&&s.add(c)}}}var wn,Sn=1/0,_l=ht,Wr=function(){function e(t){var r=this;this.expireDelay=t,this.entries=[],this.clearOldValuesInterval=it(function(){return r.clearOldValues()},_l)}return e.prototype.add=function(t,r){var n=this,a={value:t,startTime:r,endTime:Sn,remove:function(){var o=n.entries.indexOf(a);o>=0&&n.entries.splice(o,1)},close:function(o){a.endTime=o}};return this.entries.unshift(a),a},e.prototype.find=function(t){void 0===t&&(t=Sn);for(var r=0,n=this.entries;r<n.length;r++){var a=n[r];if(a.startTime<=t){if(t<=a.endTime)return a.value;break}}},e.prototype.closeActive=function(t){var r=this.entries[0];r&&r.endTime===Sn&&r.close(t)},e.prototype.findAll=function(t){return void 0===t&&(t=Sn),this.entries.filter(function(r){return r.startTime<=t&&t<=r.endTime}).map(function(r){return r.value})},e.prototype.reset=function(){this.entries=[]},e.prototype.stop=function(){br(this.clearOldValuesInterval)},e.prototype.clearOldValues=function(){for(var t=gt()-this.expireDelay;this.entries.length>0&&this.entries[this.entries.length-1].endTime<t;)this.entries.pop()},e}(),Gr=4*ia,Ka=15*ht,ja=/^([a-z]+)=([a-z0-9-]+)$/,oi="&",yn="_dd_s",yl=10,wl=100,$a=[];function Zr(e,t){var r;if(void 0===t&&(t=0),wn||(wn=e),e===wn)if(t>=wl)Ya();else{var n,a=Kr();if(si()){if(a.lock)return void En(e,t);if(n=ot(),a.lock=n,ui(a,e.options),(a=Kr()).lock!==n)return void En(e,t)}var o=e.process(a);if(si()&&(a=Kr()).lock!==n)En(e,t);else{if(o&&Xa(o,e.options),si()&&(!o||!qa(o))){if((a=Kr()).lock!==n)return void En(e,t);delete a.lock,ui(a,e.options),o=a}null===(r=e.after)||void 0===r||r.call(e,o||a),Ya()}}else $a.push(e)}function si(){return function Sl(){return!!window.chrome||/HeadlessChrome/.test(window.navigator.userAgent)}()}function En(e,t){xe(function(){Zr(e,t+1)},yl)}function Ya(){wn=void 0;var e=$a.shift();e&&Zr(e)}function Xa(e,t){qa(e)?Ja(t):(e.expire=String(xt()+Ka),ui(e,t))}function ui(e,t){hn(yn,function El(e){return G(e).map(function(t){var n=t[1];return"".concat(t[0],"=").concat(n)}).join(oi)}(e),Ka,t)}function Kr(){var e=It(yn),t={};return function Tl(e){return void 0!==e&&(-1!==e.indexOf(oi)||ja.test(e))}(e)&&e.split(oi).forEach(function(r){var n=ja.exec(r);null!==n&&(t[n[1]]=n[2])}),t}function Ja(e){Jn(yn,e)}function qa(e){return At(e)}var Cl="_dd",xl="_dd_r",Rl="_dd_l",Il="rum",Al="logs";var kl=ht,Ll=Gr,ur=[];function Qa(e,t,r){!function Nl(e){var t=It(yn),r=It(Cl),n=It(xl),a=It(Rl);if(!t){var o={};r&&(o.id=r),a&&/^[01]$/.test(a)&&(o[Al]=a),n&&/^[012]$/.test(n)&&(o[Il]=n),Xa(o,e)}}(e);var n=function Ol(e,t,r){var n=new ze,a=new ze,o=it(function v(){Zr({options:e,process:function(L){return ee(L)?void 0:{}},after:g})},ua),s=function q(){var L=Kr();return ee(L)?L:{}}();function g(L){return ee(L)||(L={}),E()&&(function T(L){return s.id!==L.id||s[t]!==L[t]}(L)?function x(){s={},a.notify()}():s=L),L}function E(){return void 0!==s[t]}function ee(L){return(void 0===L.created||xt()-Number(L.created)<Gr)&&(void 0===L.expire||xt()<Number(L.expire))}return{expandOrRenewSession:Ct(function u(){var L;Zr({options:e,process:function(ae){var we=g(ae);return L=function _(L){var ae=r(L[t]),ve=ae.isTracked;return L[t]=ae.trackingType,ve&&!L.id&&(L.id=ot(),L.created=String(xt())),ve}(we),we},after:function(ae){L&&!E()&&function V(L){s=L,n.notify()}(ae),s=ae}})},ua).throttled,expandSession:function c(){Zr({options:e,process:function(L){return E()?g(L):void 0}})},getSession:function(){return s},renewObservable:n,expireObservable:a,expire:function(){Ja(e),g({})},stop:function(){br(o)}}}(e,t,r);ur.push(function(){return n.stop()});var a=new Wr(Ll);function o(){return{id:n.getSession().id,trackingType:n.getSession()[t]}}return ur.push(function(){return a.stop()}),n.renewObservable.subscribe(function(){a.add(o(),gt())}),n.expireObservable.subscribe(function(){a.closeActive(gt())}),n.expandOrRenewSession(),a.add(o(),aa().relative),function Ml(e){var t=tt(window,["click","touchstart","keydown","scroll"],e,{capture:!0,passive:!0}).stop;ur.push(t)}(function(){return n.expandOrRenewSession()}),function Dl(e){var t=function(){"visible"===document.visibilityState&&e()},r=Ve(document,"visibilitychange",t).stop;ur.push(r);var n=it(t,kl);ur.push(function(){br(n)})}(function(){return n.expandSession()}),{findActiveSession:function(s){return a.find(s)},renewObservable:n.renewObservable,expireObservable:n.expireObservable,expire:n.expire}}var Fl="logs";function eo(e){return nr(e.sessionSampleRate)?"1":"0"}function li(e,t,r){var n=0,a=!1;return{isLimitReached:function(){if(0===n&&xe(function(){n=0},ht),(n+=1)<=t||a)return a=!1,!1;if(n===t+1){a=!0;try{r({message:"Reached max number of ".concat(e,"s by minute: ").concat(t),source:Ue.AGENT,startClocks:et()})}finally{a=!1}}return!0}}}var xr,to=((xr={})[Ae.debug]=0,xr[Ae.info]=1,xr[Ae.warn]=2,xr[Ae.error]=3,xr);function ro(e,t,r){var n=r.getHandler(),a=Array.isArray(n)?n:[n];return to[e]>=to[r.getLevel()]&&J(a,t)}var ci=!1;function Tn(e){var t=window;if(_n()){var r=n(t.DD_RUM_SYNTHETICS);return!r&&!ci&&(ci=!0,Hr("Logs sent before RUM is injected by the synthetics worker",{testId:Ia(),resultId:Aa()})),r}return n(t.DD_RUM);function n(a){if(a&&a.getInternalContext)return a.getInternalContext(e)}}var di={};function no(e){var t=e.map(function(r){return di[r]||(di[r]=function Wl(e){var t=new ze(function(){var r=console[e];return console[e]=function(){for(var n=[],a=0;a<arguments.length;a++)n[a]=arguments[a];r.apply(console,n);var o=Sa();De(function(){t.notify(function Gl(e,t,r){var a,n=e.map(function(s){return function Zl(e){return"string"==typeof e?re(H.SANITIZE_INPUTS)?$e(e):e:e instanceof Error?ba(Nt(e)):Pt(re(H.SANITIZE_INPUTS)?$e(e):e,void 0,2)}(s)}).join(" ");if(t===ce.error){var o=f(e,function(s){return s instanceof Error});a=o?or(Nt(o)):void 0,n="console error: ".concat(n)}return{api:t,message:n,stack:a,handlingStack:r}}(n,e,o))})},function(){console[e]=r}});return t}(r)),di[r]});return ya.apply(void 0,t)}var lr,jr,Kl=((lr={})[ce.log]=Ae.info,lr[ce.debug]=Ae.debug,lr[ce.info]=Ae.info,lr[ce.warn]=Ae.warn,lr[ce.error]=Ae.error,lr),$l=((jr={})[Ot.cspViolation]=Ae.error,jr[Ot.intervention]=Ae.error,jr[Ot.deprecation]=Ae.warn,jr);function io(e,t,r){var n=e[t],a=r(n),o=function(){if("function"==typeof a)return a.apply(this,arguments)};return e[t]=o,{stop:function(){e[t]===o?e[t]=n:a=n}}}function st(e,t,r){var n=r.before,a=r.after;return io(e,t,function(o){return function(){var u,s=arguments;return n&&De(n,this,s),"function"==typeof o&&(u=o.apply(this,s)),a&&De(a,this,s),u}})}function $r(e,t,r){var n=Object.getOwnPropertyDescriptor(e,t);if(!n||!n.set||!n.configurable)return{stop:Oe};var a=function(s,u){xe(function(){r(s,u)},0)},o=function(s){n.set.call(this,s),a(this,s)};return Object.defineProperty(e,t,{set:o}),{stop:function(){var s;(null===(s=Object.getOwnPropertyDescriptor(e,t))||void 0===s?void 0:s.set)===o?Object.defineProperty(e,t,n):a=Oe}}}var fi,vi,hi=new WeakMap;function ao(){return fi||(fi=function Xl(){var e=new ze(function(){var t=st(XMLHttpRequest.prototype,"open",{before:Jl}).stop,r=st(XMLHttpRequest.prototype,"send",{before:function(){ql.call(this,e)}}).stop,n=st(XMLHttpRequest.prototype,"abort",{before:Ql}).stop;return function(){t(),r(),n()}});return e}()),fi}function Jl(e,t){hi.set(this,{state:"open",method:e,url:vn(String(t))})}function ql(e){var t=this,r=hi.get(this);if(r){var n=r;n.state="start",n.startTime=gt(),n.startClocks=et(),n.isAborted=!1,n.xhr=this;var a=!1,o=st(this,"onreadystatechange",{before:function(){this.readyState===XMLHttpRequest.DONE&&s()}}).stop,s=function(){if(u(),o(),!a){a=!0;var c=r;c.state="complete",c.duration=at(n.startClocks.timeStamp,Le()),c.status=t.status,e.notify(Fr(c))}},u=Ve(this,"loadend",s).stop;e.notify(n)}}function Ql(){var e=hi.get(this);e&&(e.isAborted=!0)}function oo(){return vi||(vi=function ec(){var e=new ze(function(){if(window.fetch)return io(window,"fetch",function(r){return function(n,a){var o,s=De(tc,null,[e,n,a]);return s?(o=r.call(this,s.input,s.init),De(rc,null,[e,o,s])):o=r.call(this,n,a),o}}).stop});return e}()),vi}function tc(e,t,r){var n=r&&r.method||t instanceof Request&&t.method||"GET",a=t instanceof Request?t.url:vn(String(t)),s={state:"start",init:r,input:t,method:n,startClocks:et(),url:a};return e.notify(s),s}function rc(e,t,r){var n=function(a){var o=r;o.state="resolve","stack"in a||a instanceof Error?(o.status=0,o.isAborted=a instanceof DOMException&&a.code===DOMException.ABORT_ERR,o.error=a):"status"in a&&(o.response=a,o.responseType=a.type,o.status=a.status,o.isAborted=!1),e.notify(o)};t.then(B(n),B(n))}function so(e,t,r){var n=e.getReader(),a=[],o=0;function u(){var c,v;if(n.cancel().catch(Oe),r.collectStreamBody){var g;if(1===a.length)g=a[0];else{g=new Uint8Array(o);var _=0;a.forEach(function(E){g.set(E,_),_+=E.length})}c=g.slice(0,r.bytesLimit),v=g.length>r.bytesLimit}t(void 0,c,v)}!function s(){n.read().then(B(function(c){c.done?u():(r.collectStreamBody&&a.push(c.value),(o+=c.value.length)>r.bytesLimit?u():s())}),B(function(c){return t(c)}))}()}function pi(e,t){return e.length>t.requestErrorResponseLengthLimit?"".concat(e.substring(0,t.requestErrorResponseLengthLimit),"..."):e}function uc(e){return"xhr"===e?"XHR":"Fetch"}var cc=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/;function uo(e){return function dc(e){var t=function fc(e){return st(window,"onerror",{before:function(t,r,n,a,o){var s;if(o)s=Nt(o),e(s,o);else{var c,u={url:r,column:a,line:n},v=t;if("[object String]"==={}.toString.call(t)){var g=cc.exec(v);g&&(c=g[1],v=g[2])}e(s={name:c,message:"string"==typeof v?v:void 0,stack:[u]},t)}}})}(e).stop,r=function hc(e){return st(window,"onunhandledrejection",{before:function(t){var r=t.reason||"Empty reason",n=Nt(r);e(n,r)}})}(e).stop;return{stop:function(){t(),r()}}}(function(t,r){e.notify(ei({stackTrace:t,originalError:r,startClocks:et(),nonErrorPrefix:"Uncaught",source:Ue.SOURCE,handling:"unhandled"}))})}var pc=function(){function e(){this.callbacks={}}return e.prototype.notify=function(t,r){var n=this.callbacks[t];n&&n.forEach(function(a){return a(r)})},e.prototype.subscribe=function(t,r){var n=this;return this.callbacks[t]||(this.callbacks[t]=[]),this.callbacks[t].push(r),{unsubscribe:function(){n.callbacks[t]=n.callbacks[t].filter(function(a){return r!==a})}}},e}(),yc=function el(e){var t=!1,r=Lr("global context"),n=Lr("user"),a={},o=function(){},s=new jn,u=function(T,x,V,q){void 0===V&&(V=dt(g())),void 0===q&&(q=Le()),s.add(function(){return u(T,x,V,q)})},c=function(){},v=new Ca(function(){for(var T=[],x=0;x<arguments.length;x++)T[x]=arguments[x];return u.apply(void 0,T)});function g(){return{view:{referrer:document.referrer,url:window.location.href},context:r.getContext(),user:n.getContext()}}return Q({logger:v,init:B(function(T){var x;if(c=function(){return dt(T)},Rt()&&(T=function _(T){return K({},T,{clientToken:"empty"})}(T)),function E(T){return!t||(T.silentMultipleInit||W.error("DD_LOGS is already initialized."),!1)}(T)){var V=function Xu(e){var t=va(e),r=Ta(e.forwardConsoleLogs,O(ce),"Forward Console Logs"),n=Ta(e.forwardReports,O(Ot),"Forward Reports");if(t&&r&&n)return e.forwardErrorsToLogs&&!J(r,ce.error)&&r.push(ce.error),K({forwardErrorsToLogs:!1!==e.forwardErrorsToLogs,forwardConsoleLogs:r,forwardReports:n,requestErrorResponseLengthLimit:Yu},t)}(T);V&&(x=e(T,V,g,v),u=x.handleLog,o=x.getInternalContext,s.drain(),t=!0)}}),getLoggerGlobalContext:B(r.get),getGlobalContext:B(r.getContext),setLoggerGlobalContext:B(r.set),setGlobalContext:B(r.setContext),addLoggerGlobalContext:B(r.add),setGlobalContextProperty:B(r.setContextProperty),removeLoggerGlobalContext:B(r.remove),removeGlobalContextProperty:B(r.removeContextProperty),clearGlobalContext:B(r.clearContext),createLogger:B(function(T,x){return void 0===x&&(x={}),a[T]=new Ca(function(){for(var V=[],q=0;q<arguments.length;q++)V[q]=arguments[q];return u.apply(void 0,V)},re(H.SANITIZE_INPUTS)?$e(T):T,x.handler,x.level,re(H.SANITIZE_INPUTS)?$e(x.context):x.context),a[T]}),getLogger:B(function(T){return a[T]}),getInitConfiguration:B(function(){return c()}),getInternalContext:B(function(T){return o(T)}),setUser:B(function(T){oa(T)&&n.setContext(fn(T))}),getUser:B(n.getContext),setUserProperty:B(function(T,x){var V,q=fn((V={},V[T]=x,V))[T];n.setContextProperty(T,q)}),removeUserProperty:B(n.removeContextProperty),clearUser:B(n.clearContext)})}(function bc(e,t,r,n){var a=new pc;a.subscribe(1,function(_){return Br("logs",_)});var o=function(_){return a.notify(0,{rawLogsEvent:{message:_.message,date:_.startClocks.timeStamp,error:{origin:Ue.AGENT},origin:Ue.AGENT,status:Ae.error}})},s=xa();(function Sc(e,t,r){var n,a=Na("browser-logs-sdk",e);if(Rt()){var o=Dr();a.observable.subscribe(function(u){return o.send("internal_telemetry",u)})}else{var s=Za(e,e.rumEndpointBuilder,t,r,null===(n=e.replica)||void 0===n?void 0:n.rumEndpointBuilder);a.observable.subscribe(function(u){return s.add(u,Oa(e))})}return a})(t,o,s).setContextProvider(function(){var _,E,T,x,V,q;return{application:{id:null===(_=Tn())||void 0===_?void 0:_.application_id},session:{id:null===(E=v.findTrackedSession())||void 0===E?void 0:E.id},view:{id:null===(x=null===(T=Tn())||void 0===T?void 0:T.view)||void 0===x?void 0:x.id},action:{id:null===(q=null===(V=Tn())||void 0===V?void 0:V.user_action)||void 0===q?void 0:q.id}}}),function nc(e,t){if(!e.forwardErrorsToLogs)return{stop:Oe};var r=ao().subscribe(function(o){"complete"===o.state&&a("xhr",o)}),n=oo().subscribe(function(o){"resolve"===o.state&&a("fetch",o)});function a(o,s){function u(c){t.notify(0,{rawLogsEvent:{message:"".concat(uc(o)," error ").concat(s.method," ").concat(s.url),date:s.startClocks.timeStamp,error:{origin:Ue.NETWORK,stack:c||"Failed to load"},http:{method:s.method,status_code:s.status,url:s.url},status:Ae.error,origin:Ue.NETWORK}})}!e.isIntakeUrl(s.url)&&(function sc(e){return 0===e.status&&"opaque"!==e.responseType}(s)||Ma(s.status))&&("xhr"in s?function ic(e,t,r){r("string"==typeof e.response?pi(e.response,t):e.response)}(s.xhr,e,u):s.response?function oc(e,t,r){var n=Da(e);n&&n.body?window.TextDecoder?function lc(e,t,r){so(e,function(n,a,o){if(n)r(n);else{var s=(new TextDecoder).decode(a);o&&(s+="..."),r(void 0,s)}},{bytesLimit:t,collectStreamBody:!0})}(n.body,t.requestErrorResponseLengthLimit,function(a,o){r(a?"Unable to retrieve response: ".concat(a):o)}):n.text().then(B(function(a){return r(pi(a,t))}),B(function(a){return r("Unable to retrieve response: ".concat(a))})):r()}(s.response,e,u):s.error&&function ac(e,t,r){r(pi(or(Nt(e)),t))}(s.error,e,u))}return{stop:function(){r.unsubscribe(),n.unsubscribe()}}}(t,a),function vc(e,t){if(!e.forwardErrorsToLogs)return{stop:Oe};var r=new ze,n=uo(r).stop,a=r.subscribe(function(o){t.notify(0,{rawLogsEvent:{message:o.message,date:o.startClocks.timeStamp,error:{kind:o.type,origin:Ue.SOURCE,stack:o.stack},origin:Ue.SOURCE,status:Ae.error}})})}(t,a),function jl(e,t){var r=no(e.forwardConsoleLogs).subscribe(function(n){t.notify(0,{rawLogsEvent:{date:Le(),message:n.message,origin:Ue.CONSOLE,error:n.api===ce.error?{origin:Ue.CONSOLE,stack:n.stack}:void 0,status:Kl[n.api]}})})}(t,a),function Yl(e,t){var r=wa(e.forwardReports).subscribe(function(n){var s,a=n.message,o=$l[n.type];o===Ae.error?s={kind:n.subtype,origin:Ue.REPORT,stack:n.stack}:n.stack&&(a+=" Found in ".concat(function Hu(e){var t;return null===(t=/@ (.+)/.exec(e))||void 0===t?void 0:t[1]}(n.stack))),t.notify(0,{rawLogsEvent:{date:Le(),message:a,origin:Ue.REPORT,error:s,status:o}})})}(t,a);var c=function zl(e){return{handleLog:function t(r,n,a,o){var s=r.context;ro(r.status,ti.console,n)&&W(r.status,r.message,Qe(n.getContext(),s)),e.notify(0,{rawLogsEvent:{date:o||Le(),message:r.message,status:r.status,origin:Ue.LOGGER},messageContext:s,savedCommonContext:a,logger:n})}}}(a).handleLog,v=!la(t.cookieOptions)||Rt()||_n()?function Pl(e){var r="1"===eo(e)?{}:void 0;return{findTrackedSession:function(){return r}}}(t):function Ul(e){var t=Qa(e.cookieOptions,Fl,function(r){return function Vl(e,t){var r=function Bl(e){return"0"===e||"1"===e}(t)?t:eo(e);return{trackingType:r,isTracked:"1"===r}}(e,r)});return{findTrackedSession:function(r){var n=t.findActiveSession(r);return n&&"1"===n.trackingType?{id:n.id}:void 0}}}(t);(function Hl(e,t,r,n,a,o){var s=Qu.concat(["custom"]),u={};s.forEach(function(c){u[c]=li(c,t.eventRateLimiterThreshold,o)}),r.subscribe(0,function(c){var v,g,_,E=c.rawLogsEvent,T=c.messageContext,x=void 0===T?void 0:T,V=c.savedCommonContext,q=void 0===V?void 0:V,ee=c.logger,L=void 0===ee?a:ee,ae=Yn(E.date),we=e.findTrackedSession(ae);if(we){var ve=q||n(),_e=Qe({service:t.service,session_id:we.id,usr:At(ve.user)?void 0:ve.user,view:ve.view},ve.context,Tn(ae),E,L.getContext(),x);!ro(E.status,ti.http,L)||!1===(null===(v=t.beforeSend)||void 0===v?void 0:v.call(t,_e))||(null===(g=_e.error)||void 0===g?void 0:g.origin)!==Ue.AGENT&&(null!==(_=u[_e.status])&&void 0!==_?_:u.custom).isLimitReached()||r.notify(1,_e)}})})(v,t,a,r,n,o),Rt()?function mc(e){var t=Dr();e.subscribe(1,function(r){t.send("log",r)})}(a):function gc(e,t,r,n){var a,o=Za(e,e.logsEndpointBuilder,r,n,null===(a=e.replica)||void 0===a?void 0:a.logsEndpointBuilder);t.subscribe(1,function(s){o.add(s)})}(t,a,o,s),ka(function Ju(e){var t=ga(e);return K({forward_errors_to_logs:e.forwardErrorsToLogs,forward_console_logs:e.forwardConsoleLogs,forward_reports:e.forwardReports},t)}(e));var g=function _c(e){return{get:function(t){var r=e.findTrackedSession(t);if(r)return{session_id:r.id}}}}(v);return{handleLog:c,getInternalContext:g.get}});function gi(e){var t=Wt(e);return"string"===t||"function"===t||e instanceof RegExp}function lo(e,t,r){return void 0===r&&(r=!1),e.some(function(n){try{if("function"==typeof n)return n(t);if(n instanceof RegExp)return n.test(t);if("string"==typeof n)return r?Se(t,n):n===t}catch(a){W.error(a)}return!1})}function Ec(e){0===e.status&&!e.isAborted&&(e.traceId=void 0,e.spanId=void 0,e.traceSampled=void 0)}function co(e,t,r,n){if(function Cc(){return void 0!==fo()}()&&r.findTrackedSession()){var a=f(e.allowedTracingUrls,function(o){return lo([o.match],t.url,!0)});a&&(t.traceId=new ho,t.spanId=new ho,t.traceSampled=!Er(e.traceSampleRate)||nr(e.traceSampleRate),n(function xc(e,t,r,n){var a={};return n.forEach(function(o){switch(o){case"datadog":K(a,{"x-datadog-origin":"rum","x-datadog-parent-id":t.toDecimalString(),"x-datadog-sampling-priority":r?"1":"0","x-datadog-trace-id":e.toDecimalString()});break;case"tracecontext":K(a,{traceparent:"00-0000000000000000".concat(e.toPaddedHexadecimalString(),"-").concat(t.toPaddedHexadecimalString(),"-0").concat(r?"1":"0")});break;case"b3":K(a,{b3:"".concat(e.toPaddedHexadecimalString(),"-").concat(t.toPaddedHexadecimalString(),"-").concat(r?"1":"0")});break;case"b3multi":K(a,{"X-B3-TraceId":e.toPaddedHexadecimalString(),"X-B3-SpanId":t.toPaddedHexadecimalString(),"X-B3-Sampled":r?"1":"0"})}}),a}(t.traceId,t.spanId,t.traceSampled,a.propagatorTypes)))}}function fo(){return window.crypto||window.msCrypto}me(X(),"DD_LOGS",yc);var ho=function(){function e(){this.buffer=new Uint8Array(8),fo().getRandomValues(this.buffer),this.buffer[0]=127&this.buffer[0]}return e.prototype.toString=function(t){var r=this.readInt32(0),n=this.readInt32(4),a="";do{var o=r%t*4294967296+n;r=Math.floor(r/t),n=Math.floor(o/t),a=(o%t).toString(t)+a}while(r||n);return a},e.prototype.toDecimalString=function(){return this.toString(10)},e.prototype.toPaddedHexadecimalString=function(){var t=this.toString(16);return Array(17-t.length).join("0")+t},e.prototype.readInt32=function(t){return 16777216*this.buffer[t]+(this.buffer[t+1]<<16)+(this.buffer[t+2]<<8)+this.buffer[t+3]},e}();function Nc(e){var t=new Set;return Array.isArray(e.allowedTracingUrls)&&e.allowedTracingUrls.length>0&&e.allowedTracingUrls.forEach(function(r){gi(r)?t.add("datadog"):r.propagatorTypes.forEach(function(n){return t.add(n)})}),Array.isArray(e.allowedTracingOrigins)&&e.allowedTracingOrigins.length>0&&t.add("datadog"),S(t)}function mi(e,t,r){return{context:e.getContext(),user:t.getContext(),hasReplay:!!r.isRecording()||void 0}}function vo(){var e,t=window;if(t.Zone&&(e=fe(t,"MutationObserver"),t.MutationObserver&&e===t.MutationObserver)){var n=fe(new t.MutationObserver(Oe),"originalInstance");e=n&&n.constructor}return e||(e=t.MutationObserver),e}function _i(e,t){document.readyState===e||"complete"===document.readyState?t():Ve(window,"complete"===e?"load":"DOMContentLoaded",t,{once:!0})}var po="initial_document",Mc=[["document",function(e){return po===e}],["xhr",function(e){return"xmlhttprequest"===e}],["fetch",function(e){return"fetch"===e}],["beacon",function(e){return"beacon"===e}],["css",function(e,t){return/\.css$/i.test(t)}],["js",function(e,t){return/\.js$/i.test(t)}],["image",function(e,t){return J(["image","img","icon"],e)||null!==/\.(gif|jpg|jpeg|tiff|png|svg|ico)$/i.exec(t)}],["font",function(e,t){return null!==/\.(woff|eot|woff2|ttf)$/i.exec(t)}],["media",function(e,t){return J(["audio","video"],e)||null!==/\.(mp3|mp4)$/i.exec(t)}]];function bi(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var r=1;r<e.length;r+=1)if(e[r-1]>e[r])return!1;return!0}function Fc(e){return"xmlhttprequest"===e.initiatorType||"fetch"===e.initiatorType}function Uc(e){var t=e.duration,r=e.startTime,n=e.responseEnd;return Fe(0===t&&r<n?at(r,n):t)}function Pc(e){var t=go(e);if(t){var r=t.startTime,n=t.fetchStart,a=t.redirectStart,o=t.redirectEnd,s=t.domainLookupStart,u=t.domainLookupEnd,c=t.connectStart,v=t.secureConnectionStart,g=t.connectEnd,_=t.requestStart,E=t.responseStart,x={download:Rr(r,E,t.responseEnd),first_byte:Rr(r,_,E)};return g!==n&&(x.connect=Rr(r,c,g),bi(c,v,g)&&(x.ssl=Rr(r,v,g))),u!==n&&(x.dns=Rr(r,s,u)),mo(e)&&(x.redirect=Rr(r,a,o)),x}}function go(e){if(bi(e.startTime,e.fetchStart,e.domainLookupStart,e.domainLookupEnd,e.connectStart,e.connectEnd,e.requestStart,e.responseStart,e.responseEnd)){if(!mo(e))return e;var t=e.redirectStart,r=e.redirectEnd;if(t<e.startTime&&(t=e.startTime),r<e.startTime&&(r=e.fetchStart),bi(e.startTime,t,r,e.fetchStart))return K({},e,{redirectEnd:r,redirectStart:t})}}function mo(e){return e.fetchStart!==e.startTime}function Rr(e,t,r){return{duration:Fe(at(t,r)),start:Fe(at(e,t))}}function Vc(e){if(e.startTime<e.responseStart)return e.decodedBodySize}function Si(e,t){return t&&!e.isIntakeUrl(t)}function _o(e){return e.nodeType===Node.TEXT_NODE}function yi(e){return e.nodeType===Node.ELEMENT_NODE}function Cn(e){return yi(e)&&Boolean(e.shadowRoot)}function wi(e){return!!e.host&&e.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&yi(e.host)}function xn(e){return wi(e)?e.host:e.parentNode}var Ei,Xr,Hc=2*ht;function Wc(e){var t=function Gc(e){var t=e.querySelector("meta[name=dd-trace-id]"),r=e.querySelector("meta[name=dd-trace-time]");return bo(t&&t.content,r&&r.content)}(e)||function Zc(e){var t=function Kc(e){for(var t=0;t<e.childNodes.length;t+=1)if(r=So(e.childNodes[t]))return r;if(e.body)for(t=e.body.childNodes.length-1;t>=0;t-=1){var r,n=e.body.childNodes[t];if(r=So(n))return r;if(!_o(n))break}}(e);if(t)return bo(Xn(t,"trace-id"),Xn(t,"trace-time"))}(e);if(t&&!(t.traceTime<=xt()-Hc))return t.traceId}function bo(e,t){var r=t&&Number(t);if(e&&r)return{traceId:e,traceTime:r}}function So(e){if(e&&function Bc(e){return e.nodeType===Node.COMMENT_NODE}(e)){var t=/^\s*DATADOG;(.*?)\s*$/.exec(e.data);if(t)return t[1]}}function yo(){return void 0!==window.performance&&"getEntries"in performance}function Rn(e){return window.PerformanceObserver&&void 0!==PerformanceObserver.supportedEntryTypes&&PerformanceObserver.supportedEntryTypes.includes(e)}function jc(e,t){if(function $c(e){_i("interactive",function(){var t,r={entryType:"resource",initiatorType:po,traceId:Wc(document)};if(Rn("navigation")&&performance.getEntriesByType("navigation").length>0)t=K(performance.getEntriesByType("navigation")[0].toJSON(),r);else{var a=wo();t=K(a,{decodedBodySize:0,duration:a.responseEnd,name:window.location.href,startTime:0},r)}e(t)})}(function(u){Yr(e,t,[u])}),yo()){var r=performance.getEntries();xe(function(){return Yr(e,t,r)})}if(window.PerformanceObserver){var n=B(function(u){return Yr(e,t,u.getEntries())}),a=["resource","navigation","longtask","paint"],o=["largest-contentful-paint","first-input","layout-shift"];try{o.forEach(function(u){new PerformanceObserver(n).observe({type:u,buffered:!0})})}catch{a.push.apply(a,o)}new PerformanceObserver(n).observe({entryTypes:a}),yo()&&"addEventListener"in performance&&Ve(performance,"resourcetimingbufferfull",function(){performance.clearResourceTimings()})}Rn("navigation")||function Yc(e){function t(){e(K(wo(),{entryType:"navigation"}))}_i("complete",function(){xe(t)})}(function(u){Yr(e,t,[u])}),Rn("first-input")||function Xc(e){var t=xt(),r=!1,n=tt(window,["click","mousedown","keydown","touchstart","pointerdown"],function(s){if(s.cancelable){var u={entryType:"first-input",processingStart:gt(),startTime:s.timeStamp};"pointerdown"===s.type?function a(s){tt(window,["pointerup","pointercancel"],function(u){"pointerup"===u.type&&o(s)},{once:!0})}(u):o(u)}},{passive:!0,capture:!0}).stop;function o(s){if(!r){r=!0,n();var u=s.processingStart-s.startTime;u>=0&&u<xt()-t&&e(s)}}}(function(u){Yr(e,t,[u])})}function wo(){var e={},t=performance.timing;for(var r in t)if(Er(t[r])){var a=t[r];e[r]=0===a?0:Yn(a)}return e}function Yr(e,t,r){var a=r.filter(function(o){return"resource"===o.entryType||"navigation"===o.entryType||"paint"===o.entryType||"longtask"===o.entryType||"largest-contentful-paint"===o.entryType||"first-input"===o.entryType||"layout-shift"===o.entryType}).filter(function(o){return!function Jc(e){return"navigation"===e.entryType&&e.loadEventEnd<=0}(o)&&!function qc(e,t){return"resource"===t.entryType&&!Si(e,t.name)}(t,o)});a.length&&e.notify(0,a)}function Eo(){return Ei||(Ei=function td(){var e=new ze(function(){var t=Ct(function(){e.notify(Ti())},200).throttled;return Ve(window,"resize",t,{capture:!0,passive:!0}).stop});return e}()),Ei}function Ti(){var e=window.visualViewport;return e?{width:Number(e.width*e.scale),height:Number(e.height*e.scale)}:{width:Number(window.innerWidth||0),height:Number(window.innerHeight||0)}}function rd(){if(re(H.CLICKMAP))return Xr||(Xr=Ti(),Eo().subscribe(function(e){Xr=e})),{viewport:Xr}}function To(e,t){for(var r=e,n=0,a=t.split(".");n<a.length;n++){var o=a[n];if(!xo(r,o))return;r=r[o]}return r}function Co(e,t,r){for(var n=e,a=t.split("."),o=0;o<a.length;o+=1){var s=a[o];if(!xo(n,s))return;o!==a.length-1?n=n[s]:n[s]=r}}function xo(e,t){return"object"==typeof e&&null!==e&&Object.prototype.hasOwnProperty.call(e,t)}var Ro=["view.url","view.referrer","action.target.name","error.message","error.stack","error.resource.url","resource.url"],id=Ro.concat(["context"]);function sd(e){return-1!==["error","resource","long_task"].indexOf(e.type)}var ud=500,ld=2500,ut=[];function Io(){if(!(ut.length>ld)){var e=ut[ut.length-1],t=gt();void 0!==e&&void 0===e.end||ut.push({start:t})}}function dd(){if(0!==ut.length){var e=ut[ut.length-1],t=gt();void 0===e.end&&(e.end=t)}}function vd(e){for(var t=ut.length-1;t>=0;t--){var r=ut[t];if(void 0!==r.end&&e>r.end)break;if(e>r.start&&(void 0===r.end||e<r.end))return!0}return!1}function pd(e,t){for(var r=ir(e,t),n=[],a=Math.max(0,ut.length-ud),o=ut.length-1;o>=a;o--){var s=ut[o];if(void 0!==s.end&&e>s.end)break;if(!(r<s.start)){var u=e>s.start?e:s.start,c=at(e,u),g=at(u,void 0===s.end||r<s.end?r:s.end);n.unshift({start:Fe(c),duration:Fe(g)})}}return n}var md=function(){function e(){this.callbacks={}}return e.prototype.notify=function(t,r){var n=this.callbacks[t];n&&n.forEach(function(a){return a(r)})},e.prototype.subscribe=function(t,r){var n=this;return this.callbacks[t]||(this.callbacks[t]=[]),this.callbacks[t].push(r),{unsubscribe:function(){n.callbacks[t]=n.callbacks[t].filter(function(a){return r!==a})}}},e}(),_d=Gr,Ao=1;function No(){var e=Ao;return Ao+=1,e}function Oo(e){var r=e.isChildEvent,n=e.onChange,a=void 0===n?Oe:n,o={errorCount:0,longTaskCount:0,resourceCount:0,actionCount:0,frustrationCount:0},s=e.lifeCycle.subscribe(11,function(u){if("view"!==u.type&&r(u))switch(u.type){case"error":o.errorCount+=1,a();break;case"action":o.actionCount+=1,u.action.frustration&&(o.frustrationCount+=u.action.frustration.type.length),a();break;case"long_task":o.longTaskCount+=1,a();break;case"resource":o.resourceCount+=1,a()}});return{stop:function(){s.unsubscribe()},eventCounts:o}}var ko=100,Td=100;function xi(e,t,r,n,a){var o=function xd(e,t,r){var n=new ze(function(){var o,a=[],s=0;a.push(t.subscribe(c),e.subscribe(0,function(v){v.some(function(g){return"resource"===g.entryType&&!Ri(r,g.name)})&&c()}),e.subscribe(5,function(v){Ri(r,v.url)||(void 0===o&&(o=v.requestIndex),s+=1,c())}),e.subscribe(6,function(v){Ri(r,v.url)||void 0===o||v.requestIndex<o||(s-=1,c())}));var u=function Rd(e){return st(window,"open",{before:e})}(c).stop;return function(){u(),a.forEach(function(v){return v.unsubscribe()})};function c(){n.notify({isBusy:s>0})}});return n}(e,t,r);return function Cd(e,t,r){var n,a=!1,o=xe(B(function(){return v({hadActivity:!1})}),ko),s=r&&xe(B(function(){return v({hadActivity:!0,end:Le()})}),r),u=e.subscribe(function(g){var _=g.isBusy;Pe(o),Pe(n);var E=Le();_||(n=xe(B(function(){return v({hadActivity:!0,end:E})}),Td))}),c=function(){a=!0,Pe(o),Pe(n),Pe(s),u.unsubscribe()};function v(g){a||(c(),t(g))}return{stop:c}}(o,n,a)}function Ri(e,t){return lo(e.excludedActivityUrls,t)}var Lo=ft,Id=100;var Ii="data-dd-action-name";function kd(e,t){return Mo(e,Ii)||t&&Mo(e,t)||Do(e,t,Ld)||Do(e,t,Md)||""}function Mo(e,t){var r;if(function Vd(){return void 0===Ni&&(Ni="closest"in HTMLElement.prototype),Ni}())r=e.closest("[".concat(t,"]"));else for(var n=e;n;){if(n.hasAttribute(t)){r=n;break}n=n.parentElement}if(r)return Uo(Fo(r.getAttribute(t).trim()))}var Ai,Ni,Ld=[function(e,t){if(function Pd(){return void 0===Ai&&(Ai="labels"in HTMLInputElement.prototype),Ai}()){if("labels"in e&&e.labels&&e.labels.length>0)return Ir(e.labels[0],t)}else if(e.id){var r=e.ownerDocument&&f(e.ownerDocument.querySelectorAll("label"),function(n){return n.htmlFor===e.id});return r&&Ir(r,t)}},function(e){if("INPUT"===e.nodeName){var t=e,r=t.getAttribute("type");if("button"===r||"submit"===r||"reset"===r)return t.value}},function(e,t){if("BUTTON"===e.nodeName||"LABEL"===e.nodeName||"button"===e.getAttribute("role"))return Ir(e,t)},function(e){return e.getAttribute("aria-label")},function(e,t){var r=e.getAttribute("aria-labelledby");if(r)return r.split(/\s+/).map(function(n){return function Fd(e,t){return e.ownerDocument?e.ownerDocument.getElementById(t):null}(e,n)}).filter(function(n){return Boolean(n)}).map(function(n){return Ir(n,t)}).join(" ")},function(e){return e.getAttribute("alt")},function(e){return e.getAttribute("name")},function(e){return e.getAttribute("title")},function(e){return e.getAttribute("placeholder")},function(e,t){if("options"in e&&e.options.length>0)return Ir(e.options[0],t)}],Md=[function(e,t){return Ir(e,t)}],Dd=10;function Do(e,t,r){for(var n=e,a=0;a<=Dd&&n&&"BODY"!==n.nodeName&&"HTML"!==n.nodeName&&"HEAD"!==n.nodeName;){for(var o=0,s=r;o<s.length;o++){var c=(0,s[o])(n,t);if("string"==typeof c){var v=c.trim();if(v)return Uo(Fo(v))}}if("FORM"===n.nodeName)break;n=n.parentElement,a+=1}}function Fo(e){return e.replace(/\s+/g," ")}function Uo(e){return e.length>100?"".concat(sa(e,100)," [...]"):e}function Ir(e,t){if(!e.isContentEditable){if("innerText"in e){var r=e.innerText,n=function(a){for(var o=e.querySelectorAll(a),s=0;s<o.length;s+=1){var u=o[s];if("innerText"in u){var c=u.innerText;c&&c.trim().length>0&&(r=r.replace(c,""))}}};return function Ud(){return!function bl(){return Boolean(document.documentMode)}()}()||n("script, style"),n("[".concat(Ii,"]")),t&&n("[".concat(t,"]")),r}return e.textContent}}var In,Po=[Ii,"data-testid","data-test","data-qa","data-cy","data-test-id","data-qa-id","data-testing","data-component","data-element","data-source-file"],Bd=[Bo,function Wd(e){if(e.id&&!Vo(e.id))return"#".concat(Ne(e.id))}],zd=[Bo,function Gd(e){if("BODY"!==e.tagName&&e.classList.length>0)for(var t=0;t<e.classList.length;t+=1){var r=e.classList[t];if(!Vo(r))return"".concat(e.tagName,".").concat(Ne(r))}},function Zd(e){return e.tagName}];function Hd(e,t){for(var r="",n=e;n&&"HTML"!==n.nodeName;){var a=zo(n,Bd,jd,t,r);if(a)return a;r=zo(n,zd,$d,t,r)||Oi(Kd(n),r),n=n.parentElement}return r}function Vo(e){return/[0-9]/.test(e)}function Bo(e,t){if(t&&(r=s(t)))return r;for(var n=0,a=Po;n<a.length;n++){var r;if(r=s(a[n]))return r}function s(u){if(e.hasAttribute(u))return"".concat(e.tagName,"[").concat(u,'="').concat(Ne(e.getAttribute(u)),'"]')}}function Kd(e){for(var t=e.parentElement.firstElementChild,r=1;t&&t!==e;)t.tagName===e.tagName&&(r+=1),t=t.nextElementSibling;return"".concat(e.tagName,":nth-of-type(").concat(r,")")}function zo(e,t,r,n,a){for(var o=0,s=t;o<s.length;o++){var c=(0,s[o])(e,n);if(c){var v=Oi(c,a);if(r(e,v))return v}}}function jd(e,t){return 1===e.ownerDocument.querySelectorAll(t).length}function $d(e,t){return 1===e.parentElement.querySelectorAll(function Yd(){if(void 0===In)try{document.querySelector(":scope"),In=!0}catch{In=!1}return In}()?Oi(":scope",t):t).length}function Oi(e,t){return t?"".concat(e,">").concat(t):e}function Ho(){var e=window.getSelection();return!e||e.isCollapsed}function Wo(e){return e.target instanceof Element&&!1!==e.isPrimary}var Go=3;var Qd='input:not([type="checkbox"]):not([type="radio"]):not([type="button"]):not([type="submit"]):not([type="reset"]):not([type="range"]),textarea,select,[contenteditable],[contenteditable] *,canvas,a[href],a[href] *';function Zo(e){return!e.hasPageActivity&&!e.getUserActivity().input&&!function ge(e,t){return e.matches?e.matches(t):!!e.msMatchesSelector&&e.msMatchesSelector(t)}(e.event.target,Qd)}var Ar,An,ef=10*ft,tf=5*ht;function rf(e,t,r){var o,n=new Wr(tf),a=new ze;e.subscribe(8,function(){n.reset()}),e.subscribe(4,v);var s=function Xd(e){var n,o,t=e.onPointerDown,r=e.onPointerUp,a={selection:!1,input:!1},s=[Ve(window,"pointerdown",function(u){Wo(u)&&(n=Ho(),a={selection:!1,input:!1},o=t(u))},{capture:!0}),Ve(window,"selectionchange",function(){(!n||!Ho())&&(a.selection=!0)},{capture:!0}),Ve(window,"pointerup",function(u){if(Wo(u)&&o){var c=a;r(o,u,function(){return c}),o=void 0}},{capture:!0}),Ve(window,"input",function(){a.input=!0},{capture:!0})];return{stop:function(){s.forEach(function(u){return u.stop()})}}}({onPointerDown:function(g){return function nf(e,t,r,n,a){if(e.trackFrustrations||!n.find()){var o=function of(e,t){var r,n;if(re(H.CLICKMAP)){var a=e.target.getBoundingClientRect();r={width:Math.round(a.width),height:Math.round(a.height),selector:Hd(e.target,t)},n={x:Math.round(e.clientX-a.left),y:Math.round(e.clientY-a.top)}}return{type:"click",target:r,position:n,name:kd(e.target,t)}}(a,e.actionNameAttribute);if(e.trackFrustrations||o.name){var s=!1;return xi(t,r,e,function(u){s=u.hadActivity},ko),{clickActionBase:o,hadActivityOnPointerDown:function(){return s}}}}}(r,e,t,n,g)},onPointerUp:function(g,_,E){return function af(e,t,r,n,a,o,s,u,c,v){var g=Ko(t,n,c,s,u);e.trackFrustrations&&o(g);var _=xi(t,r,e,function(x){x.hadActivity&&x.end<g.startClocks.timeStamp?g.discard():(x.hadActivity?g.stop(x.end):v()?g.stop(g.startClocks.timeStamp):g.stop(),e.trackFrustrations||(x.hadActivity?g.validate():g.discard()))},ef).stop,E=t.subscribe(4,function(x){g.stop(x.endClocks.timeStamp)}),T=a.subscribe(function(){g.stop()});g.stopObservable.subscribe(function(){E.unsubscribe(),_(),T.unsubscribe()})}(r,e,t,n,a,c,g.clickActionBase,_,E,g.hadActivityOnPointerDown)}}).stop;return{stop:function(){v(),a.notify(),s()},actionContexts:{findActionId:function(g){return r.trackFrustrations?n.findAll(g):n.find(g)}}};function c(g){if(!o||!o.tryAppend(g)){var _=g.clone();o=function Ad(e,t){var a,r=[],n=0;function o(c){c.stopObservable.subscribe(s),r.push(c),Pe(a),a=xe(u,Lo)}function s(){1===n&&r.every(function(c){return c.isStopped()})&&(n=2,t(r))}function u(){Pe(a),0===n&&(n=1,s())}return o(e),{tryAppend:function(c){return 0===n&&(r.length>0&&!function Nd(e,t){return e.target===t.target&&function Od(e,t){return Math.sqrt(Math.pow(e.clientX-t.clientX,2)+Math.pow(e.clientY-t.clientY,2))}(e,t)<=Id&&e.timeStamp-t.timeStamp<=Lo}(r[r.length-1].event,c.event)?(u(),!1):(o(c),!0))},stop:function(){u()}}}(g,function(E){!function sf(e,t){var r=function Jd(e,t){if(function qd(e){if(e.some(function(r){return r.getUserActivity().selection}))return!1;for(var t=0;t<e.length-(Go-1);t+=1)if(e[t+Go-1].event.timeStamp-e[t].event.timeStamp<=ft)return!0;return!1}(e))return t.addFrustration("rage_click"),e.some(Zo)&&t.addFrustration("dead_click"),t.hasError&&t.addFrustration("error_click"),{isRage:!0};var r=e.some(function(n){return n.getUserActivity().selection});return e.forEach(function(n){n.hasError&&n.addFrustration("error_click"),Zo(n)&&!r&&n.addFrustration("dead_click")}),{isRage:!1}}(e,t).isRage;r?(e.forEach(function(n){return n.discard()}),t.stop(Le()),t.validate(e.map(function(n){return n.event}))):(t.discard(),e.forEach(function(n){return n.validate()}))}(E,_)})}}function v(){o&&o.stop()}}function Ko(e,t,r,n,a){var g,o=ot(),s=et(),u=t.add(o,s.relative),c=Oo({lifeCycle:e,isChildEvent:function(x){return void 0!==x.action&&(Array.isArray(x.action.id)?J(x.action.id,o):x.action.id===o)}}),v=0,_=[],E=new ze;function T(x){0===v&&(v=1,(g=x)?u.close(Yn(g)):u.remove(),c.stop(),E.notify())}return{event:a,stop:T,stopObservable:E,get hasError(){return c.eventCounts.errorCount>0},get hasPageActivity(){return void 0!==g},getUserActivity:r,addFrustration:function(x){_.push(x)},startClocks:s,isStopped:function(){return 1===v||2===v},clone:function(){return Ko(e,t,r,n,a)},validate:function(x){if(T(),1===v){var V=c.eventCounts,q=V.resourceCount,ee=V.errorCount,L=V.longTaskCount,ae=K({type:"click",duration:g&&at(s.timeStamp,g),startClocks:s,id:o,frustrationTypes:_,counts:{resourceCount:q,errorCount:ee,longTaskCount:L},events:x??[a],event:a},n);e.notify(1,ae),v=2}},discard:function(){T(),v=2}}}function jo(e,t){var r=ki(e)?{action:{id:e.id,loading_time:Fe(e.duration),frustration:{type:e.frustrationTypes},error:{count:e.counts.errorCount},long_task:{count:e.counts.longTaskCount},resource:{count:e.counts.resourceCount}},_dd:{action:{target:e.target,position:e.position}}}:void 0,n=ki(e)?void 0:e.context,a=Qe({action:{id:ot(),target:{name:e.name},type:e.type},date:e.startClocks.timeStamp,type:"action"},r),o=t.isInForegroundAt(e.startClocks.relative);return void 0!==o&&(a.view={in_foreground:o}),{customerContext:n,rawRumEvent:a,startTime:e.startClocks.relative,domainContext:ki(e)?{event:e.event,events:e.events}:{}}}function ki(e){return"custom"!==e.type}function $o(e){return ir(e.startTime,e.duration)}function mf(e,t,r,n){e.subscribe(6,function(a){e.notify(10,function _f(e,t,r,n){var a,o="xhr"===e.type?"xhr":"fetch",s=function pf(e){if(performance&&"getEntriesByName"in performance){var t=performance.getEntriesByName(e.url,"resource");if(t.length&&"toJSON"in t[0]){var r=t.map(function(n){return n.toJSON()}).filter(go).filter(function(n){return function gf(e,t,r){return e.startTime>=t-1&&$o(e)<=ir(r,1)}(n,e.startClocks.relative,$o({startTime:e.startClocks.relative,duration:e.duration}))});if(1===r.length)return r[0]}}}(e),u=s?$n(s.startTime):e.startClocks,c=s?Yo(s):void 0,v=function Sf(e,t){if(e.traceSampled&&e.traceId&&e.spanId)return{_dd:{span_id:e.spanId.toDecimalString(),trace_id:e.traceId.toDecimalString(),rule_psr:Xo(t)}}}(e,t),g=Jo(r,u),_=Fe(e.duration),E=qo(n,u,null!==(a=s?.duration)&&void 0!==a?a:e.duration),T=Qe({date:u.timeStamp,resource:{id:ot(),type:o,duration:_,method:e.method,status_code:e.status,url:e.url},type:"resource"},v,c,g,E);return{startTime:u.relative,rawRumEvent:T,domainContext:{performanceEntry:s&&s,xhr:e.xhr,response:e.response,requestInput:e.input,requestInit:e.init,error:e.error}}}(a,t,r,n))}),e.subscribe(0,function(a){for(var o=0,s=a;o<s.length;o++){var u=s[o];"resource"===u.entryType&&!Fc(u)&&e.notify(10,bf(u,t,r,n))}})}function bf(e,t,r,n){var a=function Dc(e){var t=e.name;if(!function hu(e){try{return!!ar(e)}catch{return!1}}(t))return Hr('Failed to construct URL for "'.concat(e.name,'"')),"other";for(var r=function vu(e){var t=ar(e).pathname;return"/"===t[0]?t:"/".concat(t)}(t),n=0,a=Mc;n<a.length;n++){var o=a[n],s=o[0];if((0,o[1])(e.initiatorType,r))return s}return"other"}(e),o=Yo(e),s=$n(e.startTime),u=function yf(e,t){if(e.traceId)return{_dd:{trace_id:e.traceId,rule_psr:Xo(t)}}}(e,t),c=Jo(r,s),v=qo(n,s,e.duration),g=Qe({date:s.timeStamp,resource:{id:ot(),type:a,url:e.name},type:"resource"},u,o,c,v);return{startTime:s.relative,rawRumEvent:g,domainContext:{performanceEntry:e}}}function Yo(e){return{resource:K({duration:Uc(e),size:Vc(e)},Pc(e))}}function Xo(e){return Er(e.traceSampleRate)?e.traceSampleRate/100:void 0}function Jo(e,t){var r=e.findTrackedSession(t.relative);return{_dd:{discarded:!r||!r.resourceAllowed}}}function qo(e,t,r){if(re(H.RESOURCE_PAGE_STATES))return{_dd:{page_states:e.findAll(t.relative,r),page_was_discarded:String(document.wasDiscarded)}}}function Li(e){return void 0===e&&(e=window),Ar||("hidden"===document.visibilityState?Ar={timeStamp:0}:(Ar={timeStamp:1/0},An=tt(e,["pagehide","visibilitychange"],function(t){("pagehide"===t.type||"hidden"===document.visibilityState)&&(Ar.timeStamp=t.timeStamp,An())},{capture:!0}).stop)),Ar}var Qo=10*ht;var kf=5*ht,Mf=3e3,Df=5*ht;function Ff(e,t,r,n,a,o,s){var E,u=function T(ee){var L=es(t,r,n,e,"initial_load",aa(),ee),ae=function wf(e,t){var r={};function n(c){K(r,c),t(r)}var a=function Ef(e,t){var r=e.subscribe(0,function(n){for(var a=0,o=n;a<o.length;a++){var s=o[a];"navigation"===s.entryType&&t({domComplete:s.domComplete,domContentLoaded:s.domContentLoadedEventEnd,domInteractive:s.domInteractive,loadEvent:s.loadEventEnd,firstByte:s.responseStart>=0&&s.responseStart<=gt()?s.responseStart:void 0})}}).unsubscribe;return{stop:r}}(e,n).stop,o=function Tf(e,t){var r=Li(),n=e.subscribe(0,function(a){var o=f(a,function(s){return"paint"===s.entryType&&"first-contentful-paint"===s.name&&s.startTime<r.timeStamp&&s.startTime<Qo});o&&t(o.startTime)}).unsubscribe;return{stop:n}}(e,function(c){return n({firstContentfulPaint:c})}).stop,s=function Cf(e,t,r){var n=Li(),a=1/0,o=tt(t,["pointerdown","keydown"],function(u){a=u.timeStamp},{capture:!0,once:!0}).stop,s=e.subscribe(0,function(u){var c=function h(e,t){for(var r=e.length-1;r>=0;r-=1){var n=e[r];if(t(n,r,e))return n}}(u,function(v){return"largest-contentful-paint"===v.entryType&&v.startTime<a&&v.startTime<n.timeStamp&&v.startTime<Qo});c&&r(c.startTime)}).unsubscribe;return{stop:function(){o(),s()}}}(e,window,function(c){n({largestContentfulPaint:c})}).stop,u=function xf(e,t){var r=Li(),n=e.subscribe(0,function(a){var o=f(a,function(u){return"first-input"===u.entryType&&u.startTime<r.timeStamp});if(o){var s=at(o.startTime,o.processingStart);t({firstInputDelay:s>=0?s:0,firstInputTime:o.startTime})}}).unsubscribe;return{stop:n}}(e,function(c){n({firstInputDelay:c.firstInputDelay,firstInputTime:c.firstInputTime})}).stop;return{stop:function(){a(),o(),s(),u()}}}(t,function(we){L.updateTimings(we),L.scheduleUpdate()}).stop;return{initialView:L,stop:ae}}(s),c=u.stop,g=u.initialView,_=function V(){t.subscribe(8,function(){g.end(),g=x(void 0,{name:g.name,service:g.service,version:g.version})}),t.subscribe(9,function(L){(L.reason===sr.UNLOADING||L.reason===sr.PAGEHIDE)&&(g.end(),g.triggerUpdate())});var ee=it(function(){g.triggerUpdate()},Df);return{stop:function(){br(ee)}}}().stop;function x(ee,L){return es(t,r,n,e,"route_change",ee,L)}return o&&(E=function q(ee){return ee.subscribe(function(L){if(function Pf(e,t){return e.pathname!==t.pathname||!function Vf(e){var t=e.substr(1);return!!document.getElementById(t)}(t.hash)&&ts(t.hash)!==ts(e.hash)}(L.oldLocation,L.newLocation))return g.end(),g.triggerUpdate(),void(g=x())})}(a)),{addTiming:function(ee,L){void 0===L&&(L=Le()),g.addTiming(ee,L),g.scheduleUpdate()},startView:function(ee,L){g.end(L),g.triggerUpdate(),g=x(L,ee)},stop:function(){E?.unsubscribe(),c(),_(),g.end()}}}function es(e,t,r,n,a,o,s){void 0===o&&(o=et());var _,T,x,V,u=ot(),c={},v={},g=0,E=Fr(n);s&&(T=s.name,x=s.service,V=s.version),e.notify(2,{id:u,name:T,startClocks:o,service:x,version:V});var q=Ct(vt,Mf,{leading:!1}),ee=q.throttled,L=q.cancel,ae=function Rf(e,t,r,n,a,o){var g,s={},u=function If(e,t,r,n,a,o){var s="initial_load"===n,u=!0,c=[];function v(){!u&&!s&&c.length>0&&o(Math.max.apply(Math,c))}return{stop:xi(e,t,r,function(_){u&&(u=!1,_.hadActivity&&c.push(at(a.timeStamp,_.end)),v())}).stop,setLoadEvent:function(_){s&&(s=!1,c.push(_),v())}}}(e,t,r,a,o,function(_){s.loadingTime=_,n()}),c=u.stop,v=u.setLoadEvent;return function Of(){return Rn("layout-shift")}()?(s.cumulativeLayoutShift=0,g=function Af(e,t){var r=0,n=function Nf(){var t,r,e=0;return{update:function(n){void 0===t||n.startTime-r>=ft||n.startTime-t>=5*ft?(t=r=n.startTime,e=n.value):(e+=n.value,r=n.startTime)},value:function(){return e}}}(),a=e.subscribe(0,function(o){for(var s=0,u=o;s<u.length;s++){var c=u[s];"layout-shift"===c.entryType&&!c.hadRecentInput&&(n.update(c),n.value()>r&&(r=n.value(),t(na(r,4))))}}).unsubscribe;return{stop:a}}(e,function(_){s.cumulativeLayoutShift=_,n()}).stop):g=Oe,{stop:function(){c(),g()},setLoadEvent:v,viewMetrics:s}}(e,t,r,ee,a,o),we=ae.setLoadEvent,ve=ae.stop,_e=ae.viewMetrics,wt=function Lf(e,t,r){var n=Oo({lifeCycle:e,isChildEvent:function(s){return s.view.id===t},onChange:r}),a=n.stop;return{scheduleStop:function(){xe(a,kf)},eventCounts:n.eventCounts}}(e,u,ee),Ze=wt.scheduleStop,Ht=wt.eventCounts;function vt(){g+=1;var z=void 0===_?Le():_.timeStamp;e.notify(3,K({customTimings:v,documentVersion:g,id:u,name:T,service:x,version:V,loadingType:a,location:E,startClocks:o,timings:c,duration:at(o.timeStamp,z),isActive:void 0===_,eventCounts:Ht},_e))}return vt(),{name:T,service:x,version:V,scheduleUpdate:ee,end:function(z){void 0===z&&(z=et()),e.notify(4,{endClocks:_=z}),ve(),Ze()},triggerUpdate:function(){L(),vt()},updateTimings:function(z){c=z,void 0!==z.loadEvent&&we(z.loadEvent)},addTiming:function(z,te){var lt=function lu(e){return e<au}(te)?te:at(o.timeStamp,te);v[function Uf(e){var t=e.replace(/[^a-zA-Z0-9-_.@$]/g,"_");return t!==e&&W.warn("Invalid timing name: ".concat(e,", sanitized to: ").concat(t)),t}(z)]=lt}}}function ts(e){var t=e.indexOf("?");return t<0?e:e.slice(0,t)}function Hf(e){return Er(e)&&e<0?void 0:e}var Wf="rum";function rs(e){return"2"===e||"1"===e}var Jf=Gr;var Vt,cr,Mi,rh=Gr,ah=10*ft;function sh(){0!==Vt.batchCount&&(Hr("Customer data measures",Vt),ns())}function Jr(e,t){e.sum+=t,e.min=Math.min(e.min,t),e.max=Math.max(e.max,t)}function Di(e,t){e.sum+=t.sum,e.min=Math.min(e.min,t.min),e.max=Math.max(e.max,t.max)}function ns(){Vt={batchCount:0,batchBytesCount:{min:1/0,max:0,sum:0},batchMessagesCount:{min:1/0,max:0,sum:0},globalContextBytes:{min:1/0,max:0,sum:0},userContextBytes:{min:1/0,max:0,sum:0},featureFlagBytes:{min:1/0,max:0,sum:0}}}function is(){Mi=!1,cr={globalContextBytes:{min:1/0,max:0,sum:0},userContextBytes:{min:1/0,max:0,sum:0},featureFlagBytes:{min:1/0,max:0,sum:0}}}var Nn,uh=500,dr=[];function as(){return"hidden"===document.visibilityState?"hidden":document.hasFocus()?"active":"passive"}function On(e,t){void 0===t&&(t=uh),e!==Nn&&(Nn=e,dr.length===t&&dr.shift(),dr.push({state:Nn,startTime:gt()}))}var _t={FullSnapshot:2,IncrementalSnapshot:3,Meta:4,Focus:6,ViewEnd:7,VisualViewport:8,FrustrationRecord:9},fr={Document:0,DocumentType:1,Element:2,Text:3,CDATA:4,DocumentFragment:11},Bt={Mutation:0,MouseMove:1,MouseInteraction:2,Scroll:3,ViewportResize:4,Input:5,TouchMove:6,MediaInteraction:7,StyleSheetRule:8},bt={MouseUp:0,MouseDown:1,Click:2,ContextMenu:3,DblClick:4,Focus:5,Blur:6,TouchStart:7,TouchEnd:9},os={Play:0,Pause:1};function Kt(e,t){return{data:K({source:e},t),type:_t.IncrementalSnapshot,timestamp:Le()}}var de={IGNORE:"ignore",HIDDEN:"hidden",ALLOW:Pr.ALLOW,MASK:Pr.MASK,MASK_USER_INPUT:Pr.MASK_USER_INPUT},Fi="data-dd-privacy",gh="allow",mh="mask",_h="mask-user-input",ss="hidden",bh="dd-privacy-allow",Sh="dd-privacy-mask",yh="dd-privacy-mask-user-input",wh="dd-privacy-hidden",hr="***",Eh="data:image/gif;base64,R0lGODlhAQABAIAAAMLCwgAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw==",Th={INPUT:!0,OUTPUT:!0,TEXTAREA:!0,SELECT:!0,OPTION:!0,DATALIST:!0,OPTGROUP:!0},Ch=1e5;function zt(e,t){var r=xn(e),n=r?zt(r,t):t;return us(ls(e),n)}function us(e,t){switch(t){case de.HIDDEN:case de.IGNORE:return t}switch(e){case de.ALLOW:case de.MASK:case de.MASK_USER_INPUT:case de.HIDDEN:case de.IGNORE:return e;default:return t}}function ls(e){if(yi(e)){var t=e.getAttribute(Fi);if("BASE"===e.tagName)return de.ALLOW;if("INPUT"===e.tagName){if("password"===e.type||"email"===e.type||"tel"===e.type||"hidden"===e.type)return de.MASK;var n=e.getAttribute("autocomplete");if(n&&0===n.indexOf("cc-"))return de.MASK}if(t===ss||e.classList.contains(wh))return de.HIDDEN;if(t===mh||e.classList.contains(Sh))return de.MASK;if(t===_h||e.classList.contains(yh))return de.MASK_USER_INPUT;if(t===gh||e.classList.contains(bh))return de.ALLOW;if(function Ih(e){if("SCRIPT"===e.nodeName)return!0;if("LINK"===e.nodeName){var t=a("rel");return/preload|prefetch/i.test(t)&&"script"===a("as")||"shortcut icon"===t||"icon"===t}if("META"===e.nodeName){var r=a("name"),n=(t=a("rel"),a("property"));return/^msapplication-tile(image|color)$/.test(r)||"application-name"===r||"icon"===t||"apple-touch-icon"===t||"shortcut icon"===t||"keywords"===r||"description"===r||/^(og|twitter|fb):/.test(n)||/^(og|twitter):/.test(r)||"pinterest"===r||"robots"===r||"googlebot"===r||"bingbot"===r||e.hasAttribute("http-equiv")||"author"===r||"generator"===r||"framework"===r||"publisher"===r||"progid"===r||/^article:/.test(n)||/^product:/.test(n)||"google-site-verification"===r||"yandex-verification"===r||"csrf-token"===r||"p:domain_verify"===r||"verify-v1"===r||"verification"===r||"shopify-checkout-api-token"===r}function a(o){return(e.getAttribute(o)||"").toLowerCase()}return!1}(e))return de.IGNORE}}function kn(e,t){switch(t){case de.MASK:case de.HIDDEN:case de.IGNORE:return!0;case de.MASK_USER_INPUT:return _o(e)?cs(e.parentNode):cs(e);default:return!1}}function cs(e){if(!e||e.nodeType!==e.ELEMENT_NODE)return!1;var t=e;if("INPUT"===t.tagName)switch(t.type){case"button":case"color":case"reset":case"submit":return!1}return!!Th[t.tagName]}var Rh=function(e){return e.replace(/\S/g,"x")};function ds(e,t,r){var n,a=null===(n=e.parentElement)||void 0===n?void 0:n.tagName,o=e.textContent||"";if(!t||o.trim()){var u="STYLE"===a||void 0;if("SCRIPT"===a)o=hr;else if(r===de.HIDDEN)o=hr;else if(kn(e,r)&&!u)if("DATALIST"===a||"SELECT"===a||"OPTGROUP"===a){if(!o.trim())return}else o="OPTION"===a?hr:Rh(o);return o}}var Ui=new WeakMap;function kt(e){return Ui.has(e)}function rt(e){return Ui.get(e)}function Pi(e,t){var r=e.tagName,n=e.value;if(kn(e,t)){var a=e.type;return"INPUT"!==r||"button"!==a&&"submit"!==a&&"reset"!==a?n&&"OPTION"!==r?hr:void 0:n}return"OPTION"===r||"SELECT"===r?e.value:"INPUT"===r||"TEXTAREA"===r?n:void 0}var Oh=/url\((?:(')([^']*)'|(")([^"]*)"|([^)]*))\)/gm,kh=/^[A-Za-z]+:|^\/\//,Lh=/^data:.*,/i;var Fh=/[^a-z1-6-_]/;function fs(e){var t=e.toLowerCase().trim();return Fh.test(t)?"div":t}function hs(e){if(void 0!==e&&0!==e.length)return e.map(function(t){return{cssRules:Array.from(t.cssRules||t.rules,function(o){return o.cssText}),disabled:t.disabled||void 0,media:t.media.length>0?Array.from(t.media):void 0}})}function vs(e,t,r,n){if(t===de.HIDDEN)return null;var a=e.getAttribute(r);if(t===de.MASK&&r!==Fi&&!Po.includes(r)&&r!==n.actionNameAttribute){var o=e.tagName;switch(r){case"title":case"alt":case"placeholder":return hr}if(!("IMG"!==o&&"SOURCE"!==o||"src"!==r&&"srcset"!==r))return Eh;if("A"===o&&"href"===r||a&&Se(r,"data-"))return hr}return a&&"string"==typeof a&&a.length>Ch&&"data:"===a.slice(0,5)?"data:truncated":a}function Vi(e){if(!e)return null;var t;try{t=e.rules||e.cssRules}catch{}return t?function Mh(e,t){return e.replace(Oh,function(r,n,a,o,s,u){var c=a||s||u;if(!t||!c||kh.test(c)||Lh.test(c))return r;var v=n||o||"";return"url(".concat(v).concat(function Dh(e,t){try{return ar(e,t).href}catch{return e}}(c,t)).concat(v,")")})}(Array.from(t,Ph).join(""),e.href):null}function Ph(e){return function Vh(e){return"styleSheet"in e}(e)?Vi(e.styleSheet)||"":e.cssText}function Ln(e,t){var r=function Hh(e,t){switch(e.nodeType){case e.DOCUMENT_NODE:return function Wh(e,t){return{type:fr.Document,childNodes:Bi(e,t),adoptedStyleSheets:hs(e.adoptedStyleSheets)}}(e,t);case e.DOCUMENT_FRAGMENT_NODE:return function Gh(e,t){var r=[];e.childNodes.length&&(r=Bi(e,t));var n=wi(e);return n&&t.serializationContext.shadowRootsController.addShadowRoot(e),{type:fr.DocumentFragment,childNodes:r,isShadowRoot:n,adoptedStyleSheets:n?hs(e.adoptedStyleSheets):void 0}}(e,t);case e.DOCUMENT_TYPE_NODE:return function Zh(e){return{type:fr.DocumentType,name:e.name,publicId:e.publicId,systemId:e.systemId}}(e);case e.ELEMENT_NODE:return function Kh(e,t){var r,n=fs(e.tagName),a=function jh(e){return"svg"===e.tagName||e instanceof SVGElement}(e)||void 0,o=us(ls(e),t.parentNodePrivacyLevel);if(o===de.HIDDEN){var s=e.getBoundingClientRect(),c=s.height;return{type:fr.Element,tagName:n,attributes:(r={rr_width:"".concat(s.width,"px"),rr_height:"".concat(c,"px")},r[Fi]=ss,r),childNodes:[],isSVG:a}}if(o!==de.IGNORE){var v=function Uh(e,t,r){var n;if(t===de.HIDDEN)return{};for(var a={},o=fs(e.tagName),s=e.ownerDocument,u=0;u<e.attributes.length;u+=1){var v=e.attributes.item(u).name,g=vs(e,t,v,r.configuration);null!==g&&(a[v]=g)}if(e.value&&("textarea"===o||"select"===o||"option"===o||"input"===o)){var _=Pi(e,t);void 0!==_&&(a.value=_)}if("option"===o&&t===de.ALLOW&&e.selected&&(a.selected=e.selected),"link"===o){var x,T=Array.from(s.styleSheets).find(function(we){return we.href===e.href});(x=Vi(T))&&T&&(a._cssText=x)}"style"===o&&e.sheet&&!(e.innerText||e.textContent||"").trim().length&&(x=Vi(e.sheet))&&(a._cssText=x);var V=e;"input"===o&&("radio"===V.type||"checkbox"===V.type)&&(t===de.ALLOW?a.checked=!!V.checked:kn(V,t)&&delete a.checked),("audio"===o||"video"===o)&&(a.rr_mediaState=e.paused?"paused":"played");var ee,L,ae=r.serializationContext;switch(ae.status){case 0:ee=Math.round(e.scrollTop),L=Math.round(e.scrollLeft),(ee||L)&&ae.elementsScrollPositions.set(e,{scrollTop:ee,scrollLeft:L});break;case 1:ae.elementsScrollPositions.has(e)&&(ee=(n=ae.elementsScrollPositions.get(e)).scrollTop,L=n.scrollLeft)}return L&&(a.rr_scrollLeft=L),ee&&(a.rr_scrollTop=ee),a}(e,o,t),g=[];if(e.childNodes.length&&(g=Bi(e,t.parentNodePrivacyLevel===o&&t.ignoreWhiteSpace===("head"===n)?t:K({},t,{parentNodePrivacyLevel:o,ignoreWhiteSpace:"head"===n}))),Cn(e)){var E=Ln(e.shadowRoot,t);null!==E&&g.push(E)}return{type:fr.Element,tagName:n,attributes:v,childNodes:g,isSVG:a}}}(e,t);case e.TEXT_NODE:return function $h(e,t){var r,n=null===(r=e.parentElement)||void 0===r?void 0:r.tagName,a=ds(e,t.ignoreWhiteSpace||!1,t.parentNodePrivacyLevel);if(a)return{type:fr.Text,textContent:a,isStyle:"STYLE"===n||void 0}}(e,t);case e.CDATA_SECTION_NODE:return function Yh(){return{type:fr.CDATA,textContent:""}}()}}(e,t);if(!r)return null;var n=rt(e)||function zh(){return Bh++}(),a=r;return a.id=n,function Nh(e,t){Ui.set(e,t)}(e,n),t.serializedNodeIds&&t.serializedNodeIds.add(n),a}var Bh=1;function Bi(e,t){var r=[];return e.childNodes.forEach(function(n){var a=Ln(n,t);a&&r.push(a)}),r}function Xh(e,t,r){return Ln(e,{serializationContext:r,parentNodePrivacyLevel:t.defaultPrivacyLevel,configuration:t})}function ps(e){return Boolean(e.changedTouches)}function qr(e){return!0===e.composed&&Cn(e.target)?e.composedPath()[0]:e.target}var qh=function(e,t){var r=window.visualViewport,n={layoutViewportX:e,layoutViewportY:t,visualViewportX:e,visualViewportY:t};return r?(function Jh(e){return Math.abs(e.pageTop-e.offsetTop-window.scrollY)>25||Math.abs(e.pageLeft-e.offsetLeft-window.scrollX)>25}(r)?(n.layoutViewportX=Math.round(e+r.offsetLeft),n.layoutViewportY=Math.round(t+r.offsetTop)):(n.visualViewportX=Math.round(e-r.offsetLeft),n.visualViewportY=Math.round(t-r.offsetTop)),n):n},ms=function(e){return{scale:e.scale,offsetLeft:e.offsetLeft,offsetTop:e.offsetTop,pageLeft:e.pageLeft,pageTop:e.pageTop,height:e.height,width:e.width}};function _s(){var e,t=window.visualViewport;return e=t?t.pageLeft-t.offsetLeft:void 0!==window.scrollX?window.scrollX:window.pageXOffset||0,Math.round(e)}function bs(){var e,t=window.visualViewport;return e=t?t.pageTop-t.offsetTop:void 0!==window.scrollY?window.scrollY:window.pageYOffset||0,Math.round(e)}var Qh=50;function Ss(e){var t=ps(e)?e.changedTouches[0]:e,r=t.clientX,n=t.clientY;if(window.visualViewport){var a=qh(r,n);r=a.visualViewportX,n=a.visualViewportY}if(Number.isFinite(r)&&Number.isFinite(n))return{x:r,y:n};e.isTrusted&&Hr("mouse/touch event without x/y")}var St,tv=100,ys=((St={}).pointerup=bt.MouseUp,St.mousedown=bt.MouseDown,St.click=bt.Click,St.contextmenu=bt.ContextMenu,St.dblclick=bt.DblClick,St.focus=bt.Focus,St.blur=bt.Blur,St.touchstart=bt.TouchStart,St.touchend=bt.TouchEnd,St);function ws(e,t,r){var n=void 0===r?{}:r,a=n.domEvents,o=void 0===a?["input","change"]:a,s=n.target,u=void 0===s?document:s,c=new WeakMap;function v(T){var x=zt(T,t);if(x!==de.HIDDEN){var q,V=T.type;if("radio"===V||"checkbox"===V){if(kn(T,x))return;q={isChecked:T.checked}}else{var ee=Pi(T,x);if(void 0===ee)return;q={text:ee}}g(T,q);var L=T.name;"radio"===V&&L&&T.checked&&function b(e,t){Array.prototype.forEach.call(e,t)}(document.querySelectorAll('input[type="radio"][name="'.concat(L,'"]')),function(ae){ae!==T&&g(ae,{isChecked:!1})})}}function g(T,x){if(kt(T)){var V=c.get(T);(!V||V.text!==x.text||V.isChecked!==x.isChecked)&&(c.set(T,x),e(K({id:rt(T)},x)))}}var _=tt(u,o,function(T){var x=qr(T);(x instanceof HTMLInputElement||x instanceof HTMLTextAreaElement||x instanceof HTMLSelectElement)&&v(x)},{capture:!0,passive:!0}).stop,E=[$r(HTMLInputElement.prototype,"value",v),$r(HTMLInputElement.prototype,"checked",v),$r(HTMLSelectElement.prototype,"value",v),$r(HTMLTextAreaElement.prototype,"value",v),$r(HTMLSelectElement.prototype,"selectedIndex",v)];return function(){E.forEach(function(T){return T.stop()}),_()}}function Es(e){for(var t=[],r=e;r.parentRule;){var a=Array.from(r.parentRule.cssRules).indexOf(r);t.unshift(a),r=r.parentRule}if(r.parentStyleSheet){var s=Array.from(r.parentStyleSheet.cssRules).indexOf(r);return t.unshift(s),t}}var sv=200,cv=100;function Ts(e,t,r,n){var a=vo();if(!a)return{stop:Oe,flush:Oe};var o=function dv(e){var t=Oe,r=[];function n(){t(),e(r),r=[]}return{addMutations:function(a){0===r.length&&(t=function fv(e,t){if(window.requestIdleCallback&&window.cancelIdleCallback){var r=window.requestIdleCallback(B(e),t);return function(){return window.cancelIdleCallback(r)}}var n=window.requestAnimationFrame(B(e));return function(){return window.cancelAnimationFrame(n)}}(n,{timeout:cv})),r.push.apply(r,a)},flush:n,stop:function(){t()}}}(function(u){!function hv(e,t,r,n,a){e.filter(function(E){return"childList"===E.type}).forEach(function(E){E.removedNodes.forEach(function(T){Cs(T,n.removeShadowRoot)})});var o=e.filter(function(E){return a.contains(E.target)&&function Ah(e){for(var t=e;t;){if(!kt(t)&&!wi(t))return!1;t=xn(t)}return!0}(E.target)&&zt(E.target,r.defaultPrivacyLevel)!==de.HIDDEN}),s=function vv(e,t,r){for(var n=new Set,a=new Map,o=function(ve){ve.addedNodes.forEach(function(_e){n.add(_e)}),ve.removedNodes.forEach(function(_e){n.has(_e)||a.set(_e,ve.target),n.delete(_e)})},s=0,u=e;s<u.length;s++)o(u[s]);var v=Array.from(n);!function mv(e){e.sort(function(t,r){var n=t.compareDocumentPosition(r);return n&Node.DOCUMENT_POSITION_CONTAINED_BY?-1:n&Node.DOCUMENT_POSITION_CONTAINS||n&Node.DOCUMENT_POSITION_FOLLOWING?1:n&Node.DOCUMENT_POSITION_PRECEDING?-1:0})}(v);for(var g=new Set,_=[],E=0,T=v;E<T.length;E++){var x=T[E];if(!ae(x)){var V=zt(x.parentNode,t.defaultPrivacyLevel);if(V!==de.HIDDEN&&V!==de.IGNORE){var q=Ln(x,{serializedNodeIds:g,parentNodePrivacyLevel:V,serializationContext:{status:2,shadowRootsController:r},configuration:t});if(q){var ee=xn(x);_.push({nextId:we(x),parentId:rt(ee),node:q})}}}}var L=[];return a.forEach(function(ve,_e){kt(_e)&&L.push({parentId:rt(ve),id:rt(_e)})}),{adds:_,removes:L,hasBeenSerialized:ae};function ae(ve){return kt(ve)&&g.has(rt(ve))}function we(ve){for(var _e=ve.nextSibling;_e;){if(kt(_e))return rt(_e);_e=_e.nextSibling}return null}}(o.filter(function(E){return"childList"===E.type}),r,n),u=s.adds,c=s.removes,v=s.hasBeenSerialized,g=function pv(e,t){for(var r,n=[],a=new Set,o=e.filter(function(_){return!a.has(_.target)&&(a.add(_.target),!0)}),s=0,u=o;s<u.length;s++){var c=u[s];if(c.target.textContent!==c.oldValue){var g=zt(xn(c.target),t.defaultPrivacyLevel);g===de.HIDDEN||g===de.IGNORE||n.push({id:rt(c.target),value:null!==(r=ds(c.target,!1,g))&&void 0!==r?r:null})}}return n}(o.filter(function(E){return"characterData"===E.type&&!v(E.target)}),r),_=function gv(e,t){for(var r=[],n=new Map,a=e.filter(function(V){var q=n.get(V.target);return!q?.has(V.attributeName)&&(q?q.add(V.attributeName):n.set(V.target,new Set([V.attributeName])),!0)}),o=new Map,s=0,u=a;s<u.length;s++){var c=u[s];if(c.target.getAttribute(c.attributeName)!==c.oldValue){var g=zt(c.target,t.defaultPrivacyLevel),_=vs(c.target,g,c.attributeName,t),E=void 0;if("value"===c.attributeName){var T=Pi(c.target,g);if(void 0===T)continue;E=T}else E="string"==typeof _?_:null;var x=o.get(c.target);x||(x={id:rt(c.target),attributes:{}},r.push(x),o.set(c.target,x)),x.attributes[c.attributeName]=E}}return r}(o.filter(function(E){return"attributes"===E.type&&!v(E.target)}),r);!g.length&&!_.length&&!c.length&&!u.length||t({adds:u,removes:c,texts:g,attributes:_})}(u.concat(s.takeRecords()),e,t,r,n)}),s=new a(B(o.addMutations));return s.observe(n,{attributeOldValue:!0,attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),{stop:function(){s.disconnect(),o.stop()},flush:function(){o.flush()}}}function Cs(e,t){Cn(e)&&t(e.shadowRoot),function zc(e){return Cn(e)?e.shadowRoot.childNodes:e.childNodes}(e).forEach(function(r){return Cs(r,t)})}var wv=function(e,t){var r=t.mutationCb,n=t.inputCb,a=new Map,o={addShadowRoot:function(s){var u=Ts(r,e,o,s),c=u.stop,v=u.flush,g=ws(n,e.defaultPrivacyLevel,{target:s,domEvents:["change"]});a.set(s,{flush:v,stop:function(){c(),g()}})},removeShadowRoot:function(s){var u=a.get(s);u&&(u.stop(),a.delete(s))},stop:function(){a.forEach(function(s){return(0,s.stop)()})},flush:function(){a.forEach(function(s){return(0,s.flush)()})}};return o};function Ev(e){var t=e.emit;if(!t)throw new Error("emit function is required");var r=function yv(){var e=new WeakMap;return{set:function(t,r){t===document&&!document.scrollingElement||e.set(t===document?document.scrollingElement:t,r)},get:function(t){return e.get(t)},has:function(t){return e.has(t)}}}(),n=function(_){t(Kt(Bt.Mutation,_))},a=function(_){return t(Kt(Bt.Input,_))},o=wv(e.configuration,{mutationCb:n,inputCb:a}),s=function(_,E){void 0===_&&(_=Le()),void 0===E&&(E={status:0,elementsScrollPositions:r,shadowRootsController:o});var T=Ti();t({data:{height:T.height,href:window.location.href,width:T.width},type:_t.Meta,timestamp:_}),t({data:{has_focus:document.hasFocus()},type:_t.Focus,timestamp:_}),t({data:{node:Xh(document,e.configuration,E),initialOffset:{left:_s(),top:bs()}},type:_t.FullSnapshot,timestamp:_}),window.visualViewport&&t({data:ms(window.visualViewport),type:_t.VisualViewport,timestamp:_})};s();var u=function Sv(e){var t=function bv(){var e=new WeakMap,t=1;return{getIdForEvent:function(r){return e.has(r)||e.set(r,t++),e.get(r)}}}(),r=Ts(e.mutationCb,e.configuration,e.shadowRootsController,document),n=function ev(e){var t=Ct(function(r){var n=qr(r);if(kt(n)){var a=Ss(r);if(!a)return;var o={id:rt(n),timeOffset:0,x:a.x,y:a.y};e([o],ps(r)?Bt.TouchMove:Bt.MouseMove)}},Qh,{trailing:!1}).throttled;return tt(document,["mousemove","touchmove"],t,{capture:!0,passive:!0}).stop}(e.mousemoveCb),a=function nv(e,t,r){return tt(document,Object.keys(ys),function(a){var o=qr(a);if(zt(o,t)!==de.HIDDEN&&kt(o)){var c,s=rt(o),u=ys[a.type];if(u!==bt.Blur&&u!==bt.Focus){var v=Ss(a);if(!v)return;c={id:s,type:u,x:v.x,y:v.y}}else c={id:s,type:u};var g=K({id:r.getIdForEvent(a)},Kt(Bt.MouseInteraction,c));e(g)}},{capture:!0,passive:!0}).stop}(e.mouseInteractionCb,e.configuration.defaultPrivacyLevel,t),o=function rv(e,t,r){var n=Ct(function(a){var o=qr(a);if(o&&zt(o,t)!==de.HIDDEN&&kt(o)){var s=rt(o),u=o===document?{scrollTop:bs(),scrollLeft:_s()}:{scrollTop:Math.round(o.scrollTop),scrollLeft:Math.round(o.scrollLeft)};r.set(o,u),e({id:s,x:u.scrollLeft,y:u.scrollTop})}},tv).throttled;return Ve(document,"scroll",n,{capture:!0,passive:!0}).stop}(e.scrollCb,e.configuration.defaultPrivacyLevel,e.elementsScrollPositions),s=function uv(e){return Eo().subscribe(e).unsubscribe}(e.viewportResizeCb),u=ws(e.inputCb,e.configuration.defaultPrivacyLevel),c=function av(e,t){return tt(document,["play","pause"],function(n){var a=qr(n);!a||zt(a,t)===de.HIDDEN||!kt(a)||e({id:rt(a),type:"play"===n.type?os.Play:os.Pause})},{capture:!0,passive:!0}).stop}(e.mediaInteractionCb,e.configuration.defaultPrivacyLevel),v=function iv(e){function t(a,o){a&&kt(a.ownerNode)&&o(rt(a.ownerNode))}var r=[st(CSSStyleSheet.prototype,"insertRule",{before:function(a,o){t(this,function(s){return e({id:s,adds:[{rule:a,index:o}]})})}}),st(CSSStyleSheet.prototype,"deleteRule",{before:function(a){t(this,function(o){return e({id:o,removes:[{index:a}]})})}})];function n(a){r.push(st(a.prototype,"insertRule",{before:function(o,s){var u=this;t(this.parentStyleSheet,function(c){var v=Es(u);v&&(v.push(s||0),e({id:c,adds:[{rule:o,index:v}]}))})}}),st(a.prototype,"deleteRule",{before:function(o){var s=this;t(this.parentStyleSheet,function(u){var c=Es(s);c&&(c.push(o),e({id:u,removes:[{index:c}]}))})}}))}return typeof CSSGroupingRule<"u"?n(CSSGroupingRule):(n(CSSMediaRule),n(CSSSupportsRule)),function(){return r.forEach(function(a){return a.stop()})}}(e.styleSheetCb),g=function _v(e){return tt(window,["focus","blur"],function(){e({has_focus:document.hasFocus()})}).stop}(e.focusCb),_=function lv(e){var t=window.visualViewport;if(!t)return Oe;var r=Ct(function(){e(ms(t))},sv,{trailing:!1}),a=r.cancel,o=tt(t,["resize","scroll"],r.throttled,{capture:!0,passive:!0}).stop;return function(){o(),a()}}(e.visualViewportResizeCb),E=function ov(e,t,r){return e.subscribe(10,function(n){var a,o,s;"action"===n.rawRumEvent.type&&"click"===n.rawRumEvent.action.type&&null!==(o=null===(a=n.rawRumEvent.action.frustration)||void 0===a?void 0:a.type)&&void 0!==o&&o.length&&"events"in n.domainContext&&null!==(s=n.domainContext.events)&&void 0!==s&&s.length&&t({timestamp:n.rawRumEvent.date,type:_t.FrustrationRecord,data:{frustrationTypes:n.rawRumEvent.action.frustration.type,recordIds:n.domainContext.events.map(function(u){return r.getIdForEvent(u)})}})}).unsubscribe}(e.lifeCycle,e.frustrationCb,t);return{flush:function(){r.flush()},stop:function(){r.stop(),n(),a(),o(),s(),u(),c(),v(),g(),_(),E()}}}({lifeCycle:e.lifeCycle,configuration:e.configuration,elementsScrollPositions:r,inputCb:a,mediaInteractionCb:function(_){return t(Kt(Bt.MediaInteraction,_))},mouseInteractionCb:function(_){return t(_)},mousemoveCb:function(_,E){return t(Kt(E,{positions:_}))},mutationCb:n,scrollCb:function(_){return t(Kt(Bt.Scroll,_))},styleSheetCb:function(_){return t(Kt(Bt.StyleSheetRule,_))},viewportResizeCb:function(_){return t(Kt(Bt.ViewportResize,_))},frustrationCb:function(_){return t(_)},focusCb:function(_){return t({data:_,type:_t.Focus,timestamp:Le()})},visualViewportResizeCb:function(_){t({data:_,type:_t.VisualViewport,timestamp:Le()})},shadowRootsController:o}),c=u.stop,v=u.flush;function g(){o.flush(),v()}return{stop:function(){o.stop(),c()},takeSubsequentFullSnapshot:function(_){g(),s(_,{shadowRootsController:o,status:1,elementsScrollPositions:r})},flushMutations:g,shadowRootsController:o}}function Tv(e,t,r){var n=new FormData;return n.append("segment",new Blob([e],{type:"application/octet-stream"}),"".concat(t.session.id,"-").concat(t.start)),xs(t,function(a,o){return n.append(a,o)}),n.append("raw_segment_size",r.toString()),{data:n,bytesCount:e.byteLength}}function xs(e,t,r){void 0===r&&(r=""),G(e).forEach(function(n){var a=n[0],o=n[1];"object"==typeof o&&null!==o?xs(o,t,"".concat(r).concat(a,".")):t("".concat(r).concat(a),String(o))})}var Ye,Cv=10;function xv(e){return Mn(e).segments_count}function Rs(e){Mn(e).records_count+=1}function Av(e){return Ye?.get(e)}function Mn(e){var t;return Ye||(Ye=new Map),Ye.has(e)?t=Ye.get(e):(Ye.set(e,t={records_count:0,segments_count:0,segments_total_raw_size:0}),Ye.size>Cv&&function Nv(){if(Ye)if(Ye.keys)Ye.delete(Ye.keys().next().value);else{var e=!0;Ye.forEach(function(t,r){e&&(Ye.delete(r),e=!1)})}}()),t}var Hi,Ov=0,kv=function(){function e(t,r,n,a,o,s){var u=this;this.worker=t,this.id=Ov++;var c=r.view.id;this.metadata=K({start:a.timestamp,end:a.timestamp,creation_reason:n,records_count:1,has_full_snapshot:a.type===_t.FullSnapshot,index_in_view:xv(c),source:"browser"},r),function Rv(e){Mn(e).segments_count+=1}(c),Rs(c);var v=Ve(t,"message",function(g){var _=g.data;"errored"===_.type||"initialized"===_.type||(_.id===u.id?(function Iv(e,t){Mn(e).segments_total_raw_size+=t}(c,_.additionalBytesCount),"flushed"===_.type?(s(_.result,_.rawBytesCount),v()):o(_.compressedBytesCount)):_.id>u.id&&(v(),Hr("Segment did not receive a 'flush' response before being replaced.")))}).stop;Br("record",{record:a,segment:this.metadata}),this.worker.postMessage({data:'{"records":['.concat(JSON.stringify(a)),id:this.id,action:"write"})}return e.prototype.addRecord=function(t){var r;this.metadata.start=Math.min(this.metadata.start,t.timestamp),this.metadata.end=Math.max(this.metadata.end,t.timestamp),this.metadata.records_count+=1,Rs(this.metadata.view.id),(r=this.metadata).has_full_snapshot||(r.has_full_snapshot=t.type===_t.FullSnapshot),Br("record",{record:t,segment:this.metadata}),this.worker.postMessage({data:",".concat(JSON.stringify(t)),id:this.id,action:"write"})},e.prototype.flush=function(t){this.worker.postMessage({data:"],".concat(JSON.stringify(this.metadata).slice(1),"\n"),id:this.id,action:"flush"}),this.flushReason=t},e}(),Lv=30*ft,zi=6e4;function Mv(e,t,r,n,a,o){return function Dv(e,t,r,n){var a={status:0,nextSegmentCreationReason:"init"},o=e.subscribe(2,function(){u("view_change")}).unsubscribe,s=e.subscribe(9,function(v){u(v.reason)}).unsubscribe;function u(v){1===a.status&&(a.segment.flush(v),Pe(a.expirationTimeoutId)),a="stop"!==v?{status:0,nextSegmentCreationReason:v}:{status:2}}return{addRecord:function(v){switch(a.status){case 0:!function c(v,g){var _=t();if(_){var E=new kv(n,_,v,g,function(T){!E.flushReason&&T>zi&&u("segment_bytes_limit")},function(T,x){var V=Tv(T,E.metadata,x);Ra(E.flushReason)?r.sendOnExit(V):r.send(V)});a={status:1,segment:E,expirationTimeoutId:xe(function(){u("segment_duration_limit")},Lv)}}}(a.nextSegmentCreationReason,v);break;case 1:a.segment.addRecord(v)}},stop:function(){u("stop"),o(),s()}}}(e,function(){return function Fv(e,t,r){var n=t.findTrackedSession(),a=r.findView();if(n&&a)return{application:{id:e},session:{id:n.id},view:{id:a.id}}}(t,r,n)},a,o)}function Is(){return Hi||(Hi=URL.createObjectURL(new Blob(["(".concat(Uv,")(self)")]))),new Worker(Hi)}function Uv(){function e(r){return function(){try{return r.apply(this,arguments)}catch(n){try{self.postMessage({type:"errored",error:n})}catch{self.postMessage({type:"errored",error:"".concat(n)})}}}}e(function(){var r=function t(){function s(I){for(var i=I.length;--i>=0;)I[i]=0}var T=256,x=286,V=30,L=15,Ht=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),vt=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),z=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),te=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Re=new Array(576);s(Re);var Qr=new Array(60);s(Qr);var en=new Array(512);s(en);var tn=new Array(256);s(tn);var Gi=new Array(29);s(Gi);var Ns,Os,ks,Dn=new Array(V);function Zi(I,i,d,m,p){this.static_tree=I,this.extra_bits=i,this.extra_base=d,this.elems=m,this.max_length=p,this.has_stree=I&&I.length}function Ki(I,i){this.dyn_tree=I,this.max_code=0,this.stat_desc=i}s(Dn);var Ls=function(i){return i<256?en[i]:en[256+(i>>>7)]},rn=function(i,d){i.pending_buf[i.pending++]=255&d,i.pending_buf[i.pending++]=d>>>8&255},nt=function(i,d,m){i.bi_valid>16-m?(i.bi_buf|=d<<i.bi_valid&65535,rn(i,i.bi_buf),i.bi_buf=d>>16-i.bi_valid,i.bi_valid+=m-16):(i.bi_buf|=d<<i.bi_valid&65535,i.bi_valid+=m)},Lt=function(i,d,m){nt(i,m[2*d],m[2*d+1])},Ms=function(i,d){var m=0;do{m|=1&i,i>>>=1,m<<=1}while(--d>0);return m>>>1},Ds=function(i,d,m){var D,R,p=new Array(16),l=0;for(D=1;D<=L;D++)p[D]=l=l+m[D-1]<<1;for(R=0;R<=d;R++){var F=i[2*R+1];0!==F&&(i[2*R]=Ms(p[F]++,F))}},Fs=function(i){var d;for(d=0;d<x;d++)i.dyn_ltree[2*d]=0;for(d=0;d<V;d++)i.dyn_dtree[2*d]=0;for(d=0;d<19;d++)i.bl_tree[2*d]=0;i.dyn_ltree[512]=1,i.opt_len=i.static_len=0,i.last_lit=i.matches=0},Us=function(i){i.bi_valid>8?rn(i,i.bi_buf):i.bi_valid>0&&(i.pending_buf[i.pending++]=i.bi_buf),i.bi_buf=0,i.bi_valid=0},Ps=function(i,d,m,p){var l=2*d,D=2*m;return i[l]<i[D]||i[l]===i[D]&&p[d]<=p[m]},ji=function(i,d,m){for(var p=i.heap[m],l=m<<1;l<=i.heap_len&&(l<i.heap_len&&Ps(d,i.heap[l+1],i.heap[l],i.depth)&&l++,!Ps(d,p,i.heap[l],i.depth));)i.heap[m]=i.heap[l],m=l,l<<=1;i.heap[m]=p},Vs=function(i,d,m){var p,l,R,F,D=0;if(0!==i.last_lit)do{p=i.pending_buf[i.d_buf+2*D]<<8|i.pending_buf[i.d_buf+2*D+1],l=i.pending_buf[i.l_buf+D],D++,0===p?Lt(i,l,d):(Lt(i,(R=tn[l])+T+1,d),0!==(F=Ht[R])&&nt(i,l-=Gi[R],F),p--,R=Ls(p),Lt(i,R,m),0!==(F=vt[R])&&nt(i,p-=Dn[R],F))}while(D<i.last_lit);Lt(i,256,d)},$i=function(i,d){var R,F,$,m=d.dyn_tree,p=d.stat_desc.static_tree,l=d.stat_desc.has_stree,D=d.stat_desc.elems,pe=-1;for(i.heap_len=0,i.heap_max=573,R=0;R<D;R++)0!==m[2*R]?(i.heap[++i.heap_len]=pe=R,i.depth[R]=0):m[2*R+1]=0;for(;i.heap_len<2;)m[2*($=i.heap[++i.heap_len]=pe<2?++pe:0)]=1,i.depth[$]=0,i.opt_len--,l&&(i.static_len-=p[2*$+1]);for(d.max_code=pe,R=i.heap_len>>1;R>=1;R--)ji(i,m,R);$=D;do{R=i.heap[1],i.heap[1]=i.heap[i.heap_len--],ji(i,m,1),F=i.heap[1],i.heap[--i.heap_max]=R,i.heap[--i.heap_max]=F,m[2*$]=m[2*R]+m[2*F],i.depth[$]=(i.depth[R]>=i.depth[F]?i.depth[R]:i.depth[F])+1,m[2*R+1]=m[2*F+1]=$,i.heap[1]=$++,ji(i,m,1)}while(i.heap_len>=2);i.heap[--i.heap_max]=i.heap[1],function(i,d){var $,Xe,rr,Ie,_r,kr,m=d.dyn_tree,p=d.max_code,l=d.stat_desc.static_tree,D=d.stat_desc.has_stree,R=d.stat_desc.extra_bits,F=d.stat_desc.extra_base,pe=d.stat_desc.max_length,Gn=0;for(Ie=0;Ie<=L;Ie++)i.bl_count[Ie]=0;for(m[2*i.heap[i.heap_max]+1]=0,$=i.heap_max+1;$<573;$++)(Ie=m[2*m[2*(Xe=i.heap[$])+1]+1]+1)>pe&&(Ie=pe,Gn++),m[2*Xe+1]=Ie,!(Xe>p)&&(i.bl_count[Ie]++,_r=0,Xe>=F&&(_r=R[Xe-F]),i.opt_len+=(kr=m[2*Xe])*(Ie+_r),D&&(i.static_len+=kr*(l[2*Xe+1]+_r)));if(0!==Gn){do{for(Ie=pe-1;0===i.bl_count[Ie];)Ie--;i.bl_count[Ie]--,i.bl_count[Ie+1]+=2,i.bl_count[pe]--,Gn-=2}while(Gn>0);for(Ie=pe;0!==Ie;Ie--)for(Xe=i.bl_count[Ie];0!==Xe;)!((rr=i.heap[--$])>p)&&(m[2*rr+1]!==Ie&&(i.opt_len+=(Ie-m[2*rr+1])*m[2*rr],m[2*rr+1]=Ie),Xe--)}}(i,d),Ds(m,pe,i.bl_count)},Bs=function(i,d,m){var p,D,l=-1,R=d[1],F=0,pe=7,$=4;for(0===R&&(pe=138,$=3),d[2*(m+1)+1]=65535,p=0;p<=m;p++)D=R,R=d[2*(p+1)+1],!(++F<pe&&D===R)&&(F<$?i.bl_tree[2*D]+=F:0!==D?(D!==l&&i.bl_tree[2*D]++,i.bl_tree[32]++):F<=10?i.bl_tree[34]++:i.bl_tree[36]++,F=0,l=D,0===R?(pe=138,$=3):D===R?(pe=6,$=3):(pe=7,$=4))},zs=function(i,d,m){var p,D,l=-1,R=d[1],F=0,pe=7,$=4;for(0===R&&(pe=138,$=3),p=0;p<=m;p++)if(D=R,R=d[2*(p+1)+1],!(++F<pe&&D===R)){if(F<$)do{Lt(i,D,i.bl_tree)}while(0!=--F);else 0!==D?(D!==l&&(Lt(i,D,i.bl_tree),F--),Lt(i,16,i.bl_tree),nt(i,F-3,2)):F<=10?(Lt(i,17,i.bl_tree),nt(i,F-3,3)):(Lt(i,18,i.bl_tree),nt(i,F-11,7));F=0,l=D,0===R?(pe=138,$=3):D===R?(pe=6,$=3):(pe=7,$=4)}},Hs=!1,Ws=function(i,d,m,p){nt(i,0+(p?1:0),3),function(i,d,m,p){Us(i),p&&(rn(i,m),rn(i,~m)),i.pending_buf.set(i.window.subarray(d,d+m),i.pending),i.pending+=m}(i,d,m,!0)},nn__tr_init=function(i){Hs||(function(){var i,d,m,p,l,D=new Array(16);for(m=0,p=0;p<28;p++)for(Gi[p]=m,i=0;i<1<<Ht[p];i++)tn[m++]=p;for(tn[m-1]=p,l=0,p=0;p<16;p++)for(Dn[p]=l,i=0;i<1<<vt[p];i++)en[l++]=p;for(l>>=7;p<V;p++)for(Dn[p]=l<<7,i=0;i<1<<vt[p]-7;i++)en[256+l++]=p;for(d=0;d<=L;d++)D[d]=0;for(i=0;i<=143;)Re[2*i+1]=8,i++,D[8]++;for(;i<=255;)Re[2*i+1]=9,i++,D[9]++;for(;i<=279;)Re[2*i+1]=7,i++,D[7]++;for(;i<=287;)Re[2*i+1]=8,i++,D[8]++;for(Ds(Re,287,D),i=0;i<V;i++)Qr[2*i+1]=5,Qr[2*i]=Ms(i,5);Ns=new Zi(Re,Ht,257,x,L),Os=new Zi(Qr,vt,0,V,L),ks=new Zi(new Array(0),z,0,19,7)}(),Hs=!0),i.l_desc=new Ki(i.dyn_ltree,Ns),i.d_desc=new Ki(i.dyn_dtree,Os),i.bl_desc=new Ki(i.bl_tree,ks),i.bi_buf=0,i.bi_valid=0,Fs(i)},nn__tr_stored_block=Ws,nn__tr_flush_block=function(i,d,m,p){var l,D,R=0;i.level>0?(2===i.strm.data_type&&(i.strm.data_type=function(i){var m,d=4093624447;for(m=0;m<=31;m++,d>>>=1)if(1&d&&0!==i.dyn_ltree[2*m])return 0;if(0!==i.dyn_ltree[18]||0!==i.dyn_ltree[20]||0!==i.dyn_ltree[26])return 1;for(m=32;m<T;m++)if(0!==i.dyn_ltree[2*m])return 1;return 0}(i)),$i(i,i.l_desc),$i(i,i.d_desc),R=function(i){var d;for(Bs(i,i.dyn_ltree,i.l_desc.max_code),Bs(i,i.dyn_dtree,i.d_desc.max_code),$i(i,i.bl_desc),d=18;d>=3&&0===i.bl_tree[2*te[d]+1];d--);return i.opt_len+=3*(d+1)+5+5+4,d}(i),(D=i.static_len+3+7>>>3)<=(l=i.opt_len+3+7>>>3)&&(l=D)):l=D=m+5,m+4<=l&&-1!==d?Ws(i,d,m,p):4===i.strategy||D===l?(nt(i,2+(p?1:0),3),Vs(i,Re,Qr)):(nt(i,4+(p?1:0),3),function(i,d,m,p){var l;for(nt(i,d-257,5),nt(i,m-1,5),nt(i,p-4,4),l=0;l<p;l++)nt(i,i.bl_tree[2*te[l]+1],3);zs(i,i.dyn_ltree,d-1),zs(i,i.dyn_dtree,m-1)}(i,i.l_desc.max_code+1,i.d_desc.max_code+1,R+1),Vs(i,i.dyn_ltree,i.dyn_dtree)),Fs(i),p&&Us(i)},nn__tr_tally=function(i,d,m){return i.pending_buf[i.d_buf+2*i.last_lit]=d>>>8&255,i.pending_buf[i.d_buf+2*i.last_lit+1]=255&d,i.pending_buf[i.l_buf+i.last_lit]=255&m,i.last_lit++,0===d?i.dyn_ltree[2*m]++:(i.matches++,d--,i.dyn_ltree[2*(tn[m]+T+1)]++,i.dyn_dtree[2*Ls(d)]++),i.last_lit===i.lit_bufsize-1},nn__tr_align=function(i){nt(i,2,3),Lt(i,256,Re),function(i){16===i.bi_valid?(rn(i,i.bi_buf),i.bi_buf=0,i.bi_valid=0):i.bi_valid>=8&&(i.pending_buf[i.pending++]=255&i.bi_buf,i.bi_buf>>=8,i.bi_valid-=8)}(i)},Gs=function(i,d,m,p){for(var l=65535&i|0,D=i>>>16&65535|0,R=0;0!==m;){m-=R=m>2e3?2e3:m;do{D=D+(l=l+d[p++]|0)|0}while(--R);l%=65521,D%=65521}return l|D<<16|0},fp=new Uint32Array(function(){for(var i,d=[],m=0;m<256;m++){i=m;for(var p=0;p<8;p++)i=1&i?3988292384^i>>>1:i>>>1;d[m]=i}return d}()),jt=function(i,d,m,p){var l=fp,D=p+m;i^=-1;for(var R=p;R<D;R++)i=i>>>8^l[255&(i^d[R])];return-1^i},Yi={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Ee={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},vp=nn__tr_init,pp=nn__tr_stored_block,gp=nn__tr_flush_block,$t=nn__tr_tally,mp=nn__tr_align,vr=Ee.Z_NO_FLUSH,_p=Ee.Z_PARTIAL_FLUSH,bp=Ee.Z_FULL_FLUSH,Yt=Ee.Z_FINISH,Zs=Ee.Z_BLOCK,Mt=Ee.Z_OK,Ks=Ee.Z_STREAM_END,pt=Ee.Z_STREAM_ERROR,Sp=Ee.Z_DATA_ERROR,Xi=Ee.Z_BUF_ERROR,yp=Ee.Z_DEFAULT_COMPRESSION,wp=Ee.Z_FILTERED,Fn=Ee.Z_HUFFMAN_ONLY,Ep=Ee.Z_RLE,Tp=Ee.Z_FIXED,Cp=Ee.Z_DEFAULT_STRATEGY,xp=Ee.Z_UNKNOWN,Un=Ee.Z_DEFLATED,Ji=286,kp=30,Lp=19,Mp=2*Ji+1,Dp=15,Xt=258,Et=262,Jt=function(i,d){return i.msg=Yi[d],d},js=function(i){return(i<<1)-(i>4?9:0)},qt=function(i){for(var d=i.length;--d>=0;)i[d]=0},Qt=function(i,d,m){return(d<<i.hash_shift^m)&i.hash_mask},er=function(i){var d=i.state,m=d.pending;m>i.avail_out&&(m=i.avail_out),0!==m&&(i.output.set(d.pending_buf.subarray(d.pending_out,d.pending_out+m),i.next_out),i.next_out+=m,d.pending_out+=m,i.total_out+=m,i.avail_out-=m,d.pending-=m,0===d.pending&&(d.pending_out=0))},Ke=function(i,d){gp(i,i.block_start>=0?i.block_start:-1,i.strstart-i.block_start,d),i.block_start=i.strstart,er(i.strm)},be=function(i,d){i.pending_buf[i.pending++]=d},sn=function(i,d){i.pending_buf[i.pending++]=d>>>8&255,i.pending_buf[i.pending++]=255&d},Vp=function(i,d,m,p){var l=i.avail_in;return l>p&&(l=p),0===l?0:(i.avail_in-=l,d.set(i.input.subarray(i.next_in,i.next_in+l),m),1===i.state.wrap?i.adler=Gs(i.adler,d,l,m):2===i.state.wrap&&(i.adler=jt(i.adler,d,l,m)),i.next_in+=l,i.total_in+=l,l)},$s=function(i,d){var l,D,m=i.max_chain_length,p=i.strstart,R=i.prev_length,F=i.nice_match,pe=i.strstart>i.w_size-Et?i.strstart-(i.w_size-Et):0,$=i.window,Xe=i.w_mask,rr=i.prev,Ie=i.strstart+Xt,_r=$[p+R-1],kr=$[p+R];i.prev_length>=i.good_match&&(m>>=2),F>i.lookahead&&(F=i.lookahead);do{if($[(l=d)+R]===kr&&$[l+R-1]===_r&&$[l]===$[p]&&$[++l]===$[p+1]){p+=2,l++;do{}while($[++p]===$[++l]&&$[++p]===$[++l]&&$[++p]===$[++l]&&$[++p]===$[++l]&&$[++p]===$[++l]&&$[++p]===$[++l]&&$[++p]===$[++l]&&$[++p]===$[++l]&&p<Ie);if(D=Xt-(Ie-p),p=Ie-Xt,D>R){if(i.match_start=d,R=D,D>=F)break;_r=$[p+R-1],kr=$[p+R]}}}while((d=rr[d&Xe])>pe&&0!=--m);return R<=i.lookahead?R:i.lookahead},mr=function(i){var m,p,l,D,R,d=i.w_size;do{if(D=i.window_size-i.lookahead-i.strstart,i.strstart>=d+(d-Et)){i.window.set(i.window.subarray(d,d+d),0),i.match_start-=d,i.strstart-=d,i.block_start-=d,m=p=i.hash_size;do{l=i.head[--m],i.head[m]=l>=d?l-d:0}while(--p);m=p=d;do{l=i.prev[--m],i.prev[m]=l>=d?l-d:0}while(--p);D+=d}if(0===i.strm.avail_in)break;if(p=Vp(i.strm,i.window,i.strstart+i.lookahead,D),i.lookahead+=p,i.lookahead+i.insert>=3)for(i.ins_h=i.window[R=i.strstart-i.insert],i.ins_h=Qt(i,i.ins_h,i.window[R+1]);i.insert&&(i.ins_h=Qt(i,i.ins_h,i.window[R+3-1]),i.prev[R&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=R,R++,i.insert--,!(i.lookahead+i.insert<3)););}while(i.lookahead<Et&&0!==i.strm.avail_in)},Qi=function(i,d){for(var m,p;;){if(i.lookahead<Et){if(mr(i),i.lookahead<Et&&d===vr)return 1;if(0===i.lookahead)break}if(m=0,i.lookahead>=3&&(i.ins_h=Qt(i,i.ins_h,i.window[i.strstart+3-1]),m=i.prev[i.strstart&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=i.strstart),0!==m&&i.strstart-m<=i.w_size-Et&&(i.match_length=$s(i,m)),i.match_length>=3)if(p=$t(i,i.strstart-i.match_start,i.match_length-3),i.lookahead-=i.match_length,i.match_length<=i.max_lazy_match&&i.lookahead>=3){i.match_length--;do{i.strstart++,i.ins_h=Qt(i,i.ins_h,i.window[i.strstart+3-1]),m=i.prev[i.strstart&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=i.strstart}while(0!=--i.match_length);i.strstart++}else i.strstart+=i.match_length,i.match_length=0,i.ins_h=i.window[i.strstart],i.ins_h=Qt(i,i.ins_h,i.window[i.strstart+1]);else p=$t(i,0,i.window[i.strstart]),i.lookahead--,i.strstart++;if(p&&(Ke(i,!1),0===i.strm.avail_out))return 1}return i.insert=i.strstart<2?i.strstart:2,d===Yt?(Ke(i,!0),0===i.strm.avail_out?3:4):i.last_lit&&(Ke(i,!1),0===i.strm.avail_out)?1:2},Or=function(i,d){for(var m,p,l;;){if(i.lookahead<Et){if(mr(i),i.lookahead<Et&&d===vr)return 1;if(0===i.lookahead)break}if(m=0,i.lookahead>=3&&(i.ins_h=Qt(i,i.ins_h,i.window[i.strstart+3-1]),m=i.prev[i.strstart&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=i.strstart),i.prev_length=i.match_length,i.prev_match=i.match_start,i.match_length=2,0!==m&&i.prev_length<i.max_lazy_match&&i.strstart-m<=i.w_size-Et&&(i.match_length=$s(i,m),i.match_length<=5&&(i.strategy===wp||3===i.match_length&&i.strstart-i.match_start>4096)&&(i.match_length=2)),i.prev_length>=3&&i.match_length<=i.prev_length){l=i.strstart+i.lookahead-3,p=$t(i,i.strstart-1-i.prev_match,i.prev_length-3),i.lookahead-=i.prev_length-1,i.prev_length-=2;do{++i.strstart<=l&&(i.ins_h=Qt(i,i.ins_h,i.window[i.strstart+3-1]),m=i.prev[i.strstart&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=i.strstart)}while(0!=--i.prev_length);if(i.match_available=0,i.match_length=2,i.strstart++,p&&(Ke(i,!1),0===i.strm.avail_out))return 1}else if(i.match_available){if((p=$t(i,0,i.window[i.strstart-1]))&&Ke(i,!1),i.strstart++,i.lookahead--,0===i.strm.avail_out)return 1}else i.match_available=1,i.strstart++,i.lookahead--}return i.match_available&&(p=$t(i,0,i.window[i.strstart-1]),i.match_available=0),i.insert=i.strstart<2?i.strstart:2,d===Yt?(Ke(i,!0),0===i.strm.avail_out?3:4):i.last_lit&&(Ke(i,!1),0===i.strm.avail_out)?1:2};function Dt(I,i,d,m,p){this.good_length=I,this.max_lazy=i,this.nice_length=d,this.max_chain=m,this.func=p}var un=[new Dt(0,0,0,0,function(i,d){var m=65535;for(m>i.pending_buf_size-5&&(m=i.pending_buf_size-5);;){if(i.lookahead<=1){if(mr(i),0===i.lookahead&&d===vr)return 1;if(0===i.lookahead)break}i.strstart+=i.lookahead,i.lookahead=0;var p=i.block_start+m;if((0===i.strstart||i.strstart>=p)&&(i.lookahead=i.strstart-p,i.strstart=p,Ke(i,!1),0===i.strm.avail_out)||i.strstart-i.block_start>=i.w_size-Et&&(Ke(i,!1),0===i.strm.avail_out))return 1}return i.insert=0,d===Yt?(Ke(i,!0),0===i.strm.avail_out?3:4):(i.strstart>i.block_start&&Ke(i,!1),1)}),new Dt(4,4,8,4,Qi),new Dt(4,5,16,8,Qi),new Dt(4,6,32,32,Qi),new Dt(4,4,16,16,Or),new Dt(8,16,32,32,Or),new Dt(8,16,128,128,Or),new Dt(8,32,128,256,Or),new Dt(32,128,258,1024,Or),new Dt(32,258,258,4096,Or)];function Gp(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Un,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(2*Mp),this.dyn_dtree=new Uint16Array(2*(2*kp+1)),this.bl_tree=new Uint16Array(2*(2*Lp+1)),qt(this.dyn_ltree),qt(this.dyn_dtree),qt(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(Dp+1),this.heap=new Uint16Array(2*Ji+1),qt(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*Ji+1),qt(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}var Ys=function(i){if(!i||!i.state)return Jt(i,pt);i.total_in=i.total_out=0,i.data_type=xp;var d=i.state;return d.pending=0,d.pending_out=0,d.wrap<0&&(d.wrap=-d.wrap),d.status=d.wrap?42:113,i.adler=2===d.wrap?0:1,d.last_flush=vr,vp(d),Mt},Xs=function(i){var d=Ys(i);return d===Mt&&function(i){i.window_size=2*i.w_size,qt(i.head),i.max_lazy_match=un[i.level].max_lazy,i.good_match=un[i.level].good_length,i.nice_match=un[i.level].nice_length,i.max_chain_length=un[i.level].max_chain,i.strstart=0,i.block_start=0,i.lookahead=0,i.insert=0,i.match_length=i.prev_length=2,i.match_available=0,i.ins_h=0}(i.state),d},Js=function(i,d,m,p,l,D){if(!i)return pt;var R=1;if(d===yp&&(d=6),p<0?(R=0,p=-p):p>15&&(R=2,p-=16),l<1||l>9||m!==Un||p<8||p>15||d<0||d>9||D<0||D>Tp)return Jt(i,pt);8===p&&(p=9);var F=new Gp;return i.state=F,F.strm=i,F.wrap=R,F.gzhead=null,F.w_bits=p,F.w_size=1<<F.w_bits,F.w_mask=F.w_size-1,F.hash_bits=l+7,F.hash_size=1<<F.hash_bits,F.hash_mask=F.hash_size-1,F.hash_shift=~~((F.hash_bits+3-1)/3),F.window=new Uint8Array(2*F.w_size),F.head=new Uint16Array(F.hash_size),F.prev=new Uint16Array(F.w_size),F.lit_bufsize=1<<l+6,F.pending_buf_size=4*F.lit_bufsize,F.pending_buf=new Uint8Array(F.pending_buf_size),F.d_buf=1*F.lit_bufsize,F.l_buf=3*F.lit_bufsize,F.level=d,F.strategy=D,F.method=m,Xs(i)},ln={deflateInit:function(i,d){return Js(i,d,Un,15,8,Cp)},deflateInit2:Js,deflateReset:Xs,deflateResetKeep:Ys,deflateSetHeader:function(i,d){return i&&i.state&&2===i.state.wrap?(i.state.gzhead=d,Mt):pt},deflate:function(i,d){var m,p;if(!i||!i.state||d>Zs||d<0)return i?Jt(i,pt):pt;var l=i.state;if(!i.output||!i.input&&0!==i.avail_in||666===l.status&&d!==Yt)return Jt(i,0===i.avail_out?Xi:pt);l.strm=i;var D=l.last_flush;if(l.last_flush=d,42===l.status)if(2===l.wrap)i.adler=0,be(l,31),be(l,139),be(l,8),l.gzhead?(be(l,(l.gzhead.text?1:0)+(l.gzhead.hcrc?2:0)+(l.gzhead.extra?4:0)+(l.gzhead.name?8:0)+(l.gzhead.comment?16:0)),be(l,255&l.gzhead.time),be(l,l.gzhead.time>>8&255),be(l,l.gzhead.time>>16&255),be(l,l.gzhead.time>>24&255),be(l,9===l.level?2:l.strategy>=Fn||l.level<2?4:0),be(l,255&l.gzhead.os),l.gzhead.extra&&l.gzhead.extra.length&&(be(l,255&l.gzhead.extra.length),be(l,l.gzhead.extra.length>>8&255)),l.gzhead.hcrc&&(i.adler=jt(i.adler,l.pending_buf,l.pending,0)),l.gzindex=0,l.status=69):(be(l,0),be(l,0),be(l,0),be(l,0),be(l,0),be(l,9===l.level?2:l.strategy>=Fn||l.level<2?4:0),be(l,3),l.status=113);else{var R=Un+(l.w_bits-8<<4)<<8;R|=(l.strategy>=Fn||l.level<2?0:l.level<6?1:6===l.level?2:3)<<6,0!==l.strstart&&(R|=32),R+=31-R%31,l.status=113,sn(l,R),0!==l.strstart&&(sn(l,i.adler>>>16),sn(l,65535&i.adler)),i.adler=1}if(69===l.status)if(l.gzhead.extra){for(m=l.pending;l.gzindex<(65535&l.gzhead.extra.length)&&(l.pending!==l.pending_buf_size||(l.gzhead.hcrc&&l.pending>m&&(i.adler=jt(i.adler,l.pending_buf,l.pending-m,m)),er(i),m=l.pending,l.pending!==l.pending_buf_size));)be(l,255&l.gzhead.extra[l.gzindex]),l.gzindex++;l.gzhead.hcrc&&l.pending>m&&(i.adler=jt(i.adler,l.pending_buf,l.pending-m,m)),l.gzindex===l.gzhead.extra.length&&(l.gzindex=0,l.status=73)}else l.status=73;if(73===l.status)if(l.gzhead.name){m=l.pending;do{if(l.pending===l.pending_buf_size&&(l.gzhead.hcrc&&l.pending>m&&(i.adler=jt(i.adler,l.pending_buf,l.pending-m,m)),er(i),m=l.pending,l.pending===l.pending_buf_size)){p=1;break}p=l.gzindex<l.gzhead.name.length?255&l.gzhead.name.charCodeAt(l.gzindex++):0,be(l,p)}while(0!==p);l.gzhead.hcrc&&l.pending>m&&(i.adler=jt(i.adler,l.pending_buf,l.pending-m,m)),0===p&&(l.gzindex=0,l.status=91)}else l.status=91;if(91===l.status)if(l.gzhead.comment){m=l.pending;do{if(l.pending===l.pending_buf_size&&(l.gzhead.hcrc&&l.pending>m&&(i.adler=jt(i.adler,l.pending_buf,l.pending-m,m)),er(i),m=l.pending,l.pending===l.pending_buf_size)){p=1;break}p=l.gzindex<l.gzhead.comment.length?255&l.gzhead.comment.charCodeAt(l.gzindex++):0,be(l,p)}while(0!==p);l.gzhead.hcrc&&l.pending>m&&(i.adler=jt(i.adler,l.pending_buf,l.pending-m,m)),0===p&&(l.status=103)}else l.status=103;if(103===l.status&&(l.gzhead.hcrc?(l.pending+2>l.pending_buf_size&&er(i),l.pending+2<=l.pending_buf_size&&(be(l,255&i.adler),be(l,i.adler>>8&255),i.adler=0,l.status=113)):l.status=113),0!==l.pending){if(er(i),0===i.avail_out)return l.last_flush=-1,Mt}else if(0===i.avail_in&&js(d)<=js(D)&&d!==Yt)return Jt(i,Xi);if(666===l.status&&0!==i.avail_in)return Jt(i,Xi);if(0!==i.avail_in||0!==l.lookahead||d!==vr&&666!==l.status){var pe=l.strategy===Fn?function(i,d){for(var m;;){if(0===i.lookahead&&(mr(i),0===i.lookahead)){if(d===vr)return 1;break}if(i.match_length=0,m=$t(i,0,i.window[i.strstart]),i.lookahead--,i.strstart++,m&&(Ke(i,!1),0===i.strm.avail_out))return 1}return i.insert=0,d===Yt?(Ke(i,!0),0===i.strm.avail_out?3:4):i.last_lit&&(Ke(i,!1),0===i.strm.avail_out)?1:2}(l,d):l.strategy===Ep?function(i,d){for(var m,p,l,D,R=i.window;;){if(i.lookahead<=Xt){if(mr(i),i.lookahead<=Xt&&d===vr)return 1;if(0===i.lookahead)break}if(i.match_length=0,i.lookahead>=3&&i.strstart>0&&(p=R[l=i.strstart-1])===R[++l]&&p===R[++l]&&p===R[++l]){D=i.strstart+Xt;do{}while(p===R[++l]&&p===R[++l]&&p===R[++l]&&p===R[++l]&&p===R[++l]&&p===R[++l]&&p===R[++l]&&p===R[++l]&&l<D);i.match_length=Xt-(D-l),i.match_length>i.lookahead&&(i.match_length=i.lookahead)}if(i.match_length>=3?(m=$t(i,1,i.match_length-3),i.lookahead-=i.match_length,i.strstart+=i.match_length,i.match_length=0):(m=$t(i,0,i.window[i.strstart]),i.lookahead--,i.strstart++),m&&(Ke(i,!1),0===i.strm.avail_out))return 1}return i.insert=0,d===Yt?(Ke(i,!0),0===i.strm.avail_out?3:4):i.last_lit&&(Ke(i,!1),0===i.strm.avail_out)?1:2}(l,d):un[l.level].func(l,d);if((3===pe||4===pe)&&(l.status=666),1===pe||3===pe)return 0===i.avail_out&&(l.last_flush=-1),Mt;if(2===pe&&(d===_p?mp(l):d!==Zs&&(pp(l,0,0,!1),d===bp&&(qt(l.head),0===l.lookahead&&(l.strstart=0,l.block_start=0,l.insert=0))),er(i),0===i.avail_out))return l.last_flush=-1,Mt}return d!==Yt?Mt:l.wrap<=0?Ks:(2===l.wrap?(be(l,255&i.adler),be(l,i.adler>>8&255),be(l,i.adler>>16&255),be(l,i.adler>>24&255),be(l,255&i.total_in),be(l,i.total_in>>8&255),be(l,i.total_in>>16&255),be(l,i.total_in>>24&255)):(sn(l,i.adler>>>16),sn(l,65535&i.adler)),er(i),l.wrap>0&&(l.wrap=-l.wrap),0!==l.pending?Mt:Ks)},deflateEnd:function(i){if(!i||!i.state)return pt;var d=i.state.status;return 42!==d&&69!==d&&73!==d&&91!==d&&103!==d&&113!==d&&666!==d?Jt(i,pt):(i.state=null,113===d?Jt(i,Sp):Mt)},deflateSetDictionary:function(i,d){var m=d.length;if(!i||!i.state)return pt;var p=i.state,l=p.wrap;if(2===l||1===l&&42!==p.status||p.lookahead)return pt;if(1===l&&(i.adler=Gs(i.adler,d,m,0)),p.wrap=0,m>=p.w_size){0===l&&(qt(p.head),p.strstart=0,p.block_start=0,p.insert=0);var D=new Uint8Array(p.w_size);D.set(d.subarray(m-p.w_size,m),0),d=D,m=p.w_size}var R=i.avail_in,F=i.next_in,pe=i.input;for(i.avail_in=m,i.next_in=0,i.input=d,mr(p);p.lookahead>=3;){var $=p.strstart,Xe=p.lookahead-2;do{p.ins_h=Qt(p,p.ins_h,p.window[$+3-1]),p.prev[$&p.w_mask]=p.head[p.ins_h],p.head[p.ins_h]=$,$++}while(--Xe);p.strstart=$,p.lookahead=2,mr(p)}return p.strstart+=p.lookahead,p.block_start=p.strstart,p.insert=p.lookahead,p.lookahead=0,p.match_length=p.prev_length=2,p.match_available=0,i.next_in=F,i.input=pe,i.avail_in=R,p.wrap=l,Mt},deflateInfo:"pako deflate (from Nodeca project)"};for(var ea=new Uint8Array(256),tr=0;tr<256;tr++)ea[tr]=tr>=252?6:tr>=248?5:tr>=240?4:tr>=224?3:tr>=192?2:1;ea[254]=ea[254]=1;var sg=function og(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0},qs=Object.prototype.toString,ug=Ee.Z_NO_FLUSH,lg=Ee.Z_SYNC_FLUSH,cg=Ee.Z_FULL_FLUSH,dg=Ee.Z_FINISH,Hn=Ee.Z_OK,fg=Ee.Z_STREAM_END,hg=Ee.Z_DEFAULT_COMPRESSION,vg=Ee.Z_DEFAULT_STRATEGY,pg=Ee.Z_DEFLATED;function Wn(){this.options={level:hg,method:pg,chunkSize:16384,windowBits:15,memLevel:8,strategy:vg};var I=this.options;I.raw&&I.windowBits>0?I.windowBits=-I.windowBits:I.gzip&&I.windowBits>0&&I.windowBits<16&&(I.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new sg,this.strm.avail_out=0;var i=ln.deflateInit2(this.strm,I.level,I.method,I.windowBits,I.memLevel,I.strategy);if(i!==Hn)throw new Error(Yi[i]);if(I.header&&ln.deflateSetHeader(this.strm,I.header),I.dictionary){var d;if(d="[object ArrayBuffer]"===qs.call(I.dictionary)?new Uint8Array(I.dictionary):I.dictionary,(i=ln.deflateSetDictionary(this.strm,d))!==Hn)throw new Error(Yi[i]);this._dict_set=!0}}return Wn.prototype.push=function(I,i){var p,l,d=this.strm,m=this.options.chunkSize;if(this.ended)return!1;for(l=i===~~i?i:!0===i?dg:ug,d.input="[object ArrayBuffer]"===qs.call(I)?new Uint8Array(I):I,d.next_in=0,d.avail_in=d.input.length;;)if(0===d.avail_out&&(d.output=new Uint8Array(m),d.next_out=0,d.avail_out=m),(l===lg||l===cg)&&d.avail_out<=6)this.onData(d.output.subarray(0,d.next_out)),d.avail_out=0;else{if((p=ln.deflate(d,l))===fg)return d.next_out>0&&this.onData(d.output.subarray(0,d.next_out)),p=ln.deflateEnd(this.strm),this.onEnd(p),this.ended=!0,p===Hn;if(0!==d.avail_out){if(l>0&&d.next_out>0)this.onData(d.output.subarray(0,d.next_out)),d.avail_out=0;else if(0===d.avail_in)break}else this.onData(d.output)}return!0},Wn.prototype.onData=function(I){this.chunks.push(I)},Wn.prototype.onEnd=function(I){I===Hn&&(this.result=function ag(I){for(var i=0,d=0,m=I.length;d<m;d++)i+=I[d].length;for(var p=new Uint8Array(i),l=0,D=0,R=I.length;l<R;l++){var F=I[l];p.set(F,D),D+=F.length}return p}(this.chunks)),this.chunks=[],this.err=I,this.msg=this.strm.msg},{Deflate:Wn,constants:Ee,string2buf:function gg(I){if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(I);var i,d,m,p,l,D=I.length,R=0;for(p=0;p<D;p++)55296==(64512&(d=I.charCodeAt(p)))&&p+1<D&&56320==(64512&(m=I.charCodeAt(p+1)))&&(d=65536+(d-55296<<10)+(m-56320),p++),R+=d<128?1:d<2048?2:d<65536?3:4;for(i=new Uint8Array(R),l=0,p=0;l<R;p++)55296==(64512&(d=I.charCodeAt(p)))&&p+1<D&&56320==(64512&(m=I.charCodeAt(p+1)))&&(d=65536+(d-55296<<10)+(m-56320),p++),d<128?i[l++]=d:d<2048?(i[l++]=192|d>>>6,i[l++]=128|63&d):d<65536?(i[l++]=224|d>>>12,i[l++]=128|d>>>6&63,i[l++]=128|63&d):(i[l++]=240|d>>>18,i[l++]=128|d>>>12&63,i[l++]=128|d>>>6&63,i[l++]=128|63&d);return i}}}(),n=r.Deflate,a=r.constants,o=r.string2buf,s=new n,u=0;function c(v){var g=o(v);return s.push(g,a.Z_SYNC_FLUSH),u+=g.length,g.length}self.addEventListener("message",e(function(v){var g=v.data;switch(g.action){case"init":self.postMessage({type:"initialized"});break;case"write":var _=c(g.data);self.postMessage({type:"wrote",id:g.id,compressedBytesCount:s.chunks.reduce(function(E,T){return E+T.length},0),additionalBytesCount:_});break;case"flush":_=g.data?c(g.data):0,s.push("",a.Z_FINISH),self.postMessage({type:"flushed",id:g.id,result:s.result,additionalBytesCount:_,rawBytesCount:u}),s=new n,u=0}}))})()}var yt={status:0};function Pv(e,t){switch(void 0===t&&(t=Is),yt.status){case 0:yt={status:1,callbacks:[e]},function Vv(e){void 0===e&&(e=Is);try{var t=e();Ve(t,"error",Wi),Ve(t,"message",function(r){var n=r.data;"errored"===n.type?Wi(n.error):"initialized"===n.type&&function Bv(e){1===yt.status&&(yt.callbacks.forEach(function(t){return t(e)}),yt={status:3,worker:e})}(t)}),t.postMessage({action:"init"})}catch(r){Wi(r)}}(t);break;case 1:yt.callbacks.push(e);break;case 2:e();break;case 3:e(yt.worker)}}function Wi(e){1===yt.status?(W.error("Session Replay recording failed to start: an error occurred while creating the Worker:",e),e instanceof Event||e instanceof Error&&function zv(e){return J(e,"Content Security Policy")||J(e,"requires 'TrustedScriptURL'")}(e.message)?W.error("Please make sure CSP is correctly configured https://docs.datadoghq.com/real_user_monitoring/faq/content_security_policy"):bn(e),yt.callbacks.forEach(function(t){return t()}),yt={status:2}):bn(e)}function As(){return"function"==typeof Array.from&&"function"==typeof CSSSupportsRule&&"function"==typeof URL.createObjectURL&&"forEach"in NodeList.prototype}function Wv(e,t,r,n){var a=t.findTrackedSession(),o=function Gv(e,t){return As()?e?e.sessionReplayAllowed?t?void 0:"replay-not-started":"incorrect-session-plan":"rum-not-tracked":"browser-not-supported"}(a,n);return function hh(e,t){var r=t.session,n=t.viewContext,a=t.errorType,o=r?r.id:"no-session-id",s=[];void 0!==a&&s.push("error-type=".concat(a)),n&&(s.push("seed=".concat(n.id)),s.push("from=".concat(n.startClocks.timeStamp)));var u=function vh(e){var t=e.site,r=e.subdomain||function ph(e){switch(e.site){case Tr:case mu:return"app";case ha:return"dd";default:return}}(e);return"https://".concat(r?"".concat(r,"."):"").concat(t)}(e),c="/rum/replay/sessions/".concat(o);return"".concat(u).concat(c,"?").concat(s.join("&"))}(e,{viewContext:r.findView(),errorType:o,session:a})}var jv=function kc(e,t,r){var a=(void 0===r?{}:r).ignoreInitIfSyntheticsWillInjectRum,o=void 0===a||a,s=!1,u=Lr("global context"),c=Lr("user"),v=function(){},g=function(){},_=Oe,E=function(){},T=new jn,x=function(z,te){void 0===te&&(te=Le()),T.add(function(){return x(z,te)})},V=function(z,te){void 0===te&&(te=et()),T.add(function(){return V(z,te)})},q=function(z,te){void 0===te&&(te=mi(u,c,t)),T.add(function(){return q(z,te)})},ee=function(z,te){void 0===te&&(te=mi(u,c,t)),T.add(function(){return ee(z,te)})},L=function(z,te){T.add(function(){return L(z,te)})};function we(z,te,lt){var Re=e(z,te,t,u,c,lt);E=function(){return t.getSessionReplayLink(te,Re.session,Re.viewContexts)},V=Re.startView,q=Re.addAction,ee=Re.addError,x=Re.addTiming,L=Re.addFeatureFlagEvaluation,v=Re.getInternalContext,_=Re.stopSession,T.drain(),t.onRumStart(Re.lifeCycle,te,Re.session,Re.viewContexts)}var ve=B(function(z){V("object"==typeof z?z:{name:z})});return Q({init:B(function ae(z){if(g=function(){return dt(z)},!o||!_n()){if(Rt())z=function Ht(z){return K({},z,{applicationId:"00000000-aaaa-0000-aaaa-000000000000",clientToken:"empty",sessionSampleRate:100})}(z);else if(!function wt(z){return la(pa(z))?!function vt(){return"file:"===window.location.protocol}()||(W.error("Execution is not allowed in the current context."),!1):(W.warn("Cookies are not authorized, we will not send any data."),!1)}(z))return;if(function Ze(z){return!s||(z.silentMultipleInit||W.error("DD_RUM is already initialized."),!1)}(z)){var te=function Rc(e){var t,r,n,a,o,s;if(e.applicationId)if(void 0===e.sessionReplaySampleRate||wr(e.sessionReplaySampleRate)){var u=null!==(t=e.premiumSampleRate)&&void 0!==t?t:e.replaySampleRate;if(void 0!==u&&void 0!==e.sessionReplaySampleRate&&(W.warn("Ignoring Premium Sample Rate because Session Replay Sample Rate is set"),u=void 0),void 0===u||wr(u)){var c=null!==(r=e.traceSampleRate)&&void 0!==r?r:e.tracingSampleRate;if(void 0===c||wr(c))if(void 0===e.excludedActivityUrls||Array.isArray(e.excludedActivityUrls)){var v=function Ic(e){if(void 0!==e.allowedTracingUrls&&void 0!==e.allowedTracingOrigins&&W.warn("Both allowedTracingUrls and allowedTracingOrigins (deprecated) have been defined. The parameter allowedTracingUrls will override allowedTracingOrigins."),void 0!==e.allowedTracingUrls){if(!Array.isArray(e.allowedTracingUrls))return void W.error("Allowed Tracing URLs should be an array");if(0!==e.allowedTracingUrls.length&&void 0===e.service)return void W.error("Service needs to be configured when tracing is enabled");var t=[];return e.allowedTracingUrls.forEach(function(n){gi(n)?t.push({match:n,propagatorTypes:["datadog"]}):function wc(e){var t=e;return"object"===Wt(t)&&gi(t.match)&&Array.isArray(t.propagatorTypes)}(n)?t.push(n):W.warn("Allowed Tracing Urls parameters should be a string, RegExp, function, or an object. Ignoring parameter",n)}),t}if(void 0!==e.allowedTracingOrigins){if(!Array.isArray(e.allowedTracingOrigins))return void W.error("Allowed Tracing Origins should be an array");if(0!==e.allowedTracingOrigins.length&&void 0===e.service)return void W.error("Service needs to be configured when tracing is enabled");var r=[];return e.allowedTracingOrigins.forEach(function(n){var a=function Ac(e){var t;if("string"==typeof e?t=e:e instanceof RegExp?t=function(r){return e.test(pn(r))}:"function"==typeof e&&(t=function(r){return e(pn(r))}),void 0!==t)return{match:t,propagatorTypes:["datadog"]};W.warn("Allowed Tracing Origins parameters should be a string, RegExp or function. Ignoring parameter",e)}(n);a&&r.push(a)}),r}return[]}(e);if(v){var g=va(e);if(g){var _=!!(null!==(n=e.trackUserInteractions)&&void 0!==n?n:e.trackInteractions),E=!!e.trackFrustrations;return K({applicationId:e.applicationId,version:e.version,actionNameAttribute:e.actionNameAttribute,sessionReplaySampleRate:null!==(o=null!==(a=e.sessionReplaySampleRate)&&void 0!==a?a:u)&&void 0!==o?o:100,oldPlansBehavior:void 0===e.sessionReplaySampleRate,traceSampleRate:c,allowedTracingUrls:v,excludedActivityUrls:null!==(s=e.excludedActivityUrls)&&void 0!==s?s:[],trackUserInteractions:_||E,trackFrustrations:E,trackViewsManually:!!e.trackViewsManually,trackResources:e.trackResources,trackLongTasks:e.trackLongTasks,subdomain:e.subdomain,defaultPrivacyLevel:ca(Pr,e.defaultPrivacyLevel)?e.defaultPrivacyLevel:Pr.MASK_USER_INPUT,customerDataTelemetrySampleRate:1},g)}}}else W.error("Excluded Activity Urls should be an array");else W.error("Trace Sample Rate should be a number between 0 and 100")}else W.error("Premium Sample Rate should be a number between 0 and 100")}else W.error("Session Replay Sample Rate should be a number between 0 and 100");else W.error("Application ID is not configured, no RUM data will be collected.")}(z);if(te){if(te.trackViewsManually){var lt=T;T=new jn,V=function(Re){we(z,te,Re)},lt.drain()}else we(z,te);s=!0}}}}),addRumGlobalContext:B(u.add),setGlobalContextProperty:B(u.setContextProperty),removeRumGlobalContext:B(u.remove),removeGlobalContextProperty:B(u.removeContextProperty),getRumGlobalContext:B(u.get),getGlobalContext:B(u.getContext),setRumGlobalContext:B(u.set),setGlobalContext:B(u.setContext),clearGlobalContext:B(u.clearContext),getInternalContext:B(function(z){return v(z)}),getInitConfiguration:B(function(){return g()}),addAction:B(function(z,te){q({name:re(H.SANITIZE_INPUTS)?$e(z):z,context:re(H.SANITIZE_INPUTS)?$e(te):dt(te),startClocks:et(),type:"custom"})}),addError:function(z,te){var lt=Sa();De(function(){ee({error:z,handlingStack:lt,context:re(H.SANITIZE_INPUTS)?$e(te):dt(te),startClocks:et()})})},addTiming:B(function(z,te){x(re(H.SANITIZE_INPUTS)?$e(z):z,te)}),setUser:B(function(z){oa(z)&&c.setContext(fn(z))}),getUser:B(c.getContext),setUserProperty:B(function(z,te){var lt,Re=fn((lt={},lt[z]=te,lt))[z];c.setContextProperty(z,Re)}),removeUserProperty:B(c.removeContextProperty),removeUser:B(c.clearContext),clearUser:B(c.clearContext),startView:ve,stopSession:B(function(){_()}),startSessionReplayRecording:B(t.start),stopSessionReplayRecording:B(t.stop),addFeatureFlagEvaluation:B(function(z,te){L(re(H.SANITIZE_INPUTS)?$e(z):z,re(H.SANITIZE_INPUTS)?$e(te):te)}),getSessionReplayLink:B(function(){return E()})})}(function ch(e,t,r,n,a,o){var s=new md;s.subscribe(11,function(z){return Br("rum",z)});var u=function dh(e){var t=Na("browser-rum-sdk",e);if(Rt()){var r=Dr();t.observable.subscribe(function(n){return r.send("internal_telemetry",n)})}return t}(t);u.setContextProvider(function(){var z,te;return{application:{id:t.applicationId},session:{id:null===(z=E.findTrackedSession())||void 0===z?void 0:z.id},view:{id:null===(te=q.findView())||void 0===te?void 0:te.id},action:{id:ae.findActionId()}}});var c=function(z){s.notify(12,{error:z})},v=function ih(e,t){if(void 0===t&&(t=ie),!re(H.FEATURE_FLAGS))return{findFeatureFlagEvaluations:function(){},getFeatureFlagBytesCount:function(){return 0},addFeatureFlagEvaluation:Oe};var r=new Wr(rh),n=0,a=!1;e.subscribe(4,function(s){r.closeActive(s.endClocks.relative)}),e.subscribe(2,function(s){r.add({},s.startClocks.relative),n=0});var o=Ct(function(s){n=t(Pt(s)),a||(a=ra(n,"feature flag evaluation"))},200).throttled;return{findFeatureFlagEvaluations:function(s){return r.find(s)},getFeatureFlagBytesCount:function(){return r.find()?n:0},addFeatureFlagEvaluation:function(s,u){var c=r.find();c&&(c[s]=u,o(c))}}}(s);if(Rt())!function Xf(e){var t=Dr();e.subscribe(11,function(r){t.send("rum",r)})}(s);else{var g=xa();g.subscribe(function(z){s.notify(9,z)});var _=function $f(e,t,r,n,a){var o=function Yf(e,t,r){var s,n=c(e.rumEndpointBuilder),a=n.batch,o=n.flushController,u=e.replica;function c(g){var _=Ga({messagesLimit:e.batchMessagesLimit,bytesLimit:e.batchBytesLimit,durationLimit:e.flushTimeout,pageExitObservable:r});return{batch:new La(ii(g,e.batchBytesLimit,t),_,e.messageBytesLimit),flushController:_}}function v(g){return Qe(g,{application:{id:u.applicationId}})}return void 0!==u&&(s=c(u.rumEndpointBuilder).batch),{flushObservable:o.flushObservable,add:function(g,_){void 0===_&&(_=!0),a.add(g),s&&_&&s.add(v(g))},upsert:function(g,_){a.upsert(g,_),s&&s.upsert(v(g),_)}}}(e,n,a);return t.subscribe(11,function(s){"view"===s.type?o.upsert(s,s.view.id):o.add(s)}),r.subscribe(function(s){return o.add(s,Oa(e))}),o}(t,s,u.observable,c,g);!function oh(e,t,r,n,a,o,s){t.enabled&&nr(e.customerDataTelemetrySampleRate)&&(ns(),is(),r.subscribe(11,function(c){Mi=!0,Jr(cr.globalContextBytes,At(n.get())?0:n.getBytesCount()),Jr(cr.userContextBytes,At(a.get())?0:a.getBytesCount());var v=o.findFeatureFlagEvaluations(),g=J(["view","error"],c.type)&&v&&!At(v);Jr(cr.featureFlagBytes,g?o.getFeatureFlagBytesCount():0)}),s.subscribe(function(c){var v=c.bytesCount,g=c.messagesCount;Mi&&(Vt.batchCount+=1,Jr(Vt.batchBytesCount,v),Jr(Vt.batchMessagesCount,g),Di(Vt.globalContextBytes,cr.globalContextBytes),Di(Vt.userContextBytes,cr.userContextBytes),Di(Vt.featureFlagBytes,cr.featureFlagBytes),is())}),it(sh,ah))}(t,u,s,n,a,v,_.flushObservable)}var E=Rt()?function Zf(){var e={id:"00000000-aaaa-0000-aaaa-000000000000",plan:1,sessionReplayAllowed:!1,longTaskAllowed:!0,resourceAllowed:!0};return{findTrackedSession:function(){return e},expire:Oe}}():function Gf(e,t){var r=Qa(e.cookieOptions,Wf,function(n){return function Kf(e,t){var r;return{trackingType:r=function jf(e){return"0"===e||"1"===e||"2"===e}(t)?t:nr(e.sessionSampleRate)?nr(e.sessionReplaySampleRate)?"1":"2":"0",isTracked:rs(r)}}(e,n)});return r.expireObservable.subscribe(function(){t.notify(7)}),r.renewObservable.subscribe(function(){t.notify(8)}),{findTrackedSession:function(n){var a=r.findActiveSession(n);if(a&&rs(a.trackingType)){var o="1"===a.trackingType?2:1;return{id:a.id,plan:o,sessionReplayAllowed:2===o,longTaskAllowed:void 0!==e.trackLongTasks?e.trackLongTasks:e.oldPlansBehavior&&2===o,resourceAllowed:void 0!==e.trackResources?e.trackResources:e.oldPlansBehavior&&2===o}}},expire:r.expire}}(t,s),T=function Lc(){var e=vo(),t=new ze(function(){if(e){var r=new e(B(function(){return t.notify()}));return r.observe(document,{attributes:!0,characterData:!0,childList:!0,subtree:!0}),function(){return r.disconnect()}}});return t}(),x=function Qf(e){var t=Fr(e),r=new ze(function(){var a=function eh(e){var t=st(history,"pushState",{after:e}).stop,r=st(history,"replaceState",{after:e}).stop,n=Ve(window,"popstate",e).stop;return{stop:function(){t(),r(),n()}}}(n).stop,o=function th(e){return Ve(window,"hashchange",e)}(n).stop;return function(){a(),o()}});function n(){if(t.href!==e.href){var a=Fr(e);r.notify({newLocation:a,oldLocation:t}),t=a}}return r}(location),V=function fh(e,t,r,n,a,o,s,u){var c=function bd(e){var t=new Wr(_d);return e.subscribe(2,function(n){t.add(function r(n){return{service:n.service,version:n.version,id:n.id,name:n.name,startClocks:n.startClocks}}(n),n.startClocks.relative)}),e.subscribe(4,function(n){t.closeActive(n.endClocks.relative)}),e.subscribe(8,function(){t.reset()}),{findView:function(n){return t.find(n)},stop:function(){t.stop()}}}(e),v=function qf(e,t,r){var a,n=new Wr(Jf);e.subscribe(4,function(u){n.closeActive(u.endClocks.relative)}),e.subscribe(2,function(u){var c=u.startClocks,v=r.href;n.add(s({url:v,referrer:a||document.referrer}),c.relative),a=v});var o=t.subscribe(function(u){var c=u.newLocation,v=n.find();if(v){var g=gt();n.closeActive(g),n.add(s({url:c.href,referrer:v.referrer}),g)}});function s(u){return{url:u.url,referrer:u.referrer}}return{findUrl:function(u){return n.find(u)},stop:function(){o.unsubscribe(),n.stop()}}}(e,a,r),g=function cd(){document.hasFocus()&&Io();var e=function fd(e){return Ve(window,"focus",function(t){t.isTrusted&&e()})}(Io).stop,t=function hd(e){return Ve(window,"blur",function(t){t.isTrusted&&e()})}(dd).stop;return{isInForegroundAt:vd,selectInForegroundPeriodsFor:pd,stop:function(){ut=[],e(),t()}}}(),_=function uf(e,t,r,n){e.subscribe(1,function(o){return e.notify(10,jo(o,n))});var a={findActionId:Oe};return r.trackUserInteractions&&(a=rf(e,t,r).actionContexts),{addAction:function(o,s){e.notify(10,K({savedCommonContext:s},jo(o,n)))},actionContexts:a}}(e,o,t,g),E=_.addAction,T=_.actionContexts;return function ad(e,t,r,n,a,o,s,u){var c,v=((c={}).error=li("error",e.eventRateLimiterThreshold,u),c.action=li("action",e.eventRateLimiterThreshold,u),c),g=function Qc(){var e=Ia(),t=Aa();if(e&&t)return{test_id:e,result_id:t,injected:_n()}}(),_=function ed(){var e,t=null===(e=window.Cypress)||void 0===e?void 0:e.env("traceId");if("string"==typeof t)return{test_execution_id:t}}();t.subscribe(10,function(E){var T=E.startTime,x=E.rawRumEvent,V=E.domainContext,q=E.savedCommonContext,ee=E.customerContext,L=n.findView(T),ae=a.findUrl(T),we=r.findTrackedSession("view"!==x.type?T:void 0);if(we&&L&&ae){var ve=q||s(),_e=o.findActionId(T),Ze=Qe({_dd:{format_version:2,drift:Math.round(xt()-ir(Mr(),performance.now())),session:{plan:we.plan},browser_sdk_version:Rt()?"4.39.0":void 0},application:{id:e.applicationId},date:Le(),service:L.service||e.service,version:L.version||e.version,source:"browser",session:{id:we.id,type:g?"synthetics":_?"ci_test":"user"},view:{id:L.id,name:L.name,url:ae.url,referrer:ae.referrer},action:sd(x)&&_e?{id:_e}:void 0,synthetics:g,ci_test:_,display:rd()},x);Ze.context=Qe(ve.context,ee),"has_replay"in Ze.session||(Ze.session.has_replay=ve.hasReplay),At(ve.user)||(Ze.usr=ve.user),function od(e,t,r,n){var a;if(t){var o=function nd(e,t,r){var n=dt(e),a=r(n);return t.forEach(function(o){var s=To(e,o),u=To(n,o),c=Wt(s),v=Wt(u);v===c?Co(e,o,re(H.SANITIZE_INPUTS)?$e(u):u):"object"===c&&("undefined"===v||"null"===v)&&Co(e,o,{})}),a}(e,"view"===e.type?Ro:id,function(u){return t(u,r)});if(!1===o&&"view"!==e.type)return!1;!1===o&&W.warn("Can't dismiss view events using beforeSend!")}return!(null===(a=n[e.type])||void 0===a?void 0:a.isLimitReached())}(Ze,e.beforeSend,V,v)&&(At(Ze.context)&&delete Ze.context,t.notify(11,Ze))}})}(t,e,n,c,v,T,s,u),{viewContexts:c,foregroundContexts:g,urlContexts:v,addAction:E,actionContexts:T,stop:function(){c.stop(),g.stop()}}}(s,t,location,E,x,T,function(){return mi(n,a,r)},c),q=V.viewContexts,ee=V.foregroundContexts,L=V.urlContexts,ae=V.actionContexts,we=V.addAction;ka(function Oc(e){var t,r,n=ga(e);return K({premium_sample_rate:e.premiumSampleRate,replay_sample_rate:e.replaySampleRate,session_replay_sample_rate:e.sessionReplaySampleRate,trace_sample_rate:null!==(t=e.traceSampleRate)&&void 0!==t?t:e.tracingSampleRate,action_name_attribute:e.actionNameAttribute,use_allowed_tracing_origins:Array.isArray(e.allowedTracingOrigins)&&e.allowedTracingOrigins.length>0,use_allowed_tracing_urls:Array.isArray(e.allowedTracingUrls)&&e.allowedTracingUrls.length>0,selected_tracing_propagators:Nc(e),default_privacy_level:e.defaultPrivacyLevel,use_excluded_activity_urls:Array.isArray(e.allowedTracingOrigins)&&e.allowedTracingOrigins.length>0,track_frustrations:e.trackFrustrations,track_views_manually:e.trackViewsManually,track_user_interactions:null!==(r=e.trackUserInteractions)&&void 0!==r?r:e.trackInteractions},n)}(e)),function vf(e,t){e.subscribe(0,function(r){for(var n=0,a=r;n<a.length;n++){var o=a[n];if("longtask"!==o.entryType)break;var s=t.findTrackedSession(o.startTime);if(!s||!s.longTaskAllowed)break;var u=$n(o.startTime),c={date:u.timeStamp,long_task:{id:ot(),duration:Fe(o.duration)},type:"long_task",_dd:{discarded:!1}};e.notify(10,{rawRumEvent:c,startTime:u.relative,domainContext:{performanceEntry:o.toJSON()}})}})}(s,E);var ve=function lh(){return On(as()),{findAll:function(t,r){for(var n=[],a=ir(t,r),o=dr.length-1;o>=0;o--){var s=dr[o].startTime;if(!(s>=a)&&(n.unshift(dr[o]),s<t))break}return n.length?n:void 0},stop:tt(window,["pageshow","focus","blur","visibilitychange","resume","freeze","pagehide"],function(t){t.isTrusted&&On("freeze"===t.type?"frozen":"pagehide"===t.type?t.persisted?"frozen":"terminated":as())},{capture:!0}).stop}}();mf(s,t,E,ve);var _e=function Bf(e,t,r,n,a,o,s,u,c){return e.subscribe(3,function(v){return e.notify(10,function zf(e,t,r,n){var a=n.getReplayStats(e.id),o=r.findFeatureFlagEvaluations(e.startClocks.relative),s={_dd:{document_version:e.documentVersion,replay_stats:a},date:e.startClocks.timeStamp,type:"view",view:{action:{count:e.eventCounts.actionCount},frustration:{count:e.eventCounts.frustrationCount},cumulative_layout_shift:e.cumulativeLayoutShift,first_byte:Fe(e.timings.firstByte),dom_complete:Fe(e.timings.domComplete),dom_content_loaded:Fe(e.timings.domContentLoaded),dom_interactive:Fe(e.timings.domInteractive),error:{count:e.eventCounts.errorCount},first_contentful_paint:Fe(e.timings.firstContentfulPaint),first_input_delay:Fe(e.timings.firstInputDelay),first_input_time:Fe(e.timings.firstInputTime),is_active:e.isActive,name:e.name,largest_contentful_paint:Fe(e.timings.largestContentfulPaint),load_event:Fe(e.timings.loadEvent),loading_time:Hf(Fe(e.loadingTime)),loading_type:e.loadingType,long_task:{count:e.eventCounts.longTaskCount},resource:{count:e.eventCounts.resourceCount},time_spent:Fe(e.duration),in_foreground_periods:t.selectInForegroundPeriodsFor(e.startClocks.relative,e.duration)},feature_flags:o&&!At(o)?o:void 0,session:{has_replay:!!a||void 0}};return At(e.customTimings)||(s.view.custom_timings=function fu(e,t){for(var r={},n=0,a=Object.keys(e);n<a.length;n++){var o=a[n];r[o]=t(e[o])}return r}(e.customTimings,Fe)),{rawRumEvent:s,startTime:e.startClocks.relative,domainContext:{location:e.location}}}(v,o,s,u))}),Ff(r,e,n,t,a,!t.trackViewsManually,c)}(s,t,location,T,x,ee,v,r,o),wt=_e.addTiming,Ze=_e.startView,Ht=function df(e,t,r){var n=new ze;return function lf(e){no([ce.error]).subscribe(function(r){return e.notify({startClocks:et(),message:r.message,stack:r.stack,source:Ue.CONSOLE,handling:"handled",handlingStack:r.handlingStack})})}(n),uo(n),function cf(e){wa([Ot.cspViolation,Ot.intervention]).subscribe(function(r){return e.notify({startClocks:et(),message:r.message,stack:r.stack,type:r.subtype,source:Ue.REPORT,handling:"unhandled"})})}(n),n.subscribe(function(a){return e.notify(12,{error:a})}),function ff(e,t,r){return e.subscribe(12,function(n){e.notify(10,K({customerContext:n.customerContext,savedCommonContext:n.savedCommonContext},function hf(e,t,r){var n={date:e.startClocks.timeStamp,error:{id:ot(),message:e.message,source:e.source,stack:e.stack,handling_stack:e.handlingStack,type:e.type,handling:e.handling,causes:e.causes,source_type:"browser"},type:"error"},a=t.isInForegroundAt(e.startClocks.relative);a&&(n.view={in_foreground:a});var o=r.findFeatureFlagEvaluations(e.startClocks.relative);return o&&!At(o)&&(n.feature_flags=o),{rawRumEvent:n,startTime:e.startClocks.relative,domainContext:{error:e.originalError}}}(n.error,t,r)))}),{addError:function(n,a){var o=n.error,s=n.handlingStack,u=n.startClocks,c=n.context,g=ei({stackTrace:o instanceof Error?Nt(o):void 0,originalError:o,handlingStack:s,startClocks:u,nonErrorPrefix:_a,source:Ue.CUSTOM,handling:"handled"});e.notify(12,{customerContext:c,savedCommonContext:a,error:g})}}}(e,t,r)}(s,ee,v).addError;(function Sd(e,t,r){var n=function Tc(e,t){return{clearTracingIfNeeded:Ec,traceFetch:function(r){return co(e,r,t,function(n){var a;if(r.input instanceof Request&&(null===(a=r.init)||void 0===a||!a.headers))r.input=new Request(r.input),Object.keys(n).forEach(function(s){r.input.headers.append(s,n[s])});else{r.init=Fr(r.init);var o=[];r.init.headers instanceof Headers?r.init.headers.forEach(function(s,u){o.push([u,s])}):Array.isArray(r.init.headers)?r.init.headers.forEach(function(s){o.push(s)}):r.init.headers&&Object.keys(r.init.headers).forEach(function(s){o.push([s,r.init.headers[s]])}),r.init.headers=o.concat(G(n))}})},traceXhr:function(r,n){return co(e,r,t,function(a){Object.keys(a).forEach(function(o){n.setRequestHeader(o,a[o])})})}}}(t,r);(function yd(e,t,r){ao().subscribe(function(a){var o=a;if(Si(t,o.url))switch(o.state){case"start":r.traceXhr(o,o.xhr),o.requestIndex=No(),e.notify(5,{requestIndex:o.requestIndex,url:o.url});break;case"complete":r.clearTracingIfNeeded(o),e.notify(6,{duration:o.duration,method:o.method,requestIndex:o.requestIndex,spanId:o.spanId,startClocks:o.startClocks,status:o.status,traceId:o.traceId,traceSampled:o.traceSampled,type:"xhr",url:o.url,xhr:o.xhr})}})})(e,t,n),function wd(e,t,r){oo().subscribe(function(a){var o=a;if(Si(t,o.url))switch(o.state){case"start":r.traceFetch(o),o.requestIndex=No(),e.notify(5,{requestIndex:o.requestIndex,url:o.url});break;case"resolve":!function Ed(e,t){var r=e.response&&Da(e.response);r&&r.body?so(r.body,function(){t(at(e.startClocks.timeStamp,Le()))},{bytesLimit:Number.POSITIVE_INFINITY,collectStreamBody:!1}):t(at(e.startClocks.timeStamp,Le()))}(o,function(s){r.clearTracingIfNeeded(o),e.notify(6,{duration:s,method:o.method,requestIndex:o.requestIndex,responseType:o.responseType,spanId:o.spanId,startClocks:o.startClocks,status:o.status,traceId:o.traceId,traceSampled:o.traceSampled,type:"fetch",url:o.url,response:o.response,init:o.init,input:o.input})})}})}(e,t,n)})(s,t,E),jc(s,t);var vt=function gd(e,t,r,n,a){return{get:function(o){var s=r.findView(o),u=a.findUrl(o),c=t.findTrackedSession(o);if(c&&s&&u){var v=n.findActionId(o);return{application_id:e,session_id:c.id,user_action:v?{id:v}:void 0,view:{id:s.id,name:s.name,referrer:u.referrer,url:u.url}}}}}}(t.applicationId,E,q,ae,L);return{addAction:we,addError:Ht,addTiming:wt,addFeatureFlagEvaluation:v.addFeatureFlagEvaluation,startView:Ze,lifeCycle:s,viewContexts:q,session:E,stopSession:function(){return E.expire()},getInternalContext:vt.get}},function Zv(e,t){if(void 0===t&&(t=Pv),Rt()||!As())return{start:Oe,stop:Oe,getReplayStats:function(){},onRumStart:Oe,isRecording:function(){return!1},getSessionReplayLink:function(){}};var r={status:0},n=function(){r={status:1}},a=function(){r={status:0}};return{start:function(){return n()},stop:function(){return a()},getReplayStats:Av,getSessionReplayLink:function(o,s,u){return Wv(o,s,u,0!==r.status)},onRumStart:function(o,s,u,c){o.subscribe(7,function(){(2===r.status||3===r.status)&&(a(),r={status:1})}),o.subscribe(8,function(){1===r.status&&n()}),n=function(){var v=u.findTrackedSession();v&&v.sessionReplayAllowed?2===r.status||3===r.status||(r={status:2},_i("interactive",function(){2===r.status&&t(function(g){if(2===r.status){if(!g)return void(r={status:0});var _=e(o,s,u,c,g).stop;r={status:3,stopRecording:_}}})})):r={status:1}},a=function(){0!==r.status&&(3===r.status&&r.stopRecording(),r={status:0})},1===r.status&&n()},isRecording:function(){return 3===r.status}}}(function Hv(e,t,r,n,a,o){var u=o||ii(t.sessionReplayEndpointBuilder,zi,function(ee){e.notify(12,{error:ee})}),c=Mv(e,t.applicationId,r,n,u,a),v=c.addRecord,g=c.stop,_=Ev({emit:v,configuration:t,lifeCycle:e}),E=_.stop,T=_.takeSubsequentFullSnapshot,x=_.flushMutations,V=e.subscribe(4,function(){x(),v({timestamp:Le(),type:_t.ViewEnd})}).unsubscribe,q=e.subscribe(2,function(ee){T(ee.startClocks.timeStamp)}).unsubscribe;return{stop:function(){V(),q(),E(),g()}}}));me(X(),"DD_RUM",jv)},26177:(Ft,Be,U)=>{U.d(Be,{qJ:()=>S,HN:()=>f,xF:()=>H,pt:()=>Ut,ul:()=>h,cL:()=>Z,r7:()=>Ne,mi:()=>P,DJ:()=>b,Yo:()=>O,c1:()=>G,_6:()=>k,af:()=>J,wS:()=>Te,nu:()=>Q,_t:()=>X,kk:()=>me});const w=void 0,C="boolean",ue="number",Ce="string",Y="symbol",ye=typeof{},se=typeof w,le="function",oe={};class ce{constructor(y,M){switch(this.isBoolean=!1,this.isNumber=!1,this.isFinite=!1,this.isValidNumber=!1,this.isString=!1,this.isTrueNaN=!1,this.isObject=!1,this.isFunction=!1,this.isUndefined=!1,this.isNull=!1,this.isPrimitive=!1,this.isSymbol=!1,this.isArray=!1,this.isNullOrUndefined=!1,this.type=typeof y){case C:this.isBoolean=!0,this.isPrimitive=!0;break;case ue:this.isNumber=!0,this.isTrueNaN=isNaN(y),this.isFinite=isFinite(y),this.isValidNumber=!this.isTrueNaN,this.isPrimitive=!0;break;case Ce:this.isString=!0,this.isPrimitive=!0;break;case Y:this.isSymbol=!0;break;case ye:this.target=y,null===y?(this.isNull=!0,this.isNullOrUndefined=!0,this.isPrimitive=!0):(this.isArray=y instanceof Array,this.isObject=!0);break;case le:this.target=y,this.isFunction=!0;break;case se:this.isUndefined=!0,this.isNullOrUndefined=!0,this.isPrimitive=!0;break;default:throw"Fatal type failure.  Unknown type: "+this.type}M&&M(this),Object.freeze(this)}member(y){const M=this.target;return ce.getFor(M&&y in M?M[y]:w)}static getFor(y){const M=typeof y;switch(M){case ye:case le:return new ce(y)}let j=oe[M];return j||(oe[M]=j=new ce(y)),j}is(y){return this.target instanceof y}as(y){return this.target instanceof y?this.target:null}}function W(N){return new ce(N)}(function(N){function it(ne,ke=!1){switch(typeof ne){case C:case Ce:case ue:return!0;case se:return ke;case ye:return null===ne}return!1}function Qe(ne,ke,yr=!0){return ne&&!it(ne)&&ke in ne&&(yr||ne[ke]!==w)}function cn(ne,ke,yr){return Qe(ne,ke)&&typeof ne[ke]===yr}N.BOOLEAN=C,N.NUMBER=ue,N.STRING=Ce,N.OBJECT=ye,N.SYMBOL=Y,N.UNDEFINED=se,N.FUNCTION=le,N.is=function y(ne,ke){return ne instanceof ke},N.as=function M(ne,ke){return ne instanceof ke?ne:null},N.isNullOrUndefined=function j(ne){return null==ne},N.isBoolean=function ie(ne){return typeof ne===C},N.isNumber=function fe(ne,ke=!1){return!(typeof ne!==ue||ke&&isNaN(ne))},N.isTrueNaN=function xe(ne){return typeof ne===ue&&isNaN(ne)},N.isString=function Pe(ne){return typeof ne===Ce},N.isPrimitive=it,N.isPrimitiveOrSymbol=function br(ne,ke=!1){return typeof ne===Y||it(ne,ke)},N.isPropertyKey=function Ct(ne){switch(typeof ne){case Ce:case ue:case Y:return!0}return!1},N.isFunction=function Oe(ne){return typeof ne===le},N.isObject=function Wt(ne,ke=!1){return typeof ne===ye&&(ke||null!==ne)},N.numberOrNaN=function Sr(ne){return isNaN(ne)?NaN:ne},N.of=function dt(ne){return ce.getFor(ne)},N.hasMember=Qe,N.hasMemberOfType=cn,N.hasMethod=function Pt(ne,ke){return cn(ne,ke,le)},N.isArrayLike=function Gt(ne){return ne instanceof Array||N.isString(ne)||!N.isFunction(ne)&&Qe(ne,"length")}})(W||(W={})),Object.freeze(W);var ct=W.isTrueNaN;const We=void 0;const qe="compareTo";function Ge(N,y,M=!0){return function Me(N,y,M=!0){return N===y||!M&&N==y||ct(N)&&ct(y)}(N,y,M)?0:N&&W.hasMember(N,qe)?N.compareTo(y):y&&W.hasMember(y,qe)?-y.compareTo(N):N>y||M&&(0===N&&0==y||null===N&&y===We)?1:y>N||M&&(0===y&&0==N||null===y&&N===We)?-1:NaN}var je=(()=>{return(N=je||(je={})).ExitOnFirstFalseEvaluation="ExitOnFirstFalseEvaluation",N.ExitOnFirstTrueEvaluation="ExitOnFirstTrueEvaluation",N.EvaluateAllRules="EvaluateAllRules",je;var N})(),B=(()=>{return(N=B||(B={})).Exception="Exception",N.Warning="Warning",N.Information="Information",B;var N})();class De{constructor(y,M,j=!1,ie=B.Exception,fe=1){this.isValid=!0,this.message="",this.name="",this.renderType=je.EvaluateAllRules,this.severity=B.Exception,this.source="",this.name=y,this.message=M,this.isDisplayable=j,this.priority=fe,this.severity=ie}execute(){return this.render()}render(){throw new Error("Each concrete rule must implement this function and return a valid Result.")}}class k{constructor(y,M){this.isValid=!1,this.rulePolicy=new De("","",!1),this.message="",null!=y&&y.name.length>0&&y.message.length>0&&(this.rulePolicy=y,this.isValid=y.isValid,this.message=y.message),this.target=M}}class J extends De{constructor(y,M,j){super(y,M,j)}}class S extends J{constructor(y,M,j,ie,fe=!0){super(y,M,fe),this.target=j,this.comparison=ie}render(){return 0!==Ge(this.target,this.comparison,!0)&&(this.isValid=!1),new k(this,this.target)}}class f extends J{constructor(y,M,j,ie,fe=!0){super(y,M,fe),this.target=j,this.comparison=ie}render(){return 0===Ge(this.target,this.comparison,!0)&&(this.isValid=!1),new k(this,this.target)}}class h extends De{constructor(y,M,j){super(y,M,j),this.hasErrors=!1,this.results=new Array,this.rules=new Array}render(){return this.rules.sort(y=>y.priority).forEach(y=>this.results.push(y.execute())),this.processResults()}hasRules(){return!!(this.rules&&this.rules.length>0)}processResults(){return this.results.filter(y=>!1===y.isValid).length>0&&(this.isValid=!1,this.hasErrors=!0),new k(this)}}class b extends J{constructor(y,M,j,ie=!1){super(y,M,ie),this.target=j}render(){return(null==this.target||null===this.target||typeof this.target>"u")&&(this.isValid=!1),new k(this,this.target)}}class O extends J{constructor(y,M,j,ie,fe=!1){super(y,M,fe),this.target=j,this.comparison=ie}render(){return 1===Ge(this.target,this.comparison,!0)&&(this.isValid=!1),new k(this,this.target)}}class G extends J{constructor(y,M,j,ie,fe=!1){super(y,M,fe),this.target=j,this.comparison=ie}render(){return-1===Ge(this.target,this.comparison,!0)&&(this.isValid=!1),new k(this,this.target)}}class Se extends h{constructor(y,M,j,ie,fe,xe=!1){super(y,M,xe),this.target=j,this.start=ie,this.end=fe,this.isDisplayable=xe,this.rules.push(new b("TargetIsNotNull","The target is null or undefined.",this.target)),null!=this.target&&(this.rules.push(new G("MinValue","The value must be equal to or greater than the start range value.",this.target,this.start)),this.rules.push(new O("MaxValue","The value must be equal to or less than the end range value.",this.target,this.end)))}}class Te extends h{constructor(y,M,j,ie,fe,xe=!1){super(y,M,xe),this.target=j,this.minLength=ie,this.maxLength=fe,this.configureRules()}configureRules(){this.rules.push(new b("StringIsNotNull","The string target is null or undefined.",this.target)),null!=this.target&&this.rules.push(new Se("TargetLengthIsWithinRange","The string value is not within the specified range.",this.target.toString().length,this.minLength,this.maxLength))}}class Ne extends J{constructor(y,M,j,ie,fe){super(y,M,fe),this.target=j,this.requiredFeilds=ie}render(){for(let y=0;y<this.requiredFeilds.length;y++)if(!this.target[this.requiredFeilds[y]]){this.isValid=!1;break}return new k(this,this.target)}}class K extends J{constructor(y,M,j,ie=!0){super(y,M,ie),this.target=j}render(){return this.isValid=!0,!1===this.target&&(this.isValid=!1),new k(this,this.target)}}class Q extends h{constructor(y,M,j,ie,fe){super(y,M,fe),this.target=j,this.expression=ie,this.configureRules()}configureRules(){this.rules.push(new b("StringIsNotNullOrUndefined","The target value is null or undefined.",this.target,!1)),this.target&&this.rules.push(new K("StringIsRegExpMatch","The target value is not a match.",this.expression.test(this.target),!1))}}var me=(()=>{return(N=me||(me={})).NotEvaluated="NotEvaluated",N.Success="Success",N.Failure="Failure",me;var N})();class X{constructor(y){this.state=me.NotEvaluated,this.results=new Array,this.rules=new Array,this.source="",this.source=y||""}addRule(y){return this.source&&(y.source=this.source),this.rules.push(y),this}withSource(y){return this.source=y,this}renderRules(){return this.results=new Array,this.rules&&this.rules.length<1||this.rules.sort(y=>y.priority).forEach(y=>this.results.push(y.execute())),this}hasRuleViolations(){let y=!1;return this.rules&&(this.rules&&this.rules.filter(j=>!1===j.isValid).length)>0&&(y=!0),y}get isValid(){let y=!0;return this.rules&&this.rules.filter(j=>!1===j.isValid).length>0&&(y=!1),y}}class H extends J{constructor(y,M,j,ie){super(y,M,ie),this.target=j}render(){return this.isValid=""===this.target||isNaN(Number(this.target)),new k(this,this.target)}}class P extends J{constructor(y,M,j,ie,fe,xe){super(y,M,xe),this.target=ie,this.possibleValueList=fe,this.columnName=j}render(){if(null==this.target)this.isValid=!0;else{const y=this.possibleValueList.find(M=>M.name.trim()===this.target.name.trim());y?(delete this.target.error,delete this.target.errorDetail,this.target.id=y.id):(console.log(this.target.name,this.possibleValueList),this.isValid=!1,this.newName=this.target.name,this.target.error=!0,this.target.errorDetail="Cannot find this name")}return new k(this,this.target)}}class Z extends J{constructor(y,M,j,ie){super(y,M,ie),this.conflicts=[],this.target=j}render(){const y={};this.target.map(M=>{y[M]?y[M]+=1:y[M]=1});for(const M in y)y[M]>1&&this.conflicts.push(M);return this.isValid=!(Object.keys(this.conflicts).length>0),new k(this,this.target)}}var re=U(15439);class Ut extends J{constructor(y,M,j,ie,fe=!0){super(y,M,fe),this.target=j,this.comparison=ie}render(){return this.isValid=!this.target||!this.comparison||!!re(this.target).isBefore(re(this.comparison)),new k(this,this.target)}}},51645:(Ft,Be,U)=>{U.d(Be,{oBD:()=>Ce,vhO:()=>Y});var w=U(89177);function Ce(se,le,A=0){const oe=Number.parseFloat(se),ce=oe.toFixed(A);return isNaN(oe)?"":le+`${ce.replace(/\B(?=(\d{3})+(?!\d))/g,",")}`}function Y(se){if(console.log({dateFormatter:se}),!se)return"";if((0,w.HD)(se)&&0===se.trim().length)return;const le=new Date(se);console.log({date:le});const A=le.getUTCDate().toString().padStart(2,"0");return`${(le.getUTCMonth()+1).toString().padStart(2,"0")}/${A}/${le.getUTCFullYear().toString()}`}U(15439)},26244:(Ft,Be,U)=>{U.d(Be,{x:()=>De});var w=U(69575),C=U(94650),se=(()=>{return(k=se||(se={}))[k.VISIBLE=0]="VISIBLE",k[k.NAME=1]="NAME",k[k.ALL=2]="ALL",se;var k})(),le=(()=>{return(k=le||(le={}))[k.CSV=0]="CSV",k[k.EXCEL=1]="EXCEL",le;var k})(),A=(()=>{return(k=A||(A={}))[k.NORMAL=0]="NORMAL",k[k.ISO=1]="ISO",k[k.POSIX=2]="POSIX",A;var k})(),oe=(()=>{return(k=oe||(oe={}))[k.DATE_ONLY=0]="DATE_ONLY",k[k.HH_MM=1]="HH_MM",k[k.HH_MM_SS=2]="HH_MM_SS",k[k.HH_MM_SS_SSSXXX=3]="HH_MM_SS_SSSXXX",oe;var k})(),W=U(51645),Je=U(77579);let ct=(()=>{class k{agInit(S){this.params=S}}return k.\u0275fac=function(S){return new(S||k)},k.\u0275cmp=C.Xpm({type:k,selectors:[["app-checkbox-renderer"]],decls:1,vars:2,consts:[["type","checkbox",3,"checked","disabled"]],template:function(S,f){1&S&&C._UZ(0,"input",0),2&S&&C.Q6J("checked",f.params.value)("disabled",!0)},encapsulation:2}),k})();var We=U(12282),Me=U(2611),qe=U(36895);function Ge(k,J){if(1&k){const S=C.EpF();C.TgZ(0,"ag-grid-angular",3),C.NdJ("firstDataRendered",function(){C.CHM(S);const h=C.oxw(2);return C.KtG(h.onFirstDataRendered())})("selectionChanged",function(h){C.CHM(S);const b=C.oxw(2);return C.KtG(b.onSelectionChanged(h))})("gridReady",function(h){C.CHM(S);const b=C.oxw(2);return C.KtG(b.onGridReady(h))}),C.qZA()}if(2&k){const S=J.ngIf,f=C.oxw(2);C.Q6J("ngClass",S)("columnDefs",f.columnDefs)("defaultColDef",f.defaultColDef)("autoGroupColumnDef",f.autoGroupColumnDef)("rowData",f.data)("animateRows",!0)("groupDefaultExpanded",0)("pagination",f.pagination)("paginationAutoPageSize",f.pagination)("groupSelectsChildren",!0)("suppressRowClickSelection",!0)("domLayout",f.autoHeight?"autoHeight":"")("modules",f.modules)("gridOptions",f.gridOptions)("statusBar",f.statusBar)("enableRangeSelection",!0)}}function Tt(k,J){if(1&k&&(C.ynx(0),C.YNc(1,Ge,1,16,"ag-grid-angular",2),C.ALo(2,"async"),C.BQk()),2&k){const S=C.oxw();C.xp6(1),C.Q6J("ngIf",C.lcZ(2,1,S.agGridClassName))}}function je(k,J){if(1&k){const S=C.EpF();C.TgZ(0,"ag-grid-angular",5),C.NdJ("sortChanged",function(h){C.CHM(S);const b=C.oxw(2);return C.KtG(b.onSortChanged(h))})("filterChanged",function(h){C.CHM(S);const b=C.oxw(2);return C.KtG(b.onFilterChanged(h))})("firstDataRendered",function(){C.CHM(S);const h=C.oxw(2);return C.KtG(h.onFirstDataRendered())})("selectionChanged",function(h){C.CHM(S);const b=C.oxw(2);return C.KtG(b.onSelectionChanged(h))})("gridReady",function(h){C.CHM(S);const b=C.oxw(2);return C.KtG(b.onGridReady(h))}),C.qZA()}if(2&k){const S=J.ngIf,f=C.oxw(2);C.Tol(f.getClasses),C.Q6J("domLayout",f.autoHeight?"autoHeight":"")("ngClass",S)("rowData",f.data)("columnDefs",f.columnDefs)("modules",f.modules)("sideBar",f.showSidebar?f.sideBar:null)("excelStyles",f.excelStyles)("animateRows",!0)("pagination",f.pagination)("paginationAutoPageSize",f.pagination)("suppressRowClickSelection",f.suppressRowClickSelection)("frameworkComponents",f.frameworkComponents)("defaultColDef",f.defaultColDef)("gridOptions",f.gridOptions)("statusBar",f.statusBar)("enableRangeSelection",!0)}}function B(k,J){if(1&k&&(C.YNc(0,je,1,19,"ag-grid-angular",4),C.ALo(1,"async")),2&k){const S=C.oxw();C.Q6J("ngIf",C.lcZ(1,1,S.agGridClassName))}}let De=(()=>{class k{constructor(S){this.configService=S,this.autoHeight=!1,this.pagination=!1,this.treeMode=!1,this.autogroupField="name",this.suppressRowClickSelection=!1,this.floatingFilter=!0,this.customFrameworkComponents=null,this.showSidebar=!0,this.itemDidSelect=new C.vpe,this.selectionDidChange=new C.vpe,this.firstDataDidRender=new C.vpe,this.filteredData=new C.vpe,this.checkBoxSelection=!1,this.rowSelection="multiple",this.statusBar={statusPanels:[{statusPanel:"agAggregationComponent"}]},this._unsubscribeAll=new Je.x,this.isExporting=!1,this.modules=w.pzT,this.autoGroupColumnDef={headerName:"Feature Permissions",minWidth:80,field:"permission",headerCheckboxSelection:!0,cellRenderer:"agGroupCellRenderer",cellRendererParams:{suppressCount:!0,checkbox:!0}},this.excelStyles=[{id:"dateTime",dataType:"DateTime",numberFormat:{format:"mm/dd/yy"}}],this.sideBar={toolPanels:[{id:"columns",labelDefault:"Columns",labelKey:"columns",iconKey:"columns",toolPanel:"agColumnsToolPanel",minWidth:225,width:225,maxWidth:225},{id:"filters",labelDefault:"Filters",labelKey:"filters",iconKey:"filter",toolPanel:"agFiltersToolPanel",minWidth:180,maxWidth:400,width:250}],position:"right",defaultToolPanel:"none"},this.frameworkComponents={checkboxRenderer:ct},this.agGridClassName=this.configService.agGridClassName$,this.checkBoxSelected=!1}ngOnInit(){this.gridOptions={onCellClicked:this.onCellClicked.bind(this)},this.customFrameworkComponents&&(this.frameworkComponents=Object.assign(Object.assign({},this.frameworkComponents),this.customFrameworkComponents)),this.defaultColDef={flex:1,minWidth:200,floatingFilter:this.floatingFilter,hide:!1,resizable:!0,sortable:!0},null===this.showSidebar&&(this.showSidebar=!0),this.columnDefs.length>0&&(this.columnDefs=this.columnDefs.map((S,f)=>{let h=S;return"agDateColumnFilter"===S.filter&&(h=Object.assign(Object.assign({},S),{cellClass:"dateTime",valueFormatter:b=>(0,W.vhO)(b.data[S.field]),filterParams:{comparator:(b,O)=>{if(null==O)return-1;const Se=O.split(/[/|-]/),Te=new Date(Number(Se[0]),Number(Se[1])-1,Number(Se[2]));return b.getTime()===Te.getTime()?0:Te<b?-1:Te>b?1:0}}})),0==f&&this.checkBoxSelection&&(h=Object.assign(Object.assign({},h),{headerCheckboxSelection:!0,checkboxSelection:!0})),h}))}onCellClicked(S){console.log(S),this.checkBoxSelected=!0}get getClasses(){return 5==this.columnDefs.length?"w-full h-full hideHorizontalScrollbar":"w-full h-full"}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}onSelectionChanged(S){const f=this.gridApi.getSelectedRows();this.checkBoxSelected?(this.itemDidSelect.emit(f[0]),this.selectionDidChange.emit(f),S.api.deselectAll()):this.selectionDidChange.emit(f),this.checkBoxSelected=!1}onGridReady(S){this.gridApi=S.api,this.gridColumnApi=S.columnApi,this.defaultFilterStates=this.gridApi.getFilterModel()}onSortChanged({}){console.log("Table View: onSortChanged")}onFilterChanged({}){this.filteredData.emit(this.gridApi.getDisplayedRowCount())}onFirstDataRendered(){this.firstDataDidRender.emit()}setFilterState(S){this.gridApi.setFilterModel(S||this.defaultFilterStates)}setColumnState(S){this.gridApi.setColumnDefs(S||this.columnDefs)}getTableViewState(){return{columnDefs:this.gridApi.getColumnDefs(),filterState:this.gridApi.getFilterModel()}}getImportColumns(){const S={},f={agTextColumnFilter:"string",agNumberColumnFilter:"number",agDateColumnFilter:"date",agSetColumnFilter:"set"};let h=0,b=[...Array(26).keys()].map((Te,ge)=>String.fromCharCode(ge+65));const O=[...Array(26).keys()].map((Te,ge)=>"A"+String.fromCharCode(ge+65)),G=[...Array(26).keys()].map((Te,ge)=>"B"+String.fromCharCode(ge+65)),Se=[...Array(26).keys()].map((Te,ge)=>"C"+String.fromCharCode(ge+65));return b=b.concat(O),b=b.concat(G),b=b.concat(Se),this.columnDefs.map(Te=>{if(h>=b.length)return;const ge=String(Te.filter);S[b[h]]={field:Te.field,type:f[ge],headerName:Te.headerName||null},h++}),S}exportTableView(S){if(this.isExporting)return;this.isExporting=!0;const f={};switch(S.columnOption){case se.ALL:f.allColumns=!0;break;case se.NAME:f.columnKeys=["name","Name"]}let b,h="";switch(S.timeFormat){case oe.DATE_ONLY:h="";break;case oe.HH_MM:h="hh:mm";break;case oe.HH_MM_SS:h="hh:mm:ss";break;case oe.HH_MM_SS_SSSXXX:h="hh:mm:ss.sssxxx"}switch(S.dateFormat){case A.NORMAL:b=""===h?"mm/dd/yyy":`mm/dd/yyy ${h}`;break;case A.ISO:b="yyy-mm-ddThh:mm:ss";break;default:b=""}this.excelStyles=[{id:"dateTime",dataType:"DateTime",numberFormat:{format:b}}],setTimeout(()=>{S.fileFormat===le.EXCEL?this.gridApi.exportDataAsExcel(Object.assign(Object.assign({},f),{fileName:S.fileName})):this.gridApi.exportDataAsCsv(Object.assign(Object.assign({},f),{fileName:S.fileName})),this.isExporting=!1},500)}}return k.\u0275fac=function(S){return new(S||k)(C.Y36(We.m))},k.\u0275cmp=C.Xpm({type:k,selectors:[["table-view"]],inputs:{autoHeight:"autoHeight",pagination:"pagination",treeMode:"treeMode",autogroupField:"autogroupField",suppressRowClickSelection:"suppressRowClickSelection",floatingFilter:"floatingFilter",data:"data",customFrameworkComponents:"customFrameworkComponents",showSidebar:"showSidebar",columnDefs:"columnDefs",checkBoxSelection:"checkBoxSelection"},outputs:{itemDidSelect:"itemDidSelect",selectionDidChange:"selectionDidChange",firstDataDidRender:"firstDataDidRender",filteredData:"filteredData"},decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["defaultGrid",""],["class","w-full h-full","rowSelection","multiple",3,"ngClass","columnDefs","defaultColDef","autoGroupColumnDef","rowData","animateRows","groupDefaultExpanded","pagination","paginationAutoPageSize","groupSelectsChildren","suppressRowClickSelection","domLayout","modules","gridOptions","statusBar","enableRangeSelection","firstDataRendered","selectionChanged","gridReady",4,"ngIf"],["rowSelection","multiple",1,"w-full","h-full",3,"ngClass","columnDefs","defaultColDef","autoGroupColumnDef","rowData","animateRows","groupDefaultExpanded","pagination","paginationAutoPageSize","groupSelectsChildren","suppressRowClickSelection","domLayout","modules","gridOptions","statusBar","enableRangeSelection","firstDataRendered","selectionChanged","gridReady"],["rowSelection","multiple",3,"class","domLayout","ngClass","rowData","columnDefs","modules","sideBar","excelStyles","animateRows","pagination","paginationAutoPageSize","suppressRowClickSelection","frameworkComponents","defaultColDef","gridOptions","statusBar","enableRangeSelection","sortChanged","filterChanged","firstDataRendered","selectionChanged","gridReady",4,"ngIf"],["rowSelection","multiple",3,"domLayout","ngClass","rowData","columnDefs","modules","sideBar","excelStyles","animateRows","pagination","paginationAutoPageSize","suppressRowClickSelection","frameworkComponents","defaultColDef","gridOptions","statusBar","enableRangeSelection","sortChanged","filterChanged","firstDataRendered","selectionChanged","gridReady"]],template:function(S,f){if(1&S&&(C.YNc(0,Tt,3,3,"ng-container",0),C.YNc(1,B,2,3,"ng-template",null,1,C.W1O)),2&S){const h=C.MAs(2);C.Q6J("ngIf",f.treeMode)("ngIfElse",h)}},dependencies:[Me.N8,qe.mk,qe.O5,qe.Ov],styles:[".hideHorizontalScrollbar .ag-body-horizontal-scroll-viewport::-webkit-scrollbar{display:none}  .ag-cell{display:flex;align-items:center}  .ag-cell checkbox-renderer input[type=checkbox]{margin-top:0;margin-bottom:2px}  .ag-cell app-checkbox-renderer input[type=checkbox]{margin-top:0;margin-bottom:4px}"]}),k})()},55274:(Ft,Be,U)=>{U.d(Be,{u:()=>K});var w=U(2611),C=U(36895),ue=U(49821),Ce=U(4859),Y=U(44850),ye=U(97392),se=U(28255),le=U(77437),A=U(94650),oe=U(15909),ce=U(26244);let W=(()=>{class Q{constructor(){this.tableViewConfigs=[],this.itemDidSelect=new A.vpe,this.columnDefs=[{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"name",filter:"agTextColumnFilter"}]}onSelected(X){console.log("table-view-config-table-view: onSelected, value = ",X),this.itemDidSelect.emit(X)}}return Q.\u0275fac=function(X){return new(X||Q)},Q.\u0275cmp=A.Xpm({type:Q,selectors:[["ui-table-view-config-table-view"]],inputs:{tableViewConfigs:"tableViewConfigs"},outputs:{itemDidSelect:"itemDidSelect"},decls:1,vars:2,consts:[[1,"w-full","h-full",3,"data","columnDefs","itemDidSelect"]],template:function(X,H){1&X&&(A.TgZ(0,"table-view",0),A.NdJ("itemDidSelect",function(Z){return H.onSelected(Z)}),A.qZA()),2&X&&A.Q6J("data",H.tableViewConfigs)("columnDefs",H.columnDefs)},dependencies:[ce.x],encapsulation:2}),Q})();var Je=U(70655),ct=U(24006),We=U(75886),Me=U(24280),qe=U(11365),Ge=U(63900),Tt=U(73602),je=U(71873);let B=(()=>{class Q extends Me.m1{constructor(X,H){super({tableName:""}),this.webApiService=X,this.toast=H,this.currentViewId$=this.select(P=>P.currentViewId),this.settingId$=this.select(P=>null!==P.currentViewId&&P.currentViewId>=0?P.views[P.currentViewId].settingId:null),this.settingName$=this.select(P=>null!==P.currentViewId&&P.currentViewId>=0?P.views[P.currentViewId].settingName:null),this.viewName$=this.select(P=>{var Z;return null!==P.currentViewId&&P.currentViewId>=0?null===(Z=P.views[P.currentViewId].viewSetting)||void 0===Z?void 0:Z.viewName:null}),this.tableName$=this.select(P=>P.tableName),this.views$=this.select(P=>P.views),this.filterSettings$=this.select(P=>{var Z;return null!==P.currentViewId&&P.currentViewId>=0?null===(Z=P.views[P.currentViewId].viewSetting)||void 0===Z?void 0:Z.filterSettings:null}),this.exportName$=this.select(this.viewName$,this.tableName$,(P,Z)=>{try{return P??Z.split("-")[0]}catch{return Z}}),this.columnDefs$=this.select(this.currentViewId$,this.views$,(P,Z)=>{var re;return null!==P&&P>=0?null===(re=Z[P].viewSetting)||void 0===re?void 0:re.columnDefs:null}),this.viewNames$=this.select(P=>P.views?P.views.map((Z,re)=>({id:re,name:Z.viewSetting.viewName})):[]),this.vm$=this.select(this.viewNames$,this.filterSettings$,this.columnDefs$,(P,Z,re)=>({viewNames:P,filterSettings:Z,columnDefs:re})),this.addView=this.updater((P,Z)=>{const re=P.views?Object.assign(P.views):[];return Z.viewName.trim().length<2?P:""===Z.viewName.trim()?(this.toast.error("View name is blank.",{duration:3e3}),P):re.find(y=>{var M;return(null===(M=y?.viewSetting)||void 0===M?void 0:M.viewName.toLowerCase())===Z.viewName.trim().toLowerCase()})?(this.toast.error("View with the same name exists",{duration:3e3}),P):(re.push({settingId:"",settingName:P.tableName+"_view_"+Z.viewName,viewSetting:{viewName:Z.viewName,filterSettings:null,columnDefs:null}}),this.toast.success("Successfully created new view",{duration:3e3}),Z.resultEmitter.emit({id:P.views.length-1,name:Z.viewName}),Object.assign(Object.assign({},P),{views:re,currentViewId:P.views.length-1}))}),this.editView=this.updater((P,Z)=>{const re=P.views?Object.assign(P.views):[],Ut=re.find(N=>{var y,M,j,ie;return(null===(y=N?.viewSetting)||void 0===y?void 0:y.viewName.toLowerCase())===Z.input.name.trim().toLowerCase()&&(null===(M=N?.viewSetting)||void 0===M?void 0:M.id)!==(null===(ie=null===(j=re[Z.input.id])||void 0===j?void 0:j.viewSetting)||void 0===ie?void 0:ie.id)});return Z.input.name.trim().length<2?P:""===Z.input.name.trim()?(this.toast.error("View name is blank.",{duration:3e3}),P):Ut?(this.toast.error("View with the same name exists",{duration:3e3}),P):(re[Z.input.id].viewSetting.viewName=Z.input.name,Z.resultEmitter.emit(Object.assign({},Z.input)),this.toast.success("Susccessfully renamed new view",{duration:3e3}),Object.assign(Object.assign({},P),{views:re}))}),this.changeView=this.updater((P,Z)=>Object.assign(Object.assign({},P),{currentViewId:Z})),this.saveViewEffect=this.effect(P=>P.pipe((0,qe.M)(this.settingId$,this.settingName$,this.viewName$,this.views$,this.currentViewId$),(0,Ge.w)(([Z,re,Ut,N,y,M])=>(console.log({name:Ut,viewName:N}),this.webApiService.userUpdateSetting({settingId:re,input:{name:Ut,value:JSON.stringify({viewName:N,filterSettings:Z.filterState,columnDefs:Z.columnDefs})}}).pipe((0,Me._b)(j=>{this.toast.success("Saved current view",{duration:3e3}),y[M].viewSetting.columnDefs=Z.columnDefs,y[M].viewSetting.filterSettings=Z.filterState,y[M].settingId=j.data.updated.id,this.patchState({currentViewId:M,views:y})},j=>{this.toast.error("Failed to save current view",{duration:3e3})}))))))}loadTableSettings({tableName:X}){this.webApiService.userSettings({input:{name:X,limit:1e3}}).pipe((0,Ge.w)(H=>(0,Je.mG)(this,void 0,void 0,function*(){return H}))).subscribe({next:H=>{H.errors&&console.error(H.errors);const P=H.data.items.map(Z=>({settingId:Z.id,settingName:Z.name,viewSetting:JSON.parse(Z.value)}));console.log({views:P}),this.patchState({views:P,tableName:X})},error:H=>{console.log("error in error response",H)}})}}return Q.\u0275fac=function(X){return new(X||Q)(A.LFG(Tt.q),A.LFG(je.F))},Q.\u0275prov=A.Yz7({token:Q,factory:Q.\u0275fac}),Q})();var De=U(97800),k=U(34077);const J=function(){return{}};let S=(()=>{class Q{constructor(X){this.store=X,this.config={},this.titleLabel="edit",this.send=new A.vpe,this.close=new A.vpe,this.form=new ct.cw({}),this.model={},this.options={formState:{mainModel:this.model}},this.fields=[We.F.fieldRow([We.F.input("id",{label:"Id"},{className:"w-full px-0.5",hide:!0}),We.F.input("name",{label:"Name",required:!0},{className:"w-full px-0.5"})])],this.titleLabel="edit"}submit({id:X,name:H}){return(0,Je.mG)(this,void 0,void 0,function*(){H.length&&(void 0!==X?this.store.editView({input:{id:X,name:H},resultEmitter:this.send}):this.store.addView({viewName:H,resultEmitter:this.send}))})}ngOnInit(){var X;this.titleLabel=null!==(X=this.config)&&void 0!==X&&X.name?"Edit":"Create"}ngOnDestroy(){}handleDiscardClick(X){this.close.emit(X)}}return Q.\u0275fac=function(X){return new(X||Q)(A.Y36(B))},Q.\u0275cmp=A.Xpm({type:Q,selectors:[["ui-table-view-config-form"]],inputs:{config:"config",titleLabel:"titleLabel"},outputs:{send:"send",close:"close"},decls:12,vars:6,consts:[[1,"flex-grow","flex","flex-col","p-4","gap-2"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"text-semibold","text-lg","px-6"],[1,"px-6","pt-6"],[1,"w-full",3,"model","fields","form","submitForm"],[1,"-mx-6","-mb-4","mt-4","px-4","py-3","bg-gray-50","dark:bg-gray-800","border-t","border-transparent","dark:border-gray-700","rounded-b-lg","space-x-3"],[1,"flex","justify-between","items-center","flex-wrap","sm:flex-nowrap"],[1,"ml-2","items-center","flex","ng-star-inserted"],["label","Save","type","submit",3,"disabled"],[1,"mr-2","items-center","flex","ng-star-inserted"],["label","Discard","type","button","variant","white",3,"click"]],template:function(X,H){if(1&X&&(A.TgZ(0,"div",0)(1,"div",1)(2,"div",2),A._uU(3),A.qZA(),A.TgZ(4,"div",3)(5,"ui-form",4),A.NdJ("submitForm",function(){return H.submit(H.config)}),A.TgZ(6,"div",5)(7,"div",6)(8,"div",7),A._UZ(9,"ui-button",8),A.qZA(),A.TgZ(10,"div",9)(11,"ui-button",10),A.NdJ("click",function(Z){return H.handleDiscardClick(Z)}),A.qZA()()()()()()()()),2&X){let P;A.xp6(3),A.hij("",H.titleLabel," "),A.xp6(2),A.Q6J("model",null!==(P=H.config)&&void 0!==P?P:A.DdM(5,J))("fields",H.fields)("form",H.form),A.xp6(4),A.Q6J("disabled",!H.form.valid)}},dependencies:[De.W,k.a],encapsulation:2}),Q})();const f=function(){return{}};function h(Q,me){if(1&Q){const X=A.EpF();A.TgZ(0,"ui-table-view-config-form",3),A.NdJ("send",function(P){const re=A.CHM(X).data;return re.onSave(P),A.KtG(re.ref.close())})("close",function(){const Z=A.CHM(X).data;return A.KtG(Z.ref.close())}),A.qZA()}2&Q&&A.Q6J("config",me.data.value||A.DdM(1,f))}function b(Q,me){if(1&Q){const X=A.EpF();A.TgZ(0,"ui-table-view-config-table-view",4),A.NdJ("itemDidSelect",function(P){const re=A.CHM(X).data;return re.itemDidSelect(P),A.KtG(re.ref.close())}),A.qZA()}2&Q&&A.Q6J("tableViewConfigs",me.data.items)}let O=(()=>{class Q extends ue.fS{}return Q.\u0275fac=function(){let me;return function(H){return(me||(me=A.n5z(Q)))(H||Q)}}(),Q.\u0275cmp=A.Xpm({type:Q,selectors:[["ng-component"]],features:[A.qOj],decls:5,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"config","send","close"],[1,"w-full","h-full","bg-white",3,"tableViewConfigs","itemDidSelect"]],template:function(X,H){if(1&X&&(A.TgZ(0,"ui-select-form",0),A.NdJ("selectionChanged",function(Z){return H.formState[Z.key]=Z.value}),A.qZA(),A.YNc(1,h,1,2,"ng-template",null,1,A.W1O),A.YNc(3,b,1,1,"ng-template",null,2,A.W1O)),2&X){const P=A.MAs(2),Z=A.MAs(4);A.Q6J("to",H.to)("control",H.formControl)("upModel",H.model)("listTemplate",Z)("editTemplate",P)("createTemplate",P)("key",H.field.key)}},dependencies:[oe.$,W,S],encapsulation:2}),Q})();var G=U(10948),Se=U(10265),Te=U(20558),ge=U(927),Ne=U(31276);let K=(()=>{class Q{}return Q.\u0275fac=function(X){return new(X||Q)},Q.\u0275mod=A.oAB({type:Q}),Q.\u0275inj=A.cJS({providers:[B],imports:[w.sF.withComponents({}),C.ez,ue.X0,Ce.ot,Y.t,ye.Ps,se.Tx,le.A0,G.P,G.P,Se.t,Te.g,ge.W,Ne.h,ue.X0.forChild({types:[{name:"table-view-config-select",component:O,wrappers:["form-field"]}]})]}),Q})()},34077:(Ft,Be,U)=>{U.d(Be,{a:()=>Y});var w=U(94650),C=U(24006),ue=U(49821);const Ce=["*"];let Y=(()=>{class ye{constructor(le){this.builder=le,this.fields=[],this.form=new C.cw({}),this.model={},this.options={},this.submitForm=new w.vpe}ngOnInit(){this.builder.buildForm(this.form,this.fields,this.model,this.options)}submit(){this.submitForm.emit(this.model)}}return ye.\u0275fac=function(le){return new(le||ye)(w.Y36(ue.J8))},ye.\u0275cmp=w.Xpm({type:ye,selectors:[["ui-form"]],inputs:{fields:"fields",form:"form",model:"model",options:"options"},outputs:{submitForm:"submitForm"},ngContentSelectors:Ce,decls:6,vars:6,consts:[["novalidate","",1,"w-full",3,"formGroup","ngSubmit"],[3,"fields","form","model","options"],["type","submit",2,"display","none",3,"disabled"]],template:function(le,A){1&le&&(w.F$t(),w.TgZ(0,"form",0),w.NdJ("ngSubmit",function(){return A.submitForm.emit(A.model)}),w.TgZ(1,"div"),w._UZ(2,"formly-form",1),w.TgZ(3,"button",2),w._uU(4,"submit"),w.qZA()(),w.Hsn(5),w.qZA()),2&le&&(w.Q6J("formGroup",A.form),w.xp6(2),w.Q6J("fields",A.fields)("form",A.form)("model",A.model)("options",A.options),w.xp6(1),w.Q6J("disabled",A.form.touched&&!A.form.valid))},dependencies:[ue.T7,C._Y,C.JL,C.sg],encapsulation:2,changeDetection:0}),ye})()},15909:(Ft,Be,U)=>{U.d(Be,{$:()=>J});var w=U(94650),C=U(77437),ue=U(77579),Ce=U(82722),Y=U(16007),ye=U(57148),se=U(36895),le=U(97800);function A(S,f){if(1&S){const h=w.EpF();w.TgZ(0,"ui-button",10),w.NdJ("click",function(O){w.CHM(h);const G=w.oxw(2),Se=w.MAs(7);return O.stopPropagation(),w.KtG(G.openDialog(Se,{value:G.value,width:G.to.width}))}),w.qZA()}if(2&S){const h=w.oxw(2);w.Q6J("fill",!0)("disabled",!h.value)}}function oe(S,f){if(1&S){const h=w.EpF();w.TgZ(0,"div",7)(1,"ui-button",8),w.NdJ("click",function(O){w.CHM(h);const G=w.oxw(),Se=w.MAs(9);return O.stopPropagation(),w.KtG(G.openListDialog(Se,{height:"90%",width:"90%"}))}),w.qZA(),w.YNc(2,A,1,2,"ui-button",9),w.qZA()}if(2&S){const h=w.oxw();w.xp6(1),w.Q6J("fill",!0),w.xp6(1),w.Q6J("ngIf",!h.to.readonly)}}function ce(S,f){if(1&S){const h=w.EpF();w.TgZ(0,"button",12),w.NdJ("click",function(O){w.CHM(h);const G=w.oxw(2),Se=w.MAs(5);return O.stopPropagation(),w.KtG(G.openDialog(Se,{value:{},width:G.to.width}))}),w.O4$(),w.TgZ(1,"svg",13),w._UZ(2,"path",14),w.qZA(),w._uU(3),w.qZA()}if(2&S){const h=w.oxw(2);w.xp6(3),w.hij(" Add New ",h.to.label," ")}}function W(S,f){if(1&S&&w.YNc(0,ce,4,1,"button",11),2&S){const h=w.oxw();w.Q6J("ngIf",!h.to.readonly)}}function Je(S,f){1&S&&w.GkF(0)}const ct=function(){return{}},We=function(S,f,h){return{value:S,ref:f,onSave:h}},Me=function(S){return{data:S}};function qe(S,f){if(1&S&&(w.TgZ(0,"div",15),w.YNc(1,Je,1,0,"ng-container",16),w.qZA()),2&S){const h=f.$implicit,b=w.oxw();w.xp6(1),w.Q6J("ngTemplateOutlet",b.createTemplate)("ngTemplateOutletContext",w.VKq(7,Me,w.kEZ(3,We,w.DdM(2,ct),h,b.onSave)))}}function Ge(S,f){1&S&&w.GkF(0)}function Tt(S,f){if(1&S&&(w.TgZ(0,"div",15),w.YNc(1,Ge,1,0,"ng-container",16),w.qZA()),2&S){const h=f.$implicit,b=w.oxw();w.xp6(1),w.Q6J("ngTemplateOutlet",b.editTemplate)("ngTemplateOutletContext",w.VKq(6,Me,w.kEZ(2,We,null==h.data?null:h.data.value,h,b.onSave)))}}function je(S,f){1&S&&w.GkF(0)}const B=function(S,f,h){return{items:S,itemDidSelect:f,ref:h}},De=function(S){return{data:S}};function k(S,f){if(1&S&&(w.TgZ(0,"div",17)(1,"div",18),w._uU(2),w.qZA(),w.TgZ(3,"div",19),w.YNc(4,je,1,0,"ng-container",16),w.qZA()()),2&S){const h=f.$implicit,b=w.oxw();w.xp6(2),w.hij("",b.to.label," Lookup"),w.xp6(2),w.Q6J("ngTemplateOutlet",b.listTemplate)("ngTemplateOutletContext",w.VKq(7,De,w.kEZ(3,B,b.allItems,b.itemDidSelect,h)))}}let J=(()=>{class S{constructor(h,b,O,G){this.ngZone=h,this.ref=b,this.dialog=O,this.injector=G,this.routerKeys=[],this.selectionChanged=new w.vpe,this.formRouterKeyDidChange=new w.vpe,this.routerValues=[],this.ngUnsubscribe=new ue.x,this.items=[],this.allItems=[],this.value=null,this.lastInput=null,this.loading=!1,this.formStateKey=void 0,this.formRouterKeyService=void 0}ngOnInit(){var h,b,O,G,Se,Te;try{this.formRouterKeyService=this.injector.get(Y.l)}catch{}if(this.key&&(this.formStateKey=this.key.length>2&&(this.key.endsWith("Id")||this.key.endsWith("id"))?this.key.substring(0,this.key.length-2):`selected${this.key}`),this.to.disabled&&(null===(h=this.control)||void 0===h||h.disable()),!(null===(b=this.control)||void 0===b)&&b.value&&(this.initialValue=null===(O=this.control)||void 0===O?void 0:O.value),(this.routerKeys&&this.routerKeys.length||0)>0){for(let ge=0;ge<this.routerKeys.length;ge++)this.routerValues.push(void 0);null===(G=this.formRouterKeyService)||void 0===G||G.routerKeys$.pipe((0,Ce.R)(this.ngUnsubscribe)).subscribe(ge=>{let Ne=!1;const K={};for(let Q=0;Q<this.routerKeys.length;Q++){const me=this.routerKeys[Q],X=ge[me];X!==this.routerValues[Q]&&(Ne=!0,this.routerValues[Q]=X),K[me]=this.routerValues[Q]}Ne&&(console.log("Should reload selectForm"),this.formRouterKeyDidChange.emit(K))})}null===(Te=null===(Se=this.control)||void 0===Se?void 0:Se.valueChanges)||void 0===Te||Te.pipe((0,Ce.R)(this.ngUnsubscribe)).subscribe(ge=>{var Ne,K;if(null===(Ne=this.formRouterKeyService)||void 0===Ne||Ne.setRouterKey(this.key,ge),this.to.valueChanged&&this.to.valueChanged instanceof Function&&this.to.valueChanged(ge,this.value),this.to.changed&&this.to.changed(ge),ge&&ge!==(null===(K=this.value)||void 0===K?void 0:K.id)){this.initialValue=ge;const Q=this.allItems.find(me=>me.id===ge);Q&&this.itemDidSelect(Q),this.ref.markForCheck(),this.ref.detectChanges()}}),this.changed(null),this.allItemsSubscribe=this.to.source("").subscribe(ge=>{if(this.allItems=ge,this.upModel&&this.formStateKey){const Ne=this.upModel[this.formStateKey];this.setValue(Ne),this.changed(Ne)}this.value?setTimeout(()=>{if(this.upModel&&this.formStateKey){const K=this.upModel[this.formStateKey];this.setValue(K),this.changed(K)}const Ne=this.allItems.find(K=>K[this.to.valueProp]===this.value.id);if(Ne){const K=this.ngSelect.itemsList.findItem(Ne);K&&this.ngSelect.select(K)}else this.ngSelect.clearModel()},100):this.initialValue&&setTimeout(()=>{const Ne=this.allItems.find(K=>K[this.to.valueProp]===this.initialValue);if(this.initialValue=null,Ne){const K=this.ngSelect.itemsList.findItem(Ne);K&&this.ngSelect.select(K)}},100)}),this.itemDidSelect=this.itemDidSelect.bind(this),this.onSave=this.onSave.bind(this)}ngOnDestroy(){var h,b,O;null===(h=this.ngUnsubscribe)||void 0===h||h.next(!0),null===(b=this.ngUnsubscribe)||void 0===b||b.unsubscribe(),null===(O=this.allItemsSubscribe)||void 0===O||O.unsubscribe()}compareWith(h,b){return h.id===b.id}refreshItems(){}setValue(h){var b,O;h?(this.value=h,null===(O=this.control)||void 0===O||O.setValue(h.id,{emitEvent:!0}),this.formStateKey&&this.selectionChanged.emit({key:this.formStateKey,value:h})):(this.value=null,null===(b=this.control)||void 0===b||b.setValue(null),this.formStateKey&&this.selectionChanged.emit({key:this.formStateKey,value:void 0}))}onSave(h){h&&setTimeout(()=>{console.log("onSave: ",h);const b=this.items.find(O=>O.id===h.id);b&&this.itemDidSelect(b)},200)}itemDidSelect(h){let b=this.ngSelect.itemsList.findItem(h);b?this.ngSelect.select(b):(this.ngSelect.itemsList.addItem(h),setTimeout(()=>{b=this.ngSelect.itemsList.findItem(h),this.ngSelect.select(b)},200))}onChange(h){this.setValue(h),this.to.onChange&&this.to.onChange(h)}changed(h){h&&!h.name?this.to.source&&(this.timeout&&clearTimeout(this.timeout),h.term!=this.lastInput&&(this.timeout=setTimeout(()=>{var b;this.loading=!0,this.to.source(h.term).subscribe(O=>{this.items=O,this.loading=!1,this.lastInput=h.term,this.ref.markForCheck(),this.ref.detectChanges()}),null===(b=this.control)||void 0===b||b.markAsDirty()},300))):h&&h.name?this.setValue(h):h||(this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(()=>{this.setValue(null),this.loading=!0,this.to.source("").subscribe(b=>{this.items=b,this.loading=!1,this.ref.markForCheck(),this.ref.detectChanges()})},this.to.debounceTime||0))}displayFn(h){return h?h.name:null}openDialog(h,{value:b,height:O,width:G}){this.ngSelect.close(),this.dialog.open(h,{data:{value:b},height:O||"auto",width:G||"auto"})}openListDialog(h,{value:b,height:O,width:G}){!b&&""!=this.ngSelect.searchTerm&&(b={name:this.ngSelect.searchTerm}),this.ngSelect.close(),this.dialog.open(h,{data:{value:b},height:O||"auto",width:G||"auto"})}get sortedItems(){var h;return(null===(h=this.items)||void 0===h?void 0:h.length)>1&&this.items.sort(function(b,O){var G,Se;const Te=null!==(G=b.name)&&void 0!==G?G:"",ge=null!==(Se=O.name)&&void 0!==Se?Se:"";return Te.localeCompare(ge)}),this.items}}return S.\u0275fac=function(h){return new(h||S)(w.Y36(w.R0b),w.Y36(w.sBO),w.Y36(ye.xA),w.Y36(w.zs3))},S.\u0275cmp=w.Xpm({type:S,selectors:[["ui-select-form"]],viewQuery:function(h,b){if(1&h&&w.Gf(C.w9,5),2&h){let O;w.iGM(O=w.CRH())&&(b.ngSelect=O.first)}},inputs:{to:"to",key:"key",upModel:"upModel",routerKeys:"routerKeys",control:"control",listTemplate:"listTemplate",editTemplate:"editTemplate",createTemplate:"createTemplate"},outputs:{selectionChanged:"selectionChanged",formRouterKeyDidChange:"formRouterKeyDidChange"},decls:10,vars:12,consts:[["appendTo","body",1,"mt-0",3,"items","placeholder","bindLabel","bindValue","multiple","virtualScroll","loading","groupBy","compareWith","readonly","change","search"],["ngSelect",""],["ng-header-tmp",""],["ng-footer-tmp","","class","footer"],["createEntityTpl",""],["editEntityTpl",""],["viewEntities",""],[1,"flex","flex-row","gap-2"],["label","Advanced Search","color","primary","icon","plus","type","button",1,"w-full",3,"fill","click"],["label","Edit","color","primary","class","h-full w-full","icon","plus","type","button",3,"fill","disabled","click",4,"ngIf"],["label","Edit","color","primary","icon","plus","type","button",1,"h-full","w-full",3,"fill","disabled","click"],["class","cursor-pointer text-gray-500 flex w-full gap-1 p-3 hover:bg-gray-100 hover:text-gray-700 transition duration-200 items-center text-semibold text-md","type","button",3,"click",4,"ngIf"],["type","button",1,"cursor-pointer","text-gray-500","flex","w-full","gap-1","p-3","hover:bg-gray-100","hover:text-gray-700","transition","duration-200","items-center","text-semibold","text-md",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor","stroke-width","2",1,"h-6","w-6"],["stroke-linecap","round","stroke-linejoin","round","d","M12 4v16m8-8H4"],[1,"flex-grow","flex","flex-col","p-4","gap-2","overflow-auto"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"flex","flex-col","p-4","gap-2","h-full","bg-grey-light"],[1,"text-semibold","text-lg"],[1,"w-full","h-full"]],template:function(h,b){if(1&h&&(w.TgZ(0,"ng-select",0,1),w.NdJ("change",function(G){return b.onChange(G)})("search",function(G){return b.changed(G)}),w.YNc(2,oe,3,2,"ng-template",2),w.YNc(3,W,1,1,"ng-template",3),w.qZA(),w.YNc(4,qe,2,9,"ng-template",null,4,w.W1O),w.YNc(6,Tt,2,8,"ng-template",null,5,w.W1O),w.YNc(8,k,5,9,"ng-template",null,6,w.W1O)),2&h){let O,G;w.Tol((null==b.to?null:b.to.className)||"custom"),w.Q6J("items",b.sortedItems)("placeholder",(null==b.to?null:b.to.placeholder)||"Select "+(b.to.label||""))("bindLabel",null!==(O=null==b.to?null:b.to.labelProp)&&void 0!==O?O:"label")("bindValue",null!==(G=null==b.to?null:b.to.valueProp)&&void 0!==G?G:"value")("multiple",b.to.multiple)("virtualScroll",!0)("loading",b.loading)("groupBy",b.to.groupBy)("compareWith",(null==b.to?null:b.to.compareWith)||b.compareWith)("readonly",b.to.readOnly)}},dependencies:[se.O5,se.tP,C.w9,C.A3,C.x0,le.W],styles:[".ng-select-container{margin-top:0!important}  .forSelectForm .ng-select-container{border:1px solid #ff0000a8}  ui-button button{height:100%!important;justify-content:center}  .ngneat-dialog-backdrop{z-index:998!important}"]}),S})()},31276:(Ft,Be,U)=>{U.d(Be,{h:()=>ye});var w=U(36895),C=U(77437),ue=U(24006),Ce=U(10948),Y=U(94650);let ye=(()=>{class se{}return se.\u0275fac=function(A){return new(A||se)},se.\u0275mod=Y.oAB({type:se}),se.\u0275inj=Y.cJS({imports:[w.ez,C.A0,ue.UX,Ce.P]}),se})()},53098:(Ft,Be)=>{var w=function(){function C(ue){if(!ue)throw new TypeError("Invalid argument; `value` has no value.");this.value=C.EMPTY,ue&&C.isGuid(ue)&&(this.value=ue)}return C.isGuid=function(ue){var Ce=ue.toString();return ue&&(ue instanceof C||C.validator.test(Ce))},C.create=function(){return new C([C.gen(2),C.gen(1),C.gen(1),C.gen(1),C.gen(3)].join("-"))},C.createEmpty=function(){return new C("emptyguid")},C.parse=function(ue){return new C(ue)},C.raw=function(){return[C.gen(2),C.gen(1),C.gen(1),C.gen(1),C.gen(3)].join("-")},C.gen=function(ue){for(var Ce="",Y=0;Y<ue;Y++)Ce+=(65536*(1+Math.random())|0).toString(16).substring(1);return Ce},C.prototype.equals=function(ue){return C.isGuid(ue)&&this.value===ue.toString()},C.prototype.isEmpty=function(){return this.value===C.EMPTY},C.prototype.toString=function(){return this.value},C.prototype.toJSON=function(){return{value:this.value}},C.validator=new RegExp("^[a-z0-9]{8}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{12}$","i"),C.EMPTY="00000000-0000-0000-0000-000000000000",C}();Be.i=w}}]);