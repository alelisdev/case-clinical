"use strict";(self.webpackChunkprovider=self.webpackChunkprovider||[]).push([[799],{61799:(L,a,t)=>{t.r(a),t.d(a,{JsonFormPreviewModule:()=>M});var l=t(49821),d=t(36895),m=t(24006),h=t(78372),e=t(94650),p=t(79853),v=t(11083);function w(s,n){if(1&s&&(e.TgZ(0,"form",2,3),e._UZ(2,"formly-form",4),e.qZA()),2&s){const o=e.oxw();e.Q6J("formGroup",o.form),e.xp6(2),e.Q6J("form",o.form)("model",o.modelData)("fields",o.fields)}}let y=(()=>{class s{constructor(o){this.formlyDesignerService=o,this.form=new m.cw({}),this.formConfig=[],this.fields=[],this.contextData={},this.modelData={},this.customLayouts={},this.schema=""}onMessage(o){if(o.origin!=window.origin)return!1;const{previewData:i,data:f}=o.data;if(console.log(f),i){const{schema:r,customLayouts:c,testData:g,modelData:u}=f;if(g&&(this.contextData=g),u&&(this.modelData=u,this.contextData=Object.assign(Object.assign({},this.contextData),this.modelData)),c&&(this.customLayouts=c),r?(this.formConfig=JSON.parse(r),this.schema=r):this.formConfig=JSON.parse(this.schema),this.formConfig){const O=this.formlyDesignerService.initializeFieldConfigs(this.formConfig,this.customLayouts);this.fields=O}else this.fields=[]}}ngOnInit(){window.parent.postMessage({from:"preview",status:"available"},window.origin),this.subscriber=this.form.valueChanges.pipe((0,h.b)(500)).subscribe(o=>{for(const i in o)null==o[i]&&delete o[i];window.parent.postMessage({from:"preview",status:"modelChanged",model:o},window.origin)})}ngOnDestroy(){var o;null===(o=this.subscriber)||void 0===o||o.unsubscribe()}}return s.\u0275fac=function(o){return new(o||s)(e.Y36(p.m))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-json-form-preview"]],hostBindings:function(o,i){1&o&&e.NdJ("message",function(r){return i.onMessage(r)},!1,e.Jf7)},decls:2,vars:2,consts:[[1,"w-full",3,"data"],["class","relative w-full",3,"formGroup",4,"ngIf"],[1,"relative","w-full",3,"formGroup"],["ngForm",""],[3,"form","model","fields"]],template:function(o,i){1&o&&(e.TgZ(0,"ui-context-provider",0),e.YNc(1,w,3,4,"form",1),e.qZA()),2&o&&(e.Q6J("data",i.contextData),e.xp6(1),e.Q6J("ngIf",i.fields))},dependencies:[d.O5,l.T7,v.Z,m._Y,m.JL,m.sg],styles:["formly-form{width:100%;display:flex;flex-wrap:wrap}  formly-group{width:100%;height:100%;display:flex;flex-wrap:wrap}  formly-field{padding-left:0;padding-right:0}  formly-field>ng-component{flex:1}  formly-group>ng-component{flex:1}[_nghost-%COMP%]{font-family:poppins}"]}),s})();var x=t(30144),J=t(10265),C=t(27503),D=t(82081),F=t(77504),P=t(70383);let M=(()=>{class s{}return s.\u0275fac=function(o){return new(o||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[d.ez,C.G,J.t,P.L,l.X0,D.j,F.o,x.Bz.forChild([{path:"",component:y}])]}),s})()}}]);