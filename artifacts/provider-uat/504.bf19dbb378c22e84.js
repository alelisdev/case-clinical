"use strict";(self.webpackChunkprovider=self.webpackChunkprovider||[]).push([[504],{76643:(De,we,M)=>{M.d(we,{E:()=>ye});var P=M(24280),E=M(60515),G=M(18505),U=M(63900),J=M(11365),ae=M(70262),b=M(94650),q=M(73602),y=M(30144),h=M(71873),R=M(4523),de=M(56869),e=M(71767),z=M(39646);class O extends e.T_{constructor(A){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=A}Do(A){return this.businessProvider=A,this.serviceContext=A.serviceContext,this.loggingService=A.loggingService,this.execute(),this.response}}var X=M(26177);class Z extends O{constructor(A){super("ValidateAppointmentStatusExcelDataAction"),this.valid=!1,this.excelData=A}preValidateAction(){const A=[];this.excelData.map((w,T)=>{A.push(w.name)}),this.validationContext.addRule(new X.cL("nameIsUnique","Name should be unique",A,!0))}performAction(){}finish(){super.finish();const A={};let w=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(T=>{T instanceof X.mi?T.isValid||(A[T.columnName]?A[T.columnName].newNames.includes(T.newName)||A[T.columnName].newNames.push(T.newName):A[T.columnName]={options:T.possibleValueList.map(x=>x.name),newNames:[T.newName]}):T instanceof X.cL&&(T.isValid||(w=T.conflicts))})):this.valid=!0,this.response=(0,z.of)({valid:this.valid,excelData:this.excelData,conflictNames:w,unknownNames:A})}}var K=M(28234);class W extends X.wS{constructor(A,w,T,x,Q){super(A,w,T,x,Q,!0)}}class D extends X.ul{constructor(A,w,T,x=!1){super(A,w,x),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=T,this.configureRules()}configureRules(){this.rules.push(new X.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new W("name","The appointmentstatus name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class be extends O{constructor(A){super("CreateAppointmentStatusAction"),this.input=A}preValidateAction(){this.validationContext.addRule(new D("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateAppointmentStatus({input:this.input}).pipe((0,U.w)(A=>(0,K.of)(A.data.created)))}}class g extends O{constructor(A){super("UpdateAppointmentStatusesAction"),this.appointmentStatuses=A}preValidateAction(){this.validationContext.addRule(new X.DJ("Input","Input should have values",this.appointmentStatuses,!0))}performAction(){this.response=this.businessProvider.data.userUpdateAppointmentStatuses({input:{appointmentStatuses:this.appointmentStatuses}}).pipe((0,U.w)(A=>(0,z.of)(A.data.updated)))}}class xe extends O{constructor(A,w){super("UpdateAppointmentStatusAction"),this.appointmentStatus=A,this.appointmentStatusId=w}preValidateAction(){this.validationContext.addRule(new X.DJ("Input","Input should have values",this.appointmentStatus,!0)).addRule(new X.xF("Id","Id should be a CUID and not null",this.appointmentStatusId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateAppointmentStatus({appointmentStatusId:this.appointmentStatusId,input:this.appointmentStatus}).pipe((0,U.w)(A=>(0,z.of)(A.data.updated)))}}let ue=(()=>{class Y extends e.nH{constructor(w,T,x){super("NotificationService.AppointmentStatusBusinessProviderService",w,x),this.data=T}createAppointmentStatus(w){const T=new be(w);return T.Do(this),T.response}updateAppointmentStatus(w,T){const x=new xe(w,T);return x.Do(this),x.response}importAppointmentStatuses(w){const T=new g(w);return T.Do(this),T.response}validateAppointmentStatusExcelData(w){const T=new Z(w);return T.Do(this),T.response}}return Y.\u0275fac=function(w){return new(w||Y)(b.LFG(de.ed),b.LFG(q.q),b.LFG(e.oI))},Y.\u0275prov=b.Yz7({token:Y,factory:Y.\u0275fac,providedIn:"root"}),Y})(),Ce=(()=>{class Y extends e.nH{constructor(w,T,x){super("AppointmentStatusService",x,w),this.businessProvider=T}createAppointmentStatus(w){const T=Object.fromEntries(Object.entries(w).filter(([x,Q])=>null!==Q));return this.businessProvider.createAppointmentStatus(T)}updateAppointmentStatus(w,T){return this.businessProvider.updateAppointmentStatus(w,T)}importAppointmentStatuses(w){return this.businessProvider.importAppointmentStatuses(w)}validateAppointmentStatusExcelData(w){return this.businessProvider.validateAppointmentStatusExcelData(w)}}return Y.\u0275fac=function(w){return new(w||Y)(b.LFG(ue,8),b.LFG(ue),b.LFG(de.ed))},Y.\u0275prov=b.Yz7({token:Y,factory:Y.\u0275fac,providedIn:"root"}),Y})(),ye=(()=>{class Y extends P.m1{constructor(w,T,x,Q,H,te){super({loading:!1,appointmentStatuses:[],done:!1,searchQuery:"",formName:void 0,paging:{limit:1e4,skip:0}}),this.data=w,this.router=T,this.route=x,this.toast=Q,this.formService=H,this.appointmentStatusService=te,this.errors$=this.select(C=>C.errors),this.loading$=this.select(C=>C.loading),this.done$=this.select(C=>C.done),this.item$=this.select(C=>C.item),this.appointmentStatuses$=this.select(C=>C.appointmentStatuses),this.paging$=this.select(C=>C.paging),this.searchQuery$=this.select(C=>C.searchQuery),this.formName$=this.select(C=>C.formName),this.actionResult$=this.select(this.item$,this.done$,(C,_)=>({item:C,done:_}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.appointmentStatuses$,(C,_,f,S,F)=>({errors:C,loading:_,item:f,formName:S,appointmentStatuses:F}),{debounce:!0}),this.input$=this.select(this.paging$,this.searchQuery$,(C,_)=>({limit:C.limit,skip:C.skip,name:_,total:C.total})),this.setFormName=this.updater((C,_)=>Object.assign(Object.assign({},C),{formName:_})),this.setItem=this.updater((C,_)=>Object.assign(Object.assign({},C),{item:_})),this.addNewAppointmentStatus=this.updater((C,_)=>Object.assign(Object.assign({},C),{appointmentStatuses:[...C.appointmentStatuses,_]})),this.updateAppointmentStatus=this.updater((C,_)=>Object.assign(Object.assign({},C),{appointmentStatuses:C.appointmentStatuses.map(f=>f.id===_.id?_:f)})),this.addAppointmentStatuses=this.updater((C,_)=>Object.assign(Object.assign({},C),{appointmentStatuses:C.appointmentStatuses.concat(_)})),this.updateAppointmentStatuses=this.updater((C,_)=>Object.assign(Object.assign({},C),{appointmentStatuses:C.appointmentStatuses.map(f=>_.find(F=>F.id===f.id)||f)})),this.setSearchQuery=this.updater((C,_)=>Object.assign(Object.assign({},C),{searchQuery:_})),this.loadAppointmentStatusEffect=this.effect(C=>C.pipe((0,G.b)(()=>this.patchState({loading:!0})),(0,U.w)(_=>this.data.userAppointmentStatus({appointmentStatusId:_}).pipe((0,P._b)(f=>{this.patchState({item:f.data.item,errors:f.errors,loading:!1})},f=>this.patchState({loading:!1,errors:f.graphQLErrors?f.graphQLErrors:f})))))),this.loadAppointmentStatusesEffect=this.effect(C=>C.pipe((0,G.b)(()=>this.patchState({loading:!0})),(0,J.M)(this.input$),(0,U.w)(([_,f])=>this.data.userAppointmentStatuses({input:f}).pipe((0,P._b)(S=>this.patchState({paging:{limit:f.limit,skip:f.skip,total:S.data.count.total},appointmentStatuses:S.data.items,errors:S.errors,loading:!1}),S=>this.patchState({loading:!1,errors:S.graphQLErrors?S.graphQLErrors:S})))))),this.createAppointmentStatusEffect=this.effect(C=>C.pipe((0,G.b)(()=>this.patchState({loading:!0})),(0,U.w)(_=>this.appointmentStatusService.createAppointmentStatus(Object.assign({},_)).pipe((0,P._b)(f=>{this.addNewAppointmentStatus(f),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:f,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},f=>{f.graphQLErrors?(this.toast.error(f.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:f.graphQLErrors?f.graphQLErrors:f})):(this.toast.error(f.Message),this.formService.setErrors(f.Data))}))))),this.updateAppointmentStatusEffect=this.effect(C=>C.pipe((0,G.b)(()=>this.patchState({loading:!0})),(0,J.M)(this.item$),(0,U.w)(([_,f])=>this.appointmentStatusService.updateAppointmentStatus(_,_.id).pipe((0,P._b)(S=>{this.updateAppointmentStatus(S),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:S,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},S=>{S.graphQLErrors?(this.toast.error(S.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:S.graphQLErrors?S.graphQLErrors:S})):(this.toast.error(S.Message),this.formService.setErrors(S.Data))}))))),this.deleteAppointmentStatusEffect=this.effect(C=>C.pipe((0,G.b)(()=>this.patchState({loading:!0})),(0,J.M)(this.item$),(0,U.w)(([_,f])=>this.data.userDeleteAppointmentStatus({appointmentStatusId:f.id}).pipe((0,P._b)(S=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:S.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},S=>{S.graphQLErrors?(this.toast.error(S.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:S.graphQLErrors?S.graphQLErrors:S})):(this.toast.error(S.Message),this.formService.setErrors(S.Data))}))))),this.importExcelEffect=this.effect(C=>C.pipe((0,G.b)(()=>this.patchState({loading:!0})),(0,U.w)(_=>this.appointmentStatusService.importAppointmentStatuses(_).pipe((0,ae.K)(f=>{var S;return this.toast.error(null!==(S=f.Message)&&void 0!==S?S:"Failed to save",{duration:3e3}),E.E}),(0,G.b)(f=>{const S=JSON.parse(f.created),F=JSON.parse(f.updated),N=JSON.parse(f.failed),L=S.length+F.length+N.length;this.addAppointmentStatuses(S),this.updateAppointmentStatuses(F),this.toast.success(`${S.length} created, ${F.length} updated, ${N.length} failed of total ${L}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("appointmentStatusId")?(this.route.snapshot.paramMap.get("appointmentStatusId"),this.setFormName("appointmentStatus_edit")):this.setFormName("appointmentStatus_create")}validateImportData(w){return this.vm$.pipe((0,U.w)(T=>this.appointmentStatusService.validateAppointmentStatusExcelData(w)))}}return Y.\u0275fac=function(w){return new(w||Y)(b.LFG(q.q),b.LFG(y.F0),b.LFG(y.gz),b.LFG(h.F),b.LFG(R.o),b.LFG(Ce))},Y.\u0275prov=b.Yz7({token:Y,factory:Y.\u0275fac}),Y})()},95614:(De,we,M)=>{M.d(we,{L6:()=>C,IM:()=>te,vF:()=>ge});var P=M(24280),E=M(39646),G=M(60515),U=M(63900),J=M(54004),ae=M(18505),b=M(11365),q=M(70262),y=M(84264),h=M(94650),R=M(73602),de=M(30144),e=M(71873),z=M(4523),O=M(56869),X=M(71767);class Z extends X.T_{constructor(f){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=f}Do(f){return this.businessProvider=f,this.serviceContext=f.serviceContext,this.loggingService=f.loggingService,this.execute(),this.response}}var K=M(26177);class W extends Z{constructor(f,S,F,N,L,ie){super("ValidateAppointmentExcelDataAction"),this.valid=!1,this.excelData=f,this.locations=S,this.patients=F,this.clinicalProviders=N,this.legalCases=L,this.appointmentStatuses=ie}preValidateAction(){const f=[];this.excelData.map((S,F)=>{f.push(S.name),this.validationContext.addRule(new K.mi(`locationName_${F}_is_valid}`,"Location Is Not Valid","location.name",S.location,this.locations,!0)),this.validationContext.addRule(new K.mi(`patientName_${F}_is_valid}`,"Patient Is Not Valid","patient.name",S.patient,this.patients,!0)),this.validationContext.addRule(new K.mi(`clinicalProviderName_${F}_is_valid}`,"Clinical Provider Is Not Valid","clinicalProvider.name",S.clinicalProvider,this.clinicalProviders,!0)),this.validationContext.addRule(new K.mi(`legalCaseName_${F}_is_valid}`,"Legal Case Is Not Valid","legalCase.name",S.legalCase,this.legalCases,!0)),this.validationContext.addRule(new K.mi(`appointmentStatusName_${F}_is_valid}`,"Appointment Status Is Not Valid","appointmentStatus.name",S.appointmentStatus,this.appointmentStatuses,!0))}),this.validationContext.addRule(new K.cL("nameIsUnique","Name should be unique",f,!0))}performAction(){}finish(){super.finish();const f={};let S=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(F=>{F instanceof K.mi?F.isValid||(f[F.columnName]?f[F.columnName].newNames.includes(F.newName)||f[F.columnName].newNames.push(F.newName):f[F.columnName]={options:F.possibleValueList.map(N=>N.name),newNames:[F.newName]}):F instanceof K.cL&&(F.isValid||(S=F.conflicts))})):this.valid=!0,this.response=(0,E.of)({valid:this.valid,excelData:this.excelData,conflictNames:S,unknownNames:f})}}var D=M(28234);class be extends K.wS{constructor(f,S,F,N,L){super(f,S,F,N,L,!0)}}class g extends K.ul{constructor(f,S,F,N=!1){super(f,S,N),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=F,this.configureRules()}configureRules(){this.rules.push(new K.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new be("name","The appointment name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class xe extends Z{constructor(f){super("CreateAppointmentAction"),this.input=f}preValidateAction(){this.validationContext.addRule(new g("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages)),this.validationContext.addRule(new K.pt("AppointmentDateTimeIsBeforeCheckInDateTime","CheckIn DateTime should be after Appointment DateTime",this.input.appointmentDateAndTime,this.input.checkedInDateTime))}performAction(){this.response=this.businessProvider.data.userCreateAppointment({input:this.input}).pipe((0,U.w)(f=>(0,D.of)(f.data.created)))}}class ue extends Z{constructor(f){super("UpdateAppointmentsAction"),this.appointments=f}preValidateAction(){this.validationContext.addRule(new K.DJ("Input","Input should have values",this.appointments,!0))}performAction(){this.response=this.businessProvider.data.userUpdateAppointments({input:{appointments:this.appointments}}).pipe((0,U.w)(f=>(0,E.of)(f.data.updated)))}}class Ce extends Z{constructor(f,S){super("UpdateAppointmentAction"),this.appointment=f,this.appointmentId=S}preValidateAction(){this.validationContext.addRule(new K.DJ("Input","Input should have values",this.appointment,!0)).addRule(new K.xF("Id","Id should be a CUID and not null",this.appointmentId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateAppointment({appointmentId:this.appointmentId,input:this.appointment}).pipe((0,U.w)(f=>(0,E.of)(f.data.updated)))}}class ye extends Z{constructor(f){super("CheckInAppointmentAction"),this.appointment=f}preValidateAction(){var f;this.validationContext.addRule(new K.DJ("Input","Input should have values",this.appointment,!0)).addRule(new K.xF("Id","Id should be a CUID and not null",this.appointment.id,!0)).addRule(new K.qJ("currentStatus","You can only check confirmed appointments in",null===(f=this.appointment.appointmentStatus)||void 0===f?void 0:f.name,"Confirmed",!0))}performAction(){this.response=this.businessProvider.data.userCheckInAppointment({appointmentId:this.appointment.id}).pipe((0,U.w)(f=>(0,E.of)(f.data.updated)))}}class Y extends Z{constructor(f){super("RequestRescheduleAppointmentAction"),this.appointment=f}preValidateAction(){var f;this.validationContext.addRule(new K.DJ("Input","Input should have values",this.appointment,!0)).addRule(new K.xF("Id","Id should be a CUID and not null",this.appointment.id,!0)).addRule(new K.qJ("currentStatus","You can only request reschedule for cancelled appointments",null===(f=this.appointment.appointmentStatus)||void 0===f?void 0:f.name,"Cancelled",!0))}performAction(){this.response=this.businessProvider.data.userRequestReschedule({appointmentId:this.appointment.id}).pipe((0,U.w)(f=>(0,E.of)(f.data.updated)))}}class A extends Z{constructor(f,S){super("RescheduleAppointmentAction"),this.appointment=f,this.rescheduleDate=S}preValidateAction(){this.validationContext.addRule(new K.DJ("Input","Input should have values",this.appointment,!0)).addRule(new K.xF("Id","Id should be a CUID and not null",this.appointment.id,!0))}performAction(){this.response=this.businessProvider.data.userRescheduleAppointment({appointmentId:this.appointment.id,rescheduleDate:this.rescheduleDate}).pipe((0,U.w)(f=>(0,E.of)(f.data.created)))}}class w extends Z{constructor(f){super("ConfirmAppointmentAction"),this.appointment=f}preValidateAction(){var f;this.validationContext.addRule(new K.DJ("Input","Input should have values",this.appointment,!0)).addRule(new K.xF("Id","Id should be a CUID and not null",this.appointment.id,!0)).addRule(new K.qJ("currentStatus","You can confirm only pending appointments",null===(f=this.appointment.appointmentStatus)||void 0===f?void 0:f.name,"Pending",!0))}performAction(){this.response=this.businessProvider.data.userConfirmAppointment({appointmentId:this.appointment.id}).pipe((0,U.w)(f=>(0,E.of)(f.data.updated)))}}class T extends Z{constructor(f){super("CancelAppointmentAction"),this.appointment=f}preValidateAction(){this.validationContext.addRule(new K.DJ("Input","Input should have values",this.appointment,!0)).addRule(new K.xF("Id","Id should be a CUID and not null",this.appointment.id,!0))}performAction(){this.response=this.businessProvider.data.userCancelAppointment({appointmentId:this.appointment.id}).pipe((0,U.w)(f=>(0,E.of)(f.data.updated)))}}class x extends Z{constructor(f){super("HideAppointmentAction"),this.appointment=f}preValidateAction(){var f;this.validationContext.addRule(new K.DJ("Input","Input should have values",this.appointment,!0)).addRule(new K.xF("Id","Id should be a CUID and not null",this.appointment.id,!0)).addRule(new K.HN("currentStatus","You can only hide non-pending appointments",null===(f=this.appointment.appointmentStatus)||void 0===f?void 0:f.name,"Pending",!0))}performAction(){this.response=this.businessProvider.data.userHideAppointment({appointmentId:this.appointment.id}).pipe((0,U.w)(f=>(0,E.of)(f.data.updated)))}}let Q=(()=>{class _ extends X.nH{constructor(S,F,N){super("NotificationService.AppointmentBusinessProviderService",S,N),this.data=F}createAppointment(S){const F=new xe(S);return F.Do(this),F.response}updateAppointment(S,F){const N=new Ce(S,F);return N.Do(this),N.response}checkInAppointment(S){const F=new ye(S);return F.Do(this),F.response}requestRescheduleAppointment(S){const F=new Y(S);return F.Do(this),F.response}rescheduleAppointment(S,F){const N=new A(S,F);return N.Do(this),N.response}confirmAppointment(S){const F=new w(S);return F.Do(this),F.response}cancelAppointment(S){const F=new T(S);return F.Do(this),F.response}hideAppointment(S){const F=new x(S);return F.Do(this),F.response}importAppointments(S){const F=new ue(S);return F.Do(this),F.response}validateAppointmentExcelData(S,F,N,L,ie,re){const $=new W(S,F,N,L,ie,re);return $.Do(this),$.response}}return _.\u0275fac=function(S){return new(S||_)(h.LFG(O.ed),h.LFG(R.q),h.LFG(X.oI))},_.\u0275prov=h.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"}),_})(),H=(()=>{class _ extends X.nH{constructor(S,F,N){super("AppointmentService",N,S),this.businessProvider=F}createAppointment(S){const F=Object.fromEntries(Object.entries(S).filter(([N,L])=>null!==L));return this.businessProvider.createAppointment(F)}updateAppointment(S,F){return this.businessProvider.updateAppointment(S,F)}checkInAppointment(S){return this.businessProvider.checkInAppointment(S)}requestRescheduleAppointment(S){return this.businessProvider.requestRescheduleAppointment(S)}rescheduleAppointment(S,F){return this.businessProvider.rescheduleAppointment(S,F)}confirmAppointment(S){return this.businessProvider.confirmAppointment(S)}cancelAppointment(S){return this.businessProvider.cancelAppointment(S)}hideAppointment(S){return this.businessProvider.hideAppointment(S)}importAppointments(S){return this.businessProvider.importAppointments(S)}validateAppointmentExcelData(S,F,N,L,ie,re){return this.businessProvider.validateAppointmentExcelData(S,F,N,L,ie,re)}}return _.\u0275fac=function(S){return new(S||_)(h.LFG(Q,8),h.LFG(Q),h.LFG(O.ed))},_.\u0275prov=h.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"}),_})();const te={Pending:"#ffbc03","Checked In":"#49c204","Claim Submitted":"#50fe93",Approved:"green",Rejected:"red",Rescheduled:"#ffbc03",Personal:"orange","Provider Paid":"blue","No Showed":"#ff1d1a",Confirmed:"#49c204",Processing:"#50fe93",Cancelled:"red"},ge={Pending:"assets/icons/pending.png","Checked In":"assets/icons/checkedin.png",Rescheduled:"assets/icons/rescheduled.png","No Showed":"assets/icons/noshow.png",Confirmed:"assets/icons/confirmed.png",Cancelled:"assets/icons/cancel.png",Approved:"assets/icons/pending.png",Rejected:"assets/icons/pending.png",Personal:"assets/icons/pending.png",Processing:"assets/icons/pending.png","Provider Paid":"assets/icons/pending.png","Claim Submitted":"assets/icons/pending.png"};let C=(()=>{class _ extends P.m1{constructor(S,F,N,L,ie,re){if(super({loading:!1,appointments:[],done:!1,searchQuery:"",id:void 0,formName:void 0,locationId:void 0,patientId:void 0,clinicalProviderId:void 0,attorneyId:void 0,firmId:void 0,legalCaseId:void 0,appointmentStatusId:void 0,visitKindId:void 0,medicalRecordStatusId:void 0,medicalRecordStatusOptions:void 0,paging:{limit:1e4,skip:0}}),this.data=S,this.router=F,this.route=N,this.toast=L,this.formService=ie,this.appointmentService=re,this.medicalRecordStatuses$=this.data.userMedicalRecordStatuses({input:{}}).pipe((0,U.w)($=>{var j;return(0,E.of)(null===(j=$.data.items)||void 0===j?void 0:j.map(k=>({id:k?.id,title:k?.name})).filter(k=>"Test Status"!=k.title&&"Medical Records Complete"!=k.title))})),this.dateFilter$=this.select($=>$.dateFilter),this.errors$=this.select($=>$.errors),this.loading$=this.select($=>$.loading),this.done$=this.select($=>$.done),this.item$=this.select($=>{var j,k,se,Se;return Object.assign(Object.assign({},$.item),{firstSpecialty:null===(se=null===(k=null===(j=$.item)||void 0===j?void 0:j.clinicalProvider)||void 0===k?void 0:k.clinicalProviderSpecialties)||void 0===se?void 0:se.at(0),color:null!==(Se=$.item)&&void 0!==Se&&Se.appointmentStatus?te[$.item.appointmentStatus.name]:"red"})}),this.appointments$=this.select($=>$.appointments),this.locations$=this.select($=>$.locations||[]),this.patients$=this.select($=>$.patients||[]),this.clinicalProviders$=this.select($=>$.clinicalProviders||[]),this.legalCases$=this.select($=>$.legalCases||[]),this.appointmentStatuses$=this.select($=>$.appointmentStatuses||[]),this.visitKinds$=this.select($=>$.visitKinds||[]),this.locationId$=this.select($=>$.locationId),this.patientId$=this.select($=>$.patientId),this.attorneyId$=this.select($=>$.attorneyId),this.firmId$=this.select($=>$.firmId),this.clinicalProviderId$=this.select($=>$.clinicalProviderId),this.legalCaseId$=this.select($=>$.legalCaseId),this.appointmentCount$=this.select($=>$.appointmentCount),this.appointmentStatusId$=this.select($=>$.appointmentStatusId),this.medicalRecordStatusId$=this.select($=>$.medicalRecordStatusId),this.medicalRecordStatusOptions$=this.select($=>$.medicalRecordStatusOptions),this.visitKindId$=this.select($=>$.visitKindId),this.paging$=this.select($=>$.paging),this.searchQuery$=this.select($=>$.searchQuery),this.formName$=this.select($=>$.formName),this.actionResult$=this.select(this.item$,this.done$,($,j)=>({item:$,done:j}),{debounce:!0}),this.formattedAppointments$=this.select(this.appointments$,$=>$.map(j=>{var k,se,Se,Pe,me,Ae,Ie,pe,$e,Le,Re,je,Je;let Ue="- -(-min)";if(j.start){let We=j.duration||"0 min";j.duration&&(j.duration<60?We=`${j.duration}min`:(j.duration>60&&(We=Math.floor(j.duration/60)+"h "+j.duration%60+"min"),j.duration%60==0&&(We=Math.floor(j.duration/60)+"h"))),Ue=`${(0,y.YZ)(j.start)} (${We})`}const Fe=[{title:"View"},{title:"Edit"}];"No Showed"!==(null===(k=j.appointmentStatus)||void 0===k?void 0:k.name)&&Fe.unshift({title:"No Show"});let Ee=!1;return(null===(se=j.clinicalProvider)||void 0===se?void 0:se.clinicalProviderSpecialties)?.forEach(We=>{var Qe;("Chiropractor"===(null===(Qe=We.specialty)||void 0===Qe?void 0:Qe.name)||"Home Health"===We?.name)&&(Ee=!0)}),Ee&&Fe.push({title:"Request More Visits"}),Object.assign(Object.assign({},j),{timeAndDuration:Ue,canRequestVisits:Ee,otherActions:Fe,providerImage:null===(Pe=null===(Se=j.clinicalProvider)||void 0===Se?void 0:Se.profileImage)||void 0===Pe?void 0:Pe.id,firstSpecialty:null===(Ae=null===(me=j.clinicalProvider)||void 0===me?void 0:me.clinicalProviderSpecialties)||void 0===Ae?void 0:Ae.at(0),patientImage:null!=(null===(Ie=j.patient)||void 0===Ie?void 0:Ie.users)&&null!=(null===(pe=j.patient)||void 0===pe?void 0:pe.users)?null===(Le=null===($e=j.patient)||void 0===$e?void 0:$e.users[0])||void 0===Le?void 0:Le.avatarUrl:"",providerSpecialties:null===(Re=j.clinicalProvider)||void 0===Re?void 0:Re.clinicalProviderSpecialties,color:j.appointmentStatus&&null!==(je=te[j.appointmentStatus.name])&&void 0!==je?je:"red",icon:j.appointmentStatus&&null!==(Je=ge[j.appointmentStatus.name])&&void 0!==Je?Je:"assets/icons/rescheduled.png"})})),this.formattedAppointmentsForProvider$=this.select(this.formattedAppointments$,$=>$.map(j=>{var k,se,Se;const Pe=[{title:"Check In",color:null!==(k=te["Checked In"])&&void 0!==k?k:"red",icon:ge["Checked In"]},{title:"Cancel",color:null!==(se=te.Cancelled)&&void 0!==se?se:"red",icon:ge.Cancelled},{title:"No Show",color:null!==(Se=te["No Showed"])&&void 0!==Se?Se:"red",icon:ge["No Showed"]}];return Object.assign(Object.assign({},j),{actions:Pe,canChangeStatus:!0})})),this.formattedAppointmentsForPatient$=this.select(this.formattedAppointments$,$=>$.map(j=>{var k,se,Se,Pe;const me={Pending:[{title:"Confirm",color:null!==(k=te.Confirmed)&&void 0!==k?k:"red",icon:ge.Confirmed},{title:"Cancel",color:null!==(se=te.Cancelled)&&void 0!==se?se:"red",icon:ge.Cancelled}],"Checked In":[],Rescheduled:[{title:"Confirm",color:null!==(Se=te.Confirmed)&&void 0!==Se?Se:"red",icon:ge.Confirmed},{title:"Cancel",color:null!==(Pe=te.Cancelled)&&void 0!==Pe?Pe:"red",icon:ge.Cancelled}],"No Showed":[],Confirmed:[],Cancelled:[]},Ae=j.appointmentStatus?me[j.appointmentStatus.name]:[];return Object.assign(Object.assign({},j),{actions:Ae,canChangeStatus:Ae.length>0})})),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.formattedAppointments$,this.locations$,this.patients$,this.clinicalProviders$,this.legalCases$,this.appointmentStatuses$,this.visitKinds$,this.medicalRecordStatuses$,($,j,k,se,Se,Pe,me,Ae,Ie,pe,$e,Le)=>({errors:$,loading:j,item:k,formName:se,appointments:Se,locations:Pe,patients:me,clinicalProviders:Ae,legalCases:Ie,appointmentStatuses:pe,visitKinds:$e,medicalRecordStatuses:Le}),{debounce:!0}),this.input$=this.select(this.paging$,this.locationId$,this.dateFilter$,this.patientId$,this.clinicalProviderId$,this.legalCaseId$,this.appointmentStatusId$,this.visitKindId$,this.searchQuery$,this.attorneyId$,this.firmId$,this.medicalRecordStatusId$,this.medicalRecordStatusOptions$,($,j,k,se,Se,Pe,me,Ae,Ie,pe,$e,Le,Re)=>({limit:$.limit,skip:$.skip,name:Ie,locationId:j,patientId:se,clinicalProviderId:Se,legalCaseId:Pe,appointmentStatusId:me,visitKindId:Ae,total:$.total,attorneyId:pe,firmId:$e,dateFilter:k,medicalRecordStatusId:Le,medicalRecordStatusOptions:Re})),this.setFormName=this.updater(($,j)=>Object.assign(Object.assign({},$),{formName:j})),this.setAttorneyId=this.updater(($,j)=>Object.assign(Object.assign({},$),{attorneyId:j})),this.setProviderId=this.updater(($,j)=>Object.assign(Object.assign({},$),{providerId:j})),this.setFirmId=this.updater(($,j)=>Object.assign(Object.assign({},$),{firmId:j})),this.setLocationId=this.updater(($,j)=>Object.assign(Object.assign({},$),{locationId:j})),this.setId=this.updater(($,j)=>Object.assign(Object.assign({},$),{id:j})),this.setPatientId=this.updater(($,j)=>Object.assign(Object.assign({},$),{patientId:j})),this.setClinicalProviderId=this.updater(($,j)=>Object.assign(Object.assign({},$),{clinicalProviderId:j})),this.setLegalCaseId=this.updater(($,j)=>Object.assign(Object.assign({},$),{legalCaseId:j})),this.setAppointmentStatusId=this.updater(($,j)=>Object.assign(Object.assign({},$),{appointmentStatusId:j})),this.setMedicalRecordStatusId=this.updater(($,j)=>Object.assign(Object.assign({},$),{medicalRecordStatusId:j})),this.setMedicalRecordStatusOptions=this.updater(($,j)=>Object.assign(Object.assign({},$),{medicalRecordStatusOptions:j})),this.setVisitKindId=this.updater(($,j)=>Object.assign(Object.assign({},$),{visitKindId:j})),this.setDateFilter=this.updater(($,j)=>Object.assign(Object.assign({},$),{dateFilter:j})),this.setSkip=this.updater(($,j)=>Object.assign(Object.assign({},$),{paging:Object.assign(Object.assign({},$.paging),{skip:j})})),this.setLimit=this.updater(($,j)=>Object.assign(Object.assign({},$),{paging:Object.assign(Object.assign({},$.paging),{limit:j})})),this.filterLocations=$=>this.data.userSelectLocations({input:{name:$}}).pipe((0,P._b)(j=>{const k=j.data.items;return this.patchState({locations:k}),k},j=>this.patchState({errors:j.graphQLErrors?j.graphQLErrors:j})),(0,J.U)(j=>j.data.items)),this.filterPatients=$=>this.data.userSelectPatients({input:{name:$}}).pipe((0,P._b)(j=>{const k=j.data.items;return this.patchState({patients:k}),k},j=>this.patchState({errors:j.graphQLErrors?j.graphQLErrors:j})),(0,J.U)(j=>j.data.items)),this.filterClinicalProviders=$=>this.data.userSelectClinicalProviders({input:{name:$}}).pipe((0,P._b)(j=>{const k=j.data.items;return this.patchState({clinicalProviders:k}),k},j=>this.patchState({errors:j.graphQLErrors?j.graphQLErrors:j})),(0,J.U)(j=>j.data.items)),this.filterLegalCases=$=>this.data.userSelectLegalCases({input:{name:$}}).pipe((0,P._b)(j=>{const k=j.data.items;return this.patchState({legalCases:k}),k},j=>this.patchState({errors:j.graphQLErrors?j.graphQLErrors:j})),(0,J.U)(j=>j.data.items)),this.filterAppointmentStatuses=$=>this.data.userSelectAppointmentStatuses({input:{name:$}}).pipe((0,P._b)(j=>{const k=j.data.items;return this.patchState({appointmentStatuses:k}),k},j=>this.patchState({errors:j.graphQLErrors?j.graphQLErrors:j})),(0,J.U)(j=>j.data.items)),this.filterVisitKinds=$=>this.data.userSelectVisitKinds({input:{name:$}}).pipe((0,P._b)(j=>{const k=j.data.items;return this.patchState({visitKinds:k}),k},j=>this.patchState({errors:j.graphQLErrors?j.graphQLErrors:j})),(0,J.U)(j=>j.data.items)),this.addLocation=this.updater(($,j)=>Object.assign(Object.assign({},$),{locations:$.locations.concat(j)})),this.addPatient=this.updater(($,j)=>Object.assign(Object.assign({},$),{patients:$.patients.concat(j)})),this.addClinicalProvider=this.updater(($,j)=>Object.assign(Object.assign({},$),{clinicalProviders:$.clinicalProviders.concat(j)})),this.addLegalCase=this.updater(($,j)=>Object.assign(Object.assign({},$),{legalCases:$.legalCases.concat(j)})),this.addAppointmentStatus=this.updater(($,j)=>Object.assign(Object.assign({},$),{appointmentStatuses:$.appointmentStatuses.concat(j)})),this.addVisitKind=this.updater(($,j)=>Object.assign(Object.assign({},$),{visitKinds:$.visitKinds.concat(j)})),this.deleteAppointment=this.updater(($,j)=>Object.assign(Object.assign({},$),{appointments:$.appointments.filter(k=>k.id!==j.id)})),this.setItem=this.updater(($,j)=>Object.assign(Object.assign({},$),{item:j})),this.addNewAppointment=this.updater(($,j)=>Object.assign(Object.assign({},$),{appointments:[...$.appointments,j]})),this.updateAppointment=this.updater(($,j)=>Object.assign(Object.assign({},$),{appointments:$.appointments.map(k=>k.id===j.id?j:k)})),this.addAppointments=this.updater(($,j)=>Object.assign(Object.assign({},$),{appointments:$.appointments.concat(j)})),this.updateAppointments=this.updater(($,j)=>Object.assign(Object.assign({},$),{appointments:$.appointments.map(k=>j.find(Se=>Se.id===k.id)||k)})),this.setSearchQuery=this.updater(($,j)=>Object.assign(Object.assign({},$),{searchQuery:j})),this.loadAppointmentEffect=this.effect($=>$.pipe((0,ae.b)(()=>this.patchState({loading:!0})),(0,U.w)(j=>this.data.userAppointment({appointmentId:j}).pipe((0,P._b)(k=>this.patchState({item:k.data.item,errors:k.errors,loading:!1}),k=>this.patchState({loading:!1,errors:k.graphQLErrors?k.graphQLErrors:k})))))),this.loadAppointmentsEffect=this.effect($=>$.pipe((0,ae.b)(()=>this.patchState({loading:!0})),(0,b.M)(this.input$),(0,U.w)(([j,k])=>(console.log("appointment input",k),this.data.userAppointments({input:k}).pipe((0,P._b)(se=>this.patchState({paging:{limit:k.limit,skip:k.skip,total:se.data.count.total},appointments:se.data.items,errors:se.errors,loading:!1}),se=>this.patchState({loading:!1,errors:se.graphQLErrors?se.graphQLErrors:se}))))))),this.uploadBillEffect=this.effect($=>$.pipe((0,ae.b)(()=>this.patchState({loading:!0})),(0,U.w)(j=>(console.log("appointment input",j),this.data.userUploadBill({input:j}).pipe((0,P._b)(k=>this.patchState({item:Object.assign(Object.assign({},j),{bill:k.data.updated.bill}),errors:k.errors,loading:!1}),k=>this.patchState({loading:!1,errors:k.graphQLErrors?k.graphQLErrors:k}))))))),this.createAppointmentEffect=this.effect($=>$.pipe((0,ae.b)(()=>this.patchState({loading:!0})),(0,U.w)(j=>this.appointmentService.createAppointment(Object.assign({},j)).pipe((0,P._b)(k=>{this.addNewAppointment(k),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:k,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},k=>{k.graphQLErrors?(this.toast.error(k.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:k.graphQLErrors?k.graphQLErrors:k})):(this.toast.error(k.Message),this.formService.setErrors(k.Data))}))))),this.updateAppointmentEffect=this.effect($=>$.pipe((0,ae.b)(()=>this.patchState({loading:!0})),(0,b.M)(this.item$),(0,U.w)(([j,k])=>this.appointmentService.updateAppointment(j,j.id).pipe((0,P._b)(se=>{this.updateAppointment(se),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:se,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},se=>{se.graphQLErrors?(this.toast.error(se.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:se.graphQLErrors?se.graphQLErrors:se})):(this.toast.error(se.Message),this.formService.setErrors(se.Data))}))))),this.deleteAppointmentEffect=this.effect($=>$.pipe((0,ae.b)(()=>this.patchState({loading:!0})),(0,b.M)(this.item$),(0,U.w)(([j,k])=>this.data.userDeleteAppointment({appointmentId:k.id}).pipe((0,P._b)(se=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:se.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},se=>{se.graphQLErrors?(this.toast.error(se.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:se.graphQLErrors?se.graphQLErrors:se})):(this.toast.error(se.Message),this.formService.setErrors(se.Data))}))))),this.importExcelEffect=this.effect($=>$.pipe((0,ae.b)(()=>this.patchState({loading:!0})),(0,U.w)(j=>this.appointmentService.importAppointments(j).pipe((0,q.K)(k=>{var se;return this.toast.error(null!==(se=k.Message)&&void 0!==se?se:"Failed to save",{duration:3e3}),G.E}),(0,ae.b)(k=>{const se=JSON.parse(k.created),Se=JSON.parse(k.updated),Pe=JSON.parse(k.failed),me=se.length+Se.length+Pe.length;this.addAppointments(se),this.updateAppointments(Se),this.toast.success(`${se.length} created, ${Se.length} updated, ${Pe.length} failed of total ${me}`,{duration:3e3})}))))),this.deleteSpecificAppointmentEffect=this.effect($=>$.pipe((0,U.w)(j=>this.data.userDeleteAppointment({appointmentId:j.id}).pipe((0,P._b)(k=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:k.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},k=>{k.graphQLErrors?(this.toast.error(k.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:k.graphQLErrors?k.graphQLErrors:k})):(this.toast.error(k.Message),this.formService.setErrors(k.Data))}))))),this.checkInAppointmentEffect=this.effect($=>$.pipe((0,ae.b)(()=>this.patchState({loading:!0})),(0,b.M)(this.item$),(0,U.w)(([j,k])=>(console.log("checkIn store appointment",j),this.appointmentService.checkInAppointment(j).pipe((0,P._b)(se=>{this.updateAppointment(se),this.toast.success("Checked In Successfully!"),setTimeout(()=>this.patchState({item:se,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},se=>{se.graphQLErrors?(this.toast.error(se.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:se.graphQLErrors?se.graphQLErrors:se})):(this.toast.error(se.Message),this.formService.setErrors(se.Data))})))))),this.confirmAppointmentEffect=this.effect($=>$.pipe((0,ae.b)(()=>this.patchState({loading:!0})),(0,b.M)(this.item$),(0,U.w)(([j,k])=>this.appointmentService.confirmAppointment(j).pipe((0,P._b)(se=>{this.updateAppointment(se),this.toast.success("Confirmed Successfully!"),setTimeout(()=>this.patchState({item:se,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},se=>{se.graphQLErrors?(this.toast.error(se.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:se.graphQLErrors?se.graphQLErrors:se})):(this.toast.error(se.Message),this.formService.setErrors(se.Data))}))))),this.requestRescehduleAppointmentEffect=this.effect($=>$.pipe((0,ae.b)(()=>this.patchState({loading:!0})),(0,b.M)(this.item$),(0,U.w)(([j,k])=>this.appointmentService.requestRescheduleAppointment(j).pipe((0,P._b)(se=>{this.updateAppointment(se),this.toast.success("Requested Reschedule Successfully!"),setTimeout(()=>this.patchState({item:se,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},se=>{se.graphQLErrors?(this.toast.error(se.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:se.graphQLErrors?se.graphQLErrors:se})):(this.toast.error(se.Message),this.formService.setErrors(se.Data))}))))),this.rescehduleAppointmentEffect=this.effect($=>$.pipe((0,ae.b)(()=>this.patchState({loading:!0})),(0,b.M)(this.item$),(0,U.w)(([{appointment:j,rescheduleDate:k},se])=>this.appointmentService.rescheduleAppointment(j,k).pipe((0,P._b)(Se=>{this.updateAppointment(Se),this.toast.success("Rescheduled Successfully!"),setTimeout(()=>this.patchState({item:Se,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},Se=>{Se.graphQLErrors?(this.toast.error(Se.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:Se.graphQLErrors?Se.graphQLErrors:Se})):(this.toast.error(Se.Message),this.formService.setErrors(Se.Data))}))))),this.cancelAppointmentEffect=this.effect($=>$.pipe((0,ae.b)(()=>this.patchState({loading:!0})),(0,b.M)(this.item$),(0,U.w)(([j,k])=>this.appointmentService.cancelAppointment(j).pipe((0,P._b)(se=>{this.updateAppointment(se),this.toast.success("Cancelled Successfully!"),setTimeout(()=>this.patchState({item:se,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},se=>{se.graphQLErrors?(this.toast.error(se.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:se.graphQLErrors?se.graphQLErrors:se})):(this.toast.error(se.Message),this.formService.setErrors(se.Data))}))))),this.hideAppointmentEffect=this.effect($=>$.pipe((0,ae.b)(()=>this.patchState({loading:!0})),(0,b.M)(this.item$),(0,U.w)(([j,k])=>this.appointmentService.hideAppointment(j).pipe((0,P._b)(se=>{this.updateAppointment(se),this.toast.success("Hided Successfully!"),setTimeout(()=>this.patchState({item:se,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},se=>{se.graphQLErrors?(this.toast.error(se.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:se.graphQLErrors?se.graphQLErrors:se})):(this.toast.error(se.Message),this.formService.setErrors(se.Data))}))))),this.route.snapshot.paramMap.has("appointmentId")){const $=this.route.snapshot.paramMap.get("appointmentId");this.setId($),this.setFormName("appointment_edit")}else this.setFormName("appointment_create");if(this.route.snapshot.paramMap.has("locationId")){const $=this.route.snapshot.paramMap.get("locationId");this.setLocationId($)}if(this.route.snapshot.paramMap.has("patientId")){const $=this.route.snapshot.paramMap.get("patientId");this.setPatientId($)}if(this.route.snapshot.paramMap.has("clinicalProviderId")){const $=this.route.snapshot.paramMap.get("clinicalProviderId");this.setClinicalProviderId($)}if(this.route.snapshot.paramMap.has("legalCaseId")){const $=this.route.snapshot.paramMap.get("legalCaseId");this.setLegalCaseId($)}if(this.route.snapshot.paramMap.has("appointmentStatusId")){const $=this.route.snapshot.paramMap.get("appointmentStatusId");this.setAppointmentStatusId($)}if(this.route.snapshot.paramMap.has("visitKindId")){const $=this.route.snapshot.paramMap.get("visitKindId");this.setVisitKindId($)}if(this.route.snapshot.paramMap.has("attorneyId")){const $=this.route.snapshot.paramMap.get("attorneyId");this.setAttorneyId($)}if(this.route.snapshot.paramMap.has("firmId")){const $=this.route.snapshot.paramMap.get("firmId");this.setFirmId($)}}validateImportData(S){return this.vm$.pipe((0,U.w)(F=>this.appointmentService.validateAppointmentExcelData(S,F.locations,F.patients,F.clinicalProviders,F.legalCases,F.appointmentStatuses)))}setAssignUserModalCtrl(S){this.assignUserModalCtrl=S}openAssignUserModal(S){var F;null===(F=this.assignUserModalCtrl)||void 0===F||F.open(S,{},this)}filterByMedicalRecordStatus(S){S&&(this.setMedicalRecordStatusOptions(S),this.loadAppointmentsEffect())}assignAppointmentToUser(S){const{id:F,name:N,assignedToId:L}=S,ie=this.actionResult$.subscribe(re=>{var $;const{done:j}=re;j&&(ie.unsubscribe(),null===($=this.assignUserModalCtrl)||void 0===$||$.close())});this.updateAppointmentEffect({id:F,name:N,assignedToId:L})}}return _.\u0275fac=function(S){return new(S||_)(h.LFG(R.q),h.LFG(de.F0),h.LFG(de.gz),h.LFG(e.F),h.LFG(z.o),h.LFG(H))},_.\u0275prov=h.Yz7({token:_,factory:_.\u0275fac}),_})()},57795:(De,we,M)=>{M.d(we,{y:()=>ye});var P=M(24280),E=M(60515),G=M(18505),U=M(63900),J=M(11365),ae=M(70262),b=M(94650),q=M(73602),y=M(30144),h=M(71873),R=M(4523),de=M(56869),e=M(71767),z=M(39646);class O extends e.T_{constructor(A){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=A}Do(A){return this.businessProvider=A,this.serviceContext=A.serviceContext,this.loggingService=A.loggingService,this.execute(),this.response}}var X=M(26177);class Z extends O{constructor(A){super("ValidateAuthorizationTypeExcelDataAction"),this.valid=!1,this.excelData=A}preValidateAction(){const A=[];this.excelData.map((w,T)=>{A.push(w.name)}),this.validationContext.addRule(new X.cL("nameIsUnique","Name should be unique",A,!0))}performAction(){}finish(){super.finish();const A={};let w=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(T=>{T instanceof X.mi?T.isValid||(A[T.columnName]?A[T.columnName].newNames.includes(T.newName)||A[T.columnName].newNames.push(T.newName):A[T.columnName]={options:T.possibleValueList.map(x=>x.name),newNames:[T.newName]}):T instanceof X.cL&&(T.isValid||(w=T.conflicts))})):this.valid=!0,this.response=(0,z.of)({valid:this.valid,excelData:this.excelData,conflictNames:w,unknownNames:A})}}var K=M(28234);class W extends X.wS{constructor(A,w,T,x,Q){super(A,w,T,x,Q,!0)}}class D extends X.ul{constructor(A,w,T,x=!1){super(A,w,x),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=T,this.configureRules()}configureRules(){this.rules.push(new X.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new W("name","The authorizationtype name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class be extends O{constructor(A){super("CreateAuthorizationTypeAction"),this.input=A}preValidateAction(){this.validationContext.addRule(new D("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateAuthorizationType({input:this.input}).pipe((0,U.w)(A=>(0,K.of)(A.data.created)))}}class g extends O{constructor(A){super("UpdateAuthorizationTypesAction"),this.authorizationTypes=A}preValidateAction(){this.validationContext.addRule(new X.DJ("Input","Input should have values",this.authorizationTypes,!0))}performAction(){this.response=this.businessProvider.data.userUpdateAuthorizationTypes({input:{authorizationTypes:this.authorizationTypes}}).pipe((0,U.w)(A=>(0,z.of)(A.data.updated)))}}class xe extends O{constructor(A,w){super("UpdateAuthorizationTypeAction"),this.authorizationType=A,this.authorizationTypeId=w}preValidateAction(){this.validationContext.addRule(new X.DJ("Input","Input should have values",this.authorizationType,!0)).addRule(new X.xF("Id","Id should be a CUID and not null",this.authorizationTypeId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateAuthorizationType({authorizationTypeId:this.authorizationTypeId,input:this.authorizationType}).pipe((0,U.w)(A=>(0,z.of)(A.data.updated)))}}let ue=(()=>{class Y extends e.nH{constructor(w,T,x){super("NotificationService.AuthorizationTypeBusinessProviderService",w,x),this.data=T}createAuthorizationType(w){const T=new be(w);return T.Do(this),T.response}updateAuthorizationType(w,T){const x=new xe(w,T);return x.Do(this),x.response}importAuthorizationTypes(w){const T=new g(w);return T.Do(this),T.response}validateAuthorizationTypeExcelData(w){const T=new Z(w);return T.Do(this),T.response}}return Y.\u0275fac=function(w){return new(w||Y)(b.LFG(de.ed),b.LFG(q.q),b.LFG(e.oI))},Y.\u0275prov=b.Yz7({token:Y,factory:Y.\u0275fac,providedIn:"root"}),Y})(),Ce=(()=>{class Y extends e.nH{constructor(w,T,x){super("AuthorizationTypeService",x,w),this.businessProvider=T}createAuthorizationType(w){return this.businessProvider.createAuthorizationType(w)}updateAuthorizationType(w,T){return this.businessProvider.updateAuthorizationType(w,T)}importAuthorizationTypes(w){return this.businessProvider.importAuthorizationTypes(w)}validateAuthorizationTypeExcelData(w){return this.businessProvider.validateAuthorizationTypeExcelData(w)}}return Y.\u0275fac=function(w){return new(w||Y)(b.LFG(ue,8),b.LFG(ue),b.LFG(de.ed))},Y.\u0275prov=b.Yz7({token:Y,factory:Y.\u0275fac,providedIn:"root"}),Y})(),ye=(()=>{class Y extends P.m1{constructor(w,T,x,Q,H,te){super({loading:!1,authorizationTypes:[],done:!1,searchQuery:"",formName:void 0,paging:{limit:1e4,skip:0}}),this.data=w,this.router=T,this.route=x,this.toast=Q,this.formService=H,this.authorizationTypeService=te,this.errors$=this.select(C=>C.errors),this.loading$=this.select(C=>C.loading),this.done$=this.select(C=>C.done),this.item$=this.select(C=>C.item),this.authorizationTypes$=this.select(C=>C.authorizationTypes),this.paging$=this.select(C=>C.paging),this.searchQuery$=this.select(C=>C.searchQuery),this.formName$=this.select(C=>C.formName),this.actionResult$=this.select(this.item$,this.done$,(C,_)=>({item:C,done:_}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.authorizationTypes$,(C,_,f,S,F)=>({errors:C,loading:_,item:f,formName:S,authorizationTypes:F}),{debounce:!0}),this.input$=this.select(this.paging$,this.searchQuery$,(C,_)=>({limit:C.limit,skip:C.skip,name:_,total:C.total})),this.setFormName=this.updater((C,_)=>Object.assign(Object.assign({},C),{formName:_})),this.setItem=this.updater((C,_)=>Object.assign(Object.assign({},C),{item:_})),this.addNewAuthorizationType=this.updater((C,_)=>Object.assign(Object.assign({},C),{authorizationTypes:[...C.authorizationTypes,_]})),this.updateAuthorizationType=this.updater((C,_)=>Object.assign(Object.assign({},C),{authorizationTypes:C.authorizationTypes.map(f=>f.id===_.id?_:f)})),this.addAuthorizationTypes=this.updater((C,_)=>Object.assign(Object.assign({},C),{authorizationTypes:C.authorizationTypes.concat(_)})),this.updateAuthorizationTypes=this.updater((C,_)=>Object.assign(Object.assign({},C),{authorizationTypes:C.authorizationTypes.map(f=>_.find(F=>F.id===f.id)||f)})),this.setSearchQuery=this.updater((C,_)=>Object.assign(Object.assign({},C),{searchQuery:_})),this.loadAuthorizationTypeEffect=this.effect(C=>C.pipe((0,G.b)(()=>this.patchState({loading:!0})),(0,U.w)(_=>this.data.userAuthorizationType({authorizationTypeId:_}).pipe((0,P._b)(f=>{this.patchState({item:f.data.item,errors:f.errors,loading:!1})},f=>this.patchState({loading:!1,errors:f.graphQLErrors?f.graphQLErrors:f})))))),this.loadAuthorizationTypesEffect=this.effect(C=>C.pipe((0,G.b)(()=>this.patchState({loading:!0})),(0,J.M)(this.input$),(0,U.w)(([_,f])=>this.data.userAuthorizationTypes({input:f}).pipe((0,P._b)(S=>{this.patchState({paging:{limit:f.limit,skip:f.skip,total:S.data.count.total},authorizationTypes:S.data.items,errors:S.errors,loading:!1})},S=>this.patchState({loading:!1,errors:S.graphQLErrors?S.graphQLErrors:S})))))),this.createAuthorizationTypeEffect=this.effect(C=>C.pipe((0,G.b)(()=>this.patchState({loading:!0})),(0,U.w)(_=>this.authorizationTypeService.createAuthorizationType(Object.assign({},_)).pipe((0,P._b)(f=>{this.addNewAuthorizationType(f),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:f,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},f=>{f.graphQLErrors?(this.toast.error(f.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:f.graphQLErrors?f.graphQLErrors:f})):(this.toast.error(f.Message),this.formService.setErrors(f.Data))}))))),this.updateAuthorizationTypeEffect=this.effect(C=>C.pipe((0,G.b)(()=>this.patchState({loading:!0})),(0,J.M)(this.item$),(0,U.w)(([_,f])=>this.authorizationTypeService.updateAuthorizationType(_,_.id).pipe((0,P._b)(S=>{this.updateAuthorizationType(S),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:S,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},S=>{S.graphQLErrors?(this.toast.error(S.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:S.graphQLErrors?S.graphQLErrors:S})):(this.toast.error(S.Message),this.formService.setErrors(S.Data))}))))),this.deleteAuthorizationTypeEffect=this.effect(C=>C.pipe((0,G.b)(()=>this.patchState({loading:!0})),(0,J.M)(this.item$),(0,U.w)(([_,f])=>this.data.userDeleteAuthorizationType({authorizationTypeId:f.id}).pipe((0,P._b)(S=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:S.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},S=>{S.graphQLErrors?(this.toast.error(S.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:S.graphQLErrors?S.graphQLErrors:S})):(this.toast.error(S.Message),this.formService.setErrors(S.Data))}))))),this.importExcelEffect=this.effect(C=>C.pipe((0,G.b)(()=>this.patchState({loading:!0})),(0,U.w)(_=>this.authorizationTypeService.importAuthorizationTypes(_).pipe((0,ae.K)(f=>{var S;return this.toast.error(null!==(S=f.Message)&&void 0!==S?S:"Failed to save",{duration:3e3}),E.E}),(0,G.b)(f=>{const S=JSON.parse(f.created),F=JSON.parse(f.updated),N=JSON.parse(f.failed),L=S.length+F.length+N.length;this.addAuthorizationTypes(S),this.updateAuthorizationTypes(F),this.toast.success(`${S.length} created, ${F.length} updated, ${N.length} failed of total ${L}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("authorizationTypeId")?(this.route.snapshot.paramMap.get("authorizationTypeId"),this.setFormName("authorizationType_edit")):this.setFormName("authorizationType_create")}validateImportData(w){return this.vm$.pipe((0,U.w)(T=>this.authorizationTypeService.validateAuthorizationTypeExcelData(w)))}}return Y.\u0275fac=function(w){return new(w||Y)(b.LFG(q.q),b.LFG(y.F0),b.LFG(y.gz),b.LFG(h.F),b.LFG(R.o),b.LFG(Ce))},Y.\u0275prov=b.Yz7({token:Y,factory:Y.\u0275fac}),Y})()},47380:(De,we,M)=>{M.d(we,{B:()=>Y});var P=M(24280),E=M(60515),G=M(54004),U=M(18505),J=M(63900),ae=M(11365),b=M(70262),q=M(94650),y=M(73602),h=M(30144),R=M(71873),de=M(4523),e=M(56869),z=M(71767),O=M(39646);class X extends z.T_{constructor(w){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=w}Do(w){return this.businessProvider=w,this.serviceContext=w.serviceContext,this.loggingService=w.loggingService,this.execute(),this.response}}var Z=M(26177);class K extends X{constructor(w,T,x,Q,H){super("ValidateAuthorizationExcelDataAction"),this.valid=!1,this.excelData=w,this.vendors=T,this.authorizationCategories=x,this.authorizationTypes=Q,this.procedures=H}preValidateAction(){const w=[];this.excelData.map((T,x)=>{w.push(T.name),this.validationContext.addRule(new Z.mi(`vendorName_${x}_is_valid}`,"Vendor Is Not Valid","vendor.name",T.vendor,this.vendors,!0)),this.validationContext.addRule(new Z.mi(`authorizationCategoryName_${x}_is_valid}`,"Authorization Category Is Not Valid","authorizationCategory.name",T.authorizationCategory,this.authorizationCategories,!0)),this.validationContext.addRule(new Z.mi(`authorizationTypeName_${x}_is_valid}`,"Authorization Type Is Not Valid","authorizationType.name",T.authorizationType,this.authorizationTypes,!0)),this.validationContext.addRule(new Z.mi(`procedureName_${x}_is_valid}`,"Procedure Is Not Valid","procedure.name",T.procedure,this.procedures,!0))}),this.validationContext.addRule(new Z.cL("nameIsUnique","Name should be unique",w,!0))}performAction(){}finish(){super.finish();const w={};let T=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(x=>{x instanceof Z.mi?x.isValid||(w[x.columnName]?w[x.columnName].newNames.includes(x.newName)||w[x.columnName].newNames.push(x.newName):w[x.columnName]={options:x.possibleValueList.map(Q=>Q.name),newNames:[x.newName]}):x instanceof Z.cL&&(x.isValid||(T=x.conflicts))})):this.valid=!0,this.response=(0,O.of)({valid:this.valid,excelData:this.excelData,conflictNames:T,unknownNames:w})}}var W=M(28234);class D extends Z.wS{constructor(w,T,x,Q,H){super(w,T,x,Q,H,!0)}}class be extends Z.ul{constructor(w,T,x,Q=!1){super(w,T,Q),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=x,this.configureRules()}configureRules(){this.rules.push(new Z.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new D("name","The authorization name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class g extends X{constructor(w){super("CreateAuthorizationAction"),this.input=w}preValidateAction(){this.validationContext.addRule(new be("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateAuthorization({input:this.input}).pipe((0,J.w)(w=>(0,W.of)(w.data.created)))}}class xe extends X{constructor(w){super("UpdateAuthorizationsAction"),this.authorizations=w}preValidateAction(){this.validationContext.addRule(new Z.DJ("Input","Input should have values",this.authorizations,!0))}performAction(){this.response=this.businessProvider.data.userUpdateAuthorizations({input:{authorizations:this.authorizations}}).pipe((0,J.w)(w=>(0,O.of)(w.data.updated)))}}class ue extends X{constructor(w,T){super("UpdateAuthorizationAction"),this.authorization=w,this.authorizationId=T}preValidateAction(){this.validationContext.addRule(new Z.DJ("Input","Input should have values",this.authorization,!0)).addRule(new Z.xF("Id","Id should be a CUID and not null",this.authorizationId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateAuthorization({authorizationId:this.authorizationId,input:this.authorization}).pipe((0,J.w)(w=>(0,O.of)(w.data.updated)))}}let Ce=(()=>{class A extends z.nH{constructor(T,x,Q){super("NotificationService.AuthorizationBusinessProviderService",T,Q),this.data=x}createAuthorization(T){const x=new g(T);return x.Do(this),x.response}updateAuthorization(T,x){const Q=new ue(T,x);return Q.Do(this),Q.response}importAuthorizations(T){const x=new xe(T);return x.Do(this),x.response}validateAuthorizationExcelData(T,x,Q,H,te){const ge=new K(T,x,Q,H,te);return ge.Do(this),ge.response}}return A.\u0275fac=function(T){return new(T||A)(q.LFG(e.ed),q.LFG(y.q),q.LFG(z.oI))},A.\u0275prov=q.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"}),A})(),ye=(()=>{class A extends z.nH{constructor(T,x,Q){super("AuthorizationService",Q,T),this.businessProvider=x}createAuthorization(T){return this.businessProvider.createAuthorization(T)}updateAuthorization(T,x){return this.businessProvider.updateAuthorization(T,x)}importAuthorizations(T){return this.businessProvider.importAuthorizations(T)}validateAuthorizationExcelData(T,x,Q,H,te){return this.businessProvider.validateAuthorizationExcelData(T,x,Q,H,te)}}return A.\u0275fac=function(T){return new(T||A)(q.LFG(Ce,8),q.LFG(Ce),q.LFG(e.ed))},A.\u0275prov=q.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"}),A})(),Y=(()=>{class A extends P.m1{constructor(T,x,Q,H,te,ge){if(super({loading:!1,authorizations:[],done:!1,searchQuery:"",formName:void 0,vendorId:void 0,authorizationCategoryId:void 0,authorizationTypeId:void 0,procedureId:void 0,paging:{limit:1e4,skip:0}}),this.data=T,this.router=x,this.route=Q,this.toast=H,this.formService=te,this.authorizationService=ge,this.errors$=this.select(N=>N.errors),this.loading$=this.select(N=>N.loading),this.done$=this.select(N=>N.done),this.item$=this.select(N=>N.item),this.authorizations$=this.select(N=>N.authorizations),this.vendors$=this.select(N=>N.vendors||[]),this.authorizationCategories$=this.select(N=>N.authorizationCategories||[]),this.authorizationTypes$=this.select(N=>N.authorizationTypes||[]),this.procedures$=this.select(N=>N.procedures||[]),this.vendorId$=this.select(N=>N.vendorId),this.authorizationCategoryId$=this.select(N=>N.authorizationCategoryId),this.authorizationTypeId$=this.select(N=>N.authorizationTypeId),this.procedureId$=this.select(N=>N.procedureId),this.paging$=this.select(N=>N.paging),this.searchQuery$=this.select(N=>N.searchQuery),this.formName$=this.select(N=>N.formName),this.actionResult$=this.select(this.item$,this.done$,(N,L)=>({item:N,done:L}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.authorizations$,this.vendors$,this.authorizationCategories$,this.authorizationTypes$,this.procedures$,(N,L,ie,re,$,j,k,se,Se)=>({errors:N,loading:L,item:ie,formName:re,authorizations:$,vendors:j,authorizationCategories:k,authorizationTypes:se,procedures:Se}),{debounce:!0}),this.input$=this.select(this.paging$,this.vendorId$,this.authorizationCategoryId$,this.authorizationTypeId$,this.procedureId$,this.searchQuery$,(N,L,ie,re,$,j)=>({limit:N.limit,skip:N.skip,name:j,vendorId:L,authorizationCategoryId:ie,authorizationTypeId:re,procedureId:$,total:N.total})),this.setFormName=this.updater((N,L)=>Object.assign(Object.assign({},N),{formName:L})),this.setVendorId=this.updater((N,L)=>Object.assign(Object.assign({},N),{vendorId:L})),this.setAuthorizationCategoryId=this.updater((N,L)=>Object.assign(Object.assign({},N),{authorizationCategoryId:L})),this.setAuthorizationTypeId=this.updater((N,L)=>Object.assign(Object.assign({},N),{authorizationTypeId:L})),this.setProcedureId=this.updater((N,L)=>Object.assign(Object.assign({},N),{procedureId:L})),this.filterVendors=N=>this.data.userSelectVendors({input:{name:N}}).pipe((0,P._b)(L=>{let ie=L.data.items;return this.patchState({vendors:ie}),ie},L=>this.patchState({errors:L.graphQLErrors?L.graphQLErrors:L})),(0,G.U)(L=>L.data.items)),this.filterAuthorizationCategories=N=>this.data.userSelectAuthorizationCategories({input:{name:N}}).pipe((0,P._b)(L=>{let ie=L.data.items;return this.patchState({authorizationCategories:ie}),ie},L=>this.patchState({errors:L.graphQLErrors?L.graphQLErrors:L})),(0,G.U)(L=>L.data.items)),this.filterAuthorizationTypes=N=>this.data.userSelectAuthorizationTypes({input:{name:N}}).pipe((0,P._b)(L=>{let ie=L.data.items;return this.patchState({authorizationTypes:ie}),ie},L=>this.patchState({errors:L.graphQLErrors?L.graphQLErrors:L})),(0,G.U)(L=>L.data.items)),this.filterProcedures=N=>this.data.userSelectProcedures({input:{name:N}}).pipe((0,P._b)(L=>{let ie=L.data.items;return this.patchState({procedures:ie}),ie},L=>this.patchState({errors:L.graphQLErrors?L.graphQLErrors:L})),(0,G.U)(L=>L.data.items)),this.addVendor=this.updater((N,L)=>Object.assign(Object.assign({},N),{vendors:N.vendors.concat(L)})),this.addAuthorizationCategory=this.updater((N,L)=>Object.assign(Object.assign({},N),{authorizationCategories:N.authorizationCategories.concat(L)})),this.addAuthorizationType=this.updater((N,L)=>Object.assign(Object.assign({},N),{authorizationTypes:N.authorizationTypes.concat(L)})),this.addProcedure=this.updater((N,L)=>Object.assign(Object.assign({},N),{procedures:N.procedures.concat(L)})),this.setItem=this.updater((N,L)=>Object.assign(Object.assign({},N),{item:L})),this.addNewAuthorization=this.updater((N,L)=>Object.assign(Object.assign({},N),{authorizations:[...N.authorizations,L]})),this.updateAuthorization=this.updater((N,L)=>Object.assign(Object.assign({},N),{authorizations:N.authorizations.map(ie=>ie.id===L.id?L:ie)})),this.addAuthorizations=this.updater((N,L)=>Object.assign(Object.assign({},N),{authorizations:N.authorizations.concat(L)})),this.updateAuthorizations=this.updater((N,L)=>Object.assign(Object.assign({},N),{authorizations:N.authorizations.map(ie=>L.find($=>$.id===ie.id)||ie)})),this.setSearchQuery=this.updater((N,L)=>Object.assign(Object.assign({},N),{searchQuery:L})),this.loadAuthorizationEffect=this.effect(N=>N.pipe((0,U.b)(()=>this.patchState({loading:!0})),(0,J.w)(L=>this.data.userAuthorization({authorizationId:L}).pipe((0,P._b)(ie=>{this.patchState({item:ie.data.item,errors:ie.errors,loading:!1})},ie=>this.patchState({loading:!1,errors:ie.graphQLErrors?ie.graphQLErrors:ie})))))),this.loadAuthorizationsEffect=this.effect(N=>N.pipe((0,U.b)(()=>this.patchState({loading:!0})),(0,ae.M)(this.input$),(0,J.w)(([L,ie])=>this.data.userAuthorizations({input:ie}).pipe((0,P._b)(re=>this.patchState({paging:{limit:ie.limit,skip:ie.skip,total:re.data.count.total},authorizations:re.data.items,errors:re.errors,loading:!1}),re=>this.patchState({loading:!1,errors:re.graphQLErrors?re.graphQLErrors:re})))))),this.createAuthorizationEffect=this.effect(N=>N.pipe((0,U.b)(()=>this.patchState({loading:!0})),(0,J.w)(L=>this.authorizationService.createAuthorization(Object.assign({},L)).pipe((0,P._b)(ie=>{this.addNewAuthorization(ie),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:ie,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},ie=>{ie.graphQLErrors?(this.toast.error(ie.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:ie.graphQLErrors?ie.graphQLErrors:ie})):(this.toast.error(ie.Message),this.formService.setErrors(ie.Data))}))))),this.updateAuthorizationEffect=this.effect(N=>N.pipe((0,U.b)(()=>this.patchState({loading:!0})),(0,ae.M)(this.item$),(0,J.w)(([L,ie])=>this.authorizationService.updateAuthorization(L,L.id).pipe((0,P._b)(re=>{this.updateAuthorization(re),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:re,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},re=>{re.graphQLErrors?(this.toast.error(re.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:re.graphQLErrors?re.graphQLErrors:re})):(this.toast.error(re.Message),this.formService.setErrors(re.Data))}))))),this.deleteAuthorizationEffect=this.effect(N=>N.pipe((0,U.b)(()=>this.patchState({loading:!0})),(0,ae.M)(this.item$),(0,J.w)(([L,ie])=>this.data.userDeleteAuthorization({authorizationId:ie.id}).pipe((0,P._b)(re=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:re.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},re=>{re.graphQLErrors?(this.toast.error(re.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:re.graphQLErrors?re.graphQLErrors:re})):(this.toast.error(re.Message),this.formService.setErrors(re.Data))}))))),this.importExcelEffect=this.effect(N=>N.pipe((0,U.b)(()=>this.patchState({loading:!0})),(0,J.w)(L=>this.authorizationService.importAuthorizations(L).pipe((0,b.K)(ie=>{var re;return this.toast.error(null!==(re=ie.Message)&&void 0!==re?re:"Failed to save",{duration:3e3}),E.E}),(0,U.b)(ie=>{const re=JSON.parse(ie.created),$=JSON.parse(ie.updated),j=JSON.parse(ie.failed),k=re.length+$.length+j.length;this.addAuthorizations(re),this.updateAuthorizations($),this.toast.success(`${re.length} created, ${$.length} updated, ${j.length} failed of total ${k}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("authorizationId")?(this.route.snapshot.paramMap.get("authorizationId"),this.setFormName("authorization_edit")):this.setFormName("authorization_create"),this.route.snapshot.paramMap.has("vendorId")){var _=this.route.snapshot.paramMap.get("vendorId");this.setVendorId(_)}if(this.route.snapshot.paramMap.has("authorizationCategoryId")){var f=this.route.snapshot.paramMap.get("authorizationCategoryId");this.setAuthorizationCategoryId(f)}if(this.route.snapshot.paramMap.has("authorizationTypeId")){var S=this.route.snapshot.paramMap.get("authorizationTypeId");this.setAuthorizationTypeId(S)}if(this.route.snapshot.paramMap.has("procedureId")){var F=this.route.snapshot.paramMap.get("procedureId");this.setProcedureId(F)}}validateImportData(T){return this.vm$.pipe((0,J.w)(x=>this.authorizationService.validateAuthorizationExcelData(T,x.vendors,x.authorizationCategories,x.authorizationTypes,x.procedures)))}}return A.\u0275fac=function(T){return new(T||A)(q.LFG(y.q),q.LFG(h.F0),q.LFG(h.gz),q.LFG(R.F),q.LFG(de.o),q.LFG(ye))},A.\u0275prov=q.Yz7({token:A,factory:A.\u0275fac}),A})()},60908:(De,we,M)=>{M.d(we,{R:()=>Y});var P=M(24280),E=M(60515),G=M(54004),U=M(18505),J=M(63900),ae=M(11365),b=M(70262),q=M(94650),y=M(73602),h=M(30144),R=M(71873),de=M(4523),e=M(56869),z=M(71767),O=M(39646);class X extends z.T_{constructor(w){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=w}Do(w){return this.businessProvider=w,this.serviceContext=w.serviceContext,this.loggingService=w.loggingService,this.execute(),this.response}}var Z=M(26177);class K extends X{constructor(w,T){super("ValidateClinicalProviderLocationAvailabilityExcelDataAction"),this.valid=!1,this.excelData=w,this.clinicalProviderLocations=T}preValidateAction(){const w=[];this.excelData.map((T,x)=>{w.push(T.name),this.validationContext.addRule(new Z.mi(`clinicalProviderLocationName_${x}_is_valid}`,"Clinical Provider Location Is Not Valid","clinicalProviderLocation.name",T.clinicalProviderLocation,this.clinicalProviderLocations,!0))}),this.validationContext.addRule(new Z.cL("nameIsUnique","Name should be unique",w,!0))}performAction(){}finish(){super.finish();const w={};let T=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(x=>{x instanceof Z.mi?x.isValid||(w[x.columnName]?w[x.columnName].newNames.includes(x.newName)||w[x.columnName].newNames.push(x.newName):w[x.columnName]={options:x.possibleValueList.map(Q=>Q.name),newNames:[x.newName]}):x instanceof Z.cL&&(x.isValid||(T=x.conflicts))})):this.valid=!0,this.response=(0,O.of)({valid:this.valid,excelData:this.excelData,conflictNames:T,unknownNames:w})}}var W=M(28234);class D extends Z.wS{constructor(w,T,x,Q,H){super(w,T,x,Q,H,!0)}}class be extends Z.ul{constructor(w,T,x,Q=!1){super(w,T,Q),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=x,this.configureRules()}configureRules(){this.rules.push(new Z.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new D("name","The clinicalproviderlocationavailability name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class g extends X{constructor(w){super("CreateClinicalProviderLocationAvailabilityAction"),this.input=w}preValidateAction(){this.validationContext.addRule(new be("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateClinicalProviderLocationAvailability({input:this.input}).pipe((0,J.w)(w=>(0,W.of)(w.data.created)))}}class xe extends X{constructor(w){super("UpdateClinicalProviderLocationAvailabilitiesAction"),this.clinicalProviderLocationAvailabilities=w}preValidateAction(){this.validationContext.addRule(new Z.DJ("Input","Input should have values",this.clinicalProviderLocationAvailabilities,!0))}performAction(){this.response=this.businessProvider.data.userUpdateClinicalProviderLocationAvailabilities({input:{clinicalProviderLocationAvailabilities:this.clinicalProviderLocationAvailabilities}}).pipe((0,J.w)(w=>(0,O.of)(w.data.updated)))}}class ue extends X{constructor(w,T){super("UpdateClinicalProviderLocationAvailabilityAction"),this.clinicalProviderLocationAvailability=w,this.clinicalProviderLocationAvailabilityId=T}preValidateAction(){this.validationContext.addRule(new Z.DJ("Input","Input should have values",this.clinicalProviderLocationAvailability,!0)).addRule(new Z.xF("Id","Id should be a CUID and not null",this.clinicalProviderLocationAvailabilityId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateClinicalProviderLocationAvailability({clinicalProviderLocationAvailabilityId:this.clinicalProviderLocationAvailabilityId,input:this.clinicalProviderLocationAvailability}).pipe((0,J.w)(w=>(0,O.of)(w.data.updated)))}}let Ce=(()=>{class A extends z.nH{constructor(T,x,Q){super("NotificationService.ClinicalProviderLocationAvailabilityBusinessProviderService",T,Q),this.data=x}createClinicalProviderLocationAvailability(T){const x=new g(T);return x.Do(this),x.response}updateClinicalProviderLocationAvailability(T,x){const Q=new ue(T,x);return Q.Do(this),Q.response}importClinicalProviderLocationAvailabilities(T){const x=new xe(T);return x.Do(this),x.response}validateClinicalProviderLocationAvailabilityExcelData(T,x){const Q=new K(T,x);return Q.Do(this),Q.response}}return A.\u0275fac=function(T){return new(T||A)(q.LFG(e.ed),q.LFG(y.q),q.LFG(z.oI))},A.\u0275prov=q.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"}),A})(),ye=(()=>{class A extends z.nH{constructor(T,x,Q){super("ClinicalProviderLocationAvailabilityService",Q,T),this.businessProvider=x}createClinicalProviderLocationAvailability(T){const x=Object.fromEntries(Object.entries(T).filter(([Q,H])=>null!==H));return this.businessProvider.createClinicalProviderLocationAvailability(x)}updateClinicalProviderLocationAvailability(T,x){return this.businessProvider.updateClinicalProviderLocationAvailability(T,x)}importClinicalProviderLocationAvailabilities(T){return this.businessProvider.importClinicalProviderLocationAvailabilities(T)}validateClinicalProviderLocationAvailabilityExcelData(T,x){return this.businessProvider.validateClinicalProviderLocationAvailabilityExcelData(T,x)}}return A.\u0275fac=function(T){return new(T||A)(q.LFG(Ce,8),q.LFG(Ce),q.LFG(e.ed))},A.\u0275prov=q.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"}),A})(),Y=(()=>{class A extends P.m1{constructor(T,x,Q,H,te,ge){if(super({loading:!1,clinicalProviderLocationAvailabilities:[],done:!1,searchQuery:"",formName:void 0,clinicalProviderLocationId:"-----",paging:{limit:1e4,skip:0}}),this.data=T,this.router=x,this.route=Q,this.toast=H,this.formService=te,this.clinicalProviderLocationAvailabilityService=ge,this.errors$=this.select(C=>C.errors),this.loading$=this.select(C=>C.loading),this.done$=this.select(C=>C.done),this.item$=this.select(C=>C.item),this.clinicalProviderLocationAvailabilities$=this.select(C=>C.clinicalProviderLocationAvailabilities),this.clinicalProviderLocations$=this.select(C=>C.clinicalProviderLocations||[]),this.paging$=this.select(C=>C.paging),this.searchQuery$=this.select(C=>C.searchQuery),this.formName$=this.select(C=>C.formName),this.startTime$=this.select(C=>C.startTime),this.endTime$=this.select(C=>C.endTime),this.day$=this.select(C=>C.day),this.clinicalProviderLocationId$=this.select(C=>C.clinicalProviderLocationId),this.actionResult$=this.select(this.item$,this.done$,(C,_)=>({item:C,done:_}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.clinicalProviderLocationAvailabilities$,this.clinicalProviderLocations$,(C,_,f,S,F,N)=>({errors:C,loading:_,item:f,formName:S,clinicalProviderLocationAvailabilities:F,clinicalProviderLocations:N}),{debounce:!0}),this.input$=this.select(this.paging$,this.searchQuery$,this.clinicalProviderLocationId$,this.startTime$,this.endTime$,this.day$,(C,_,f,S,F,N)=>({limit:C.limit,skip:C.skip,name:_,total:C.total,clinicalProviderLocationId:f,startTime:S,endTime:F,day:N})),this.setFormName=this.updater((C,_)=>Object.assign(Object.assign({},C),{formName:_})),this.setStartTime=this.updater((C,_)=>Object.assign(Object.assign({},C),{startTime:_})),this.setDay=this.updater((C,_)=>(console.log("day",_),Object.assign(Object.assign({},C),{day:_}))),this.setEndTime=this.updater((C,_)=>Object.assign(Object.assign({},C),{endTime:_})),this.setClinicalProviderLocationId=this.updater((C,_)=>(console.log("clinicalProviderLocationId",_),Object.assign(Object.assign({},C),{clinicalProviderLocationId:_}))),this.filterClinicalProviderLocations=C=>this.data.userSelectClinicalProviderLocations({input:{name:C}}).pipe((0,P._b)(_=>{const f=_.data.items;return this.patchState({clinicalProviderLocations:f}),f},_=>this.patchState({errors:_.graphQLErrors?_.graphQLErrors:_})),(0,G.U)(_=>_.data.items)),this.addClinicalProviderLocation=this.updater((C,_)=>Object.assign(Object.assign({},C),{clinicalProviderLocations:C.clinicalProviderLocations.concat(_)})),this.setItem=this.updater((C,_)=>Object.assign(Object.assign({},C),{item:_})),this.addNewClinicalProviderLocationAvailability=this.updater((C,_)=>Object.assign(Object.assign({},C),{clinicalProviderLocationAvailabilities:[...C.clinicalProviderLocationAvailabilities,_]})),this.updateClinicalProviderLocationAvailability=this.updater((C,_)=>Object.assign(Object.assign({},C),{clinicalProviderLocationAvailabilities:C.clinicalProviderLocationAvailabilities.map(f=>f.id===_.id?_:f)})),this.deleteClinicalProviderLocationAvailability=this.updater((C,_)=>Object.assign(Object.assign({},C),{clinicalProviderLocationAvailabilities:C.clinicalProviderLocationAvailabilities.filter(f=>f.id!==_.id)})),this.addClinicalProviderLocationAvailabilities=this.updater((C,_)=>Object.assign(Object.assign({},C),{clinicalProviderLocationAvailabilities:C.clinicalProviderLocationAvailabilities.concat(_)})),this.updateClinicalProviderLocationAvailabilities=this.updater((C,_)=>Object.assign(Object.assign({},C),{clinicalProviderLocationAvailabilities:C.clinicalProviderLocationAvailabilities.map(f=>_.find(F=>F.id===f.id)||f)})),this.setSearchQuery=this.updater((C,_)=>Object.assign(Object.assign({},C),{searchQuery:_})),this.loadClinicalProviderLocationAvailabilityEffect=this.effect(C=>C.pipe((0,U.b)(()=>this.patchState({loading:!0})),(0,J.w)(_=>this.data.userClinicalProviderLocationAvailability({clinicalProviderLocationAvailabilityId:_}).pipe((0,P._b)(f=>{this.patchState({item:f.data.item,errors:f.errors,loading:!1})},f=>this.patchState({loading:!1,errors:f.graphQLErrors?f.graphQLErrors:f})))))),this.loadClinicalProviderLocationAvailabilitiesEffect=this.effect(C=>C.pipe((0,U.b)(()=>{this.patchState({loading:!0})}),(0,ae.M)(this.input$),(0,J.w)(([_,f])=>(console.log("input",f),this.data.userClinicalProviderLocationAvailabilities({input:f}).pipe((0,P._b)(S=>{console.log("res",S.data.items),this.patchState({paging:{limit:f.limit,skip:f.skip,total:S.data.count.total},clinicalProviderLocationAvailabilities:S.data.items,errors:S.errors,loading:!1})},S=>this.patchState({loading:!1,errors:S.graphQLErrors?S.graphQLErrors:S}))))))),this.createClinicalProviderLocationAvailabilityEffect=this.effect(C=>C.pipe((0,U.b)(()=>this.patchState({loading:!0})),(0,J.w)(_=>this.clinicalProviderLocationAvailabilityService.createClinicalProviderLocationAvailability(Object.assign({},_)).pipe((0,P._b)(f=>{this.addNewClinicalProviderLocationAvailability(f),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:f,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},f=>{f.graphQLErrors?(this.toast.error(f.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:f.graphQLErrors?f.graphQLErrors:f})):(this.toast.error(f.Message),this.formService.setErrors(f.Data))}))))),this.updateClinicalProviderLocationAvailabilityEffect=this.effect(C=>C.pipe((0,U.b)(()=>this.patchState({loading:!0})),(0,ae.M)(this.item$),(0,J.w)(([_,f])=>this.clinicalProviderLocationAvailabilityService.updateClinicalProviderLocationAvailability(_,_.id).pipe((0,P._b)(S=>{this.updateClinicalProviderLocationAvailability(S),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:S,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},S=>{S.graphQLErrors?(this.toast.error(S.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:S.graphQLErrors?S.graphQLErrors:S})):(this.toast.error(S.Message),this.formService.setErrors(S.Data))}))))),this.deleteClinicalProviderLocationAvailabilityEffect=this.effect(C=>C.pipe((0,U.b)(()=>this.patchState({loading:!0})),(0,ae.M)(this.item$),(0,J.w)(([_,f])=>(console.log(f),this.data.userDeleteClinicalProviderLocationAvailability({clinicalProviderLocationAvailabilityId:f.id}).pipe((0,P._b)(S=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:S.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},S=>{S.graphQLErrors?(this.toast.error(S.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:S.graphQLErrors?S.graphQLErrors:S})):(this.toast.error(S.Message),this.formService.setErrors(S.Data))})))))),this.deleteClinicalProviderLocationAvailabilityInScheduleTimeEffect=this.effect(C=>C.pipe((0,U.b)(()=>this.patchState({loading:!0})),(0,ae.M)(this.item$),(0,J.w)(([_,f])=>(console.log(f),this.data.userDeleteClinicalProviderLocationAvailability({clinicalProviderLocationAvailabilityId:f.id}).pipe((0,P._b)(S=>{this.deleteClinicalProviderLocationAvailability(S.data.deleted),this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:S.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},S=>{S.graphQLErrors?(this.toast.error(S.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:S.graphQLErrors?S.graphQLErrors:S})):(this.toast.error(S.Message),this.formService.setErrors(S.Data))})))))),this.importExcelEffect=this.effect(C=>C.pipe((0,U.b)(()=>this.patchState({loading:!0})),(0,J.w)(_=>this.clinicalProviderLocationAvailabilityService.importClinicalProviderLocationAvailabilities(_).pipe((0,b.K)(f=>{var S;return this.toast.error(null!==(S=f.Message)&&void 0!==S?S:"Failed to save",{duration:3e3}),E.E}),(0,U.b)(f=>{const S=JSON.parse(f.created),F=JSON.parse(f.updated),N=JSON.parse(f.failed),L=S.length+F.length+N.length;this.addClinicalProviderLocationAvailabilities(S),this.updateClinicalProviderLocationAvailabilities(F),this.toast.success(`${S.length} created, ${F.length} updated, ${N.length} failed of total ${L}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("clinicalProviderLocationAvailabilityId")?this.setFormName("clinicalProviderLocationAvailability_edit"):this.setFormName("clinicalProviderLocationAvailability_create"),this.route.snapshot.paramMap.has("clinicalProviderLocationId")){const C=this.route.snapshot.paramMap.get("clinicalProviderLocationId");this.setClinicalProviderLocationId(C)}}validateImportData(T){return this.vm$.pipe((0,J.w)(x=>this.clinicalProviderLocationAvailabilityService.validateClinicalProviderLocationAvailabilityExcelData(T,x.clinicalProviderLocations)))}}return A.\u0275fac=function(T){return new(T||A)(q.LFG(y.q),q.LFG(h.F0),q.LFG(h.gz),q.LFG(R.F),q.LFG(de.o),q.LFG(ye))},A.\u0275prov=q.Yz7({token:A,factory:A.\u0275fac}),A})()},30760:(De,we,M)=>{M.d(we,{j:()=>T});var P=M(24280),E=M(60515),G=M(54004),U=M(18505),J=M(63900),ae=M(11365),b=M(70262),q=M(22412),y=M(15439),h=M.n(y),R=M(94650),de=M(73602),e=M(30144),z=M(71873),O=M(4523),X=M(56869),Z=M(71767),K=M(39646);class W extends Z.T_{constructor(Q){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=Q}Do(Q){return this.businessProvider=Q,this.serviceContext=Q.serviceContext,this.loggingService=Q.loggingService,this.execute(),this.response}}var D=M(26177);class be extends W{constructor(Q,H,te){super("ValidateClinicalProviderLocationExcelDataAction"),this.valid=!1,this.excelData=Q,this.clinicalProviders=H,this.locations=te}preValidateAction(){const Q=[];this.excelData.map((H,te)=>{Q.push(H.name),this.validationContext.addRule(new D.mi(`clinicalProviderName_${te}_is_valid}`,"Clinical Provider Is Not Valid","clinicalProvider.name",H.clinicalProvider,this.clinicalProviders,!0)),this.validationContext.addRule(new D.mi(`locationName_${te}_is_valid}`,"Location Is Not Valid","location.name",H.location,this.locations,!0))}),this.validationContext.addRule(new D.cL("nameIsUnique","Name should be unique",Q,!0))}performAction(){}finish(){super.finish();const Q={};let H=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(te=>{te instanceof D.mi?te.isValid||(Q[te.columnName]?Q[te.columnName].newNames.includes(te.newName)||Q[te.columnName].newNames.push(te.newName):Q[te.columnName]={options:te.possibleValueList.map(ge=>ge.name),newNames:[te.newName]}):te instanceof D.cL&&(te.isValid||(H=te.conflicts))})):this.valid=!0,this.response=(0,K.of)({valid:this.valid,excelData:this.excelData,conflictNames:H,unknownNames:Q})}}var g=M(28234);class xe extends D.wS{constructor(Q,H,te,ge,C){super(Q,H,te,ge,C,!0)}}class ue extends D.ul{constructor(Q,H,te,ge=!1){super(Q,H,ge),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=te,this.configureRules()}configureRules(){this.rules.push(new D.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new xe("name","The clinicalproviderlocation name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class Ce extends W{constructor(Q){super("CreateClinicalProviderLocationAction"),this.input=Q}preValidateAction(){this.validationContext.addRule(new ue("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateClinicalProviderLocation({input:this.input}).pipe((0,J.w)(Q=>(0,g.of)(Q.data.created)))}}class ye extends W{constructor(Q){super("UpdateClinicalProviderLocationsAction"),this.clinicalProviderLocations=Q}preValidateAction(){this.validationContext.addRule(new D.DJ("Input","Input should have values",this.clinicalProviderLocations,!0))}performAction(){this.response=this.businessProvider.data.userUpdateClinicalProviderLocations({input:{clinicalProviderLocations:this.clinicalProviderLocations}}).pipe((0,J.w)(Q=>(0,K.of)(Q.data.updated)))}}class Y extends W{constructor(Q,H){super("UpdateClinicalProviderLocationAction"),this.clinicalProviderLocation=Q,this.clinicalProviderLocationId=H}preValidateAction(){this.validationContext.addRule(new D.DJ("Input","Input should have values",this.clinicalProviderLocation,!0)).addRule(new D.xF("Id","Id should be a CUID and not null",this.clinicalProviderLocationId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateClinicalProviderLocation({clinicalProviderLocationId:this.clinicalProviderLocationId,input:this.clinicalProviderLocation}).pipe((0,J.w)(Q=>(0,K.of)(Q.data.updated)))}}let A=(()=>{class x extends Z.nH{constructor(H,te,ge){super("NotificationService.ClinicalProviderLocationBusinessProviderService",H,ge),this.data=te}createClinicalProviderLocation(H){const te=new Ce(H);return te.Do(this),te.response}updateClinicalProviderLocation(H,te){const ge=new Y(H,te);return ge.Do(this),ge.response}importClinicalProviderLocations(H){const te=new ye(H);return te.Do(this),te.response}validateClinicalProviderLocationExcelData(H,te,ge){const C=new be(H,te,ge);return C.Do(this),C.response}}return x.\u0275fac=function(H){return new(H||x)(R.LFG(X.ed),R.LFG(de.q),R.LFG(Z.oI))},x.\u0275prov=R.Yz7({token:x,factory:x.\u0275fac,providedIn:"root"}),x})(),w=(()=>{class x extends Z.nH{constructor(H,te,ge){super("ClinicalProviderLocationService",ge,H),this.businessProvider=te}createClinicalProviderLocation(H){const te=Object.fromEntries(Object.entries(H).filter(([ge,C])=>null!==C));return this.businessProvider.createClinicalProviderLocation(te)}updateClinicalProviderLocation(H,te){return this.businessProvider.updateClinicalProviderLocation(H,te)}importClinicalProviderLocations(H){return this.businessProvider.importClinicalProviderLocations(H)}validateClinicalProviderLocationExcelData(H,te,ge){return this.businessProvider.validateClinicalProviderLocationExcelData(H,te,ge)}}return x.\u0275fac=function(H){return new(H||x)(R.LFG(A,8),R.LFG(A),R.LFG(X.ed))},x.\u0275prov=R.Yz7({token:x,factory:x.\u0275fac,providedIn:"root"}),x})(),T=(()=>{class x extends P.m1{constructor(H,te,ge,C,_,f){if(super({loading:!1,clinicalProviderLocations:[],done:!1,searchQuery:"",formName:void 0,clinicalProviderId:void 0,locationId:void 0,paging:{limit:1e4,skip:0}}),this.data=H,this.router=te,this.route=ge,this.toast=C,this.formService=_,this.clinicalProviderLocationService=f,this.errors$=this.select(N=>N.errors),this.loading$=this.select(N=>N.loading),this.done$=this.select(N=>N.done),this.item$=this.select(N=>N.item),this.formattedItem$=this.select(this.item$,N=>{var L,ie,re,$,j,k,se;const Se=[];null===(ie=null===(L=N?.clinicalProvider)||void 0===L?void 0:L.clinicalProviderLocations)||void 0===ie||ie.map(({clinicalProviderLocationAvailabilities:Fe})=>{Se.push(...Fe)});const me=(0,q.vM)(Se,Fe=>Fe.day),Ae=[];let Ie=!1;const pe=h()().format("ll")+"",$e=h()().format("dddd")+"";let Le;for(const Fe in me){let Ee=me[Fe];Ee.sort((Me,We)=>Date.parse(Me.startTime)-Date.parse(We.startTime)),Ee=Ee.map(Me=>(Me.startTime=h()(Me.startTime,"hh:mm A").isValid()?h()(Me.startTime,"hh:mm A").format("HH:mm"):Me.startTime,Me.endTime=h()(Me.endTime,"hh:mm A").isValid()?h()(Me.endTime,"hh:mm A").format("HH:mm"):Me.endTime,Me)),Fe===$e&&(Le=Ee),Ae.push({day:Fe,hours:Ee}),"Sunday"===Fe&&(Ie=!0)}const Re={day:pe,hours:Le},je=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];Ae.sort((Fe,Ee)=>je.indexOf(Fe.day)-je.indexOf(Ee.day));const Je={todayHours:Re,others:Ae,sundayFlag:Ie},Ue=Object.assign(Object.assign({},N),{clinicalProvider:Object.assign(Object.assign({},N?.clinicalProvider),{rating:0,locations:null===($=null===(re=N?.clinicalProvider)||void 0===re?void 0:re.clinicalProviderLocations)||void 0===$?void 0:$.map(({location:Fe,clinicalProviderLocationAvailabilities:Ee})=>{var Me,We,Qe;return{id:Fe?.id,name:Fe?.name,locationImages:Fe.locationImages,endLatitudeProp:Fe?.latitude,endLongitudeProp:Fe?.longitude,vendor:null===(We=null===(Me=N?.clinicalProvider)||void 0===Me?void 0:Me.vendor)||void 0===We?void 0:We.name,rating:null!==(Qe=N?.clinicalProvider.rating)&&void 0!==Qe?Qe:0,businessHours:(0,q.f1)(Ee??[],fs=>fs.day)}}),specialties:null===(k=null===(j=N?.clinicalProvider)||void 0===j?void 0:j.clinicalProviderSpecialties)||void 0===k?void 0:k.map(({specialty:Fe})=>({name:Fe?.name})),businessHours:Je}),detailView:!0,formattedDistance:(null!==(se=N?.distance)&&void 0!==se?se:0).toFixed(2),clinicalProviderLocations:[]});return delete Ue.clinicalProviderLocations,delete Ue.clinicalProviderSpecialties,Ue}),this.clinicalProviderLocations$=this.select(N=>N.clinicalProviderLocations),this.formattedClinicalProviderLocations$=this.select(this.clinicalProviderLocations$,N=>N.map(L=>{var ie,re,$,j;return Object.assign(Object.assign({},L),{formattedDistance:(null!==(ie=L?.distance)&&void 0!==ie?ie:0).toFixed(2),clinicalProvider:Object.assign(Object.assign({},L.clinicalProvider),{rating:0,specialtiesCount:(null===(re=L.clinicalProvider.clinicalProviderSpecialties)||void 0===re?void 0:re.length)-3,clinicalProviderSpecialties:null===(j=null===($=L?.clinicalProvider)||void 0===$?void 0:$.clinicalProviderSpecialties)||void 0===j?void 0:j.slice(0,3)})})})),this.clinicalProviders$=this.select(N=>N.clinicalProviders||[]),this.locations$=this.select(N=>N.locations||[]),this.clinicalProviderId$=this.select(N=>N.clinicalProviderId),this.locationId$=this.select(N=>N.locationId),this.paging$=this.select(N=>N.paging),this.searchQuery$=this.select(N=>N.searchQuery),this.formName$=this.select(N=>N.formName),this.providerName$=this.select(N=>N.providerName),this.specialties$=this.select(N=>N.specialties),this.favorite$=this.select(N=>N.favorite),this.locationData$=this.select(N=>N.locationData),this.distance$=this.select(N=>N.distance),this.centerLocation$=this.select(N=>N.centerLocation),this.actionResult$=this.select(this.item$,this.done$,(N,L)=>({item:N,done:L}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.clinicalProviderLocations$,this.clinicalProviders$,this.locations$,(N,L,ie,re,$,j,k)=>({errors:N,loading:L,item:ie,formName:re,clinicalProviderLocations:$,clinicalProviders:j,locations:k}),{debounce:!0}),this.input$=this.select(this.paging$,this.clinicalProviderId$,this.locationId$,this.searchQuery$,this.providerName$,this.specialties$,this.favorite$,this.distance$,this.centerLocation$,this.locationData$,(N,L,ie,re,$,j,k,se,Se,Pe)=>({limit:N.limit,skip:N.skip,name:re,clinicalProviderId:L,locationId:ie,total:N.total,providerName:$,specialties:j,favorite:k,distance:se,centerLocation:Se,locationData:Pe})),this.setFormName=this.updater((N,L)=>Object.assign(Object.assign({},N),{formName:L})),this.setClinicalProviderId=this.updater((N,L)=>Object.assign(Object.assign({},N),{clinicalProviderId:L})),this.setLocationId=this.updater((N,L)=>Object.assign(Object.assign({},N),{locationId:L})),this.setProviderName=this.updater((N,L)=>Object.assign(Object.assign({},N),{providerName:L})),this.setSpecialties=this.updater((N,L)=>Object.assign(Object.assign({},N),{specialties:L})),this.setFavorite=this.updater((N,L)=>Object.assign(Object.assign({},N),{favorite:L})),this.setLocationData=this.updater((N,L)=>Object.assign(Object.assign({},N),{locationData:L})),this.setDistance=this.updater((N,L)=>Object.assign(Object.assign({},N),{distance:L})),this.setCenterLocation=this.updater((N,L)=>Object.assign(Object.assign({},N),{centerLocation:L})),this.setSkip=this.updater((N,L)=>Object.assign(Object.assign({},N),{paging:Object.assign(Object.assign({},N.paging),{skip:L})})),this.setLimit=this.updater((N,L)=>Object.assign(Object.assign({},N),{paging:Object.assign(Object.assign({},N.paging),{limit:L})})),this.filterClinicalProviders=N=>this.data.userSelectClinicalProviders({input:{name:N}}).pipe((0,P._b)(L=>{let ie=L.data.items;return this.patchState({clinicalProviders:ie}),ie},L=>this.patchState({errors:L.graphQLErrors?L.graphQLErrors:L})),(0,G.U)(L=>L.data.items)),this.filterLocations=N=>this.data.userSelectLocations({input:{name:N}}).pipe((0,P._b)(L=>{let ie=L.data.items;return this.patchState({locations:ie}),ie},L=>this.patchState({errors:L.graphQLErrors?L.graphQLErrors:L})),(0,G.U)(L=>L.data.items)),this.addClinicalProvider=this.updater((N,L)=>Object.assign(Object.assign({},N),{clinicalProviders:N.clinicalProviders.concat(L)})),this.addLocation=this.updater((N,L)=>Object.assign(Object.assign({},N),{locations:N.locations.concat(L)})),this.updateClinicalProvider=this.updater((N,L)=>{var ie;return Object.assign(Object.assign({},N),{clinicalProviderLocations:null===(ie=N.clinicalProviderLocations)||void 0===ie?void 0:ie.map(re=>L.id===re.clinicalProviderId?Object.assign(Object.assign({},re),{clinicalProvider:L}):re)})}),this.setItem=this.updater((N,L)=>Object.assign(Object.assign({},N),{item:L})),this.addNewClinicalProviderLocation=this.updater((N,L)=>Object.assign(Object.assign({},N),{clinicalProviderLocations:[...N.clinicalProviderLocations,L]})),this.updateClinicalProviderLocation=this.updater((N,L)=>Object.assign(Object.assign({},N),{clinicalProviderLocations:N.clinicalProviderLocations.map(ie=>ie.id===L.id?L:ie)})),this.clear=this.updater(N=>Object.assign(Object.assign({},N),{clinicalProviderLocations:[]})),this.addClinicalProviderLocations=this.updater((N,L)=>Object.assign(Object.assign({},N),{clinicalProviderLocations:N.clinicalProviderLocations.concat(L)})),this.updateClinicalProviderLocations=this.updater((N,L)=>Object.assign(Object.assign({},N),{clinicalProviderLocations:N.clinicalProviderLocations.map(ie=>L.find($=>$.id===ie.id)||ie)})),this.setSearchQuery=this.updater((N,L)=>Object.assign(Object.assign({},N),{searchQuery:L})),this.loadClinicalProviderLocationEffect=this.effect(N=>N.pipe((0,U.b)(()=>this.patchState({loading:!0})),(0,J.w)(L=>this.data.userClinicalProviderLocation({clinicalProviderLocationId:L}).pipe((0,P._b)(ie=>(console.log("res.data.item",ie.data.item),this.patchState({item:ie.data.item,errors:ie.errors,loading:!1})),ie=>this.patchState({loading:!1,errors:ie.graphQLErrors?ie.graphQLErrors:ie})))))),this.loadClinicalProviderLocationsEffect=this.effect(N=>N.pipe((0,U.b)(()=>this.patchState({loading:!0})),(0,ae.M)(this.input$),(0,J.w)(([L,ie])=>this.data.userClinicalProviderLocations({input:ie}).pipe((0,P._b)(re=>this.patchState({paging:{limit:ie.limit,skip:ie.skip,total:re.data.count.total},clinicalProviderLocations:"all"!==ie.clinicalProviderId?re.data.items:[],errors:re.errors,loading:!1}),re=>this.patchState({loading:!1,errors:re.graphQLErrors?re.graphQLErrors:re})))))),this.createClinicalProviderLocationEffect=this.effect(N=>N.pipe((0,U.b)(()=>this.patchState({loading:!0})),(0,J.w)(L=>this.clinicalProviderLocationService.createClinicalProviderLocation(Object.assign({},L)).pipe((0,P._b)(ie=>{this.addNewClinicalProviderLocation(ie),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:ie,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},ie=>{ie.graphQLErrors?(this.toast.error(ie.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:ie.graphQLErrors?ie.graphQLErrors:ie})):(this.toast.error(ie.Message),this.formService.setErrors(ie.Data))}))))),this.updateClinicalProviderLocationEffect=this.effect(N=>N.pipe((0,U.b)(()=>this.patchState({loading:!0})),(0,ae.M)(this.item$),(0,J.w)(([L,ie])=>this.clinicalProviderLocationService.updateClinicalProviderLocation(L,L.id).pipe((0,P._b)(re=>{this.updateClinicalProviderLocation(re),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:re,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},re=>{re.graphQLErrors?(this.toast.error(re.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:re.graphQLErrors?re.graphQLErrors:re})):(this.toast.error(re.Message),this.formService.setErrors(re.Data))}))))),this.deleteClinicalProviderLocationEffect=this.effect(N=>N.pipe((0,U.b)(()=>this.patchState({loading:!0})),(0,ae.M)(this.item$),(0,J.w)(([L,ie])=>this.data.userDeleteClinicalProviderLocation({clinicalProviderLocationId:ie.id}).pipe((0,P._b)(re=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:re.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},re=>{re.graphQLErrors?(this.toast.error(re.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:re.graphQLErrors?re.graphQLErrors:re})):(this.toast.error(re.Message),this.formService.setErrors(re.Data))}))))),this.importExcelEffect=this.effect(N=>N.pipe((0,U.b)(()=>this.patchState({loading:!0})),(0,J.w)(L=>this.clinicalProviderLocationService.importClinicalProviderLocations(L).pipe((0,b.K)(ie=>{var re;return this.toast.error(null!==(re=ie.Message)&&void 0!==re?re:"Failed to save",{duration:3e3}),E.E}),(0,U.b)(ie=>{const re=JSON.parse(ie.created),$=JSON.parse(ie.updated),j=JSON.parse(ie.failed),k=re.length+$.length+j.length;this.addClinicalProviderLocations(re),this.updateClinicalProviderLocations($),this.toast.success(`${re.length} created, ${$.length} updated, ${j.length} failed of total ${k}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("clinicalProviderLocationId")?this.setFormName("clinicalProviderLocation_edit"):this.setFormName("clinicalProviderLocation_create"),this.route.snapshot.paramMap.has("clinicalProviderId")){var S=this.route.snapshot.paramMap.get("clinicalProviderId");this.setClinicalProviderId(S)}if(this.route.snapshot.paramMap.has("locationId")){var F=this.route.snapshot.paramMap.get("locationId");this.setLocationId(F)}}validateImportData(H){return this.vm$.pipe((0,J.w)(te=>this.clinicalProviderLocationService.validateClinicalProviderLocationExcelData(H,te.clinicalProviders,te.locations)))}}return x.\u0275fac=function(H){return new(H||x)(R.LFG(de.q),R.LFG(e.F0),R.LFG(e.gz),R.LFG(z.F),R.LFG(O.o),R.LFG(w))},x.\u0275prov=R.Yz7({token:x,factory:x.\u0275fac}),x})()},94929:(De,we,M)=>{M.d(we,{D:()=>Y});var P=M(24280),E=M(60515),G=M(54004),U=M(18505),J=M(63900),ae=M(11365),b=M(70262),q=M(94650),y=M(73602),h=M(30144),R=M(71873),de=M(4523),e=M(56869),z=M(71767),O=M(39646);class X extends z.T_{constructor(w){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=w}Do(w){return this.businessProvider=w,this.serviceContext=w.serviceContext,this.loggingService=w.loggingService,this.execute(),this.response}}var Z=M(26177);class K extends X{constructor(w,T){super("ValidateClinicalProviderExcelDataAction"),this.valid=!1,this.excelData=w,this.vendors=T}preValidateAction(){const w=[];this.excelData.map((T,x)=>{w.push(T.name),this.validationContext.addRule(new Z.mi(`vendorName_${x}_is_valid}`,"Vendor Is Not Valid","vendor.name",T.vendor,this.vendors,!0))}),this.validationContext.addRule(new Z.cL("nameIsUnique","Name should be unique",w,!0))}performAction(){}finish(){super.finish();const w={};let T=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(x=>{x instanceof Z.mi?x.isValid||(w[x.columnName]?w[x.columnName].newNames.includes(x.newName)||w[x.columnName].newNames.push(x.newName):w[x.columnName]={options:x.possibleValueList.map(Q=>Q.name),newNames:[x.newName]}):x instanceof Z.cL&&(x.isValid||(T=x.conflicts))})):this.valid=!0,this.response=(0,O.of)({valid:this.valid,excelData:this.excelData,conflictNames:T,unknownNames:w})}}var W=M(28234);class D extends Z.wS{constructor(w,T,x,Q,H){super(w,T,x,Q,H,!0)}}class be extends Z.ul{constructor(w,T,x,Q=!1){super(w,T,Q),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=x,this.configureRules()}configureRules(){this.rules.push(new Z.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new D("name","The clinicalprovider name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class g extends X{constructor(w){super("CreateClinicalProviderAction"),this.input=w}preValidateAction(){this.validationContext.addRule(new be("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateClinicalProvider({input:this.input}).pipe((0,J.w)(w=>(0,W.of)(w.data.created)))}}class xe extends X{constructor(w){super("UpdateClinicalProvidersAction"),this.clinicalProviders=w}preValidateAction(){this.validationContext.addRule(new Z.DJ("Input","Input should have values",this.clinicalProviders,!0))}performAction(){this.response=this.businessProvider.data.userUpdateClinicalProviders({input:{clinicalProviders:this.clinicalProviders}}).pipe((0,J.w)(w=>(0,O.of)(w.data.updated)))}}class ue extends X{constructor(w,T){super("UpdateClinicalProviderAction"),this.clinicalProvider=w,this.clinicalProviderId=T}preValidateAction(){this.validationContext.addRule(new Z.DJ("Input","Input should have values",this.clinicalProvider,!0)).addRule(new Z.xF("Id","Id should be a CUID and not null",this.clinicalProviderId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateClinicalProvider({clinicalProviderId:this.clinicalProviderId,input:this.clinicalProvider}).pipe((0,J.w)(w=>(0,O.of)(w.data.updated)))}}let Ce=(()=>{class A extends z.nH{constructor(T,x,Q){super("NotificationService.ClinicalProviderBusinessProviderService",T,Q),this.data=x}createClinicalProvider(T){const x=new g(T);return x.Do(this),x.response}updateClinicalProvider(T,x){const Q=new ue(T,x);return Q.Do(this),Q.response}importClinicalProviders(T){const x=new xe(T);return x.Do(this),x.response}validateClinicalProviderExcelData(T,x){const Q=new K(T,x);return Q.Do(this),Q.response}}return A.\u0275fac=function(T){return new(T||A)(q.LFG(e.ed),q.LFG(y.q),q.LFG(z.oI))},A.\u0275prov=q.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"}),A})(),ye=(()=>{class A extends z.nH{constructor(T,x,Q){super("ClinicalProviderService",Q,T),this.businessProvider=x}createClinicalProvider(T){const x=Object.fromEntries(Object.entries(T).filter(([Q,H])=>null!==H));return this.businessProvider.createClinicalProvider(x)}updateClinicalProvider(T,x){return this.businessProvider.updateClinicalProvider(T,x)}importClinicalProviders(T){return this.businessProvider.importClinicalProviders(T)}validateClinicalProviderExcelData(T,x){return this.businessProvider.validateClinicalProviderExcelData(T,x)}}return A.\u0275fac=function(T){return new(T||A)(q.LFG(Ce,8),q.LFG(Ce),q.LFG(e.ed))},A.\u0275prov=q.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"}),A})(),Y=(()=>{class A extends P.m1{constructor(T,x,Q,H,te,ge){if(super({loading:!1,clinicalProviders:[],done:!1,searchQuery:"",formName:void 0,vendorId:void 0,specialtyFilterParam:[],serviceFilterParam:[],clinicalProvidersSpecial:[],clinicalProviderLocations:[],clinicalProviderId:void 0,clinicalProviderLocationId:void 0,paging:{limit:1e4,skip:0},locationFilterParam:[],distance:void 0,isDoctorsPage:!1}),this.data=T,this.router=x,this.route=Q,this.toast=H,this.formService=te,this.clinicalProviderService=ge,this.errors$=this.select(C=>C.errors),this.favorites$=this.select(C=>C.favorites),this.loading$=this.select(C=>C.loading),this.done$=this.select(C=>C.done),this.item$=this.select(C=>C.item),this.clinicalProviders$=this.select(C=>C.clinicalProviders),this.specialtyFilterParam$=this.select(C=>C.specialtyFilterParam),this.serviceFilterParam$=this.select(C=>C.serviceFilterParam),this.vendors$=this.select(C=>C.vendors||[]),this.clinicalProviderId$=this.select(C=>C.clinicalProviderId),this.clinicalProviderLocationId$=this.select(C=>C.clinicalProviderLocationId),this.locationId$=this.select(C=>C.locationId),this.clinicalProvidersSpecial$=this.select(C=>C.clinicalProvidersSpecial),this.clinicalProviderLocations$=this.select(C=>C.clinicalProviderLocations),this.vendorId$=this.select(C=>C.vendorId),this.paging$=this.select(C=>C.paging),this.searchQuery$=this.select(C=>C.searchQuery),this.formName$=this.select(C=>C.formName),this.locationFilterParam$=this.select(C=>C.locationFilterParam),this.distance$=this.select(C=>C.distance),this.isDoctorsPage$=this.select(C=>C.isDoctorsPage),this.actionResult$=this.select(this.item$,this.done$,(C,_)=>({item:C,done:_}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.clinicalProviders$,this.vendors$,(C,_,f,S,F,N)=>({errors:C,loading:_,item:f,formName:S,clinicalProviders:F,vendors:N}),{debounce:!0}),this.input$=this.select(this.paging$,this.vendorId$,this.searchQuery$,this.specialtyFilterParam$,this.serviceFilterParam$,this.clinicalProviderId$,this.clinicalProviderLocationId$,this.locationFilterParam$,this.distance$,this.isDoctorsPage$,this.favorites$,(C,_,f,S,F,N,L,ie,re,$,j)=>({limit:C.limit,skip:C.skip,name:f,vendorId:_,specialites:S,services:F,total:C.total,clinicalProviderId:N,clinicalProviderLocationId:L,centerLocation:ie,distance:re,isDoctorsPage:$,favorites:j})),this.setFormName=this.updater((C,_)=>Object.assign(Object.assign({},C),{formName:_})),this.setClinicalProviderId=this.updater((C,_)=>Object.assign(Object.assign({},C),{clinicalProviderId:_})),this.setClinicalProviderLocationId=this.updater((C,_)=>Object.assign(Object.assign({},C),{clinicalProviderLocationId:_})),this.setLocationId=this.updater((C,_)=>Object.assign(Object.assign({},C),{locationId:_})),this.setFavorites=this.updater((C,_)=>Object.assign(Object.assign({},C),{favorites:_})),this.setSpecialtyFilterParam=this.updater((C,_)=>Object.assign(Object.assign({},C),{specialtyFilterParam:_})),this.setServiceFilterParam=this.updater((C,_)=>Object.assign(Object.assign({},C),{serviceFilterParam:_})),this.setLocationFilterParam=this.updater((C,_)=>Object.assign(Object.assign({},C),{locationFilterParam:_})),this.setDistance=this.updater((C,_)=>Object.assign(Object.assign({},C),{distance:_})),this.setVendorId=this.updater((C,_)=>Object.assign(Object.assign({},C),{vendorId:_})),this.setIsDoctorsPage=this.updater((C,_)=>Object.assign(Object.assign({},C),{isDoctorsPage:_})),this.setSkip=this.updater((C,_)=>Object.assign(Object.assign({},C),{paging:Object.assign(Object.assign({},C.paging),{skip:_})})),this.setLimit=this.updater((C,_)=>Object.assign(Object.assign({},C),{paging:Object.assign(Object.assign({},C.paging),{limit:_})})),this.filterVendors=C=>this.data.userSelectVendors({input:{name:C}}).pipe((0,P._b)(_=>{const f=_.data.items;return this.patchState({vendors:f}),f},_=>this.patchState({errors:_.graphQLErrors?_.graphQLErrors:_})),(0,G.U)(_=>_.data.items)),this.addVendor=this.updater((C,_)=>Object.assign(Object.assign({},C),{vendors:C.vendors.concat(_)})),this.setItem=this.updater((C,_)=>Object.assign(Object.assign({},C),{item:_})),this.addNewClinicalProvider=this.updater((C,_)=>Object.assign(Object.assign({},C),{clinicalProviders:[...C.clinicalProviders,_]})),this.removeClinicalProvider=this.updater((C,_)=>Object.assign(Object.assign({},C),{clinicalProviders:C.clinicalProviders.filter(f=>f.id!==_.id)})),this.updateClinicalProvider=this.updater((C,_)=>Object.assign(Object.assign({},C),{clinicalProviders:C.clinicalProviders.map(f=>f.id===_.id?_:f)})),this.addClinicalProviders=this.updater((C,_)=>Object.assign(Object.assign({},C),{clinicalProviders:C.clinicalProviders.concat(_)})),this.updateClinicalProviders=this.updater((C,_)=>Object.assign(Object.assign({},C),{clinicalProviders:C.clinicalProviders.map(f=>_.find(F=>F.id===f.id)||f)})),this.setSearchQuery=this.updater((C,_)=>Object.assign(Object.assign({},C),{searchQuery:_})),this.loadClinicalProviderEffect=this.effect(C=>C.pipe((0,U.b)(()=>this.patchState({loading:!0})),(0,J.w)(_=>this.data.userClinicalProvider({clinicalProviderId:_}).pipe((0,P._b)(f=>this.patchState({item:f.data.item,errors:f.errors,loading:!1}),f=>this.patchState({loading:!1,errors:f.graphQLErrors?f.graphQLErrors:f})))))),this.loadClinicalProvidersEffect=this.effect(C=>C.pipe((0,U.b)(()=>{this.patchState({loading:!0})}),(0,ae.M)(this.input$),(0,J.w)(([_,f])=>(console.log("input",f),this.data.userClinicalProviders({input:f}).pipe((0,P._b)(S=>{var F;const N=[];return null===(F=S.data.items)||void 0===F||F.map(L=>{var ie;null===(ie=L.clinicalProviderLocations)||void 0===ie||ie.forEach(re=>{var $,j,k;N.push({latitude:null===($=re.location)||void 0===$?void 0:$.latitude,longitude:null===(j=re.location)||void 0===j?void 0:j.longitude,id:re.id,name:null===(k=re.location)||void 0===k?void 0:k.name,clinicalProvider:L,location:re.location})})}),this.patchState({paging:{limit:f.limit,skip:f.skip,total:S.data.count.total},clinicalProviders:S.data.items,clinicalProviderLocations:N,errors:S.errors,loading:!1})},S=>this.patchState({loading:!1,errors:S.graphQLErrors?S.graphQLErrors:S}))))))),this.loadClinicalProvidersSpecialEffect=this.effect(C=>C.pipe((0,U.b)(()=>{this.patchState({loading:!0})}),(0,ae.M)(this.input$),(0,J.w)(([_,f])=>this.data.userClinicalProviders({input:f}).pipe((0,P._b)(S=>this.patchState({paging:{limit:f.limit,skip:f.skip,total:S.data.count.total},clinicalProvidersSpecial:S.data.items,errors:S.errors,loading:!1}),S=>this.patchState({loading:!1,errors:S.graphQLErrors?S.graphQLErrors:S})))))),this.createClinicalProviderEffect=this.effect(C=>C.pipe((0,U.b)(()=>this.patchState({loading:!0})),(0,J.w)(_=>this.clinicalProviderService.createClinicalProvider(Object.assign({},_)).pipe((0,P._b)(f=>{this.addNewClinicalProvider(f),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:f,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},f=>{f.graphQLErrors?(this.toast.error(f.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:f.graphQLErrors?f.graphQLErrors:f})):(this.toast.error(f.Message),this.formService.setErrors(f.Data))}))))),this.updateClinicalProviderEffect=this.effect(C=>C.pipe((0,U.b)(()=>this.patchState({loading:!0})),(0,ae.M)(this.item$),(0,J.w)(([_,f])=>this.clinicalProviderService.updateClinicalProvider(_,_.id).pipe((0,P._b)(S=>{this.updateClinicalProvider(S),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:S,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1}),600)},S=>{S.graphQLErrors?(this.toast.error(S.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:S.graphQLErrors?S.graphQLErrors:S})):(this.toast.error(S.Message),this.formService.setErrors(S.Data))}))))),this.deleteClinicalProviderEffect=this.effect(C=>C.pipe((0,U.b)(()=>this.patchState({loading:!0})),(0,ae.M)(this.item$),(0,J.w)(([_,f])=>this.data.userDeleteClinicalProvider({clinicalProviderId:f.id}).pipe((0,P._b)(S=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:S.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},S=>{S.graphQLErrors?(this.toast.error(S.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:S.graphQLErrors?S.graphQLErrors:S})):(this.toast.error(S.Message),this.formService.setErrors(S.Data))}))))),this.importExcelEffect=this.effect(C=>C.pipe((0,U.b)(()=>this.patchState({loading:!0})),(0,J.w)(_=>this.clinicalProviderService.importClinicalProviders(_).pipe((0,b.K)(f=>{var S;return this.toast.error(null!==(S=f.Message)&&void 0!==S?S:"Failed to save",{duration:3e3}),E.E}),(0,U.b)(f=>{const S=JSON.parse(f.created),F=JSON.parse(f.updated),N=JSON.parse(f.failed),L=S.length+F.length+N.length;this.addClinicalProviders(S),this.updateClinicalProviders(F),this.toast.success(`${S.length} created, ${F.length} updated, ${N.length} failed of total ${L}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("clinicalProviderId")?this.setFormName("clinicalProvider_edit"):this.setFormName("clinicalProvider_create"),this.route.snapshot.paramMap.has("vendorId")){const C=this.route.snapshot.paramMap.get("vendorId");this.setVendorId(C)}}validateImportData(T){return this.vm$.pipe((0,J.w)(x=>this.clinicalProviderService.validateClinicalProviderExcelData(T,x.vendors)))}}return A.\u0275fac=function(T){return new(T||A)(q.LFG(y.q),q.LFG(h.F0),q.LFG(h.gz),q.LFG(R.F),q.LFG(de.o),q.LFG(ye))},A.\u0275prov=q.Yz7({token:A,factory:A.\u0275fac}),A})()},59443:(De,we,M)=>{M.d(we,{r:()=>ye});var P=M(24280),E=M(60515),G=M(18505),U=M(63900),J=M(11365),ae=M(70262),b=M(94650),q=M(73602),y=M(30144),h=M(71873),R=M(4523),de=M(56869),e=M(71767),z=M(39646);class O extends e.T_{constructor(A){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=A}Do(A){return this.businessProvider=A,this.serviceContext=A.serviceContext,this.loggingService=A.loggingService,this.execute(),this.response}}var X=M(26177);class Z extends O{constructor(A){super("ValidateDiagnosisCodeExcelDataAction"),this.valid=!1,this.excelData=A}preValidateAction(){const A=[];this.excelData.map((w,T)=>{A.push(w.name)}),this.validationContext.addRule(new X.cL("nameIsUnique","Name should be unique",A,!0))}performAction(){}finish(){super.finish();const A={};let w=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(T=>{T instanceof X.mi?T.isValid||(A[T.columnName]?A[T.columnName].newNames.includes(T.newName)||A[T.columnName].newNames.push(T.newName):A[T.columnName]={options:T.possibleValueList.map(x=>x.name),newNames:[T.newName]}):T instanceof X.cL&&(T.isValid||(w=T.conflicts))})):this.valid=!0,this.response=(0,z.of)({valid:this.valid,excelData:this.excelData,conflictNames:w,unknownNames:A})}}var K=M(28234);class W extends X.wS{constructor(A,w,T,x,Q){super(A,w,T,x,Q,!0)}}class D extends X.ul{constructor(A,w,T,x=!1){super(A,w,x),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=T,this.configureRules()}configureRules(){this.rules.push(new X.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new W("name","The diagnosiscode name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class be extends O{constructor(A){super("CreateDiagnosisCodeAction"),this.input=A}preValidateAction(){this.validationContext.addRule(new D("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateDiagnosisCode({input:this.input}).pipe((0,U.w)(A=>(0,K.of)(A.data.created)))}}class g extends O{constructor(A){super("UpdateDiagnosisCodesAction"),this.diagnosisCodes=A}preValidateAction(){this.validationContext.addRule(new X.DJ("Input","Input should have values",this.diagnosisCodes,!0))}performAction(){this.response=this.businessProvider.data.userUpdateDiagnosisCodes({input:{diagnosisCodes:this.diagnosisCodes}}).pipe((0,U.w)(A=>(0,z.of)(A.data.updated)))}}class xe extends O{constructor(A,w){super("UpdateDiagnosisCodeAction"),this.diagnosisCode=A,this.diagnosisCodeId=w}preValidateAction(){this.validationContext.addRule(new X.DJ("Input","Input should have values",this.diagnosisCode,!0)).addRule(new X.xF("Id","Id should be a CUID and not null",this.diagnosisCodeId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateDiagnosisCode({diagnosisCodeId:this.diagnosisCodeId,input:this.diagnosisCode}).pipe((0,U.w)(A=>(0,z.of)(A.data.updated)))}}let ue=(()=>{class Y extends e.nH{constructor(w,T,x){super("NotificationService.DiagnosisCodeBusinessProviderService",w,x),this.data=T}createDiagnosisCode(w){const T=new be(w);return T.Do(this),T.response}updateDiagnosisCode(w,T){const x=new xe(w,T);return x.Do(this),x.response}importDiagnosisCodes(w){const T=new g(w);return T.Do(this),T.response}validateDiagnosisCodeExcelData(w){const T=new Z(w);return T.Do(this),T.response}}return Y.\u0275fac=function(w){return new(w||Y)(b.LFG(de.ed),b.LFG(q.q),b.LFG(e.oI))},Y.\u0275prov=b.Yz7({token:Y,factory:Y.\u0275fac,providedIn:"root"}),Y})(),Ce=(()=>{class Y extends e.nH{constructor(w,T,x){super("DiagnosisCodeService",x,w),this.businessProvider=T}createDiagnosisCode(w){return this.businessProvider.createDiagnosisCode(w)}updateDiagnosisCode(w,T){return this.businessProvider.updateDiagnosisCode(w,T)}importDiagnosisCodes(w){return this.businessProvider.importDiagnosisCodes(w)}validateDiagnosisCodeExcelData(w){return this.businessProvider.validateDiagnosisCodeExcelData(w)}}return Y.\u0275fac=function(w){return new(w||Y)(b.LFG(ue,8),b.LFG(ue),b.LFG(de.ed))},Y.\u0275prov=b.Yz7({token:Y,factory:Y.\u0275fac,providedIn:"root"}),Y})(),ye=(()=>{class Y extends P.m1{constructor(w,T,x,Q,H,te){super({loading:!1,diagnosisCodes:[],done:!1,searchQuery:"",formName:void 0,paging:{limit:1e4,skip:0}}),this.data=w,this.router=T,this.route=x,this.toast=Q,this.formService=H,this.diagnosisCodeService=te,this.errors$=this.select(C=>C.errors),this.loading$=this.select(C=>C.loading),this.done$=this.select(C=>C.done),this.item$=this.select(C=>C.item),this.diagnosisCodes$=this.select(C=>C.diagnosisCodes),this.paging$=this.select(C=>C.paging),this.searchQuery$=this.select(C=>C.searchQuery),this.formName$=this.select(C=>C.formName),this.actionResult$=this.select(this.item$,this.done$,(C,_)=>({item:C,done:_}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.diagnosisCodes$,(C,_,f,S,F)=>({errors:C,loading:_,item:f,formName:S,diagnosisCodes:F}),{debounce:!0}),this.input$=this.select(this.paging$,this.searchQuery$,(C,_)=>({limit:C.limit,skip:C.skip,name:_,total:C.total})),this.setFormName=this.updater((C,_)=>Object.assign(Object.assign({},C),{formName:_})),this.setItem=this.updater((C,_)=>Object.assign(Object.assign({},C),{item:_})),this.addNewDiagnosisCode=this.updater((C,_)=>Object.assign(Object.assign({},C),{diagnosisCodes:[...C.diagnosisCodes,_]})),this.updateDiagnosisCode=this.updater((C,_)=>Object.assign(Object.assign({},C),{diagnosisCodes:C.diagnosisCodes.map(f=>f.id===_.id?_:f)})),this.addDiagnosisCodes=this.updater((C,_)=>Object.assign(Object.assign({},C),{diagnosisCodes:C.diagnosisCodes.concat(_)})),this.updateDiagnosisCodes=this.updater((C,_)=>Object.assign(Object.assign({},C),{diagnosisCodes:C.diagnosisCodes.map(f=>_.find(F=>F.id===f.id)||f)})),this.setSearchQuery=this.updater((C,_)=>Object.assign(Object.assign({},C),{searchQuery:_})),this.loadDiagnosisCodeEffect=this.effect(C=>C.pipe((0,G.b)(()=>this.patchState({loading:!0})),(0,U.w)(_=>this.data.userDiagnosisCode({diagnosisCodeId:_}).pipe((0,P._b)(f=>{this.patchState({item:f.data.item,errors:f.errors,loading:!1})},f=>this.patchState({loading:!1,errors:f.graphQLErrors?f.graphQLErrors:f})))))),this.loadDiagnosisCodesEffect=this.effect(C=>C.pipe((0,G.b)(()=>this.patchState({loading:!0})),(0,J.M)(this.input$),(0,U.w)(([_,f])=>this.data.userDiagnosisCodes({input:f}).pipe((0,P._b)(S=>this.patchState({paging:{limit:f.limit,skip:f.skip,total:S.data.count.total},diagnosisCodes:S.data.items,errors:S.errors,loading:!1}),S=>this.patchState({loading:!1,errors:S.graphQLErrors?S.graphQLErrors:S})))))),this.createDiagnosisCodeEffect=this.effect(C=>C.pipe((0,G.b)(()=>this.patchState({loading:!0})),(0,U.w)(_=>this.diagnosisCodeService.createDiagnosisCode(Object.assign({},_)).pipe((0,P._b)(f=>{this.addNewDiagnosisCode(f),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:f,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},f=>{f.graphQLErrors?(this.toast.error(f.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:f.graphQLErrors?f.graphQLErrors:f})):(this.toast.error(f.Message),this.formService.setErrors(f.Data))}))))),this.updateDiagnosisCodeEffect=this.effect(C=>C.pipe((0,G.b)(()=>this.patchState({loading:!0})),(0,J.M)(this.item$),(0,U.w)(([_,f])=>this.diagnosisCodeService.updateDiagnosisCode(_,_.id).pipe((0,P._b)(S=>{this.updateDiagnosisCode(S),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:S,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},S=>{S.graphQLErrors?(this.toast.error(S.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:S.graphQLErrors?S.graphQLErrors:S})):(this.toast.error(S.Message),this.formService.setErrors(S.Data))}))))),this.deleteDiagnosisCodeEffect=this.effect(C=>C.pipe((0,G.b)(()=>this.patchState({loading:!0})),(0,J.M)(this.item$),(0,U.w)(([_,f])=>this.data.userDeleteDiagnosisCode({diagnosisCodeId:f.id}).pipe((0,P._b)(S=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:S.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},S=>{S.graphQLErrors?(this.toast.error(S.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:S.graphQLErrors?S.graphQLErrors:S})):(this.toast.error(S.Message),this.formService.setErrors(S.Data))}))))),this.importExcelEffect=this.effect(C=>C.pipe((0,G.b)(()=>this.patchState({loading:!0})),(0,U.w)(_=>this.diagnosisCodeService.importDiagnosisCodes(_).pipe((0,ae.K)(f=>{var S;return this.toast.error(null!==(S=f.Message)&&void 0!==S?S:"Failed to save",{duration:3e3}),E.E}),(0,G.b)(f=>{const S=JSON.parse(f.created),F=JSON.parse(f.updated),N=JSON.parse(f.failed),L=S.length+F.length+N.length;this.addDiagnosisCodes(S),this.updateDiagnosisCodes(F),this.toast.success(`${S.length} created, ${F.length} updated, ${N.length} failed of total ${L}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("diagnosisCodeId")?(this.route.snapshot.paramMap.get("diagnosisCodeId"),this.setFormName("diagnosisCode_edit")):this.setFormName("diagnosisCode_create")}validateImportData(w){return this.vm$.pipe((0,U.w)(T=>this.diagnosisCodeService.validateDiagnosisCodeExcelData(w)))}}return Y.\u0275fac=function(w){return new(w||Y)(b.LFG(q.q),b.LFG(y.F0),b.LFG(y.gz),b.LFG(h.F),b.LFG(R.o),b.LFG(Ce))},Y.\u0275prov=b.Yz7({token:Y,factory:Y.\u0275fac}),Y})()},56794:(De,we,M)=>{M.d(we,{F:()=>ye});var P=M(24280),E=M(60515),G=M(18505),U=M(63900),J=M(11365),ae=M(70262),b=M(94650),q=M(73602),y=M(30144),h=M(71873),R=M(4523),de=M(56869),e=M(71767),z=M(39646);class O extends e.T_{constructor(A){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=A}Do(A){return this.businessProvider=A,this.serviceContext=A.serviceContext,this.loggingService=A.loggingService,this.execute(),this.response}}var X=M(26177);class Z extends O{constructor(A){super("ValidateDocumentExcelDataAction"),this.valid=!1,this.excelData=A}preValidateAction(){const A=[];this.excelData.map((w,T)=>{A.push(w.name)}),this.validationContext.addRule(new X.cL("nameIsUnique","Name should be unique",A,!0))}performAction(){}finish(){super.finish();const A={};let w=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(T=>{T instanceof X.mi?T.isValid||(A[T.columnName]?A[T.columnName].newNames.includes(T.newName)||A[T.columnName].newNames.push(T.newName):A[T.columnName]={options:T.possibleValueList.map(x=>x.name),newNames:[T.newName]}):T instanceof X.cL&&(T.isValid||(w=T.conflicts))})):this.valid=!0,this.response=(0,z.of)({valid:this.valid,excelData:this.excelData,conflictNames:w,unknownNames:A})}}var K=M(28234);class W extends X.wS{constructor(A,w,T,x,Q){super(A,w,T,x,Q,!0)}}class D extends X.ul{constructor(A,w,T,x=!1){super(A,w,x),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=T,this.configureRules()}configureRules(){this.rules.push(new X.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new W("name","The documenttype name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class be extends O{constructor(A){super("CreateDocumentAction"),this.input=A}preValidateAction(){this.validationContext.addRule(new D("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateDocument({input:this.input}).pipe((0,U.w)(A=>(0,K.of)(A.data.created)))}}class g extends O{constructor(A){super("UpdateDocumentsAction"),this.documents=A}preValidateAction(){this.validationContext.addRule(new X.DJ("Input","Input should have values",this.documents,!0))}performAction(){this.response=this.businessProvider.data.userUpdateDocuments({input:{documents:this.documents}}).pipe((0,U.w)(A=>(0,z.of)(A.data.updated)))}}class xe extends O{constructor(A,w){super("UpdateDocumentAction"),this.document=A,this.documentId=w}preValidateAction(){this.validationContext.addRule(new X.DJ("Input","Input should have values",this.document,!0)).addRule(new X.xF("Id","Id should be a CUID and not null",this.documentId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateDocument({documentId:this.documentId,input:this.document}).pipe((0,U.w)(A=>(0,z.of)(A.data.updated)))}}let ue=(()=>{class Y extends e.nH{constructor(w,T,x){super("NotificationService.DocumentBusinessProviderService",w,x),this.data=T}createDocument(w){const T=new be(w);return T.Do(this),T.response}updateDocument(w,T){const x=new xe(w,T);return x.Do(this),x.response}importDocuments(w){const T=new g(w);return T.Do(this),T.response}validateDocumentExcelData(w){const T=new Z(w);return T.Do(this),T.response}}return Y.\u0275fac=function(w){return new(w||Y)(b.LFG(de.ed),b.LFG(q.q),b.LFG(e.oI))},Y.\u0275prov=b.Yz7({token:Y,factory:Y.\u0275fac,providedIn:"root"}),Y})(),Ce=(()=>{class Y extends e.nH{constructor(w,T,x){super("DocumentService",x,w),this.businessProvider=T}createDocument(w){const T=Object.fromEntries(Object.entries(w).filter(([x,Q])=>null!==Q));return this.businessProvider.createDocument(T)}updateDocument(w,T){return this.businessProvider.updateDocument(w,T)}importDocuments(w){return this.businessProvider.importDocuments(w)}validateDocumentExcelData(w){return this.businessProvider.validateDocumentExcelData(w)}}return Y.\u0275fac=function(w){return new(w||Y)(b.LFG(ue,8),b.LFG(ue),b.LFG(de.ed))},Y.\u0275prov=b.Yz7({token:Y,factory:Y.\u0275fac,providedIn:"root"}),Y})(),ye=(()=>{class Y extends P.m1{constructor(w,T,x,Q,H,te){super({loading:!1,documents:[],done:!1,searchQuery:"",formName:void 0,paging:{limit:1e4,skip:0}}),this.data=w,this.router=T,this.route=x,this.toast=Q,this.formService=H,this.documentService=te,this.errors$=this.select(C=>C.errors),this.loading$=this.select(C=>C.loading),this.done$=this.select(C=>C.done),this.item$=this.select(C=>C.item),this.documents$=this.select(C=>C.documents),this.paging$=this.select(C=>C.paging),this.searchQuery$=this.select(C=>C.searchQuery),this.formName$=this.select(C=>C.formName),this.actionResult$=this.select(this.item$,this.done$,(C,_)=>({item:C,done:_}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.documents$,(C,_,f,S,F)=>({errors:C,loading:_,item:f,formName:S,documents:F}),{debounce:!0}),this.input$=this.select(this.paging$,this.searchQuery$,(C,_)=>({limit:C.limit,skip:C.skip,name:_,total:C.total})),this.setFormName=this.updater((C,_)=>Object.assign(Object.assign({},C),{formName:_})),this.setItem=this.updater((C,_)=>Object.assign(Object.assign({},C),{item:_})),this.addNewDocument=this.updater((C,_)=>Object.assign(Object.assign({},C),{documents:[...C.documents,_]})),this.updateDocument=this.updater((C,_)=>Object.assign(Object.assign({},C),{documents:C.documents.map(f=>f.id===_.id?_:f)})),this.addDocuments=this.updater((C,_)=>Object.assign(Object.assign({},C),{documents:C.documents.concat(_)})),this.updateDocuments=this.updater((C,_)=>Object.assign(Object.assign({},C),{documents:C.documents.map(f=>_.find(F=>F.id===f.id)||f)})),this.setSearchQuery=this.updater((C,_)=>Object.assign(Object.assign({},C),{searchQuery:_})),this.loadDocumentEffect=this.effect(C=>C.pipe((0,G.b)(()=>this.patchState({loading:!0})),(0,U.w)(_=>this.data.getDocument(_).pipe((0,P._b)(f=>{this.patchState({item:f,loading:!1})},f=>{console.log(f),this.patchState({loading:!1,errors:f.graphQLErrors?f.graphQLErrors:f})}))))),this.loadDocumentsEffect=this.effect(C=>C.pipe((0,G.b)(()=>this.patchState({loading:!0})),(0,J.M)(this.input$),(0,U.w)(([_,f])=>this.data.userDocuments({input:f}).pipe((0,P._b)(S=>this.patchState({paging:{limit:f.limit,skip:f.skip,total:S.data.count.total},documents:S.data.items,errors:S.errors,loading:!1}),S=>this.patchState({loading:!1,errors:S.graphQLErrors?S.graphQLErrors:S})))))),this.createDocumentEffect=this.effect(C=>C.pipe((0,G.b)(()=>this.patchState({loading:!0})),(0,U.w)(_=>(console.log(_),this.documentService.createDocument(Object.assign({},_)).pipe((0,P._b)(f=>{this.addNewDocument(f),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:f,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},f=>{f.graphQLErrors?(this.toast.error(f.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:f.graphQLErrors?f.graphQLErrors:f})):(this.toast.error(f.Message),this.formService.setErrors(f.Data))})))))),this.updateDocumentEffect=this.effect(C=>C.pipe((0,G.b)(()=>this.patchState({loading:!0})),(0,J.M)(this.item$),(0,U.w)(([_,f])=>this.documentService.updateDocument(_,_.id).pipe((0,P._b)(S=>{this.updateDocument(S),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:S,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},S=>{S.graphQLErrors?(this.toast.error(S.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:S.graphQLErrors?S.graphQLErrors:S})):(this.toast.error(S.Message),this.formService.setErrors(S.Data))}))))),this.deleteDocumentEffect=this.effect(C=>C.pipe((0,G.b)(()=>this.patchState({loading:!0})),(0,J.M)(this.item$),(0,U.w)(([_,f])=>this.data.userDeleteDocument({documentId:f.id,featureName:" "}).pipe((0,P._b)(S=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:S.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},S=>{S.graphQLErrors?(this.toast.error(S.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:S.graphQLErrors?S.graphQLErrors:S})):(this.toast.error(S.Message),this.formService.setErrors(S.Data))}))))),this.importExcelEffect=this.effect(C=>C.pipe((0,G.b)(()=>this.patchState({loading:!0})),(0,U.w)(_=>this.documentService.importDocuments(_).pipe((0,ae.K)(f=>{var S;return this.toast.error(null!==(S=f.Message)&&void 0!==S?S:"Failed to save",{duration:3e3}),E.E}),(0,G.b)(f=>{const S=JSON.parse(f.created),F=JSON.parse(f.updated),N=JSON.parse(f.failed),L=S.length+F.length+N.length;this.addDocuments(S),this.updateDocuments(F),this.toast.success(`${S.length} created, ${F.length} updated, ${N.length} failed of total ${L}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("documentId")?(this.route.snapshot.paramMap.get("documentId"),this.setFormName("document_edit")):this.setFormName("document_create")}validateImportData(w){return this.vm$.pipe((0,U.w)(T=>this.documentService.validateDocumentExcelData(w)))}}return Y.\u0275fac=function(w){return new(w||Y)(b.LFG(q.q),b.LFG(y.F0),b.LFG(y.gz),b.LFG(h.F),b.LFG(R.o),b.LFG(Ce))},Y.\u0275prov=b.Yz7({token:Y,factory:Y.\u0275fac}),Y})()},28816:(De,we,M)=>{M.d(we,{_:()=>ye});var P=M(24280),E=M(60515),G=M(18505),U=M(63900),J=M(11365),ae=M(70262),b=M(94650),q=M(73602),y=M(30144),h=M(71873),R=M(4523),de=M(56869),e=M(71767),z=M(39646);class O extends e.T_{constructor(A){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=A}Do(A){return this.businessProvider=A,this.serviceContext=A.serviceContext,this.loggingService=A.loggingService,this.execute(),this.response}}var X=M(26177);class Z extends O{constructor(A){super("ValidateGenderExcelDataAction"),this.valid=!1,this.excelData=A}preValidateAction(){const A=[];this.excelData.map((w,T)=>{A.push(w.name)}),this.validationContext.addRule(new X.cL("nameIsUnique","Name should be unique",A,!0))}performAction(){}finish(){super.finish();const A={};let w=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(T=>{T instanceof X.mi?T.isValid||(A[T.columnName]?A[T.columnName].newNames.includes(T.newName)||A[T.columnName].newNames.push(T.newName):A[T.columnName]={options:T.possibleValueList.map(x=>x.name),newNames:[T.newName]}):T instanceof X.cL&&(T.isValid||(w=T.conflicts))})):this.valid=!0,this.response=(0,z.of)({valid:this.valid,excelData:this.excelData,conflictNames:w,unknownNames:A})}}var K=M(28234);class W extends X.wS{constructor(A,w,T,x,Q){super(A,w,T,x,Q,!0)}}class D extends X.ul{constructor(A,w,T,x=!1){super(A,w,x),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=T,this.configureRules()}configureRules(){this.rules.push(new X.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new W("name","The gender name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class be extends O{constructor(A){super("CreateGenderAction"),this.input=A}preValidateAction(){this.validationContext.addRule(new D("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateGender({input:this.input}).pipe((0,U.w)(A=>(0,K.of)(A.data.created)))}}class g extends O{constructor(A){super("UpdateGendersAction"),this.genders=A}preValidateAction(){this.validationContext.addRule(new X.DJ("Input","Input should have values",this.genders,!0))}performAction(){this.response=this.businessProvider.data.userUpdateGenders({input:{genders:this.genders}}).pipe((0,U.w)(A=>(0,z.of)(A.data.updated)))}}class xe extends O{constructor(A,w){super("UpdateGenderAction"),this.gender=A,this.genderId=w}preValidateAction(){this.validationContext.addRule(new X.DJ("Input","Input should have values",this.gender,!0)).addRule(new X.xF("Id","Id should be a CUID and not null",this.genderId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateGender({genderId:this.genderId,input:this.gender}).pipe((0,U.w)(A=>(0,z.of)(A.data.updated)))}}let ue=(()=>{class Y extends e.nH{constructor(w,T,x){super("NotificationService.GenderBusinessProviderService",w,x),this.data=T}createGender(w){const T=new be(w);return T.Do(this),T.response}updateGender(w,T){const x=new xe(w,T);return x.Do(this),x.response}importGenders(w){const T=new g(w);return T.Do(this),T.response}validateGenderExcelData(w){const T=new Z(w);return T.Do(this),T.response}}return Y.\u0275fac=function(w){return new(w||Y)(b.LFG(de.ed),b.LFG(q.q),b.LFG(e.oI))},Y.\u0275prov=b.Yz7({token:Y,factory:Y.\u0275fac,providedIn:"root"}),Y})(),Ce=(()=>{class Y extends e.nH{constructor(w,T,x){super("GenderService",x,w),this.businessProvider=T}createGender(w){const T=Object.fromEntries(Object.entries(w).filter(([x,Q])=>null!==Q));return this.businessProvider.createGender(T)}updateGender(w,T){return this.businessProvider.updateGender(w,T)}importGenders(w){return this.businessProvider.importGenders(w)}validateGenderExcelData(w){return this.businessProvider.validateGenderExcelData(w)}}return Y.\u0275fac=function(w){return new(w||Y)(b.LFG(ue,8),b.LFG(ue),b.LFG(de.ed))},Y.\u0275prov=b.Yz7({token:Y,factory:Y.\u0275fac,providedIn:"root"}),Y})(),ye=(()=>{class Y extends P.m1{constructor(w,T,x,Q,H,te){super({loading:!1,genders:[],done:!1,searchQuery:"",formName:void 0,paging:{limit:1e4,skip:0}}),this.data=w,this.router=T,this.route=x,this.toast=Q,this.formService=H,this.genderService=te,this.errors$=this.select(C=>C.errors),this.loading$=this.select(C=>C.loading),this.done$=this.select(C=>C.done),this.item$=this.select(C=>C.item),this.genders$=this.select(C=>C.genders),this.paging$=this.select(C=>C.paging),this.searchQuery$=this.select(C=>C.searchQuery),this.formName$=this.select(C=>C.formName),this.actionResult$=this.select(this.item$,this.done$,(C,_)=>({item:C,done:_}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.genders$,(C,_,f,S,F)=>({errors:C,loading:_,item:f,formName:S,genders:F}),{debounce:!0}),this.input$=this.select(this.paging$,this.searchQuery$,(C,_)=>({limit:C.limit,skip:C.skip,name:_,total:C.total})),this.setFormName=this.updater((C,_)=>Object.assign(Object.assign({},C),{formName:_})),this.setItem=this.updater((C,_)=>Object.assign(Object.assign({},C),{item:_})),this.addNewGender=this.updater((C,_)=>Object.assign(Object.assign({},C),{genders:[...C.genders,_]})),this.updateGender=this.updater((C,_)=>Object.assign(Object.assign({},C),{genders:C.genders.map(f=>f.id===_.id?_:f)})),this.addGenders=this.updater((C,_)=>Object.assign(Object.assign({},C),{genders:C.genders.concat(_)})),this.updateGenders=this.updater((C,_)=>Object.assign(Object.assign({},C),{genders:C.genders.map(f=>_.find(F=>F.id===f.id)||f)})),this.setSearchQuery=this.updater((C,_)=>Object.assign(Object.assign({},C),{searchQuery:_})),this.loadGenderEffect=this.effect(C=>C.pipe((0,G.b)(()=>this.patchState({loading:!0})),(0,U.w)(_=>this.data.userGender({genderId:_}).pipe((0,P._b)(f=>{this.patchState({item:f.data.item,errors:f.errors,loading:!1})},f=>this.patchState({loading:!1,errors:f.graphQLErrors?f.graphQLErrors:f})))))),this.loadGendersEffect=this.effect(C=>C.pipe((0,G.b)(()=>this.patchState({loading:!0})),(0,J.M)(this.input$),(0,U.w)(([_,f])=>this.data.userGenders({input:f}).pipe((0,P._b)(S=>this.patchState({paging:{limit:f.limit,skip:f.skip,total:S.data.count.total},genders:S.data.items,errors:S.errors,loading:!1}),S=>this.patchState({loading:!1,errors:S.graphQLErrors?S.graphQLErrors:S})))))),this.createGenderEffect=this.effect(C=>C.pipe((0,G.b)(()=>this.patchState({loading:!0})),(0,U.w)(_=>this.genderService.createGender(Object.assign({},_)).pipe((0,P._b)(f=>{this.addNewGender(f),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:f,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},f=>{f.graphQLErrors?(this.toast.error(f.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:f.graphQLErrors?f.graphQLErrors:f})):(this.toast.error(f.Message),this.formService.setErrors(f.Data))}))))),this.updateGenderEffect=this.effect(C=>C.pipe((0,G.b)(()=>this.patchState({loading:!0})),(0,J.M)(this.item$),(0,U.w)(([_,f])=>this.genderService.updateGender(_,_.id).pipe((0,P._b)(S=>{this.updateGender(S),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:S,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},S=>{S.graphQLErrors?(this.toast.error(S.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:S.graphQLErrors?S.graphQLErrors:S})):(this.toast.error(S.Message),this.formService.setErrors(S.Data))}))))),this.deleteGenderEffect=this.effect(C=>C.pipe((0,G.b)(()=>this.patchState({loading:!0})),(0,J.M)(this.item$),(0,U.w)(([_,f])=>this.data.userDeleteGender({genderId:f.id}).pipe((0,P._b)(S=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:S.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},S=>{S.graphQLErrors?(this.toast.error(S.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:S.graphQLErrors?S.graphQLErrors:S})):(this.toast.error(S.Message),this.formService.setErrors(S.Data))}))))),this.importExcelEffect=this.effect(C=>C.pipe((0,G.b)(()=>this.patchState({loading:!0})),(0,U.w)(_=>this.genderService.importGenders(_).pipe((0,ae.K)(f=>{var S;return this.toast.error(null!==(S=f.Message)&&void 0!==S?S:"Failed to save",{duration:3e3}),E.E}),(0,G.b)(f=>{const S=JSON.parse(f.created),F=JSON.parse(f.updated),N=JSON.parse(f.failed),L=S.length+F.length+N.length;this.addGenders(S),this.updateGenders(F),this.toast.success(`${S.length} created, ${F.length} updated, ${N.length} failed of total ${L}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("genderId")?(this.route.snapshot.paramMap.get("genderId"),this.setFormName("gender_edit")):this.setFormName("gender_create")}validateImportData(w){return this.vm$.pipe((0,U.w)(T=>this.genderService.validateGenderExcelData(w)))}}return Y.\u0275fac=function(w){return new(w||Y)(b.LFG(q.q),b.LFG(y.F0),b.LFG(y.gz),b.LFG(h.F),b.LFG(R.o),b.LFG(Ce))},Y.\u0275prov=b.Yz7({token:Y,factory:Y.\u0275fac}),Y})()},11913:(De,we,M)=>{M.d(we,{I:()=>Y});var P=M(24280),E=M(60515),G=M(54004),U=M(18505),J=M(63900),ae=M(11365),b=M(70262),q=M(94650),y=M(73602),h=M(30144),R=M(71873),de=M(4523),e=M(56869),z=M(71767),O=M(39646);class X extends z.T_{constructor(w){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=w}Do(w){return this.businessProvider=w,this.serviceContext=w.serviceContext,this.loggingService=w.loggingService,this.execute(),this.response}}var Z=M(26177);class K extends X{constructor(w,T,x,Q){super("ValidateInvoiceExcelDataAction"),this.valid=!1,this.excelData=w,this.billingOrganizations=T,this.legalCases=x,this.invoices=Q}preValidateAction(){const w=[];this.excelData.map((T,x)=>{w.push(T.name),this.validationContext.addRule(new Z.mi(`billingOrganizationName_${x}_is_valid}`,"Billing Organization Is Not Valid","billingOrganization.name",T.billingOrganization,this.billingOrganizations,!0)),this.validationContext.addRule(new Z.mi(`legalCaseName_${x}_is_valid}`,"Legal Case Is Not Valid","legalCase.name",T.legalCase,this.legalCases,!0)),this.validationContext.addRule(new Z.mi(`invoiceName_${x}_is_valid}`,"Invoice Is Not Valid","invoice.name",T.invoice,this.invoices,!0))}),this.validationContext.addRule(new Z.cL("nameIsUnique","Name should be unique",w,!0))}performAction(){}finish(){super.finish();const w={};let T=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(x=>{x instanceof Z.mi?x.isValid||(w[x.columnName]?w[x.columnName].newNames.includes(x.newName)||w[x.columnName].newNames.push(x.newName):w[x.columnName]={options:x.possibleValueList.map(Q=>Q.name),newNames:[x.newName]}):x instanceof Z.cL&&(x.isValid||(T=x.conflicts))})):this.valid=!0,this.response=(0,O.of)({valid:this.valid,excelData:this.excelData,conflictNames:T,unknownNames:w})}}var W=M(28234);class D extends Z.wS{constructor(w,T,x,Q,H){super(w,T,x,Q,H,!0)}}class be extends Z.ul{constructor(w,T,x,Q=!1){super(w,T,Q),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=x,this.configureRules()}configureRules(){this.rules.push(new Z.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new D("name","The invoice name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class g extends X{constructor(w){super("CreateInvoiceAction"),this.input=w}preValidateAction(){this.validationContext.addRule(new be("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateInvoice({input:this.input}).pipe((0,J.w)(w=>(0,W.of)(w.data.created)))}}class xe extends X{constructor(w){super("UpdateInvoicesAction"),this.invoices=w}preValidateAction(){this.validationContext.addRule(new Z.DJ("Input","Input should have values",this.invoices,!0))}performAction(){this.response=this.businessProvider.data.userUpdateInvoices({input:{invoices:this.invoices}}).pipe((0,J.w)(w=>(0,O.of)(w.data.updated)))}}class ue extends X{constructor(w,T){super("UpdateInvoiceAction"),this.invoice=w,this.invoiceId=T}preValidateAction(){this.validationContext.addRule(new Z.DJ("Input","Input should have values",this.invoice,!0)).addRule(new Z.xF("Id","Id should be a CUID and not null",this.invoiceId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateInvoice({invoiceId:this.invoiceId,input:this.invoice}).pipe((0,J.w)(w=>(0,O.of)(w.data.updated)))}}let Ce=(()=>{class A extends z.nH{constructor(T,x,Q){super("NotificationService.InvoiceBusinessProviderService",T,Q),this.data=x}createInvoice(T){const x=new g(T);return x.Do(this),x.response}updateInvoice(T,x){const Q=new ue(T,x);return Q.Do(this),Q.response}importInvoices(T){const x=new xe(T);return x.Do(this),x.response}validateInvoiceExcelData(T,x,Q,H){const te=new K(T,x,Q,H);return te.Do(this),te.response}}return A.\u0275fac=function(T){return new(T||A)(q.LFG(e.ed),q.LFG(y.q),q.LFG(z.oI))},A.\u0275prov=q.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"}),A})(),ye=(()=>{class A extends z.nH{constructor(T,x,Q){super("InvoiceService",Q,T),this.businessProvider=x}createInvoice(T){const x=Object.fromEntries(Object.entries(T).filter(([Q,H])=>null!==H));return this.businessProvider.createInvoice(x)}updateInvoice(T,x){return this.businessProvider.updateInvoice(T,x)}importInvoices(T){return this.businessProvider.importInvoices(T)}validateInvoiceExcelData(T,x,Q,H){return this.businessProvider.validateInvoiceExcelData(T,x,Q,H)}}return A.\u0275fac=function(T){return new(T||A)(q.LFG(Ce,8),q.LFG(Ce),q.LFG(e.ed))},A.\u0275prov=q.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"}),A})(),Y=(()=>{class A extends P.m1{constructor(T,x,Q,H,te,ge){if(super({loading:!1,invoices:[],done:!1,searchQuery:"",formName:void 0,organizationId:void 0,legalCaseId:void 0,invoiceId:void 0,clinicalProviderId:void 0,paging:{limit:1e4,skip:0}}),this.data=T,this.router=x,this.route=Q,this.toast=H,this.formService=te,this.invoiceService=ge,this.errors$=this.select(S=>S.errors),this.loading$=this.select(S=>S.loading),this.done$=this.select(S=>S.done),this.item$=this.select(S=>S.item),this.invoices$=this.select(S=>S.invoices),this.organizations$=this.select(S=>S.organizations||[]),this.legalCases$=this.select(S=>S.legalCases||[]),this.attorneyId$=this.select(S=>S.attorneyId),this.documents$=this.select(S=>S.documents||[]),this.organizationId$=this.select(S=>S.organizationId),this.legalCaseId$=this.select(S=>S.legalCaseId),this.invoiceId$=this.select(S=>S.invoiceId),this.clinicalProviderId$=this.select(S=>S.clinicalProviderId),this.paging$=this.select(S=>S.paging),this.searchQuery$=this.select(S=>S.searchQuery),this.formName$=this.select(S=>S.formName),this.actionResult$=this.select(this.item$,this.done$,(S,F)=>({item:S,done:F}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.invoices$,this.organizations$,this.legalCases$,this.documents$,(S,F,N,L,ie,re,$,j)=>({errors:S,loading:F,item:N,formName:L,invoices:ie,organizations:re,legalCases:$,documents:j}),{debounce:!0}),this.input$=this.select(this.paging$,this.organizationId$,this.legalCaseId$,this.invoiceId$,this.searchQuery$,this.attorneyId$,this.clinicalProviderId$,(S,F,N,L,ie,re,$)=>({limit:S.limit,skip:S.skip,name:ie,attorneyId:re,clinicalProviderId:$,organizationId:F,legalCaseId:N,invoiceId:L,total:S.total})),this.setFormName=this.updater((S,F)=>Object.assign(Object.assign({},S),{formName:F})),this.setOrganizationId=this.updater((S,F)=>Object.assign(Object.assign({},S),{organizationId:F})),this.setLegalCaseId=this.updater((S,F)=>Object.assign(Object.assign({},S),{legalCaseId:F})),this.setClinicalProviderId=this.updater((S,F)=>Object.assign(Object.assign({},S),{clinicalProviderId:F})),this.setAttorneyId=this.updater((S,F)=>Object.assign(Object.assign({},S),{attorneyId:F})),this.setInvoiceId=this.updater((S,F)=>Object.assign(Object.assign({},S),{invoiceId:F})),this.setSkip=this.updater((S,F)=>Object.assign(Object.assign({},S),{paging:Object.assign(Object.assign({},S.paging),{skip:F})})),this.setLimit=this.updater((S,F)=>Object.assign(Object.assign({},S),{paging:Object.assign(Object.assign({},S.paging),{limit:F})})),this.filterOrganizations=S=>this.data.userSelectOrganizations({input:{name:S}}).pipe((0,P._b)(F=>{let N=F.data.items;return this.patchState({organizations:N}),N},F=>this.patchState({errors:F.graphQLErrors?F.graphQLErrors:F})),(0,G.U)(F=>F.data.items)),this.filterLegalCases=S=>this.data.userSelectLegalCases({input:{name:S}}).pipe((0,P._b)(F=>{let N=F.data.items;return this.patchState({legalCases:N}),N},F=>this.patchState({errors:F.graphQLErrors?F.graphQLErrors:F})),(0,G.U)(F=>F.data.items)),this.filterDocuments=S=>this.data.userSelectDocuments({input:{name:S}}).pipe((0,P._b)(F=>{let N=F.data.items;return this.patchState({documents:N}),N},F=>this.patchState({errors:F.graphQLErrors?F.graphQLErrors:F})),(0,G.U)(F=>F.data.items)),this.addOrganization=this.updater((S,F)=>Object.assign(Object.assign({},S),{organizations:S.organizations.concat(F)})),this.addLegalCase=this.updater((S,F)=>Object.assign(Object.assign({},S),{legalCases:S.legalCases.concat(F)})),this.addDocument=this.updater((S,F)=>Object.assign(Object.assign({},S),{documents:S.documents.concat(F)})),this.setItem=this.updater((S,F)=>Object.assign(Object.assign({},S),{item:F})),this.addNewInvoice=this.updater((S,F)=>Object.assign(Object.assign({},S),{invoices:[...S.invoices,F]})),this.updateInvoice=this.updater((S,F)=>Object.assign(Object.assign({},S),{invoices:S.invoices.map(N=>N.id===F.id?F:N)})),this.addInvoices=this.updater((S,F)=>Object.assign(Object.assign({},S),{invoices:S.invoices.concat(F)})),this.updateInvoices=this.updater((S,F)=>Object.assign(Object.assign({},S),{invoices:S.invoices.map(N=>F.find(ie=>ie.id===N.id)||N)})),this.setSearchQuery=this.updater((S,F)=>Object.assign(Object.assign({},S),{searchQuery:F})),this.loadInvoiceEffect=this.effect(S=>S.pipe((0,U.b)(()=>this.patchState({loading:!0})),(0,J.w)(F=>this.data.userInvoice({invoiceId:F}).pipe((0,P._b)(N=>{this.patchState({item:N.data.item,errors:N.errors,loading:!1})},N=>this.patchState({loading:!1,errors:N.graphQLErrors?N.graphQLErrors:N})))))),this.loadInvoicesEffect=this.effect(S=>S.pipe((0,U.b)(()=>this.patchState({loading:!0})),(0,ae.M)(this.input$),(0,J.w)(([F,N])=>this.data.userInvoices({input:N}).pipe((0,P._b)(L=>{console.log({limit:N.limit,skip:N.skip,total:L.data.count.total}),this.patchState({paging:{limit:N.limit,skip:N.skip,total:L.data.count.total},invoices:L.data.items,errors:L.errors,loading:!1})},L=>this.patchState({loading:!1,errors:L.graphQLErrors?L.graphQLErrors:L})))))),this.createInvoiceEffect=this.effect(S=>S.pipe((0,U.b)(()=>this.patchState({loading:!0})),(0,J.w)(F=>this.invoiceService.createInvoice(Object.assign({},F)).pipe((0,P._b)(N=>{this.addNewInvoice(N),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:N,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},N=>{N.graphQLErrors?(this.toast.error(N.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:N.graphQLErrors?N.graphQLErrors:N})):(this.toast.error(N.Message),this.formService.setErrors(N.Data))}))))),this.updateInvoiceEffect=this.effect(S=>S.pipe((0,U.b)(()=>this.patchState({loading:!0})),(0,ae.M)(this.item$),(0,J.w)(([F,N])=>this.invoiceService.updateInvoice(F,F.id).pipe((0,P._b)(L=>{this.updateInvoice(L),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:L,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},L=>{L.graphQLErrors?(this.toast.error(L.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:L.graphQLErrors?L.graphQLErrors:L})):(this.toast.error(L.Message),this.formService.setErrors(L.Data))}))))),this.deleteInvoiceEffect=this.effect(S=>S.pipe((0,U.b)(()=>this.patchState({loading:!0})),(0,ae.M)(this.item$),(0,J.w)(([F,N])=>this.data.userDeleteInvoice({invoiceId:N.id}).pipe((0,P._b)(L=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:L.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},L=>{L.graphQLErrors?(this.toast.error(L.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:L.graphQLErrors?L.graphQLErrors:L})):(this.toast.error(L.Message),this.formService.setErrors(L.Data))}))))),this.importExcelEffect=this.effect(S=>S.pipe((0,U.b)(()=>this.patchState({loading:!0})),(0,J.w)(F=>this.invoiceService.importInvoices(F).pipe((0,b.K)(N=>{var L;return this.toast.error(null!==(L=N.Message)&&void 0!==L?L:"Failed to save",{duration:3e3}),E.E}),(0,U.b)(N=>{const L=JSON.parse(N.created),ie=JSON.parse(N.updated),re=JSON.parse(N.failed),$=L.length+ie.length+re.length;this.addInvoices(L),this.updateInvoices(ie),this.toast.success(`${L.length} created, ${ie.length} updated, ${re.length} failed of total ${$}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("invoiceId")){var C=this.route.snapshot.paramMap.get("invoiceId");this.setFormName("invoice_edit")}else this.setFormName("invoice_create");if(this.route.snapshot.paramMap.has("organizationId")){var _=this.route.snapshot.paramMap.get("organizationId");this.setOrganizationId(_)}if(this.route.snapshot.paramMap.has("legalCaseId")){var f=this.route.snapshot.paramMap.get("legalCaseId");this.setLegalCaseId(f)}this.route.snapshot.paramMap.has("invoiceId")&&(C=this.route.snapshot.paramMap.get("invoiceId"),this.setInvoiceId(C))}validateImportData(T){return this.vm$.pipe((0,J.w)(x=>this.invoiceService.validateInvoiceExcelData(T,x.organizations,x.legalCases,x.documents)))}}return A.\u0275fac=function(T){return new(T||A)(q.LFG(y.q),q.LFG(h.F0),q.LFG(h.gz),q.LFG(R.F),q.LFG(de.o),q.LFG(ye))},A.\u0275prov=q.Yz7({token:A,factory:A.\u0275fac}),A})()},6489:(De,we,M)=>{M.d(we,{O:()=>Y});var P=M(24280),E=M(60515),G=M(39646),U=M(54004),J=M(18505),ae=M(63900),b=M(11365),q=M(70262),y=M(94650),h=M(73602),R=M(30144),de=M(71873),e=M(4523),z=M(56869),O=M(71767);class X extends O.T_{constructor(w){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=w}Do(w){return this.businessProvider=w,this.serviceContext=w.serviceContext,this.loggingService=w.loggingService,this.execute(),this.response}}var Z=M(26177);class K extends X{constructor(w,T,x,Q,H){super("ValidateLeadExcelDataAction"),this.valid=!1,this.excelData=w,this.accidentTypes=T,this.statuses=x,this.sourceOfLeads=Q,this.submittedBies=H}preValidateAction(){const w=[];this.excelData.map((T,x)=>{w.push(T.name),this.validationContext.addRule(new Z.mi(`accidentTypeName_${x}_is_valid}`,"Accident Type Is Not Valid","accidentType.name",T.accidentType,this.accidentTypes,!0)),this.validationContext.addRule(new Z.mi(`statusName_${x}_is_valid}`,"Status Is Not Valid","status.name",T.status,this.statuses,!0)),this.validationContext.addRule(new Z.mi(`sourceOfLeadName_${x}_is_valid}`,"Source of Lead Is Not Valid","sourceOfLead.name",T.sourceOfLead,this.sourceOfLeads,!0))}),this.validationContext.addRule(new Z.cL("nameIsUnique","Name should be unique",w,!0))}performAction(){}finish(){super.finish();const w={};let T=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(x=>{x instanceof Z.mi?x.isValid||(w[x.columnName]?w[x.columnName].newNames.includes(x.newName)||w[x.columnName].newNames.push(x.newName):w[x.columnName]={options:x.possibleValueList.map(Q=>Q.name),newNames:[x.newName]}):x instanceof Z.cL&&(x.isValid||(T=x.conflicts))})):this.valid=!0,this.response=(0,G.of)({valid:this.valid,excelData:this.excelData,conflictNames:T,unknownNames:w})}}var W=M(28234);class D extends Z.ul{constructor(w,T,x,Q=!1){super(w,T,Q),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=x,this.configureRules()}configureRules(){this.rules.push(new Z.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser))}}class be extends X{constructor(w){super("CreateLeadAction"),this.input=w}preValidateAction(){this.validationContext.addRule(new D("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateLead({input:this.input}).pipe((0,ae.w)(w=>(0,W.of)(w.data.created)))}}class g extends X{constructor(w){super("SyncMrnToPharmacyAction"),this.input=w}preValidateAction(){this.validationContext.addRule(new Z.DJ("Input","Input should have values",this.input,!0)).addRule(new Z.xF("Id","Id should be a CUID and not null",this.input.id,!0))}performAction(){}}class xe extends X{constructor(w){super("UpdateLeadsAction"),this.leads=w}preValidateAction(){this.validationContext.addRule(new Z.DJ("Input","Input should have values",this.leads,!0))}performAction(){this.response=this.businessProvider.data.userUpdateLeads({input:{leads:this.leads}}).pipe((0,ae.w)(w=>(0,G.of)(w.data.updated)))}}class ue extends X{constructor(w,T){super("UpdateLeadAction"),this.lead=w,this.leadId=T}preValidateAction(){this.validationContext.addRule(new Z.DJ("Input","Input should have values",this.lead,!0)).addRule(new Z.xF("Id","Id should be a CUID and not null",this.leadId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateLead({leadId:this.leadId,input:this.lead}).pipe((0,ae.w)(w=>(0,G.of)(w.data.updated)))}}let Ce=(()=>{class A extends O.nH{constructor(T,x,Q){super("NotificationService.LeadBusinessProviderService",T,Q),this.data=x}createLead(T){const x=new be(T);return x.Do(this),x.response}updateLead(T,x){const Q=new ue(T,x);return Q.Do(this),Q.response}userSyncMrnToPharmacy(T){const x=new g(T);return x.Do(this),x.response}importLeads(T){const x=new xe(T);return x.Do(this),x.response}validateLeadExcelData(T,x,Q,H,te){const ge=new K(T,x,Q,H,te);return ge.Do(this),ge.response}}return A.\u0275fac=function(T){return new(T||A)(y.LFG(z.ed),y.LFG(h.q),y.LFG(O.oI))},A.\u0275prov=y.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"}),A})(),ye=(()=>{class A extends O.nH{constructor(T,x,Q){super("LeadService",Q,T),this.businessProvider=x}createLead(T){const x=Object.fromEntries(Object.entries(T).filter(([Q,H])=>null!==H));return this.businessProvider.createLead(x)}updateLead(T,x){return this.businessProvider.updateLead(T,x)}userSyncMrnToPharmacy(T){return this.businessProvider.userSyncMrnToPharmacy(T)}importLeads(T){return this.businessProvider.importLeads(T)}validateLeadExcelData(T,x,Q,H,te){return this.businessProvider.validateLeadExcelData(T,x,Q,H,te)}}return A.\u0275fac=function(T){return new(T||A)(y.LFG(Ce,8),y.LFG(Ce),y.LFG(z.ed))},A.\u0275prov=y.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"}),A})(),Y=(()=>{class A extends P.m1{constructor(T,x,Q,H,te,ge){if(super({loading:!1,leads:[],done:!1,searchQuery:"",mrn:"",formName:void 0,accidentTypeId:void 0,driversLicenseId:void 0,policeReportAttachmentId:void 0,phoneRecordingId:void 0,leadStatusId:void 0,leadSourceId:void 0,submittedById:void 0,paging:{limit:1e4,skip:0}}),this.data=T,this.router=x,this.route=Q,this.toast=H,this.formService=te,this.leadService=ge,this.bodyPartInjured=[],this.errors$=this.select(C=>C.errors),this.loading$=this.select(C=>C.loading),this.done$=this.select(C=>C.done),this.item$=this.select(C=>C.item),this.leads$=this.select(C=>C.leads),this.accidentTypes$=this.select(C=>C.accidentTypes||[]),this.documents$=this.select(C=>C.documents||[]),this.leadStatuses$=this.select(C=>C.leadStatuses||[]),this.leadSources$=this.select(C=>C.leadSources||[]),this.users$=this.select(C=>C.users||[]),this.accidentTypeId$=this.select(C=>C.accidentTypeId),this.driversLicenseId$=this.select(C=>C.driversLicenseId),this.policeReportAttachmentId$=this.select(C=>C.policeReportAttachmentId),this.phoneRecordingId$=this.select(C=>C.phoneRecordingId),this.leadStatusId$=this.select(C=>C.leadStatusId),this.leadSourceId$=this.select(C=>C.leadSourceId),this.submittedById$=this.select(C=>C.submittedById),this.paging$=this.select(C=>C.paging),this.searchQuery$=this.select(C=>C.searchQuery),this.formName$=this.select(C=>C.formName),this.actionResult$=this.select(this.item$,this.done$,(C,_)=>({item:C,done:_}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.leads$,this.accidentTypes$,this.documents$,this.leadStatuses$,this.leadSources$,this.users$,(C,_,f,S,F,N,L,ie,re,$)=>({errors:C,loading:_,item:f,formName:S,leads:F,accidentTypes:N,documents:L,leadStatuses:ie,leadSources:re,users:$}),{debounce:!0}),this.input$=this.select(this.paging$,this.accidentTypeId$,this.driversLicenseId$,this.policeReportAttachmentId$,this.phoneRecordingId$,this.leadStatusId$,this.leadSourceId$,this.submittedById$,this.searchQuery$,(C,_,f,S,F,N,L,ie,re)=>({limit:C.limit,skip:C.skip,name:re,accidentTypeId:_,driversLicenseId:f,policeReportAttachmentId:S,phoneRecordingId:F,leadStatusId:N,leadSourceId:L,submittedById:ie,total:C.total})),this.setFormName=this.updater((C,_)=>Object.assign(Object.assign({},C),{formName:_})),this.setAccidentTypeId=this.updater((C,_)=>Object.assign(Object.assign({},C),{accidentTypeId:_})),this.setDriversLicenseId=this.updater((C,_)=>Object.assign(Object.assign({},C),{driversLicenseId:_})),this.setPoliceReportAttachmentId=this.updater((C,_)=>Object.assign(Object.assign({},C),{policeReportAttachmentId:_})),this.setPhoneRecordingId=this.updater((C,_)=>Object.assign(Object.assign({},C),{phoneRecordingId:_})),this.setLeadStatusId=this.updater((C,_)=>Object.assign(Object.assign({},C),{leadStatusId:_})),this.setLeadSourceId=this.updater((C,_)=>Object.assign(Object.assign({},C),{leadSourceId:_})),this.setSubmittedById=this.updater((C,_)=>Object.assign(Object.assign({},C),{submittedById:_})),this.filterAccidentTypes=C=>this.data.userSelectAccidentTypes({input:{name:C}}).pipe((0,P._b)(_=>{const f=_.data.items;return console.log("AccidentTypes",_.data.items),this.patchState({accidentTypes:f}),f},_=>this.patchState({errors:_.graphQLErrors?_.graphQLErrors:_})),(0,U.U)(_=>(console.log("filterAccidentTypes",_.data.items),_.data.items))),this.filterDocuments=C=>this.data.userSelectDocuments({input:{name:C}}).pipe((0,P._b)(_=>{const f=_.data.items;return this.patchState({documents:f}),f},_=>this.patchState({errors:_.graphQLErrors?_.graphQLErrors:_})),(0,U.U)(_=>_.data.items)),this.filterLeadStatuses=C=>this.data.userSelectLeadStatuses({input:{name:C}}).pipe((0,P._b)(_=>{const f=_.data.items;return this.patchState({leadStatuses:f}),f},_=>this.patchState({errors:_.graphQLErrors?_.graphQLErrors:_})),(0,U.U)(_=>_.data.items)),this.filterLeadSources=C=>this.data.userSelectLeadSources({input:{name:C}}).pipe((0,P._b)(_=>{const f=_.data.items;return this.patchState({leadSources:f}),f},_=>this.patchState({errors:_.graphQLErrors?_.graphQLErrors:_})),(0,U.U)(_=>_.data.items)),this.filterUsers=C=>this.data.userSelectUsers({input:{name:C}}).pipe((0,P._b)(_=>{const f=_.data.items;return this.patchState({users:f}),f},_=>this.patchState({errors:_.graphQLErrors?_.graphQLErrors:_})),(0,U.U)(_=>_.data.items)),this.filterBodyParts=C=>this.data.userSelectBodyParts({input:{name:C}}).pipe((0,P._b)(_=>{const f=_.data.items;return this.patchState({bodyParts:f}),f},_=>this.patchState({errors:_.graphQLErrors?_.graphQLErrors:_})),(0,U.U)(_=>_.data.items)),this.addAccidentType=this.updater((C,_)=>Object.assign(Object.assign({},C),{accidentTypes:C.accidentTypes.concat(_)})),this.addDocument=this.updater((C,_)=>Object.assign(Object.assign({},C),{documents:C.documents.concat(_)})),this.addLeadStatus=this.updater((C,_)=>Object.assign(Object.assign({},C),{leadStatuses:C.leadStatuses.concat(_)})),this.addLeadSource=this.updater((C,_)=>Object.assign(Object.assign({},C),{leadSources:C.leadSources.concat(_)})),this.addUser=this.updater((C,_)=>Object.assign(Object.assign({},C),{users:C.users.concat(_)})),this.setItem=this.updater((C,_)=>Object.assign(Object.assign({},C),{item:_})),this.addNewLead=this.updater((C,_)=>Object.assign(Object.assign({},C),{leads:[...C.leads,_]})),this.updateLead=this.updater((C,_)=>Object.assign(Object.assign({},C),{leads:C.leads.map(f=>f.id===_.id?_:f)})),this.addLeads=this.updater((C,_)=>Object.assign(Object.assign({},C),{leads:C.leads.concat(_)})),this.updateLeads=this.updater((C,_)=>Object.assign(Object.assign({},C),{leads:C.leads.map(f=>_.find(F=>F.id===f.id)||f)})),this.setSearchQuery=this.updater((C,_)=>Object.assign(Object.assign({},C),{searchQuery:_})),this.loadLeadEffect=this.effect(C=>C.pipe((0,J.b)(()=>this.patchState({loading:!0})),(0,ae.w)(_=>this.data.userLead({leadId:_}).pipe((0,P._b)(f=>{this.patchState({item:f.data.item,errors:f.errors,loading:!1})},f=>this.patchState({loading:!1,errors:f.graphQLErrors?f.graphQLErrors:f})))))),this.loadLeadsEffect=this.effect(C=>C.pipe((0,J.b)(()=>this.patchState({loading:!0})),(0,b.M)(this.input$),(0,ae.w)(([_,f])=>this.data.userLeads({input:f}).pipe((0,P._b)(S=>this.patchState({paging:{limit:f.limit,skip:f.skip,total:S.data.count.total},leads:S.data.items,errors:S.errors,loading:!1}),S=>this.patchState({loading:!1,errors:S.graphQLErrors?S.graphQLErrors:S})))))),this.createLeadEffect=this.effect(C=>C.pipe((0,J.b)(()=>this.patchState({loading:!0})),(0,ae.w)(_=>(console.log("input",_),this.leadService.createLead(Object.assign({},_)).pipe((0,P._b)(f=>{this.addNewLead(f),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:f,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},f=>{f.graphQLErrors?(this.toast.error(f.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:f.graphQLErrors?f.graphQLErrors:f})):(this.toast.error(f.Message),this.formService.setErrors(f.Data))})))))),this.updateLeadEffect=this.effect(C=>C.pipe((0,J.b)(()=>this.patchState({loading:!0})),(0,b.M)(this.item$),(0,ae.w)(([_,f])=>this.leadService.updateLead(f,f.id).pipe((0,P._b)(S=>{this.updateLead(S),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:S,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},S=>{S.graphQLErrors?(this.toast.error(S.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:S.graphQLErrors?S.graphQLErrors:S})):(this.toast.error(S.Message),this.formService.setErrors(S.Data))}))))),this.userSyncMrnToPharmacyEffect=this.effect(C=>C.pipe((0,J.b)(()=>{this.patchState({loading:!0})}),(0,ae.w)(_=>this.data.userSyncMrnToPharmacy({input:_,mrn:_.legalCase.medicalRecordNumber}).pipe((0,P._b)(f=>{this.toast.success("Successfully synced mrn to pharmacy",{duration:3e3}),this.patchState({loading:!1})},f=>{this.toast.error("Failed to ",{duration:3e3}),this.patchState({loading:!1})}))))),this.deleteLeadEffect=this.effect(C=>C.pipe((0,J.b)(()=>this.patchState({loading:!0})),(0,b.M)(this.item$),(0,ae.w)(([_,f])=>this.data.userDeleteLead({leadId:f.id}).pipe((0,P._b)(S=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:S.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},S=>{S.graphQLErrors?(this.toast.error(S.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:S.graphQLErrors?S.graphQLErrors:S})):(this.toast.error(S.Message),this.formService.setErrors(S.Data))}))))),this.importExcelEffect=this.effect(C=>C.pipe((0,J.b)(()=>this.patchState({loading:!0})),(0,ae.w)(_=>this.leadService.importLeads(_).pipe((0,q.K)(f=>{var S;return this.toast.error(null!==(S=f.Message)&&void 0!==S?S:"Failed to save",{duration:3e3}),E.E}),(0,J.b)(f=>{const S=JSON.parse(f.created),F=JSON.parse(f.updated),N=JSON.parse(f.failed),L=S.length+F.length+N.length;this.addLeads(S),this.updateLeads(F),this.toast.success(`${S.length} created, ${F.length} updated, ${N.length} failed of total ${L}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("leadId")?(this.route.snapshot.paramMap.get("leadId"),this.setFormName("lead_edit")):this.setFormName("lead_create"),this.route.snapshot.paramMap.has("accidentTypeId")){const C=this.route.snapshot.paramMap.get("accidentTypeId");this.setAccidentTypeId(C)}if(this.route.snapshot.paramMap.has("driversLicenseId")){const C=this.route.snapshot.paramMap.get("driversLicenseId");this.setDriversLicenseId(C)}if(this.route.snapshot.paramMap.has("policeReportAttachmentId")){const C=this.route.snapshot.paramMap.get("policeReportAttachmentId");this.setPoliceReportAttachmentId(C)}if(this.route.snapshot.paramMap.has("phoneRecordingId")){const C=this.route.snapshot.paramMap.get("phoneRecordingId");this.setPhoneRecordingId(C)}if(this.route.snapshot.paramMap.has("leadStatusId")){const C=this.route.snapshot.paramMap.get("leadStatusId");this.setLeadStatusId(C)}if(this.route.snapshot.paramMap.has("leadSourceId")){const C=this.route.snapshot.paramMap.get("leadSourceId");this.setLeadSourceId(C)}if(this.route.snapshot.paramMap.has("submittedById")){const C=this.route.snapshot.paramMap.get("submittedById");this.setSubmittedById(C)}}validateImportData(T){return this.vm$.pipe((0,ae.w)(x=>this.leadService.validateLeadExcelData(T,x.accidentTypes,x.leadStatuses,x.leadSources,x.users)))}syncMrnToPharmacy(){return this.vm$.pipe((0,ae.w)(T=>(0,G.of)(this.data.userSyncMrnToPharmacy({input:T.item,mrn:"123456"})).pipe((0,q.K)(Q=>{var H;return this.toast.error(null!==(H=Q.Message)&&void 0!==H?H:"Failed to save",{duration:3e3}),E.E}),(0,J.b)(Q=>{Q&&this.toast.success("Successfully synced to pharmacy, {result}",{duration:3e3})}))))}getMrn(){return this.vm$.pipe((0,ae.w)(T=>(0,G.of)(this.data.getPatientMrnNumber({dateOfBirth:T.item.dateOfBirth,dateOfLoss:T.item.dateOfLoss,accidentKind:T.item.accidentTypeId,legalCaseId:T.item.id})).pipe((0,q.K)(x=>{var Q;return this.toast.error(null!==(Q=x.Message)&&void 0!==Q?Q:"Failed to save",{duration:3e3}),E.E}),(0,J.b)(x=>{x&&(console.log(x),this.toast.success(`Success, new MRN: ${x}`,{duration:3e3}))}))))}BodyPartsInjuredChanged(T){console.log("bodyParts",T),this.bodyPartInjured=T.map(x=>({bodyPartId:x}))}}return A.\u0275fac=function(T){return new(T||A)(y.LFG(h.q),y.LFG(R.F0),y.LFG(R.gz),y.LFG(de.F),y.LFG(e.o),y.LFG(ye))},A.\u0275prov=y.Yz7({token:A,factory:A.\u0275fac}),A})()},19647:(De,we,M)=>{M.d(we,{d:()=>Y});var P=M(24280),E=M(60515),G=M(54004),U=M(18505),J=M(63900),ae=M(11365),b=M(70262),q=M(94650),y=M(73602),h=M(30144),R=M(71873),de=M(4523),e=M(56869),z=M(71767),O=M(39646);class X extends z.T_{constructor(w){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=w}Do(w){return this.businessProvider=w,this.serviceContext=w.serviceContext,this.loggingService=w.loggingService,this.execute(),this.response}}var Z=M(26177);class K extends X{constructor(w,T,x,Q,H,te,ge,C,_,f,S){super("ValidateLegalCaseExcelDataAction"),this.valid=!1,this.excelData=w,this.accidentTypes=T,this.patients=x,this.medLevels=Q,this.firms=H,this.attorneys=te,this.caseStatuses=ge,this.caseTypes=C,this.patientTreatmentStatuses=_,this.caseProgressStatuses=f,this.adverseInsuranceStatuses=S}preValidateAction(){const w=[];this.excelData.map((T,x)=>{w.push(T.name),this.validationContext.addRule(new Z.mi(`accidentTypeName_${x}_is_valid}`,"Accident Type Is Not Valid","accidentType.name",T.accidentType,this.accidentTypes,!0)),this.validationContext.addRule(new Z.mi(`patientName_${x}_is_valid}`,"Patient Is Not Valid","patient.name",T.patient,this.patients,!0)),this.validationContext.addRule(new Z.mi(`medLevelName_${x}_is_valid}`,"Med Level Is Not Valid","medLevel.name",T.medLevel,this.medLevels,!0)),this.validationContext.addRule(new Z.mi(`firmName_${x}_is_valid}`,"Firm Is Not Valid","firm.name",T.firm,this.firms,!0)),this.validationContext.addRule(new Z.mi(`attorneyName_${x}_is_valid}`,"Attorney Is Not Valid","attorney.name",T.attorney,this.attorneys,!0)),this.validationContext.addRule(new Z.mi(`caseStatusName_${x}_is_valid}`,"Case Status Is Not Valid","caseStatus.name",T.caseStatus,this.caseStatuses,!0)),this.validationContext.addRule(new Z.mi(`caseTypeName_${x}_is_valid}`,"Case Type Is Not Valid","caseType.name",T.caseType,this.caseTypes,!0)),this.validationContext.addRule(new Z.mi(`patientTreatmentStatusName_${x}_is_valid}`,"Patient Treatment Status Is Not Valid","patientTreatmentStatus.name",T.patientTreatmentStatus,this.patientTreatmentStatuses,!0)),this.validationContext.addRule(new Z.mi(`caseProgressStatusName_${x}_is_valid}`,"Case Progress Status Is Not Valid","caseProgressStatus.name",T.caseProgressStatus,this.caseProgressStatuses,!0)),this.validationContext.addRule(new Z.mi(`adverseInsuranceStatusName_${x}_is_valid}`,"Adverse Insurance Status Is Not Valid","adverseInsuranceStatus.name",T.adverseInsuranceStatus,this.adverseInsuranceStatuses,!0))}),this.validationContext.addRule(new Z.cL("nameIsUnique","Name should be unique",w,!0))}performAction(){}finish(){super.finish();const w={};let T=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(x=>{x instanceof Z.mi?x.isValid||(w[x.columnName]?w[x.columnName].newNames.includes(x.newName)||w[x.columnName].newNames.push(x.newName):w[x.columnName]={options:x.possibleValueList.map(Q=>Q.name),newNames:[x.newName]}):x instanceof Z.cL&&(x.isValid||(T=x.conflicts))})):this.valid=!0,this.response=(0,O.of)({valid:this.valid,excelData:this.excelData,conflictNames:T,unknownNames:w})}}var W=M(28234);class D extends Z.wS{constructor(w,T,x,Q,H){super(w,T,x,Q,H,!0)}}class be extends Z.ul{constructor(w,T,x,Q=!1){super(w,T,Q),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=x,this.configureRules()}configureRules(){this.rules.push(new Z.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new D("name","The legalcase name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class g extends X{constructor(w){super("CreateLegalCaseAction"),this.input=w}preValidateAction(){this.validationContext.addRule(new be("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateLegalCase({input:this.input}).pipe((0,J.w)(w=>(0,W.of)(w.data.created)))}}class xe extends X{constructor(w){super("UpdateLegalCasesAction"),this.legalCases=w}preValidateAction(){this.validationContext.addRule(new Z.DJ("Input","Input should have values",this.legalCases,!0))}performAction(){this.response=this.businessProvider.data.userUpdateLegalCases({input:{legalCases:this.legalCases}}).pipe((0,J.w)(w=>(0,O.of)(w.data.updated)))}}class ue extends X{constructor(w,T){super("UpdateLegalCaseAction"),this.legalCase=w,this.legalCaseId=T}preValidateAction(){this.validationContext.addRule(new Z.DJ("Input","Input should have values",this.legalCase,!0)).addRule(new Z.xF("Id","Id should be a CUID and not null",this.legalCaseId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateLegalCase({legalCaseId:this.legalCaseId,input:this.legalCase}).pipe((0,J.w)(w=>(0,O.of)(w.data.updated)))}}let Ce=(()=>{class A extends z.nH{constructor(T,x,Q){super("NotificationService.LegalCaseBusinessProviderService",T,Q),this.data=x}createLegalCase(T){const x=new g(T);return x.Do(this),x.response}updateLegalCase(T,x){const Q=new ue(T,x);return Q.Do(this),Q.response}importLegalCases(T){const x=new xe(T);return x.Do(this),x.response}validateLegalCaseExcelData(T,x,Q,H,te,ge,C,_,f,S,F){const N=new K(T,x,Q,H,te,ge,C,_,f,S,F);return N.Do(this),N.response}}return A.\u0275fac=function(T){return new(T||A)(q.LFG(e.ed),q.LFG(y.q),q.LFG(z.oI))},A.\u0275prov=q.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"}),A})(),ye=(()=>{class A extends z.nH{constructor(T,x,Q){super("LegalCaseService",Q,T),this.businessProvider=x}createLegalCase(T){const x=Object.fromEntries(Object.entries(T).filter(([Q,H])=>null!==H));return this.businessProvider.createLegalCase(x)}updateLegalCase(T,x){return this.businessProvider.updateLegalCase(T,x)}importLegalCases(T){return this.businessProvider.importLegalCases(T)}validateLegalCaseExcelData(T,x,Q,H,te,ge,C,_,f,S,F){return this.businessProvider.validateLegalCaseExcelData(T,x,Q,H,te,ge,C,_,f,S,F)}}return A.\u0275fac=function(T){return new(T||A)(q.LFG(Ce,8),q.LFG(Ce),q.LFG(e.ed))},A.\u0275prov=q.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"}),A})(),Y=(()=>{class A extends P.m1{constructor(T,x,Q,H,te,ge){if(super({loading:!1,legalCases:[],done:!1,searchQuery:"",formName:void 0,accidentTypeId:void 0,patientId:void 0,medLevelId:void 0,firmId:void 0,attorneyId:void 0,caseStatusId:void 0,caseTypeId:void 0,patientTreatmentStatusId:void 0,caseProgressStatusId:void 0,adverseInsuranceStatusId:void 0,legalCaseUpdates:[],mrnNumber:void 0,currentLegalCaseId:void 0,paging:{limit:1e4,skip:0},summary:[{month:"Jan",settlement:45,prorata:78},{month:"Feb",settlement:50,prorata:82},{month:"Mar",settlement:70,prorata:110},{month:"Apr",settlement:76,prorata:90}]}),this.data=T,this.router=x,this.route=Q,this.toast=H,this.formService=te,this.legalCaseService=ge,this.errors$=this.select(C=>C.errors),this.loading$=this.select(C=>C.loading),this.summary$=this.select(C=>C.summary),this.done$=this.select(C=>C.done),this.currentLegalCaseId$=this.select(C=>C.currentLegalCaseId),this.item$=this.select(C=>{var _,f,S,F,N,L,ie,re,$,j,k;if(C.item){let se=0,Se=0;null===(f=null===(_=C.item)||void 0===_?void 0:_.insurances)||void 0===f||f.map(Ae=>{var Ie,pe;Ae.minimumCoverageAmount=null!==(Ie=Ae.minimumCoverageAmount)&&void 0!==Ie?Ie:0,Ae.maximumCoverageAmount=null!==(pe=Ae.maximumCoverageAmount)&&void 0!==pe?pe:0,se+=Ae.minimumCoverageAmount}),null===(F=null===(S=C.item)||void 0===S?void 0:S.priorMedsToDates)||void 0===F||F.map(Ae=>{var Ie;Ae.amount=null!==(Ie=Ae.amount)&&void 0!==Ie?Ie:0,Se+=Ae.amount});const Pe=null===(ie=null===(L=null===(N=C.item)||void 0===N?void 0:N.caseProcedures)||void 0===L?void 0:L.map(Ae=>Ae.estimate))||void 0===ie?void 0:ie.reduce((Ae,Ie)=>Ae+Ie,0),me=null===(j=null===($=null===(re=C.item)||void 0===re?void 0:re.caseAccounts)||void 0===$?void 0:$.map(Ae=>Ae.contractedAmount))||void 0===j?void 0:j.reduce((Ae,Ie)=>Ae+Ie,0);return Object.assign(Object.assign({},C.item),{sumOfMinAmount:se.toFixed(2),totalPendingRequestEstimate:Pe.toFixed(2),sumOfPriorMedsToDateAmount:Se.toFixed(2),totalCaseAccountsSiteCost:me.toFixed(2),totalMedsToDates:null===(k=Pe+Se+me)||void 0===k?void 0:k.toFixed(2)})}}),this.legalCases$=this.select(C=>C.legalCases),this.legalCaseUpdates$=this.select(C=>C.legalCaseUpdates),this.accidentTypes$=this.select(C=>C.accidentTypes||[]),this.patients$=this.select(C=>C.patients||[]),this.medLevels$=this.select(C=>C.medLevels||[]),this.firms$=this.select(C=>C.firms||[]),this.attorneys$=this.select(C=>C.attorneys||[]),this.caseStatuses$=this.select(C=>C.caseStatuses||[]),this.caseTypes$=this.select(C=>C.caseTypes||[]),this.mrnNumber$=this.select(C=>C.mrnNumber||""),this.patientTreatmentStatuses$=this.select(C=>C.patientTreatmentStatuses||[]),this.caseProgressStatuses$=this.select(C=>C.caseProgressStatuses||[]),this.adverseInsuranceStatuses$=this.select(C=>C.adverseInsuranceStatuses||[]),this.accidentTypeId$=this.select(C=>C.accidentTypeId),this.patientId$=this.select(C=>C.patientId),this.medLevelId$=this.select(C=>C.medLevelId),this.firmId$=this.select(C=>C.firmId),this.attorneyId$=this.select(C=>C.attorneyId),this.caseStatusId$=this.select(C=>C.caseStatusId),this.caseTypeId$=this.select(C=>C.caseTypeId),this.patientTreatmentStatusId$=this.select(C=>C.patientTreatmentStatusId),this.caseProgressStatusId$=this.select(C=>C.caseProgressStatusId),this.adverseInsuranceStatusId$=this.select(C=>C.adverseInsuranceStatusId),this.paging$=this.select(C=>C.paging),this.searchQuery$=this.select(C=>C.searchQuery),this.formName$=this.select(C=>C.formName),this.actionResult$=this.select(this.item$,this.done$,(C,_)=>({item:C,done:_}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.legalCases$,this.accidentTypes$,this.patients$,this.medLevels$,this.firms$,this.attorneys$,this.caseStatuses$,this.caseTypes$,this.patientTreatmentStatuses$,this.caseProgressStatuses$,this.adverseInsuranceStatuses$,this.mrnNumber$,(C,_,f,S,F,N,L,ie,re,$,j,k,se,Se,Pe,me)=>({errors:C,loading:_,item:f,formName:S,legalCases:F,accidentTypes:N,patients:L,medLevels:ie,firms:re,attorneys:$,caseStatuses:j,caseTypes:k,patientTreatmentStatuses:se,caseProgressStatuses:Se,adverseInsuranceStatuses:Pe,mrnNumber:me}),{debounce:!0}),this.input$=this.select(this.paging$,this.accidentTypeId$,this.patientId$,this.medLevelId$,this.firmId$,this.attorneyId$,this.caseStatusId$,this.caseTypeId$,this.patientTreatmentStatusId$,this.caseProgressStatusId$,this.adverseInsuranceStatusId$,this.searchQuery$,(C,_,f,S,F,N,L,ie,re,$,j,k)=>({limit:C.limit,skip:C.skip,name:k,accidentTypeId:_,patientId:f,medLevelId:S,firmId:F,attorneyId:N,caseStatusId:L,caseTypeId:ie,patientTreatmentStatusId:re,caseProgressStatusId:$,adverseInsuranceStatusId:j,total:C.total})),this.setFormName=this.updater((C,_)=>Object.assign(Object.assign({},C),{formName:_})),this.setAccidentTypeId=this.updater((C,_)=>Object.assign(Object.assign({},C),{accidentTypeId:_})),this.setPatientId=this.updater((C,_)=>Object.assign(Object.assign({},C),{patientId:_})),this.setMedLevelId=this.updater((C,_)=>Object.assign(Object.assign({},C),{medLevelId:_})),this.setFirmId=this.updater((C,_)=>Object.assign(Object.assign({},C),{firmId:_})),this.setAttorneyId=this.updater((C,_)=>Object.assign(Object.assign({},C),{attorneyId:_})),this.setCaseStatusId=this.updater((C,_)=>Object.assign(Object.assign({},C),{caseStatusId:_})),this.setCurrentLegalCaseId=this.updater((C,_)=>Object.assign(Object.assign({},C),{currentLegalCaseId:_})),this.setCaseTypeId=this.updater((C,_)=>Object.assign(Object.assign({},C),{caseTypeId:_})),this.setPatientTreatmentStatusId=this.updater((C,_)=>Object.assign(Object.assign({},C),{patientTreatmentStatusId:_})),this.setCaseProgressStatusId=this.updater((C,_)=>Object.assign(Object.assign({},C),{caseProgressStatusId:_})),this.setAdverseInsuranceStatusId=this.updater((C,_)=>Object.assign(Object.assign({},C),{adverseInsuranceStatusId:_})),this.setLimit=this.updater((C,_)=>Object.assign(Object.assign({},C),{paging:Object.assign(Object.assign({},C.paging),{limit:_})})),this.setSkip=this.updater((C,_)=>Object.assign(Object.assign({},C),{paging:Object.assign(Object.assign({},C.paging),{skip:_})})),this.filterAccidentTypes=C=>this.data.userSelectAccidentTypes({input:{name:C}}).pipe((0,P._b)(_=>{const f=_.data.items;return this.patchState({accidentTypes:f}),f},_=>this.patchState({errors:_.graphQLErrors?_.graphQLErrors:_})),(0,G.U)(_=>_.data.items)),this.filterPatients=C=>this.data.userSelectPatients({input:{name:C}}).pipe((0,P._b)(_=>{const f=_.data.items;return this.patchState({patients:f}),f},_=>this.patchState({errors:_.graphQLErrors?_.graphQLErrors:_})),(0,G.U)(_=>_.data.items)),this.filterMedLevels=C=>this.data.userSelectMedLevels({input:{name:C}}).pipe((0,P._b)(_=>{const f=_.data.items;return this.patchState({medLevels:f}),f},_=>this.patchState({errors:_.graphQLErrors?_.graphQLErrors:_})),(0,G.U)(_=>_.data.items)),this.filterFirms=C=>this.data.userSelectFirms({input:{name:C}}).pipe((0,P._b)(_=>{const f=_.data.items;return this.patchState({firms:f}),f},_=>this.patchState({errors:_.graphQLErrors?_.graphQLErrors:_})),(0,G.U)(_=>_.data.items)),this.filterAttorneys=C=>this.data.userSelectAttorneys({input:{name:C}}).pipe((0,P._b)(_=>{const f=_.data.items;return this.patchState({attorneys:f}),f},_=>this.patchState({errors:_.graphQLErrors?_.graphQLErrors:_})),(0,G.U)(_=>_.data.items)),this.filterCaseStatuses=C=>this.data.userSelectCaseStatuses({input:{name:C}}).pipe((0,P._b)(_=>{const f=_.data.items;return this.patchState({caseStatuses:f}),f},_=>this.patchState({errors:_.graphQLErrors?_.graphQLErrors:_})),(0,G.U)(_=>_.data.items)),this.filterCaseTypes=C=>this.data.userSelectCaseTypes({input:{name:C}}).pipe((0,P._b)(_=>{const f=_.data.items;return this.patchState({caseTypes:f}),f},_=>this.patchState({errors:_.graphQLErrors?_.graphQLErrors:_})),(0,G.U)(_=>_.data.items)),this.filterPatientTreatmentStatuses=C=>this.data.userSelectPatientTreatmentStatuses({input:{name:C}}).pipe((0,P._b)(_=>{const f=_.data.items;return this.patchState({patientTreatmentStatuses:f}),f},_=>this.patchState({errors:_.graphQLErrors?_.graphQLErrors:_})),(0,G.U)(_=>_.data.items)),this.filterCaseProgressStatuses=C=>this.data.userSelectCaseProgressStatuses({input:{name:C}}).pipe((0,P._b)(_=>{const f=_.data.items;return this.patchState({caseProgressStatuses:f}),f},_=>this.patchState({errors:_.graphQLErrors?_.graphQLErrors:_})),(0,G.U)(_=>_.data.items)),this.filterAdverseInsuranceStatuses=C=>this.data.userSelectAdverseInsuranceStatuses({input:{name:C}}).pipe((0,P._b)(_=>{const f=_.data.items;return this.patchState({adverseInsuranceStatuses:f}),f},_=>this.patchState({errors:_.graphQLErrors?_.graphQLErrors:_})),(0,G.U)(_=>_.data.items)),this.addAccidentType=this.updater((C,_)=>Object.assign(Object.assign({},C),{accidentTypes:C.accidentTypes.concat(_)})),this.addPatient=this.updater((C,_)=>Object.assign(Object.assign({},C),{patients:C.patients.concat(_)})),this.addMedLevel=this.updater((C,_)=>Object.assign(Object.assign({},C),{medLevels:C.medLevels.concat(_)})),this.addFirm=this.updater((C,_)=>Object.assign(Object.assign({},C),{firms:C.firms.concat(_)})),this.addAttorney=this.updater((C,_)=>Object.assign(Object.assign({},C),{attorneys:C.attorneys.concat(_)})),this.addCaseStatus=this.updater((C,_)=>Object.assign(Object.assign({},C),{caseStatuses:C.caseStatuses.concat(_)})),this.addCaseType=this.updater((C,_)=>Object.assign(Object.assign({},C),{caseTypes:C.caseTypes.concat(_)})),this.addPatientTreatmentStatus=this.updater((C,_)=>Object.assign(Object.assign({},C),{patientTreatmentStatuses:C.patientTreatmentStatuses.concat(_)})),this.addCaseProgressStatus=this.updater((C,_)=>Object.assign(Object.assign({},C),{caseProgressStatuses:C.caseProgressStatuses.concat(_)})),this.addAdverseInsuranceStatus=this.updater((C,_)=>Object.assign(Object.assign({},C),{adverseInsuranceStatuses:C.adverseInsuranceStatuses.concat(_)})),this.setItem=this.updater((C,_)=>Object.assign(Object.assign({},C),{item:_})),this.addNewLegalCase=this.updater((C,_)=>Object.assign(Object.assign({},C),{legalCases:[...C.legalCases,_]})),this.updateLegalCase=this.updater((C,_)=>Object.assign(Object.assign({},C),{legalCases:C.legalCases.map(f=>f.id===_.id?_:f)})),this.addLegalCases=this.updater((C,_)=>Object.assign(Object.assign({},C),{legalCases:C.legalCases.concat(_)})),this.updateLegalCases=this.updater((C,_)=>Object.assign(Object.assign({},C),{legalCases:C.legalCases.map(f=>_.find(F=>F.id===f.id)||f)})),this.setSearchQuery=this.updater((C,_)=>Object.assign(Object.assign({},C),{searchQuery:_})),this.loadLegalCaseEffect=this.effect(C=>C.pipe((0,U.b)(()=>this.patchState({loading:!0})),(0,J.w)(_=>(this.setCurrentLegalCaseId(_),this.data.userLegalCase({legalCaseId:_}).pipe((0,P._b)(f=>{var S,F,N,L;return null===(F=null===(S=f.data.item)||void 0===S?void 0:S.caseProcedures)||void 0===F||F.map(re=>{var $;return Object.assign(Object.assign({},re),{estimate:null===($=re.procedureVendors)||void 0===$?void 0:$.map(j=>j.estimate).reduce((j,k)=>j+k)})}),console.log("caseAccounts:",f.data.item.caseAccounts),this.patchState({item:Object.assign(Object.assign({},f.data.item),{caseProcedures:null===(L=null===(N=f.data.item)||void 0===N?void 0:N.caseProcedures)||void 0===L?void 0:L.map(re=>{var $;return Object.assign(Object.assign({},re),{estimate:null===($=re.procedureVendors)||void 0===$?void 0:$.map(j=>j.estimate).reduce((j,k)=>j+k)})})}),errors:f.errors,loading:!1})},f=>this.patchState({loading:!1,errors:f.graphQLErrors?f.graphQLErrors:f}))))))),this.loadLegalCasesEffect=this.effect(C=>C.pipe((0,U.b)(()=>this.patchState({loading:!0})),(0,ae.M)(this.input$),(0,J.w)(([_,f])=>this.data.userLegalCases({input:f}).pipe((0,P._b)(S=>this.patchState({paging:{limit:f.limit,skip:f.skip,total:S.data.count.total},legalCases:S.data.items,errors:S.errors,loading:!1}),S=>this.patchState({loading:!1,errors:S.graphQLErrors?S.graphQLErrors:S})))))),this.loadLegalCasesUpdatesEffect=this.effect(C=>C.pipe((0,U.b)(()=>this.patchState({loading:!0})),(0,J.w)(()=>this.data.userLegalCaseUpdates().pipe((0,P._b)(_=>this.patchState({legalCaseUpdates:_.data.legalCases,errors:_.errors,loading:!1}),_=>this.patchState({loading:!1,errors:_.graphQLErrors?_.graphQLErrors:_})))))),this.createLegalCaseEffect=this.effect(C=>C.pipe((0,U.b)(()=>this.patchState({loading:!0})),(0,J.w)(_=>this.legalCaseService.createLegalCase(Object.assign({},_)).pipe((0,P._b)(f=>{this.addNewLegalCase(f),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:f,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},f=>{f.graphQLErrors?(this.toast.error(f.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:f.graphQLErrors?f.graphQLErrors:f})):(this.toast.error(f.Message),this.formService.setErrors(f.Data))}))))),this.createPatientDocumentEffect=this.effect(C=>C.pipe((0,U.b)(()=>this.patchState({loading:!0})),(0,J.w)(_=>(_.patientId=this.get().item.patientId,console.log(_.patientId),this.data.userCreateDocument({input:_}).pipe((0,G.U)(f=>console.log(f.data.created))))))),this.getMrnNumberEffect=this.effect(C=>C.pipe((0,U.b)(()=>this.patchState({loading:!0})),(0,J.w)(_=>(console.log(_),this.data.getPatientMrnNumber({dateOfBirth:_.dateOfBirth,dateOfLoss:_.dateOfLoss,accidentKind:_.accidentKind,legalCaseId:_.legalCaseId}).pipe((0,G.U)(f=>console.log("Mrn Output",f.data.patientMrn))))))),this.updateLegalCaseEffect=this.effect(C=>C.pipe((0,U.b)(()=>this.patchState({loading:!0})),(0,ae.M)(this.item$),(0,J.w)(([_,f])=>this.legalCaseService.updateLegalCase(_,_.id).pipe((0,P._b)(S=>{this.updateLegalCase(S),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:S,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},S=>{S.graphQLErrors?(this.toast.error(S.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:S.graphQLErrors?S.graphQLErrors:S})):(this.toast.error(S.Message),this.formService.setErrors(S.Data))}))))),this.deleteLegalCaseEffect=this.effect(C=>C.pipe((0,U.b)(()=>this.patchState({loading:!0})),(0,ae.M)(this.item$),(0,J.w)(([_,f])=>this.data.userDeleteLegalCase({legalCaseId:f.id}).pipe((0,P._b)(S=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:S.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},S=>{S.graphQLErrors?(this.toast.error(S.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:S.graphQLErrors?S.graphQLErrors:S})):(this.toast.error(S.Message),this.formService.setErrors(S.Data))}))))),this.importExcelEffect=this.effect(C=>C.pipe((0,U.b)(()=>this.patchState({loading:!0})),(0,J.w)(_=>this.legalCaseService.importLegalCases(_).pipe((0,b.K)(f=>{var S;return this.toast.error(null!==(S=f.Message)&&void 0!==S?S:"Failed to save",{duration:3e3}),E.E}),(0,U.b)(f=>{const S=JSON.parse(f.created),F=JSON.parse(f.updated),N=JSON.parse(f.failed),L=S.length+F.length+N.length;this.addLegalCases(S),this.updateLegalCases(F),this.toast.success(`${S.length} created, ${F.length} updated, ${N.length} failed of total ${L}`,{duration:3e3})}))))),this.updateCaseStatusEffect=this.effect(C=>C.pipe((0,U.b)(_=>{this.patchState({loading:!0})}),(0,J.w)(_=>this.data.userUpdateLegalCase({legalCaseId:_.legalCaseId,input:{name:_.name,firmId:_.firmId,patientId:_.patientId,caseStatusId:_.caseStatusId}}).pipe((0,P._b)(f=>{var S,F,N;this.toast.success(`Successfully updated case status to ${null!==(N=null===(F=null===(S=f.data.updated)||void 0===S?void 0:S.caseStatus)||void 0===F?void 0:F.name)&&void 0!==N?N:""}`,{duration:3e3}),this.patchState({loading:!1})},f=>{this.toast.error("Failed to update status",{duration:3e3}),console.log(f),this.patchState({loading:!1})}))))),this.updateFundingApproved=this.effect(C=>C.pipe((0,U.b)(()=>this.patchState({loading:!0})),(0,J.w)(_=>(console.log("updateFundingApproved",_),this.data.userUpdateProcedureVendor({procedureVendorId:_.input.id,input:_.input}).pipe((0,P._b)(f=>{this.currentLegalCaseId$.subscribe(S=>{this.loadLegalCaseEffect(S)}).unsubscribe(),this.patchState({errors:f.errors,loading:!1}),_.resultEmitter.emit(f.data.updated)},f=>this.patchState({loading:!1,errors:f.graphQLErrors?f.graphQLErrors:f}))))))),this.route.snapshot.paramMap.has("legalCaseId")?(this.route.snapshot.paramMap.get("legalCaseId"),this.setFormName("legalCase_edit")):this.setFormName("legalCase_create"),this.route.snapshot.paramMap.has("accidentTypeId")){const C=this.route.snapshot.paramMap.get("accidentTypeId");this.setAccidentTypeId(C)}if(this.route.snapshot.paramMap.has("patientId")){const C=this.route.snapshot.paramMap.get("patientId");this.setPatientId(C)}if(this.route.snapshot.paramMap.has("medLevelId")){const C=this.route.snapshot.paramMap.get("medLevelId");this.setMedLevelId(C)}if(this.route.snapshot.paramMap.has("firmId")){const C=this.route.snapshot.paramMap.get("firmId");this.setFirmId(C)}if(this.route.snapshot.paramMap.has("attorneyId")){const C=this.route.snapshot.paramMap.get("attorneyId");this.setAttorneyId(C)}if(this.route.snapshot.paramMap.has("caseStatusId")){const C=this.route.snapshot.paramMap.get("caseStatusId");this.setCaseStatusId(C)}if(this.route.snapshot.paramMap.has("caseTypeId")){const C=this.route.snapshot.paramMap.get("caseTypeId");this.setCaseTypeId(C)}if(this.route.snapshot.paramMap.has("patientTreatmentStatusId")){const C=this.route.snapshot.paramMap.get("patientTreatmentStatusId");this.setPatientTreatmentStatusId(C)}if(this.route.snapshot.paramMap.has("caseProgressStatusId")){const C=this.route.snapshot.paramMap.get("caseProgressStatusId");this.setCaseProgressStatusId(C)}if(this.route.snapshot.paramMap.has("adverseInsuranceStatusId")){const C=this.route.snapshot.paramMap.get("adverseInsuranceStatusId");this.setAdverseInsuranceStatusId(C)}}validateImportData(T){return this.vm$.pipe((0,J.w)(x=>this.legalCaseService.validateLegalCaseExcelData(T,x.accidentTypes,x.patients,x.medLevels,x.firms,x.attorneys,x.caseStatuses,x.caseTypes,x.patientTreatmentStatuses,x.caseProgressStatuses,x.adverseInsuranceStatuses)))}}return A.\u0275fac=function(T){return new(T||A)(q.LFG(y.q),q.LFG(h.F0),q.LFG(h.gz),q.LFG(R.F),q.LFG(de.o),q.LFG(ye))},A.\u0275prov=q.Yz7({token:A,factory:A.\u0275fac}),A})()},3866:(De,we,M)=>{M.d(we,{v:()=>Y});var P=M(24280),E=M(60515),G=M(54004),U=M(18505),J=M(63900),ae=M(11365),b=M(70262),q=M(94650),y=M(73602),h=M(30144),R=M(71873),de=M(4523),e=M(56869),z=M(71767),O=M(39646);class X extends z.T_{constructor(w){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=w}Do(w){return this.businessProvider=w,this.serviceContext=w.serviceContext,this.loggingService=w.loggingService,this.execute(),this.response}}var Z=M(26177);class K extends X{constructor(w,T){super("ValidateLocationExcelDataAction"),this.valid=!1,this.excelData=w,this.placeOfServices=T}preValidateAction(){const w=[];this.excelData.map((T,x)=>{w.push(T.name),this.validationContext.addRule(new Z.mi(`placeOfServiceName_${x}_is_valid}`,"Place of Service Is Not Valid","placeOfService.name",T.placeOfService,this.placeOfServices,!0))}),this.validationContext.addRule(new Z.cL("nameIsUnique","Name should be unique",w,!0))}performAction(){}finish(){super.finish();const w={};let T=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(x=>{x instanceof Z.mi?x.isValid||(w[x.columnName]?w[x.columnName].newNames.includes(x.newName)||w[x.columnName].newNames.push(x.newName):w[x.columnName]={options:x.possibleValueList.map(Q=>Q.name),newNames:[x.newName]}):x instanceof Z.cL&&(x.isValid||(T=x.conflicts))})):this.valid=!0,this.response=(0,O.of)({valid:this.valid,excelData:this.excelData,conflictNames:T,unknownNames:w})}}var W=M(28234);class D extends Z.wS{constructor(w,T,x,Q,H){super(w,T,x,Q,H,!0)}}class be extends Z.ul{constructor(w,T,x,Q=!1){super(w,T,Q),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=x,this.configureRules()}configureRules(){this.rules.push(new Z.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new D("name","The location name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class g extends X{constructor(w){super("CreateLocationAction"),this.input=w}preValidateAction(){this.validationContext.addRule(new be("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateLocation({input:this.input}).pipe((0,J.w)(w=>(0,W.of)(w.data.created)))}}class xe extends X{constructor(w){super("UpdateLocationsAction"),this.locations=w}preValidateAction(){this.validationContext.addRule(new Z.DJ("Input","Input should have values",this.locations,!0))}performAction(){this.response=this.businessProvider.data.userUpdateLocations({input:{locations:this.locations}}).pipe((0,J.w)(w=>(0,O.of)(w.data.updated)))}}class ue extends X{constructor(w,T){super("UpdateLocationAction"),this.location=w,this.locationId=T}preValidateAction(){this.validationContext.addRule(new Z.DJ("Input","Input should have values",this.location,!0)).addRule(new Z.xF("Id","Id should be a CUID and not null",this.locationId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateLocation({locationId:this.locationId,input:this.location}).pipe((0,J.w)(w=>(0,O.of)(w.data.updated)))}}let Ce=(()=>{class A extends z.nH{constructor(T,x,Q){super("NotificationService.LocationBusinessProviderService",T,Q),this.data=x}createLocation(T){const x=new g(T);return x.Do(this),x.response}updateLocation(T,x){const Q=new ue(T,x);return Q.Do(this),Q.response}importLocations(T){const x=new xe(T);return x.Do(this),x.response}validateLocationExcelData(T,x){const Q=new K(T,x);return Q.Do(this),Q.response}}return A.\u0275fac=function(T){return new(T||A)(q.LFG(e.ed),q.LFG(y.q),q.LFG(z.oI))},A.\u0275prov=q.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"}),A})(),ye=(()=>{class A extends z.nH{constructor(T,x,Q){super("LocationService",Q,T),this.businessProvider=x}createLocation(T){const x=Object.fromEntries(Object.entries(T).filter(([Q,H])=>null!==H));return this.businessProvider.createLocation(x)}updateLocation(T,x){return this.businessProvider.updateLocation(T,x)}importLocations(T){return this.businessProvider.importLocations(T)}validateLocationExcelData(T,x){return this.businessProvider.validateLocationExcelData(T,x)}}return A.\u0275fac=function(T){return new(T||A)(q.LFG(Ce,8),q.LFG(Ce),q.LFG(e.ed))},A.\u0275prov=q.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"}),A})(),Y=(()=>{class A extends P.m1{constructor(T,x,Q,H,te,ge){if(super({loading:!1,locations:[],done:!1,searchQuery:"",formName:void 0,placeOfServiceId:void 0,vendorLocationId:void 0,clinicalProviderId:void 0,vendorId:void 0,paging:{limit:1e4,skip:0}}),this.data=T,this.router=x,this.route=Q,this.toast=H,this.formService=te,this.locationService=ge,this.errors$=this.select(N=>N.errors),this.loading$=this.select(N=>N.loading),this.done$=this.select(N=>N.done),this.item$=this.select(N=>N.item),this.locations$=this.select(N=>N.locations),this.placeOfServices$=this.select(N=>N.placeOfServices||[]),this.vendorLocationId$=this.select(N=>N.vendorLocationId),this.vendorId$=this.select(N=>N.vendorId),this.clinicalProviderId$=this.select(N=>N.clinicalProviderId),this.placeOfServiceId$=this.select(N=>N.placeOfServiceId),this.paging$=this.select(N=>N.paging),this.searchQuery$=this.select(N=>N.searchQuery),this.formName$=this.select(N=>N.formName),this.actionResult$=this.select(this.item$,this.done$,(N,L)=>({item:N,done:L}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.locations$,this.placeOfServices$,(N,L,ie,re,$,j)=>({errors:N,loading:L,item:ie,formName:re,locations:$,placeOfServices:j}),{debounce:!0}),this.input$=this.select(this.paging$,this.placeOfServiceId$,this.searchQuery$,this.vendorLocationId$,this.vendorId$,this.clinicalProviderId$,(N,L,ie,re,$,j)=>({limit:N.limit,skip:N.skip,name:ie,placeOfServiceId:L,vendorLocationId:re,clinicalProviderId:j,vendorId:$,total:N.total})),this.setFormName=this.updater((N,L)=>Object.assign(Object.assign({},N),{formName:L})),this.setPlaceOfServiceId=this.updater((N,L)=>Object.assign(Object.assign({},N),{placeOfServiceId:L})),this.setVendorLocationId=this.updater((N,L)=>Object.assign(Object.assign({},N),{vendorLocationId:L})),this.setVendorId=this.updater((N,L)=>Object.assign(Object.assign({},N),{vendorId:L})),this.setClinicalProviderId=this.updater((N,L)=>Object.assign(Object.assign({},N),{clinicalProviderId:L})),this.filterPlaceOfServices=N=>this.data.userSelectPlaceOfServices({input:{name:N}}).pipe((0,P._b)(L=>{let ie=L.data.items;return this.patchState({placeOfServices:ie}),ie},L=>this.patchState({errors:L.graphQLErrors?L.graphQLErrors:L})),(0,G.U)(L=>L.data.items)),this.addPlaceOfService=this.updater((N,L)=>Object.assign(Object.assign({},N),{placeOfServices:N.placeOfServices.concat(L)})),this.setItem=this.updater((N,L)=>Object.assign(Object.assign({},N),{item:L})),this.addNewLocation=this.updater((N,L)=>Object.assign(Object.assign({},N),{locations:[...N.locations,L]})),this.updateLocation=this.updater((N,L)=>Object.assign(Object.assign({},N),{locations:N.locations.map(ie=>ie.id===L.id?L:ie)})),this.addLocations=this.updater((N,L)=>Object.assign(Object.assign({},N),{locations:N.locations.concat(L)})),this.updateLocations=this.updater((N,L)=>Object.assign(Object.assign({},N),{locations:N.locations.map(ie=>L.find($=>$.id===ie.id)||ie)})),this.setSearchQuery=this.updater((N,L)=>Object.assign(Object.assign({},N),{searchQuery:L})),this.loadLocationEffect=this.effect(N=>N.pipe((0,U.b)(()=>this.patchState({loading:!0})),(0,J.w)(L=>this.data.userLocation({locationId:L}).pipe((0,P._b)(ie=>{console.log("location",ie.data.item),this.patchState({item:ie.data.item,errors:ie.errors,loading:!1})},ie=>this.patchState({loading:!1,errors:ie.graphQLErrors?ie.graphQLErrors:ie})))))),this.loadLocationsEffect=this.effect(N=>N.pipe((0,U.b)(()=>this.patchState({loading:!0})),(0,ae.M)(this.input$),(0,J.w)(([L,ie])=>this.data.userLocations({input:ie}).pipe((0,P._b)(re=>this.patchState({paging:{limit:ie.limit,skip:ie.skip,total:re.data.count.total},locations:re.data.items,errors:re.errors,loading:!1}),re=>this.patchState({loading:!1,errors:re.graphQLErrors?re.graphQLErrors:re})))))),this.createLocationEffect=this.effect(N=>N.pipe((0,U.b)(()=>this.patchState({loading:!0})),(0,J.w)(L=>this.locationService.createLocation(Object.assign({},L)).pipe((0,P._b)(ie=>{this.addNewLocation(ie),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:ie,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},ie=>{ie.graphQLErrors?(this.toast.error(ie.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:ie.graphQLErrors?ie.graphQLErrors:ie})):(this.toast.error(ie.Message),this.formService.setErrors(ie.Data))}))))),this.updateLocationEffect=this.effect(N=>N.pipe((0,U.b)(()=>this.patchState({loading:!0})),(0,ae.M)(this.item$),(0,J.w)(([L,ie])=>this.locationService.updateLocation(L,L.id).pipe((0,P._b)(re=>{this.updateLocation(re),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:re,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},re=>{re.graphQLErrors?(this.toast.error(re.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:re.graphQLErrors?re.graphQLErrors:re})):(this.toast.error(re.Message),this.formService.setErrors(re.Data))}))))),this.deleteLocationEffect=this.effect(N=>N.pipe((0,U.b)(()=>this.patchState({loading:!0})),(0,ae.M)(this.item$),(0,J.w)(([L,ie])=>this.data.userDeleteLocation({locationId:ie.id}).pipe((0,P._b)(re=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:re.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},re=>{re.graphQLErrors?(this.toast.error(re.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:re.graphQLErrors?re.graphQLErrors:re})):(this.toast.error(re.Message),this.formService.setErrors(re.Data))}))))),this.importExcelEffect=this.effect(N=>N.pipe((0,U.b)(()=>this.patchState({loading:!0})),(0,J.w)(L=>this.locationService.importLocations(L).pipe((0,b.K)(ie=>{var re;return this.toast.error(null!==(re=ie.Message)&&void 0!==re?re:"Failed to save",{duration:3e3}),E.E}),(0,U.b)(ie=>{const re=JSON.parse(ie.created),$=JSON.parse(ie.updated),j=JSON.parse(ie.failed),k=re.length+$.length+j.length;this.addLocations(re),this.updateLocations($),this.toast.success(`${re.length} created, ${$.length} updated, ${j.length} failed of total ${k}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("locationId")?(this.route.snapshot.paramMap.get("locationId"),this.setFormName("location_edit")):this.setFormName("location_create"),this.route.snapshot.paramMap.has("placeOfServiceId")){var _=this.route.snapshot.paramMap.get("placeOfServiceId");this.setPlaceOfServiceId(_)}if(this.route.snapshot.paramMap.has("vendorLocationId")){var f=this.route.snapshot.paramMap.get("vendorLocationId");this.setVendorLocationId(f)}if(this.route.snapshot.paramMap.has("vendorId")){var S=this.route.snapshot.paramMap.get("vendorId");this.setVendorId(S)}if(this.route.snapshot.paramMap.has("clinicalProviderId")){var F=this.route.snapshot.paramMap.get("clinicalProviderId");this.setClinicalProviderId(F)}}validateImportData(T){return this.vm$.pipe((0,J.w)(x=>this.locationService.validateLocationExcelData(T,x.placeOfServices)))}}return A.\u0275fac=function(T){return new(T||A)(q.LFG(y.q),q.LFG(h.F0),q.LFG(h.gz),q.LFG(R.F),q.LFG(de.o),q.LFG(ye))},A.\u0275prov=q.Yz7({token:A,factory:A.\u0275fac}),A})()},6506:(De,we,M)=>{M.d(we,{t:()=>Y});var P=M(24280),E=M(60515),G=M(54004),U=M(18505),J=M(63900),ae=M(11365),b=M(70262),q=M(94650),y=M(73602),h=M(30144),R=M(71873),de=M(4523),e=M(56869),z=M(71767),O=M(39646);class X extends z.T_{constructor(w){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=w}Do(w){return this.businessProvider=w,this.serviceContext=w.serviceContext,this.loggingService=w.loggingService,this.execute(),this.response}}var Z=M(26177);class K extends X{constructor(w,T){super("ValidateMedicalRecordExcelDataAction"),this.valid=!1,this.excelData=w,this.clinicalProviders=T}preValidateAction(){const w=[];this.excelData.map((T,x)=>{w.push(T.name),this.validationContext.addRule(new Z.mi(`clinicalProviderName_${x}_is_valid}`,"Clinical Provider Is Not Valid","clinicalProvider.name",T.clinicalProvider,this.clinicalProviders,!0))}),this.validationContext.addRule(new Z.cL("nameIsUnique","Name should be unique",w,!0))}performAction(){}finish(){super.finish();const w={};let T=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(x=>{x instanceof Z.mi?x.isValid||(w[x.columnName]?w[x.columnName].newNames.includes(x.newName)||w[x.columnName].newNames.push(x.newName):w[x.columnName]={options:x.possibleValueList.map(Q=>Q.name),newNames:[x.newName]}):x instanceof Z.cL&&(x.isValid||(T=x.conflicts))})):this.valid=!0,this.response=(0,O.of)({valid:this.valid,excelData:this.excelData,conflictNames:T,unknownNames:w})}}var W=M(28234);class D extends Z.wS{constructor(w,T,x,Q,H){super(w,T,x,Q,H,!0)}}class be extends Z.ul{constructor(w,T,x,Q=!1){super(w,T,Q),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=x,this.configureRules()}configureRules(){this.rules.push(new Z.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new D("name","The medicalrecord name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class g extends X{constructor(w){super("CreateMedicalRecordAction"),this.input=w}preValidateAction(){this.validationContext.addRule(new be("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateMedicalRecord({input:this.input}).pipe((0,J.w)(w=>(0,W.of)(w.data.created)))}}class xe extends X{constructor(w){super("UpdateMedicalRecordsAction"),this.medicalRecords=w}preValidateAction(){this.validationContext.addRule(new Z.DJ("Input","Input should have values",this.medicalRecords,!0))}performAction(){this.response=this.businessProvider.data.userUpdateMedicalRecords({input:{medicalRecords:this.medicalRecords}}).pipe((0,J.w)(w=>(0,O.of)(w.data.updated)))}}class ue extends X{constructor(w,T){super("UpdateMedicalRecordAction"),this.medicalRecord=w,this.medicalRecordId=T}preValidateAction(){this.validationContext.addRule(new Z.DJ("Input","Input should have values",this.medicalRecord,!0)).addRule(new Z.xF("Id","Id should be a CUID and not null",this.medicalRecordId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateMedicalRecord({medicalRecordId:this.medicalRecordId,input:this.medicalRecord}).pipe((0,J.w)(w=>(0,O.of)(w.data.updated)))}}let Ce=(()=>{class A extends z.nH{constructor(T,x,Q){super("NotificationService.MedicalRecordBusinessProviderService",T,Q),this.data=x}createMedicalRecord(T){const x=new g(T);return x.Do(this),x.response}updateMedicalRecord(T,x){const Q=new ue(T,x);return Q.Do(this),Q.response}importMedicalRecords(T){const x=new xe(T);return x.Do(this),x.response}validateMedicalRecordExcelData(T,x){const Q=new K(T,x);return Q.Do(this),Q.response}}return A.\u0275fac=function(T){return new(T||A)(q.LFG(e.ed),q.LFG(y.q),q.LFG(z.oI))},A.\u0275prov=q.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"}),A})(),ye=(()=>{class A extends z.nH{constructor(T,x,Q){super("MedicalRecordService",Q,T),this.businessProvider=x}createMedicalRecord(T){const x=Object.fromEntries(Object.entries(T).filter(([Q,H])=>null!==H));return this.businessProvider.createMedicalRecord(x)}updateMedicalRecord(T,x){return this.businessProvider.updateMedicalRecord(T,x)}importMedicalRecords(T){return this.businessProvider.importMedicalRecords(T)}validateMedicalRecordExcelData(T,x){return this.businessProvider.validateMedicalRecordExcelData(T,x)}}return A.\u0275fac=function(T){return new(T||A)(q.LFG(Ce,8),q.LFG(Ce),q.LFG(e.ed))},A.\u0275prov=q.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"}),A})(),Y=(()=>{class A extends P.m1{constructor(T,x,Q,H,te,ge){if(super({loading:!1,medicalRecords:[],done:!1,searchQuery:"",formName:void 0,clinicalProviderId:void 0,dateFilter:void 0,paging:{limit:1e4,skip:0}}),this.data=T,this.router=x,this.route=Q,this.toast=H,this.formService=te,this.medicalRecordService=ge,this.errors$=this.select(f=>f.errors),this.loading$=this.select(f=>f.loading),this.done$=this.select(f=>f.done),this.item$=this.select(f=>f.item),this.medicalRecords$=this.select(f=>f.medicalRecords),this.clinicalProviders$=this.select(f=>f.clinicalProviders||[]),this.dateFilter$=this.select(f=>f.dateFilter),this.clinicalProviderId$=this.select(f=>f.clinicalProviderId),this.paging$=this.select(f=>f.paging),this.searchQuery$=this.select(f=>f.searchQuery),this.formName$=this.select(f=>f.formName),this.actionResult$=this.select(this.item$,this.done$,(f,S)=>({item:f,done:S}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.medicalRecords$,this.clinicalProviders$,(f,S,F,N,L,ie)=>({errors:f,loading:S,item:F,formName:N,medicalRecords:L,clinicalProviders:ie}),{debounce:!0}),this.input$=this.select(this.paging$,this.clinicalProviderId$,this.searchQuery$,this.dateFilter$,(f,S,F,N)=>({limit:f.limit,skip:f.skip,name:F,clinicalProviderId:S,dateFilter:N,total:f.total})),this.setFormName=this.updater((f,S)=>Object.assign(Object.assign({},f),{formName:S})),this.setDateFilter=this.updater((f,S)=>Object.assign(Object.assign({},f),{dateFilter:S})),this.setClinicalProviderId=this.updater((f,S)=>Object.assign(Object.assign({},f),{clinicalProviderId:S})),this.setSkip=this.updater((f,S)=>Object.assign(Object.assign({},f),{paging:Object.assign(Object.assign({},f.paging),{skip:S})})),this.setLimit=this.updater((f,S)=>Object.assign(Object.assign({},f),{paging:Object.assign(Object.assign({},f.paging),{limit:S})})),this.filterClinicalProviders=f=>this.data.userSelectClinicalProviders({input:{name:f}}).pipe((0,P._b)(S=>{let F=S.data.items;return this.patchState({clinicalProviders:F}),F},S=>this.patchState({errors:S.graphQLErrors?S.graphQLErrors:S})),(0,G.U)(S=>S.data.items)),this.addClinicalProvider=this.updater((f,S)=>Object.assign(Object.assign({},f),{clinicalProviders:f.clinicalProviders.concat(S)})),this.setItem=this.updater((f,S)=>Object.assign(Object.assign({},f),{item:S})),this.addNewMedicalRecord=this.updater((f,S)=>Object.assign(Object.assign({},f),{medicalRecords:[...f.medicalRecords,S]})),this.updateMedicalRecord=this.updater((f,S)=>Object.assign(Object.assign({},f),{medicalRecords:f.medicalRecords.map(F=>F.id===S.id?S:F)})),this.addMedicalRecords=this.updater((f,S)=>Object.assign(Object.assign({},f),{medicalRecords:f.medicalRecords.concat(S)})),this.updateMedicalRecords=this.updater((f,S)=>Object.assign(Object.assign({},f),{medicalRecords:f.medicalRecords.map(F=>S.find(L=>L.id===F.id)||F)})),this.setSearchQuery=this.updater((f,S)=>Object.assign(Object.assign({},f),{searchQuery:S})),this.loadMedicalRecordEffect=this.effect(f=>f.pipe((0,U.b)(()=>this.patchState({loading:!0})),(0,J.w)(S=>this.data.userMedicalRecord({medicalRecordId:S}).pipe((0,P._b)(F=>{this.patchState({item:F.data.item,errors:F.errors,loading:!1})},F=>this.patchState({loading:!1,errors:F.graphQLErrors?F.graphQLErrors:F})))))),this.loadMedicalRecordsEffect=this.effect(f=>f.pipe((0,U.b)(()=>this.patchState({loading:!0})),(0,ae.M)(this.input$),(0,J.w)(([S,F])=>this.data.userMedicalRecords({input:F}).pipe((0,P._b)(N=>this.patchState({paging:{limit:F.limit,skip:F.skip,total:N.data.count.total},medicalRecords:N.data.items,errors:N.errors,loading:!1}),N=>this.patchState({loading:!1,errors:N.graphQLErrors?N.graphQLErrors:N})))))),this.createMedicalRecordEffect=this.effect(f=>f.pipe((0,U.b)(()=>this.patchState({loading:!0})),(0,J.w)(S=>this.medicalRecordService.createMedicalRecord(Object.assign({},S)).pipe((0,P._b)(F=>{this.addNewMedicalRecord(F),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:F,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},F=>{F.graphQLErrors?(this.toast.error(F.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:F.graphQLErrors?F.graphQLErrors:F})):(this.toast.error(F.Message),this.formService.setErrors(F.Data))}))))),this.updateMedicalRecordEffect=this.effect(f=>f.pipe((0,U.b)(()=>this.patchState({loading:!0})),(0,ae.M)(this.item$),(0,J.w)(([S,F])=>this.medicalRecordService.updateMedicalRecord(S,S.id).pipe((0,P._b)(N=>{this.updateMedicalRecord(N),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:N,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},N=>{N.graphQLErrors?(this.toast.error(N.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:N.graphQLErrors?N.graphQLErrors:N})):(this.toast.error(N.Message),this.formService.setErrors(N.Data))}))))),this.deleteMedicalRecordEffect=this.effect(f=>f.pipe((0,U.b)(()=>this.patchState({loading:!0})),(0,ae.M)(this.item$),(0,J.w)(([S,F])=>this.data.userDeleteMedicalRecord({medicalRecordId:F.id}).pipe((0,P._b)(N=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:N.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},N=>{N.graphQLErrors?(this.toast.error(N.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:N.graphQLErrors?N.graphQLErrors:N})):(this.toast.error(N.Message),this.formService.setErrors(N.Data))}))))),this.importExcelEffect=this.effect(f=>f.pipe((0,U.b)(()=>this.patchState({loading:!0})),(0,J.w)(S=>this.medicalRecordService.importMedicalRecords(S).pipe((0,b.K)(F=>{var N;return this.toast.error(null!==(N=F.Message)&&void 0!==N?N:"Failed to save",{duration:3e3}),E.E}),(0,U.b)(F=>{const N=JSON.parse(F.created),L=JSON.parse(F.updated),ie=JSON.parse(F.failed),re=N.length+L.length+ie.length;this.addMedicalRecords(N),this.updateMedicalRecords(L),this.toast.success(`${N.length} created, ${L.length} updated, ${ie.length} failed of total ${re}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("medicalRecordId")?(this.route.snapshot.paramMap.get("medicalRecordId"),this.setFormName("medicalRecord_edit")):this.setFormName("medicalRecord_create"),this.route.snapshot.paramMap.has("clinicalProviderId")){var _=this.route.snapshot.paramMap.get("clinicalProviderId");this.setClinicalProviderId(_)}}validateImportData(T){return this.vm$.pipe((0,J.w)(x=>this.medicalRecordService.validateMedicalRecordExcelData(T,x.clinicalProviders)))}}return A.\u0275fac=function(T){return new(T||A)(q.LFG(y.q),q.LFG(h.F0),q.LFG(h.gz),q.LFG(R.F),q.LFG(de.o),q.LFG(ye))},A.\u0275prov=q.Yz7({token:A,factory:A.\u0275fac}),A})()},51194:(De,we,M)=>{M.d(we,{d:()=>Y});var P=M(24280),E=M(60515),G=M(54004),U=M(18505),J=M(63900),ae=M(11365),b=M(70262),q=M(94650),y=M(73602),h=M(30144),R=M(71873),de=M(4523),e=M(56869),z=M(71767),O=M(39646);class X extends z.T_{constructor(w){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=w}Do(w){return this.businessProvider=w,this.serviceContext=w.serviceContext,this.loggingService=w.loggingService,this.execute(),this.response}}var Z=M(26177);class K extends X{constructor(w,T,x,Q){super("ValidatePatientExcelDataAction"),this.valid=!1,this.excelData=w,this.ethnicities=T,this.genders=x,this.languages=Q}preValidateAction(){const w=[];this.excelData.map((T,x)=>{w.push(T.name),this.validationContext.addRule(new Z.mi(`ethnicityName_${x}_is_valid}`,"Ethnicity Is Not Valid","ethnicity.name",T.ethnicity,this.ethnicities,!0)),this.validationContext.addRule(new Z.mi(`genderName_${x}_is_valid}`,"Gender Is Not Valid","gender.name",T.gender,this.genders,!0)),this.validationContext.addRule(new Z.mi(`languageName_${x}_is_valid}`,"Language Is Not Valid","language.name",T.language,this.languages,!0))}),this.validationContext.addRule(new Z.cL("nameIsUnique","Name should be unique",w,!0))}performAction(){}finish(){super.finish();const w={};let T=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(x=>{x instanceof Z.mi?x.isValid||(w[x.columnName]?w[x.columnName].newNames.includes(x.newName)||w[x.columnName].newNames.push(x.newName):w[x.columnName]={options:x.possibleValueList.map(Q=>Q.name),newNames:[x.newName]}):x instanceof Z.cL&&(x.isValid||(T=x.conflicts))})):this.valid=!0,this.response=(0,O.of)({valid:this.valid,excelData:this.excelData,conflictNames:T,unknownNames:w})}}var W=M(28234);class D extends Z.wS{constructor(w,T,x,Q,H){super(w,T,x,Q,H,!0)}}class be extends Z.ul{constructor(w,T,x,Q=!1){super(w,T,Q),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=x,this.configureRules()}configureRules(){this.rules.push(new Z.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new D("name","The patient name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class g extends X{constructor(w){super("CreatePatientAction"),this.input=w}preValidateAction(){this.validationContext.addRule(new be("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreatePatient({input:this.input}).pipe((0,J.w)(w=>(0,W.of)(w.data.created)))}}class xe extends X{constructor(w){super("UpdatePatientsAction"),this.patients=w}preValidateAction(){this.validationContext.addRule(new Z.DJ("Input","Input should have values",this.patients,!0))}performAction(){this.response=this.businessProvider.data.userUpdatePatients({input:{patients:this.patients}}).pipe((0,J.w)(w=>(0,O.of)(w.data.updated)))}}class ue extends X{constructor(w,T){super("UpdatePatientAction"),this.patient=w,this.patientId=T}preValidateAction(){this.validationContext.addRule(new Z.DJ("Input","Input should have values",this.patient,!0)).addRule(new Z.xF("Id","Id should be a CUID and not null",this.patientId,!0))}performAction(){this.response=this.businessProvider.data.userUpdatePatient({patientId:this.patientId,input:this.patient}).pipe((0,J.w)(w=>(0,O.of)(w.data.updated)))}}let Ce=(()=>{class A extends z.nH{constructor(T,x,Q){super("NotificationService.PatientBusinessProviderService",T,Q),this.data=x}createPatient(T){const x=new g(T);return x.Do(this),x.response}updatePatient(T,x){const Q=new ue(T,x);return Q.Do(this),Q.response}importPatients(T){const x=new xe(T);return x.Do(this),x.response}validatePatientExcelData(T,x,Q,H){const te=new K(T,x,Q,H);return te.Do(this),te.response}}return A.\u0275fac=function(T){return new(T||A)(q.LFG(e.ed),q.LFG(y.q),q.LFG(z.oI))},A.\u0275prov=q.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"}),A})(),ye=(()=>{class A extends z.nH{constructor(T,x,Q){super("PatientService",Q,T),this.businessProvider=x}createPatient(T){var x,Q,H,te;T.notes=(null===(x=T.notes)||void 0===x?void 0:x.length)>1e3?null===(Q=T.notes)||void 0===Q?void 0:Q.substring(0,999):T.notes,T.debtorRemarks=(null===(H=T.debtorRemarks)||void 0===H?void 0:H.length)>1e3?null===(te=T.debtorRemarks)||void 0===te?void 0:te.substring(0,999):T.debtorRemarks;const ge=Object.fromEntries(Object.entries(T).filter(([C,_])=>null!==_));return this.businessProvider.createPatient(ge)}updatePatient(T,x){var Q,H,te,ge;return T.notes=(null===(Q=T.notes)||void 0===Q?void 0:Q.length)>1e3?null===(H=T.notes)||void 0===H?void 0:H.substring(0,999):T.notes,T.debtorRemarks=(null===(te=T.debtorRemarks)||void 0===te?void 0:te.length)>1e3?null===(ge=T.debtorRemarks)||void 0===ge?void 0:ge.substring(0,999):T.debtorRemarks,this.businessProvider.updatePatient(T,x)}importPatients(T){return this.businessProvider.importPatients(T)}validatePatientExcelData(T,x,Q,H){return this.businessProvider.validatePatientExcelData(T,x,Q,H)}}return A.\u0275fac=function(T){return new(T||A)(q.LFG(Ce,8),q.LFG(Ce),q.LFG(e.ed))},A.\u0275prov=q.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"}),A})(),Y=(()=>{class A extends P.m1{constructor(T,x,Q,H,te,ge){if(super({loading:!1,patients:[],done:!1,searchQuery:"",memberRegistrationNumber:void 0,formName:void 0,ethnicityId:void 0,genderId:void 0,languageId:void 0,clinicalProviderId:void 0,locationId:void 0,vendorLocationId:void 0,isAllPatients:!1,fromDate:void 0,toDate:void 0,paging:{limit:1e4,skip:0},mrn:void 0}),this.data=T,this.router=x,this.route=Q,this.toast=H,this.formService=te,this.patientService=ge,this.errors$=this.select(F=>F.errors),this.loading$=this.select(F=>F.loading),this.isAllPatients$=this.select(F=>F.isAllPatients),this.done$=this.select(F=>F.done),this.item$=this.select(F=>F.item),this.patients$=this.select(F=>F.patients),this.ethnicities$=this.select(F=>F.ethnicities||[]),this.genders$=this.select(F=>F.genders||[]),this.languages$=this.select(F=>F.languages||[]),this.clinicalProviderId$=this.select(F=>F.clinicalProviderId),this.locationId$=this.select(F=>F.locationId),this.ethnicityId$=this.select(F=>F.ethnicityId),this.genderId$=this.select(F=>F.genderId),this.languageId$=this.select(F=>F.languageId),this.paging$=this.select(F=>F.paging),this.searchQuery$=this.select(F=>F.searchQuery),this.memberRegistrationNumber$=this.select(F=>F.memberRegistrationNumber),this.fromDate$=this.select(F=>F.fromDate),this.toDate$=this.select(F=>F.toDate),this.vendorLocationId$=this.select(F=>F.vendorLocationId),this.formName$=this.select(F=>F.formName),this.mrn$=this.select(F=>F.mrn),this.actionResult$=this.select(this.item$,this.done$,(F,N)=>({item:F,done:N}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.patients$,this.ethnicities$,this.genders$,this.languages$,(F,N,L,ie,re,$,j,k)=>({errors:F,loading:N,item:L,formName:ie,patients:re,ethnicities:$,genders:j,languages:k}),{debounce:!0}),this.input$=this.select(this.paging$,this.ethnicityId$,this.genderId$,this.clinicalProviderId$,this.locationId$,this.vendorLocationId$,this.languageId$,this.searchQuery$,this.memberRegistrationNumber$,this.fromDate$,this.toDate$,this.isAllPatients$,this.mrn$,(F,N,L,ie,re,$,j,k,se,Se,Pe,me,Ae)=>({limit:F.limit,skip:F.skip,name:k,ethnicityId:N,genderId:L,languageId:j,total:F.total,clinicalProviderId:ie,locationId:re,vendorLocationId:$,memberRegistrationNumber:se,fromDate:Se,toDate:Pe,medicalRecordNumber:Ae,isAllPatients:me})),this.setFormName=this.updater((F,N)=>Object.assign(Object.assign({},F),{formName:N})),this.setEthnicityId=this.updater((F,N)=>Object.assign(Object.assign({},F),{ethnicityId:N})),this.setIsAllPatients=this.updater((F,N)=>Object.assign(Object.assign({},F),{isAllPatients:N})),this.setmedicalRecordNumber=this.updater((F,N)=>Object.assign(Object.assign({},F),{mrn:N})),this.setGenderId=this.updater((F,N)=>Object.assign(Object.assign({},F),{genderId:N})),this.setClinicalProviderId=this.updater((F,N)=>Object.assign(Object.assign({},F),{clinicalProviderId:N})),this.setLocationId=this.updater((F,N)=>Object.assign(Object.assign({},F),{locationId:N})),this.setVendorLocationId=this.updater((F,N)=>Object.assign(Object.assign({},F),{vendorLocationId:N})),this.setLanguageId=this.updater((F,N)=>Object.assign(Object.assign({},F),{languageId:N})),this.setLimit=this.updater((F,N)=>Object.assign(Object.assign({},F),{paging:Object.assign(Object.assign({},F.paging),{limit:N})})),this.setSkip=this.updater((F,N)=>Object.assign(Object.assign({},F),{paging:Object.assign(Object.assign({},F.paging),{skip:N})})),this.filterEthnicities=F=>this.data.userSelectEthnicities({input:{name:F}}).pipe((0,P._b)(N=>{let L=N.data.items;return this.patchState({ethnicities:L}),L},N=>this.patchState({errors:N.graphQLErrors?N.graphQLErrors:N})),(0,G.U)(N=>N.data.items)),this.filterGenders=F=>this.data.userSelectGenders({input:{name:F}}).pipe((0,P._b)(N=>{let L=N.data.items;return this.patchState({genders:L}),L},N=>this.patchState({errors:N.graphQLErrors?N.graphQLErrors:N})),(0,G.U)(N=>N.data.items)),this.filterLanguages=F=>this.data.userSelectLanguages({input:{name:F}}).pipe((0,P._b)(N=>{let L=N.data.items;return this.patchState({languages:L}),L},N=>this.patchState({errors:N.graphQLErrors?N.graphQLErrors:N})),(0,G.U)(N=>N.data.items)),this.addEthnicity=this.updater((F,N)=>Object.assign(Object.assign({},F),{ethnicities:F.ethnicities.concat(N)})),this.addGender=this.updater((F,N)=>Object.assign(Object.assign({},F),{genders:F.genders.concat(N)})),this.addLanguage=this.updater((F,N)=>Object.assign(Object.assign({},F),{languages:F.languages.concat(N)})),this.setItem=this.updater((F,N)=>Object.assign(Object.assign({},F),{item:N})),this.addNewPatient=this.updater((F,N)=>Object.assign(Object.assign({},F),{patients:[...F.patients,N]})),this.updatePatient=this.updater((F,N)=>Object.assign(Object.assign({},F),{patients:F.patients.map(L=>L.id===N.id?N:L)})),this.addPatients=this.updater((F,N)=>Object.assign(Object.assign({},F),{patients:F.patients.concat(N)})),this.updatePatients=this.updater((F,N)=>Object.assign(Object.assign({},F),{patients:F.patients.map(L=>N.find(re=>re.id===L.id)||L)})),this.setSearchQuery=this.updater((F,N)=>Object.assign(Object.assign({},F),{searchQuery:N})),this.setMemberRegistrationNumber=this.updater((F,N)=>Object.assign(Object.assign({},F),{memberRegistrationNumber:N})),this.setFromDate=this.updater((F,N)=>Object.assign(Object.assign({},F),{fromDate:N})),this.setToDate=this.updater((F,N)=>Object.assign(Object.assign({},F),{toDate:N})),this.loadPatientEffect=this.effect(F=>F.pipe((0,U.b)(()=>this.patchState({loading:!0})),(0,J.w)(N=>this.data.userPatient({patientId:N}).pipe((0,P._b)(L=>{this.patchState({item:L.data.item,errors:L.errors,loading:!1})},L=>this.patchState({loading:!1,errors:L.graphQLErrors?L.graphQLErrors:L})))))),this.loadPatientsEffect=this.effect(F=>F.pipe((0,U.b)(()=>this.patchState({loading:!0})),(0,ae.M)(this.input$),(0,J.w)(([N,L])=>this.data.userPatients({input:L}).pipe((0,P._b)(ie=>(console.log("Skip:::::",ie),this.patchState({paging:{limit:L.limit,skip:L.skip,total:ie.data.count.total},patients:ie.data.items,errors:ie.errors,loading:!1})),ie=>this.patchState({loading:!1,errors:ie.graphQLErrors?ie.graphQLErrors:ie})))))),this.createPatientEffect=this.effect(F=>F.pipe((0,U.b)(()=>this.patchState({loading:!0})),(0,J.w)(N=>this.patientService.createPatient(Object.assign({},N)).pipe((0,P._b)(L=>{this.addNewPatient(L),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:L,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},L=>{L.graphQLErrors?(this.toast.error(L.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:L.graphQLErrors?L.graphQLErrors:L})):(this.toast.error(L.Message),this.formService.setErrors(L.Data))}))))),this.updatePatientEffect=this.effect(F=>F.pipe((0,U.b)(()=>this.patchState({loading:!0})),(0,ae.M)(this.item$),(0,J.w)(([N,L])=>this.patientService.updatePatient(N,N.id).pipe((0,P._b)(ie=>{this.updatePatient(ie),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:ie,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},ie=>{ie.graphQLErrors?(this.toast.error(ie.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:ie.graphQLErrors?ie.graphQLErrors:ie})):(this.toast.error(ie.Message),this.formService.setErrors(ie.Data))}))))),this.deletePatientEffect=this.effect(F=>F.pipe((0,U.b)(()=>this.patchState({loading:!0})),(0,ae.M)(this.item$),(0,J.w)(([N,L])=>this.data.userDeletePatient({patientId:L.id}).pipe((0,P._b)(ie=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:ie.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},ie=>{ie.graphQLErrors?(this.toast.error(ie.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:ie.graphQLErrors?ie.graphQLErrors:ie})):(this.toast.error(ie.Message),this.formService.setErrors(ie.Data))}))))),this.importExcelEffect=this.effect(F=>F.pipe((0,U.b)(()=>this.patchState({loading:!0})),(0,J.w)(N=>this.patientService.importPatients(N).pipe((0,b.K)(L=>{var ie;return this.toast.error(null!==(ie=L.Message)&&void 0!==ie?ie:"Failed to save",{duration:3e3}),E.E}),(0,U.b)(L=>{const ie=JSON.parse(L.created),re=JSON.parse(L.updated),$=JSON.parse(L.failed),j=ie.length+re.length+$.length;this.addPatients(ie),this.updatePatients(re),this.toast.success(`${ie.length} created, ${re.length} updated, ${$.length} failed of total ${j}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("patientId")?(this.route.snapshot.paramMap.get("patientId"),this.setFormName("patient_edit")):this.setFormName("patient_create"),this.route.snapshot.paramMap.has("ethnicityId")){var _=this.route.snapshot.paramMap.get("ethnicityId");this.setEthnicityId(_)}if(this.route.snapshot.paramMap.has("genderId")){var f=this.route.snapshot.paramMap.get("genderId");this.setGenderId(f)}if(this.route.snapshot.paramMap.has("languageId")){var S=this.route.snapshot.paramMap.get("languageId");this.setLanguageId(S)}}validateImportData(T){return this.vm$.pipe((0,J.w)(x=>this.patientService.validatePatientExcelData(T,x.ethnicities,x.genders,x.languages)))}}return A.\u0275fac=function(T){return new(T||A)(q.LFG(y.q),q.LFG(h.F0),q.LFG(h.gz),q.LFG(R.F),q.LFG(de.o),q.LFG(ye))},A.\u0275prov=q.Yz7({token:A,factory:A.\u0275fac}),A})()},96236:(De,we,M)=>{M.d(we,{r:()=>A});var P=M(24280),E=M(60515),G=M(54004),U=M(18505),J=M(63900),ae=M(11365),b=M(70262),q=M(15439),y=M(94650),h=M(73602),R=M(30144),de=M(71873),e=M(4523),z=M(56869),O=M(71767),X=M(39646);class Z extends O.T_{constructor(T){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=T}Do(T){return this.businessProvider=T,this.serviceContext=T.serviceContext,this.loggingService=T.loggingService,this.execute(),this.response}}var K=M(26177);class W extends Z{constructor(T,x,Q){super("ValidatePrescriptionExcelDataAction"),this.valid=!1,this.excelData=T,this.patients=x,this.documents=Q}preValidateAction(){const T=[];this.excelData.map((x,Q)=>{T.push(x.name),this.validationContext.addRule(new K.mi(`patientName_${Q}_is_valid}`,"Patient Is Not Valid","patient.name",x.patient,this.patients,!0)),this.validationContext.addRule(new K.mi(`documentName_${Q}_is_valid}`,"Document Is Not Valid","document.name",x.document,this.documents,!0))}),this.validationContext.addRule(new K.cL("nameIsUnique","Name should be unique",T,!0))}performAction(){}finish(){super.finish();const T={};let x=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(Q=>{Q instanceof K.mi?Q.isValid||(T[Q.columnName]?T[Q.columnName].newNames.includes(Q.newName)||T[Q.columnName].newNames.push(Q.newName):T[Q.columnName]={options:Q.possibleValueList.map(H=>H.name),newNames:[Q.newName]}):Q instanceof K.cL&&(Q.isValid||(x=Q.conflicts))})):this.valid=!0,this.response=(0,X.of)({valid:this.valid,excelData:this.excelData,conflictNames:x,unknownNames:T})}}var D=M(28234);class be extends K.wS{constructor(T,x,Q,H,te){super(T,x,Q,H,te,!0)}}class g extends K.ul{constructor(T,x,Q,H=!1){super(T,x,H),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=Q,this.configureRules()}configureRules(){this.rules.push(new K.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new be("name","The prescription name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class xe extends Z{constructor(T){super("CreatePrescriptionAction"),this.input=T}preValidateAction(){this.validationContext.addRule(new g("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreatePrescription({input:this.input}).pipe((0,J.w)(T=>(0,D.of)(T.data.created)))}}class ue extends Z{constructor(T){super("UpdatePrescriptionsAction"),this.prescriptions=T}preValidateAction(){this.validationContext.addRule(new K.DJ("Input","Input should have values",this.prescriptions,!0))}performAction(){this.response=this.businessProvider.data.userUpdatePrescriptions({input:{prescriptions:this.prescriptions}}).pipe((0,J.w)(T=>(0,X.of)(T.data.updated)))}}class Ce extends Z{constructor(T,x){super("UpdatePrescriptionAction"),this.prescription=T,this.prescriptionId=x}preValidateAction(){this.validationContext.addRule(new K.DJ("Input","Input should have values",this.prescription,!0)).addRule(new K.xF("Id","Id should be a CUID and not null",this.prescriptionId,!0))}performAction(){this.response=this.businessProvider.data.userUpdatePrescription({prescriptionId:this.prescriptionId,input:this.prescription}).pipe((0,J.w)(T=>(0,X.of)(T.data.updated)))}}let ye=(()=>{class w extends O.nH{constructor(x,Q,H){super("NotificationService.PrescriptionBusinessProviderService",x,H),this.data=Q}createPrescription(x){const Q=new xe(x);return Q.Do(this),Q.response}updatePrescription(x,Q){const H=new Ce(x,Q);return H.Do(this),H.response}importPrescriptions(x){const Q=new ue(x);return Q.Do(this),Q.response}validatePrescriptionExcelData(x,Q,H){const te=new W(x,Q,H);return te.Do(this),te.response}}return w.\u0275fac=function(x){return new(x||w)(y.LFG(z.ed),y.LFG(h.q),y.LFG(O.oI))},w.\u0275prov=y.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"}),w})(),Y=(()=>{class w extends O.nH{constructor(x,Q,H){super("PrescriptionService",H,x),this.businessProvider=Q}createPrescription(x){const Q=Object.fromEntries(Object.entries(x).filter(([H,te])=>null!==te));return this.businessProvider.createPrescription(Q)}updatePrescription(x,Q){return this.businessProvider.updatePrescription(x,Q)}importPrescriptions(x){return this.businessProvider.importPrescriptions(x)}validatePrescriptionExcelData(x,Q,H){return this.businessProvider.validatePrescriptionExcelData(x,Q,H)}}return w.\u0275fac=function(x){return new(x||w)(y.LFG(ye,8),y.LFG(ye),y.LFG(z.ed))},w.\u0275prov=y.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"}),w})(),A=(()=>{class w extends P.m1{constructor(x,Q,H,te,ge,C){if(super({loading:!1,prescriptions:[],done:!1,searchQuery:"",formName:void 0,patientId:void 0,documentId:void 0,paging:{limit:1e4,skip:0}}),this.data=x,this.router=Q,this.route=H,this.toast=te,this.formService=ge,this.prescriptionService=C,this.errors$=this.select(_=>_.errors),this.loading$=this.select(_=>_.loading),this.done$=this.select(_=>_.done),this.item$=this.select(_=>_.item),this.prescriptions$=this.select(_=>{const f=_.prescriptions;return console.log("-----------------"),f.sort((S,F)=>q(S.createdAt).isBefore(q(F.createdAt))?1:-1),f}),this.patients$=this.select(_=>_.patients||[]),this.documents$=this.select(_=>_.documents||[]),this.patientId$=this.select(_=>_.patientId),this.documentId$=this.select(_=>_.documentId),this.paging$=this.select(_=>_.paging),this.searchQuery$=this.select(_=>_.searchQuery),this.formName$=this.select(_=>_.formName),this.actionResult$=this.select(this.item$,this.done$,(_,f)=>({item:_,done:f}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.prescriptions$,this.patients$,this.documents$,(_,f,S,F,N,L,ie)=>({errors:_,loading:f,item:S,formName:F,prescriptions:N,patients:L,documents:ie}),{debounce:!0}),this.input$=this.select(this.paging$,this.patientId$,this.documentId$,this.searchQuery$,(_,f,S,F)=>({limit:_.limit,skip:_.skip,name:F,patientId:f,documentId:S,total:_.total})),this.setFormName=this.updater((_,f)=>Object.assign(Object.assign({},_),{formName:f})),this.setPatientId=this.updater((_,f)=>Object.assign(Object.assign({},_),{patientId:f})),this.setDocumentId=this.updater((_,f)=>Object.assign(Object.assign({},_),{documentId:f})),this.setSkip=this.updater((_,f)=>Object.assign(Object.assign({},_),{paging:Object.assign(Object.assign({},_.paging),{skip:f})})),this.setLimit=this.updater((_,f)=>Object.assign(Object.assign({},_),{paging:Object.assign(Object.assign({},_.paging),{limit:f})})),this.filterPatients=_=>this.data.userSelectPatients({input:{name:_}}).pipe((0,P._b)(f=>{const S=f.data.items;return this.patchState({patients:S}),S},f=>this.patchState({errors:f.graphQLErrors?f.graphQLErrors:f})),(0,G.U)(f=>f.data.items)),this.filterDocuments=_=>this.data.userSelectDocuments({input:{name:_}}).pipe((0,P._b)(f=>{const S=f.data.items;return this.patchState({documents:S}),S},f=>this.patchState({errors:f.graphQLErrors?f.graphQLErrors:f})),(0,G.U)(f=>f.data.items)),this.addPatient=this.updater((_,f)=>Object.assign(Object.assign({},_),{patients:_.patients.concat(f)})),this.addDocument=this.updater((_,f)=>Object.assign(Object.assign({},_),{documents:_.documents.concat(f)})),this.setItem=this.updater((_,f)=>Object.assign(Object.assign({},_),{item:f})),this.addNewPrescription=this.updater((_,f)=>Object.assign(Object.assign({},_),{prescriptions:[..._.prescriptions,f]})),this.updatePrescription=this.updater((_,f)=>Object.assign(Object.assign({},_),{prescriptions:_.prescriptions.map(S=>S.id===f.id?f:S)})),this.addPrescriptions=this.updater((_,f)=>Object.assign(Object.assign({},_),{prescriptions:_.prescriptions.concat(f)})),this.updatePrescriptions=this.updater((_,f)=>Object.assign(Object.assign({},_),{prescriptions:_.prescriptions.map(S=>f.find(N=>N.id===S.id)||S)})),this.setSearchQuery=this.updater((_,f)=>Object.assign(Object.assign({},_),{searchQuery:f})),this.loadPrescriptionEffect=this.effect(_=>_.pipe((0,U.b)(()=>this.patchState({loading:!0})),(0,J.w)(f=>this.data.userPrescription({prescriptionId:f}).pipe((0,P._b)(S=>{this.patchState({item:S.data.item,errors:S.errors,loading:!1})},S=>this.patchState({loading:!1,errors:S.graphQLErrors?S.graphQLErrors:S})))))),this.loadPrescriptionsEffect=this.effect(_=>_.pipe((0,U.b)(()=>this.patchState({loading:!0})),(0,ae.M)(this.input$),(0,J.w)(([f,S])=>this.data.userPrescriptions({input:S}).pipe((0,P._b)(F=>this.patchState({paging:{limit:S.limit,skip:S.skip,total:F.data.count.total},prescriptions:F.data.items,errors:F.errors,loading:!1}),F=>this.patchState({loading:!1,errors:F.graphQLErrors?F.graphQLErrors:F})))))),this.createPrescriptionEffect=this.effect(_=>_.pipe((0,U.b)(()=>this.patchState({loading:!0})),(0,J.w)(f=>this.prescriptionService.createPrescription(Object.assign({},f)).pipe((0,P._b)(S=>{this.addNewPrescription(S),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:S,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},S=>{S.graphQLErrors?(this.toast.error(S.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:S.graphQLErrors?S.graphQLErrors:S})):(this.toast.error(S.Message),this.formService.setErrors(S.Data))}))))),this.updatePrescriptionEffect=this.effect(_=>_.pipe((0,U.b)(()=>this.patchState({loading:!0})),(0,ae.M)(this.item$),(0,J.w)(([f,S])=>this.prescriptionService.updatePrescription(f,f.id).pipe((0,P._b)(F=>{this.updatePrescription(F),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:F,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},F=>{F.graphQLErrors?(this.toast.error(F.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:F.graphQLErrors?F.graphQLErrors:F})):(this.toast.error(F.Message),this.formService.setErrors(F.Data))}))))),this.deletePrescriptionEffect=this.effect(_=>_.pipe((0,U.b)(()=>this.patchState({loading:!0})),(0,ae.M)(this.item$),(0,J.w)(([f,S])=>this.data.userDeletePrescription({prescriptionId:S.id}).pipe((0,P._b)(F=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:F.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},F=>{F.graphQLErrors?(this.toast.error(F.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:F.graphQLErrors?F.graphQLErrors:F})):(this.toast.error(F.Message),this.formService.setErrors(F.Data))}))))),this.importExcelEffect=this.effect(_=>_.pipe((0,U.b)(()=>this.patchState({loading:!0})),(0,J.w)(f=>this.prescriptionService.importPrescriptions(f).pipe((0,b.K)(S=>{var F;return this.toast.error(null!==(F=S.Message)&&void 0!==F?F:"Failed to save",{duration:3e3}),E.E}),(0,U.b)(S=>{const F=JSON.parse(S.created),N=JSON.parse(S.updated),L=JSON.parse(S.failed),ie=F.length+N.length+L.length;this.addPrescriptions(F),this.updatePrescriptions(N),this.toast.success(`${F.length} created, ${N.length} updated, ${L.length} failed of total ${ie}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("prescriptionId")?(this.route.snapshot.paramMap.get("prescriptionId"),this.setFormName("prescription_edit")):this.setFormName("prescription_create"),this.route.snapshot.paramMap.has("patientId")){const _=this.route.snapshot.paramMap.get("patientId");this.setPatientId(_)}if(this.route.snapshot.paramMap.has("documentId")){const _=this.route.snapshot.paramMap.get("documentId");this.setDocumentId(_)}}validateImportData(x){return this.vm$.pipe((0,J.w)(Q=>this.prescriptionService.validatePrescriptionExcelData(x,Q.patients,Q.documents)))}}return w.\u0275fac=function(x){return new(x||w)(y.LFG(h.q),y.LFG(R.F0),y.LFG(R.gz),y.LFG(de.F),y.LFG(e.o),y.LFG(Y))},w.\u0275prov=y.Yz7({token:w,factory:w.\u0275fac}),w})()},44288:(De,we,M)=>{M.d(we,{I:()=>ye});var P=M(24280),E=M(60515),G=M(18505),U=M(63900),J=M(11365),ae=M(70262),b=M(94650),q=M(73602),y=M(30144),h=M(71873),R=M(4523),de=M(56869),e=M(71767),z=M(39646);class O extends e.T_{constructor(A){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=A}Do(A){return this.businessProvider=A,this.serviceContext=A.serviceContext,this.loggingService=A.loggingService,this.execute(),this.response}}var X=M(26177);class Z extends O{constructor(A){super("ValidateRecommendedOrderExcelDataAction"),this.valid=!1,this.excelData=A}preValidateAction(){const A=[];this.excelData.map((w,T)=>{A.push(w.name)}),this.validationContext.addRule(new X.cL("nameIsUnique","Name should be unique",A,!0))}performAction(){}finish(){super.finish();const A={};let w=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(T=>{T instanceof X.mi?T.isValid||(A[T.columnName]?A[T.columnName].newNames.includes(T.newName)||A[T.columnName].newNames.push(T.newName):A[T.columnName]={options:T.possibleValueList.map(x=>x.name),newNames:[T.newName]}):T instanceof X.cL&&(T.isValid||(w=T.conflicts))})):this.valid=!0,this.response=(0,z.of)({valid:this.valid,excelData:this.excelData,conflictNames:w,unknownNames:A})}}var K=M(28234);class W extends X.wS{constructor(A,w,T,x,Q){super(A,w,T,x,Q,!0)}}class D extends X.ul{constructor(A,w,T,x=!1){super(A,w,x),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=T,this.configureRules()}configureRules(){this.rules.push(new X.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new W("name","The recommendedorder name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class be extends O{constructor(A){super("CreateRecommendedOrderAction"),this.input=A}preValidateAction(){this.validationContext.addRule(new D("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateRecommendedOrder({input:this.input}).pipe((0,U.w)(A=>(0,K.of)(A.data.created)))}}class g extends O{constructor(A){super("UpdateRecommendedOrdersAction"),this.recommendedOrders=A}preValidateAction(){this.validationContext.addRule(new X.DJ("Input","Input should have values",this.recommendedOrders,!0))}performAction(){this.response=this.businessProvider.data.userUpdateRecommendedOrders({input:{recommendedOrders:this.recommendedOrders}}).pipe((0,U.w)(A=>(0,z.of)(A.data.updated)))}}class xe extends O{constructor(A,w){super("UpdateRecommendedOrderAction"),this.recommendedOrder=A,this.recommendedOrderId=w}preValidateAction(){this.validationContext.addRule(new X.DJ("Input","Input should have values",this.recommendedOrder,!0)).addRule(new X.xF("Id","Id should be a CUID and not null",this.recommendedOrderId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateRecommendedOrder({recommendedOrderId:this.recommendedOrderId,input:this.recommendedOrder}).pipe((0,U.w)(A=>(0,z.of)(A.data.updated)))}}let ue=(()=>{class Y extends e.nH{constructor(w,T,x){super("NotificationService.RecommendedOrderBusinessProviderService",w,x),this.data=T}createRecommendedOrder(w){const T=new be(w);return T.Do(this),T.response}updateRecommendedOrder(w,T){const x=new xe(w,T);return x.Do(this),x.response}importRecommendedOrders(w){const T=new g(w);return T.Do(this),T.response}validateRecommendedOrderExcelData(w){const T=new Z(w);return T.Do(this),T.response}}return Y.\u0275fac=function(w){return new(w||Y)(b.LFG(de.ed),b.LFG(q.q),b.LFG(e.oI))},Y.\u0275prov=b.Yz7({token:Y,factory:Y.\u0275fac,providedIn:"root"}),Y})(),Ce=(()=>{class Y extends e.nH{constructor(w,T,x){super("RecommendedOrderService",x,w),this.businessProvider=T}createRecommendedOrder(w){return this.businessProvider.createRecommendedOrder(w)}updateRecommendedOrder(w,T){return this.businessProvider.updateRecommendedOrder(w,T)}importRecommendedOrders(w){return this.businessProvider.importRecommendedOrders(w)}validateRecommendedOrderExcelData(w){return this.businessProvider.validateRecommendedOrderExcelData(w)}}return Y.\u0275fac=function(w){return new(w||Y)(b.LFG(ue,8),b.LFG(ue),b.LFG(de.ed))},Y.\u0275prov=b.Yz7({token:Y,factory:Y.\u0275fac,providedIn:"root"}),Y})(),ye=(()=>{class Y extends P.m1{constructor(w,T,x,Q,H,te){super({loading:!1,recommendedOrders:[],done:!1,searchQuery:"",formName:void 0,paging:{limit:1e4,skip:0}}),this.data=w,this.router=T,this.route=x,this.toast=Q,this.formService=H,this.recommendedOrderService=te,this.errors$=this.select(C=>C.errors),this.loading$=this.select(C=>C.loading),this.done$=this.select(C=>C.done),this.item$=this.select(C=>C.item),this.recommendedOrders$=this.select(C=>C.recommendedOrders),this.paging$=this.select(C=>C.paging),this.searchQuery$=this.select(C=>C.searchQuery),this.formName$=this.select(C=>C.formName),this.actionResult$=this.select(this.item$,this.done$,(C,_)=>({item:C,done:_}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.recommendedOrders$,(C,_,f,S,F)=>({errors:C,loading:_,item:f,formName:S,recommendedOrders:F}),{debounce:!0}),this.input$=this.select(this.paging$,this.searchQuery$,(C,_)=>({limit:C.limit,skip:C.skip,name:_,total:C.total})),this.setFormName=this.updater((C,_)=>Object.assign(Object.assign({},C),{formName:_})),this.setItem=this.updater((C,_)=>Object.assign(Object.assign({},C),{item:_})),this.addNewRecommendedOrder=this.updater((C,_)=>Object.assign(Object.assign({},C),{recommendedOrders:[...C.recommendedOrders,_]})),this.updateRecommendedOrder=this.updater((C,_)=>Object.assign(Object.assign({},C),{recommendedOrders:C.recommendedOrders.map(f=>f.id===_.id?_:f)})),this.addRecommendedOrders=this.updater((C,_)=>Object.assign(Object.assign({},C),{recommendedOrders:C.recommendedOrders.concat(_)})),this.updateRecommendedOrders=this.updater((C,_)=>Object.assign(Object.assign({},C),{recommendedOrders:C.recommendedOrders.map(f=>_.find(F=>F.id===f.id)||f)})),this.setSearchQuery=this.updater((C,_)=>Object.assign(Object.assign({},C),{searchQuery:_})),this.loadRecommendedOrderEffect=this.effect(C=>C.pipe((0,G.b)(()=>this.patchState({loading:!0})),(0,U.w)(_=>this.data.userRecommendedOrder({recommendedOrderId:_}).pipe((0,P._b)(f=>{this.patchState({item:f.data.item,errors:f.errors,loading:!1})},f=>this.patchState({loading:!1,errors:f.graphQLErrors?f.graphQLErrors:f})))))),this.loadRecommendedOrdersEffect=this.effect(C=>C.pipe((0,G.b)(()=>this.patchState({loading:!0})),(0,J.M)(this.input$),(0,U.w)(([_,f])=>this.data.userRecommendedOrders({input:f}).pipe((0,P._b)(S=>this.patchState({paging:{limit:f.limit,skip:f.skip,total:S.data.count.total},recommendedOrders:S.data.items,errors:S.errors,loading:!1}),S=>this.patchState({loading:!1,errors:S.graphQLErrors?S.graphQLErrors:S})))))),this.createRecommendedOrderEffect=this.effect(C=>C.pipe((0,G.b)(()=>this.patchState({loading:!0})),(0,U.w)(_=>this.recommendedOrderService.createRecommendedOrder(Object.assign({},_)).pipe((0,P._b)(f=>{this.addNewRecommendedOrder(f),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:f,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},f=>{f.graphQLErrors?(this.toast.error(f.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:f.graphQLErrors?f.graphQLErrors:f})):(this.toast.error(f.Message),this.formService.setErrors(f.Data))}))))),this.updateRecommendedOrderEffect=this.effect(C=>C.pipe((0,G.b)(()=>this.patchState({loading:!0})),(0,J.M)(this.item$),(0,U.w)(([_,f])=>this.recommendedOrderService.updateRecommendedOrder(_,_.id).pipe((0,P._b)(S=>{this.updateRecommendedOrder(S),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:S,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},S=>{S.graphQLErrors?(this.toast.error(S.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:S.graphQLErrors?S.graphQLErrors:S})):(this.toast.error(S.Message),this.formService.setErrors(S.Data))}))))),this.deleteRecommendedOrderEffect=this.effect(C=>C.pipe((0,G.b)(()=>this.patchState({loading:!0})),(0,J.M)(this.item$),(0,U.w)(([_,f])=>this.data.userDeleteRecommendedOrder({recommendedOrderId:f.id}).pipe((0,P._b)(S=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:S.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},S=>{S.graphQLErrors?(this.toast.error(S.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:S.graphQLErrors?S.graphQLErrors:S})):(this.toast.error(S.Message),this.formService.setErrors(S.Data))}))))),this.importExcelEffect=this.effect(C=>C.pipe((0,G.b)(()=>this.patchState({loading:!0})),(0,U.w)(_=>this.recommendedOrderService.importRecommendedOrders(_).pipe((0,ae.K)(f=>{var S;return this.toast.error(null!==(S=f.Message)&&void 0!==S?S:"Failed to save",{duration:3e3}),E.E}),(0,G.b)(f=>{const S=JSON.parse(f.created),F=JSON.parse(f.updated),N=JSON.parse(f.failed),L=S.length+F.length+N.length;this.addRecommendedOrders(S),this.updateRecommendedOrders(F),this.toast.success(`${S.length} created, ${F.length} updated, ${N.length} failed of total ${L}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("recommendedOrderId")?(this.route.snapshot.paramMap.get("recommendedOrderId"),this.setFormName("recommendedOrder_edit")):this.setFormName("recommendedOrder_create")}validateImportData(w){return this.vm$.pipe((0,U.w)(T=>this.recommendedOrderService.validateRecommendedOrderExcelData(w)))}}return Y.\u0275fac=function(w){return new(w||Y)(b.LFG(q.q),b.LFG(y.F0),b.LFG(y.gz),b.LFG(h.F),b.LFG(R.o),b.LFG(Ce))},Y.\u0275prov=b.Yz7({token:Y,factory:Y.\u0275fac}),Y})()},62336:(De,we,M)=>{M.d(we,{J:()=>Y});var P=M(24280),E=M(60515),G=M(54004),U=M(18505),J=M(63900),ae=M(11365),b=M(70262),q=M(94650),y=M(73602),h=M(30144),R=M(71873),de=M(4523),e=M(56869),z=M(71767),O=M(39646);class X extends z.T_{constructor(w){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=w}Do(w){return this.businessProvider=w,this.serviceContext=w.serviceContext,this.loggingService=w.loggingService,this.execute(),this.response}}var Z=M(26177);class K extends X{constructor(w,T){super("ValidateReviewExcelDataAction"),this.valid=!1,this.excelData=w,this.clinicalProviders=T}preValidateAction(){const w=[];this.excelData.map((T,x)=>{w.push(T.name),this.validationContext.addRule(new Z.mi(`clinicalProviderName_${x}_is_valid}`,"Clinical Provider Is Not Valid","clinicalProvider.name",T.clinicalProvider,this.clinicalProviders,!0))}),this.validationContext.addRule(new Z.cL("nameIsUnique","Name should be unique",w,!0))}performAction(){}finish(){super.finish();const w={};let T=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(x=>{x instanceof Z.mi?x.isValid||(w[x.columnName]?w[x.columnName].newNames.includes(x.newName)||w[x.columnName].newNames.push(x.newName):w[x.columnName]={options:x.possibleValueList.map(Q=>Q.name),newNames:[x.newName]}):x instanceof Z.cL&&(x.isValid||(T=x.conflicts))})):this.valid=!0,this.response=(0,O.of)({valid:this.valid,excelData:this.excelData,conflictNames:T,unknownNames:w})}}var W=M(28234);class D extends Z.wS{constructor(w,T,x,Q,H){super(w,T,x,Q,H,!0)}}class be extends Z.ul{constructor(w,T,x,Q=!1){super(w,T,Q),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=x,this.configureRules()}configureRules(){this.rules.push(new Z.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new D("name","The review name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class g extends X{constructor(w){super("CreateReviewAction"),this.input=w}preValidateAction(){this.validationContext.addRule(new be("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateReview({input:this.input}).pipe((0,J.w)(w=>(0,W.of)(w.data.created)))}}class xe extends X{constructor(w){super("UpdateReviewsAction"),this.reviews=w}preValidateAction(){this.validationContext.addRule(new Z.DJ("Input","Input should have values",this.reviews,!0))}performAction(){this.response=this.businessProvider.data.userUpdateReviews({input:{reviews:this.reviews}}).pipe((0,J.w)(w=>(0,O.of)(w.data.updated)))}}class ue extends X{constructor(w,T){super("UpdateReviewAction"),this.review=w,this.reviewId=T}preValidateAction(){this.validationContext.addRule(new Z.DJ("Input","Input should have values",this.review,!0)).addRule(new Z.xF("Id","Id should be a CUID and not null",this.reviewId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateReview({reviewId:this.reviewId,input:this.review}).pipe((0,J.w)(w=>(0,O.of)(w.data.updated)))}}let Ce=(()=>{class A extends z.nH{constructor(T,x,Q){super("NotificationService.ReviewBusinessProviderService",T,Q),this.data=x}createReview(T){const x=new g(T);return x.Do(this),x.response}updateReview(T,x){const Q=new ue(T,x);return Q.Do(this),Q.response}importReviews(T){const x=new xe(T);return x.Do(this),x.response}validateReviewExcelData(T,x){const Q=new K(T,x);return Q.Do(this),Q.response}}return A.\u0275fac=function(T){return new(T||A)(q.LFG(e.ed),q.LFG(y.q),q.LFG(z.oI))},A.\u0275prov=q.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"}),A})(),ye=(()=>{class A extends z.nH{constructor(T,x,Q){super("ReviewService",Q,T),this.businessProvider=x}createReview(T){const x=Object.fromEntries(Object.entries(T).filter(([Q,H])=>null!==H));return this.businessProvider.createReview(x)}updateReview(T,x){return this.businessProvider.updateReview(T,x)}importReviews(T){return this.businessProvider.importReviews(T)}validateReviewExcelData(T,x){return this.businessProvider.validateReviewExcelData(T,x)}}return A.\u0275fac=function(T){return new(T||A)(q.LFG(Ce,8),q.LFG(Ce),q.LFG(e.ed))},A.\u0275prov=q.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"}),A})(),Y=(()=>{class A extends P.m1{constructor(T,x,Q,H,te,ge){if(super({loading:!1,reviews:[],done:!1,searchQuery:"",formName:void 0,clinicalProviderId:void 0,paging:{limit:1e4,skip:0}}),this.data=T,this.router=x,this.route=Q,this.toast=H,this.formService=te,this.reviewService=ge,this.errors$=this.select(f=>f.errors),this.loading$=this.select(f=>f.loading),this.done$=this.select(f=>f.done),this.item$=this.select(f=>f.item),this.reviews$=this.select(f=>f.reviews),this.clinicalProviders$=this.select(f=>f.clinicalProviders||[]),this.clinicalProviderId$=this.select(f=>f.clinicalProviderId),this.paging$=this.select(f=>f.paging),this.searchQuery$=this.select(f=>f.searchQuery),this.formName$=this.select(f=>f.formName),this.actionResult$=this.select(this.item$,this.done$,(f,S)=>({item:f,done:S}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.reviews$,this.clinicalProviders$,(f,S,F,N,L,ie)=>({errors:f,loading:S,item:F,formName:N,reviews:L,clinicalProviders:ie}),{debounce:!0}),this.input$=this.select(this.paging$,this.clinicalProviderId$,this.searchQuery$,(f,S,F)=>({limit:f.limit,skip:f.skip,name:F,clinicalProviderId:S,total:f.total})),this.setFormName=this.updater((f,S)=>Object.assign(Object.assign({},f),{formName:S})),this.setClinicalProviderId=this.updater((f,S)=>Object.assign(Object.assign({},f),{clinicalProviderId:S})),this.filterClinicalProviders=f=>this.data.userSelectClinicalProviders({input:{name:f}}).pipe((0,P._b)(S=>{let F=S.data.items;return this.patchState({clinicalProviders:F}),F},S=>this.patchState({errors:S.graphQLErrors?S.graphQLErrors:S})),(0,G.U)(S=>S.data.items)),this.addClinicalProvider=this.updater((f,S)=>Object.assign(Object.assign({},f),{clinicalProviders:f.clinicalProviders.concat(S)})),this.setItem=this.updater((f,S)=>Object.assign(Object.assign({},f),{item:S})),this.addNewReview=this.updater((f,S)=>{if(S.parentId){let F={};return f.reviews.forEach(N=>{N.id==S.parentId&&(N.childrenReviews.push(N),F=N)}),Object.assign(Object.assign({},f),{reviews:[...f.reviews,F]})}return Object.assign(Object.assign({},f),{reviews:[...f.reviews,S]})}),this.updateReview=this.updater((f,S)=>Object.assign(Object.assign({},f),{reviews:f.reviews.map(F=>F.id===S.id?S:F)})),this.addReviews=this.updater((f,S)=>Object.assign(Object.assign({},f),{reviews:f.reviews.concat(S)})),this.updateReviews=this.updater((f,S)=>Object.assign(Object.assign({},f),{reviews:f.reviews.map(F=>S.find(L=>L.id===F.id)||F)})),this.setSearchQuery=this.updater((f,S)=>Object.assign(Object.assign({},f),{searchQuery:S})),this.loadReviewEffect=this.effect(f=>f.pipe((0,U.b)(()=>this.patchState({loading:!0})),(0,J.w)(S=>this.data.userReview({reviewId:S}).pipe((0,P._b)(F=>{this.patchState({item:F.data.item,errors:F.errors,loading:!1})},F=>this.patchState({loading:!1,errors:F.graphQLErrors?F.graphQLErrors:F})))))),this.loadReviewsEffect=this.effect(f=>f.pipe((0,U.b)(()=>this.patchState({loading:!0})),(0,ae.M)(this.input$),(0,J.w)(([S,F])=>this.data.userReviews({input:F}).pipe((0,P._b)(N=>(console.log("userReviews",N.data.items),this.patchState({paging:{limit:F.limit,skip:F.skip,total:N.data.count.total},reviews:N.data.items,errors:N.errors,loading:!1})),N=>this.patchState({loading:!1,errors:N.graphQLErrors?N.graphQLErrors:N})))))),this.createReviewEffect=this.effect(f=>f.pipe((0,U.b)(()=>this.patchState({loading:!0})),(0,J.w)(S=>this.reviewService.createReview(Object.assign({},S)).pipe((0,P._b)(F=>{this.addNewReview(F),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:F,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},F=>{F.graphQLErrors?(this.toast.error(F.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:F.graphQLErrors?F.graphQLErrors:F})):(this.toast.error(F.Message),this.formService.setErrors(F.Data))}))))),this.updateReviewEffect=this.effect(f=>f.pipe((0,U.b)(()=>this.patchState({loading:!0})),(0,ae.M)(this.item$),(0,J.w)(([S,F])=>this.reviewService.updateReview(S,S.id).pipe((0,P._b)(N=>{this.updateReview(N),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:N,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},N=>{N.graphQLErrors?(this.toast.error(N.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:N.graphQLErrors?N.graphQLErrors:N})):(this.toast.error(N.Message),this.formService.setErrors(N.Data))}))))),this.deleteReviewEffect=this.effect(f=>f.pipe((0,U.b)(()=>this.patchState({loading:!0})),(0,ae.M)(this.item$),(0,J.w)(([S,F])=>this.data.userDeleteReview({reviewId:F.id}).pipe((0,P._b)(N=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:N.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},N=>{N.graphQLErrors?(this.toast.error(N.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:N.graphQLErrors?N.graphQLErrors:N})):(this.toast.error(N.Message),this.formService.setErrors(N.Data))}))))),this.importExcelEffect=this.effect(f=>f.pipe((0,U.b)(()=>this.patchState({loading:!0})),(0,J.w)(S=>this.reviewService.importReviews(S).pipe((0,b.K)(F=>{var N;return this.toast.error(null!==(N=F.Message)&&void 0!==N?N:"Failed to save",{duration:3e3}),E.E}),(0,U.b)(F=>{const N=JSON.parse(F.created),L=JSON.parse(F.updated),ie=JSON.parse(F.failed),re=N.length+L.length+ie.length;this.addReviews(N),this.updateReviews(L),this.toast.success(`${N.length} created, ${L.length} updated, ${ie.length} failed of total ${re}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("reviewId")?(this.route.snapshot.paramMap.get("reviewId"),this.setFormName("review_edit")):this.setFormName("review_create"),this.route.snapshot.paramMap.has("clinicalProviderId")){var _=this.route.snapshot.paramMap.get("clinicalProviderId");this.setClinicalProviderId(_)}}validateImportData(T){return this.vm$.pipe((0,J.w)(x=>this.reviewService.validateReviewExcelData(T,x.clinicalProviders)))}}return A.\u0275fac=function(T){return new(T||A)(q.LFG(y.q),q.LFG(h.F0),q.LFG(h.gz),q.LFG(R.F),q.LFG(de.o),q.LFG(ye))},A.\u0275prov=q.Yz7({token:A,factory:A.\u0275fac}),A})()},53783:(De,we,M)=>{M.d(we,{T:()=>ye});var P=M(24280),E=M(60515),G=M(18505),U=M(63900),J=M(11365),ae=M(70262),b=M(94650),q=M(73602),y=M(30144),h=M(71873),R=M(4523),de=M(56869),e=M(71767),z=M(39646);class O extends e.T_{constructor(A){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=A}Do(A){return this.businessProvider=A,this.serviceContext=A.serviceContext,this.loggingService=A.loggingService,this.execute(),this.response}}var X=M(26177);class Z extends O{constructor(A){super("ValidateSpecialtyExcelDataAction"),this.valid=!1,this.excelData=A}preValidateAction(){const A=[];this.excelData.map((w,T)=>{A.push(w.name)}),this.validationContext.addRule(new X.cL("nameIsUnique","Name should be unique",A,!0))}performAction(){}finish(){super.finish();const A={};let w=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(T=>{T instanceof X.mi?T.isValid||(A[T.columnName]?A[T.columnName].newNames.includes(T.newName)||A[T.columnName].newNames.push(T.newName):A[T.columnName]={options:T.possibleValueList.map(x=>x.name),newNames:[T.newName]}):T instanceof X.cL&&(T.isValid||(w=T.conflicts))})):this.valid=!0,this.response=(0,z.of)({valid:this.valid,excelData:this.excelData,conflictNames:w,unknownNames:A})}}var K=M(28234);class W extends X.wS{constructor(A,w,T,x,Q){super(A,w,T,x,Q,!0)}}class D extends X.ul{constructor(A,w,T,x=!1){super(A,w,x),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=T,this.configureRules()}configureRules(){this.rules.push(new X.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new W("name","The specialty name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class be extends O{constructor(A){super("CreateSpecialtyAction"),this.input=A}preValidateAction(){this.validationContext.addRule(new D("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateSpecialty({input:this.input}).pipe((0,U.w)(A=>(0,K.of)(A.data.created)))}}class g extends O{constructor(A){super("UpdateSpecialtiesAction"),this.specialties=A}preValidateAction(){this.validationContext.addRule(new X.DJ("Input","Input should have values",this.specialties,!0))}performAction(){this.response=this.businessProvider.data.userUpdateSpecialties({input:{specialties:this.specialties}}).pipe((0,U.w)(A=>(0,z.of)(A.data.updated)))}}class xe extends O{constructor(A,w){super("UpdateSpecialtyAction"),this.specialty=A,this.specialtyId=w}preValidateAction(){this.validationContext.addRule(new X.DJ("Input","Input should have values",this.specialty,!0)).addRule(new X.xF("Id","Id should be a CUID and not null",this.specialtyId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateSpecialty({specialtyId:this.specialtyId,input:this.specialty}).pipe((0,U.w)(A=>(0,z.of)(A.data.updated)))}}let ue=(()=>{class Y extends e.nH{constructor(w,T,x){super("NotificationService.SpecialtyBusinessProviderService",w,x),this.data=T}createSpecialty(w){const T=new be(w);return T.Do(this),T.response}updateSpecialty(w,T){const x=new xe(w,T);return x.Do(this),x.response}importSpecialties(w){const T=new g(w);return T.Do(this),T.response}validateSpecialtyExcelData(w){const T=new Z(w);return T.Do(this),T.response}}return Y.\u0275fac=function(w){return new(w||Y)(b.LFG(de.ed),b.LFG(q.q),b.LFG(e.oI))},Y.\u0275prov=b.Yz7({token:Y,factory:Y.\u0275fac,providedIn:"root"}),Y})(),Ce=(()=>{class Y extends e.nH{constructor(w,T,x){super("SpecialtyService",x,w),this.businessProvider=T}createSpecialty(w){const T=Object.fromEntries(Object.entries(w).filter(([x,Q])=>null!==Q));return this.businessProvider.createSpecialty(T)}updateSpecialty(w,T){return this.businessProvider.updateSpecialty(w,T)}importSpecialties(w){return this.businessProvider.importSpecialties(w)}validateSpecialtyExcelData(w){return this.businessProvider.validateSpecialtyExcelData(w)}}return Y.\u0275fac=function(w){return new(w||Y)(b.LFG(ue,8),b.LFG(ue),b.LFG(de.ed))},Y.\u0275prov=b.Yz7({token:Y,factory:Y.\u0275fac,providedIn:"root"}),Y})(),ye=(()=>{class Y extends P.m1{constructor(w,T,x,Q,H,te){super({loading:!1,specialties:[],done:!1,searchQuery:"",formName:void 0,paging:{limit:1e4,skip:0}}),this.data=w,this.router=T,this.route=x,this.toast=Q,this.formService=H,this.specialtyService=te,this.errors$=this.select(C=>C.errors),this.loading$=this.select(C=>C.loading),this.done$=this.select(C=>C.done),this.item$=this.select(C=>C.item),this.specialties$=this.select(C=>C.specialties),this.paging$=this.select(C=>C.paging),this.searchQuery$=this.select(C=>C.searchQuery),this.formName$=this.select(C=>C.formName),this.actionResult$=this.select(this.item$,this.done$,(C,_)=>({item:C,done:_}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.specialties$,(C,_,f,S,F)=>({errors:C,loading:_,item:f,formName:S,specialties:F}),{debounce:!0}),this.input$=this.select(this.paging$,this.searchQuery$,(C,_)=>({limit:C.limit,skip:C.skip,name:_,total:C.total})),this.setFormName=this.updater((C,_)=>Object.assign(Object.assign({},C),{formName:_})),this.setItem=this.updater((C,_)=>Object.assign(Object.assign({},C),{item:_})),this.addNewSpecialty=this.updater((C,_)=>Object.assign(Object.assign({},C),{specialties:[...C.specialties,_]})),this.updateSpecialty=this.updater((C,_)=>Object.assign(Object.assign({},C),{specialties:C.specialties.map(f=>f.id===_.id?_:f)})),this.addSpecialties=this.updater((C,_)=>Object.assign(Object.assign({},C),{specialties:C.specialties.concat(_)})),this.updateSpecialties=this.updater((C,_)=>Object.assign(Object.assign({},C),{specialties:C.specialties.map(f=>_.find(F=>F.id===f.id)||f)})),this.setSearchQuery=this.updater((C,_)=>Object.assign(Object.assign({},C),{searchQuery:_})),this.loadSpecialtyEffect=this.effect(C=>C.pipe((0,G.b)(()=>this.patchState({loading:!0})),(0,U.w)(_=>this.data.userSpecialty({specialtyId:_}).pipe((0,P._b)(f=>{this.patchState({item:f.data.item,errors:f.errors,loading:!1})},f=>this.patchState({loading:!1,errors:f.graphQLErrors?f.graphQLErrors:f})))))),this.loadSpecialtiesEffect=this.effect(C=>C.pipe((0,G.b)(()=>this.patchState({loading:!0})),(0,J.M)(this.input$),(0,U.w)(([_,f])=>this.data.userSpecialties({input:f}).pipe((0,P._b)(S=>this.patchState({paging:{limit:f.limit,skip:f.skip,total:S.data.count.total},specialties:S.data.items,errors:S.errors,loading:!1}),S=>this.patchState({loading:!1,errors:S.graphQLErrors?S.graphQLErrors:S})))))),this.createSpecialtyEffect=this.effect(C=>C.pipe((0,G.b)(()=>this.patchState({loading:!0})),(0,U.w)(_=>this.specialtyService.createSpecialty(Object.assign({},_)).pipe((0,P._b)(f=>{this.addNewSpecialty(f),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:f,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},f=>{f.graphQLErrors?(this.toast.error(f.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:f.graphQLErrors?f.graphQLErrors:f})):(this.toast.error(f.Message),this.formService.setErrors(f.Data))}))))),this.updateSpecialtyEffect=this.effect(C=>C.pipe((0,G.b)(()=>this.patchState({loading:!0})),(0,J.M)(this.item$),(0,U.w)(([_,f])=>this.specialtyService.updateSpecialty(_,_.id).pipe((0,P._b)(S=>{this.updateSpecialty(S),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:S,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},S=>{S.graphQLErrors?(this.toast.error(S.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:S.graphQLErrors?S.graphQLErrors:S})):(this.toast.error(S.Message),this.formService.setErrors(S.Data))}))))),this.deleteSpecialtyEffect=this.effect(C=>C.pipe((0,G.b)(()=>this.patchState({loading:!0})),(0,J.M)(this.item$),(0,U.w)(([_,f])=>this.data.userDeleteSpecialty({specialtyId:f.id}).pipe((0,P._b)(S=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:S.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},S=>{S.graphQLErrors?(this.toast.error(S.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:S.graphQLErrors?S.graphQLErrors:S})):(this.toast.error(S.Message),this.formService.setErrors(S.Data))}))))),this.importExcelEffect=this.effect(C=>C.pipe((0,G.b)(()=>this.patchState({loading:!0})),(0,U.w)(_=>this.specialtyService.importSpecialties(_).pipe((0,ae.K)(f=>{var S;return this.toast.error(null!==(S=f.Message)&&void 0!==S?S:"Failed to save",{duration:3e3}),E.E}),(0,G.b)(f=>{const S=JSON.parse(f.created),F=JSON.parse(f.updated),N=JSON.parse(f.failed),L=S.length+F.length+N.length;this.addSpecialties(S),this.updateSpecialties(F),this.toast.success(`${S.length} created, ${F.length} updated, ${N.length} failed of total ${L}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("specialtyId")?(this.route.snapshot.paramMap.get("specialtyId"),this.setFormName("specialty_edit")):this.setFormName("specialty_create")}validateImportData(w){return this.vm$.pipe((0,U.w)(T=>this.specialtyService.validateSpecialtyExcelData(w)))}}return Y.\u0275fac=function(w){return new(w||Y)(b.LFG(q.q),b.LFG(y.F0),b.LFG(y.gz),b.LFG(h.F),b.LFG(R.o),b.LFG(Ce))},Y.\u0275prov=b.Yz7({token:Y,factory:Y.\u0275fac}),Y})()},45101:(De,we,M)=>{M.d(we,{J:()=>ye});var P=M(24280),E=M(60515),G=M(18505),U=M(63900),J=M(11365),ae=M(70262),b=M(94650),q=M(73602),y=M(30144),h=M(71873),R=M(4523),de=M(56869),e=M(71767),z=M(39646);class O extends e.T_{constructor(A){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=A}Do(A){return this.businessProvider=A,this.serviceContext=A.serviceContext,this.loggingService=A.loggingService,this.execute(),this.response}}var X=M(26177);class Z extends O{constructor(A){super("ValidateTagExcelDataAction"),this.valid=!1,this.excelData=A}preValidateAction(){const A=[];this.excelData.map((w,T)=>{A.push(w.name)}),this.validationContext.addRule(new X.cL("nameIsUnique","Name should be unique",A,!0))}performAction(){}finish(){super.finish();const A={};let w=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(T=>{T instanceof X.mi?T.isValid||(A[T.columnName]?A[T.columnName].newNames.includes(T.newName)||A[T.columnName].newNames.push(T.newName):A[T.columnName]={options:T.possibleValueList.map(x=>x.name),newNames:[T.newName]}):T instanceof X.cL&&(T.isValid||(w=T.conflicts))})):this.valid=!0,this.response=(0,z.of)({valid:this.valid,excelData:this.excelData,conflictNames:w,unknownNames:A})}}var K=M(28234);class W extends X.wS{constructor(A,w,T,x,Q){super(A,w,T,x,Q,!0)}}class D extends X.ul{constructor(A,w,T,x=!1){super(A,w,x),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=T,this.configureRules()}configureRules(){this.rules.push(new X.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new W("name","The tag name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class be extends O{constructor(A){super("CreateTagAction"),this.input=A}preValidateAction(){this.validationContext.addRule(new D("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateTag({input:this.input}).pipe((0,U.w)(A=>(0,K.of)(A.data.created)))}}class g extends O{constructor(A){super("UpdateTagsAction"),this.tags=A}preValidateAction(){this.validationContext.addRule(new X.DJ("Input","Input should have values",this.tags,!0))}performAction(){this.response=this.businessProvider.data.userUpdateTags({input:{tags:this.tags}}).pipe((0,U.w)(A=>(0,z.of)(A.data.updated)))}}class xe extends O{constructor(A,w){super("UpdateTagAction"),this.tag=A,this.tagId=w}preValidateAction(){this.validationContext.addRule(new X.DJ("Input","Input should have values",this.tag,!0)).addRule(new X.xF("Id","Id should be a CUID and not null",this.tagId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateTag({tagId:this.tagId,input:this.tag}).pipe((0,U.w)(A=>(0,z.of)(A.data.updated)))}}let ue=(()=>{class Y extends e.nH{constructor(w,T,x){super("NotificationService.TagBusinessProviderService",w,x),this.data=T}createTag(w){const T=new be(w);return T.Do(this),T.response}updateTag(w,T){const x=new xe(w,T);return x.Do(this),x.response}importTags(w){const T=new g(w);return T.Do(this),T.response}validateTagExcelData(w){const T=new Z(w);return T.Do(this),T.response}}return Y.\u0275fac=function(w){return new(w||Y)(b.LFG(de.ed),b.LFG(q.q),b.LFG(e.oI))},Y.\u0275prov=b.Yz7({token:Y,factory:Y.\u0275fac,providedIn:"root"}),Y})(),Ce=(()=>{class Y extends e.nH{constructor(w,T,x){super("TagService",x,w),this.businessProvider=T}createTag(w){return this.businessProvider.createTag(w)}updateTag(w,T){return this.businessProvider.updateTag(w,T)}importTags(w){return this.businessProvider.importTags(w)}validateTagExcelData(w){return this.businessProvider.validateTagExcelData(w)}}return Y.\u0275fac=function(w){return new(w||Y)(b.LFG(ue,8),b.LFG(ue),b.LFG(de.ed))},Y.\u0275prov=b.Yz7({token:Y,factory:Y.\u0275fac,providedIn:"root"}),Y})(),ye=(()=>{class Y extends P.m1{constructor(w,T,x,Q,H,te){super({loading:!1,tags:[],done:!1,searchQuery:"",formName:void 0,paging:{limit:1e4,skip:0}}),this.data=w,this.router=T,this.route=x,this.toast=Q,this.formService=H,this.tagService=te,this.errors$=this.select(C=>C.errors),this.loading$=this.select(C=>C.loading),this.done$=this.select(C=>C.done),this.item$=this.select(C=>C.item),this.tags$=this.select(C=>C.tags),this.paging$=this.select(C=>C.paging),this.searchQuery$=this.select(C=>C.searchQuery),this.formName$=this.select(C=>C.formName),this.actionResult$=this.select(this.item$,this.done$,(C,_)=>({item:C,done:_}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.tags$,(C,_,f,S,F)=>({errors:C,loading:_,item:f,formName:S,tags:F}),{debounce:!0}),this.input$=this.select(this.paging$,this.searchQuery$,(C,_)=>({limit:C.limit,skip:C.skip,name:_,total:C.total})),this.setFormName=this.updater((C,_)=>Object.assign(Object.assign({},C),{formName:_})),this.setItem=this.updater((C,_)=>Object.assign(Object.assign({},C),{item:_})),this.addNewTag=this.updater((C,_)=>Object.assign(Object.assign({},C),{tags:[...C.tags,_]})),this.updateTag=this.updater((C,_)=>Object.assign(Object.assign({},C),{tags:C.tags.map(f=>f.id===_.id?_:f)})),this.addTags=this.updater((C,_)=>Object.assign(Object.assign({},C),{tags:C.tags.concat(_)})),this.updateTags=this.updater((C,_)=>Object.assign(Object.assign({},C),{tags:C.tags.map(f=>_.find(F=>F.id===f.id)||f)})),this.setSearchQuery=this.updater((C,_)=>Object.assign(Object.assign({},C),{searchQuery:_})),this.loadTagEffect=this.effect(C=>C.pipe((0,G.b)(()=>this.patchState({loading:!0})),(0,U.w)(_=>this.data.userTag({tagId:_}).pipe((0,P._b)(f=>{this.patchState({item:f.data.item,errors:f.errors,loading:!1})},f=>this.patchState({loading:!1,errors:f.graphQLErrors?f.graphQLErrors:f})))))),this.loadTagsEffect=this.effect(C=>C.pipe((0,G.b)(()=>this.patchState({loading:!0})),(0,J.M)(this.input$),(0,U.w)(([_,f])=>this.data.userTags({input:f}).pipe((0,P._b)(S=>this.patchState({paging:{limit:f.limit,skip:f.skip,total:S.data.count.total},tags:S.data.items,errors:S.errors,loading:!1}),S=>this.patchState({loading:!1,errors:S.graphQLErrors?S.graphQLErrors:S})))))),this.createTagEffect=this.effect(C=>C.pipe((0,G.b)(()=>this.patchState({loading:!0})),(0,U.w)(_=>this.tagService.createTag(Object.assign({},_)).pipe((0,P._b)(f=>{this.addNewTag(f),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:f,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},f=>{f.graphQLErrors?(this.toast.error(f.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:f.graphQLErrors?f.graphQLErrors:f})):(this.toast.error(f.Message),this.formService.setErrors(f.Data))}))))),this.updateTagEffect=this.effect(C=>C.pipe((0,G.b)(()=>this.patchState({loading:!0})),(0,J.M)(this.item$),(0,U.w)(([_,f])=>this.tagService.updateTag(_,_.id).pipe((0,P._b)(S=>{this.updateTag(S),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:S,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},S=>{S.graphQLErrors?(this.toast.error(S.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:S.graphQLErrors?S.graphQLErrors:S})):(this.toast.error(S.Message),this.formService.setErrors(S.Data))}))))),this.deleteTagEffect=this.effect(C=>C.pipe((0,G.b)(()=>this.patchState({loading:!0})),(0,J.M)(this.item$),(0,U.w)(([_,f])=>this.data.userDeleteTag({tagId:f.id}).pipe((0,P._b)(S=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:S.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},S=>{S.graphQLErrors?(this.toast.error(S.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:S.graphQLErrors?S.graphQLErrors:S})):(this.toast.error(S.Message),this.formService.setErrors(S.Data))}))))),this.importExcelEffect=this.effect(C=>C.pipe((0,G.b)(()=>this.patchState({loading:!0})),(0,U.w)(_=>this.tagService.importTags(_).pipe((0,ae.K)(f=>{var S;return this.toast.error(null!==(S=f.Message)&&void 0!==S?S:"Failed to save",{duration:3e3}),E.E}),(0,G.b)(f=>{const S=JSON.parse(f.created),F=JSON.parse(f.updated),N=JSON.parse(f.failed),L=S.length+F.length+N.length;this.addTags(S),this.updateTags(F),this.toast.success(`${S.length} created, ${F.length} updated, ${N.length} failed of total ${L}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("tagId")?(this.route.snapshot.paramMap.get("tagId"),this.setFormName("tag_edit")):this.setFormName("tag_create")}validateImportData(w){return this.vm$.pipe((0,U.w)(T=>this.tagService.validateTagExcelData(w)))}}return Y.\u0275fac=function(w){return new(w||Y)(b.LFG(q.q),b.LFG(y.F0),b.LFG(y.gz),b.LFG(h.F),b.LFG(R.o),b.LFG(Ce))},Y.\u0275prov=b.Yz7({token:Y,factory:Y.\u0275fac}),Y})()},77504:(De,we,M)=>{M.d(we,{o:()=>c7});var P=M(36895),E=M(24006),G=M(49821),U=M(5084),J=M(41746),ae=M(55274),b=M(24280),q=M(60515),y=M(18505),h=M(63900),R=M(11365),de=M(70262),e=M(94650),z=M(73602),O=M(30144),X=M(71873),Z=M(4523),K=M(56869),W=M(71767),D=M(39646);class be extends W.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}var g=M(26177);class xe extends be{constructor(o){super("ValidateAccidentTypeExcelDataAction"),this.valid=!1,this.excelData=o}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name)}),this.validationContext.addRule(new g.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof g.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(a=>a.name),newNames:[i.newName]}):i instanceof g.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,D.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}var ue=M(28234);class Ce extends g.wS{constructor(o,t,i,a,l){super(o,t,i,a,l,!0)}}class ye extends g.ul{constructor(o,t,i,a=!1){super(o,t,a),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new g.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new Ce("name","The accidenttype name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class Y extends be{constructor(o){super("CreateAccidentTypeAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new ye("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateAccidentType({input:this.input}).pipe((0,h.w)(o=>(0,ue.of)(o.data.created)))}}class A extends be{constructor(o){super("UpdateAccidentTypesAction"),this.accidentTypes=o}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.accidentTypes,!0))}performAction(){this.response=this.businessProvider.data.userUpdateAccidentTypes({input:{accidentTypes:this.accidentTypes}}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}class w extends be{constructor(o,t){super("UpdateAccidentTypeAction"),this.accidentType=o,this.accidentTypeId=t}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.accidentType,!0)).addRule(new g.xF("Id","Id should be a CUID and not null",this.accidentTypeId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateAccidentType({accidentTypeId:this.accidentTypeId,input:this.accidentType}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}let T=(()=>{class s extends W.nH{constructor(t,i,a){super("NotificationService.AccidentTypeBusinessProviderService",t,a),this.data=i}createAccidentType(t){const i=new Y(t);return i.Do(this),i.response}updateAccidentType(t,i){const a=new w(t,i);return a.Do(this),a.response}importAccidentTypes(t){const i=new A(t);return i.Do(this),i.response}validateAccidentTypeExcelData(t){const i=new xe(t);return i.Do(this),i.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(K.ed),e.LFG(z.q),e.LFG(W.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),x=(()=>{class s extends W.nH{constructor(t,i,a){super("AccidentTypeService",a,t),this.businessProvider=i}createAccidentType(t){const i=Object.fromEntries(Object.entries(t).filter(([a,l])=>null!==l));return this.businessProvider.createAccidentType(i)}updateAccidentType(t,i){return this.businessProvider.updateAccidentType(t,i)}importAccidentTypes(t){return this.businessProvider.importAccidentTypes(t)}validateAccidentTypeExcelData(t){return this.businessProvider.validateAccidentTypeExcelData(t)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(T,8),e.LFG(T),e.LFG(K.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),Q=(()=>{class s extends b.m1{constructor(t,i,a,l,d,ee){super({loading:!1,accidentTypes:[],done:!1,searchQuery:"",formName:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=a,this.toast=l,this.formService=d,this.accidentTypeService=ee,this.errors$=this.select(c=>c.errors),this.loading$=this.select(c=>c.loading),this.done$=this.select(c=>c.done),this.item$=this.select(c=>c.item),this.accidentTypes$=this.select(c=>c.accidentTypes),this.paging$=this.select(c=>c.paging),this.searchQuery$=this.select(c=>c.searchQuery),this.formName$=this.select(c=>c.formName),this.actionResult$=this.select(this.item$,this.done$,(c,u)=>({item:c,done:u}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.accidentTypes$,(c,u,n,r,m)=>({errors:c,loading:u,item:n,formName:r,accidentTypes:m}),{debounce:!0}),this.input$=this.select(this.paging$,this.searchQuery$,(c,u)=>({limit:c.limit,skip:c.skip,name:u,total:c.total})),this.setFormName=this.updater((c,u)=>Object.assign(Object.assign({},c),{formName:u})),this.setItem=this.updater((c,u)=>Object.assign(Object.assign({},c),{item:u})),this.addNewAccidentType=this.updater((c,u)=>Object.assign(Object.assign({},c),{accidentTypes:[...c.accidentTypes,u]})),this.updateAccidentType=this.updater((c,u)=>Object.assign(Object.assign({},c),{accidentTypes:c.accidentTypes.map(n=>n.id===u.id?u:n)})),this.addAccidentTypes=this.updater((c,u)=>Object.assign(Object.assign({},c),{accidentTypes:c.accidentTypes.concat(u)})),this.updateAccidentTypes=this.updater((c,u)=>Object.assign(Object.assign({},c),{accidentTypes:c.accidentTypes.map(n=>u.find(m=>m.id===n.id)||n)})),this.setSearchQuery=this.updater((c,u)=>Object.assign(Object.assign({},c),{searchQuery:u})),this.loadAccidentTypeEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.data.userAccidentType({accidentTypeId:u}).pipe((0,b._b)(n=>{this.patchState({item:n.data.item,errors:n.errors,loading:!1})},n=>this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})))))),this.loadAccidentTypesEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.input$),(0,h.w)(([u,n])=>this.data.userAccidentTypes({input:n}).pipe((0,b._b)(r=>this.patchState({paging:{limit:n.limit,skip:n.skip,total:r.data.count.total},accidentTypes:r.data.items,errors:r.errors,loading:!1}),r=>this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})))))),this.createAccidentTypeEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.accidentTypeService.createAccidentType(Object.assign({},u)).pipe((0,b._b)(n=>{this.addNewAccidentType(n),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:n,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},n=>{n.graphQLErrors?(this.toast.error(n.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})):(this.toast.error(n.Message),this.formService.setErrors(n.Data))}))))),this.updateAccidentTypeEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([u,n])=>this.accidentTypeService.updateAccidentType(u,u.id).pipe((0,b._b)(r=>{this.updateAccidentType(r),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:r,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},r=>{r.graphQLErrors?(this.toast.error(r.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})):(this.toast.error(r.Message),this.formService.setErrors(r.Data))}))))),this.deleteAccidentTypeEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([u,n])=>this.data.userDeleteAccidentType({accidentTypeId:n.id}).pipe((0,b._b)(r=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:r.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},r=>{r.graphQLErrors?(this.toast.error(r.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})):(this.toast.error(r.Message),this.formService.setErrors(r.Data))}))))),this.importExcelEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.accidentTypeService.importAccidentTypes(u).pipe((0,de.K)(n=>{var r;return this.toast.error(null!==(r=n.Message)&&void 0!==r?r:"Failed to save",{duration:3e3}),q.E}),(0,y.b)(n=>{const r=JSON.parse(n.created),m=JSON.parse(n.updated),p=JSON.parse(n.failed),v=r.length+m.length+p.length;this.addAccidentTypes(r),this.updateAccidentTypes(m),this.toast.success(`${r.length} created, ${m.length} updated, ${p.length} failed of total ${v}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("accidentTypeId")?(this.route.snapshot.paramMap.get("accidentTypeId"),this.setFormName("accidentType_edit")):this.setFormName("accidentType_create")}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.accidentTypeService.validateAccidentTypeExcelData(t)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(z.q),e.LFG(O.F0),e.LFG(O.gz),e.LFG(X.F),e.LFG(Z.o),e.LFG(x))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();var H=M(15909),te=M(92518);function ge(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.close.emit())})("formIsReady",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.accidentType)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let C=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"accidentType_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.accidentType=i.item})):t.formName&&t.formName.currentValue&&"accidentType_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadAccidentTypeEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.accidentType=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Q),e.Y36(O.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-accident-type-form"]],inputs:{accidentType:"accidentType",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,ge,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[P.O5,te.M,P.Ov],encapsulation:2}),s})();var _=M(51645),f=M(26244);let S=(()=>{class s{constructor(){this.autoHeight=!1,this.accidentTypes=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[,{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var a;t.includes(null===(a=i.data)||void 0===a?void 0:a.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-accident-type-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(f.x,5),2&t){let a;e.iGM(a=e.CRH())&&(i.tableView=a.first)}},inputs:{autoHeight:"autoHeight",accidentTypes:"accidentTypes"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.accidentTypes)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[f.x],encapsulation:2}),s})();function F(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-accident-type-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","accidentType_edit")("formControl",t.formControl)("accidentType",t.accidentType)}}const N=function(){return{}};function L(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-accident-type-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","accidentType_create")("formControl",t.formControl)("accidentType",e.DdM(3,N))}}function ie(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-accident-type-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(d.ref.close())}),e.qZA()}2&s&&e.Q6J("accidentTypes",o.data.items)}let re=(()=>{class s extends G.fS{constructor(t){super(),this.store=t,this.store.loadAccidentTypesEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.accidentTypes$.pipe((0,h.w)(i=>(0,D.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Q))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","accidentType","send","close"],[1,"w-full","h-full","bg-white",3,"accidentTypes","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,F,2,3,"ng-template",null,1,e.W1O),e.YNc(3,L,1,4,"ng-template",null,2,e.W1O),e.YNc(5,ie,1,1,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",d)("editTemplate",a)("createTemplate",l)("key",i.field.key)}},dependencies:[E.JJ,E.oH,H.$,C,S],encapsulation:2}),s})();var $=M(10948),j=M(10265),k=M(31276),se=M(27503),Se=M(927),Pe=M(4859);let me=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[P.ez,Pe.ot,E.UX,$.P,Se.W]}),s})();var Ae=M(82722),Ie=M(77579);let pe=(()=>{class s extends G.fS{constructor(){super(),this._unsubscribeAll=new Ie.x,this.data=[],this.onSave=this.onSave.bind(this)}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}ngOnInit(){this.formControl.value&&(this.data=this.formControl.value),this.formControl.valueChanges.pipe((0,Ae.R)(this._unsubscribeAll)).subscribe(t=>{this.data=t})}onSave(t){const i=this.data.findIndex(a=>a.id===t.id);-1!==i?(this.data[i]=t,this.data=this.data.map((a,l)=>l===i?t:a)):this.data=[...this.data]}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-formly-field-base-grid"]],features:[e.qOj],decls:0,vars:0,template:function(t,i){},encapsulation:2}),s})();var $e=M(17489),Le=M(12282),Re=M(57148);const je=["editTpl"],Je=["createTpl"];function Ue(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"button",9),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.onCreate())}),e._uU(1,"+ Add"),e.qZA()}}function Fe(s,o){1&s&&e.GkF(0)}function Ee(s,o){1&s&&e.GkF(0)}const Me=function(s,o,t){return{value:s,ref:o,onSave:t}},We=function(s){return{data:s}};function Qe(s,o){if(1&s&&(e.TgZ(0,"div",10),e.YNc(1,Ee,1,0,"ng-container",6),e.qZA()),2&s){const t=o.$implicit,i=e.oxw();e.xp6(1),e.Q6J("ngTemplateOutlet",i.editTemplate)("ngTemplateOutletContext",e.VKq(6,We,e.kEZ(2,Me,t.data,t,i.onSave)))}}function fs(s,o){1&s&&e.GkF(0)}const $m=function(){return{}};function Gm(s,o){if(1&s&&(e.TgZ(0,"div",10),e.YNc(1,fs,1,0,"ng-container",6),e.qZA()),2&s){const t=o.$implicit,i=e.oxw();e.xp6(1),e.Q6J("ngTemplateOutlet",i.createTemplate)("ngTemplateOutletContext",e.VKq(7,We,e.kEZ(3,Me,e.DdM(2,$m),t,i.onSave)))}}const Rm=function(s,o){return{items:s,itemDidSelect:o}},Qm=function(s){return{data:s}};let he=(()=>{class s{constructor(t,i){this.configService=t,this.dialogService=i,this.data=[],this.title="Title",this.readOnly=!1,this.saveButtonDidClick=new e.vpe,this.itemDidSelect=this.itemDidSelect.bind(this)}itemDidSelect(t){this.readOnly||this.dialogService.open(this.editTpl,{data:Object.assign({},t),width:"auto",minHeight:"200px"})}onCreate(){console.log("onCreate"),this.dialogService.open(this.createTpl,{data:null,width:"auto",minHeight:"200px"})}getCloneValue(t){return(0,$e.cloneDeep)(t)}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Le.m),e.Y36(Re.xA))},s.\u0275cmp=e.Xpm({type:s,selectors:[["web-ui-grid"]],viewQuery:function(t,i){if(1&t&&(e.Gf(je,5),e.Gf(Je,5)),2&t){let a;e.iGM(a=e.CRH())&&(i.editTpl=a.first),e.iGM(a=e.CRH())&&(i.createTpl=a.first)}},inputs:{data:"data",title:"title",onSave:"onSave",listTemplate:"listTemplate",editTemplate:"editTemplate",createTemplate:"createTemplate",readOnly:"readOnly"},outputs:{saveButtonDidClick:"saveButtonDidClick"},decls:12,vars:9,consts:[[1,"p-2","flex","flex-col"],[1,"flex","flex-row","items-center","justify-between","gap-2","p-2","w-full"],[1,"text-lg","font-bold","text-gray-800","dark:text-gray-50"],["mat-flat-button","","type","button","class","bg-primary text-white",3,"click",4,"ngIf"],[1,"flex","flex-col","gap-2","h-full","bg-grey-light"],[1,"w-full","h-auto"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["editTpl",""],["createTpl",""],["mat-flat-button","","type","button",1,"bg-primary","text-white",3,"click"],[1,"p-5","bg-gray-50","overflow-auto","dark:bg-gray-800"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h3",2),e._uU(3),e.qZA(),e.YNc(4,Ue,2,0,"button",3),e.qZA(),e.TgZ(5,"div",4)(6,"div",5),e.YNc(7,Fe,1,0,"ng-container",6),e.qZA()()(),e.YNc(8,Qe,2,8,"ng-template",null,7,e.W1O),e.YNc(10,Gm,2,9,"ng-template",null,8,e.W1O)),2&t&&(e.xp6(3),e.Oqu(i.title),e.xp6(1),e.Q6J("ngIf",!i.readOnly),e.xp6(3),e.Q6J("ngTemplateOutlet",i.listTemplate)("ngTemplateOutletContext",e.VKq(7,Qm,e.WLB(4,Rm,i.data,i.itemDidSelect))))},dependencies:[P.O5,P.tP,Pe.lW]}),s})();function Vm(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-accident-type-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","accidentType_edit")("accidentType",t.value)}}const jm=function(){return{}};function Um(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-accident-type-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","accidentType_create")("accidentType",e.DdM(2,jm))}function Jm(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-accident-type-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(null==d.ref?null:d.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("accidentTypes",t.items)}}let zm=(()=>{class s extends pe{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","accidentType","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","accidentTypes","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,Vm,1,2,"ng-template",null,1,e.W1O),e.YNc(3,Um,1,3,"ng-template",null,2,e.W1O),e.YNc(5,Jm,1,2,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[he,C,S],encapsulation:2}),s})(),Hm=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[Q],imports:[P.ez,U.F,E.UX,J.o,ae.u,$.P,j.t,me,k.h,se.G,G.X0.forChild({types:[{name:"accident-type-select",component:re,wrappers:["form-field"]},{name:"accident-type-grid",component:zm}]})]}),s})(),qm=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[Hm]}),s})();class Xe extends W.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class Km extends Xe{constructor(o){super("ValidateAccountStatusExcelDataAction"),this.valid=!1,this.excelData=o}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name)}),this.validationContext.addRule(new g.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof g.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(a=>a.name),newNames:[i.newName]}):i instanceof g.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,D.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class Zm extends g.wS{constructor(o,t,i,a,l){super(o,t,i,a,l,!0)}}class Bm extends g.ul{constructor(o,t,i,a=!1){super(o,t,a),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new g.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new Zm("name","The accountstatus name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class km extends Xe{constructor(o){super("CreateAccountStatusAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new Bm("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateAccountStatus({input:this.input}).pipe((0,h.w)(o=>(0,ue.of)(o.data.created)))}}class Ym extends Xe{constructor(o){super("UpdateAccountStatusesAction"),this.accountStatuses=o}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.accountStatuses,!0))}performAction(){this.response=this.businessProvider.data.userUpdateAccountStatuses({input:{accountStatuses:this.accountStatuses}}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}class Xm extends Xe{constructor(o,t){super("UpdateAccountStatusAction"),this.accountStatus=o,this.accountStatusId=t}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.accountStatus,!0)).addRule(new g.xF("Id","Id should be a CUID and not null",this.accountStatusId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateAccountStatus({accountStatusId:this.accountStatusId,input:this.accountStatus}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}let Wa=(()=>{class s extends W.nH{constructor(t,i,a){super("NotificationService.AccountStatusBusinessProviderService",t,a),this.data=i}createAccountStatus(t){const i=new km(t);return i.Do(this),i.response}updateAccountStatus(t,i){const a=new Xm(t,i);return a.Do(this),a.response}importAccountStatuses(t){const i=new Ym(t);return i.Do(this),i.response}validateAccountStatusExcelData(t){const i=new Km(t);return i.Do(this),i.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(K.ed),e.LFG(z.q),e.LFG(W.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),ep=(()=>{class s extends W.nH{constructor(t,i,a){super("AccountStatusService",a,t),this.businessProvider=i}createAccountStatus(t){const i=Object.fromEntries(Object.entries(t).filter(([a,l])=>null!==l));return this.businessProvider.createAccountStatus(i)}updateAccountStatus(t,i){return this.businessProvider.updateAccountStatus(t,i)}importAccountStatuses(t){return this.businessProvider.importAccountStatuses(t)}validateAccountStatusExcelData(t){return this.businessProvider.validateAccountStatusExcelData(t)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(Wa,8),e.LFG(Wa),e.LFG(K.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),_s=(()=>{class s extends b.m1{constructor(t,i,a,l,d,ee){super({loading:!1,accountStatuses:[],done:!1,searchQuery:"",formName:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=a,this.toast=l,this.formService=d,this.accountStatusService=ee,this.errors$=this.select(c=>c.errors),this.loading$=this.select(c=>c.loading),this.done$=this.select(c=>c.done),this.item$=this.select(c=>c.item),this.accountStatuses$=this.select(c=>c.accountStatuses),this.paging$=this.select(c=>c.paging),this.searchQuery$=this.select(c=>c.searchQuery),this.formName$=this.select(c=>c.formName),this.actionResult$=this.select(this.item$,this.done$,(c,u)=>({item:c,done:u}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.accountStatuses$,(c,u,n,r,m)=>({errors:c,loading:u,item:n,formName:r,accountStatuses:m}),{debounce:!0}),this.input$=this.select(this.paging$,this.searchQuery$,(c,u)=>({limit:c.limit,skip:c.skip,name:u,total:c.total})),this.setFormName=this.updater((c,u)=>Object.assign(Object.assign({},c),{formName:u})),this.setItem=this.updater((c,u)=>Object.assign(Object.assign({},c),{item:u})),this.addNewAccountStatus=this.updater((c,u)=>Object.assign(Object.assign({},c),{accountStatuses:[...c.accountStatuses,u]})),this.updateAccountStatus=this.updater((c,u)=>Object.assign(Object.assign({},c),{accountStatuses:c.accountStatuses.map(n=>n.id===u.id?u:n)})),this.addAccountStatuses=this.updater((c,u)=>Object.assign(Object.assign({},c),{accountStatuses:c.accountStatuses.concat(u)})),this.updateAccountStatuses=this.updater((c,u)=>Object.assign(Object.assign({},c),{accountStatuses:c.accountStatuses.map(n=>u.find(m=>m.id===n.id)||n)})),this.setSearchQuery=this.updater((c,u)=>Object.assign(Object.assign({},c),{searchQuery:u})),this.loadAccountStatusEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.data.userAccountStatus({accountStatusId:u}).pipe((0,b._b)(n=>{this.patchState({item:n.data.item,errors:n.errors,loading:!1})},n=>this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})))))),this.loadAccountStatusesEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.input$),(0,h.w)(([u,n])=>this.data.userAccountStatuses({input:n}).pipe((0,b._b)(r=>this.patchState({paging:{limit:n.limit,skip:n.skip,total:r.data.count.total},accountStatuses:r.data.items,errors:r.errors,loading:!1}),r=>this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})))))),this.createAccountStatusEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.accountStatusService.createAccountStatus(Object.assign({},u)).pipe((0,b._b)(n=>{this.addNewAccountStatus(n),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:n,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},n=>{n.graphQLErrors?(this.toast.error(n.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})):(this.toast.error(n.Message),this.formService.setErrors(n.Data))}))))),this.updateAccountStatusEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([u,n])=>this.accountStatusService.updateAccountStatus(u,u.id).pipe((0,b._b)(r=>{this.updateAccountStatus(r),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:r,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},r=>{r.graphQLErrors?(this.toast.error(r.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})):(this.toast.error(r.Message),this.formService.setErrors(r.Data))}))))),this.deleteAccountStatusEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([u,n])=>this.data.userDeleteAccountStatus({accountStatusId:n.id}).pipe((0,b._b)(r=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:r.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},r=>{r.graphQLErrors?(this.toast.error(r.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})):(this.toast.error(r.Message),this.formService.setErrors(r.Data))}))))),this.importExcelEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.accountStatusService.importAccountStatuses(u).pipe((0,de.K)(n=>{var r;return this.toast.error(null!==(r=n.Message)&&void 0!==r?r:"Failed to save",{duration:3e3}),q.E}),(0,y.b)(n=>{const r=JSON.parse(n.created),m=JSON.parse(n.updated),p=JSON.parse(n.failed),v=r.length+m.length+p.length;this.addAccountStatuses(r),this.updateAccountStatuses(m),this.toast.success(`${r.length} created, ${m.length} updated, ${p.length} failed of total ${v}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("accountStatusId")?(this.route.snapshot.paramMap.get("accountStatusId"),this.setFormName("accountStatus_edit")):this.setFormName("accountStatus_create")}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.accountStatusService.validateAccountStatusExcelData(t)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(z.q),e.LFG(O.F0),e.LFG(O.gz),e.LFG(X.F),e.LFG(Z.o),e.LFG(ep))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function tp(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.close.emit())})("formIsReady",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.accountStatus)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let Ea=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"accountStatus_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.accountStatus=i.item})):t.formName&&t.formName.currentValue&&"accountStatus_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadAccountStatusEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.accountStatus=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(_s),e.Y36(O.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-account-status-form"]],inputs:{accountStatus:"accountStatus",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,tp,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[P.O5,te.M,P.Ov],encapsulation:2}),s})(),Oa=(()=>{class s{constructor(){this.autoHeight=!1,this.accountStatuses=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[,{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var a;t.includes(null===(a=i.data)||void 0===a?void 0:a.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-account-status-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(f.x,5),2&t){let a;e.iGM(a=e.CRH())&&(i.tableView=a.first)}},inputs:{autoHeight:"autoHeight",accountStatuses:"accountStatuses"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.accountStatuses)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[f.x],encapsulation:2}),s})();function ip(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-account-status-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","accountStatus_edit")("formControl",t.formControl)("accountStatus",t.accountStatus)}}const sp=function(){return{}};function op(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-account-status-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","accountStatus_create")("formControl",t.formControl)("accountStatus",e.DdM(3,sp))}}function ap(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-account-status-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(d.ref.close())}),e.qZA()}2&s&&e.Q6J("accountStatuses",o.data.items)}let rp=(()=>{class s extends G.fS{constructor(t){super(),this.store=t,this.store.loadAccountStatusesEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.accountStatuses$.pipe((0,h.w)(i=>(0,D.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(_s))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","accountStatus","send","close"],[1,"w-full","h-full","bg-white",3,"accountStatuses","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,ip,2,3,"ng-template",null,1,e.W1O),e.YNc(3,op,1,4,"ng-template",null,2,e.W1O),e.YNc(5,ap,1,1,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",d)("editTemplate",a)("createTemplate",l)("key",i.field.key)}},dependencies:[E.JJ,E.oH,H.$,Ea,Oa],encapsulation:2}),s})();function np(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-account-status-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","accountStatus_edit")("accountStatus",t.value)}}const lp=function(){return{}};function cp(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-account-status-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","accountStatus_create")("accountStatus",e.DdM(2,lp))}function dp(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-account-status-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(null==d.ref?null:d.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("accountStatuses",t.items)}}let up=(()=>{class s extends pe{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","accountStatus","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","accountStatuses","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,np,1,2,"ng-template",null,1,e.W1O),e.YNc(3,cp,1,3,"ng-template",null,2,e.W1O),e.YNc(5,dp,1,2,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[he,Ea,Oa],encapsulation:2}),s})(),mp=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[_s],imports:[P.ez,U.F,E.UX,J.o,ae.u,$.P,j.t,me,k.h,se.G,G.X0.forChild({types:[{name:"account-status-select",component:rp,wrappers:["form-field"]},{name:"account-status-grid",component:up}]})]}),s})(),pp=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[mp]}),s})();class et extends W.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class hp extends et{constructor(o){super("ValidateAdverseInsuranceStatusExcelDataAction"),this.valid=!1,this.excelData=o}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name)}),this.validationContext.addRule(new g.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof g.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(a=>a.name),newNames:[i.newName]}):i instanceof g.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,D.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class fp extends g.wS{constructor(o,t,i,a,l){super(o,t,i,a,l,!0)}}class _p extends g.ul{constructor(o,t,i,a=!1){super(o,t,a),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new g.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new fp("name","The adverseinsurancestatus name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class gp extends et{constructor(o){super("CreateAdverseInsuranceStatusAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new _p("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateAdverseInsuranceStatus({input:this.input}).pipe((0,h.w)(o=>(0,ue.of)(o.data.created)))}}class vp extends et{constructor(o){super("UpdateAdverseInsuranceStatusesAction"),this.adverseInsuranceStatuses=o}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.adverseInsuranceStatuses,!0))}performAction(){this.response=this.businessProvider.data.userUpdateAdverseInsuranceStatuses({input:{adverseInsuranceStatuses:this.adverseInsuranceStatuses}}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}class Cp extends et{constructor(o,t){super("UpdateAdverseInsuranceStatusAction"),this.adverseInsuranceStatus=o,this.adverseInsuranceStatusId=t}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.adverseInsuranceStatus,!0)).addRule(new g.xF("Id","Id should be a CUID and not null",this.adverseInsuranceStatusId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateAdverseInsuranceStatus({adverseInsuranceStatusId:this.adverseInsuranceStatusId,input:this.adverseInsuranceStatus}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}let La=(()=>{class s extends W.nH{constructor(t,i,a){super("NotificationService.AdverseInsuranceStatusBusinessProviderService",t,a),this.data=i}createAdverseInsuranceStatus(t){const i=new gp(t);return i.Do(this),i.response}updateAdverseInsuranceStatus(t,i){const a=new Cp(t,i);return a.Do(this),a.response}importAdverseInsuranceStatuses(t){const i=new vp(t);return i.Do(this),i.response}validateAdverseInsuranceStatusExcelData(t){const i=new hp(t);return i.Do(this),i.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(K.ed),e.LFG(z.q),e.LFG(W.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),Sp=(()=>{class s extends W.nH{constructor(t,i,a){super("AdverseInsuranceStatusService",a,t),this.businessProvider=i}createAdverseInsuranceStatus(t){const i=Object.fromEntries(Object.entries(t).filter(([a,l])=>null!==l));return this.businessProvider.createAdverseInsuranceStatus(i)}updateAdverseInsuranceStatus(t,i){return this.businessProvider.updateAdverseInsuranceStatus(t,i)}importAdverseInsuranceStatuses(t){return this.businessProvider.importAdverseInsuranceStatuses(t)}validateAdverseInsuranceStatusExcelData(t){return this.businessProvider.validateAdverseInsuranceStatusExcelData(t)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(La,8),e.LFG(La),e.LFG(K.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),gs=(()=>{class s extends b.m1{constructor(t,i,a,l,d,ee){super({loading:!1,adverseInsuranceStatuses:[],done:!1,searchQuery:"",formName:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=a,this.toast=l,this.formService=d,this.adverseInsuranceStatusService=ee,this.errors$=this.select(c=>c.errors),this.loading$=this.select(c=>c.loading),this.done$=this.select(c=>c.done),this.item$=this.select(c=>c.item),this.adverseInsuranceStatuses$=this.select(c=>c.adverseInsuranceStatuses),this.paging$=this.select(c=>c.paging),this.searchQuery$=this.select(c=>c.searchQuery),this.formName$=this.select(c=>c.formName),this.actionResult$=this.select(this.item$,this.done$,(c,u)=>({item:c,done:u}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.adverseInsuranceStatuses$,(c,u,n,r,m)=>({errors:c,loading:u,item:n,formName:r,adverseInsuranceStatuses:m}),{debounce:!0}),this.input$=this.select(this.paging$,this.searchQuery$,(c,u)=>({limit:c.limit,skip:c.skip,name:u,total:c.total})),this.setFormName=this.updater((c,u)=>Object.assign(Object.assign({},c),{formName:u})),this.setItem=this.updater((c,u)=>Object.assign(Object.assign({},c),{item:u})),this.addNewAdverseInsuranceStatus=this.updater((c,u)=>Object.assign(Object.assign({},c),{adverseInsuranceStatuses:[...c.adverseInsuranceStatuses,u]})),this.updateAdverseInsuranceStatus=this.updater((c,u)=>Object.assign(Object.assign({},c),{adverseInsuranceStatuses:c.adverseInsuranceStatuses.map(n=>n.id===u.id?u:n)})),this.addAdverseInsuranceStatuses=this.updater((c,u)=>Object.assign(Object.assign({},c),{adverseInsuranceStatuses:c.adverseInsuranceStatuses.concat(u)})),this.updateAdverseInsuranceStatuses=this.updater((c,u)=>Object.assign(Object.assign({},c),{adverseInsuranceStatuses:c.adverseInsuranceStatuses.map(n=>u.find(m=>m.id===n.id)||n)})),this.setSearchQuery=this.updater((c,u)=>Object.assign(Object.assign({},c),{searchQuery:u})),this.loadAdverseInsuranceStatusEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.data.userAdverseInsuranceStatus({adverseInsuranceStatusId:u}).pipe((0,b._b)(n=>{this.patchState({item:n.data.item,errors:n.errors,loading:!1})},n=>this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})))))),this.loadAdverseInsuranceStatusesEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.input$),(0,h.w)(([u,n])=>this.data.userAdverseInsuranceStatuses({input:n}).pipe((0,b._b)(r=>this.patchState({paging:{limit:n.limit,skip:n.skip,total:r.data.count.total},adverseInsuranceStatuses:r.data.items,errors:r.errors,loading:!1}),r=>this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})))))),this.createAdverseInsuranceStatusEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.adverseInsuranceStatusService.createAdverseInsuranceStatus(Object.assign({},u)).pipe((0,b._b)(n=>{this.addNewAdverseInsuranceStatus(n),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:n,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},n=>{n.graphQLErrors?(this.toast.error(n.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})):(this.toast.error(n.Message),this.formService.setErrors(n.Data))}))))),this.updateAdverseInsuranceStatusEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([u,n])=>this.adverseInsuranceStatusService.updateAdverseInsuranceStatus(u,u.id).pipe((0,b._b)(r=>{this.updateAdverseInsuranceStatus(r),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:r,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},r=>{r.graphQLErrors?(this.toast.error(r.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})):(this.toast.error(r.Message),this.formService.setErrors(r.Data))}))))),this.deleteAdverseInsuranceStatusEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([u,n])=>this.data.userDeleteAdverseInsuranceStatus({adverseInsuranceStatusId:n.id}).pipe((0,b._b)(r=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:r.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},r=>{r.graphQLErrors?(this.toast.error(r.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})):(this.toast.error(r.Message),this.formService.setErrors(r.Data))}))))),this.importExcelEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.adverseInsuranceStatusService.importAdverseInsuranceStatuses(u).pipe((0,de.K)(n=>{var r;return this.toast.error(null!==(r=n.Message)&&void 0!==r?r:"Failed to save",{duration:3e3}),q.E}),(0,y.b)(n=>{const r=JSON.parse(n.created),m=JSON.parse(n.updated),p=JSON.parse(n.failed),v=r.length+m.length+p.length;this.addAdverseInsuranceStatuses(r),this.updateAdverseInsuranceStatuses(m),this.toast.success(`${r.length} created, ${m.length} updated, ${p.length} failed of total ${v}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("adverseInsuranceStatusId")?(this.route.snapshot.paramMap.get("adverseInsuranceStatusId"),this.setFormName("adverseInsuranceStatus_edit")):this.setFormName("adverseInsuranceStatus_create")}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.adverseInsuranceStatusService.validateAdverseInsuranceStatusExcelData(t)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(z.q),e.LFG(O.F0),e.LFG(O.gz),e.LFG(X.F),e.LFG(Z.o),e.LFG(Sp))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function bp(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.close.emit())})("formIsReady",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.adverseInsuranceStatus)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let $a=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"adverseInsuranceStatus_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.adverseInsuranceStatus=i.item})):t.formName&&t.formName.currentValue&&"adverseInsuranceStatus_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadAdverseInsuranceStatusEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.adverseInsuranceStatus=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(gs),e.Y36(O.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-adverse-insurance-status-form"]],inputs:{adverseInsuranceStatus:"adverseInsuranceStatus",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,bp,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[P.O5,te.M,P.Ov],encapsulation:2}),s})(),Ga=(()=>{class s{constructor(){this.autoHeight=!1,this.adverseInsuranceStatuses=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[,{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var a;t.includes(null===(a=i.data)||void 0===a?void 0:a.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-adverse-insurance-status-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(f.x,5),2&t){let a;e.iGM(a=e.CRH())&&(i.tableView=a.first)}},inputs:{autoHeight:"autoHeight",adverseInsuranceStatuses:"adverseInsuranceStatuses"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.adverseInsuranceStatuses)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[f.x],encapsulation:2}),s})();function Tp(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-adverse-insurance-status-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","adverseInsuranceStatus_edit")("formControl",t.formControl)("adverseInsuranceStatus",t.adverseInsuranceStatus)}}const yp=function(){return{}};function wp(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-adverse-insurance-status-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","adverseInsuranceStatus_create")("formControl",t.formControl)("adverseInsuranceStatus",e.DdM(3,yp))}}function xp(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-adverse-insurance-status-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(d.ref.close())}),e.qZA()}2&s&&e.Q6J("adverseInsuranceStatuses",o.data.items)}let Np=(()=>{class s extends G.fS{constructor(t){super(),this.store=t,this.store.loadAdverseInsuranceStatusesEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.adverseInsuranceStatuses$.pipe((0,h.w)(i=>(0,D.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(gs))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","adverseInsuranceStatus","send","close"],[1,"w-full","h-full","bg-white",3,"adverseInsuranceStatuses","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,Tp,2,3,"ng-template",null,1,e.W1O),e.YNc(3,wp,1,4,"ng-template",null,2,e.W1O),e.YNc(5,xp,1,1,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",d)("editTemplate",a)("createTemplate",l)("key",i.field.key)}},dependencies:[E.JJ,E.oH,H.$,$a,Ga],encapsulation:2}),s})();function Ap(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-adverse-insurance-status-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","adverseInsuranceStatus_edit")("adverseInsuranceStatus",t.value)}}const Fp=function(){return{}};function Pp(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-adverse-insurance-status-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","adverseInsuranceStatus_create")("adverseInsuranceStatus",e.DdM(2,Fp))}function Ip(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-adverse-insurance-status-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(null==d.ref?null:d.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("adverseInsuranceStatuses",t.items)}}let Dp=(()=>{class s extends pe{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","adverseInsuranceStatus","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","adverseInsuranceStatuses","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,Ap,1,2,"ng-template",null,1,e.W1O),e.YNc(3,Pp,1,3,"ng-template",null,2,e.W1O),e.YNc(5,Ip,1,2,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[he,$a,Ga],encapsulation:2}),s})(),Mp=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[gs],imports:[P.ez,U.F,E.UX,J.o,ae.u,$.P,j.t,me,k.h,se.G,G.X0.forChild({types:[{name:"adverse-insurance-status-select",component:Np,wrappers:["form-field"]},{name:"adverse-insurance-status-grid",component:Dp}]})]}),s})(),Wp=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[Mp]}),s})();class tt extends W.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class Ep extends tt{constructor(o){super("ValidateAgreementTypeExcelDataAction"),this.valid=!1,this.excelData=o}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name)}),this.validationContext.addRule(new g.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof g.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(a=>a.name),newNames:[i.newName]}):i instanceof g.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,D.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class Op extends g.wS{constructor(o,t,i,a,l){super(o,t,i,a,l,!0)}}class Lp extends g.ul{constructor(o,t,i,a=!1){super(o,t,a),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new g.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new Op("name","The agreementtype name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class $p extends tt{constructor(o){super("CreateAgreementTypeAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new Lp("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateAgreementType({input:this.input}).pipe((0,h.w)(o=>(0,ue.of)(o.data.created)))}}class Gp extends tt{constructor(o){super("UpdateAgreementTypesAction"),this.agreementTypes=o}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.agreementTypes,!0))}performAction(){this.response=this.businessProvider.data.userUpdateAgreementTypes({input:{agreementTypes:this.agreementTypes}}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}class Rp extends tt{constructor(o,t){super("UpdateAgreementTypeAction"),this.agreementType=o,this.agreementTypeId=t}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.agreementType,!0)).addRule(new g.xF("Id","Id should be a CUID and not null",this.agreementTypeId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateAgreementType({agreementTypeId:this.agreementTypeId,input:this.agreementType}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}let Ra=(()=>{class s extends W.nH{constructor(t,i,a){super("NotificationService.AgreementTypeBusinessProviderService",t,a),this.data=i}createAgreementType(t){const i=new $p(t);return i.Do(this),i.response}updateAgreementType(t,i){const a=new Rp(t,i);return a.Do(this),a.response}importAgreementTypes(t){const i=new Gp(t);return i.Do(this),i.response}validateAgreementTypeExcelData(t){const i=new Ep(t);return i.Do(this),i.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(K.ed),e.LFG(z.q),e.LFG(W.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),Qp=(()=>{class s extends W.nH{constructor(t,i,a){super("AgreementTypeService",a,t),this.businessProvider=i}createAgreementType(t){const i=Object.fromEntries(Object.entries(t).filter(([a,l])=>null!==l));return this.businessProvider.createAgreementType(i)}updateAgreementType(t,i){return this.businessProvider.updateAgreementType(t,i)}importAgreementTypes(t){return this.businessProvider.importAgreementTypes(t)}validateAgreementTypeExcelData(t){return this.businessProvider.validateAgreementTypeExcelData(t)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(Ra,8),e.LFG(Ra),e.LFG(K.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),vs=(()=>{class s extends b.m1{constructor(t,i,a,l,d,ee){super({loading:!1,agreementTypes:[],done:!1,searchQuery:"",formName:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=a,this.toast=l,this.formService=d,this.agreementTypeService=ee,this.errors$=this.select(c=>c.errors),this.loading$=this.select(c=>c.loading),this.done$=this.select(c=>c.done),this.item$=this.select(c=>c.item),this.agreementTypes$=this.select(c=>c.agreementTypes),this.paging$=this.select(c=>c.paging),this.searchQuery$=this.select(c=>c.searchQuery),this.formName$=this.select(c=>c.formName),this.actionResult$=this.select(this.item$,this.done$,(c,u)=>({item:c,done:u}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.agreementTypes$,(c,u,n,r,m)=>({errors:c,loading:u,item:n,formName:r,agreementTypes:m}),{debounce:!0}),this.input$=this.select(this.paging$,this.searchQuery$,(c,u)=>({limit:c.limit,skip:c.skip,name:u,total:c.total})),this.setFormName=this.updater((c,u)=>Object.assign(Object.assign({},c),{formName:u})),this.setItem=this.updater((c,u)=>Object.assign(Object.assign({},c),{item:u})),this.addNewAgreementType=this.updater((c,u)=>Object.assign(Object.assign({},c),{agreementTypes:[...c.agreementTypes,u]})),this.updateAgreementType=this.updater((c,u)=>Object.assign(Object.assign({},c),{agreementTypes:c.agreementTypes.map(n=>n.id===u.id?u:n)})),this.addAgreementTypes=this.updater((c,u)=>Object.assign(Object.assign({},c),{agreementTypes:c.agreementTypes.concat(u)})),this.updateAgreementTypes=this.updater((c,u)=>Object.assign(Object.assign({},c),{agreementTypes:c.agreementTypes.map(n=>u.find(m=>m.id===n.id)||n)})),this.setSearchQuery=this.updater((c,u)=>Object.assign(Object.assign({},c),{searchQuery:u})),this.loadAgreementTypeEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.data.userAgreementType({agreementTypeId:u}).pipe((0,b._b)(n=>{this.patchState({item:n.data.item,errors:n.errors,loading:!1})},n=>this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})))))),this.loadAgreementTypesEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.input$),(0,h.w)(([u,n])=>this.data.userAgreementTypes({input:n}).pipe((0,b._b)(r=>this.patchState({paging:{limit:n.limit,skip:n.skip,total:r.data.count.total},agreementTypes:r.data.items,errors:r.errors,loading:!1}),r=>this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})))))),this.createAgreementTypeEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.agreementTypeService.createAgreementType(Object.assign({},u)).pipe((0,b._b)(n=>{this.addNewAgreementType(n),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:n,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},n=>{n.graphQLErrors?(this.toast.error(n.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})):(this.toast.error(n.Message),this.formService.setErrors(n.Data))}))))),this.updateAgreementTypeEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([u,n])=>this.agreementTypeService.updateAgreementType(u,u.id).pipe((0,b._b)(r=>{this.updateAgreementType(r),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:r,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},r=>{r.graphQLErrors?(this.toast.error(r.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})):(this.toast.error(r.Message),this.formService.setErrors(r.Data))}))))),this.deleteAgreementTypeEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([u,n])=>this.data.userDeleteAgreementType({agreementTypeId:n.id}).pipe((0,b._b)(r=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:r.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},r=>{r.graphQLErrors?(this.toast.error(r.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})):(this.toast.error(r.Message),this.formService.setErrors(r.Data))}))))),this.importExcelEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.agreementTypeService.importAgreementTypes(u).pipe((0,de.K)(n=>{var r;return this.toast.error(null!==(r=n.Message)&&void 0!==r?r:"Failed to save",{duration:3e3}),q.E}),(0,y.b)(n=>{const r=JSON.parse(n.created),m=JSON.parse(n.updated),p=JSON.parse(n.failed),v=r.length+m.length+p.length;this.addAgreementTypes(r),this.updateAgreementTypes(m),this.toast.success(`${r.length} created, ${m.length} updated, ${p.length} failed of total ${v}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("agreementTypeId")?(this.route.snapshot.paramMap.get("agreementTypeId"),this.setFormName("agreementType_edit")):this.setFormName("agreementType_create")}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.agreementTypeService.validateAgreementTypeExcelData(t)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(z.q),e.LFG(O.F0),e.LFG(O.gz),e.LFG(X.F),e.LFG(Z.o),e.LFG(Qp))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function Vp(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.close.emit())})("formIsReady",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.agreementType)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let Qa=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"agreementType_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.agreementType=i.item})):t.formName&&t.formName.currentValue&&"agreementType_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadAgreementTypeEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.agreementType=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(vs),e.Y36(O.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-agreement-type-form"]],inputs:{agreementType:"agreementType",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,Vp,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[P.O5,te.M,P.Ov],encapsulation:2}),s})(),Va=(()=>{class s{constructor(){this.autoHeight=!1,this.agreementTypes=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[,{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var a;t.includes(null===(a=i.data)||void 0===a?void 0:a.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-agreement-type-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(f.x,5),2&t){let a;e.iGM(a=e.CRH())&&(i.tableView=a.first)}},inputs:{autoHeight:"autoHeight",agreementTypes:"agreementTypes"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.agreementTypes)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[f.x],encapsulation:2}),s})();function jp(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-agreement-type-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","agreementType_edit")("formControl",t.formControl)("agreementType",t.agreementType)}}const Up=function(){return{}};function Jp(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-agreement-type-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","agreementType_create")("formControl",t.formControl)("agreementType",e.DdM(3,Up))}}function zp(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-agreement-type-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(d.ref.close())}),e.qZA()}2&s&&e.Q6J("agreementTypes",o.data.items)}let Hp=(()=>{class s extends G.fS{constructor(t){super(),this.store=t,this.store.loadAgreementTypesEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.agreementTypes$.pipe((0,h.w)(i=>(0,D.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(vs))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","agreementType","send","close"],[1,"w-full","h-full","bg-white",3,"agreementTypes","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,jp,2,3,"ng-template",null,1,e.W1O),e.YNc(3,Jp,1,4,"ng-template",null,2,e.W1O),e.YNc(5,zp,1,1,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",d)("editTemplate",a)("createTemplate",l)("key",i.field.key)}},dependencies:[E.JJ,E.oH,H.$,Qa,Va],encapsulation:2}),s})();function qp(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-agreement-type-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","agreementType_edit")("agreementType",t.value)}}const Kp=function(){return{}};function Zp(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-agreement-type-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","agreementType_create")("agreementType",e.DdM(2,Kp))}function Bp(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-agreement-type-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(null==d.ref?null:d.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("agreementTypes",t.items)}}let kp=(()=>{class s extends pe{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","agreementType","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","agreementTypes","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,qp,1,2,"ng-template",null,1,e.W1O),e.YNc(3,Zp,1,3,"ng-template",null,2,e.W1O),e.YNc(5,Bp,1,2,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[he,Qa,Va],encapsulation:2}),s})(),Yp=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[vs],imports:[P.ez,U.F,E.UX,J.o,ae.u,$.P,j.t,me,k.h,se.G,G.X0.forChild({types:[{name:"agreement-type-select",component:Hp,wrappers:["form-field"]},{name:"agreement-type-grid",component:kp}]})]}),s})(),Xp=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[Yp]}),s})();var Cs=M(95614);function eh(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.close.emit())})("formIsReady",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.appointment)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let ja=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"appointment_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({id:null,name:""}),this.store.vm$.subscribe(i=>{this.appointment=i.item})):t.formName&&t.formName.currentValue&&"appointment_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadAppointmentEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.appointment=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Cs.L6),e.Y36(O.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-appointment-form"]],inputs:{appointment:"appointment",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,eh,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[P.O5,te.M,P.Ov],encapsulation:2}),s})(),Ua=(()=>{class s{constructor(){this.autoHeight=!1,this.appointments=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[{field:"location.name",headerName:"Location",filter:"agTextColumnFilter"},{field:"patient.name",headerName:"Patient",filter:"agTextColumnFilter"},{field:"clinicalProvider.name",headerName:"Clinical Provider",filter:"agTextColumnFilter"},{field:"legalCase.name",headerName:"Legal Case",filter:"agTextColumnFilter"},{field:"appointmentStatus.name",headerName:"Appointment Status",filter:"agTextColumnFilter"},{field:"medicalRecordStatus.name",headerName:"Medical Record Status",filter:"agTextColumnFilter"},{field:"visitKind.name",headerName:"Visit Kind",filter:"agTextColumnFilter"},{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{field:"appointmentDateAndTime",filter:"agDateColumnFilter"},{field:"locationId",filter:"agTextColumnFilter",hide:!0},{headerName:"Checked in",field:"checkedIn",filter:"agSetColumnFilter",cellRenderer:"checkboxRenderer"},{field:"checkedInDateTime",filter:"agDateColumnFilter"},{headerName:"MedicalReport",field:"medicalReport.name",filter:"agTextColumnFilter"},{headerName:"Bill",field:"bill.name",filter:"agTextColumnFilter"},{headerName:"Imaging",field:"imaging.name",filter:"agTextColumnFilter"},{headerName:"Duration",field:"duration",filter:"agNumberColumnFilter",aggFunc:"sum"},{field:"patientId",filter:"agTextColumnFilter",hide:!0},{field:"clinicalProviderId",filter:"agTextColumnFilter",hide:!0},{field:"legalCaseId",filter:"agTextColumnFilter",hide:!0},{field:"appointmentStatusId",filter:"agTextColumnFilter",hide:!0},{field:"visitKindId",filter:"agTextColumnFilter",hide:!0},{field:"notes",filter:"agTextColumnFilter"},{field:"recurringEventId",filter:"agTextColumnFilter",hide:!0},{headerName:"Is First Instance",field:"isFirstInstance",filter:"agSetColumnFilter",cellRenderer:"checkboxRenderer"},{field:"description",filter:"agTextColumnFilter"},{field:"start",filter:"agTextColumnFilter"},{field:"end",filter:"agTextColumnFilter"},{headerName:"All Day",field:"allDay",filter:"agSetColumnFilter",cellRenderer:"checkboxRenderer"},{field:"recurrence",filter:"agTextColumnFilter"},{headerName:"Final Visit Approved",field:"finalVisitApproved",filter:"agSetColumnFilter",cellRenderer:"checkboxRenderer"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var a;t.includes(null===(a=i.data)||void 0===a?void 0:a.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-appointment-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(f.x,5),2&t){let a;e.iGM(a=e.CRH())&&(i.tableView=a.first)}},inputs:{autoHeight:"autoHeight",appointments:"appointments"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.appointments)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[f.x],encapsulation:2}),s})();function th(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-appointment-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","appointment_edit")("formControl",t.formControl)("appointment",t.appointment)}}const ih=function(){return{}};function sh(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-appointment-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","appointment_create")("formControl",t.formControl)("appointment",e.DdM(3,ih))}}function oh(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-appointment-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(d.ref.close())}),e.qZA()}2&s&&e.Q6J("appointments",o.data.items)}let ah=(()=>{class s extends G.fS{constructor(t){super(),this.store=t,this.store.loadAppointmentsEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.appointments$.pipe((0,h.w)(i=>(0,D.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Cs.L6))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","appointment","send","close"],[1,"w-full","h-full","bg-white",3,"appointments","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,th,2,3,"ng-template",null,1,e.W1O),e.YNc(3,sh,1,4,"ng-template",null,2,e.W1O),e.YNc(5,oh,1,1,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",d)("editTemplate",a)("createTemplate",l)("key",i.field.key)}},dependencies:[E.JJ,E.oH,H.$,ja,Ua],encapsulation:2}),s})();function rh(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-appointment-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","appointment_edit")("appointment",t.value)}}const nh=function(){return{}};function lh(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-appointment-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","appointment_create")("appointment",e.DdM(2,nh))}function ch(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-appointment-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(null==d.ref?null:d.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("appointments",t.items)}}let dh=(()=>{class s extends pe{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","appointment","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","appointments","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,rh,1,2,"ng-template",null,1,e.W1O),e.YNc(3,lh,1,3,"ng-template",null,2,e.W1O),e.YNc(5,ch,1,2,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[he,ja,Ua],encapsulation:2}),s})(),uh=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[Cs.L6],imports:[P.ez,U.F,E.UX,J.o,ae.u,$.P,j.t,me,k.h,se.G,G.X0.forChild({types:[{name:"appointment-select",component:ah,wrappers:["form-field"]},{name:"appointment-grid",component:dh}]})]}),s})(),mh=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[uh]}),s})();var Ss=M(76643);function ph(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.close.emit())})("formIsReady",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.appointmentStatus)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let Ja=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"appointmentStatus_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.appointmentStatus=i.item})):t.formName&&t.formName.currentValue&&"appointmentStatus_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadAppointmentStatusEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.appointmentStatus=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Ss.E),e.Y36(O.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-appointment-status-form"]],inputs:{appointmentStatus:"appointmentStatus",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,ph,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[P.O5,te.M,P.Ov],encapsulation:2}),s})(),za=(()=>{class s{constructor(){this.autoHeight=!1,this.appointmentStatuses=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[,{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var a;t.includes(null===(a=i.data)||void 0===a?void 0:a.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-appointment-status-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(f.x,5),2&t){let a;e.iGM(a=e.CRH())&&(i.tableView=a.first)}},inputs:{autoHeight:"autoHeight",appointmentStatuses:"appointmentStatuses"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.appointmentStatuses)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[f.x],encapsulation:2}),s})();function hh(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-appointment-status-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","appointmentStatus_edit")("formControl",t.formControl)("appointmentStatus",t.appointmentStatus)}}const fh=function(){return{}};function _h(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-appointment-status-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","appointmentStatus_create")("formControl",t.formControl)("appointmentStatus",e.DdM(3,fh))}}function gh(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-appointment-status-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(d.ref.close())}),e.qZA()}2&s&&e.Q6J("appointmentStatuses",o.data.items)}let vh=(()=>{class s extends G.fS{constructor(t){super(),this.store=t,this.store.loadAppointmentStatusesEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.appointmentStatuses$.pipe((0,h.w)(i=>(0,D.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Ss.E))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","appointmentStatus","send","close"],[1,"w-full","h-full","bg-white",3,"appointmentStatuses","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,hh,2,3,"ng-template",null,1,e.W1O),e.YNc(3,_h,1,4,"ng-template",null,2,e.W1O),e.YNc(5,gh,1,1,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",d)("editTemplate",a)("createTemplate",l)("key",i.field.key)}},dependencies:[E.JJ,E.oH,H.$,Ja,za],encapsulation:2}),s})();function Ch(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-appointment-status-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","appointmentStatus_edit")("appointmentStatus",t.value)}}const Sh=function(){return{}};function bh(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-appointment-status-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","appointmentStatus_create")("appointmentStatus",e.DdM(2,Sh))}function Th(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-appointment-status-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(null==d.ref?null:d.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("appointmentStatuses",t.items)}}let yh=(()=>{class s extends pe{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","appointmentStatus","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","appointmentStatuses","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,Ch,1,2,"ng-template",null,1,e.W1O),e.YNc(3,bh,1,3,"ng-template",null,2,e.W1O),e.YNc(5,Th,1,2,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[he,Ja,za],encapsulation:2}),s})(),wh=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[Ss.E],imports:[P.ez,U.F,E.UX,J.o,ae.u,$.P,j.t,me,k.h,se.G,G.X0.forChild({types:[{name:"appointment-status-select",component:vh,wrappers:["form-field"]},{name:"appointment-status-grid",component:yh}]})]}),s})(),xh=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[wh]}),s})(),Nh=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[P.ez,O.Bz,$.P]}),s})(),Ah=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[P.ez,O.Bz,j.t,$.P,Nh]}),s})();var fe=M(54004);class it extends W.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class Fh extends it{constructor(o,t,i,a){super("ValidateAttorneyExcelDataAction"),this.valid=!1,this.excelData=o,this.firms=t,this.attorneyStatuses=i,this.attorneyTypes=a}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name),this.validationContext.addRule(new g.mi(`firmName_${i}_is_valid}`,"Firm Is Not Valid","firm.name",t.firm,this.firms,!0)),this.validationContext.addRule(new g.mi(`attorneyStatusName_${i}_is_valid}`,"Attorney Status Is Not Valid","attorneyStatus.name",t.attorneyStatus,this.attorneyStatuses,!0)),this.validationContext.addRule(new g.mi(`attorneyTypeName_${i}_is_valid}`,"Attorney Type Is Not Valid","attorneyType.name",t.attorneyType,this.attorneyTypes,!0))}),this.validationContext.addRule(new g.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof g.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(a=>a.name),newNames:[i.newName]}):i instanceof g.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,D.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class Ph extends g.wS{constructor(o,t,i,a,l){super(o,t,i,a,l,!0)}}class Ih extends g.ul{constructor(o,t,i,a=!1){super(o,t,a),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new g.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new Ph("name","The attorney name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class Dh extends it{constructor(o){super("CreateAttorneyAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new Ih("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateAttorney({input:this.input}).pipe((0,h.w)(o=>(0,ue.of)(o.data.created)))}}class Mh extends it{constructor(o){super("UpdateAttorneysAction"),this.attorneys=o}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.attorneys,!0))}performAction(){this.response=this.businessProvider.data.userUpdateAttorneys({input:{attorneys:this.attorneys}}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}class Wh extends it{constructor(o,t){super("UpdateAttorneyAction"),this.attorney=o,this.attorneyId=t}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.attorney,!0)).addRule(new g.xF("Id","Id should be a CUID and not null",this.attorneyId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateAttorney({attorneyId:this.attorneyId,input:this.attorney}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}let Ha=(()=>{class s extends W.nH{constructor(t,i,a){super("NotificationService.AttorneyBusinessProviderService",t,a),this.data=i}createAttorney(t){const i=new Dh(t);return i.Do(this),i.response}updateAttorney(t,i){const a=new Wh(t,i);return a.Do(this),a.response}importAttorneys(t){const i=new Mh(t);return i.Do(this),i.response}validateAttorneyExcelData(t,i,a,l){const d=new Fh(t,i,a,l);return d.Do(this),d.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(K.ed),e.LFG(z.q),e.LFG(W.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),Eh=(()=>{class s extends W.nH{constructor(t,i,a){super("AttorneyService",a,t),this.businessProvider=i}createAttorney(t){const i=Object.fromEntries(Object.entries(t).filter(([a,l])=>null!==l));return this.businessProvider.createAttorney(i)}updateAttorney(t,i){return this.businessProvider.updateAttorney(t,i)}importAttorneys(t){return this.businessProvider.importAttorneys(t)}validateAttorneyExcelData(t,i,a,l){return this.businessProvider.validateAttorneyExcelData(t,i,a,l)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(Ha,8),e.LFG(Ha),e.LFG(K.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),bs=(()=>{class s extends b.m1{constructor(t,i,a,l,d,ee){if(super({loading:!1,attorneys:[],done:!1,searchQuery:"",formName:void 0,firmId:void 0,attorneyStatusId:void 0,attorneyTypeId:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=a,this.toast=l,this.formService=d,this.attorneyService=ee,this.errors$=this.select(r=>r.errors),this.loading$=this.select(r=>r.loading),this.done$=this.select(r=>r.done),this.item$=this.select(r=>r.item),this.attorneys$=this.select(r=>r.attorneys),this.firms$=this.select(r=>r.firms||[]),this.attorneyStatuses$=this.select(r=>r.attorneyStatuses||[]),this.attorneyTypes$=this.select(r=>r.attorneyTypes||[]),this.firmId$=this.select(r=>r.firmId),this.attorneyStatusId$=this.select(r=>r.attorneyStatusId),this.attorneyTypeId$=this.select(r=>r.attorneyTypeId),this.paging$=this.select(r=>r.paging),this.searchQuery$=this.select(r=>r.searchQuery),this.formName$=this.select(r=>r.formName),this.actionResult$=this.select(this.item$,this.done$,(r,m)=>({item:r,done:m}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.attorneys$,this.firms$,this.attorneyStatuses$,this.attorneyTypes$,(r,m,p,v,I,B,_e,Ne)=>({errors:r,loading:m,item:p,formName:v,attorneys:I,firms:B,attorneyStatuses:_e,attorneyTypes:Ne}),{debounce:!0}),this.input$=this.select(this.paging$,this.firmId$,this.attorneyStatusId$,this.attorneyTypeId$,this.searchQuery$,(r,m,p,v,I)=>({limit:r.limit,skip:r.skip,name:I,firmId:m,attorneyStatusId:p,attorneyTypeId:v,total:r.total})),this.setFormName=this.updater((r,m)=>Object.assign(Object.assign({},r),{formName:m})),this.setFirmId=this.updater((r,m)=>Object.assign(Object.assign({},r),{firmId:m})),this.setAttorneyStatusId=this.updater((r,m)=>Object.assign(Object.assign({},r),{attorneyStatusId:m})),this.setAttorneyTypeId=this.updater((r,m)=>Object.assign(Object.assign({},r),{attorneyTypeId:m})),this.filterFirms=r=>this.data.userSelectFirms({input:{name:r}}).pipe((0,b._b)(m=>{let p=m.data.items;return this.patchState({firms:p}),p},m=>this.patchState({errors:m.graphQLErrors?m.graphQLErrors:m})),(0,fe.U)(m=>m.data.items)),this.filterAttorneyStatuses=r=>this.data.userSelectAttorneyStatuses({input:{name:r}}).pipe((0,b._b)(m=>{let p=m.data.items;return this.patchState({attorneyStatuses:p}),p},m=>this.patchState({errors:m.graphQLErrors?m.graphQLErrors:m})),(0,fe.U)(m=>m.data.items)),this.filterAttorneyTypes=r=>this.data.userSelectAttorneyTypes({input:{name:r}}).pipe((0,b._b)(m=>{let p=m.data.items;return this.patchState({attorneyTypes:p}),p},m=>this.patchState({errors:m.graphQLErrors?m.graphQLErrors:m})),(0,fe.U)(m=>m.data.items)),this.addFirm=this.updater((r,m)=>Object.assign(Object.assign({},r),{firms:r.firms.concat(m)})),this.addAttorneyStatus=this.updater((r,m)=>Object.assign(Object.assign({},r),{attorneyStatuses:r.attorneyStatuses.concat(m)})),this.addAttorneyType=this.updater((r,m)=>Object.assign(Object.assign({},r),{attorneyTypes:r.attorneyTypes.concat(m)})),this.setItem=this.updater((r,m)=>Object.assign(Object.assign({},r),{item:m})),this.addNewAttorney=this.updater((r,m)=>Object.assign(Object.assign({},r),{attorneys:[...r.attorneys,m]})),this.updateAttorney=this.updater((r,m)=>Object.assign(Object.assign({},r),{attorneys:r.attorneys.map(p=>p.id===m.id?m:p)})),this.addAttorneys=this.updater((r,m)=>Object.assign(Object.assign({},r),{attorneys:r.attorneys.concat(m)})),this.updateAttorneys=this.updater((r,m)=>Object.assign(Object.assign({},r),{attorneys:r.attorneys.map(p=>m.find(I=>I.id===p.id)||p)})),this.setSearchQuery=this.updater((r,m)=>Object.assign(Object.assign({},r),{searchQuery:m})),this.loadAttorneyEffect=this.effect(r=>r.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(m=>this.data.userAttorney({attorneyId:m}).pipe((0,b._b)(p=>{this.patchState({item:p.data.item,errors:p.errors,loading:!1})},p=>this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})))))),this.loadAttorneysEffect=this.effect(r=>r.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.input$),(0,h.w)(([m,p])=>this.data.userAttorneys({input:p}).pipe((0,b._b)(v=>this.patchState({paging:{limit:p.limit,skip:p.skip,total:v.data.count.total},attorneys:v.data.items,errors:v.errors,loading:!1}),v=>this.patchState({loading:!1,errors:v.graphQLErrors?v.graphQLErrors:v})))))),this.createAttorneyEffect=this.effect(r=>r.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(m=>this.attorneyService.createAttorney(Object.assign({},m)).pipe((0,b._b)(p=>{this.addNewAttorney(p),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:p,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},p=>{p.graphQLErrors?(this.toast.error(p.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})):(this.toast.error(p.Message),this.formService.setErrors(p.Data))}))))),this.updateAttorneyEffect=this.effect(r=>r.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([m,p])=>this.attorneyService.updateAttorney(m,m.id).pipe((0,b._b)(v=>{this.updateAttorney(v),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:v,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},v=>{v.graphQLErrors?(this.toast.error(v.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:v.graphQLErrors?v.graphQLErrors:v})):(this.toast.error(v.Message),this.formService.setErrors(v.Data))}))))),this.deleteAttorneyEffect=this.effect(r=>r.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([m,p])=>this.data.userDeleteAttorney({attorneyId:p.id}).pipe((0,b._b)(v=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:v.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},v=>{v.graphQLErrors?(this.toast.error(v.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:v.graphQLErrors?v.graphQLErrors:v})):(this.toast.error(v.Message),this.formService.setErrors(v.Data))}))))),this.importExcelEffect=this.effect(r=>r.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(m=>this.attorneyService.importAttorneys(m).pipe((0,de.K)(p=>{var v;return this.toast.error(null!==(v=p.Message)&&void 0!==v?v:"Failed to save",{duration:3e3}),q.E}),(0,y.b)(p=>{const v=JSON.parse(p.created),I=JSON.parse(p.updated),B=JSON.parse(p.failed),_e=v.length+I.length+B.length;this.addAttorneys(v),this.updateAttorneys(I),this.toast.success(`${v.length} created, ${I.length} updated, ${B.length} failed of total ${_e}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("attorneyId")?(this.route.snapshot.paramMap.get("attorneyId"),this.setFormName("attorney_edit")):this.setFormName("attorney_create"),this.route.snapshot.paramMap.has("firmId")){var c=this.route.snapshot.paramMap.get("firmId");this.setFirmId(c)}if(this.route.snapshot.paramMap.has("attorneyStatusId")){var u=this.route.snapshot.paramMap.get("attorneyStatusId");this.setAttorneyStatusId(u)}if(this.route.snapshot.paramMap.has("attorneyTypeId")){var n=this.route.snapshot.paramMap.get("attorneyTypeId");this.setAttorneyTypeId(n)}}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.attorneyService.validateAttorneyExcelData(t,i.firms,i.attorneyStatuses,i.attorneyTypes)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(z.q),e.LFG(O.F0),e.LFG(O.gz),e.LFG(X.F),e.LFG(Z.o),e.LFG(Eh))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function Oh(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.close.emit())})("formIsReady",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.attorney)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let qa=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"attorney_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.attorney=i.item})):t.formName&&t.formName.currentValue&&"attorney_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadAttorneyEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.attorney=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(bs),e.Y36(O.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-attorney-form"]],inputs:{attorney:"attorney",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,Oh,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[P.O5,te.M,P.Ov],encapsulation:2}),s})(),Ka=(()=>{class s{constructor(){this.autoHeight=!1,this.attorneys=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[{field:"firm.name",headerName:"Firm",filter:"agTextColumnFilter"},{field:"attorneyStatus.name",headerName:"Attorney Status",filter:"agTextColumnFilter"},{field:"attorneyType.name",headerName:"Attorney Type",filter:"agTextColumnFilter"},{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{field:"firmId",filter:"agTextColumnFilter",hide:!0},{field:"attorneyStatusId",filter:"agTextColumnFilter",hide:!0},{field:"attorneyTypeId",filter:"agTextColumnFilter",hide:!0},{field:"title",filter:"agTextColumnFilter"},{field:"firstName",filter:"agTextColumnFilter"},{field:"lastName",filter:"agTextColumnFilter"},{field:"address",filter:"agTextColumnFilter"},{field:"city",filter:"agTextColumnFilter"},{field:"state",filter:"agTextColumnFilter"},{field:"zip",filter:"agTextColumnFilter"},{field:"email",filter:"agTextColumnFilter"},{field:"direct",filter:"agTextColumnFilter"},{field:"fax",filter:"agTextColumnFilter"},{field:"cellPhone",filter:"agTextColumnFilter"},{field:"barNumber",filter:"agTextColumnFilter"},{field:"barState",filter:"agTextColumnFilter"},{headerName:"Do Not Disturb",field:"doNotDisturb",filter:"agSetColumnFilter",cellRenderer:"checkboxRenderer"},{field:"temp",filter:"agTextColumnFilter"},{field:"createdById",filter:"agTextColumnFilter",hide:!0},{field:"dateCreated",filter:"agDateColumnFilter"},{headerName:"Removed",field:"removed",filter:"agSetColumnFilter",cellRenderer:"checkboxRenderer"},{field:"migSource",filter:"agTextColumnFilter"},{field:"entity",filter:"agTextColumnFilter"},{headerName:"Firm Nolonger Needed",field:"firmNolongerNeeded",filter:"agSetColumnFilter",cellRenderer:"checkboxRenderer"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var a;t.includes(null===(a=i.data)||void 0===a?void 0:a.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-attorney-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(f.x,5),2&t){let a;e.iGM(a=e.CRH())&&(i.tableView=a.first)}},inputs:{autoHeight:"autoHeight",attorneys:"attorneys"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.attorneys)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[f.x],encapsulation:2}),s})();function Lh(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-attorney-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","attorney_edit")("formControl",t.formControl)("attorney",t.attorney)}}const $h=function(){return{}};function Gh(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-attorney-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","attorney_create")("formControl",t.formControl)("attorney",e.DdM(3,$h))}}function Rh(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-attorney-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(d.ref.close())}),e.qZA()}2&s&&e.Q6J("attorneys",o.data.items)}let Qh=(()=>{class s extends G.fS{constructor(t,i){super(),this.store=t,this.formService=i,this.routerKeys=["firmId","attorneyStatusId","attorneyTypeId"],this.store.loadAttorneysEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.attorneys$.pipe((0,h.w)(i=>(0,D.of)(i)))}formRouterKeyDidChange(t){this.store.setFirmId(t.firmId),this.store.setAttorneyStatusId(t.attorneyStatusId),this.store.setAttorneyTypeId(t.attorneyTypeId),this.store.loadAttorneysEffect()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(bs),e.Y36(Z.o))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e._Bn([bs]),e.qOj],decls:7,vars:7,consts:[[3,"to","control","listTemplate","editTemplate","createTemplate","key","routerKeys","selectionChanged","formRouterKeyDidChange"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","attorney","send","close"],[1,"w-full","h-full","bg-white",3,"attorneys","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value})("formRouterKeyDidChange",function(l){return i.formRouterKeyDidChange(l)}),e.qZA(),e.YNc(1,Lh,2,3,"ng-template",null,1,e.W1O),e.YNc(3,Gh,1,4,"ng-template",null,2,e.W1O),e.YNc(5,Rh,1,1,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("listTemplate",d)("editTemplate",a)("createTemplate",l)("key",i.field.key)("routerKeys",i.routerKeys)}},dependencies:[E.JJ,E.oH,H.$,qa,Ka],encapsulation:2}),s})();function Vh(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-attorney-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","attorney_edit")("attorney",t.value)}}const jh=function(){return{}};function Uh(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-attorney-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","attorney_create")("attorney",e.DdM(2,jh))}function Jh(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-attorney-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(null==d.ref?null:d.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("attorneys",t.items)}}let zh=(()=>{class s extends pe{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","attorney","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","attorneys","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,Vh,1,2,"ng-template",null,1,e.W1O),e.YNc(3,Uh,1,3,"ng-template",null,2,e.W1O),e.YNc(5,Jh,1,2,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[he,qa,Ka],encapsulation:2}),s})(),Hh=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[P.ez,U.F,E.UX,J.o,ae.u,$.P,j.t,me,k.h,se.G,G.X0.forChild({types:[{name:"attorney-select",component:Qh,wrappers:["form-field"]},{name:"attorney-grid",component:zh}]})]}),s})(),qh=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[Hh]}),s})();class st extends W.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class Kh extends st{constructor(o){super("ValidateAttorneyStatusExcelDataAction"),this.valid=!1,this.excelData=o}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name)}),this.validationContext.addRule(new g.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof g.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(a=>a.name),newNames:[i.newName]}):i instanceof g.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,D.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class Zh extends g.wS{constructor(o,t,i,a,l){super(o,t,i,a,l,!0)}}class Bh extends g.ul{constructor(o,t,i,a=!1){super(o,t,a),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new g.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new Zh("name","The attorneystatus name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class kh extends st{constructor(o){super("CreateAttorneyStatusAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new Bh("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateAttorneyStatus({input:this.input}).pipe((0,h.w)(o=>(0,ue.of)(o.data.created)))}}class Yh extends st{constructor(o){super("UpdateAttorneyStatusesAction"),this.attorneyStatuses=o}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.attorneyStatuses,!0))}performAction(){this.response=this.businessProvider.data.userUpdateAttorneyStatuses({input:{attorneyStatuses:this.attorneyStatuses}}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}class Xh extends st{constructor(o,t){super("UpdateAttorneyStatusAction"),this.attorneyStatus=o,this.attorneyStatusId=t}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.attorneyStatus,!0)).addRule(new g.xF("Id","Id should be a CUID and not null",this.attorneyStatusId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateAttorneyStatus({attorneyStatusId:this.attorneyStatusId,input:this.attorneyStatus}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}let Za=(()=>{class s extends W.nH{constructor(t,i,a){super("NotificationService.AttorneyStatusBusinessProviderService",t,a),this.data=i}createAttorneyStatus(t){const i=new kh(t);return i.Do(this),i.response}updateAttorneyStatus(t,i){const a=new Xh(t,i);return a.Do(this),a.response}importAttorneyStatuses(t){const i=new Yh(t);return i.Do(this),i.response}validateAttorneyStatusExcelData(t){const i=new Kh(t);return i.Do(this),i.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(K.ed),e.LFG(z.q),e.LFG(W.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),ef=(()=>{class s extends W.nH{constructor(t,i,a){super("AttorneyStatusService",a,t),this.businessProvider=i}createAttorneyStatus(t){const i=Object.fromEntries(Object.entries(t).filter(([a,l])=>null!==l));return this.businessProvider.createAttorneyStatus(i)}updateAttorneyStatus(t,i){return this.businessProvider.updateAttorneyStatus(t,i)}importAttorneyStatuses(t){return this.businessProvider.importAttorneyStatuses(t)}validateAttorneyStatusExcelData(t){return this.businessProvider.validateAttorneyStatusExcelData(t)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(Za,8),e.LFG(Za),e.LFG(K.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),Ts=(()=>{class s extends b.m1{constructor(t,i,a,l,d,ee){super({loading:!1,attorneyStatuses:[],done:!1,searchQuery:"",formName:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=a,this.toast=l,this.formService=d,this.attorneyStatusService=ee,this.errors$=this.select(c=>c.errors),this.loading$=this.select(c=>c.loading),this.done$=this.select(c=>c.done),this.item$=this.select(c=>c.item),this.attorneyStatuses$=this.select(c=>c.attorneyStatuses),this.paging$=this.select(c=>c.paging),this.searchQuery$=this.select(c=>c.searchQuery),this.formName$=this.select(c=>c.formName),this.actionResult$=this.select(this.item$,this.done$,(c,u)=>({item:c,done:u}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.attorneyStatuses$,(c,u,n,r,m)=>({errors:c,loading:u,item:n,formName:r,attorneyStatuses:m}),{debounce:!0}),this.input$=this.select(this.paging$,this.searchQuery$,(c,u)=>({limit:c.limit,skip:c.skip,name:u,total:c.total})),this.setFormName=this.updater((c,u)=>Object.assign(Object.assign({},c),{formName:u})),this.setItem=this.updater((c,u)=>Object.assign(Object.assign({},c),{item:u})),this.addNewAttorneyStatus=this.updater((c,u)=>Object.assign(Object.assign({},c),{attorneyStatuses:[...c.attorneyStatuses,u]})),this.updateAttorneyStatus=this.updater((c,u)=>Object.assign(Object.assign({},c),{attorneyStatuses:c.attorneyStatuses.map(n=>n.id===u.id?u:n)})),this.addAttorneyStatuses=this.updater((c,u)=>Object.assign(Object.assign({},c),{attorneyStatuses:c.attorneyStatuses.concat(u)})),this.updateAttorneyStatuses=this.updater((c,u)=>Object.assign(Object.assign({},c),{attorneyStatuses:c.attorneyStatuses.map(n=>u.find(m=>m.id===n.id)||n)})),this.setSearchQuery=this.updater((c,u)=>Object.assign(Object.assign({},c),{searchQuery:u})),this.loadAttorneyStatusEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.data.userAttorneyStatus({attorneyStatusId:u}).pipe((0,b._b)(n=>{this.patchState({item:n.data.item,errors:n.errors,loading:!1})},n=>this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})))))),this.loadAttorneyStatusesEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.input$),(0,h.w)(([u,n])=>this.data.userAttorneyStatuses({input:n}).pipe((0,b._b)(r=>this.patchState({paging:{limit:n.limit,skip:n.skip,total:r.data.count.total},attorneyStatuses:r.data.items,errors:r.errors,loading:!1}),r=>this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})))))),this.createAttorneyStatusEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.attorneyStatusService.createAttorneyStatus(Object.assign({},u)).pipe((0,b._b)(n=>{this.addNewAttorneyStatus(n),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:n,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},n=>{n.graphQLErrors?(this.toast.error(n.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})):(this.toast.error(n.Message),this.formService.setErrors(n.Data))}))))),this.updateAttorneyStatusEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([u,n])=>this.attorneyStatusService.updateAttorneyStatus(u,u.id).pipe((0,b._b)(r=>{this.updateAttorneyStatus(r),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:r,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},r=>{r.graphQLErrors?(this.toast.error(r.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})):(this.toast.error(r.Message),this.formService.setErrors(r.Data))}))))),this.deleteAttorneyStatusEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([u,n])=>this.data.userDeleteAttorneyStatus({attorneyStatusId:n.id}).pipe((0,b._b)(r=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:r.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},r=>{r.graphQLErrors?(this.toast.error(r.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})):(this.toast.error(r.Message),this.formService.setErrors(r.Data))}))))),this.importExcelEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.attorneyStatusService.importAttorneyStatuses(u).pipe((0,de.K)(n=>{var r;return this.toast.error(null!==(r=n.Message)&&void 0!==r?r:"Failed to save",{duration:3e3}),q.E}),(0,y.b)(n=>{const r=JSON.parse(n.created),m=JSON.parse(n.updated),p=JSON.parse(n.failed),v=r.length+m.length+p.length;this.addAttorneyStatuses(r),this.updateAttorneyStatuses(m),this.toast.success(`${r.length} created, ${m.length} updated, ${p.length} failed of total ${v}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("attorneyStatusId")?(this.route.snapshot.paramMap.get("attorneyStatusId"),this.setFormName("attorneyStatus_edit")):this.setFormName("attorneyStatus_create")}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.attorneyStatusService.validateAttorneyStatusExcelData(t)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(z.q),e.LFG(O.F0),e.LFG(O.gz),e.LFG(X.F),e.LFG(Z.o),e.LFG(ef))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function tf(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.close.emit())})("formIsReady",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.attorneyStatus)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let Ba=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"attorneyStatus_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.attorneyStatus=i.item})):t.formName&&t.formName.currentValue&&"attorneyStatus_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadAttorneyStatusEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.attorneyStatus=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Ts),e.Y36(O.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-attorney-status-form"]],inputs:{attorneyStatus:"attorneyStatus",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,tf,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[P.O5,te.M,P.Ov],encapsulation:2}),s})(),ka=(()=>{class s{constructor(){this.autoHeight=!1,this.attorneyStatuses=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[,{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var a;t.includes(null===(a=i.data)||void 0===a?void 0:a.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-attorney-status-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(f.x,5),2&t){let a;e.iGM(a=e.CRH())&&(i.tableView=a.first)}},inputs:{autoHeight:"autoHeight",attorneyStatuses:"attorneyStatuses"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.attorneyStatuses)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[f.x],encapsulation:2}),s})();function sf(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-attorney-status-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","attorneyStatus_edit")("formControl",t.formControl)("attorneyStatus",t.attorneyStatus)}}const of=function(){return{}};function af(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-attorney-status-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","attorneyStatus_create")("formControl",t.formControl)("attorneyStatus",e.DdM(3,of))}}function rf(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-attorney-status-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(d.ref.close())}),e.qZA()}2&s&&e.Q6J("attorneyStatuses",o.data.items)}let nf=(()=>{class s extends G.fS{constructor(t){super(),this.store=t,this.store.loadAttorneyStatusesEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.attorneyStatuses$.pipe((0,h.w)(i=>(0,D.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Ts))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","attorneyStatus","send","close"],[1,"w-full","h-full","bg-white",3,"attorneyStatuses","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,sf,2,3,"ng-template",null,1,e.W1O),e.YNc(3,af,1,4,"ng-template",null,2,e.W1O),e.YNc(5,rf,1,1,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",d)("editTemplate",a)("createTemplate",l)("key",i.field.key)}},dependencies:[E.JJ,E.oH,H.$,Ba,ka],encapsulation:2}),s})();function lf(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-attorney-status-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","attorneyStatus_edit")("attorneyStatus",t.value)}}const cf=function(){return{}};function df(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-attorney-status-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","attorneyStatus_create")("attorneyStatus",e.DdM(2,cf))}function uf(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-attorney-status-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(null==d.ref?null:d.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("attorneyStatuses",t.items)}}let mf=(()=>{class s extends pe{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","attorneyStatus","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","attorneyStatuses","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,lf,1,2,"ng-template",null,1,e.W1O),e.YNc(3,df,1,3,"ng-template",null,2,e.W1O),e.YNc(5,uf,1,2,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[he,Ba,ka],encapsulation:2}),s})(),pf=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[Ts],imports:[P.ez,U.F,E.UX,J.o,ae.u,$.P,j.t,me,k.h,se.G,G.X0.forChild({types:[{name:"attorney-status-select",component:nf,wrappers:["form-field"]},{name:"attorney-status-grid",component:mf}]})]}),s})(),hf=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[pf]}),s})();class ot extends W.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class ff extends ot{constructor(o){super("ValidateAttorneyTypeExcelDataAction"),this.valid=!1,this.excelData=o}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name)}),this.validationContext.addRule(new g.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof g.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(a=>a.name),newNames:[i.newName]}):i instanceof g.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,D.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class _f extends g.wS{constructor(o,t,i,a,l){super(o,t,i,a,l,!0)}}class gf extends g.ul{constructor(o,t,i,a=!1){super(o,t,a),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new g.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new _f("name","The attorneytype name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class vf extends ot{constructor(o){super("CreateAttorneyTypeAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new gf("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateAttorneyType({input:this.input}).pipe((0,h.w)(o=>(0,ue.of)(o.data.created)))}}class Cf extends ot{constructor(o){super("UpdateAttorneyTypesAction"),this.attorneyTypes=o}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.attorneyTypes,!0))}performAction(){this.response=this.businessProvider.data.userUpdateAttorneyTypes({input:{attorneyTypes:this.attorneyTypes}}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}class Sf extends ot{constructor(o,t){super("UpdateAttorneyTypeAction"),this.attorneyType=o,this.attorneyTypeId=t}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.attorneyType,!0)).addRule(new g.xF("Id","Id should be a CUID and not null",this.attorneyTypeId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateAttorneyType({attorneyTypeId:this.attorneyTypeId,input:this.attorneyType}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}let Ya=(()=>{class s extends W.nH{constructor(t,i,a){super("NotificationService.AttorneyTypeBusinessProviderService",t,a),this.data=i}createAttorneyType(t){const i=new vf(t);return i.Do(this),i.response}updateAttorneyType(t,i){const a=new Sf(t,i);return a.Do(this),a.response}importAttorneyTypes(t){const i=new Cf(t);return i.Do(this),i.response}validateAttorneyTypeExcelData(t){const i=new ff(t);return i.Do(this),i.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(K.ed),e.LFG(z.q),e.LFG(W.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),bf=(()=>{class s extends W.nH{constructor(t,i,a){super("AttorneyTypeService",a,t),this.businessProvider=i}createAttorneyType(t){const i=Object.fromEntries(Object.entries(t).filter(([a,l])=>null!==l));return this.businessProvider.createAttorneyType(i)}updateAttorneyType(t,i){return this.businessProvider.updateAttorneyType(t,i)}importAttorneyTypes(t){return this.businessProvider.importAttorneyTypes(t)}validateAttorneyTypeExcelData(t){return this.businessProvider.validateAttorneyTypeExcelData(t)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(Ya,8),e.LFG(Ya),e.LFG(K.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),ys=(()=>{class s extends b.m1{constructor(t,i,a,l,d,ee){super({loading:!1,attorneyTypes:[],done:!1,searchQuery:"",formName:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=a,this.toast=l,this.formService=d,this.attorneyTypeService=ee,this.errors$=this.select(c=>c.errors),this.loading$=this.select(c=>c.loading),this.done$=this.select(c=>c.done),this.item$=this.select(c=>c.item),this.attorneyTypes$=this.select(c=>c.attorneyTypes),this.paging$=this.select(c=>c.paging),this.searchQuery$=this.select(c=>c.searchQuery),this.formName$=this.select(c=>c.formName),this.actionResult$=this.select(this.item$,this.done$,(c,u)=>({item:c,done:u}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.attorneyTypes$,(c,u,n,r,m)=>({errors:c,loading:u,item:n,formName:r,attorneyTypes:m}),{debounce:!0}),this.input$=this.select(this.paging$,this.searchQuery$,(c,u)=>({limit:c.limit,skip:c.skip,name:u,total:c.total})),this.setFormName=this.updater((c,u)=>Object.assign(Object.assign({},c),{formName:u})),this.setItem=this.updater((c,u)=>Object.assign(Object.assign({},c),{item:u})),this.addNewAttorneyType=this.updater((c,u)=>Object.assign(Object.assign({},c),{attorneyTypes:[...c.attorneyTypes,u]})),this.updateAttorneyType=this.updater((c,u)=>Object.assign(Object.assign({},c),{attorneyTypes:c.attorneyTypes.map(n=>n.id===u.id?u:n)})),this.addAttorneyTypes=this.updater((c,u)=>Object.assign(Object.assign({},c),{attorneyTypes:c.attorneyTypes.concat(u)})),this.updateAttorneyTypes=this.updater((c,u)=>Object.assign(Object.assign({},c),{attorneyTypes:c.attorneyTypes.map(n=>u.find(m=>m.id===n.id)||n)})),this.setSearchQuery=this.updater((c,u)=>Object.assign(Object.assign({},c),{searchQuery:u})),this.loadAttorneyTypeEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.data.userAttorneyType({attorneyTypeId:u}).pipe((0,b._b)(n=>{this.patchState({item:n.data.item,errors:n.errors,loading:!1})},n=>this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})))))),this.loadAttorneyTypesEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.input$),(0,h.w)(([u,n])=>this.data.userAttorneyTypes({input:n}).pipe((0,b._b)(r=>this.patchState({paging:{limit:n.limit,skip:n.skip,total:r.data.count.total},attorneyTypes:r.data.items,errors:r.errors,loading:!1}),r=>this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})))))),this.createAttorneyTypeEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.attorneyTypeService.createAttorneyType(Object.assign({},u)).pipe((0,b._b)(n=>{this.addNewAttorneyType(n),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:n,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},n=>{n.graphQLErrors?(this.toast.error(n.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})):(this.toast.error(n.Message),this.formService.setErrors(n.Data))}))))),this.updateAttorneyTypeEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([u,n])=>this.attorneyTypeService.updateAttorneyType(u,u.id).pipe((0,b._b)(r=>{this.updateAttorneyType(r),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:r,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},r=>{r.graphQLErrors?(this.toast.error(r.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})):(this.toast.error(r.Message),this.formService.setErrors(r.Data))}))))),this.deleteAttorneyTypeEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([u,n])=>this.data.userDeleteAttorneyType({attorneyTypeId:n.id}).pipe((0,b._b)(r=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:r.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},r=>{r.graphQLErrors?(this.toast.error(r.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})):(this.toast.error(r.Message),this.formService.setErrors(r.Data))}))))),this.importExcelEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.attorneyTypeService.importAttorneyTypes(u).pipe((0,de.K)(n=>{var r;return this.toast.error(null!==(r=n.Message)&&void 0!==r?r:"Failed to save",{duration:3e3}),q.E}),(0,y.b)(n=>{const r=JSON.parse(n.created),m=JSON.parse(n.updated),p=JSON.parse(n.failed),v=r.length+m.length+p.length;this.addAttorneyTypes(r),this.updateAttorneyTypes(m),this.toast.success(`${r.length} created, ${m.length} updated, ${p.length} failed of total ${v}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("attorneyTypeId")?(this.route.snapshot.paramMap.get("attorneyTypeId"),this.setFormName("attorneyType_edit")):this.setFormName("attorneyType_create")}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.attorneyTypeService.validateAttorneyTypeExcelData(t)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(z.q),e.LFG(O.F0),e.LFG(O.gz),e.LFG(X.F),e.LFG(Z.o),e.LFG(bf))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function Tf(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.close.emit())})("formIsReady",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.attorneyType)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let Xa=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"attorneyType_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.attorneyType=i.item})):t.formName&&t.formName.currentValue&&"attorneyType_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadAttorneyTypeEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.attorneyType=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(ys),e.Y36(O.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-attorney-type-form"]],inputs:{attorneyType:"attorneyType",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,Tf,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[P.O5,te.M,P.Ov],encapsulation:2}),s})(),er=(()=>{class s{constructor(){this.autoHeight=!1,this.attorneyTypes=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[,{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var a;t.includes(null===(a=i.data)||void 0===a?void 0:a.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-attorney-type-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(f.x,5),2&t){let a;e.iGM(a=e.CRH())&&(i.tableView=a.first)}},inputs:{autoHeight:"autoHeight",attorneyTypes:"attorneyTypes"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.attorneyTypes)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[f.x],encapsulation:2}),s})();function yf(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-attorney-type-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","attorneyType_edit")("formControl",t.formControl)("attorneyType",t.attorneyType)}}const wf=function(){return{}};function xf(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-attorney-type-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","attorneyType_create")("formControl",t.formControl)("attorneyType",e.DdM(3,wf))}}function Nf(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-attorney-type-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(d.ref.close())}),e.qZA()}2&s&&e.Q6J("attorneyTypes",o.data.items)}let Af=(()=>{class s extends G.fS{constructor(t){super(),this.store=t,this.store.loadAttorneyTypesEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.attorneyTypes$.pipe((0,h.w)(i=>(0,D.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(ys))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","attorneyType","send","close"],[1,"w-full","h-full","bg-white",3,"attorneyTypes","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,yf,2,3,"ng-template",null,1,e.W1O),e.YNc(3,xf,1,4,"ng-template",null,2,e.W1O),e.YNc(5,Nf,1,1,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",d)("editTemplate",a)("createTemplate",l)("key",i.field.key)}},dependencies:[E.JJ,E.oH,H.$,Xa,er],encapsulation:2}),s})();function Ff(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-attorney-type-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","attorneyType_edit")("attorneyType",t.value)}}const Pf=function(){return{}};function If(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-attorney-type-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","attorneyType_create")("attorneyType",e.DdM(2,Pf))}function Df(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-attorney-type-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(null==d.ref?null:d.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("attorneyTypes",t.items)}}let Mf=(()=>{class s extends pe{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","attorneyType","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","attorneyTypes","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,Ff,1,2,"ng-template",null,1,e.W1O),e.YNc(3,If,1,3,"ng-template",null,2,e.W1O),e.YNc(5,Df,1,2,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[he,Xa,er],encapsulation:2}),s})(),Wf=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[ys],imports:[P.ez,U.F,E.UX,J.o,ae.u,$.P,j.t,me,k.h,se.G,G.X0.forChild({types:[{name:"attorney-type-select",component:Af,wrappers:["form-field"]},{name:"attorney-type-grid",component:Mf}]})]}),s})(),Ef=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[Wf]}),s})();var at=M(47380);function Of(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.close.emit())})("formIsReady",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.authorization)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let tr=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"authorization_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({id:null,name:""}),this.store.vm$.subscribe(i=>{this.authorization=i.item})):t.formName&&t.formName.currentValue&&"authorization_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadAuthorizationEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.authorization=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(at.B),e.Y36(O.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-authorization-form"]],inputs:{authorization:"authorization",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,Of,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[P.O5,te.M,P.Ov],encapsulation:2}),s})(),ir=(()=>{class s{constructor(){this.autoHeight=!1,this.authorizations=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[{field:"vendor.name",headerName:"Vendor",filter:"agTextColumnFilter"},{field:"authorizationCategory.name",headerName:"Authorization Category",filter:"agTextColumnFilter"},{field:"authorizationType.name",headerName:"Authorization Type",filter:"agTextColumnFilter"},{field:"procedure.name",headerName:"Procedure",filter:"agTextColumnFilter"},{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{field:"vendorId",filter:"agTextColumnFilter",hide:!0},{field:"authorizationCategoryId",filter:"agTextColumnFilter",hide:!0},{field:"authorizationTypeId",filter:"agTextColumnFilter",hide:!0},{field:"requestDescription",filter:"agTextColumnFilter"},{headerName:"Duration or Quantity",field:"durationOrQuantity",valueFormatter:t=>{var i;return(0,_.oBD)(null===(i=t.data)||void 0===i?void 0:i.durationOrQuantity,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{field:"unit",filter:"agTextColumnFilter"},{field:"cptCode",filter:"agTextColumnFilter"},{field:"procedureId",filter:"agTextColumnFilter",hide:!0}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var a;t.includes(null===(a=i.data)||void 0===a?void 0:a.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-authorization-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(f.x,5),2&t){let a;e.iGM(a=e.CRH())&&(i.tableView=a.first)}},inputs:{autoHeight:"autoHeight",authorizations:"authorizations"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","data","showSidebar","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("data",i.authorizations)("showSidebar",!1)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[f.x],encapsulation:2}),s})();function Lf(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-authorization-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","authorization_edit")("formControl",t.formControl)("authorization",t.authorization)}}const $f=function(){return{}};function Gf(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-authorization-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","authorization_create")("formControl",t.formControl)("authorization",e.DdM(3,$f))}}function Rf(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-authorization-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(d.ref.close())}),e.qZA()}2&s&&e.Q6J("authorizations",o.data.items)}let Qf=(()=>{class s extends G.fS{constructor(t){super(),this.store=t,this.store.loadAuthorizationsEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.authorizations$.pipe((0,h.w)(i=>(0,D.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(at.B))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e._Bn([at.B]),e.qOj],decls:7,vars:5,consts:[[3,"to","control","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","authorization","send","close"],[1,"w-full","h-full","bg-white",3,"authorizations","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"ui-select-form",0),e.YNc(1,Lf,2,3,"ng-template",null,1,e.W1O),e.YNc(3,Gf,1,4,"ng-template",null,2,e.W1O),e.YNc(5,Rf,1,1,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[E.JJ,E.oH,H.$,tr,ir],encapsulation:2}),s})();function Vf(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-authorization-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","authorization_edit")("authorization",t.value)}}const jf=function(){return{}};function Uf(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-authorization-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","authorization_create")("authorization",e.DdM(2,jf))}function Jf(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-authorization-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(null==d.ref?null:d.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("authorizations",t.items)}}let zf=(()=>{class s extends pe{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:6,consts:[[3,"data","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","authorization","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","authorizations","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,Vf,1,2,"ng-template",null,1,e.W1O),e.YNc(3,Uf,1,3,"ng-template",null,2,e.W1O),e.YNc(5,Jf,1,2,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("data",i.data)("title",i.to.title)("onSave",i.onSave)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[he,tr,ir],encapsulation:2}),s})(),Hf=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[at.B],imports:[P.ez,U.F,E.UX,J.o,ae.u,$.P,j.t,me,k.h,se.G,G.X0.forChild({types:[{name:"authorization-select",component:Qf,wrappers:["form-field"]},{name:"authorization-grid",component:zf}]})]}),s})(),qf=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[Hf]}),s})();class rt extends W.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class Kf extends rt{constructor(o){super("ValidateAuthorizationCategoryExcelDataAction"),this.valid=!1,this.excelData=o}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name)}),this.validationContext.addRule(new g.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof g.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(a=>a.name),newNames:[i.newName]}):i instanceof g.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,D.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class Zf extends g.wS{constructor(o,t,i,a,l){super(o,t,i,a,l,!0)}}class Bf extends g.ul{constructor(o,t,i,a=!1){super(o,t,a),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new g.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new Zf("name","The authorizationcategory name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class kf extends rt{constructor(o){super("CreateAuthorizationCategoryAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new Bf("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateAuthorizationCategory({input:this.input}).pipe((0,h.w)(o=>(0,ue.of)(o.data.created)))}}class Yf extends rt{constructor(o){super("UpdateAuthorizationCategoriesAction"),this.authorizationCategories=o}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.authorizationCategories,!0))}performAction(){this.response=this.businessProvider.data.userUpdateAuthorizationCategories({input:{authorizationCategories:this.authorizationCategories}}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}class Xf extends rt{constructor(o,t){super("UpdateAuthorizationCategoryAction"),this.authorizationCategory=o,this.authorizationCategoryId=t}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.authorizationCategory,!0)).addRule(new g.xF("Id","Id should be a CUID and not null",this.authorizationCategoryId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateAuthorizationCategory({authorizationCategoryId:this.authorizationCategoryId,input:this.authorizationCategory}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}let sr=(()=>{class s extends W.nH{constructor(t,i,a){super("NotificationService.AuthorizationCategoryBusinessProviderService",t,a),this.data=i}createAuthorizationCategory(t){const i=new kf(t);return i.Do(this),i.response}updateAuthorizationCategory(t,i){const a=new Xf(t,i);return a.Do(this),a.response}importAuthorizationCategories(t){const i=new Yf(t);return i.Do(this),i.response}validateAuthorizationCategoryExcelData(t){const i=new Kf(t);return i.Do(this),i.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(K.ed),e.LFG(z.q),e.LFG(W.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),e_=(()=>{class s extends W.nH{constructor(t,i,a){super("AuthorizationCategoryService",a,t),this.businessProvider=i}createAuthorizationCategory(t){return this.businessProvider.createAuthorizationCategory(t)}updateAuthorizationCategory(t,i){return this.businessProvider.updateAuthorizationCategory(t,i)}importAuthorizationCategories(t){return this.businessProvider.importAuthorizationCategories(t)}validateAuthorizationCategoryExcelData(t){return this.businessProvider.validateAuthorizationCategoryExcelData(t)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(sr,8),e.LFG(sr),e.LFG(K.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),nt=(()=>{class s extends b.m1{constructor(t,i,a,l,d,ee){super({loading:!1,authorizationCategories:[],done:!1,searchQuery:"",formName:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=a,this.toast=l,this.formService=d,this.authorizationCategoryService=ee,this.errors$=this.select(c=>c.errors),this.loading$=this.select(c=>c.loading),this.done$=this.select(c=>c.done),this.item$=this.select(c=>c.item),this.authorizationCategories$=this.select(c=>c.authorizationCategories),this.paging$=this.select(c=>c.paging),this.searchQuery$=this.select(c=>c.searchQuery),this.formName$=this.select(c=>c.formName),this.actionResult$=this.select(this.item$,this.done$,(c,u)=>({item:c,done:u}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.authorizationCategories$,(c,u,n,r,m)=>({errors:c,loading:u,item:n,formName:r,authorizationCategories:m}),{debounce:!0}),this.input$=this.select(this.paging$,this.searchQuery$,(c,u)=>({limit:c.limit,skip:c.skip,name:u,total:c.total})),this.setFormName=this.updater((c,u)=>Object.assign(Object.assign({},c),{formName:u})),this.setItem=this.updater((c,u)=>Object.assign(Object.assign({},c),{item:u})),this.addNewAuthorizationCategory=this.updater((c,u)=>Object.assign(Object.assign({},c),{authorizationCategories:[...c.authorizationCategories,u]})),this.updateAuthorizationCategory=this.updater((c,u)=>Object.assign(Object.assign({},c),{authorizationCategories:c.authorizationCategories.map(n=>n.id===u.id?u:n)})),this.addAuthorizationCategories=this.updater((c,u)=>Object.assign(Object.assign({},c),{authorizationCategories:c.authorizationCategories.concat(u)})),this.updateAuthorizationCategories=this.updater((c,u)=>Object.assign(Object.assign({},c),{authorizationCategories:c.authorizationCategories.map(n=>u.find(m=>m.id===n.id)||n)})),this.setSearchQuery=this.updater((c,u)=>Object.assign(Object.assign({},c),{searchQuery:u})),this.loadAuthorizationCategoryEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.data.userAuthorizationCategory({authorizationCategoryId:u}).pipe((0,b._b)(n=>{this.patchState({item:n.data.item,errors:n.errors,loading:!1})},n=>this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})))))),this.loadAuthorizationCategoriesEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.input$),(0,h.w)(([u,n])=>this.data.userAuthorizationCategories({input:n}).pipe((0,b._b)(r=>this.patchState({paging:{limit:n.limit,skip:n.skip,total:r.data.count.total},authorizationCategories:r.data.items,errors:r.errors,loading:!1}),r=>this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})))))),this.createAuthorizationCategoryEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.authorizationCategoryService.createAuthorizationCategory(Object.assign({},u)).pipe((0,b._b)(n=>{this.addNewAuthorizationCategory(n),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:n,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},n=>{n.graphQLErrors?(this.toast.error(n.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})):(this.toast.error(n.Message),this.formService.setErrors(n.Data))}))))),this.updateAuthorizationCategoryEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([u,n])=>this.authorizationCategoryService.updateAuthorizationCategory(u,u.id).pipe((0,b._b)(r=>{this.updateAuthorizationCategory(r),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:r,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},r=>{r.graphQLErrors?(this.toast.error(r.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})):(this.toast.error(r.Message),this.formService.setErrors(r.Data))}))))),this.deleteAuthorizationCategoryEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([u,n])=>this.data.userDeleteAuthorizationCategory({authorizationCategoryId:n.id}).pipe((0,b._b)(r=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:r.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},r=>{r.graphQLErrors?(this.toast.error(r.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})):(this.toast.error(r.Message),this.formService.setErrors(r.Data))}))))),this.importExcelEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.authorizationCategoryService.importAuthorizationCategories(u).pipe((0,de.K)(n=>{var r;return this.toast.error(null!==(r=n.Message)&&void 0!==r?r:"Failed to save",{duration:3e3}),q.E}),(0,y.b)(n=>{const r=JSON.parse(n.created),m=JSON.parse(n.updated),p=JSON.parse(n.failed),v=r.length+m.length+p.length;this.addAuthorizationCategories(r),this.updateAuthorizationCategories(m),this.toast.success(`${r.length} created, ${m.length} updated, ${p.length} failed of total ${v}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("authorizationCategoryId")?(this.route.snapshot.paramMap.get("authorizationCategoryId"),this.setFormName("authorizationCategory_edit")):this.setFormName("authorizationCategory_create")}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.authorizationCategoryService.validateAuthorizationCategoryExcelData(t)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(z.q),e.LFG(O.F0),e.LFG(O.gz),e.LFG(X.F),e.LFG(Z.o),e.LFG(e_))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function t_(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.close.emit())})("formIsReady",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.authorizationCategory)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let or=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"authorizationCategory_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({id:null,name:""}),this.store.vm$.subscribe(i=>{this.authorizationCategory=i.item})):t.formName&&t.formName.currentValue&&"authorizationCategory_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadAuthorizationCategoryEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.authorizationCategory=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(nt),e.Y36(O.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-authorization-category-form"]],inputs:{authorizationCategory:"authorizationCategory",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,t_,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[P.O5,te.M,P.Ov],encapsulation:2}),s})(),ar=(()=>{class s{constructor(){this.autoHeight=!1,this.authorizationCategories=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[,{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var a;t.includes(null===(a=i.data)||void 0===a?void 0:a.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-authorization-category-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(f.x,5),2&t){let a;e.iGM(a=e.CRH())&&(i.tableView=a.first)}},inputs:{autoHeight:"autoHeight",authorizationCategories:"authorizationCategories"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:6,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.authorizationCategories)("showSidebar",!1)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[f.x],encapsulation:2}),s})();function i_(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-authorization-category-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","authorizationCategory_edit")("formControl",t.formControl)("authorizationCategory",t.authorizationCategory)}}const s_=function(){return{}};function o_(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-authorization-category-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","authorizationCategory_create")("formControl",t.formControl)("authorizationCategory",e.DdM(3,s_))}}function a_(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-authorization-category-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(d.ref.close())}),e.qZA()}2&s&&e.Q6J("authorizationCategories",o.data.items)}let r_=(()=>{class s extends G.fS{constructor(t){super(),this.store=t,this.store.loadAuthorizationCategoriesEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.authorizationCategories$.pipe((0,h.w)(i=>(0,D.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(nt))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e._Bn([nt]),e.qOj],decls:7,vars:5,consts:[[3,"to","control","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","authorizationCategory","send","close"],[1,"w-full","h-full","bg-white",3,"authorizationCategories","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"ui-select-form",0),e.YNc(1,i_,2,3,"ng-template",null,1,e.W1O),e.YNc(3,o_,1,4,"ng-template",null,2,e.W1O),e.YNc(5,a_,1,1,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[E.JJ,E.oH,H.$,or,ar],encapsulation:2}),s})();function n_(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-authorization-category-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","authorizationCategory_edit")("authorizationCategory",t.value)}}const l_=function(){return{}};function c_(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-authorization-category-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","authorizationCategory_create")("authorizationCategory",e.DdM(2,l_))}function d_(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-authorization-category-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(null==d.ref?null:d.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("authorizationCategories",t.items)}}let u_=(()=>{class s extends pe{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:6,consts:[[3,"data","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","authorizationCategory","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","authorizationCategories","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,n_,1,2,"ng-template",null,1,e.W1O),e.YNc(3,c_,1,3,"ng-template",null,2,e.W1O),e.YNc(5,d_,1,2,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("data",i.data)("title",i.to.title)("onSave",i.onSave)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[he,or,ar],encapsulation:2}),s})(),m_=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[nt],imports:[P.ez,U.F,E.UX,J.o,ae.u,$.P,j.t,me,k.h,se.G,G.X0.forChild({types:[{name:"authorization-category-select",component:r_,wrappers:["form-field"]},{name:"authorization-category-grid",component:u_}]})]}),s})(),p_=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[m_]}),s})();class lt extends W.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class h_ extends lt{constructor(o,t,i){super("ValidateAuthorizationDiagnosisCodeExcelDataAction"),this.valid=!1,this.excelData=o,this.diagnoses=t,this.authorizations=i}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name),this.validationContext.addRule(new g.mi(`diagnosisName_${i}_is_valid}`,"Diagnosis Is Not Valid","diagnosis.name",t.diagnosis,this.diagnoses,!0)),this.validationContext.addRule(new g.mi(`authorizationName_${i}_is_valid}`,"Authorization Is Not Valid","authorization.name",t.authorization,this.authorizations,!0))}),this.validationContext.addRule(new g.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof g.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(a=>a.name),newNames:[i.newName]}):i instanceof g.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,D.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class f_ extends g.wS{constructor(o,t,i,a,l){super(o,t,i,a,l,!0)}}class __ extends g.ul{constructor(o,t,i,a=!1){super(o,t,a),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new g.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new f_("name","The authorizationdiagnosiscode name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class g_ extends lt{constructor(o){super("CreateAuthorizationDiagnosisCodeAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new __("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateAuthorizationDiagnosisCode({input:this.input}).pipe((0,h.w)(o=>(0,ue.of)(o.data.created)))}}class v_ extends lt{constructor(o){super("UpdateAuthorizationDiagnosisCodesAction"),this.authorizationDiagnosisCodes=o}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.authorizationDiagnosisCodes,!0))}performAction(){this.response=this.businessProvider.data.userUpdateAuthorizationDiagnosisCodes({input:{authorizationDiagnosisCodes:this.authorizationDiagnosisCodes}}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}class C_ extends lt{constructor(o,t){super("UpdateAuthorizationDiagnosisCodeAction"),this.authorizationDiagnosisCode=o,this.authorizationDiagnosisCodeId=t}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.authorizationDiagnosisCode,!0)).addRule(new g.xF("Id","Id should be a CUID and not null",this.authorizationDiagnosisCodeId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateAuthorizationDiagnosisCode({authorizationDiagnosisCodeId:this.authorizationDiagnosisCodeId,input:this.authorizationDiagnosisCode}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}let rr=(()=>{class s extends W.nH{constructor(t,i,a){super("NotificationService.AuthorizationDiagnosisCodeBusinessProviderService",t,a),this.data=i}createAuthorizationDiagnosisCode(t){const i=new g_(t);return i.Do(this),i.response}updateAuthorizationDiagnosisCode(t,i){const a=new C_(t,i);return a.Do(this),a.response}importAuthorizationDiagnosisCodes(t){const i=new v_(t);return i.Do(this),i.response}validateAuthorizationDiagnosisCodeExcelData(t,i,a){const l=new h_(t,i,a);return l.Do(this),l.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(K.ed),e.LFG(z.q),e.LFG(W.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),S_=(()=>{class s extends W.nH{constructor(t,i,a){super("AuthorizationDiagnosisCodeService",a,t),this.businessProvider=i}createAuthorizationDiagnosisCode(t){return this.businessProvider.createAuthorizationDiagnosisCode(t)}updateAuthorizationDiagnosisCode(t,i){return this.businessProvider.updateAuthorizationDiagnosisCode(t,i)}importAuthorizationDiagnosisCodes(t){return this.businessProvider.importAuthorizationDiagnosisCodes(t)}validateAuthorizationDiagnosisCodeExcelData(t,i,a){return this.businessProvider.validateAuthorizationDiagnosisCodeExcelData(t,i,a)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(rr,8),e.LFG(rr),e.LFG(K.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),ct=(()=>{class s extends b.m1{constructor(t,i,a,l,d,ee){if(super({loading:!1,authorizationDiagnosisCodes:[],done:!1,searchQuery:"",formName:void 0,diagnosisCodeId:void 0,authorizationId:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=a,this.toast=l,this.formService=d,this.authorizationDiagnosisCodeService=ee,this.errors$=this.select(n=>n.errors),this.loading$=this.select(n=>n.loading),this.done$=this.select(n=>n.done),this.item$=this.select(n=>n.item),this.authorizationDiagnosisCodes$=this.select(n=>n.authorizationDiagnosisCodes),this.diagnosisCodes$=this.select(n=>n.diagnosisCodes||[]),this.authorizations$=this.select(n=>n.authorizations||[]),this.diagnosisCodeId$=this.select(n=>n.diagnosisCodeId),this.authorizationId$=this.select(n=>n.authorizationId),this.paging$=this.select(n=>n.paging),this.searchQuery$=this.select(n=>n.searchQuery),this.formName$=this.select(n=>n.formName),this.actionResult$=this.select(this.item$,this.done$,(n,r)=>({item:n,done:r}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.authorizationDiagnosisCodes$,this.diagnosisCodes$,this.authorizations$,(n,r,m,p,v,I,B)=>({errors:n,loading:r,item:m,formName:p,authorizationDiagnosisCodes:v,diagnosisCodes:I,authorizations:B}),{debounce:!0}),this.input$=this.select(this.paging$,this.diagnosisCodeId$,this.authorizationId$,this.searchQuery$,(n,r,m,p)=>({limit:n.limit,skip:n.skip,name:p,diagnosisCodeId:r,authorizationId:m,total:n.total})),this.setFormName=this.updater((n,r)=>Object.assign(Object.assign({},n),{formName:r})),this.setDiagnosisCodeId=this.updater((n,r)=>Object.assign(Object.assign({},n),{diagnosisCodeId:r})),this.setAuthorizationId=this.updater((n,r)=>Object.assign(Object.assign({},n),{authorizationId:r})),this.filterDiagnosisCodes=n=>this.data.userSelectDiagnosisCodes({input:{name:n}}).pipe((0,b._b)(r=>{let m=r.data.items;return this.patchState({diagnosisCodes:m}),m},r=>this.patchState({errors:r.graphQLErrors?r.graphQLErrors:r})),(0,fe.U)(r=>r.data.items)),this.filterAuthorizations=n=>this.data.userSelectAuthorizations({input:{name:n}}).pipe((0,b._b)(r=>{let m=r.data.items;return this.patchState({authorizations:m}),m},r=>this.patchState({errors:r.graphQLErrors?r.graphQLErrors:r})),(0,fe.U)(r=>r.data.items)),this.addDiagnosisCode=this.updater((n,r)=>Object.assign(Object.assign({},n),{diagnosisCodes:n.diagnosisCodes.concat(r)})),this.addAuthorization=this.updater((n,r)=>Object.assign(Object.assign({},n),{authorizations:n.authorizations.concat(r)})),this.setItem=this.updater((n,r)=>Object.assign(Object.assign({},n),{item:r})),this.addNewAuthorizationDiagnosisCode=this.updater((n,r)=>Object.assign(Object.assign({},n),{authorizationDiagnosisCodes:[...n.authorizationDiagnosisCodes,r]})),this.updateAuthorizationDiagnosisCode=this.updater((n,r)=>Object.assign(Object.assign({},n),{authorizationDiagnosisCodes:n.authorizationDiagnosisCodes.map(m=>m.id===r.id?r:m)})),this.addAuthorizationDiagnosisCodes=this.updater((n,r)=>Object.assign(Object.assign({},n),{authorizationDiagnosisCodes:n.authorizationDiagnosisCodes.concat(r)})),this.updateAuthorizationDiagnosisCodes=this.updater((n,r)=>Object.assign(Object.assign({},n),{authorizationDiagnosisCodes:n.authorizationDiagnosisCodes.map(m=>r.find(v=>v.id===m.id)||m)})),this.setSearchQuery=this.updater((n,r)=>Object.assign(Object.assign({},n),{searchQuery:r})),this.loadAuthorizationDiagnosisCodeEffect=this.effect(n=>n.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(r=>this.data.userAuthorizationDiagnosisCode({authorizationDiagnosisCodeId:r}).pipe((0,b._b)(m=>{this.patchState({item:m.data.item,errors:m.errors,loading:!1})},m=>this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})))))),this.loadAuthorizationDiagnosisCodesEffect=this.effect(n=>n.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.input$),(0,h.w)(([r,m])=>this.data.userAuthorizationDiagnosisCodes({input:m}).pipe((0,b._b)(p=>this.patchState({paging:{limit:m.limit,skip:m.skip,total:p.data.count.total},authorizationDiagnosisCodes:p.data.items,errors:p.errors,loading:!1}),p=>this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})))))),this.createAuthorizationDiagnosisCodeEffect=this.effect(n=>n.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(r=>this.authorizationDiagnosisCodeService.createAuthorizationDiagnosisCode(Object.assign({},r)).pipe((0,b._b)(m=>{this.addNewAuthorizationDiagnosisCode(m),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:m,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},m=>{m.graphQLErrors?(this.toast.error(m.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})):(this.toast.error(m.Message),this.formService.setErrors(m.Data))}))))),this.updateAuthorizationDiagnosisCodeEffect=this.effect(n=>n.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([r,m])=>this.authorizationDiagnosisCodeService.updateAuthorizationDiagnosisCode(r,r.id).pipe((0,b._b)(p=>{this.updateAuthorizationDiagnosisCode(p),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:p,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},p=>{p.graphQLErrors?(this.toast.error(p.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})):(this.toast.error(p.Message),this.formService.setErrors(p.Data))}))))),this.deleteAuthorizationDiagnosisCodeEffect=this.effect(n=>n.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([r,m])=>this.data.userDeleteAuthorizationDiagnosisCode({authorizationDiagnosisCodeId:m.id}).pipe((0,b._b)(p=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:p.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},p=>{p.graphQLErrors?(this.toast.error(p.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})):(this.toast.error(p.Message),this.formService.setErrors(p.Data))}))))),this.importExcelEffect=this.effect(n=>n.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(r=>this.authorizationDiagnosisCodeService.importAuthorizationDiagnosisCodes(r).pipe((0,de.K)(m=>{var p;return this.toast.error(null!==(p=m.Message)&&void 0!==p?p:"Failed to save",{duration:3e3}),q.E}),(0,y.b)(m=>{const p=JSON.parse(m.created),v=JSON.parse(m.updated),I=JSON.parse(m.failed),B=p.length+v.length+I.length;this.addAuthorizationDiagnosisCodes(p),this.updateAuthorizationDiagnosisCodes(v),this.toast.success(`${p.length} created, ${v.length} updated, ${I.length} failed of total ${B}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("authorizationDiagnosisCodeId")?(this.route.snapshot.paramMap.get("authorizationDiagnosisCodeId"),this.setFormName("authorizationDiagnosisCode_edit")):this.setFormName("authorizationDiagnosisCode_create"),this.route.snapshot.paramMap.has("diagnosisCodeId")){var c=this.route.snapshot.paramMap.get("diagnosisCodeId");this.setDiagnosisCodeId(c)}if(this.route.snapshot.paramMap.has("authorizationId")){var u=this.route.snapshot.paramMap.get("authorizationId");this.setAuthorizationId(u)}}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.authorizationDiagnosisCodeService.validateAuthorizationDiagnosisCodeExcelData(t,i.diagnosisCodes,i.authorizations)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(z.q),e.LFG(O.F0),e.LFG(O.gz),e.LFG(X.F),e.LFG(Z.o),e.LFG(S_))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function b_(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.close.emit())})("formIsReady",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.authorizationDiagnosisCode)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let nr=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"authorizationDiagnosisCode_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({id:null,name:""}),this.store.vm$.subscribe(i=>{this.authorizationDiagnosisCode=i.item})):t.formName&&t.formName.currentValue&&"authorizationDiagnosisCode_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadAuthorizationDiagnosisCodeEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.authorizationDiagnosisCode=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(ct),e.Y36(O.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-authorization-diagnosis-code-form"]],inputs:{authorizationDiagnosisCode:"authorizationDiagnosisCode",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,b_,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[P.O5,te.M,P.Ov],encapsulation:2}),s})(),lr=(()=>{class s{constructor(){this.autoHeight=!1,this.authorizationDiagnosisCodes=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[{field:"diagnosis.name",headerName:"Diagnosis",filter:"agTextColumnFilter"},{field:"authorization.name",headerName:"Authorization",filter:"agTextColumnFilter"},{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{field:"diagnosisCodeId",filter:"agTextColumnFilter",hide:!0},{field:"authorizationId",filter:"agTextColumnFilter",hide:!0}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var a;t.includes(null===(a=i.data)||void 0===a?void 0:a.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-authorization-diagnosis-code-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(f.x,5),2&t){let a;e.iGM(a=e.CRH())&&(i.tableView=a.first)}},inputs:{autoHeight:"autoHeight",authorizationDiagnosisCodes:"authorizationDiagnosisCodes"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:6,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.authorizationDiagnosisCodes)("showSidebar",!1)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[f.x],encapsulation:2}),s})();function T_(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-authorization-diagnosis-code-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","authorizationDiagnosisCode_edit")("formControl",t.formControl)("authorizationDiagnosisCode",t.authorizationDiagnosisCode)}}const y_=function(){return{}};function w_(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-authorization-diagnosis-code-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","authorizationDiagnosisCode_create")("formControl",t.formControl)("authorizationDiagnosisCode",e.DdM(3,y_))}}function x_(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-authorization-diagnosis-code-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(d.ref.close())}),e.qZA()}2&s&&e.Q6J("authorizationDiagnosisCodes",o.data.items)}let N_=(()=>{class s extends G.fS{constructor(t){super(),this.store=t,this.store.loadAuthorizationDiagnosisCodesEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.authorizationDiagnosisCodes$.pipe((0,h.w)(i=>(0,D.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(ct))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e._Bn([ct]),e.qOj],decls:7,vars:5,consts:[[3,"to","control","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","authorizationDiagnosisCode","send","close"],[1,"w-full","h-full","bg-white",3,"authorizationDiagnosisCodes","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"ui-select-form",0),e.YNc(1,T_,2,3,"ng-template",null,1,e.W1O),e.YNc(3,w_,1,4,"ng-template",null,2,e.W1O),e.YNc(5,x_,1,1,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[E.JJ,E.oH,H.$,nr,lr],encapsulation:2}),s})();function A_(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-authorization-diagnosis-code-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","authorizationDiagnosisCode_edit")("authorizationDiagnosisCode",t.value)}}const F_=function(){return{}};function P_(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-authorization-diagnosis-code-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","authorizationDiagnosisCode_create")("authorizationDiagnosisCode",e.DdM(2,F_))}function I_(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-authorization-diagnosis-code-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(null==d.ref?null:d.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("authorizationDiagnosisCodes",t.items)}}let D_=(()=>{class s extends pe{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:6,consts:[[3,"data","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","authorizationDiagnosisCode","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","authorizationDiagnosisCodes","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,A_,1,2,"ng-template",null,1,e.W1O),e.YNc(3,P_,1,3,"ng-template",null,2,e.W1O),e.YNc(5,I_,1,2,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("data",i.data)("title",i.to.title)("onSave",i.onSave)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[he,nr,lr],encapsulation:2}),s})(),M_=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[ct],imports:[P.ez,U.F,E.UX,J.o,ae.u,$.P,j.t,me,k.h,se.G,G.X0.forChild({types:[{name:"authorization-diagnosis-code-select",component:N_,wrappers:["form-field"]},{name:"authorization-diagnosis-code-grid",component:D_}]})]}),s})(),W_=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[M_]}),s})();class dt extends W.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class E_ extends dt{constructor(o,t){super("ValidateAuthorizationKindExcelDataAction"),this.valid=!1,this.excelData=o,this.categories=t}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name),this.validationContext.addRule(new g.mi(`categoryName_${i}_is_valid}`,"Category Is Not Valid","category.name",t.category,this.categories,!0))}),this.validationContext.addRule(new g.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof g.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(a=>a.name),newNames:[i.newName]}):i instanceof g.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,D.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class O_ extends g.wS{constructor(o,t,i,a,l){super(o,t,i,a,l,!0)}}class L_ extends g.ul{constructor(o,t,i,a=!1){super(o,t,a),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new g.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new O_("name","The authorizationkind name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class $_ extends dt{constructor(o){super("CreateAuthorizationKindAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new L_("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateAuthorizationKind({input:this.input}).pipe((0,h.w)(o=>(0,ue.of)(o.data.created)))}}class G_ extends dt{constructor(o){super("UpdateAuthorizationKindsAction"),this.authorizationKinds=o}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.authorizationKinds,!0))}performAction(){this.response=this.businessProvider.data.userUpdateAuthorizationKinds({input:{authorizationKinds:this.authorizationKinds}}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}class R_ extends dt{constructor(o,t){super("UpdateAuthorizationKindAction"),this.authorizationKind=o,this.authorizationKindId=t}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.authorizationKind,!0)).addRule(new g.xF("Id","Id should be a CUID and not null",this.authorizationKindId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateAuthorizationKind({authorizationKindId:this.authorizationKindId,input:this.authorizationKind}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}let cr=(()=>{class s extends W.nH{constructor(t,i,a){super("NotificationService.AuthorizationKindBusinessProviderService",t,a),this.data=i}createAuthorizationKind(t){const i=new $_(t);return i.Do(this),i.response}updateAuthorizationKind(t,i){const a=new R_(t,i);return a.Do(this),a.response}importAuthorizationKinds(t){const i=new G_(t);return i.Do(this),i.response}validateAuthorizationKindExcelData(t,i){const a=new E_(t,i);return a.Do(this),a.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(K.ed),e.LFG(z.q),e.LFG(W.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),Q_=(()=>{class s extends W.nH{constructor(t,i,a){super("AuthorizationKindService",a,t),this.businessProvider=i}createAuthorizationKind(t){const i=Object.fromEntries(Object.entries(t).filter(([a,l])=>null!==l));return this.businessProvider.createAuthorizationKind(i)}updateAuthorizationKind(t,i){return this.businessProvider.updateAuthorizationKind(t,i)}importAuthorizationKinds(t){return this.businessProvider.importAuthorizationKinds(t)}validateAuthorizationKindExcelData(t,i){return this.businessProvider.validateAuthorizationKindExcelData(t,i)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(cr,8),e.LFG(cr),e.LFG(K.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),ws=(()=>{class s extends b.m1{constructor(t,i,a,l,d,ee){if(super({loading:!1,authorizationKinds:[],done:!1,searchQuery:"",formName:void 0,categoryId:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=a,this.toast=l,this.formService=d,this.authorizationKindService=ee,this.errors$=this.select(u=>u.errors),this.loading$=this.select(u=>u.loading),this.done$=this.select(u=>u.done),this.item$=this.select(u=>u.item),this.authorizationKinds$=this.select(u=>u.authorizationKinds),this.categories$=this.select(u=>u.categories||[]),this.categoryId$=this.select(u=>u.categoryId),this.paging$=this.select(u=>u.paging),this.searchQuery$=this.select(u=>u.searchQuery),this.formName$=this.select(u=>u.formName),this.actionResult$=this.select(this.item$,this.done$,(u,n)=>({item:u,done:n}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.authorizationKinds$,this.categories$,(u,n,r,m,p,v)=>({errors:u,loading:n,item:r,formName:m,authorizationKinds:p,categories:v}),{debounce:!0}),this.input$=this.select(this.paging$,this.categoryId$,this.searchQuery$,(u,n,r)=>({limit:u.limit,skip:u.skip,name:r,categoryId:n,total:u.total})),this.setFormName=this.updater((u,n)=>Object.assign(Object.assign({},u),{formName:n})),this.setCategoryId=this.updater((u,n)=>Object.assign(Object.assign({},u),{categoryId:n})),this.filterCategories=u=>this.data.userSelectCategories({input:{name:u}}).pipe((0,b._b)(n=>{let r=n.data.items;return this.patchState({categories:r}),r},n=>this.patchState({errors:n.graphQLErrors?n.graphQLErrors:n})),(0,fe.U)(n=>n.data.items)),this.addCategory=this.updater((u,n)=>Object.assign(Object.assign({},u),{categories:u.categories.concat(n)})),this.setItem=this.updater((u,n)=>Object.assign(Object.assign({},u),{item:n})),this.addNewAuthorizationKind=this.updater((u,n)=>Object.assign(Object.assign({},u),{authorizationKinds:[...u.authorizationKinds,n]})),this.updateAuthorizationKind=this.updater((u,n)=>Object.assign(Object.assign({},u),{authorizationKinds:u.authorizationKinds.map(r=>r.id===n.id?n:r)})),this.addAuthorizationKinds=this.updater((u,n)=>Object.assign(Object.assign({},u),{authorizationKinds:u.authorizationKinds.concat(n)})),this.updateAuthorizationKinds=this.updater((u,n)=>Object.assign(Object.assign({},u),{authorizationKinds:u.authorizationKinds.map(r=>n.find(p=>p.id===r.id)||r)})),this.setSearchQuery=this.updater((u,n)=>Object.assign(Object.assign({},u),{searchQuery:n})),this.loadAuthorizationKindEffect=this.effect(u=>u.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(n=>this.data.userAuthorizationKind({authorizationKindId:n}).pipe((0,b._b)(r=>{this.patchState({item:r.data.item,errors:r.errors,loading:!1})},r=>this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})))))),this.loadAuthorizationKindsEffect=this.effect(u=>u.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.input$),(0,h.w)(([n,r])=>this.data.userAuthorizationKinds({input:r}).pipe((0,b._b)(m=>this.patchState({paging:{limit:r.limit,skip:r.skip,total:m.data.count.total},authorizationKinds:m.data.items,errors:m.errors,loading:!1}),m=>this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})))))),this.createAuthorizationKindEffect=this.effect(u=>u.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(n=>this.authorizationKindService.createAuthorizationKind(Object.assign({},n)).pipe((0,b._b)(r=>{this.addNewAuthorizationKind(r),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:r,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},r=>{r.graphQLErrors?(this.toast.error(r.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})):(this.toast.error(r.Message),this.formService.setErrors(r.Data))}))))),this.updateAuthorizationKindEffect=this.effect(u=>u.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([n,r])=>this.authorizationKindService.updateAuthorizationKind(n,n.id).pipe((0,b._b)(m=>{this.updateAuthorizationKind(m),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:m,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},m=>{m.graphQLErrors?(this.toast.error(m.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})):(this.toast.error(m.Message),this.formService.setErrors(m.Data))}))))),this.deleteAuthorizationKindEffect=this.effect(u=>u.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([n,r])=>this.data.userDeleteAuthorizationKind({authorizationKindId:r.id}).pipe((0,b._b)(m=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:m.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},m=>{m.graphQLErrors?(this.toast.error(m.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})):(this.toast.error(m.Message),this.formService.setErrors(m.Data))}))))),this.importExcelEffect=this.effect(u=>u.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(n=>this.authorizationKindService.importAuthorizationKinds(n).pipe((0,de.K)(r=>{var m;return this.toast.error(null!==(m=r.Message)&&void 0!==m?m:"Failed to save",{duration:3e3}),q.E}),(0,y.b)(r=>{const m=JSON.parse(r.created),p=JSON.parse(r.updated),v=JSON.parse(r.failed),I=m.length+p.length+v.length;this.addAuthorizationKinds(m),this.updateAuthorizationKinds(p),this.toast.success(`${m.length} created, ${p.length} updated, ${v.length} failed of total ${I}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("authorizationKindId")?(this.route.snapshot.paramMap.get("authorizationKindId"),this.setFormName("authorizationKind_edit")):this.setFormName("authorizationKind_create"),this.route.snapshot.paramMap.has("categoryId")){var c=this.route.snapshot.paramMap.get("categoryId");this.setCategoryId(c)}}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.authorizationKindService.validateAuthorizationKindExcelData(t,i.categories)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(z.q),e.LFG(O.F0),e.LFG(O.gz),e.LFG(X.F),e.LFG(Z.o),e.LFG(Q_))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function V_(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.close.emit())})("formIsReady",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.authorizationKind)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let dr=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"authorizationKind_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.authorizationKind=i.item})):t.formName&&t.formName.currentValue&&"authorizationKind_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadAuthorizationKindEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.authorizationKind=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(ws),e.Y36(O.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-authorization-kind-form"]],inputs:{authorizationKind:"authorizationKind",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,V_,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[P.O5,te.M,P.Ov],encapsulation:2}),s})(),ur=(()=>{class s{constructor(){this.autoHeight=!1,this.authorizationKinds=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[{field:"category.name",headerName:"Category",filter:"agTextColumnFilter"},{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{field:"categoryId",filter:"agTextColumnFilter",hide:!0}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var a;t.includes(null===(a=i.data)||void 0===a?void 0:a.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-authorization-kind-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(f.x,5),2&t){let a;e.iGM(a=e.CRH())&&(i.tableView=a.first)}},inputs:{autoHeight:"autoHeight",authorizationKinds:"authorizationKinds"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.authorizationKinds)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[f.x],encapsulation:2}),s})();function j_(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-authorization-kind-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","authorizationKind_edit")("formControl",t.formControl)("authorizationKind",t.authorizationKind)}}const U_=function(){return{}};function J_(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-authorization-kind-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","authorizationKind_create")("formControl",t.formControl)("authorizationKind",e.DdM(3,U_))}}function z_(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-authorization-kind-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(d.ref.close())}),e.qZA()}2&s&&e.Q6J("authorizationKinds",o.data.items)}let H_=(()=>{class s extends G.fS{constructor(t){super(),this.store=t,this.store.loadAuthorizationKindsEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.authorizationKinds$.pipe((0,h.w)(i=>(0,D.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(ws))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","authorizationKind","send","close"],[1,"w-full","h-full","bg-white",3,"authorizationKinds","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,j_,2,3,"ng-template",null,1,e.W1O),e.YNc(3,J_,1,4,"ng-template",null,2,e.W1O),e.YNc(5,z_,1,1,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",d)("editTemplate",a)("createTemplate",l)("key",i.field.key)}},dependencies:[E.JJ,E.oH,H.$,dr,ur],encapsulation:2}),s})();function q_(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-authorization-kind-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","authorizationKind_edit")("authorizationKind",t.value)}}const K_=function(){return{}};function Z_(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-authorization-kind-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","authorizationKind_create")("authorizationKind",e.DdM(2,K_))}function B_(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-authorization-kind-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(null==d.ref?null:d.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("authorizationKinds",t.items)}}let k_=(()=>{class s extends pe{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","authorizationKind","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","authorizationKinds","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,q_,1,2,"ng-template",null,1,e.W1O),e.YNc(3,Z_,1,3,"ng-template",null,2,e.W1O),e.YNc(5,B_,1,2,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[he,dr,ur],encapsulation:2}),s})(),Y_=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[ws],imports:[P.ez,U.F,E.UX,J.o,ae.u,$.P,j.t,me,k.h,se.G,G.X0.forChild({types:[{name:"authorization-kind-select",component:H_,wrappers:["form-field"]},{name:"authorization-kind-grid",component:k_}]})]}),s})(),X_=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[Y_]}),s})();class ut extends W.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class eg extends ut{constructor(o){super("ValidateAuthorizationStatusExcelDataAction"),this.valid=!1,this.excelData=o}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name)}),this.validationContext.addRule(new g.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof g.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(a=>a.name),newNames:[i.newName]}):i instanceof g.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,D.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class tg extends g.wS{constructor(o,t,i,a,l){super(o,t,i,a,l,!0)}}class ig extends g.ul{constructor(o,t,i,a=!1){super(o,t,a),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new g.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new tg("name","The authorizationstatus name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class sg extends ut{constructor(o){super("CreateAuthorizationStatusAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new ig("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateAuthorizationStatus({input:this.input}).pipe((0,h.w)(o=>(0,ue.of)(o.data.created)))}}class og extends ut{constructor(o){super("UpdateAuthorizationStatusesAction"),this.authorizationStatuses=o}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.authorizationStatuses,!0))}performAction(){this.response=this.businessProvider.data.userUpdateAuthorizationStatuses({input:{authorizationStatuses:this.authorizationStatuses}}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}class ag extends ut{constructor(o,t){super("UpdateAuthorizationStatusAction"),this.authorizationStatus=o,this.authorizationStatusId=t}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.authorizationStatus,!0)).addRule(new g.xF("Id","Id should be a CUID and not null",this.authorizationStatusId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateAuthorizationStatus({authorizationStatusId:this.authorizationStatusId,input:this.authorizationStatus}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}let mr=(()=>{class s extends W.nH{constructor(t,i,a){super("NotificationService.AuthorizationStatusBusinessProviderService",t,a),this.data=i}createAuthorizationStatus(t){const i=new sg(t);return i.Do(this),i.response}updateAuthorizationStatus(t,i){const a=new ag(t,i);return a.Do(this),a.response}importAuthorizationStatuses(t){const i=new og(t);return i.Do(this),i.response}validateAuthorizationStatusExcelData(t){const i=new eg(t);return i.Do(this),i.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(K.ed),e.LFG(z.q),e.LFG(W.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),rg=(()=>{class s extends W.nH{constructor(t,i,a){super("AuthorizationStatusService",a,t),this.businessProvider=i}createAuthorizationStatus(t){const i=Object.fromEntries(Object.entries(t).filter(([a,l])=>null!==l));return this.businessProvider.createAuthorizationStatus(i)}updateAuthorizationStatus(t,i){return this.businessProvider.updateAuthorizationStatus(t,i)}importAuthorizationStatuses(t){return this.businessProvider.importAuthorizationStatuses(t)}validateAuthorizationStatusExcelData(t){return this.businessProvider.validateAuthorizationStatusExcelData(t)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(mr,8),e.LFG(mr),e.LFG(K.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),xs=(()=>{class s extends b.m1{constructor(t,i,a,l,d,ee){super({loading:!1,authorizationStatuses:[],done:!1,searchQuery:"",formName:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=a,this.toast=l,this.formService=d,this.authorizationStatusService=ee,this.errors$=this.select(c=>c.errors),this.loading$=this.select(c=>c.loading),this.done$=this.select(c=>c.done),this.item$=this.select(c=>c.item),this.authorizationStatuses$=this.select(c=>c.authorizationStatuses),this.paging$=this.select(c=>c.paging),this.searchQuery$=this.select(c=>c.searchQuery),this.formName$=this.select(c=>c.formName),this.actionResult$=this.select(this.item$,this.done$,(c,u)=>({item:c,done:u}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.authorizationStatuses$,(c,u,n,r,m)=>({errors:c,loading:u,item:n,formName:r,authorizationStatuses:m}),{debounce:!0}),this.input$=this.select(this.paging$,this.searchQuery$,(c,u)=>({limit:c.limit,skip:c.skip,name:u,total:c.total})),this.setFormName=this.updater((c,u)=>Object.assign(Object.assign({},c),{formName:u})),this.setItem=this.updater((c,u)=>Object.assign(Object.assign({},c),{item:u})),this.addNewAuthorizationStatus=this.updater((c,u)=>Object.assign(Object.assign({},c),{authorizationStatuses:[...c.authorizationStatuses,u]})),this.updateAuthorizationStatus=this.updater((c,u)=>Object.assign(Object.assign({},c),{authorizationStatuses:c.authorizationStatuses.map(n=>n.id===u.id?u:n)})),this.addAuthorizationStatuses=this.updater((c,u)=>Object.assign(Object.assign({},c),{authorizationStatuses:c.authorizationStatuses.concat(u)})),this.updateAuthorizationStatuses=this.updater((c,u)=>Object.assign(Object.assign({},c),{authorizationStatuses:c.authorizationStatuses.map(n=>u.find(m=>m.id===n.id)||n)})),this.setSearchQuery=this.updater((c,u)=>Object.assign(Object.assign({},c),{searchQuery:u})),this.loadAuthorizationStatusEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.data.userAuthorizationStatus({authorizationStatusId:u}).pipe((0,b._b)(n=>{this.patchState({item:n.data.item,errors:n.errors,loading:!1})},n=>this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})))))),this.loadAuthorizationStatusesEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.input$),(0,h.w)(([u,n])=>this.data.userAuthorizationStatuses({input:n}).pipe((0,b._b)(r=>this.patchState({paging:{limit:n.limit,skip:n.skip,total:r.data.count.total},authorizationStatuses:r.data.items,errors:r.errors,loading:!1}),r=>this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})))))),this.createAuthorizationStatusEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.authorizationStatusService.createAuthorizationStatus(Object.assign({},u)).pipe((0,b._b)(n=>{this.addNewAuthorizationStatus(n),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:n,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},n=>{n.graphQLErrors?(this.toast.error(n.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})):(this.toast.error(n.Message),this.formService.setErrors(n.Data))}))))),this.updateAuthorizationStatusEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([u,n])=>this.authorizationStatusService.updateAuthorizationStatus(u,u.id).pipe((0,b._b)(r=>{this.updateAuthorizationStatus(r),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:r,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},r=>{r.graphQLErrors?(this.toast.error(r.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})):(this.toast.error(r.Message),this.formService.setErrors(r.Data))}))))),this.deleteAuthorizationStatusEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([u,n])=>this.data.userDeleteAuthorizationStatus({authorizationStatusId:n.id}).pipe((0,b._b)(r=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:r.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},r=>{r.graphQLErrors?(this.toast.error(r.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})):(this.toast.error(r.Message),this.formService.setErrors(r.Data))}))))),this.importExcelEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.authorizationStatusService.importAuthorizationStatuses(u).pipe((0,de.K)(n=>{var r;return this.toast.error(null!==(r=n.Message)&&void 0!==r?r:"Failed to save",{duration:3e3}),q.E}),(0,y.b)(n=>{const r=JSON.parse(n.created),m=JSON.parse(n.updated),p=JSON.parse(n.failed),v=r.length+m.length+p.length;this.addAuthorizationStatuses(r),this.updateAuthorizationStatuses(m),this.toast.success(`${r.length} created, ${m.length} updated, ${p.length} failed of total ${v}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("authorizationStatusId")?(this.route.snapshot.paramMap.get("authorizationStatusId"),this.setFormName("authorizationStatus_edit")):this.setFormName("authorizationStatus_create")}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.authorizationStatusService.validateAuthorizationStatusExcelData(t)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(z.q),e.LFG(O.F0),e.LFG(O.gz),e.LFG(X.F),e.LFG(Z.o),e.LFG(rg))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function ng(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.close.emit())})("formIsReady",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.authorizationStatus)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let pr=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"authorizationStatus_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.authorizationStatus=i.item})):t.formName&&t.formName.currentValue&&"authorizationStatus_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadAuthorizationStatusEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.authorizationStatus=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(xs),e.Y36(O.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-authorization-status-form"]],inputs:{authorizationStatus:"authorizationStatus",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,ng,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[P.O5,te.M,P.Ov],encapsulation:2}),s})(),hr=(()=>{class s{constructor(){this.autoHeight=!1,this.authorizationStatuses=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[,{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var a;t.includes(null===(a=i.data)||void 0===a?void 0:a.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-authorization-status-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(f.x,5),2&t){let a;e.iGM(a=e.CRH())&&(i.tableView=a.first)}},inputs:{autoHeight:"autoHeight",authorizationStatuses:"authorizationStatuses"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.authorizationStatuses)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[f.x],encapsulation:2}),s})();function lg(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-authorization-status-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","authorizationStatus_edit")("formControl",t.formControl)("authorizationStatus",t.authorizationStatus)}}const cg=function(){return{}};function dg(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-authorization-status-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","authorizationStatus_create")("formControl",t.formControl)("authorizationStatus",e.DdM(3,cg))}}function ug(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-authorization-status-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(d.ref.close())}),e.qZA()}2&s&&e.Q6J("authorizationStatuses",o.data.items)}let mg=(()=>{class s extends G.fS{constructor(t){super(),this.store=t,this.store.loadAuthorizationStatusesEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.authorizationStatuses$.pipe((0,h.w)(i=>(0,D.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(xs))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","authorizationStatus","send","close"],[1,"w-full","h-full","bg-white",3,"authorizationStatuses","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,lg,2,3,"ng-template",null,1,e.W1O),e.YNc(3,dg,1,4,"ng-template",null,2,e.W1O),e.YNc(5,ug,1,1,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",d)("editTemplate",a)("createTemplate",l)("key",i.field.key)}},dependencies:[E.JJ,E.oH,H.$,pr,hr],encapsulation:2}),s})();function pg(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-authorization-status-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","authorizationStatus_edit")("authorizationStatus",t.value)}}const hg=function(){return{}};function fg(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-authorization-status-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","authorizationStatus_create")("authorizationStatus",e.DdM(2,hg))}function _g(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-authorization-status-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(null==d.ref?null:d.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("authorizationStatuses",t.items)}}let gg=(()=>{class s extends pe{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","authorizationStatus","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","authorizationStatuses","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,pg,1,2,"ng-template",null,1,e.W1O),e.YNc(3,fg,1,3,"ng-template",null,2,e.W1O),e.YNc(5,_g,1,2,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[he,pr,hr],encapsulation:2}),s})(),vg=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[xs],imports:[P.ez,U.F,E.UX,J.o,ae.u,$.P,j.t,me,k.h,se.G,G.X0.forChild({types:[{name:"authorization-status-select",component:mg,wrappers:["form-field"]},{name:"authorization-status-grid",component:gg}]})]}),s})(),Cg=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[vg]}),s})();var mt=M(57795);function Sg(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.close.emit())})("formIsReady",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.authorizationType)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let fr=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"authorizationType_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({id:null,name:""}),this.store.vm$.subscribe(i=>{this.authorizationType=i.item})):t.formName&&t.formName.currentValue&&"authorizationType_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadAuthorizationTypeEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.authorizationType=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(mt.y),e.Y36(O.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-authorization-type-form"]],inputs:{authorizationType:"authorizationType",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,Sg,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[P.O5,te.M,P.Ov],encapsulation:2}),s})(),_r=(()=>{class s{constructor(){this.autoHeight=!1,this.authorizationTypes=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[,{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var a;t.includes(null===(a=i.data)||void 0===a?void 0:a.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-authorization-type-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(f.x,5),2&t){let a;e.iGM(a=e.CRH())&&(i.tableView=a.first)}},inputs:{autoHeight:"autoHeight",authorizationTypes:"authorizationTypes"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:6,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.authorizationTypes)("showSidebar",!1)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[f.x],encapsulation:2}),s})();function bg(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-authorization-type-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","authorizationType_edit")("formControl",t.formControl)("authorizationType",t.authorizationType)}}const Tg=function(){return{}};function yg(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-authorization-type-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","authorizationType_create")("formControl",t.formControl)("authorizationType",e.DdM(3,Tg))}}function wg(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-authorization-type-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(d.ref.close())}),e.qZA()}2&s&&e.Q6J("authorizationTypes",o.data.items)}let xg=(()=>{class s extends G.fS{constructor(t){super(),this.store=t,this.store.loadAuthorizationTypesEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.authorizationTypes$.pipe((0,h.w)(i=>(0,D.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(mt.y))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e._Bn([mt.y]),e.qOj],decls:7,vars:5,consts:[[3,"to","control","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","authorizationType","send","close"],[1,"w-full","h-full","bg-white",3,"authorizationTypes","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"ui-select-form",0),e.YNc(1,bg,2,3,"ng-template",null,1,e.W1O),e.YNc(3,yg,1,4,"ng-template",null,2,e.W1O),e.YNc(5,wg,1,1,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[E.JJ,E.oH,H.$,fr,_r],encapsulation:2}),s})();function Ng(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-authorization-type-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","authorizationType_edit")("authorizationType",t.value)}}const Ag=function(){return{}};function Fg(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-authorization-type-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","authorizationType_create")("authorizationType",e.DdM(2,Ag))}function Pg(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-authorization-type-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(null==d.ref?null:d.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("authorizationTypes",t.items)}}let Ig=(()=>{class s extends pe{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:6,consts:[[3,"data","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","authorizationType","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","authorizationTypes","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,Ng,1,2,"ng-template",null,1,e.W1O),e.YNc(3,Fg,1,3,"ng-template",null,2,e.W1O),e.YNc(5,Pg,1,2,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("data",i.data)("title",i.to.title)("onSave",i.onSave)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[he,fr,_r],encapsulation:2}),s})(),Dg=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[mt.y],imports:[P.ez,U.F,E.UX,J.o,ae.u,$.P,j.t,me,k.h,se.G,G.X0.forChild({types:[{name:"authorization-type-select",component:xg,wrappers:["form-field"]},{name:"authorization-type-grid",component:Ig}]})]}),s})(),Mg=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[Dg]}),s})();class pt extends W.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class Wg extends pt{constructor(o,t,i){super("ValidateBalanceRequestExcelDataAction"),this.valid=!1,this.excelData=o,this.statements=t,this.legalCases=i}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name),this.validationContext.addRule(new g.mi(`statementName_${i}_is_valid}`,"Statement Is Not Valid","statement.name",t.statement,this.statements,!0)),this.validationContext.addRule(new g.mi(`legalCaseName_${i}_is_valid}`,"Legal Case Is Not Valid","legalCase.name",t.legalCase,this.legalCases,!0))}),this.validationContext.addRule(new g.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof g.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(a=>a.name),newNames:[i.newName]}):i instanceof g.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,D.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class Eg extends g.wS{constructor(o,t,i,a,l){super(o,t,i,a,l,!0)}}class Og extends g.ul{constructor(o,t,i,a=!1){super(o,t,a),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new g.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new Eg("name","The balancerequest name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class Lg extends pt{constructor(o){super("CreateBalanceRequestAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new Og("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateBalanceRequest({input:this.input}).pipe((0,h.w)(o=>(0,ue.of)(o.data.created)))}}class $g extends pt{constructor(o){super("UpdateBalanceRequestsAction"),this.balanceRequests=o}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.balanceRequests,!0))}performAction(){this.response=this.businessProvider.data.userUpdateBalanceRequests({input:{balanceRequests:this.balanceRequests}}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}class Gg extends pt{constructor(o,t){super("UpdateBalanceRequestAction"),this.balanceRequest=o,this.balanceRequestId=t}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.balanceRequest,!0)).addRule(new g.xF("Id","Id should be a CUID and not null",this.balanceRequestId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateBalanceRequest({balanceRequestId:this.balanceRequestId,input:this.balanceRequest}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}let gr=(()=>{class s extends W.nH{constructor(t,i,a){super("NotificationService.BalanceRequestBusinessProviderService",t,a),this.data=i}createBalanceRequest(t){console.log("input",t);const i=new Lg(t);return i.Do(this),i.response}updateBalanceRequest(t,i){const a=new Gg(t,i);return a.Do(this),a.response}importBalanceRequests(t){const i=new $g(t);return i.Do(this),i.response}validateBalanceRequestExcelData(t,i,a){const l=new Wg(t,i,a);return l.Do(this),l.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(K.ed),e.LFG(z.q),e.LFG(W.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),Rg=(()=>{class s extends W.nH{constructor(t,i,a){super("BalanceRequestService",a,t),this.businessProvider=i}createBalanceRequest(t){const i=Object.fromEntries(Object.entries(t).filter(([a,l])=>null!==l));return this.businessProvider.createBalanceRequest(i)}updateBalanceRequest(t,i){return this.businessProvider.updateBalanceRequest(t,i)}importBalanceRequests(t){return this.businessProvider.importBalanceRequests(t)}validateBalanceRequestExcelData(t,i,a){return this.businessProvider.validateBalanceRequestExcelData(t,i,a)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(gr,8),e.LFG(gr),e.LFG(K.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),Ns=(()=>{class s extends b.m1{constructor(t,i,a,l,d,ee){if(super({loading:!1,balanceRequests:[],done:!1,searchQuery:"",formName:void 0,statementId:void 0,legalCaseId:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=a,this.toast=l,this.formService=d,this.balanceRequestService=ee,this.errors$=this.select(r=>r.errors),this.loading$=this.select(r=>r.loading),this.done$=this.select(r=>r.done),this.item$=this.select(r=>r.item),this.balanceRequests$=this.select(r=>r.balanceRequests),this.documents$=this.select(r=>r.documents||[]),this.legalCases$=this.select(r=>r.legalCases||[]),this.statementId$=this.select(r=>r.statementId),this.legalCaseId$=this.select(r=>r.legalCaseId),this.paging$=this.select(r=>r.paging),this.searchQuery$=this.select(r=>r.searchQuery),this.formName$=this.select(r=>r.formName),this.actionResult$=this.select(this.item$,this.done$,(r,m)=>({item:r,done:m}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.balanceRequests$,this.documents$,this.legalCases$,(r,m,p,v,I,B,_e)=>({errors:r,loading:m,item:p,formName:v,balanceRequests:I,documents:B,legalCases:_e}),{debounce:!0}),this.input$=this.select(this.paging$,this.statementId$,this.legalCaseId$,this.searchQuery$,(r,m,p,v)=>({limit:r.limit,skip:r.skip,name:v,statementId:m,legalCaseId:p,total:r.total})),this.setFormName=this.updater((r,m)=>Object.assign(Object.assign({},r),{formName:m})),this.setStatementId=this.updater((r,m)=>Object.assign(Object.assign({},r),{statementId:m})),this.setAttorneyId=this.updater((r,m)=>Object.assign(Object.assign({},r),{attorneyId:m})),this.setLegalCaseId=this.updater((r,m)=>Object.assign(Object.assign({},r),{legalCaseId:m})),this.filterDocuments=r=>this.data.userSelectDocuments({input:{name:r}}).pipe((0,b._b)(m=>{let p=m.data.items;return this.patchState({documents:p}),p},m=>this.patchState({errors:m.graphQLErrors?m.graphQLErrors:m})),(0,fe.U)(m=>m.data.items)),this.filterLegalCases=r=>this.data.userSelectLegalCases({input:{name:r}}).pipe((0,b._b)(m=>{let p=m.data.items;return this.patchState({legalCases:p}),p},m=>this.patchState({errors:m.graphQLErrors?m.graphQLErrors:m})),(0,fe.U)(m=>m.data.items)),this.addDocument=this.updater((r,m)=>Object.assign(Object.assign({},r),{documents:r.documents.concat(m)})),this.addLegalCase=this.updater((r,m)=>Object.assign(Object.assign({},r),{legalCases:r.legalCases.concat(m)})),this.setItem=this.updater((r,m)=>Object.assign(Object.assign({},r),{item:m})),this.addNewBalanceRequest=this.updater((r,m)=>Object.assign(Object.assign({},r),{balanceRequests:[...r.balanceRequests,m]})),this.updateBalanceRequest=this.updater((r,m)=>Object.assign(Object.assign({},r),{balanceRequests:r.balanceRequests.map(p=>p.id===m.id?m:p)})),this.addBalanceRequests=this.updater((r,m)=>Object.assign(Object.assign({},r),{balanceRequests:r.balanceRequests.concat(m)})),this.updateBalanceRequests=this.updater((r,m)=>Object.assign(Object.assign({},r),{balanceRequests:r.balanceRequests.map(p=>m.find(I=>I.id===p.id)||p)})),this.setSearchQuery=this.updater((r,m)=>Object.assign(Object.assign({},r),{searchQuery:m})),this.loadBalanceRequestEffect=this.effect(r=>r.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(m=>this.data.userBalanceRequest({balanceRequestId:m}).pipe((0,b._b)(p=>{this.patchState({item:p.data.item,errors:p.errors,loading:!1})},p=>this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})))))),this.loadBalanceRequestsEffect=this.effect(r=>r.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.input$),(0,h.w)(([m,p])=>this.data.userBalanceRequests({input:p}).pipe((0,b._b)(v=>this.patchState({paging:{limit:p.limit,skip:p.skip,total:v.data.count.total},balanceRequests:v.data.items,errors:v.errors,loading:!1}),v=>this.patchState({loading:!1,errors:v.graphQLErrors?v.graphQLErrors:v})))))),this.createBalanceRequestEffect=this.effect(r=>r.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(m=>this.balanceRequestService.createBalanceRequest(Object.assign({},m)).pipe((0,b._b)(p=>{this.addNewBalanceRequest(p),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:p,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},p=>{p.graphQLErrors?(this.toast.error(p.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})):(this.toast.error(p.Message),this.formService.setErrors(p.Data))}))))),this.updateBalanceRequestEffect=this.effect(r=>r.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([m,p])=>this.balanceRequestService.updateBalanceRequest(m,m.id).pipe((0,b._b)(v=>{this.updateBalanceRequest(v),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:v,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},v=>{v.graphQLErrors?(this.toast.error(v.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:v.graphQLErrors?v.graphQLErrors:v})):(this.toast.error(v.Message),this.formService.setErrors(v.Data))}))))),this.deleteBalanceRequestEffect=this.effect(r=>r.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([m,p])=>this.data.userDeleteBalanceRequest({balanceRequestId:p.id}).pipe((0,b._b)(v=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:v.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},v=>{v.graphQLErrors?(this.toast.error(v.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:v.graphQLErrors?v.graphQLErrors:v})):(this.toast.error(v.Message),this.formService.setErrors(v.Data))}))))),this.importExcelEffect=this.effect(r=>r.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(m=>this.balanceRequestService.importBalanceRequests(m).pipe((0,de.K)(p=>{var v;return this.toast.error(null!==(v=p.Message)&&void 0!==v?v:"Failed to save",{duration:3e3}),q.E}),(0,y.b)(p=>{const v=JSON.parse(p.created),I=JSON.parse(p.updated),B=JSON.parse(p.failed),_e=v.length+I.length+B.length;this.addBalanceRequests(v),this.updateBalanceRequests(I),this.toast.success(`${v.length} created, ${I.length} updated, ${B.length} failed of total ${_e}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("balanceRequestId")?(this.route.snapshot.paramMap.get("balanceRequestId"),this.setFormName("balanceRequest_edit")):this.setFormName("balanceRequest_create"),this.route.snapshot.paramMap.has("statementId")){var c=this.route.snapshot.paramMap.get("statementId");this.setStatementId(c)}if(this.route.snapshot.paramMap.has("legalCaseId")){var u=this.route.snapshot.paramMap.get("legalCaseId");this.setLegalCaseId(u)}if(this.route.snapshot.paramMap.has("attorneyId")){var n=this.route.snapshot.paramMap.get("attorneyId");this.setAttorneyId(n)}}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.balanceRequestService.validateBalanceRequestExcelData(t,i.documents,i.legalCases)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(z.q),e.LFG(O.F0),e.LFG(O.gz),e.LFG(X.F),e.LFG(Z.o),e.LFG(Rg))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function Qg(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.close.emit())})("formIsReady",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.balanceRequest)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let vr=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"balanceRequest_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({id:null,name:""}),this.store.vm$.subscribe(i=>{this.balanceRequest=i.item})):t.formName&&t.formName.currentValue&&"balanceRequest_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadBalanceRequestEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.balanceRequest=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Ns),e.Y36(O.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-balance-request-form"]],inputs:{balanceRequest:"balanceRequest",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,Qg,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[P.O5,te.M,P.Ov],encapsulation:2}),s})(),Cr=(()=>{class s{constructor(){this.autoHeight=!1,this.balanceRequests=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[{field:"statement.name",headerName:"Statement",filter:"agTextColumnFilter"},{field:"legalCase.name",headerName:"Legal Case",filter:"agTextColumnFilter"},{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{field:"requestedOn",filter:"agDateColumnFilter"},{field:"repliedOn",filter:"agDateColumnFilter"},{field:"status",filter:"agTextColumnFilter"},{field:"statementId",filter:"agTextColumnFilter",hide:!0},{field:"type",filter:"agTextColumnFilter"},{headerName:"Balance Amount",field:"balanceAmount",valueFormatter:t=>{var i;return(0,_.oBD)(null===(i=t.data)||void 0===i?void 0:i.balanceAmount,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{field:"legalCaseId",filter:"agTextColumnFilter",hide:!0}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var a;t.includes(null===(a=i.data)||void 0===a?void 0:a.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-balance-request-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(f.x,5),2&t){let a;e.iGM(a=e.CRH())&&(i.tableView=a.first)}},inputs:{autoHeight:"autoHeight",balanceRequests:"balanceRequests"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.balanceRequests)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[f.x],encapsulation:2}),s})();function Vg(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-balance-request-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","balanceRequest_edit")("formControl",t.formControl)("balanceRequest",t.balanceRequest)}}const jg=function(){return{}};function Ug(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-balance-request-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","balanceRequest_create")("formControl",t.formControl)("balanceRequest",e.DdM(3,jg))}}function Jg(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-balance-request-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(d.ref.close())}),e.qZA()}2&s&&e.Q6J("balanceRequests",o.data.items)}let zg=(()=>{class s extends G.fS{constructor(t){super(),this.store=t,this.store.loadBalanceRequestsEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.balanceRequests$.pipe((0,h.w)(i=>(0,D.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Ns))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","balanceRequest","send","close"],[1,"w-full","h-full","bg-white",3,"balanceRequests","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,Vg,2,3,"ng-template",null,1,e.W1O),e.YNc(3,Ug,1,4,"ng-template",null,2,e.W1O),e.YNc(5,Jg,1,1,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",d)("editTemplate",a)("createTemplate",l)("key",i.field.key)}},dependencies:[E.JJ,E.oH,H.$,vr,Cr],encapsulation:2}),s})();function Hg(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-balance-request-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","balanceRequest_edit")("balanceRequest",t.value)}}const qg=function(){return{}};function Kg(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-balance-request-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","balanceRequest_create")("balanceRequest",e.DdM(2,qg))}function Zg(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-balance-request-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(null==d.ref?null:d.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("balanceRequests",t.items)}}let Bg=(()=>{class s extends pe{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:6,consts:[[3,"data","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","balanceRequest","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","balanceRequests","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,Hg,1,2,"ng-template",null,1,e.W1O),e.YNc(3,Kg,1,3,"ng-template",null,2,e.W1O),e.YNc(5,Zg,1,2,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("data",i.data)("title",i.to.title)("onSave",i.onSave)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[he,vr,Cr],encapsulation:2}),s})(),kg=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[Ns],imports:[P.ez,U.F,E.UX,J.o,ae.u,$.P,j.t,me,k.h,se.G,G.X0.forChild({types:[{name:"balance-request-select",component:zg,wrappers:["form-field"]},{name:"balance-request-grid",component:Bg}]})]}),s})(),Yg=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[kg]}),s})();class ht extends W.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class Xg extends ht{constructor(o){super("ValidateBankExcelDataAction"),this.valid=!1,this.excelData=o}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name)}),this.validationContext.addRule(new g.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof g.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(a=>a.name),newNames:[i.newName]}):i instanceof g.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,D.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class ev extends g.wS{constructor(o,t,i,a,l){super(o,t,i,a,l,!0)}}class tv extends g.ul{constructor(o,t,i,a=!1){super(o,t,a),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new g.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new ev("name","The bank name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class iv extends ht{constructor(o){super("CreateBankAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new tv("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateBank({input:this.input}).pipe((0,h.w)(o=>(0,ue.of)(o.data.created)))}}class sv extends ht{constructor(o){super("UpdateBanksAction"),this.banks=o}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.banks,!0))}performAction(){this.response=this.businessProvider.data.userUpdateBanks({input:{banks:this.banks}}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}class ov extends ht{constructor(o,t){super("UpdateBankAction"),this.bank=o,this.bankId=t}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.bank,!0)).addRule(new g.xF("Id","Id should be a CUID and not null",this.bankId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateBank({bankId:this.bankId,input:this.bank}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}let Sr=(()=>{class s extends W.nH{constructor(t,i,a){super("NotificationService.BankBusinessProviderService",t,a),this.data=i}createBank(t){const i=new iv(t);return i.Do(this),i.response}updateBank(t,i){const a=new ov(t,i);return a.Do(this),a.response}importBanks(t){const i=new sv(t);return i.Do(this),i.response}validateBankExcelData(t){const i=new Xg(t);return i.Do(this),i.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(K.ed),e.LFG(z.q),e.LFG(W.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),av=(()=>{class s extends W.nH{constructor(t,i,a){super("BankService",a,t),this.businessProvider=i}createBank(t){const i=Object.fromEntries(Object.entries(t).filter(([a,l])=>null!==l));return this.businessProvider.createBank(i)}updateBank(t,i){return this.businessProvider.updateBank(t,i)}importBanks(t){return this.businessProvider.importBanks(t)}validateBankExcelData(t){return this.businessProvider.validateBankExcelData(t)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(Sr,8),e.LFG(Sr),e.LFG(K.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),As=(()=>{class s extends b.m1{constructor(t,i,a,l,d,ee){super({loading:!1,banks:[],done:!1,searchQuery:"",formName:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=a,this.toast=l,this.formService=d,this.bankService=ee,this.errors$=this.select(c=>c.errors),this.loading$=this.select(c=>c.loading),this.done$=this.select(c=>c.done),this.item$=this.select(c=>c.item),this.banks$=this.select(c=>c.banks),this.paging$=this.select(c=>c.paging),this.searchQuery$=this.select(c=>c.searchQuery),this.formName$=this.select(c=>c.formName),this.actionResult$=this.select(this.item$,this.done$,(c,u)=>({item:c,done:u}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.banks$,(c,u,n,r,m)=>({errors:c,loading:u,item:n,formName:r,banks:m}),{debounce:!0}),this.input$=this.select(this.paging$,this.searchQuery$,(c,u)=>({limit:c.limit,skip:c.skip,name:u,total:c.total})),this.setFormName=this.updater((c,u)=>Object.assign(Object.assign({},c),{formName:u})),this.setItem=this.updater((c,u)=>Object.assign(Object.assign({},c),{item:u})),this.addNewBank=this.updater((c,u)=>Object.assign(Object.assign({},c),{banks:[...c.banks,u]})),this.updateBank=this.updater((c,u)=>Object.assign(Object.assign({},c),{banks:c.banks.map(n=>n.id===u.id?u:n)})),this.addBanks=this.updater((c,u)=>Object.assign(Object.assign({},c),{banks:c.banks.concat(u)})),this.updateBanks=this.updater((c,u)=>Object.assign(Object.assign({},c),{banks:c.banks.map(n=>u.find(m=>m.id===n.id)||n)})),this.setSearchQuery=this.updater((c,u)=>Object.assign(Object.assign({},c),{searchQuery:u})),this.loadBankEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.data.userBank({bankId:u}).pipe((0,b._b)(n=>{this.patchState({item:n.data.item,errors:n.errors,loading:!1})},n=>this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})))))),this.loadBanksEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.input$),(0,h.w)(([u,n])=>this.data.userBanks({input:n}).pipe((0,b._b)(r=>this.patchState({paging:{limit:n.limit,skip:n.skip,total:r.data.count.total},banks:r.data.items,errors:r.errors,loading:!1}),r=>this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})))))),this.createBankEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.bankService.createBank(Object.assign({},u)).pipe((0,b._b)(n=>{this.addNewBank(n),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:n,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},n=>{n.graphQLErrors?(this.toast.error(n.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})):(this.toast.error(n.Message),this.formService.setErrors(n.Data))}))))),this.updateBankEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([u,n])=>this.bankService.updateBank(u,u.id).pipe((0,b._b)(r=>{this.updateBank(r),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:r,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},r=>{r.graphQLErrors?(this.toast.error(r.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})):(this.toast.error(r.Message),this.formService.setErrors(r.Data))}))))),this.deleteBankEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([u,n])=>this.data.userDeleteBank({bankId:n.id}).pipe((0,b._b)(r=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:r.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},r=>{r.graphQLErrors?(this.toast.error(r.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})):(this.toast.error(r.Message),this.formService.setErrors(r.Data))}))))),this.importExcelEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.bankService.importBanks(u).pipe((0,de.K)(n=>{var r;return this.toast.error(null!==(r=n.Message)&&void 0!==r?r:"Failed to save",{duration:3e3}),q.E}),(0,y.b)(n=>{const r=JSON.parse(n.created),m=JSON.parse(n.updated),p=JSON.parse(n.failed),v=r.length+m.length+p.length;this.addBanks(r),this.updateBanks(m),this.toast.success(`${r.length} created, ${m.length} updated, ${p.length} failed of total ${v}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("bankId")?(this.route.snapshot.paramMap.get("bankId"),this.setFormName("bank_edit")):this.setFormName("bank_create")}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.bankService.validateBankExcelData(t)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(z.q),e.LFG(O.F0),e.LFG(O.gz),e.LFG(X.F),e.LFG(Z.o),e.LFG(av))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function rv(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.close.emit())})("formIsReady",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.bank)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let br=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"bank_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.bank=i.item})):t.formName&&t.formName.currentValue&&"bank_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadBankEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.bank=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(As),e.Y36(O.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-bank-form"]],inputs:{bank:"bank",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,rv,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[P.O5,te.M,P.Ov],encapsulation:2}),s})(),Tr=(()=>{class s{constructor(){this.autoHeight=!1,this.banks=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[,{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var a;t.includes(null===(a=i.data)||void 0===a?void 0:a.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-bank-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(f.x,5),2&t){let a;e.iGM(a=e.CRH())&&(i.tableView=a.first)}},inputs:{autoHeight:"autoHeight",banks:"banks"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.banks)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[f.x],encapsulation:2}),s})();function nv(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-bank-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","bank_edit")("formControl",t.formControl)("bank",t.bank)}}const lv=function(){return{}};function cv(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-bank-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","bank_create")("formControl",t.formControl)("bank",e.DdM(3,lv))}}function dv(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-bank-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(d.ref.close())}),e.qZA()}2&s&&e.Q6J("banks",o.data.items)}let uv=(()=>{class s extends G.fS{constructor(t){super(),this.store=t,this.store.loadBanksEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.banks$.pipe((0,h.w)(i=>(0,D.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(As))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","bank","send","close"],[1,"w-full","h-full","bg-white",3,"banks","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,nv,2,3,"ng-template",null,1,e.W1O),e.YNc(3,cv,1,4,"ng-template",null,2,e.W1O),e.YNc(5,dv,1,1,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",d)("editTemplate",a)("createTemplate",l)("key",i.field.key)}},dependencies:[E.JJ,E.oH,H.$,br,Tr],encapsulation:2}),s})();function mv(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-bank-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","bank_edit")("bank",t.value)}}const pv=function(){return{}};function hv(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-bank-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","bank_create")("bank",e.DdM(2,pv))}function fv(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-bank-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(null==d.ref?null:d.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("banks",t.items)}}let _v=(()=>{class s extends pe{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","bank","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","banks","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,mv,1,2,"ng-template",null,1,e.W1O),e.YNc(3,hv,1,3,"ng-template",null,2,e.W1O),e.YNc(5,fv,1,2,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[he,br,Tr],encapsulation:2}),s})(),gv=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[As],imports:[P.ez,U.F,E.UX,J.o,ae.u,$.P,j.t,me,k.h,se.G,G.X0.forChild({types:[{name:"bank-select",component:uv,wrappers:["form-field"]},{name:"bank-grid",component:_v}]})]}),s})(),vv=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[gv]}),s})();class ft extends W.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class Cv extends ft{constructor(o){super("ValidateBatchControlExcelDataAction"),this.valid=!1,this.excelData=o}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name)}),this.validationContext.addRule(new g.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof g.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(a=>a.name),newNames:[i.newName]}):i instanceof g.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,D.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class Sv extends g.wS{constructor(o,t,i,a,l){super(o,t,i,a,l,!0)}}class bv extends g.ul{constructor(o,t,i,a=!1){super(o,t,a),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new g.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new Sv("name","The batchcontrol name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class Tv extends ft{constructor(o){super("CreateBatchControlAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new bv("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateBatchControl({input:this.input}).pipe((0,h.w)(o=>(0,ue.of)(o.data.created)))}}class yv extends ft{constructor(o){super("UpdateBatchControlsAction"),this.batchControls=o}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.batchControls,!0))}performAction(){this.response=this.businessProvider.data.userUpdateBatchControls({input:{batchControls:this.batchControls}}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}class wv extends ft{constructor(o,t){super("UpdateBatchControlAction"),this.batchControl=o,this.batchControlId=t}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.batchControl,!0)).addRule(new g.xF("Id","Id should be a CUID and not null",this.batchControlId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateBatchControl({batchControlId:this.batchControlId,input:this.batchControl}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}let yr=(()=>{class s extends W.nH{constructor(t,i,a){super("NotificationService.BatchControlBusinessProviderService",t,a),this.data=i}createBatchControl(t){const i=new Tv(t);return i.Do(this),i.response}updateBatchControl(t,i){const a=new wv(t,i);return a.Do(this),a.response}importBatchControls(t){const i=new yv(t);return i.Do(this),i.response}validateBatchControlExcelData(t){const i=new Cv(t);return i.Do(this),i.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(K.ed),e.LFG(z.q),e.LFG(W.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),xv=(()=>{class s extends W.nH{constructor(t,i,a){super("BatchControlService",a,t),this.businessProvider=i}createBatchControl(t){const i=Object.fromEntries(Object.entries(t).filter(([a,l])=>null!==l));return this.businessProvider.createBatchControl(i)}updateBatchControl(t,i){return this.businessProvider.updateBatchControl(t,i)}importBatchControls(t){return this.businessProvider.importBatchControls(t)}validateBatchControlExcelData(t){return this.businessProvider.validateBatchControlExcelData(t)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(yr,8),e.LFG(yr),e.LFG(K.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),Fs=(()=>{class s extends b.m1{constructor(t,i,a,l,d,ee){super({loading:!1,batchControls:[],done:!1,searchQuery:"",formName:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=a,this.toast=l,this.formService=d,this.batchControlService=ee,this.errors$=this.select(c=>c.errors),this.loading$=this.select(c=>c.loading),this.done$=this.select(c=>c.done),this.item$=this.select(c=>c.item),this.batchControls$=this.select(c=>c.batchControls),this.paging$=this.select(c=>c.paging),this.searchQuery$=this.select(c=>c.searchQuery),this.formName$=this.select(c=>c.formName),this.actionResult$=this.select(this.item$,this.done$,(c,u)=>({item:c,done:u}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.batchControls$,(c,u,n,r,m)=>({errors:c,loading:u,item:n,formName:r,batchControls:m}),{debounce:!0}),this.input$=this.select(this.paging$,this.searchQuery$,(c,u)=>({limit:c.limit,skip:c.skip,name:u,total:c.total})),this.setFormName=this.updater((c,u)=>Object.assign(Object.assign({},c),{formName:u})),this.setItem=this.updater((c,u)=>Object.assign(Object.assign({},c),{item:u})),this.addNewBatchControl=this.updater((c,u)=>Object.assign(Object.assign({},c),{batchControls:[...c.batchControls,u]})),this.updateBatchControl=this.updater((c,u)=>Object.assign(Object.assign({},c),{batchControls:c.batchControls.map(n=>n.id===u.id?u:n)})),this.addBatchControls=this.updater((c,u)=>Object.assign(Object.assign({},c),{batchControls:c.batchControls.concat(u)})),this.updateBatchControls=this.updater((c,u)=>Object.assign(Object.assign({},c),{batchControls:c.batchControls.map(n=>u.find(m=>m.id===n.id)||n)})),this.setSearchQuery=this.updater((c,u)=>Object.assign(Object.assign({},c),{searchQuery:u})),this.loadBatchControlEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.data.userBatchControl({batchControlId:u}).pipe((0,b._b)(n=>{this.patchState({item:n.data.item,errors:n.errors,loading:!1})},n=>this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})))))),this.loadBatchControlsEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.input$),(0,h.w)(([u,n])=>this.data.userBatchControls({input:n}).pipe((0,b._b)(r=>this.patchState({paging:{limit:n.limit,skip:n.skip,total:r.data.count.total},batchControls:r.data.items,errors:r.errors,loading:!1}),r=>this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})))))),this.createBatchControlEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.batchControlService.createBatchControl(Object.assign({},u)).pipe((0,b._b)(n=>{this.addNewBatchControl(n),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:n,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},n=>{n.graphQLErrors?(this.toast.error(n.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})):(this.toast.error(n.Message),this.formService.setErrors(n.Data))}))))),this.updateBatchControlEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([u,n])=>this.batchControlService.updateBatchControl(u,u.id).pipe((0,b._b)(r=>{this.updateBatchControl(r),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:r,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},r=>{r.graphQLErrors?(this.toast.error(r.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})):(this.toast.error(r.Message),this.formService.setErrors(r.Data))}))))),this.deleteBatchControlEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([u,n])=>this.data.userDeleteBatchControl({batchControlId:n.id}).pipe((0,b._b)(r=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:r.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},r=>{r.graphQLErrors?(this.toast.error(r.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})):(this.toast.error(r.Message),this.formService.setErrors(r.Data))}))))),this.importExcelEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.batchControlService.importBatchControls(u).pipe((0,de.K)(n=>{var r;return this.toast.error(null!==(r=n.Message)&&void 0!==r?r:"Failed to save",{duration:3e3}),q.E}),(0,y.b)(n=>{const r=JSON.parse(n.created),m=JSON.parse(n.updated),p=JSON.parse(n.failed),v=r.length+m.length+p.length;this.addBatchControls(r),this.updateBatchControls(m),this.toast.success(`${r.length} created, ${m.length} updated, ${p.length} failed of total ${v}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("batchControlId")?(this.route.snapshot.paramMap.get("batchControlId"),this.setFormName("batchControl_edit")):this.setFormName("batchControl_create")}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.batchControlService.validateBatchControlExcelData(t)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(z.q),e.LFG(O.F0),e.LFG(O.gz),e.LFG(X.F),e.LFG(Z.o),e.LFG(xv))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function Nv(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.close.emit())})("formIsReady",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.batchControl)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let wr=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"batchControl_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.batchControl=i.item})):t.formName&&t.formName.currentValue&&"batchControl_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadBatchControlEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.batchControl=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Fs),e.Y36(O.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-batch-control-form"]],inputs:{batchControl:"batchControl",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,Nv,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[P.O5,te.M,P.Ov],encapsulation:2}),s})(),xr=(()=>{class s{constructor(){this.autoHeight=!1,this.batchControls=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[,{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{field:"trackingNumber",filter:"agTextColumnFilter"},{headerName:"Batch Total",field:"batchTotal",valueFormatter:t=>{var i;return(0,_.oBD)(null===(i=t.data)||void 0===i?void 0:i.batchTotal,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{field:"defaultGLCode",filter:"agTextColumnFilter"},{headerName:"Posted",field:"posted",filter:"agSetColumnFilter",cellRenderer:"checkboxRenderer"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var a;t.includes(null===(a=i.data)||void 0===a?void 0:a.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-batch-control-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(f.x,5),2&t){let a;e.iGM(a=e.CRH())&&(i.tableView=a.first)}},inputs:{autoHeight:"autoHeight",batchControls:"batchControls"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.batchControls)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[f.x],encapsulation:2}),s})();function Av(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-batch-control-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","batchControl_edit")("formControl",t.formControl)("batchControl",t.batchControl)}}const Fv=function(){return{}};function Pv(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-batch-control-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","batchControl_create")("formControl",t.formControl)("batchControl",e.DdM(3,Fv))}}function Iv(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-batch-control-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(d.ref.close())}),e.qZA()}2&s&&e.Q6J("batchControls",o.data.items)}let Dv=(()=>{class s extends G.fS{constructor(t){super(),this.store=t,this.store.loadBatchControlsEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.batchControls$.pipe((0,h.w)(i=>(0,D.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Fs))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","batchControl","send","close"],[1,"w-full","h-full","bg-white",3,"batchControls","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,Av,2,3,"ng-template",null,1,e.W1O),e.YNc(3,Pv,1,4,"ng-template",null,2,e.W1O),e.YNc(5,Iv,1,1,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",d)("editTemplate",a)("createTemplate",l)("key",i.field.key)}},dependencies:[E.JJ,E.oH,H.$,wr,xr],encapsulation:2}),s})();function Mv(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-batch-control-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","batchControl_edit")("batchControl",t.value)}}const Wv=function(){return{}};function Ev(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-batch-control-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","batchControl_create")("batchControl",e.DdM(2,Wv))}function Ov(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-batch-control-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(null==d.ref?null:d.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("batchControls",t.items)}}let Lv=(()=>{class s extends pe{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","batchControl","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","batchControls","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,Mv,1,2,"ng-template",null,1,e.W1O),e.YNc(3,Ev,1,3,"ng-template",null,2,e.W1O),e.YNc(5,Ov,1,2,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[he,wr,xr],encapsulation:2}),s})(),$v=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[Fs],imports:[P.ez,U.F,E.UX,J.o,ae.u,$.P,j.t,me,k.h,se.G,G.X0.forChild({types:[{name:"batch-control-select",component:Dv,wrappers:["form-field"]},{name:"batch-control-grid",component:Lv}]})]}),s})(),Gv=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[$v]}),s})();class _t extends W.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class Rv extends _t{constructor(o,t,i){super("ValidateBodyPartLeadExcelDataAction"),this.valid=!1,this.excelData=o,this.leads=t,this.bodyParts=i}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name),this.validationContext.addRule(new g.mi(`leadName_${i}_is_valid}`,"Lead Is Not Valid","lead.name",t.lead,this.leads,!0)),this.validationContext.addRule(new g.mi(`bodyPartName_${i}_is_valid}`,"Body Part Is Not Valid","bodyPart.name",t.bodyPart,this.bodyParts,!0))}),this.validationContext.addRule(new g.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof g.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(a=>a.name),newNames:[i.newName]}):i instanceof g.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,D.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class Qv extends g.wS{constructor(o,t,i,a,l){super(o,t,i,a,l,!0)}}class Vv extends g.ul{constructor(o,t,i,a=!1){super(o,t,a),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new g.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new Qv("name","The bodypartlead name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class jv extends _t{constructor(o){super("CreateBodyPartLeadAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new Vv("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateBodyPartLead({input:this.input}).pipe((0,h.w)(o=>(0,ue.of)(o.data.created)))}}class Uv extends _t{constructor(o){super("UpdateBodyPartLeadsAction"),this.bodyPartLeads=o}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.bodyPartLeads,!0))}performAction(){this.response=this.businessProvider.data.userUpdateBodyPartLeads({input:{bodyPartLeads:this.bodyPartLeads}}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}class Jv extends _t{constructor(o,t){super("UpdateBodyPartLeadAction"),this.bodyPartLead=o,this.bodyPartLeadId=t}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.bodyPartLead,!0)).addRule(new g.xF("Id","Id should be a CUID and not null",this.bodyPartLeadId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateBodyPartLead({bodyPartLeadId:this.bodyPartLeadId,input:this.bodyPartLead}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}let Nr=(()=>{class s extends W.nH{constructor(t,i,a){super("NotificationService.BodyPartLeadBusinessProviderService",t,a),this.data=i}createBodyPartLead(t){const i=new jv(t);return i.Do(this),i.response}updateBodyPartLead(t,i){const a=new Jv(t,i);return a.Do(this),a.response}importBodyPartLeads(t){const i=new Uv(t);return i.Do(this),i.response}validateBodyPartLeadExcelData(t,i,a){const l=new Rv(t,i,a);return l.Do(this),l.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(K.ed),e.LFG(z.q),e.LFG(W.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),zv=(()=>{class s extends W.nH{constructor(t,i,a){super("BodyPartLeadService",a,t),this.businessProvider=i}createBodyPartLead(t){const i=Object.fromEntries(Object.entries(t).filter(([a,l])=>null!==l));return this.businessProvider.createBodyPartLead(i)}updateBodyPartLead(t,i){return this.businessProvider.updateBodyPartLead(t,i)}importBodyPartLeads(t){return this.businessProvider.importBodyPartLeads(t)}validateBodyPartLeadExcelData(t,i,a){return this.businessProvider.validateBodyPartLeadExcelData(t,i,a)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(Nr,8),e.LFG(Nr),e.LFG(K.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),Ps=(()=>{class s extends b.m1{constructor(t,i,a,l,d,ee){if(super({loading:!1,bodyPartLeads:[],done:!1,searchQuery:"",formName:void 0,leadId:void 0,bodyPartId:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=a,this.toast=l,this.formService=d,this.bodyPartLeadService=ee,this.errors$=this.select(n=>n.errors),this.loading$=this.select(n=>n.loading),this.done$=this.select(n=>n.done),this.item$=this.select(n=>n.item),this.bodyPartLeads$=this.select(n=>n.bodyPartLeads),this.leads$=this.select(n=>n.leads||[]),this.bodyParts$=this.select(n=>n.bodyParts||[]),this.leadId$=this.select(n=>n.leadId),this.bodyPartId$=this.select(n=>n.bodyPartId),this.paging$=this.select(n=>n.paging),this.searchQuery$=this.select(n=>n.searchQuery),this.formName$=this.select(n=>n.formName),this.actionResult$=this.select(this.item$,this.done$,(n,r)=>({item:n,done:r}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.bodyPartLeads$,this.leads$,this.bodyParts$,(n,r,m,p,v,I,B)=>({errors:n,loading:r,item:m,formName:p,bodyPartLeads:v,leads:I,bodyParts:B}),{debounce:!0}),this.input$=this.select(this.paging$,this.leadId$,this.bodyPartId$,this.searchQuery$,(n,r,m,p)=>({limit:n.limit,skip:n.skip,name:p,leadId:r,bodyPartId:m,total:n.total})),this.setFormName=this.updater((n,r)=>Object.assign(Object.assign({},n),{formName:r})),this.setLeadId=this.updater((n,r)=>Object.assign(Object.assign({},n),{leadId:r})),this.setBodyPartId=this.updater((n,r)=>Object.assign(Object.assign({},n),{bodyPartId:r})),this.filterLeads=n=>this.data.userSelectLeads({input:{name:n}}).pipe((0,b._b)(r=>{let m=r.data.items;return this.patchState({leads:m}),m},r=>this.patchState({errors:r.graphQLErrors?r.graphQLErrors:r})),(0,fe.U)(r=>r.data.items)),this.filterBodyParts=n=>this.data.userSelectBodyParts({input:{name:n}}).pipe((0,b._b)(r=>{let m=r.data.items;return this.patchState({bodyParts:m}),m},r=>this.patchState({errors:r.graphQLErrors?r.graphQLErrors:r})),(0,fe.U)(r=>r.data.items)),this.addLead=this.updater((n,r)=>Object.assign(Object.assign({},n),{leads:n.leads.concat(r)})),this.addBodyPart=this.updater((n,r)=>Object.assign(Object.assign({},n),{bodyParts:n.bodyParts.concat(r)})),this.setItem=this.updater((n,r)=>Object.assign(Object.assign({},n),{item:r})),this.addNewBodyPartLead=this.updater((n,r)=>Object.assign(Object.assign({},n),{bodyPartLeads:[...n.bodyPartLeads,r]})),this.updateBodyPartLead=this.updater((n,r)=>Object.assign(Object.assign({},n),{bodyPartLeads:n.bodyPartLeads.map(m=>m.id===r.id?r:m)})),this.addBodyPartLeads=this.updater((n,r)=>Object.assign(Object.assign({},n),{bodyPartLeads:n.bodyPartLeads.concat(r)})),this.updateBodyPartLeads=this.updater((n,r)=>Object.assign(Object.assign({},n),{bodyPartLeads:n.bodyPartLeads.map(m=>r.find(v=>v.id===m.id)||m)})),this.setSearchQuery=this.updater((n,r)=>Object.assign(Object.assign({},n),{searchQuery:r})),this.loadBodyPartLeadEffect=this.effect(n=>n.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(r=>this.data.userBodyPartLead({bodyPartLeadId:r}).pipe((0,b._b)(m=>{this.patchState({item:m.data.item,errors:m.errors,loading:!1})},m=>this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})))))),this.loadBodyPartLeadsEffect=this.effect(n=>n.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.input$),(0,h.w)(([r,m])=>this.data.userBodyPartLeads({input:m}).pipe((0,b._b)(p=>this.patchState({paging:{limit:m.limit,skip:m.skip,total:p.data.count.total},bodyPartLeads:p.data.items,errors:p.errors,loading:!1}),p=>this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})))))),this.createBodyPartLeadEffect=this.effect(n=>n.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(r=>this.bodyPartLeadService.createBodyPartLead(Object.assign({},r)).pipe((0,b._b)(m=>{this.addNewBodyPartLead(m),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:m,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},m=>{m.graphQLErrors?(this.toast.error(m.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})):(this.toast.error(m.Message),this.formService.setErrors(m.Data))}))))),this.updateBodyPartLeadEffect=this.effect(n=>n.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([r,m])=>this.bodyPartLeadService.updateBodyPartLead(r,r.id).pipe((0,b._b)(p=>{this.updateBodyPartLead(p),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:p,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},p=>{p.graphQLErrors?(this.toast.error(p.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})):(this.toast.error(p.Message),this.formService.setErrors(p.Data))}))))),this.deleteBodyPartLeadEffect=this.effect(n=>n.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([r,m])=>this.data.userDeleteBodyPartLead({bodyPartLeadId:m.id}).pipe((0,b._b)(p=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:p.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},p=>{p.graphQLErrors?(this.toast.error(p.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})):(this.toast.error(p.Message),this.formService.setErrors(p.Data))}))))),this.importExcelEffect=this.effect(n=>n.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(r=>this.bodyPartLeadService.importBodyPartLeads(r).pipe((0,de.K)(m=>{var p;return this.toast.error(null!==(p=m.Message)&&void 0!==p?p:"Failed to save",{duration:3e3}),q.E}),(0,y.b)(m=>{const p=JSON.parse(m.created),v=JSON.parse(m.updated),I=JSON.parse(m.failed),B=p.length+v.length+I.length;this.addBodyPartLeads(p),this.updateBodyPartLeads(v),this.toast.success(`${p.length} created, ${v.length} updated, ${I.length} failed of total ${B}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("bodyPartLeadId")?(this.route.snapshot.paramMap.get("bodyPartLeadId"),this.setFormName("bodyPartLead_edit")):this.setFormName("bodyPartLead_create"),this.route.snapshot.paramMap.has("leadId")){var c=this.route.snapshot.paramMap.get("leadId");this.setLeadId(c)}if(this.route.snapshot.paramMap.has("bodyPartId")){var u=this.route.snapshot.paramMap.get("bodyPartId");this.setBodyPartId(u)}}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.bodyPartLeadService.validateBodyPartLeadExcelData(t,i.leads,i.bodyParts)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(z.q),e.LFG(O.F0),e.LFG(O.gz),e.LFG(X.F),e.LFG(Z.o),e.LFG(zv))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function Hv(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.close.emit())})("formIsReady",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.bodyPartLead)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let Ar=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"bodyPartLead_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({id:null,name:""}),this.store.vm$.subscribe(i=>{this.bodyPartLead=i.item})):t.formName&&t.formName.currentValue&&"bodyPartLead_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadBodyPartLeadEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.bodyPartLead=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Ps),e.Y36(O.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-body-part-lead-form"]],inputs:{bodyPartLead:"bodyPartLead",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,Hv,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[P.O5,te.M,P.Ov],encapsulation:2}),s})(),Fr=(()=>{class s{constructor(){this.autoHeight=!1,this.bodyPartLeads=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[{field:"lead.name",headerName:"Lead",filter:"agTextColumnFilter"},{field:"bodyPart.name",headerName:"Body Part",filter:"agTextColumnFilter"},{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{field:"leadId",filter:"agTextColumnFilter",hide:!0},{field:"bodyPartId",filter:"agTextColumnFilter",hide:!0}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var a;t.includes(null===(a=i.data)||void 0===a?void 0:a.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-body-part-lead-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(f.x,5),2&t){let a;e.iGM(a=e.CRH())&&(i.tableView=a.first)}},inputs:{autoHeight:"autoHeight",bodyPartLeads:"bodyPartLeads"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.bodyPartLeads)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[f.x],encapsulation:2}),s})();function qv(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-body-part-lead-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","bodyPartLead_edit")("formControl",t.formControl)("bodyPartLead",t.bodyPartLead)}}const Kv=function(){return{}};function Zv(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-body-part-lead-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","bodyPartLead_create")("formControl",t.formControl)("bodyPartLead",e.DdM(3,Kv))}}function Bv(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-body-part-lead-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(d.ref.close())}),e.qZA()}2&s&&e.Q6J("bodyPartLeads",o.data.items)}let kv=(()=>{class s extends G.fS{constructor(t){super(),this.store=t,this.store.loadBodyPartLeadsEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.bodyPartLeads$.pipe((0,h.w)(i=>(0,D.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Ps))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","bodyPartLead","send","close"],[1,"w-full","h-full","bg-white",3,"bodyPartLeads","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,qv,2,3,"ng-template",null,1,e.W1O),e.YNc(3,Zv,1,4,"ng-template",null,2,e.W1O),e.YNc(5,Bv,1,1,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",d)("editTemplate",a)("createTemplate",l)("key",i.field.key)}},dependencies:[E.JJ,E.oH,H.$,Ar,Fr],encapsulation:2}),s})();function Yv(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-body-part-lead-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","bodyPartLead_edit")("bodyPartLead",t.value)}}const Xv=function(){return{}};function eC(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-body-part-lead-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","bodyPartLead_create")("bodyPartLead",e.DdM(2,Xv))}function tC(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-body-part-lead-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(null==d.ref?null:d.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("bodyPartLeads",t.items)}}let iC=(()=>{class s extends pe{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:6,consts:[[3,"data","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","bodyPartLead","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","bodyPartLeads","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,Yv,1,2,"ng-template",null,1,e.W1O),e.YNc(3,eC,1,3,"ng-template",null,2,e.W1O),e.YNc(5,tC,1,2,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("data",i.data)("title",i.to.title)("onSave",i.onSave)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[he,Ar,Fr],encapsulation:2}),s})(),sC=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[Ps],imports:[P.ez,U.F,E.UX,J.o,ae.u,$.P,j.t,me,k.h,se.G,G.X0.forChild({types:[{name:"body-part-lead-select",component:kv,wrappers:["form-field"]},{name:"body-part-lead-grid",component:iC}]})]}),s})(),oC=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[sC]}),s})();class gt extends W.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class aC extends gt{constructor(o){super("ValidateBodyPartExcelDataAction"),this.valid=!1,this.excelData=o}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name)}),this.validationContext.addRule(new g.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof g.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(a=>a.name),newNames:[i.newName]}):i instanceof g.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,D.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class rC extends g.wS{constructor(o,t,i,a,l){super(o,t,i,a,l,!0)}}class nC extends g.ul{constructor(o,t,i,a=!1){super(o,t,a),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new g.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new rC("name","The bodypart name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class lC extends gt{constructor(o){super("CreateBodyPartAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new nC("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateBodyPart({input:this.input}).pipe((0,h.w)(o=>(0,ue.of)(o.data.created)))}}class cC extends gt{constructor(o){super("UpdateBodyPartsAction"),this.bodyParts=o}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.bodyParts,!0))}performAction(){this.response=this.businessProvider.data.userUpdateBodyParts({input:{bodyParts:this.bodyParts}}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}class dC extends gt{constructor(o,t){super("UpdateBodyPartAction"),this.bodyPart=o,this.bodyPartId=t}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.bodyPart,!0)).addRule(new g.xF("Id","Id should be a CUID and not null",this.bodyPartId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateBodyPart({bodyPartId:this.bodyPartId,input:this.bodyPart}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}let Pr=(()=>{class s extends W.nH{constructor(t,i,a){super("NotificationService.BodyPartBusinessProviderService",t,a),this.data=i}createBodyPart(t){const i=new lC(t);return i.Do(this),i.response}updateBodyPart(t,i){const a=new dC(t,i);return a.Do(this),a.response}importBodyParts(t){const i=new cC(t);return i.Do(this),i.response}validateBodyPartExcelData(t){const i=new aC(t);return i.Do(this),i.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(K.ed),e.LFG(z.q),e.LFG(W.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),uC=(()=>{class s extends W.nH{constructor(t,i,a){super("BodyPartService",a,t),this.businessProvider=i}createBodyPart(t){const i=Object.fromEntries(Object.entries(t).filter(([a,l])=>null!==l));return this.businessProvider.createBodyPart(i)}updateBodyPart(t,i){return this.businessProvider.updateBodyPart(t,i)}importBodyParts(t){return this.businessProvider.importBodyParts(t)}validateBodyPartExcelData(t){return this.businessProvider.validateBodyPartExcelData(t)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(Pr,8),e.LFG(Pr),e.LFG(K.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),Is=(()=>{class s extends b.m1{constructor(t,i,a,l,d,ee){super({loading:!1,bodyParts:[],done:!1,searchQuery:"",formName:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=a,this.toast=l,this.formService=d,this.bodyPartService=ee,this.errors$=this.select(c=>c.errors),this.loading$=this.select(c=>c.loading),this.done$=this.select(c=>c.done),this.item$=this.select(c=>c.item),this.bodyParts$=this.select(c=>c.bodyParts),this.paging$=this.select(c=>c.paging),this.searchQuery$=this.select(c=>c.searchQuery),this.formName$=this.select(c=>c.formName),this.actionResult$=this.select(this.item$,this.done$,(c,u)=>({item:c,done:u}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.bodyParts$,(c,u,n,r,m)=>({errors:c,loading:u,item:n,formName:r,bodyParts:m}),{debounce:!0}),this.input$=this.select(this.paging$,this.searchQuery$,(c,u)=>({limit:c.limit,skip:c.skip,name:u,total:c.total})),this.setFormName=this.updater((c,u)=>Object.assign(Object.assign({},c),{formName:u})),this.setItem=this.updater((c,u)=>Object.assign(Object.assign({},c),{item:u})),this.addNewBodyPart=this.updater((c,u)=>Object.assign(Object.assign({},c),{bodyParts:[...c.bodyParts,u]})),this.updateBodyPart=this.updater((c,u)=>Object.assign(Object.assign({},c),{bodyParts:c.bodyParts.map(n=>n.id===u.id?u:n)})),this.addBodyParts=this.updater((c,u)=>Object.assign(Object.assign({},c),{bodyParts:c.bodyParts.concat(u)})),this.updateBodyParts=this.updater((c,u)=>Object.assign(Object.assign({},c),{bodyParts:c.bodyParts.map(n=>u.find(m=>m.id===n.id)||n)})),this.setSearchQuery=this.updater((c,u)=>Object.assign(Object.assign({},c),{searchQuery:u})),this.loadBodyPartEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.data.userBodyPart({bodyPartId:u}).pipe((0,b._b)(n=>{this.patchState({item:n.data.item,errors:n.errors,loading:!1})},n=>this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})))))),this.loadBodyPartsEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.input$),(0,h.w)(([u,n])=>this.data.userBodyParts({input:n}).pipe((0,b._b)(r=>this.patchState({paging:{limit:n.limit,skip:n.skip,total:r.data.count.total},bodyParts:r.data.items,errors:r.errors,loading:!1}),r=>this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})))))),this.createBodyPartEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.bodyPartService.createBodyPart(Object.assign({},u)).pipe((0,b._b)(n=>{this.addNewBodyPart(n),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:n,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},n=>{n.graphQLErrors?(this.toast.error(n.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})):(this.toast.error(n.Message),this.formService.setErrors(n.Data))}))))),this.updateBodyPartEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([u,n])=>this.bodyPartService.updateBodyPart(u,u.id).pipe((0,b._b)(r=>{this.updateBodyPart(r),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:r,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},r=>{r.graphQLErrors?(this.toast.error(r.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})):(this.toast.error(r.Message),this.formService.setErrors(r.Data))}))))),this.deleteBodyPartEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([u,n])=>this.data.userDeleteBodyPart({bodyPartId:n.id}).pipe((0,b._b)(r=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:r.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},r=>{r.graphQLErrors?(this.toast.error(r.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})):(this.toast.error(r.Message),this.formService.setErrors(r.Data))}))))),this.importExcelEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.bodyPartService.importBodyParts(u).pipe((0,de.K)(n=>{var r;return this.toast.error(null!==(r=n.Message)&&void 0!==r?r:"Failed to save",{duration:3e3}),q.E}),(0,y.b)(n=>{const r=JSON.parse(n.created),m=JSON.parse(n.updated),p=JSON.parse(n.failed),v=r.length+m.length+p.length;this.addBodyParts(r),this.updateBodyParts(m),this.toast.success(`${r.length} created, ${m.length} updated, ${p.length} failed of total ${v}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("bodyPartId")?(this.route.snapshot.paramMap.get("bodyPartId"),this.setFormName("bodyPart_edit")):this.setFormName("bodyPart_create")}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.bodyPartService.validateBodyPartExcelData(t)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(z.q),e.LFG(O.F0),e.LFG(O.gz),e.LFG(X.F),e.LFG(Z.o),e.LFG(uC))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function mC(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.close.emit())})("formIsReady",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.bodyPart)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let Ir=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"bodyPart_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({id:null,name:""}),this.store.vm$.subscribe(i=>{this.bodyPart=i.item})):t.formName&&t.formName.currentValue&&"bodyPart_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadBodyPartEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.bodyPart=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Is),e.Y36(O.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-body-part-form"]],inputs:{bodyPart:"bodyPart",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,mC,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[P.O5,te.M,P.Ov],encapsulation:2}),s})(),Dr=(()=>{class s{constructor(){this.autoHeight=!1,this.bodyParts=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[,{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var a;t.includes(null===(a=i.data)||void 0===a?void 0:a.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-body-part-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(f.x,5),2&t){let a;e.iGM(a=e.CRH())&&(i.tableView=a.first)}},inputs:{autoHeight:"autoHeight",bodyParts:"bodyParts"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.bodyParts)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[f.x],encapsulation:2}),s})();function pC(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-body-part-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","bodyPart_edit")("formControl",t.formControl)("bodyPart",t.bodyPart)}}const hC=function(){return{}};function fC(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-body-part-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","bodyPart_create")("formControl",t.formControl)("bodyPart",e.DdM(3,hC))}}function _C(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-body-part-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(d.ref.close())}),e.qZA()}2&s&&e.Q6J("bodyParts",o.data.items)}let gC=(()=>{class s extends G.fS{constructor(t){super(),this.store=t,this.store.loadBodyPartsEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.bodyParts$.pipe((0,h.w)(i=>(0,D.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Is))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","bodyPart","send","close"],[1,"w-full","h-full","bg-white",3,"bodyParts","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,pC,2,3,"ng-template",null,1,e.W1O),e.YNc(3,fC,1,4,"ng-template",null,2,e.W1O),e.YNc(5,_C,1,1,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",d)("editTemplate",a)("createTemplate",l)("key",i.field.key)}},dependencies:[E.JJ,E.oH,H.$,Ir,Dr],encapsulation:2}),s})();function vC(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-body-part-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","bodyPart_edit")("bodyPart",t.value)}}const CC=function(){return{}};function SC(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-body-part-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","bodyPart_create")("bodyPart",e.DdM(2,CC))}function bC(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-body-part-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(null==d.ref?null:d.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("bodyParts",t.items)}}let TC=(()=>{class s extends pe{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:6,consts:[[3,"data","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","bodyPart","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","bodyParts","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,vC,1,2,"ng-template",null,1,e.W1O),e.YNc(3,SC,1,3,"ng-template",null,2,e.W1O),e.YNc(5,bC,1,2,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("data",i.data)("title",i.to.title)("onSave",i.onSave)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[he,Ir,Dr],encapsulation:2}),s})(),yC=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[Is],imports:[P.ez,U.F,E.UX,J.o,ae.u,$.P,j.t,me,k.h,se.G,G.X0.forChild({types:[{name:"body-part-select",component:gC,wrappers:["form-field"]},{name:"body-part-grid",component:TC}]})]}),s})(),wC=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[yC]}),s})();class vt extends W.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class xC extends vt{constructor(o){super("ValidateCalculationBasisTypeExcelDataAction"),this.valid=!1,this.excelData=o}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name)}),this.validationContext.addRule(new g.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof g.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(a=>a.name),newNames:[i.newName]}):i instanceof g.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,D.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class NC extends g.wS{constructor(o,t,i,a,l){super(o,t,i,a,l,!0)}}class AC extends g.ul{constructor(o,t,i,a=!1){super(o,t,a),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new g.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new NC("name","The calculationbasistype name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class FC extends vt{constructor(o){super("CreateCalculationBasisTypeAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new AC("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateCalculationBasisType({input:this.input}).pipe((0,h.w)(o=>(0,ue.of)(o.data.created)))}}class PC extends vt{constructor(o){super("UpdateCalculationBasisTypesAction"),this.calculationBasisTypes=o}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.calculationBasisTypes,!0))}performAction(){this.response=this.businessProvider.data.userUpdateCalculationBasisTypes({input:{calculationBasisTypes:this.calculationBasisTypes}}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}class IC extends vt{constructor(o,t){super("UpdateCalculationBasisTypeAction"),this.calculationBasisType=o,this.calculationBasisTypeId=t}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.calculationBasisType,!0)).addRule(new g.xF("Id","Id should be a CUID and not null",this.calculationBasisTypeId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateCalculationBasisType({calculationBasisTypeId:this.calculationBasisTypeId,input:this.calculationBasisType}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}let Mr=(()=>{class s extends W.nH{constructor(t,i,a){super("NotificationService.CalculationBasisTypeBusinessProviderService",t,a),this.data=i}createCalculationBasisType(t){const i=new FC(t);return i.Do(this),i.response}updateCalculationBasisType(t,i){const a=new IC(t,i);return a.Do(this),a.response}importCalculationBasisTypes(t){const i=new PC(t);return i.Do(this),i.response}validateCalculationBasisTypeExcelData(t){const i=new xC(t);return i.Do(this),i.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(K.ed),e.LFG(z.q),e.LFG(W.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),DC=(()=>{class s extends W.nH{constructor(t,i,a){super("CalculationBasisTypeService",a,t),this.businessProvider=i}createCalculationBasisType(t){const i=Object.fromEntries(Object.entries(t).filter(([a,l])=>null!==l));return this.businessProvider.createCalculationBasisType(i)}updateCalculationBasisType(t,i){return this.businessProvider.updateCalculationBasisType(t,i)}importCalculationBasisTypes(t){return this.businessProvider.importCalculationBasisTypes(t)}validateCalculationBasisTypeExcelData(t){return this.businessProvider.validateCalculationBasisTypeExcelData(t)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(Mr,8),e.LFG(Mr),e.LFG(K.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),Ds=(()=>{class s extends b.m1{constructor(t,i,a,l,d,ee){super({loading:!1,calculationBasisTypes:[],done:!1,searchQuery:"",formName:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=a,this.toast=l,this.formService=d,this.calculationBasisTypeService=ee,this.errors$=this.select(c=>c.errors),this.loading$=this.select(c=>c.loading),this.done$=this.select(c=>c.done),this.item$=this.select(c=>c.item),this.calculationBasisTypes$=this.select(c=>c.calculationBasisTypes),this.paging$=this.select(c=>c.paging),this.searchQuery$=this.select(c=>c.searchQuery),this.formName$=this.select(c=>c.formName),this.actionResult$=this.select(this.item$,this.done$,(c,u)=>({item:c,done:u}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.calculationBasisTypes$,(c,u,n,r,m)=>({errors:c,loading:u,item:n,formName:r,calculationBasisTypes:m}),{debounce:!0}),this.input$=this.select(this.paging$,this.searchQuery$,(c,u)=>({limit:c.limit,skip:c.skip,name:u,total:c.total})),this.setFormName=this.updater((c,u)=>Object.assign(Object.assign({},c),{formName:u})),this.setItem=this.updater((c,u)=>Object.assign(Object.assign({},c),{item:u})),this.addNewCalculationBasisType=this.updater((c,u)=>Object.assign(Object.assign({},c),{calculationBasisTypes:[...c.calculationBasisTypes,u]})),this.updateCalculationBasisType=this.updater((c,u)=>Object.assign(Object.assign({},c),{calculationBasisTypes:c.calculationBasisTypes.map(n=>n.id===u.id?u:n)})),this.addCalculationBasisTypes=this.updater((c,u)=>Object.assign(Object.assign({},c),{calculationBasisTypes:c.calculationBasisTypes.concat(u)})),this.updateCalculationBasisTypes=this.updater((c,u)=>Object.assign(Object.assign({},c),{calculationBasisTypes:c.calculationBasisTypes.map(n=>u.find(m=>m.id===n.id)||n)})),this.setSearchQuery=this.updater((c,u)=>Object.assign(Object.assign({},c),{searchQuery:u})),this.loadCalculationBasisTypeEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.data.userCalculationBasisType({calculationBasisTypeId:u}).pipe((0,b._b)(n=>{this.patchState({item:n.data.item,errors:n.errors,loading:!1})},n=>this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})))))),this.loadCalculationBasisTypesEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.input$),(0,h.w)(([u,n])=>this.data.userCalculationBasisTypes({input:n}).pipe((0,b._b)(r=>this.patchState({paging:{limit:n.limit,skip:n.skip,total:r.data.count.total},calculationBasisTypes:r.data.items,errors:r.errors,loading:!1}),r=>this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})))))),this.createCalculationBasisTypeEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.calculationBasisTypeService.createCalculationBasisType(Object.assign({},u)).pipe((0,b._b)(n=>{this.addNewCalculationBasisType(n),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:n,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},n=>{n.graphQLErrors?(this.toast.error(n.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})):(this.toast.error(n.Message),this.formService.setErrors(n.Data))}))))),this.updateCalculationBasisTypeEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([u,n])=>this.calculationBasisTypeService.updateCalculationBasisType(u,u.id).pipe((0,b._b)(r=>{this.updateCalculationBasisType(r),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:r,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},r=>{r.graphQLErrors?(this.toast.error(r.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})):(this.toast.error(r.Message),this.formService.setErrors(r.Data))}))))),this.deleteCalculationBasisTypeEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([u,n])=>this.data.userDeleteCalculationBasisType({calculationBasisTypeId:n.id}).pipe((0,b._b)(r=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:r.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},r=>{r.graphQLErrors?(this.toast.error(r.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})):(this.toast.error(r.Message),this.formService.setErrors(r.Data))}))))),this.importExcelEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.calculationBasisTypeService.importCalculationBasisTypes(u).pipe((0,de.K)(n=>{var r;return this.toast.error(null!==(r=n.Message)&&void 0!==r?r:"Failed to save",{duration:3e3}),q.E}),(0,y.b)(n=>{const r=JSON.parse(n.created),m=JSON.parse(n.updated),p=JSON.parse(n.failed),v=r.length+m.length+p.length;this.addCalculationBasisTypes(r),this.updateCalculationBasisTypes(m),this.toast.success(`${r.length} created, ${m.length} updated, ${p.length} failed of total ${v}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("calculationBasisTypeId")?(this.route.snapshot.paramMap.get("calculationBasisTypeId"),this.setFormName("calculationBasisType_edit")):this.setFormName("calculationBasisType_create")}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.calculationBasisTypeService.validateCalculationBasisTypeExcelData(t)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(z.q),e.LFG(O.F0),e.LFG(O.gz),e.LFG(X.F),e.LFG(Z.o),e.LFG(DC))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function MC(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.close.emit())})("formIsReady",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.calculationBasisType)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let Wr=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"calculationBasisType_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.calculationBasisType=i.item})):t.formName&&t.formName.currentValue&&"calculationBasisType_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadCalculationBasisTypeEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.calculationBasisType=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Ds),e.Y36(O.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-calculation-basis-type-form"]],inputs:{calculationBasisType:"calculationBasisType",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,MC,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[P.O5,te.M,P.Ov],encapsulation:2}),s})(),Er=(()=>{class s{constructor(){this.autoHeight=!1,this.calculationBasisTypes=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[,{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var a;t.includes(null===(a=i.data)||void 0===a?void 0:a.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-calculation-basis-type-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(f.x,5),2&t){let a;e.iGM(a=e.CRH())&&(i.tableView=a.first)}},inputs:{autoHeight:"autoHeight",calculationBasisTypes:"calculationBasisTypes"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.calculationBasisTypes)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[f.x],encapsulation:2}),s})();function WC(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-calculation-basis-type-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","calculationBasisType_edit")("formControl",t.formControl)("calculationBasisType",t.calculationBasisType)}}const EC=function(){return{}};function OC(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-calculation-basis-type-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","calculationBasisType_create")("formControl",t.formControl)("calculationBasisType",e.DdM(3,EC))}}function LC(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-calculation-basis-type-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(d.ref.close())}),e.qZA()}2&s&&e.Q6J("calculationBasisTypes",o.data.items)}let $C=(()=>{class s extends G.fS{constructor(t){super(),this.store=t,this.store.loadCalculationBasisTypesEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.calculationBasisTypes$.pipe((0,h.w)(i=>(0,D.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Ds))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","calculationBasisType","send","close"],[1,"w-full","h-full","bg-white",3,"calculationBasisTypes","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,WC,2,3,"ng-template",null,1,e.W1O),e.YNc(3,OC,1,4,"ng-template",null,2,e.W1O),e.YNc(5,LC,1,1,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",d)("editTemplate",a)("createTemplate",l)("key",i.field.key)}},dependencies:[E.JJ,E.oH,H.$,Wr,Er],encapsulation:2}),s})();function GC(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-calculation-basis-type-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","calculationBasisType_edit")("calculationBasisType",t.value)}}const RC=function(){return{}};function QC(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-calculation-basis-type-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","calculationBasisType_create")("calculationBasisType",e.DdM(2,RC))}function VC(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-calculation-basis-type-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(null==d.ref?null:d.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("calculationBasisTypes",t.items)}}let jC=(()=>{class s extends pe{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","calculationBasisType","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","calculationBasisTypes","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,GC,1,2,"ng-template",null,1,e.W1O),e.YNc(3,QC,1,3,"ng-template",null,2,e.W1O),e.YNc(5,VC,1,2,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[he,Wr,Er],encapsulation:2}),s})(),UC=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[Ds],imports:[P.ez,U.F,E.UX,J.o,ae.u,$.P,j.t,me,k.h,se.G,G.X0.forChild({types:[{name:"calculation-basis-type-select",component:$C,wrappers:["form-field"]},{name:"calculation-basis-type-grid",component:jC}]})]}),s})(),JC=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[UC]}),s})();class Ct extends W.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class zC extends Ct{constructor(o,t,i,a,l,d,ee,V,c,u,n,r){super("ValidateCaseAccountExcelDataAction"),this.valid=!1,this.excelData=o,this.legalCases=t,this.locations=i,this.vendors=a,this.accountStatuses=l,this.procedureTypes=d,this.agreementTypes=ee,this.claimProcedures=V,this.invoiceDetails=c,this.contracts=u,this.portfolios=n,this.procedureVendors=r}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name),this.validationContext.addRule(new g.mi(`legalCaseName_${i}_is_valid}`,"Legal Case Is Not Valid","legalCase.name",t.legalCase,this.legalCases,!0)),this.validationContext.addRule(new g.mi(`locationName_${i}_is_valid}`,"Location Is Not Valid","location.name",t.location,this.locations,!0)),this.validationContext.addRule(new g.mi(`vendorName_${i}_is_valid}`,"Vendor Is Not Valid","vendor.name",t.vendor,this.vendors,!0)),this.validationContext.addRule(new g.mi(`accountStatusName_${i}_is_valid}`,"Account Status Is Not Valid","accountStatus.name",t.accountStatus,this.accountStatuses,!0)),this.validationContext.addRule(new g.mi(`procedureTypeName_${i}_is_valid}`,"Procedure Type Is Not Valid","procedureType.name",t.procedureType,this.procedureTypes,!0)),this.validationContext.addRule(new g.mi(`agreementTypeName_${i}_is_valid}`,"Agreement Type Is Not Valid","agreementType.name",t.agreementType,this.agreementTypes,!0)),this.validationContext.addRule(new g.mi(`claimProcedureName_${i}_is_valid}`,"Claim Procedure Is Not Valid","claimProcedure.name",t.claimProcedure,this.claimProcedures,!0)),this.validationContext.addRule(new g.mi(`invoiceDetailName_${i}_is_valid}`,"Invoice Detail Is Not Valid","invoiceDetail.name",t.invoiceDetail,this.invoiceDetails,!0)),this.validationContext.addRule(new g.mi(`contractName_${i}_is_valid}`,"Contract Is Not Valid","contract.name",t.contract,this.contracts,!0)),this.validationContext.addRule(new g.mi(`portfolioName_${i}_is_valid}`,"Portfolio Is Not Valid","portfolio.name",t.portfolio,this.portfolios,!0)),this.validationContext.addRule(new g.mi(`procedureVendorName_${i}_is_valid}`,"Procedure Vendor Is Not Valid","procedureVendor.name",t.procedureVendor,this.procedureVendors,!0))}),this.validationContext.addRule(new g.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof g.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(a=>a.name),newNames:[i.newName]}):i instanceof g.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,D.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class HC extends g.wS{constructor(o,t,i,a,l){super(o,t,i,a,l,!0)}}class qC extends g.ul{constructor(o,t,i,a=!1){super(o,t,a),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new g.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new HC("name","The caseaccount name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class KC extends Ct{constructor(o){super("CreateCaseAccountAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new qC("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateCaseAccount({input:this.input}).pipe((0,h.w)(o=>(0,ue.of)(o.data.created)))}}class ZC extends Ct{constructor(o){super("UpdateCaseAccountsAction"),this.caseAccounts=o}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.caseAccounts,!0))}performAction(){this.response=this.businessProvider.data.userUpdateCaseAccounts({input:{caseAccounts:this.caseAccounts}}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}class BC extends Ct{constructor(o,t){super("UpdateCaseAccountAction"),this.caseAccount=o,this.caseAccountId=t}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.caseAccount,!0)).addRule(new g.xF("Id","Id should be a CUID and not null",this.caseAccountId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateCaseAccount({caseAccountId:this.caseAccountId,input:this.caseAccount}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}let Or=(()=>{class s extends W.nH{constructor(t,i,a){super("NotificationService.CaseAccountBusinessProviderService",t,a),this.data=i}createCaseAccount(t){const i=new KC(t);return i.Do(this),i.response}updateCaseAccount(t,i){const a=new BC(t,i);return a.Do(this),a.response}importCaseAccounts(t){const i=new ZC(t);return i.Do(this),i.response}validateCaseAccountExcelData(t,i,a,l,d,ee,V,c,u,n,r,m){const p=new zC(t,i,a,l,d,ee,V,c,u,n,r,m);return p.Do(this),p.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(K.ed),e.LFG(z.q),e.LFG(W.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),kC=(()=>{class s extends W.nH{constructor(t,i,a){super("CaseAccountService",a,t),this.businessProvider=i}createCaseAccount(t){const i=Object.fromEntries(Object.entries(t).filter(([a,l])=>null!==l));return this.businessProvider.createCaseAccount(i)}updateCaseAccount(t,i){return this.businessProvider.updateCaseAccount(t,i)}importCaseAccounts(t){return this.businessProvider.importCaseAccounts(t)}validateCaseAccountExcelData(t,i,a,l,d,ee,V,c,u,n,r,m){return this.businessProvider.validateCaseAccountExcelData(t,i,a,l,d,ee,V,c,u,n,r,m)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(Or,8),e.LFG(Or),e.LFG(K.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),Ms=(()=>{class s extends b.m1{constructor(t,i,a,l,d,ee){if(super({loading:!1,caseAccounts:[],done:!1,searchQuery:"",formName:void 0,legalCaseId:void 0,locationId:void 0,vendorId:void 0,accountStatusId:void 0,procedureTypeId:void 0,agreementTypeId:void 0,claimProcedureId:void 0,invoiceDetailId:void 0,contractId:void 0,portfolioId:void 0,procedureVendorId:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=a,this.toast=l,this.formService=d,this.caseAccountService=ee,this.errors$=this.select(le=>le.errors),this.loading$=this.select(le=>le.loading),this.done$=this.select(le=>le.done),this.item$=this.select(le=>le.item),this.caseAccounts$=this.select(le=>le.caseAccounts),this.legalCases$=this.select(le=>le.legalCases||[]),this.locations$=this.select(le=>le.locations||[]),this.vendors$=this.select(le=>le.vendors||[]),this.accountStatuses$=this.select(le=>le.accountStatuses||[]),this.procedureTypes$=this.select(le=>le.procedureTypes||[]),this.agreementTypes$=this.select(le=>le.agreementTypes||[]),this.claimProcedures$=this.select(le=>le.claimProcedures||[]),this.invoiceDetails$=this.select(le=>le.invoiceDetails||[]),this.contracts$=this.select(le=>le.contracts||[]),this.portfolios$=this.select(le=>le.portfolios||[]),this.procedureVendors$=this.select(le=>le.procedureVendors||[]),this.legalCaseId$=this.select(le=>le.legalCaseId),this.locationId$=this.select(le=>le.locationId),this.vendorId$=this.select(le=>le.vendorId),this.accountStatusId$=this.select(le=>le.accountStatusId),this.procedureTypeId$=this.select(le=>le.procedureTypeId),this.agreementTypeId$=this.select(le=>le.agreementTypeId),this.claimProcedureId$=this.select(le=>le.claimProcedureId),this.invoiceDetailId$=this.select(le=>le.invoiceDetailId),this.contractId$=this.select(le=>le.contractId),this.portfolioId$=this.select(le=>le.portfolioId),this.procedureVendorId$=this.select(le=>le.procedureVendorId),this.paging$=this.select(le=>le.paging),this.searchQuery$=this.select(le=>le.searchQuery),this.formName$=this.select(le=>le.formName),this.actionResult$=this.select(this.item$,this.done$,(le,ce)=>({item:le,done:ce}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.caseAccounts$,this.legalCases$,this.locations$,this.vendors$,this.accountStatuses$,this.procedureTypes$,this.agreementTypes$,this.claimProcedures$,this.invoiceDetails$,this.contracts$,this.portfolios$,this.procedureVendors$,(le,ce,oe,ne,ve,Te,Oe,Ge,Ve,ze,He,qe,Ke,Be,ke,Ye)=>({errors:le,loading:ce,item:oe,formName:ne,caseAccounts:ve,legalCases:Te,locations:Oe,vendors:Ge,accountStatuses:Ve,procedureTypes:ze,agreementTypes:He,claimProcedures:qe,invoiceDetails:Ke,contracts:Be,portfolios:ke,procedureVendors:Ye}),{debounce:!0}),this.input$=this.select(this.paging$,this.legalCaseId$,this.locationId$,this.vendorId$,this.accountStatusId$,this.procedureTypeId$,this.agreementTypeId$,this.claimProcedureId$,this.invoiceDetailId$,this.contractId$,this.portfolioId$,this.procedureVendorId$,this.searchQuery$,(le,ce,oe,ne,ve,Te,Oe,Ge,Ve,ze,He,qe,Ke)=>({limit:le.limit,skip:le.skip,name:Ke,legalCaseId:ce,locationId:oe,vendorId:ne,accountStatusId:ve,procedureTypeId:Te,agreementTypeId:Oe,claimProcedureId:Ge,invoiceDetailId:Ve,contractId:ze,portfolioId:He,procedureVendorId:qe,total:le.total})),this.setFormName=this.updater((le,ce)=>Object.assign(Object.assign({},le),{formName:ce})),this.setLegalCaseId=this.updater((le,ce)=>Object.assign(Object.assign({},le),{legalCaseId:ce})),this.setLocationId=this.updater((le,ce)=>Object.assign(Object.assign({},le),{locationId:ce})),this.setVendorId=this.updater((le,ce)=>Object.assign(Object.assign({},le),{vendorId:ce})),this.setAccountStatusId=this.updater((le,ce)=>Object.assign(Object.assign({},le),{accountStatusId:ce})),this.setProcedureTypeId=this.updater((le,ce)=>Object.assign(Object.assign({},le),{procedureTypeId:ce})),this.setAgreementTypeId=this.updater((le,ce)=>Object.assign(Object.assign({},le),{agreementTypeId:ce})),this.setClaimProcedureId=this.updater((le,ce)=>Object.assign(Object.assign({},le),{claimProcedureId:ce})),this.setInvoiceDetailId=this.updater((le,ce)=>Object.assign(Object.assign({},le),{invoiceDetailId:ce})),this.setContractId=this.updater((le,ce)=>Object.assign(Object.assign({},le),{contractId:ce})),this.setPortfolioId=this.updater((le,ce)=>Object.assign(Object.assign({},le),{portfolioId:ce})),this.setProcedureVendorId=this.updater((le,ce)=>Object.assign(Object.assign({},le),{procedureVendorId:ce})),this.filterLegalCases=le=>this.data.userSelectLegalCases({input:{name:le}}).pipe((0,b._b)(ce=>{let oe=ce.data.items;return this.patchState({legalCases:oe}),oe},ce=>this.patchState({errors:ce.graphQLErrors?ce.graphQLErrors:ce})),(0,fe.U)(ce=>ce.data.items)),this.filterLocations=le=>this.data.userSelectLocations({input:{name:le}}).pipe((0,b._b)(ce=>{let oe=ce.data.items;return this.patchState({locations:oe}),oe},ce=>this.patchState({errors:ce.graphQLErrors?ce.graphQLErrors:ce})),(0,fe.U)(ce=>ce.data.items)),this.filterVendors=le=>this.data.userSelectVendors({input:{name:le}}).pipe((0,b._b)(ce=>{let oe=ce.data.items;return this.patchState({vendors:oe}),oe},ce=>this.patchState({errors:ce.graphQLErrors?ce.graphQLErrors:ce})),(0,fe.U)(ce=>ce.data.items)),this.filterAccountStatuses=le=>this.data.userSelectAccountStatuses({input:{name:le}}).pipe((0,b._b)(ce=>{let oe=ce.data.items;return this.patchState({accountStatuses:oe}),oe},ce=>this.patchState({errors:ce.graphQLErrors?ce.graphQLErrors:ce})),(0,fe.U)(ce=>ce.data.items)),this.filterProcedureTypes=le=>this.data.userSelectProcedureTypes({input:{name:le}}).pipe((0,b._b)(ce=>{let oe=ce.data.items;return this.patchState({procedureTypes:oe}),oe},ce=>this.patchState({errors:ce.graphQLErrors?ce.graphQLErrors:ce})),(0,fe.U)(ce=>ce.data.items)),this.filterAgreementTypes=le=>this.data.userSelectAgreementTypes({input:{name:le}}).pipe((0,b._b)(ce=>{let oe=ce.data.items;return this.patchState({agreementTypes:oe}),oe},ce=>this.patchState({errors:ce.graphQLErrors?ce.graphQLErrors:ce})),(0,fe.U)(ce=>ce.data.items)),this.filterClaimProcedures=le=>this.data.userSelectClaimProcedures({input:{name:le}}).pipe((0,b._b)(ce=>{let oe=ce.data.items;return this.patchState({claimProcedures:oe}),oe},ce=>this.patchState({errors:ce.graphQLErrors?ce.graphQLErrors:ce})),(0,fe.U)(ce=>ce.data.items)),this.filterInvoiceDetails=le=>this.data.userSelectInvoiceDetails({input:{name:le}}).pipe((0,b._b)(ce=>{let oe=ce.data.items;return this.patchState({invoiceDetails:oe}),oe},ce=>this.patchState({errors:ce.graphQLErrors?ce.graphQLErrors:ce})),(0,fe.U)(ce=>ce.data.items)),this.filterContracts=le=>this.data.userSelectContracts({input:{name:le}}).pipe((0,b._b)(ce=>{let oe=ce.data.items;return this.patchState({contracts:oe}),oe},ce=>this.patchState({errors:ce.graphQLErrors?ce.graphQLErrors:ce})),(0,fe.U)(ce=>ce.data.items)),this.filterPortfolios=le=>this.data.userSelectPortfolios({input:{name:le}}).pipe((0,b._b)(ce=>{let oe=ce.data.items;return this.patchState({portfolios:oe}),oe},ce=>this.patchState({errors:ce.graphQLErrors?ce.graphQLErrors:ce})),(0,fe.U)(ce=>ce.data.items)),this.filterProcedureVendors=le=>this.data.userSelectProcedureVendors({input:{name:le}}).pipe((0,b._b)(ce=>{let oe=ce.data.items;return this.patchState({procedureVendors:oe}),oe},ce=>this.patchState({errors:ce.graphQLErrors?ce.graphQLErrors:ce})),(0,fe.U)(ce=>ce.data.items)),this.addLegalCase=this.updater((le,ce)=>Object.assign(Object.assign({},le),{legalCases:le.legalCases.concat(ce)})),this.addLocation=this.updater((le,ce)=>Object.assign(Object.assign({},le),{locations:le.locations.concat(ce)})),this.addVendor=this.updater((le,ce)=>Object.assign(Object.assign({},le),{vendors:le.vendors.concat(ce)})),this.addAccountStatus=this.updater((le,ce)=>Object.assign(Object.assign({},le),{accountStatuses:le.accountStatuses.concat(ce)})),this.addProcedureType=this.updater((le,ce)=>Object.assign(Object.assign({},le),{procedureTypes:le.procedureTypes.concat(ce)})),this.addAgreementType=this.updater((le,ce)=>Object.assign(Object.assign({},le),{agreementTypes:le.agreementTypes.concat(ce)})),this.addClaimProcedure=this.updater((le,ce)=>Object.assign(Object.assign({},le),{claimProcedures:le.claimProcedures.concat(ce)})),this.addInvoiceDetail=this.updater((le,ce)=>Object.assign(Object.assign({},le),{invoiceDetails:le.invoiceDetails.concat(ce)})),this.addContract=this.updater((le,ce)=>Object.assign(Object.assign({},le),{contracts:le.contracts.concat(ce)})),this.addPortfolio=this.updater((le,ce)=>Object.assign(Object.assign({},le),{portfolios:le.portfolios.concat(ce)})),this.addProcedureVendor=this.updater((le,ce)=>Object.assign(Object.assign({},le),{procedureVendors:le.procedureVendors.concat(ce)})),this.setItem=this.updater((le,ce)=>Object.assign(Object.assign({},le),{item:ce})),this.addNewCaseAccount=this.updater((le,ce)=>Object.assign(Object.assign({},le),{caseAccounts:[...le.caseAccounts,ce]})),this.updateCaseAccount=this.updater((le,ce)=>Object.assign(Object.assign({},le),{caseAccounts:le.caseAccounts.map(oe=>oe.id===ce.id?ce:oe)})),this.addCaseAccounts=this.updater((le,ce)=>Object.assign(Object.assign({},le),{caseAccounts:le.caseAccounts.concat(ce)})),this.updateCaseAccounts=this.updater((le,ce)=>Object.assign(Object.assign({},le),{caseAccounts:le.caseAccounts.map(oe=>ce.find(ve=>ve.id===oe.id)||oe)})),this.setSearchQuery=this.updater((le,ce)=>Object.assign(Object.assign({},le),{searchQuery:ce})),this.loadCaseAccountEffect=this.effect(le=>le.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(ce=>this.data.userCaseAccount({caseAccountId:ce}).pipe((0,b._b)(oe=>{this.patchState({item:oe.data.item,errors:oe.errors,loading:!1})},oe=>this.patchState({loading:!1,errors:oe.graphQLErrors?oe.graphQLErrors:oe})))))),this.loadCaseAccountsEffect=this.effect(le=>le.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.input$),(0,h.w)(([ce,oe])=>this.data.userCaseAccounts({input:oe}).pipe((0,b._b)(ne=>this.patchState({paging:{limit:oe.limit,skip:oe.skip,total:ne.data.count.total},caseAccounts:ne.data.items,errors:ne.errors,loading:!1}),ne=>this.patchState({loading:!1,errors:ne.graphQLErrors?ne.graphQLErrors:ne})))))),this.createCaseAccountEffect=this.effect(le=>le.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(ce=>this.caseAccountService.createCaseAccount(Object.assign({},ce)).pipe((0,b._b)(oe=>{this.addNewCaseAccount(oe),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:oe,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},oe=>{oe.graphQLErrors?(this.toast.error(oe.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:oe.graphQLErrors?oe.graphQLErrors:oe})):(this.toast.error(oe.Message),this.formService.setErrors(oe.Data))}))))),this.updateCaseAccountEffect=this.effect(le=>le.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([ce,oe])=>this.caseAccountService.updateCaseAccount(ce,ce.id).pipe((0,b._b)(ne=>{this.updateCaseAccount(ne),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:ne,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},ne=>{ne.graphQLErrors?(this.toast.error(ne.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:ne.graphQLErrors?ne.graphQLErrors:ne})):(this.toast.error(ne.Message),this.formService.setErrors(ne.Data))}))))),this.deleteCaseAccountEffect=this.effect(le=>le.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([ce,oe])=>this.data.userDeleteCaseAccount({caseAccountId:oe.id}).pipe((0,b._b)(ne=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:ne.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},ne=>{ne.graphQLErrors?(this.toast.error(ne.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:ne.graphQLErrors?ne.graphQLErrors:ne})):(this.toast.error(ne.Message),this.formService.setErrors(ne.Data))}))))),this.importExcelEffect=this.effect(le=>le.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(ce=>this.caseAccountService.importCaseAccounts(ce).pipe((0,de.K)(oe=>{var ne;return this.toast.error(null!==(ne=oe.Message)&&void 0!==ne?ne:"Failed to save",{duration:3e3}),q.E}),(0,y.b)(oe=>{const ne=JSON.parse(oe.created),ve=JSON.parse(oe.updated),Te=JSON.parse(oe.failed),Oe=ne.length+ve.length+Te.length;this.addCaseAccounts(ne),this.updateCaseAccounts(ve),this.toast.success(`${ne.length} created, ${ve.length} updated, ${Te.length} failed of total ${Oe}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("caseAccountId")?(this.route.snapshot.paramMap.get("caseAccountId"),this.setFormName("caseAccount_edit")):this.setFormName("caseAccount_create"),this.route.snapshot.paramMap.has("legalCaseId")){var c=this.route.snapshot.paramMap.get("legalCaseId");this.setLegalCaseId(c)}if(this.route.snapshot.paramMap.has("locationId")){var u=this.route.snapshot.paramMap.get("locationId");this.setLocationId(u)}if(this.route.snapshot.paramMap.has("vendorId")){var n=this.route.snapshot.paramMap.get("vendorId");this.setVendorId(n)}if(this.route.snapshot.paramMap.has("accountStatusId")){var r=this.route.snapshot.paramMap.get("accountStatusId");this.setAccountStatusId(r)}if(this.route.snapshot.paramMap.has("procedureTypeId")){var m=this.route.snapshot.paramMap.get("procedureTypeId");this.setProcedureTypeId(m)}if(this.route.snapshot.paramMap.has("agreementTypeId")){var p=this.route.snapshot.paramMap.get("agreementTypeId");this.setAgreementTypeId(p)}if(this.route.snapshot.paramMap.has("claimProcedureId")){var v=this.route.snapshot.paramMap.get("claimProcedureId");this.setClaimProcedureId(v)}if(this.route.snapshot.paramMap.has("invoiceDetailId")){var I=this.route.snapshot.paramMap.get("invoiceDetailId");this.setInvoiceDetailId(I)}if(this.route.snapshot.paramMap.has("contractId")){var B=this.route.snapshot.paramMap.get("contractId");this.setContractId(B)}if(this.route.snapshot.paramMap.has("portfolioId")){var _e=this.route.snapshot.paramMap.get("portfolioId");this.setPortfolioId(_e)}if(this.route.snapshot.paramMap.has("procedureVendorId")){var Ne=this.route.snapshot.paramMap.get("procedureVendorId");this.setProcedureVendorId(Ne)}}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.caseAccountService.validateCaseAccountExcelData(t,i.legalCases,i.locations,i.vendors,i.accountStatuses,i.procedureTypes,i.agreementTypes,i.claimProcedures,i.invoiceDetails,i.contracts,i.portfolios,i.procedureVendors)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(z.q),e.LFG(O.F0),e.LFG(O.gz),e.LFG(X.F),e.LFG(Z.o),e.LFG(kC))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function YC(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.close.emit())})("formIsReady",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.caseAccount)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let Lr=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"caseAccount_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.caseAccount=i.item})):t.formName&&t.formName.currentValue&&"caseAccount_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadCaseAccountEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.caseAccount=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Ms),e.Y36(O.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-case-account-form"]],inputs:{caseAccount:"caseAccount",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,YC,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[P.O5,te.M,P.Ov],encapsulation:2}),s})(),$r=(()=>{class s{constructor(){this.autoHeight=!1,this.caseAccounts=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[{field:"legalCase.name",headerName:"Legal Case",filter:"agTextColumnFilter"},{field:"location.name",headerName:"Location",filter:"agTextColumnFilter"},{field:"vendor.name",headerName:"Vendor",filter:"agTextColumnFilter"},{field:"accountStatus.name",headerName:"Account Status",filter:"agTextColumnFilter"},{field:"procedureType.name",headerName:"Procedure Type",filter:"agTextColumnFilter"},{field:"agreementType.name",headerName:"Agreement Type",filter:"agTextColumnFilter"},{field:"claimProcedure.name",headerName:"Claim Procedure",filter:"agTextColumnFilter"},{field:"invoiceDetail.name",headerName:"Invoice Detail",filter:"agTextColumnFilter"},{field:"contract.name",headerName:"Contract",filter:"agTextColumnFilter"},{field:"portfolio.name",headerName:"Portfolio",filter:"agTextColumnFilter"},{field:"procedureVendor.name",headerName:"Procedure Vendor",filter:"agTextColumnFilter"},{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{field:"legalCaseId",filter:"agTextColumnFilter",hide:!0},{field:"locationId",filter:"agTextColumnFilter",hide:!0},{field:"vendorId",filter:"agTextColumnFilter",hide:!0},{field:"accountStatusId",filter:"agTextColumnFilter",hide:!0},{field:"procedureTypeId",filter:"agTextColumnFilter",hide:!0},{field:"agreementTypeId",filter:"agTextColumnFilter",hide:!0},{field:"accountAgentId",filter:"agTextColumnFilter"},{field:"claimProcedureId",filter:"agTextColumnFilter",hide:!0},{field:"invoiceDetailId",filter:"agTextColumnFilter",hide:!0},{field:"contractId",filter:"agTextColumnFilter",hide:!0},{field:"portfolioId",filter:"agTextColumnFilter",hide:!0},{field:"thirdPartyFunderName",filter:"agTextColumnFilter"},{field:"originalDueDate",filter:"agDateColumnFilter"},{headerName:"Account Term",field:"accountTerm",valueFormatter:t=>{var i;return(0,_.oBD)(null===(i=t.data)||void 0===i?void 0:i.accountTerm,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{field:"serviceDate",filter:"agDateColumnFilter"},{headerName:"Quantity",field:"quantity",valueFormatter:t=>{var i;return(0,_.oBD)(null===(i=t.data)||void 0===i?void 0:i.quantity,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{headerName:"Original Debt",field:"originalDebt",valueFormatter:t=>{var i;return(0,_.oBD)(null===(i=t.data)||void 0===i?void 0:i.originalDebt,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{headerName:"Cost",field:"cost",valueFormatter:t=>{var i;return(0,_.oBD)(null===(i=t.data)||void 0===i?void 0:i.cost,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{headerName:"Balance",field:"balance",valueFormatter:t=>{var i;return(0,_.oBD)(null===(i=t.data)||void 0===i?void 0:i.balance,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{headerName:"Last Balance",field:"lastBalance",valueFormatter:t=>{var i;return(0,_.oBD)(null===(i=t.data)||void 0===i?void 0:i.lastBalance,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{headerName:"Reduction",field:"reduction",valueFormatter:t=>{var i;return(0,_.oBD)(null===(i=t.data)||void 0===i?void 0:i.reduction,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{field:"treatmentState",filter:"agTextColumnFilter"},{field:"accountNumber",filter:"agTextColumnFilter"},{field:"servicesPerformed",filter:"agTextColumnFilter"},{field:"cptCodes",filter:"agTextColumnFilter"},{field:"treatingPhysician",filter:"agTextColumnFilter"},{field:"referringPhysician",filter:"agTextColumnFilter"},{field:"collectionsDate",filter:"agDateColumnFilter"},{field:"deemedWriteOffDate",filter:"agDateColumnFilter"},{field:"expensedBadDebtDate",filter:"agDateColumnFilter"},{field:"paidDate",filter:"agDateColumnFilter"},{headerName:"Ghost Account",field:"ghostAccount",filter:"agSetColumnFilter",cellRenderer:"checkboxRenderer"},{field:"ghostedDate",filter:"agDateColumnFilter"},{field:"ghostedBy",filter:"agTextColumnFilter"},{field:"unGhostedDate",filter:"agDateColumnFilter"},{field:"unGhostedBy",filter:"agTextColumnFilter"},{headerName:"Additional Payment",field:"additionalPayment",filter:"agSetColumnFilter",cellRenderer:"checkboxRenderer"},{headerName:"Missing Bill",field:"missingBill",filter:"agSetColumnFilter",cellRenderer:"checkboxRenderer"},{headerName:"Missing Lien",field:"missingLien",filter:"agSetColumnFilter",cellRenderer:"checkboxRenderer"},{headerName:"Missing Medical Records",field:"missingMedicalRecords",filter:"agSetColumnFilter",cellRenderer:"checkboxRenderer"},{field:"assignedTo",filter:"agTextColumnFilter"},{field:"resubmitted",filter:"agDateColumnFilter"},{field:"treatmentCity",filter:"agTextColumnFilter"},{headerName:"Origination",field:"origination",valueFormatter:t=>{var i;return(0,_.oBD)(null===(i=t.data)||void 0===i?void 0:i.origination,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{headerName:"Threshold Provider Rate",field:"thresholdProviderRate",valueFormatter:t=>{var i;return(0,_.oBD)(null===(i=t.data)||void 0===i?void 0:i.thresholdProviderRate,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{headerName:"Threshold Location Rate",field:"thresholdLocationRate",valueFormatter:t=>{var i;return(0,_.oBD)(null===(i=t.data)||void 0===i?void 0:i.thresholdLocationRate,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{field:"teamLeaderRateSource",filter:"agTextColumnFilter"},{field:"checkNumber",filter:"agTextColumnFilter"},{field:"accountDateReceived",filter:"agDateColumnFilter"},{field:"dateApplied",filter:"agDateColumnFilter"},{headerName:"Amount Applied",field:"amountApplied",valueFormatter:t=>{var i;return(0,_.oBD)(null===(i=t.data)||void 0===i?void 0:i.amountApplied,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{field:"description",filter:"agTextColumnFilter"},{field:"note",filter:"agTextColumnFilter"},{headerName:"Medicare Rate",field:"medicareRate",valueFormatter:t=>{var i;return(0,_.oBD)(null===(i=t.data)||void 0===i?void 0:i.medicareRate,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{headerName:"Provider Percent of Medicare",field:"providerPercentOfMedicare",valueFormatter:t=>{var i;return(0,_.oBD)(null===(i=t.data)||void 0===i?void 0:i.providerPercentOfMedicare,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{headerName:"Contracted Amount",field:"contractedAmount",valueFormatter:t=>{var i;return(0,_.oBD)(null===(i=t.data)||void 0===i?void 0:i.contractedAmount,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{headerName:"Markup Percent",field:"markupPercent",valueFormatter:t=>{var i;return(0,_.oBD)(null===(i=t.data)||void 0===i?void 0:i.markupPercent,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{headerName:"Reimbursed Total",field:"reimbursedTotal",valueFormatter:t=>{var i;return(0,_.oBD)(null===(i=t.data)||void 0===i?void 0:i.reimbursedTotal,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{headerName:"Initial Revenue",field:"initialRevenue",valueFormatter:t=>{var i;return(0,_.oBD)(null===(i=t.data)||void 0===i?void 0:i.initialRevenue,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{headerName:"Factor",field:"factor",valueFormatter:t=>{var i;return(0,_.oBD)(null===(i=t.data)||void 0===i?void 0:i.factor,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{headerName:"Retail Bill",field:"retailBill",valueFormatter:t=>{var i;return(0,_.oBD)(null===(i=t.data)||void 0===i?void 0:i.retailBill,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{headerName:"Est Margin",field:"estMargin",valueFormatter:t=>{var i;return(0,_.oBD)(null===(i=t.data)||void 0===i?void 0:i.estMargin,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{headerName:"Roi",field:"roi",valueFormatter:t=>{var i;return(0,_.oBD)(null===(i=t.data)||void 0===i?void 0:i.roi,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{headerName:"Attorney Paid",field:"attorneyPaid",valueFormatter:t=>{var i;return(0,_.oBD)(null===(i=t.data)||void 0===i?void 0:i.attorneyPaid,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{headerName:"Percent of Retail",field:"percentOfRetail",valueFormatter:t=>{var i;return(0,_.oBD)(null===(i=t.data)||void 0===i?void 0:i.percentOfRetail,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{headerName:"Reimbursed From PCR",field:"reimbursedFromPCR",valueFormatter:t=>{var i;return(0,_.oBD)(null===(i=t.data)||void 0===i?void 0:i.reimbursedFromPCR,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{headerName:"Ingredient Cost",field:"ingredientCost",valueFormatter:t=>{var i;return(0,_.oBD)(null===(i=t.data)||void 0===i?void 0:i.ingredientCost,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{headerName:"Dispensing Cost",field:"dispensingCost",valueFormatter:t=>{var i;return(0,_.oBD)(null===(i=t.data)||void 0===i?void 0:i.dispensingCost,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{headerName:"Administrative Cost",field:"administrativeCost",valueFormatter:t=>{var i;return(0,_.oBD)(null===(i=t.data)||void 0===i?void 0:i.administrativeCost,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{headerName:"Co Pay",field:"coPay",valueFormatter:t=>{var i;return(0,_.oBD)(null===(i=t.data)||void 0===i?void 0:i.coPay,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{headerName:"Total Cost",field:"totalCost",valueFormatter:t=>{var i;return(0,_.oBD)(null===(i=t.data)||void 0===i?void 0:i.totalCost,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{headerName:"Average Wholesale Price",field:"averageWholesalePrice",valueFormatter:t=>{var i;return(0,_.oBD)(null===(i=t.data)||void 0===i?void 0:i.averageWholesalePrice,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{headerName:"Weighted Average Cost",field:"weightedAverageCost",valueFormatter:t=>{var i;return(0,_.oBD)(null===(i=t.data)||void 0===i?void 0:i.weightedAverageCost,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{headerName:"Average Sale Price",field:"averageSalePrice",valueFormatter:t=>{var i;return(0,_.oBD)(null===(i=t.data)||void 0===i?void 0:i.averageSalePrice,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{headerName:"Invoice Cost",field:"invoiceCost",valueFormatter:t=>{var i;return(0,_.oBD)(null===(i=t.data)||void 0===i?void 0:i.invoiceCost,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{headerName:"Usual and Customary",field:"usualAndCustomary",valueFormatter:t=>{var i;return(0,_.oBD)(null===(i=t.data)||void 0===i?void 0:i.usualAndCustomary,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{field:"nationalDrugCode",filter:"agTextColumnFilter"},{field:"procedureVendorId",filter:"agTextColumnFilter",hide:!0}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var a;t.includes(null===(a=i.data)||void 0===a?void 0:a.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-case-account-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(f.x,5),2&t){let a;e.iGM(a=e.CRH())&&(i.tableView=a.first)}},inputs:{autoHeight:"autoHeight",caseAccounts:"caseAccounts"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.caseAccounts)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[f.x],encapsulation:2}),s})();function XC(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-case-account-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","caseAccount_edit")("formControl",t.formControl)("caseAccount",t.caseAccount)}}const eS=function(){return{}};function tS(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-case-account-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","caseAccount_create")("formControl",t.formControl)("caseAccount",e.DdM(3,eS))}}function iS(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-case-account-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(d.ref.close())}),e.qZA()}2&s&&e.Q6J("caseAccounts",o.data.items)}let sS=(()=>{class s extends G.fS{constructor(t){super(),this.store=t,this.store.loadCaseAccountsEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.caseAccounts$.pipe((0,h.w)(i=>(0,D.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Ms))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","caseAccount","send","close"],[1,"w-full","h-full","bg-white",3,"caseAccounts","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,XC,2,3,"ng-template",null,1,e.W1O),e.YNc(3,tS,1,4,"ng-template",null,2,e.W1O),e.YNc(5,iS,1,1,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",d)("editTemplate",a)("createTemplate",l)("key",i.field.key)}},dependencies:[E.JJ,E.oH,H.$,Lr,$r],encapsulation:2}),s})();function oS(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-case-account-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","caseAccount_edit")("caseAccount",t.value)}}const aS=function(){return{}};function rS(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-case-account-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","caseAccount_create")("caseAccount",e.DdM(2,aS))}function nS(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-case-account-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(null==d.ref?null:d.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("caseAccounts",t.items)}}let lS=(()=>{class s extends pe{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:6,consts:[[3,"data","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","caseAccount","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","caseAccounts","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,oS,1,2,"ng-template",null,1,e.W1O),e.YNc(3,rS,1,3,"ng-template",null,2,e.W1O),e.YNc(5,nS,1,2,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("data",i.data)("title",i.to.title)("onSave",i.onSave)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[he,Lr,$r],encapsulation:2}),s})(),cS=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[Ms],imports:[P.ez,U.F,E.UX,J.o,ae.u,$.P,j.t,me,k.h,se.G,G.X0.forChild({types:[{name:"case-account-select",component:sS,wrappers:["form-field"]},{name:"case-account-grid",component:lS}]})]}),s})(),dS=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[cS]}),s})();class St extends W.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class uS extends St{constructor(o,t,i){super("ValidateCaseAccountPaymentExcelDataAction"),this.valid=!1,this.excelData=o,this.payments=t,this.caseAccounts=i}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name),this.validationContext.addRule(new g.mi(`paymentName_${i}_is_valid}`,"Payment Is Not Valid","payment.name",t.payment,this.payments,!0)),this.validationContext.addRule(new g.mi(`caseAccountName_${i}_is_valid}`,"Case Account Is Not Valid","caseAccount.name",t.caseAccount,this.caseAccounts,!0))}),this.validationContext.addRule(new g.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof g.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(a=>a.name),newNames:[i.newName]}):i instanceof g.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,D.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class mS extends g.wS{constructor(o,t,i,a,l){super(o,t,i,a,l,!0)}}class pS extends g.ul{constructor(o,t,i,a=!1){super(o,t,a),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new g.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new mS("name","The caseaccountpayment name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class hS extends St{constructor(o){super("CreateCaseAccountPaymentAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new pS("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateCaseAccountPayment({input:this.input}).pipe((0,h.w)(o=>(0,ue.of)(o.data.created)))}}class fS extends St{constructor(o){super("UpdateCaseAccountPaymentsAction"),this.caseAccountPayments=o}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.caseAccountPayments,!0))}performAction(){this.response=this.businessProvider.data.userUpdateCaseAccountPayments({input:{caseAccountPayments:this.caseAccountPayments}}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}class _S extends St{constructor(o,t){super("UpdateCaseAccountPaymentAction"),this.caseAccountPayment=o,this.caseAccountPaymentId=t}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.caseAccountPayment,!0)).addRule(new g.xF("Id","Id should be a CUID and not null",this.caseAccountPaymentId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateCaseAccountPayment({caseAccountPaymentId:this.caseAccountPaymentId,input:this.caseAccountPayment}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}let Gr=(()=>{class s extends W.nH{constructor(t,i,a){super("NotificationService.CaseAccountPaymentBusinessProviderService",t,a),this.data=i}createCaseAccountPayment(t){const i=new hS(t);return i.Do(this),i.response}updateCaseAccountPayment(t,i){const a=new _S(t,i);return a.Do(this),a.response}importCaseAccountPayments(t){const i=new fS(t);return i.Do(this),i.response}validateCaseAccountPaymentExcelData(t,i,a){const l=new uS(t,i,a);return l.Do(this),l.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(K.ed),e.LFG(z.q),e.LFG(W.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),gS=(()=>{class s extends W.nH{constructor(t,i,a){super("CaseAccountPaymentService",a,t),this.businessProvider=i}createCaseAccountPayment(t){const i=Object.fromEntries(Object.entries(t).filter(([a,l])=>null!==l));return this.businessProvider.createCaseAccountPayment(i)}updateCaseAccountPayment(t,i){return this.businessProvider.updateCaseAccountPayment(t,i)}importCaseAccountPayments(t){return this.businessProvider.importCaseAccountPayments(t)}validateCaseAccountPaymentExcelData(t,i,a){return this.businessProvider.validateCaseAccountPaymentExcelData(t,i,a)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(Gr,8),e.LFG(Gr),e.LFG(K.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),Ws=(()=>{class s extends b.m1{constructor(t,i,a,l,d,ee){if(super({loading:!1,caseAccountPayments:[],done:!1,searchQuery:"",formName:void 0,paymentId:void 0,caseAccountId:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=a,this.toast=l,this.formService=d,this.caseAccountPaymentService=ee,this.errors$=this.select(n=>n.errors),this.loading$=this.select(n=>n.loading),this.done$=this.select(n=>n.done),this.item$=this.select(n=>n.item),this.caseAccountPayments$=this.select(n=>n.caseAccountPayments),this.payments$=this.select(n=>n.payments||[]),this.caseAccounts$=this.select(n=>n.caseAccounts||[]),this.paymentId$=this.select(n=>n.paymentId),this.caseAccountId$=this.select(n=>n.caseAccountId),this.paging$=this.select(n=>n.paging),this.searchQuery$=this.select(n=>n.searchQuery),this.formName$=this.select(n=>n.formName),this.actionResult$=this.select(this.item$,this.done$,(n,r)=>({item:n,done:r}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.caseAccountPayments$,this.payments$,this.caseAccounts$,(n,r,m,p,v,I,B)=>({errors:n,loading:r,item:m,formName:p,caseAccountPayments:v,payments:I,caseAccounts:B}),{debounce:!0}),this.input$=this.select(this.paging$,this.paymentId$,this.caseAccountId$,this.searchQuery$,(n,r,m,p)=>({limit:n.limit,skip:n.skip,name:p,paymentId:r,caseAccountId:m,total:n.total})),this.setFormName=this.updater((n,r)=>Object.assign(Object.assign({},n),{formName:r})),this.setPaymentId=this.updater((n,r)=>Object.assign(Object.assign({},n),{paymentId:r})),this.setCaseAccountId=this.updater((n,r)=>Object.assign(Object.assign({},n),{caseAccountId:r})),this.filterPayments=n=>this.data.userSelectPayments({input:{name:n}}).pipe((0,b._b)(r=>{let m=r.data.items;return this.patchState({payments:m}),m},r=>this.patchState({errors:r.graphQLErrors?r.graphQLErrors:r})),(0,fe.U)(r=>r.data.items)),this.filterCaseAccounts=n=>this.data.userSelectCaseAccounts({input:{name:n}}).pipe((0,b._b)(r=>{let m=r.data.items;return this.patchState({caseAccounts:m}),m},r=>this.patchState({errors:r.graphQLErrors?r.graphQLErrors:r})),(0,fe.U)(r=>r.data.items)),this.addPayment=this.updater((n,r)=>Object.assign(Object.assign({},n),{payments:n.payments.concat(r)})),this.addCaseAccount=this.updater((n,r)=>Object.assign(Object.assign({},n),{caseAccounts:n.caseAccounts.concat(r)})),this.setItem=this.updater((n,r)=>Object.assign(Object.assign({},n),{item:r})),this.addNewCaseAccountPayment=this.updater((n,r)=>Object.assign(Object.assign({},n),{caseAccountPayments:[...n.caseAccountPayments,r]})),this.updateCaseAccountPayment=this.updater((n,r)=>Object.assign(Object.assign({},n),{caseAccountPayments:n.caseAccountPayments.map(m=>m.id===r.id?r:m)})),this.addCaseAccountPayments=this.updater((n,r)=>Object.assign(Object.assign({},n),{caseAccountPayments:n.caseAccountPayments.concat(r)})),this.updateCaseAccountPayments=this.updater((n,r)=>Object.assign(Object.assign({},n),{caseAccountPayments:n.caseAccountPayments.map(m=>r.find(v=>v.id===m.id)||m)})),this.setSearchQuery=this.updater((n,r)=>Object.assign(Object.assign({},n),{searchQuery:r})),this.loadCaseAccountPaymentEffect=this.effect(n=>n.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(r=>this.data.userCaseAccountPayment({caseAccountPaymentId:r}).pipe((0,b._b)(m=>{this.patchState({item:m.data.item,errors:m.errors,loading:!1})},m=>this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})))))),this.loadCaseAccountPaymentsEffect=this.effect(n=>n.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.input$),(0,h.w)(([r,m])=>this.data.userCaseAccountPayments({input:m}).pipe((0,b._b)(p=>this.patchState({paging:{limit:m.limit,skip:m.skip,total:p.data.count.total},caseAccountPayments:p.data.items,errors:p.errors,loading:!1}),p=>this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})))))),this.createCaseAccountPaymentEffect=this.effect(n=>n.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(r=>this.caseAccountPaymentService.createCaseAccountPayment(Object.assign({},r)).pipe((0,b._b)(m=>{this.addNewCaseAccountPayment(m),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:m,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},m=>{m.graphQLErrors?(this.toast.error(m.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})):(this.toast.error(m.Message),this.formService.setErrors(m.Data))}))))),this.updateCaseAccountPaymentEffect=this.effect(n=>n.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([r,m])=>this.caseAccountPaymentService.updateCaseAccountPayment(r,r.id).pipe((0,b._b)(p=>{this.updateCaseAccountPayment(p),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:p,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},p=>{p.graphQLErrors?(this.toast.error(p.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})):(this.toast.error(p.Message),this.formService.setErrors(p.Data))}))))),this.deleteCaseAccountPaymentEffect=this.effect(n=>n.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([r,m])=>this.data.userDeleteCaseAccountPayment({caseAccountPaymentId:m.id}).pipe((0,b._b)(p=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:p.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},p=>{p.graphQLErrors?(this.toast.error(p.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})):(this.toast.error(p.Message),this.formService.setErrors(p.Data))}))))),this.importExcelEffect=this.effect(n=>n.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(r=>this.caseAccountPaymentService.importCaseAccountPayments(r).pipe((0,de.K)(m=>{var p;return this.toast.error(null!==(p=m.Message)&&void 0!==p?p:"Failed to save",{duration:3e3}),q.E}),(0,y.b)(m=>{const p=JSON.parse(m.created),v=JSON.parse(m.updated),I=JSON.parse(m.failed),B=p.length+v.length+I.length;this.addCaseAccountPayments(p),this.updateCaseAccountPayments(v),this.toast.success(`${p.length} created, ${v.length} updated, ${I.length} failed of total ${B}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("caseAccountPaymentId")?(this.route.snapshot.paramMap.get("caseAccountPaymentId"),this.setFormName("caseAccountPayment_edit")):this.setFormName("caseAccountPayment_create"),this.route.snapshot.paramMap.has("paymentId")){var c=this.route.snapshot.paramMap.get("paymentId");this.setPaymentId(c)}if(this.route.snapshot.paramMap.has("caseAccountId")){var u=this.route.snapshot.paramMap.get("caseAccountId");this.setCaseAccountId(u)}}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.caseAccountPaymentService.validateCaseAccountPaymentExcelData(t,i.payments,i.caseAccounts)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(z.q),e.LFG(O.F0),e.LFG(O.gz),e.LFG(X.F),e.LFG(Z.o),e.LFG(gS))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function vS(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.close.emit())})("formIsReady",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.caseAccountPayment)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let Rr=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"caseAccountPayment_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.caseAccountPayment=i.item})):t.formName&&t.formName.currentValue&&"caseAccountPayment_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadCaseAccountPaymentEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.caseAccountPayment=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Ws),e.Y36(O.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-case-account-payment-form"]],inputs:{caseAccountPayment:"caseAccountPayment",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,vS,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[P.O5,te.M,P.Ov],encapsulation:2}),s})(),Qr=(()=>{class s{constructor(){this.autoHeight=!1,this.caseAccountPayments=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[{field:"payment.name",headerName:"Payment",filter:"agTextColumnFilter"},{field:"caseAccount.name",headerName:"Case Account",filter:"agTextColumnFilter"},{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{headerName:"Amount Applied",field:"amountApplied",valueFormatter:t=>{var i;return(0,_.oBD)(null===(i=t.data)||void 0===i?void 0:i.amountApplied,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{field:"paymentId",filter:"agTextColumnFilter",hide:!0},{field:"caseAccountId",filter:"agTextColumnFilter",hide:!0}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var a;t.includes(null===(a=i.data)||void 0===a?void 0:a.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-case-account-payment-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(f.x,5),2&t){let a;e.iGM(a=e.CRH())&&(i.tableView=a.first)}},inputs:{autoHeight:"autoHeight",caseAccountPayments:"caseAccountPayments"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.caseAccountPayments)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[f.x],encapsulation:2}),s})();function CS(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-case-account-payment-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","caseAccountPayment_edit")("formControl",t.formControl)("caseAccountPayment",t.caseAccountPayment)}}const SS=function(){return{}};function bS(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-case-account-payment-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","caseAccountPayment_create")("formControl",t.formControl)("caseAccountPayment",e.DdM(3,SS))}}function TS(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-case-account-payment-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(d.ref.close())}),e.qZA()}2&s&&e.Q6J("caseAccountPayments",o.data.items)}let yS=(()=>{class s extends G.fS{constructor(t){super(),this.store=t,this.store.loadCaseAccountPaymentsEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.caseAccountPayments$.pipe((0,h.w)(i=>(0,D.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Ws))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","caseAccountPayment","send","close"],[1,"w-full","h-full","bg-white",3,"caseAccountPayments","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,CS,2,3,"ng-template",null,1,e.W1O),e.YNc(3,bS,1,4,"ng-template",null,2,e.W1O),e.YNc(5,TS,1,1,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",d)("editTemplate",a)("createTemplate",l)("key",i.field.key)}},dependencies:[E.JJ,E.oH,H.$,Rr,Qr],encapsulation:2}),s})();function wS(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-case-account-payment-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","caseAccountPayment_edit")("caseAccountPayment",t.value)}}const xS=function(){return{}};function NS(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-case-account-payment-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","caseAccountPayment_create")("caseAccountPayment",e.DdM(2,xS))}function AS(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-case-account-payment-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(null==d.ref?null:d.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("caseAccountPayments",t.items)}}let FS=(()=>{class s extends pe{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","caseAccountPayment","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","caseAccountPayments","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,wS,1,2,"ng-template",null,1,e.W1O),e.YNc(3,NS,1,3,"ng-template",null,2,e.W1O),e.YNc(5,AS,1,2,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[he,Rr,Qr],encapsulation:2}),s})(),PS=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[Ws],imports:[P.ez,U.F,E.UX,J.o,ae.u,$.P,j.t,me,k.h,se.G,G.X0.forChild({types:[{name:"case-account-payment-select",component:yS,wrappers:["form-field"]},{name:"case-account-payment-grid",component:FS}]})]}),s})(),IS=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[PS]}),s})();class bt extends W.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class DS extends bt{constructor(o,t,i){super("ValidateCasePreAccidentExcelDataAction"),this.valid=!1,this.excelData=o,this.legalCases=t,this.legalCaseId=i}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name),this.validationContext.addRule(new g.mi(`legalCaseName_${i}_is_valid}`,"Legal Case Is Not Valid","legalCase.name",t.legalCase,this.legalCases,!0))}),this.legalCaseId&&this.excelData.map(t=>(t.legalCaseId=this.legalCaseId,t)),this.validationContext.addRule(new g.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof g.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(a=>a.name),newNames:[i.newName]}):i instanceof g.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,D.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class MS extends g.wS{constructor(o,t,i,a,l){super(o,t,i,a,l,!0)}}class WS extends g.ul{constructor(o,t,i,a=!1){super(o,t,a),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new g.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new MS("name","The casepreaccident name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class ES extends bt{constructor(o){super("CreateCasePreAccidentAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new WS("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateCasePreAccident({input:this.input}).pipe((0,h.w)(o=>(0,ue.of)(o.data.created)))}}class OS extends bt{constructor(o,t){super("UpdateCasePreAccidentsAction"),this.casePreAccidents=o,this.legalCaseId=t}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.casePreAccidents,!0))}performAction(){this.response=this.businessProvider.data.userUpdateCasePreAccidents({input:{casePreAccidents:this.casePreAccidents}}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}class LS extends bt{constructor(o,t){super("UpdateCasePreAccidentAction"),this.casePreAccident=o,this.casePreAccidentId=t}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.casePreAccident,!0)).addRule(new g.xF("Id","Id should be a CUID and not null",this.casePreAccidentId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateCasePreAccident({casePreAccidentId:this.casePreAccidentId,input:this.casePreAccident}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}let Vr=(()=>{class s extends W.nH{constructor(t,i,a){super("NotificationService.CasePreAccidentBusinessProviderService",t,a),this.data=i}createCasePreAccident(t){const i=new ES(t);return i.Do(this),i.response}updateCasePreAccident(t,i){const a=new LS(t,i);return a.Do(this),a.response}importCasePreAccidents(t){const i=new OS(t);return i.Do(this),i.response}validateCasePreAccidentExcelData(t,i,a){const l=new DS(t,i,a);return l.Do(this),l.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(K.ed),e.LFG(z.q),e.LFG(W.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),$S=(()=>{class s extends W.nH{constructor(t,i,a){super("CasePreAccidentService",a,t),this.businessProvider=i}createCasePreAccident(t){const i=Object.fromEntries(Object.entries(t).filter(([a,l])=>null!==l));return this.businessProvider.createCasePreAccident(i)}updateCasePreAccident(t,i){return this.businessProvider.updateCasePreAccident(t,i)}importCasePreAccidents(t){return this.businessProvider.importCasePreAccidents(t)}validateCasePreAccidentExcelData(t,i,a){return this.businessProvider.validateCasePreAccidentExcelData(t,i,a)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(Vr,8),e.LFG(Vr),e.LFG(K.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),Es=(()=>{class s extends b.m1{constructor(t,i,a,l,d,ee){if(super({loading:!1,casePreAccidents:[],done:!1,searchQuery:"",formName:void 0,legalCaseId:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=a,this.toast=l,this.formService=d,this.casePreAccidentService=ee,this.errors$=this.select(u=>u.errors),this.loading$=this.select(u=>u.loading),this.done$=this.select(u=>u.done),this.item$=this.select(u=>u.item),this.casePreAccidents$=this.select(u=>u.casePreAccidents),this.legalCases$=this.select(u=>u.legalCases||[]),this.legalCaseId$=this.select(u=>u.legalCaseId),this.paging$=this.select(u=>u.paging),this.searchQuery$=this.select(u=>u.searchQuery),this.formName$=this.select(u=>u.formName),this.actionResult$=this.select(this.item$,this.done$,(u,n)=>({item:u,done:n}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.casePreAccidents$,this.legalCases$,this.legalCaseId$,(u,n,r,m,p,v,I)=>({errors:u,loading:n,item:r,formName:m,casePreAccidents:p,legalCases:v,legalCaseId:I}),{debounce:!0}),this.input$=this.select(this.paging$,this.legalCaseId$,this.searchQuery$,(u,n,r)=>({limit:u.limit,skip:u.skip,name:r,legalCaseId:n,total:u.total})),this.setFormName=this.updater((u,n)=>Object.assign(Object.assign({},u),{formName:n})),this.setLegalCaseId=this.updater((u,n)=>Object.assign(Object.assign({},u),{legalCaseId:n})),this.filterLegalCases=u=>this.data.userSelectLegalCases({input:{name:u}}).pipe((0,b._b)(n=>{let r=n.data.items;return this.patchState({legalCases:r}),r},n=>this.patchState({errors:n.graphQLErrors?n.graphQLErrors:n})),(0,fe.U)(n=>n.data.items)),this.addLegalCase=this.updater((u,n)=>Object.assign(Object.assign({},u),{legalCases:u.legalCases.concat(n)})),this.setItem=this.updater((u,n)=>Object.assign(Object.assign({},u),{item:n})),this.addNewCasePreAccident=this.updater((u,n)=>Object.assign(Object.assign({},u),{casePreAccidents:[...u.casePreAccidents,n]})),this.updateCasePreAccident=this.updater((u,n)=>Object.assign(Object.assign({},u),{casePreAccidents:u.casePreAccidents.map(r=>r.id===n.id?n:r)})),this.addCasePreAccidents=this.updater((u,n)=>Object.assign(Object.assign({},u),{casePreAccidents:u.casePreAccidents.concat(n)})),this.updateCasePreAccidents=this.updater((u,n)=>Object.assign(Object.assign({},u),{casePreAccidents:u.casePreAccidents.map(r=>n.find(p=>p.id===r.id)||r)})),this.setSearchQuery=this.updater((u,n)=>Object.assign(Object.assign({},u),{searchQuery:n})),this.loadCasePreAccidentEffect=this.effect(u=>u.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(n=>this.data.userCasePreAccident({casePreAccidentId:n}).pipe((0,b._b)(r=>{this.patchState({item:r.data.item,errors:r.errors,loading:!1})},r=>this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})))))),this.loadCasePreAccidentsEffect=this.effect(u=>u.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.input$),(0,h.w)(([n,r])=>this.data.userCasePreAccidents({input:r}).pipe((0,b._b)(m=>this.patchState({paging:{limit:r.limit,skip:r.skip,total:m.data.count.total},casePreAccidents:m.data.items,errors:m.errors,loading:!1}),m=>this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})))))),this.createCasePreAccidentEffect=this.effect(u=>u.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(n=>this.casePreAccidentService.createCasePreAccident(Object.assign({},n)).pipe((0,b._b)(r=>{this.addNewCasePreAccident(r),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:r,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},r=>{r.graphQLErrors?(this.toast.error(r.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})):(this.toast.error(r.Message),this.formService.setErrors(r.Data))}))))),this.updateCasePreAccidentEffect=this.effect(u=>u.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([n,r])=>this.casePreAccidentService.updateCasePreAccident(n,n.id).pipe((0,b._b)(m=>{this.updateCasePreAccident(m),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:m,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},m=>{m.graphQLErrors?(this.toast.error(m.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})):(this.toast.error(m.Message),this.formService.setErrors(m.Data))}))))),this.deleteCasePreAccidentEffect=this.effect(u=>u.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([n,r])=>this.data.userDeleteCasePreAccident({casePreAccidentId:r.id}).pipe((0,b._b)(m=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:m.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},m=>{m.graphQLErrors?(this.toast.error(m.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})):(this.toast.error(m.Message),this.formService.setErrors(m.Data))}))))),this.importExcelEffect=this.effect(u=>u.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(n=>this.casePreAccidentService.importCasePreAccidents(n).pipe((0,de.K)(r=>{var m;return this.toast.error(null!==(m=r.Message)&&void 0!==m?m:"Failed to save",{duration:3e3}),q.E}),(0,y.b)(r=>{const m=JSON.parse(r.created),p=JSON.parse(r.updated),v=JSON.parse(r.failed),I=m.length+p.length+v.length;this.addCasePreAccidents(m),this.updateCasePreAccidents(p),this.toast.success(`${m.length} created, ${p.length} updated, ${v.length} failed of total ${I}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("casePreAccidentId")?(this.route.snapshot.paramMap.get("casePreAccidentId"),this.setFormName("casePreAccident_edit")):this.setFormName("casePreAccident_create"),this.route.snapshot.paramMap.has("legalCaseId")){var c=this.route.snapshot.paramMap.get("legalCaseId");this.setLegalCaseId(c)}}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>{const a=i.legalCaseId;return console.log("legalCaseId",a),this.casePreAccidentService.validateCasePreAccidentExcelData(t,i.legalCases,a)}))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(z.q),e.LFG(O.F0),e.LFG(O.gz),e.LFG(X.F),e.LFG(Z.o),e.LFG($S))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function GS(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.close.emit())})("formIsReady",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.casePreAccident)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let jr=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"casePreAccident_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.casePreAccident=i.item})):t.formName&&t.formName.currentValue&&"casePreAccident_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadCasePreAccidentEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.casePreAccident=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Es),e.Y36(O.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-case-pre-accident-form"]],inputs:{casePreAccident:"casePreAccident",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,GS,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[P.O5,te.M,P.Ov],encapsulation:2}),s})(),Ur=(()=>{class s{constructor(){this.autoHeight=!1,this.casePreAccidents=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[{field:"legalCase.name",headerName:"Legal Case",filter:"agTextColumnFilter"},{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{field:"legalCaseId",filter:"agTextColumnFilter",hide:!0},{field:"accidentDate",filter:"agTextColumnFilter"},{field:"injuries",filter:"agTextColumnFilter"},{field:"symptoms",filter:"agTextColumnFilter"},{field:"dateCreated",filter:"agDateColumnFilter"},{headerName:"Removed",field:"removed",filter:"agSetColumnFilter",cellRenderer:"checkboxRenderer"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var a;t.includes(null===(a=i.data)||void 0===a?void 0:a.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-case-pre-accident-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(f.x,5),2&t){let a;e.iGM(a=e.CRH())&&(i.tableView=a.first)}},inputs:{autoHeight:"autoHeight",casePreAccidents:"casePreAccidents"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.casePreAccidents)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[f.x],encapsulation:2}),s})();function RS(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-case-pre-accident-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","casePreAccident_edit")("formControl",t.formControl)("casePreAccident",t.casePreAccident)}}const QS=function(){return{}};function VS(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-case-pre-accident-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","casePreAccident_create")("formControl",t.formControl)("casePreAccident",e.DdM(3,QS))}}function jS(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-case-pre-accident-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(d.ref.close())}),e.qZA()}2&s&&e.Q6J("casePreAccidents",o.data.items)}let US=(()=>{class s extends G.fS{constructor(t){super(),this.store=t,this.store.loadCasePreAccidentsEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.casePreAccidents$.pipe((0,h.w)(i=>(0,D.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Es))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","casePreAccident","send","close"],[1,"w-full","h-full","bg-white",3,"casePreAccidents","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,RS,2,3,"ng-template",null,1,e.W1O),e.YNc(3,VS,1,4,"ng-template",null,2,e.W1O),e.YNc(5,jS,1,1,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",d)("editTemplate",a)("createTemplate",l)("key",i.field.key)}},dependencies:[E.JJ,E.oH,H.$,jr,Ur],encapsulation:2}),s})();function JS(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-case-pre-accident-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","casePreAccident_edit")("casePreAccident",t.value)}}const zS=function(){return{}};function HS(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-case-pre-accident-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","casePreAccident_create")("casePreAccident",e.DdM(2,zS))}function qS(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-case-pre-accident-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(null==d.ref?null:d.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("casePreAccidents",t.items)}}let KS=(()=>{class s extends pe{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","casePreAccident","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","casePreAccidents","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,JS,1,2,"ng-template",null,1,e.W1O),e.YNc(3,HS,1,3,"ng-template",null,2,e.W1O),e.YNc(5,qS,1,2,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[he,jr,Ur],encapsulation:2}),s})(),ZS=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[Es],imports:[P.ez,U.F,E.UX,J.o,ae.u,$.P,j.t,me,k.h,se.G,G.X0.forChild({types:[{name:"case-pre-accident-select",component:US,wrappers:["form-field"]},{name:"case-pre-accident-grid",component:KS}]})]}),s})(),BS=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[ZS]}),s})();class Tt extends W.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class kS extends Tt{constructor(o,t){super("ValidateCasePreInjuryExcelDataAction"),this.valid=!1,this.excelData=o,this.legalCases=t}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name),this.validationContext.addRule(new g.mi(`legalCaseName_${i}_is_valid}`,"Legal Case Is Not Valid","legalCase.name",t.legalCase,this.legalCases,!0))}),this.validationContext.addRule(new g.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof g.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(a=>a.name),newNames:[i.newName]}):i instanceof g.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,D.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class YS extends g.wS{constructor(o,t,i,a,l){super(o,t,i,a,l,!0)}}class XS extends g.ul{constructor(o,t,i,a=!1){super(o,t,a),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new g.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new YS("name","The casepreinjury name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class eb extends Tt{constructor(o){super("CreateCasePreInjuryAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new XS("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateCasePreInjury({input:this.input}).pipe((0,h.w)(o=>(0,ue.of)(o.data.created)))}}class tb extends Tt{constructor(o){super("UpdateCasePreInjuriesAction"),this.casePreInjuries=o}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.casePreInjuries,!0))}performAction(){this.response=this.businessProvider.data.userUpdateCasePreInjuries({input:{casePreInjuries:this.casePreInjuries}}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}class ib extends Tt{constructor(o,t){super("UpdateCasePreInjuryAction"),this.casePreInjury=o,this.casePreInjuryId=t}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.casePreInjury,!0)).addRule(new g.xF("Id","Id should be a CUID and not null",this.casePreInjuryId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateCasePreInjury({casePreInjuryId:this.casePreInjuryId,input:this.casePreInjury}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}let Jr=(()=>{class s extends W.nH{constructor(t,i,a){super("NotificationService.CasePreInjuryBusinessProviderService",t,a),this.data=i}createCasePreInjury(t){const i=new eb(t);return i.Do(this),i.response}updateCasePreInjury(t,i){const a=new ib(t,i);return a.Do(this),a.response}importCasePreInjuries(t){const i=new tb(t);return i.Do(this),i.response}validateCasePreInjuryExcelData(t,i){const a=new kS(t,i);return a.Do(this),a.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(K.ed),e.LFG(z.q),e.LFG(W.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),sb=(()=>{class s extends W.nH{constructor(t,i,a){super("CasePreInjuryService",a,t),this.businessProvider=i}createCasePreInjury(t){const i=Object.fromEntries(Object.entries(t).filter(([a,l])=>null!==l));return this.businessProvider.createCasePreInjury(i)}updateCasePreInjury(t,i){return this.businessProvider.updateCasePreInjury(t,i)}importCasePreInjuries(t){return this.businessProvider.importCasePreInjuries(t)}validateCasePreInjuryExcelData(t,i){return this.businessProvider.validateCasePreInjuryExcelData(t,i)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(Jr,8),e.LFG(Jr),e.LFG(K.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),Os=(()=>{class s extends b.m1{constructor(t,i,a,l,d,ee){if(super({loading:!1,casePreInjuries:[],done:!1,searchQuery:"",formName:void 0,legalCaseId:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=a,this.toast=l,this.formService=d,this.casePreInjuryService=ee,this.errors$=this.select(u=>u.errors),this.loading$=this.select(u=>u.loading),this.done$=this.select(u=>u.done),this.item$=this.select(u=>u.item),this.casePreInjuries$=this.select(u=>u.casePreInjuries),this.legalCases$=this.select(u=>u.legalCases||[]),this.legalCaseId$=this.select(u=>u.legalCaseId),this.paging$=this.select(u=>u.paging),this.searchQuery$=this.select(u=>u.searchQuery),this.formName$=this.select(u=>u.formName),this.actionResult$=this.select(this.item$,this.done$,(u,n)=>({item:u,done:n}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.casePreInjuries$,this.legalCases$,(u,n,r,m,p,v)=>({errors:u,loading:n,item:r,formName:m,casePreInjuries:p,legalCases:v}),{debounce:!0}),this.input$=this.select(this.paging$,this.legalCaseId$,this.searchQuery$,(u,n,r)=>({limit:u.limit,skip:u.skip,name:r,legalCaseId:n,total:u.total})),this.setFormName=this.updater((u,n)=>Object.assign(Object.assign({},u),{formName:n})),this.setLegalCaseId=this.updater((u,n)=>Object.assign(Object.assign({},u),{legalCaseId:n})),this.filterLegalCases=u=>this.data.userSelectLegalCases({input:{name:u}}).pipe((0,b._b)(n=>{let r=n.data.items;return this.patchState({legalCases:r}),r},n=>this.patchState({errors:n.graphQLErrors?n.graphQLErrors:n})),(0,fe.U)(n=>n.data.items)),this.addLegalCase=this.updater((u,n)=>Object.assign(Object.assign({},u),{legalCases:u.legalCases.concat(n)})),this.setItem=this.updater((u,n)=>Object.assign(Object.assign({},u),{item:n})),this.addNewCasePreInjury=this.updater((u,n)=>Object.assign(Object.assign({},u),{casePreInjuries:[...u.casePreInjuries,n]})),this.updateCasePreInjury=this.updater((u,n)=>Object.assign(Object.assign({},u),{casePreInjuries:u.casePreInjuries.map(r=>r.id===n.id?n:r)})),this.addCasePreInjuries=this.updater((u,n)=>Object.assign(Object.assign({},u),{casePreInjuries:u.casePreInjuries.concat(n)})),this.updateCasePreInjuries=this.updater((u,n)=>Object.assign(Object.assign({},u),{casePreInjuries:u.casePreInjuries.map(r=>n.find(p=>p.id===r.id)||r)})),this.setSearchQuery=this.updater((u,n)=>Object.assign(Object.assign({},u),{searchQuery:n})),this.loadCasePreInjuryEffect=this.effect(u=>u.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(n=>this.data.userCasePreInjury({casePreInjuryId:n}).pipe((0,b._b)(r=>{this.patchState({item:r.data.item,errors:r.errors,loading:!1})},r=>this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})))))),this.loadCasePreInjuriesEffect=this.effect(u=>u.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.input$),(0,h.w)(([n,r])=>this.data.userCasePreInjuries({input:r}).pipe((0,b._b)(m=>this.patchState({paging:{limit:r.limit,skip:r.skip,total:m.data.count.total},casePreInjuries:m.data.items,errors:m.errors,loading:!1}),m=>this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})))))),this.createCasePreInjuryEffect=this.effect(u=>u.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(n=>this.casePreInjuryService.createCasePreInjury(Object.assign({},n)).pipe((0,b._b)(r=>{this.addNewCasePreInjury(r),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:r,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},r=>{r.graphQLErrors?(this.toast.error(r.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})):(this.toast.error(r.Message),this.formService.setErrors(r.Data))}))))),this.updateCasePreInjuryEffect=this.effect(u=>u.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([n,r])=>this.casePreInjuryService.updateCasePreInjury(n,n.id).pipe((0,b._b)(m=>{this.updateCasePreInjury(m),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:m,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},m=>{m.graphQLErrors?(this.toast.error(m.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})):(this.toast.error(m.Message),this.formService.setErrors(m.Data))}))))),this.deleteCasePreInjuryEffect=this.effect(u=>u.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([n,r])=>this.data.userDeleteCasePreInjury({casePreInjuryId:r.id}).pipe((0,b._b)(m=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:m.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},m=>{m.graphQLErrors?(this.toast.error(m.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})):(this.toast.error(m.Message),this.formService.setErrors(m.Data))}))))),this.importExcelEffect=this.effect(u=>u.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(n=>this.casePreInjuryService.importCasePreInjuries(n).pipe((0,de.K)(r=>{var m;return this.toast.error(null!==(m=r.Message)&&void 0!==m?m:"Failed to save",{duration:3e3}),q.E}),(0,y.b)(r=>{const m=JSON.parse(r.created),p=JSON.parse(r.updated),v=JSON.parse(r.failed),I=m.length+p.length+v.length;this.addCasePreInjuries(m),this.updateCasePreInjuries(p),this.toast.success(`${m.length} created, ${p.length} updated, ${v.length} failed of total ${I}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("casePreInjuryId")?(this.route.snapshot.paramMap.get("casePreInjuryId"),this.setFormName("casePreInjury_edit")):this.setFormName("casePreInjury_create"),this.route.snapshot.paramMap.has("legalCaseId")){var c=this.route.snapshot.paramMap.get("legalCaseId");this.setLegalCaseId(c)}}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.casePreInjuryService.validateCasePreInjuryExcelData(t,i.legalCases)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(z.q),e.LFG(O.F0),e.LFG(O.gz),e.LFG(X.F),e.LFG(Z.o),e.LFG(sb))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function ob(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.close.emit())})("formIsReady",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.casePreInjury)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let zr=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"casePreInjury_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.casePreInjury=i.item})):t.formName&&t.formName.currentValue&&"casePreInjury_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadCasePreInjuryEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.casePreInjury=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Os),e.Y36(O.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-case-pre-injury-form"]],inputs:{casePreInjury:"casePreInjury",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,ob,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[P.O5,te.M,P.Ov],encapsulation:2}),s})(),Hr=(()=>{class s{constructor(){this.autoHeight=!1,this.casePreInjuries=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[{field:"legalCase.name",headerName:"Legal Case",filter:"agTextColumnFilter"},{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{field:"legalCaseId",filter:"agTextColumnFilter",hide:!0},{headerName:"Affects Injury",field:"affectsInjury",filter:"agSetColumnFilter",cellRenderer:"checkboxRenderer"},{field:"injuryDate",filter:"agTextColumnFilter"},{field:"injured",filter:"agTextColumnFilter"},{field:"anatomic",filter:"agTextColumnFilter"},{field:"dateCreated",filter:"agDateColumnFilter"},{headerName:"Removed",field:"removed",filter:"agSetColumnFilter",cellRenderer:"checkboxRenderer"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var a;t.includes(null===(a=i.data)||void 0===a?void 0:a.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-case-pre-injury-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(f.x,5),2&t){let a;e.iGM(a=e.CRH())&&(i.tableView=a.first)}},inputs:{autoHeight:"autoHeight",casePreInjuries:"casePreInjuries"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.casePreInjuries)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[f.x],encapsulation:2}),s})();function ab(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-case-pre-injury-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","casePreInjury_edit")("formControl",t.formControl)("casePreInjury",t.casePreInjury)}}const rb=function(){return{}};function nb(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-case-pre-injury-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","casePreInjury_create")("formControl",t.formControl)("casePreInjury",e.DdM(3,rb))}}function lb(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-case-pre-injury-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(d.ref.close())}),e.qZA()}2&s&&e.Q6J("casePreInjuries",o.data.items)}let cb=(()=>{class s extends G.fS{constructor(t){super(),this.store=t,this.store.loadCasePreInjuriesEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.casePreInjuries$.pipe((0,h.w)(i=>(0,D.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Os))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","casePreInjury","send","close"],[1,"w-full","h-full","bg-white",3,"casePreInjuries","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,ab,2,3,"ng-template",null,1,e.W1O),e.YNc(3,nb,1,4,"ng-template",null,2,e.W1O),e.YNc(5,lb,1,1,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",d)("editTemplate",a)("createTemplate",l)("key",i.field.key)}},dependencies:[E.JJ,E.oH,H.$,zr,Hr],encapsulation:2}),s})();function db(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-case-pre-injury-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","casePreInjury_edit")("casePreInjury",t.value)}}const ub=function(){return{}};function mb(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-case-pre-injury-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","casePreInjury_create")("casePreInjury",e.DdM(2,ub))}function pb(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-case-pre-injury-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(null==d.ref?null:d.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("casePreInjuries",t.items)}}let hb=(()=>{class s extends pe{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","casePreInjury","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","casePreInjuries","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,db,1,2,"ng-template",null,1,e.W1O),e.YNc(3,mb,1,3,"ng-template",null,2,e.W1O),e.YNc(5,pb,1,2,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[he,zr,Hr],encapsulation:2}),s})(),fb=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[Os],imports:[P.ez,U.F,E.UX,J.o,ae.u,$.P,j.t,me,k.h,se.G,G.X0.forChild({types:[{name:"case-pre-injury-select",component:cb,wrappers:["form-field"]},{name:"case-pre-injury-grid",component:hb}]})]}),s})(),_b=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[fb]}),s})();class yt extends W.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class gb extends yt{constructor(o,t){super("ValidateCasePreProblemExcelDataAction"),this.valid=!1,this.excelData=o,this.legalCases=t}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name),this.validationContext.addRule(new g.mi(`legalCaseName_${i}_is_valid}`,"Legal Case Is Not Valid","legalCase.name",t.legalCase,this.legalCases,!0))}),this.validationContext.addRule(new g.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof g.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(a=>a.name),newNames:[i.newName]}):i instanceof g.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,D.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class vb extends g.wS{constructor(o,t,i,a,l){super(o,t,i,a,l,!0)}}class Cb extends g.ul{constructor(o,t,i,a=!1){super(o,t,a),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new g.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new vb("name","The casepreproblem name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class Sb extends yt{constructor(o){super("CreateCasePreProblemAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new Cb("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateCasePreProblem({input:this.input}).pipe((0,h.w)(o=>(0,ue.of)(o.data.created)))}}class bb extends yt{constructor(o){super("UpdateCasePreProblemsAction"),this.casePreProblems=o}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.casePreProblems,!0))}performAction(){this.response=this.businessProvider.data.userUpdateCasePreProblems({input:{casePreProblems:this.casePreProblems}}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}class Tb extends yt{constructor(o,t){super("UpdateCasePreProblemAction"),this.casePreProblem=o,this.casePreProblemId=t}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.casePreProblem,!0)).addRule(new g.xF("Id","Id should be a CUID and not null",this.casePreProblemId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateCasePreProblem({casePreProblemId:this.casePreProblemId,input:this.casePreProblem}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}let qr=(()=>{class s extends W.nH{constructor(t,i,a){super("NotificationService.CasePreProblemBusinessProviderService",t,a),this.data=i}createCasePreProblem(t){const i=new Sb(t);return i.Do(this),i.response}updateCasePreProblem(t,i){const a=new Tb(t,i);return a.Do(this),a.response}importCasePreProblems(t){const i=new bb(t);return i.Do(this),i.response}validateCasePreProblemExcelData(t,i){const a=new gb(t,i);return a.Do(this),a.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(K.ed),e.LFG(z.q),e.LFG(W.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),yb=(()=>{class s extends W.nH{constructor(t,i,a){super("CasePreProblemService",a,t),this.businessProvider=i}createCasePreProblem(t){const i=Object.fromEntries(Object.entries(t).filter(([a,l])=>null!==l));return this.businessProvider.createCasePreProblem(i)}updateCasePreProblem(t,i){return this.businessProvider.updateCasePreProblem(t,i)}importCasePreProblems(t){return this.businessProvider.importCasePreProblems(t)}validateCasePreProblemExcelData(t,i){return this.businessProvider.validateCasePreProblemExcelData(t,i)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(qr,8),e.LFG(qr),e.LFG(K.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),Ls=(()=>{class s extends b.m1{constructor(t,i,a,l,d,ee){if(super({loading:!1,casePreProblems:[],done:!1,searchQuery:"",formName:void 0,legalCaseId:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=a,this.toast=l,this.formService=d,this.casePreProblemService=ee,this.errors$=this.select(u=>u.errors),this.loading$=this.select(u=>u.loading),this.done$=this.select(u=>u.done),this.item$=this.select(u=>u.item),this.casePreProblems$=this.select(u=>u.casePreProblems),this.legalCases$=this.select(u=>u.legalCases||[]),this.legalCaseId$=this.select(u=>u.legalCaseId),this.paging$=this.select(u=>u.paging),this.searchQuery$=this.select(u=>u.searchQuery),this.formName$=this.select(u=>u.formName),this.actionResult$=this.select(this.item$,this.done$,(u,n)=>({item:u,done:n}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.casePreProblems$,this.legalCases$,(u,n,r,m,p,v)=>({errors:u,loading:n,item:r,formName:m,casePreProblems:p,legalCases:v}),{debounce:!0}),this.input$=this.select(this.paging$,this.legalCaseId$,this.searchQuery$,(u,n,r)=>({limit:u.limit,skip:u.skip,name:r,legalCaseId:n,total:u.total})),this.setFormName=this.updater((u,n)=>Object.assign(Object.assign({},u),{formName:n})),this.setLegalCaseId=this.updater((u,n)=>Object.assign(Object.assign({},u),{legalCaseId:n})),this.filterLegalCases=u=>this.data.userSelectLegalCases({input:{name:u}}).pipe((0,b._b)(n=>{let r=n.data.items;return this.patchState({legalCases:r}),r},n=>this.patchState({errors:n.graphQLErrors?n.graphQLErrors:n})),(0,fe.U)(n=>n.data.items)),this.addLegalCase=this.updater((u,n)=>Object.assign(Object.assign({},u),{legalCases:u.legalCases.concat(n)})),this.setItem=this.updater((u,n)=>Object.assign(Object.assign({},u),{item:n})),this.addNewCasePreProblem=this.updater((u,n)=>Object.assign(Object.assign({},u),{casePreProblems:[...u.casePreProblems,n]})),this.updateCasePreProblem=this.updater((u,n)=>Object.assign(Object.assign({},u),{casePreProblems:u.casePreProblems.map(r=>r.id===n.id?n:r)})),this.addCasePreProblems=this.updater((u,n)=>Object.assign(Object.assign({},u),{casePreProblems:u.casePreProblems.concat(n)})),this.updateCasePreProblems=this.updater((u,n)=>Object.assign(Object.assign({},u),{casePreProblems:u.casePreProblems.map(r=>n.find(p=>p.id===r.id)||r)})),this.setSearchQuery=this.updater((u,n)=>Object.assign(Object.assign({},u),{searchQuery:n})),this.loadCasePreProblemEffect=this.effect(u=>u.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(n=>this.data.userCasePreProblem({casePreProblemId:n}).pipe((0,b._b)(r=>{this.patchState({item:r.data.item,errors:r.errors,loading:!1})},r=>this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})))))),this.loadCasePreProblemsEffect=this.effect(u=>u.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.input$),(0,h.w)(([n,r])=>this.data.userCasePreProblems({input:r}).pipe((0,b._b)(m=>this.patchState({paging:{limit:r.limit,skip:r.skip,total:m.data.count.total},casePreProblems:m.data.items,errors:m.errors,loading:!1}),m=>this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})))))),this.createCasePreProblemEffect=this.effect(u=>u.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(n=>this.casePreProblemService.createCasePreProblem(Object.assign({},n)).pipe((0,b._b)(r=>{this.addNewCasePreProblem(r),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:r,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},r=>{r.graphQLErrors?(this.toast.error(r.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})):(this.toast.error(r.Message),this.formService.setErrors(r.Data))}))))),this.updateCasePreProblemEffect=this.effect(u=>u.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([n,r])=>this.casePreProblemService.updateCasePreProblem(n,n.id).pipe((0,b._b)(m=>{this.updateCasePreProblem(m),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:m,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},m=>{m.graphQLErrors?(this.toast.error(m.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})):(this.toast.error(m.Message),this.formService.setErrors(m.Data))}))))),this.deleteCasePreProblemEffect=this.effect(u=>u.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([n,r])=>this.data.userDeleteCasePreProblem({casePreProblemId:r.id}).pipe((0,b._b)(m=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:m.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},m=>{m.graphQLErrors?(this.toast.error(m.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})):(this.toast.error(m.Message),this.formService.setErrors(m.Data))}))))),this.importExcelEffect=this.effect(u=>u.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(n=>this.casePreProblemService.importCasePreProblems(n).pipe((0,de.K)(r=>{var m;return this.toast.error(null!==(m=r.Message)&&void 0!==m?m:"Failed to save",{duration:3e3}),q.E}),(0,y.b)(r=>{const m=JSON.parse(r.created),p=JSON.parse(r.updated),v=JSON.parse(r.failed),I=m.length+p.length+v.length;this.addCasePreProblems(m),this.updateCasePreProblems(p),this.toast.success(`${m.length} created, ${p.length} updated, ${v.length} failed of total ${I}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("casePreProblemId")?(this.route.snapshot.paramMap.get("casePreProblemId"),this.setFormName("casePreProblem_edit")):this.setFormName("casePreProblem_create"),this.route.snapshot.paramMap.has("legalCaseId")){var c=this.route.snapshot.paramMap.get("legalCaseId");this.setLegalCaseId(c)}}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.casePreProblemService.validateCasePreProblemExcelData(t,i.legalCases)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(z.q),e.LFG(O.F0),e.LFG(O.gz),e.LFG(X.F),e.LFG(Z.o),e.LFG(yb))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function wb(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.close.emit())})("formIsReady",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.casePreProblem)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let Kr=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"casePreProblem_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.casePreProblem=i.item})):t.formName&&t.formName.currentValue&&"casePreProblem_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadCasePreProblemEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.casePreProblem=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Ls),e.Y36(O.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-case-pre-problem-form"]],inputs:{casePreProblem:"casePreProblem",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,wb,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[P.O5,te.M,P.Ov],encapsulation:2}),s})(),Zr=(()=>{class s{constructor(){this.autoHeight=!1,this.casePreProblems=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[{field:"legalCase.name",headerName:"Legal Case",filter:"agTextColumnFilter"},{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{field:"legalCaseId",filter:"agTextColumnFilter",hide:!0},{headerName:"Same Region",field:"sameRegion",filter:"agSetColumnFilter",cellRenderer:"checkboxRenderer"},{field:"problemDate",filter:"agDateColumnFilter"},{field:"duration",filter:"agTextColumnFilter"},{field:"symptoms",filter:"agTextColumnFilter"},{field:"regions",filter:"agTextColumnFilter"},{headerName:"Removed",field:"removed",filter:"agSetColumnFilter",cellRenderer:"checkboxRenderer"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var a;t.includes(null===(a=i.data)||void 0===a?void 0:a.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-case-pre-problem-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(f.x,5),2&t){let a;e.iGM(a=e.CRH())&&(i.tableView=a.first)}},inputs:{autoHeight:"autoHeight",casePreProblems:"casePreProblems"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.casePreProblems)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[f.x],encapsulation:2}),s})();function xb(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-case-pre-problem-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","casePreProblem_edit")("formControl",t.formControl)("casePreProblem",t.casePreProblem)}}const Nb=function(){return{}};function Ab(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-case-pre-problem-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","casePreProblem_create")("formControl",t.formControl)("casePreProblem",e.DdM(3,Nb))}}function Fb(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-case-pre-problem-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(d.ref.close())}),e.qZA()}2&s&&e.Q6J("casePreProblems",o.data.items)}let Pb=(()=>{class s extends G.fS{constructor(t){super(),this.store=t,this.store.loadCasePreProblemsEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.casePreProblems$.pipe((0,h.w)(i=>(0,D.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Ls))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","casePreProblem","send","close"],[1,"w-full","h-full","bg-white",3,"casePreProblems","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,xb,2,3,"ng-template",null,1,e.W1O),e.YNc(3,Ab,1,4,"ng-template",null,2,e.W1O),e.YNc(5,Fb,1,1,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",d)("editTemplate",a)("createTemplate",l)("key",i.field.key)}},dependencies:[E.JJ,E.oH,H.$,Kr,Zr],encapsulation:2}),s})();function Ib(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-case-pre-problem-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","casePreProblem_edit")("casePreProblem",t.value)}}const Db=function(){return{}};function Mb(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-case-pre-problem-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","casePreProblem_create")("casePreProblem",e.DdM(2,Db))}function Wb(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-case-pre-problem-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(null==d.ref?null:d.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("casePreProblems",t.items)}}let Eb=(()=>{class s extends pe{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","casePreProblem","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","casePreProblems","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,Ib,1,2,"ng-template",null,1,e.W1O),e.YNc(3,Mb,1,3,"ng-template",null,2,e.W1O),e.YNc(5,Wb,1,2,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[he,Kr,Zr],encapsulation:2}),s})(),Ob=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[Ls],imports:[P.ez,U.F,E.UX,J.o,ae.u,$.P,j.t,me,k.h,se.G,G.X0.forChild({types:[{name:"case-pre-problem-select",component:Pb,wrappers:["form-field"]},{name:"case-pre-problem-grid",component:Eb}]})]}),s})(),Lb=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[Ob]}),s})();class wt extends W.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class $b extends wt{constructor(o,t){super("ValidateCasePreProcedureExcelDataAction"),this.valid=!1,this.excelData=o,this.legalCases=t}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name),this.validationContext.addRule(new g.mi(`legalCaseName_${i}_is_valid}`,"Legal Case Is Not Valid","legalCase.name",t.legalCase,this.legalCases,!0))}),this.validationContext.addRule(new g.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof g.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(a=>a.name),newNames:[i.newName]}):i instanceof g.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,D.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class Gb extends g.wS{constructor(o,t,i,a,l){super(o,t,i,a,l,!0)}}class Rb extends g.ul{constructor(o,t,i,a=!1){super(o,t,a),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new g.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new Gb("name","The casepreprocedure name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class Qb extends wt{constructor(o){super("CreateCasePreProcedureAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new Rb("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateCasePreProcedure({input:this.input}).pipe((0,h.w)(o=>(0,ue.of)(o.data.created)))}}class Vb extends wt{constructor(o){super("UpdateCasePreProceduresAction"),this.casePreProcedures=o}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.casePreProcedures,!0))}performAction(){this.response=this.businessProvider.data.userUpdateCasePreProcedures({input:{casePreProcedures:this.casePreProcedures}}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}class jb extends wt{constructor(o,t){super("UpdateCasePreProcedureAction"),this.casePreProcedure=o,this.casePreProcedureId=t}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.casePreProcedure,!0)).addRule(new g.xF("Id","Id should be a CUID and not null",this.casePreProcedureId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateCasePreProcedure({casePreProcedureId:this.casePreProcedureId,input:this.casePreProcedure}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}let Br=(()=>{class s extends W.nH{constructor(t,i,a){super("NotificationService.CasePreProcedureBusinessProviderService",t,a),this.data=i}createCasePreProcedure(t){const i=new Qb(t);return i.Do(this),i.response}updateCasePreProcedure(t,i){const a=new jb(t,i);return a.Do(this),a.response}importCasePreProcedures(t){const i=new Vb(t);return i.Do(this),i.response}validateCasePreProcedureExcelData(t,i){const a=new $b(t,i);return a.Do(this),a.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(K.ed),e.LFG(z.q),e.LFG(W.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),Ub=(()=>{class s extends W.nH{constructor(t,i,a){super("CasePreProcedureService",a,t),this.businessProvider=i}createCasePreProcedure(t){const i=Object.fromEntries(Object.entries(t).filter(([a,l])=>null!==l));return this.businessProvider.createCasePreProcedure(i)}updateCasePreProcedure(t,i){return this.businessProvider.updateCasePreProcedure(t,i)}importCasePreProcedures(t){return this.businessProvider.importCasePreProcedures(t)}validateCasePreProcedureExcelData(t,i){return this.businessProvider.validateCasePreProcedureExcelData(t,i)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(Br,8),e.LFG(Br),e.LFG(K.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),$s=(()=>{class s extends b.m1{constructor(t,i,a,l,d,ee){if(super({loading:!1,casePreProcedures:[],done:!1,searchQuery:"",formName:void 0,legalCaseId:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=a,this.toast=l,this.formService=d,this.casePreProcedureService=ee,this.errors$=this.select(u=>u.errors),this.loading$=this.select(u=>u.loading),this.done$=this.select(u=>u.done),this.item$=this.select(u=>u.item),this.casePreProcedures$=this.select(u=>u.casePreProcedures),this.legalCases$=this.select(u=>u.legalCases||[]),this.legalCaseId$=this.select(u=>u.legalCaseId),this.paging$=this.select(u=>u.paging),this.searchQuery$=this.select(u=>u.searchQuery),this.formName$=this.select(u=>u.formName),this.actionResult$=this.select(this.item$,this.done$,(u,n)=>({item:u,done:n}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.casePreProcedures$,this.legalCases$,(u,n,r,m,p,v)=>({errors:u,loading:n,item:r,formName:m,casePreProcedures:p,legalCases:v}),{debounce:!0}),this.input$=this.select(this.paging$,this.legalCaseId$,this.searchQuery$,(u,n,r)=>({limit:u.limit,skip:u.skip,name:r,legalCaseId:n,total:u.total})),this.setFormName=this.updater((u,n)=>Object.assign(Object.assign({},u),{formName:n})),this.setLegalCaseId=this.updater((u,n)=>Object.assign(Object.assign({},u),{legalCaseId:n})),this.filterLegalCases=u=>this.data.userSelectLegalCases({input:{name:u}}).pipe((0,b._b)(n=>{let r=n.data.items;return this.patchState({legalCases:r}),r},n=>this.patchState({errors:n.graphQLErrors?n.graphQLErrors:n})),(0,fe.U)(n=>n.data.items)),this.addLegalCase=this.updater((u,n)=>Object.assign(Object.assign({},u),{legalCases:u.legalCases.concat(n)})),this.setItem=this.updater((u,n)=>Object.assign(Object.assign({},u),{item:n})),this.addNewCasePreProcedure=this.updater((u,n)=>Object.assign(Object.assign({},u),{casePreProcedures:[...u.casePreProcedures,n]})),this.updateCasePreProcedure=this.updater((u,n)=>Object.assign(Object.assign({},u),{casePreProcedures:u.casePreProcedures.map(r=>r.id===n.id?n:r)})),this.addCasePreProcedures=this.updater((u,n)=>Object.assign(Object.assign({},u),{casePreProcedures:u.casePreProcedures.concat(n)})),this.updateCasePreProcedures=this.updater((u,n)=>Object.assign(Object.assign({},u),{casePreProcedures:u.casePreProcedures.map(r=>n.find(p=>p.id===r.id)||r)})),this.setSearchQuery=this.updater((u,n)=>Object.assign(Object.assign({},u),{searchQuery:n})),this.loadCasePreProcedureEffect=this.effect(u=>u.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(n=>this.data.userCasePreProcedure({casePreProcedureId:n}).pipe((0,b._b)(r=>{this.patchState({item:r.data.item,errors:r.errors,loading:!1})},r=>this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})))))),this.loadCasePreProceduresEffect=this.effect(u=>u.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.input$),(0,h.w)(([n,r])=>this.data.userCasePreProcedures({input:r}).pipe((0,b._b)(m=>this.patchState({paging:{limit:r.limit,skip:r.skip,total:m.data.count.total},casePreProcedures:m.data.items,errors:m.errors,loading:!1}),m=>this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})))))),this.createCasePreProcedureEffect=this.effect(u=>u.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(n=>this.casePreProcedureService.createCasePreProcedure(Object.assign({},n)).pipe((0,b._b)(r=>{this.addNewCasePreProcedure(r),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:r,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},r=>{r.graphQLErrors?(this.toast.error(r.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})):(this.toast.error(r.Message),this.formService.setErrors(r.Data))}))))),this.updateCasePreProcedureEffect=this.effect(u=>u.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([n,r])=>this.casePreProcedureService.updateCasePreProcedure(n,n.id).pipe((0,b._b)(m=>{this.updateCasePreProcedure(m),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:m,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},m=>{m.graphQLErrors?(this.toast.error(m.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})):(this.toast.error(m.Message),this.formService.setErrors(m.Data))}))))),this.deleteCasePreProcedureEffect=this.effect(u=>u.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([n,r])=>this.data.userDeleteCasePreProcedure({casePreProcedureId:r.id}).pipe((0,b._b)(m=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:m.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},m=>{m.graphQLErrors?(this.toast.error(m.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})):(this.toast.error(m.Message),this.formService.setErrors(m.Data))}))))),this.importExcelEffect=this.effect(u=>u.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(n=>this.casePreProcedureService.importCasePreProcedures(n).pipe((0,de.K)(r=>{var m;return this.toast.error(null!==(m=r.Message)&&void 0!==m?m:"Failed to save",{duration:3e3}),q.E}),(0,y.b)(r=>{const m=JSON.parse(r.created),p=JSON.parse(r.updated),v=JSON.parse(r.failed),I=m.length+p.length+v.length;this.addCasePreProcedures(m),this.updateCasePreProcedures(p),this.toast.success(`${m.length} created, ${p.length} updated, ${v.length} failed of total ${I}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("casePreProcedureId")?(this.route.snapshot.paramMap.get("casePreProcedureId"),this.setFormName("casePreProcedure_edit")):this.setFormName("casePreProcedure_create"),this.route.snapshot.paramMap.has("legalCaseId")){var c=this.route.snapshot.paramMap.get("legalCaseId");this.setLegalCaseId(c)}}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.casePreProcedureService.validateCasePreProcedureExcelData(t,i.legalCases)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(z.q),e.LFG(O.F0),e.LFG(O.gz),e.LFG(X.F),e.LFG(Z.o),e.LFG(Ub))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function Jb(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.close.emit())})("formIsReady",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.casePreProcedure)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let kr=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"casePreProcedure_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.casePreProcedure=i.item})):t.formName&&t.formName.currentValue&&"casePreProcedure_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadCasePreProcedureEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.casePreProcedure=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36($s),e.Y36(O.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-case-pre-procedure-form"]],inputs:{casePreProcedure:"casePreProcedure",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,Jb,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[P.O5,te.M,P.Ov],encapsulation:2}),s})(),Yr=(()=>{class s{constructor(){this.autoHeight=!1,this.casePreProcedures=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[{field:"legalCase.name",headerName:"Legal Case",filter:"agTextColumnFilter"},{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{field:"legalCaseId",filter:"agTextColumnFilter",hide:!0},{field:"procedureType",filter:"agTextColumnFilter"},{field:"procedureDate",filter:"agDateColumnFilter"},{field:"dateCreated",filter:"agDateColumnFilter"},{headerName:"Removed",field:"removed",filter:"agSetColumnFilter",cellRenderer:"checkboxRenderer"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var a;t.includes(null===(a=i.data)||void 0===a?void 0:a.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-case-pre-procedure-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(f.x,5),2&t){let a;e.iGM(a=e.CRH())&&(i.tableView=a.first)}},inputs:{autoHeight:"autoHeight",casePreProcedures:"casePreProcedures"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.casePreProcedures)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[f.x],encapsulation:2}),s})();function zb(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-case-pre-procedure-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","casePreProcedure_edit")("formControl",t.formControl)("casePreProcedure",t.casePreProcedure)}}const Hb=function(){return{}};function qb(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-case-pre-procedure-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","casePreProcedure_create")("formControl",t.formControl)("casePreProcedure",e.DdM(3,Hb))}}function Kb(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-case-pre-procedure-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(d.ref.close())}),e.qZA()}2&s&&e.Q6J("casePreProcedures",o.data.items)}let Zb=(()=>{class s extends G.fS{constructor(t){super(),this.store=t,this.store.loadCasePreProceduresEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.casePreProcedures$.pipe((0,h.w)(i=>(0,D.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36($s))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","casePreProcedure","send","close"],[1,"w-full","h-full","bg-white",3,"casePreProcedures","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,zb,2,3,"ng-template",null,1,e.W1O),e.YNc(3,qb,1,4,"ng-template",null,2,e.W1O),e.YNc(5,Kb,1,1,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",d)("editTemplate",a)("createTemplate",l)("key",i.field.key)}},dependencies:[E.JJ,E.oH,H.$,kr,Yr],encapsulation:2}),s})();function Bb(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-case-pre-procedure-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","casePreProcedure_edit")("casePreProcedure",t.value)}}const kb=function(){return{}};function Yb(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-case-pre-procedure-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","casePreProcedure_create")("casePreProcedure",e.DdM(2,kb))}function Xb(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-case-pre-procedure-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(null==d.ref?null:d.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("casePreProcedures",t.items)}}let e0=(()=>{class s extends pe{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","casePreProcedure","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","casePreProcedures","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,Bb,1,2,"ng-template",null,1,e.W1O),e.YNc(3,Yb,1,3,"ng-template",null,2,e.W1O),e.YNc(5,Xb,1,2,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[he,kr,Yr],encapsulation:2}),s})(),t0=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[$s],imports:[P.ez,U.F,E.UX,J.o,ae.u,$.P,j.t,me,k.h,se.G,G.X0.forChild({types:[{name:"case-pre-procedure-select",component:Zb,wrappers:["form-field"]},{name:"case-pre-procedure-grid",component:e0}]})]}),s})(),i0=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[t0]}),s})();class xt extends W.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class s0 extends xt{constructor(o,t,i,a){super("ValidateCaseProcedureExcelDataAction"),this.valid=!1,this.excelData=o,this.legalCases=t,this.appointments=i,this.locations=a}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name),this.validationContext.addRule(new g.mi(`legalCaseName_${i}_is_valid}`,"Legal Case Is Not Valid","legalCase.name",t.legalCase,this.legalCases,!0)),this.validationContext.addRule(new g.mi(`appointmentName_${i}_is_valid}`,"Appointment Is Not Valid","appointment.name",t.appointment,this.appointments,!0)),this.validationContext.addRule(new g.mi(`locationName_${i}_is_valid}`,"Location Is Not Valid","location.name",t.location,this.locations,!0))}),this.validationContext.addRule(new g.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof g.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(a=>a.name),newNames:[i.newName]}):i instanceof g.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,D.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class o0 extends g.wS{constructor(o,t,i,a,l){super(o,t,i,a,l,!0)}}class a0 extends g.ul{constructor(o,t,i,a=!1){super(o,t,a),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new g.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new o0("name","The caseprocedure name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class r0 extends xt{constructor(o){super("CreateCaseProcedureAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new a0("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateCaseProcedure({input:this.input}).pipe((0,h.w)(o=>(0,ue.of)(o.data.created)))}}class n0 extends xt{constructor(o){super("UpdateCaseProceduresAction"),this.caseProcedures=o}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.caseProcedures,!0))}performAction(){this.response=this.businessProvider.data.userUpdateCaseProcedures({input:{caseProcedures:this.caseProcedures}}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}class l0 extends xt{constructor(o,t){super("UpdateCaseProcedureAction"),this.caseProcedure=o,this.caseProcedureId=t}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.caseProcedure,!0)).addRule(new g.xF("Id","Id should be a CUID and not null",this.caseProcedureId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateCaseProcedure({caseProcedureId:this.caseProcedureId,input:this.caseProcedure}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}let Xr=(()=>{class s extends W.nH{constructor(t,i,a){super("NotificationService.CaseProcedureBusinessProviderService",t,a),this.data=i}createCaseProcedure(t){const i=new r0(t);return i.Do(this),i.response}updateCaseProcedure(t,i){const a=new l0(t,i);return a.Do(this),a.response}importCaseProcedures(t){const i=new n0(t);return i.Do(this),i.response}validateCaseProcedureExcelData(t,i,a,l){const d=new s0(t,i,a,l);return d.Do(this),d.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(K.ed),e.LFG(z.q),e.LFG(W.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),c0=(()=>{class s extends W.nH{constructor(t,i,a){super("CaseProcedureService",a,t),this.businessProvider=i}createCaseProcedure(t){const i=Object.fromEntries(Object.entries(t).filter(([a,l])=>null!==l));return this.businessProvider.createCaseProcedure(i)}updateCaseProcedure(t,i){return this.businessProvider.updateCaseProcedure(t,i)}importCaseProcedures(t){return this.businessProvider.importCaseProcedures(t)}validateCaseProcedureExcelData(t,i,a,l){return this.businessProvider.validateCaseProcedureExcelData(t,i,a,l)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(Xr,8),e.LFG(Xr),e.LFG(K.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),Gs=(()=>{class s extends b.m1{constructor(t,i,a,l,d,ee){if(super({loading:!1,caseProcedures:[],done:!1,searchQuery:"",formName:void 0,legalCaseId:void 0,appointmentId:void 0,locationId:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=a,this.toast=l,this.formService=d,this.caseProcedureService=ee,this.errors$=this.select(r=>r.errors),this.loading$=this.select(r=>r.loading),this.done$=this.select(r=>r.done),this.item$=this.select(r=>r.item),this.caseProcedures$=this.select(r=>r.caseProcedures),this.legalCases$=this.select(r=>r.legalCases||[]),this.appointments$=this.select(r=>r.appointments||[]),this.locations$=this.select(r=>r.locations||[]),this.legalCaseId$=this.select(r=>r.legalCaseId),this.appointmentId$=this.select(r=>r.appointmentId),this.locationId$=this.select(r=>r.locationId),this.paging$=this.select(r=>r.paging),this.searchQuery$=this.select(r=>r.searchQuery),this.formName$=this.select(r=>r.formName),this.actionResult$=this.select(this.item$,this.done$,(r,m)=>({item:r,done:m}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.caseProcedures$,this.legalCases$,this.appointments$,this.locations$,(r,m,p,v,I,B,_e,Ne)=>({errors:r,loading:m,item:p,formName:v,caseProcedures:I,legalCases:B,appointments:_e,locations:Ne}),{debounce:!0}),this.input$=this.select(this.paging$,this.legalCaseId$,this.appointmentId$,this.locationId$,this.searchQuery$,(r,m,p,v,I)=>({limit:r.limit,skip:r.skip,name:I,legalCaseId:m,appointmentId:p,locationId:v,total:r.total})),this.setFormName=this.updater((r,m)=>Object.assign(Object.assign({},r),{formName:m})),this.setLegalCaseId=this.updater((r,m)=>Object.assign(Object.assign({},r),{legalCaseId:m})),this.setAppointmentId=this.updater((r,m)=>Object.assign(Object.assign({},r),{appointmentId:m})),this.setLocationId=this.updater((r,m)=>Object.assign(Object.assign({},r),{locationId:m})),this.setSelectedCaseProcedures=this.updater((r,m)=>Object.assign(Object.assign({},r),{selectedCaseProcedure:m})),this.filterLegalCases=r=>this.data.userSelectLegalCases({input:{name:r}}).pipe((0,b._b)(m=>{let p=m.data.items;return this.patchState({legalCases:p}),p},m=>this.patchState({errors:m.graphQLErrors?m.graphQLErrors:m})),(0,fe.U)(m=>m.data.items)),this.filterAppointments=r=>this.data.userSelectAppointments({input:{name:r}}).pipe((0,b._b)(m=>{let p=m.data.items;return this.patchState({appointments:p}),p},m=>this.patchState({errors:m.graphQLErrors?m.graphQLErrors:m})),(0,fe.U)(m=>m.data.items)),this.filterLocations=r=>this.data.userSelectLocations({input:{name:r}}).pipe((0,b._b)(m=>{let p=m.data.items;return this.patchState({locations:p}),p},m=>this.patchState({errors:m.graphQLErrors?m.graphQLErrors:m})),(0,fe.U)(m=>m.data.items)),this.addLegalCase=this.updater((r,m)=>Object.assign(Object.assign({},r),{legalCases:r.legalCases.concat(m)})),this.addAppointment=this.updater((r,m)=>Object.assign(Object.assign({},r),{appointments:r.appointments.concat(m)})),this.addLocation=this.updater((r,m)=>Object.assign(Object.assign({},r),{locations:r.locations.concat(m)})),this.setItem=this.updater((r,m)=>Object.assign(Object.assign({},r),{item:m})),this.addNewCaseProcedure=this.updater((r,m)=>Object.assign(Object.assign({},r),{caseProcedures:[...r.caseProcedures,m]})),this.updateCaseProcedure=this.updater((r,m)=>Object.assign(Object.assign({},r),{caseProcedures:r.caseProcedures.map(p=>p.id===m.id?m:p)})),this.addCaseProcedures=this.updater((r,m)=>Object.assign(Object.assign({},r),{caseProcedures:r.caseProcedures.concat(m)})),this.updateCaseProcedures=this.updater((r,m)=>Object.assign(Object.assign({},r),{caseProcedures:r.caseProcedures.map(p=>m.find(I=>I.id===p.id)||p)})),this.setSearchQuery=this.updater((r,m)=>Object.assign(Object.assign({},r),{searchQuery:m})),this.loadCaseProcedureEffect=this.effect(r=>r.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(m=>this.data.userCaseProcedure({caseProcedureId:m}).pipe((0,b._b)(p=>{this.patchState({item:p.data.item,errors:p.errors,loading:!1})},p=>this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})))))),this.loadCaseProceduresEffect=this.effect(r=>r.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.input$),(0,h.w)(([m,p])=>(console.log("hit the load effect"),this.data.userSelectDetailCaseProcedures({input:p}).pipe((0,b._b)(v=>{console.log(v.data.items),this.patchState({paging:{limit:p.limit,skip:p.skip,total:v.data.count.total},caseProcedures:v.data.items,errors:v.errors,loading:!1})},v=>this.patchState({loading:!1,errors:v.graphQLErrors?v.graphQLErrors:v}))))))),this.createCaseProcedureEffect=this.effect(r=>r.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(m=>this.caseProcedureService.createCaseProcedure(Object.assign({},m)).pipe((0,b._b)(p=>{this.addNewCaseProcedure(p),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:p,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},p=>{p.graphQLErrors?(this.toast.error(p.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})):(this.toast.error(p.Message),this.formService.setErrors(p.Data))}))))),this.updateCaseProcedureEffect=this.effect(r=>r.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([m,p])=>this.caseProcedureService.updateCaseProcedure(m,m.id).pipe((0,b._b)(v=>{this.updateCaseProcedure(v),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:v,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},v=>{v.graphQLErrors?(this.toast.error(v.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:v.graphQLErrors?v.graphQLErrors:v})):(this.toast.error(v.Message),this.formService.setErrors(v.Data))}))))),this.deleteCaseProcedureEffect=this.effect(r=>r.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([m,p])=>this.data.userDeleteCaseProcedure({caseProcedureId:p.id}).pipe((0,b._b)(v=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:v.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},v=>{v.graphQLErrors?(this.toast.error(v.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:v.graphQLErrors?v.graphQLErrors:v})):(this.toast.error(v.Message),this.formService.setErrors(v.Data))}))))),this.importExcelEffect=this.effect(r=>r.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(m=>this.caseProcedureService.importCaseProcedures(m).pipe((0,de.K)(p=>{var v;return this.toast.error(null!==(v=p.Message)&&void 0!==v?v:"Failed to save",{duration:3e3}),q.E}),(0,y.b)(p=>{const v=JSON.parse(p.created),I=JSON.parse(p.updated),B=JSON.parse(p.failed),_e=v.length+I.length+B.length;this.addCaseProcedures(v),this.updateCaseProcedures(I),this.toast.success(`${v.length} created, ${I.length} updated, ${B.length} failed of total ${_e}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("caseProcedureId")?(this.route.snapshot.paramMap.get("caseProcedureId"),this.setFormName("caseProcedure_edit")):this.setFormName("caseProcedure_create"),this.route.snapshot.paramMap.has("legalCaseId")){var c=this.route.snapshot.paramMap.get("legalCaseId");this.setLegalCaseId(c)}if(this.route.snapshot.paramMap.has("appointmentId")){var u=this.route.snapshot.paramMap.get("appointmentId");this.setAppointmentId(u)}if(this.route.snapshot.paramMap.has("locationId")){var n=this.route.snapshot.paramMap.get("locationId");this.setLocationId(n)}}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.caseProcedureService.validateCaseProcedureExcelData(t,i.legalCases,i.appointments,i.locations)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(z.q),e.LFG(O.F0),e.LFG(O.gz),e.LFG(X.F),e.LFG(Z.o),e.LFG(c0))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function d0(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.close.emit())})("formIsReady",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.caseProcedure)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let en=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"caseProcedure_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({id:null,name:""}),this.store.vm$.subscribe(i=>{this.caseProcedure=i.item})):t.formName&&t.formName.currentValue&&"caseProcedure_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadCaseProcedureEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.caseProcedure=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Gs),e.Y36(O.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-case-procedure-form"]],inputs:{caseProcedure:"caseProcedure",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,d0,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[P.O5,te.M,P.Ov],encapsulation:2}),s})(),tn=(()=>{class s{constructor(){this.autoHeight=!1,this.caseProcedures=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[{field:"legalCase.name",headerName:"Legal Case",filter:"agTextColumnFilter"},{field:"appointment.name",headerName:"Appointment",filter:"agTextColumnFilter"},{field:"procedureStatus.name",headerName:"Procedure Status",filter:"agTextColumnFilter"},{field:"procedureType.name",headerName:"Procedure Type",filter:"agTextColumnFilter"},{field:"location.name",headerName:"Location",filter:"agTextColumnFilter"},{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{field:"legalCaseId",filter:"agTextColumnFilter",hide:!0},{field:"appointmentId",filter:"agTextColumnFilter",hide:!0},{field:"locationId",filter:"agTextColumnFilter",hide:!0},{field:"procedureDate",filter:"agDateColumnFilter"},{headerName:"Cost",field:"cost",valueFormatter:t=>{var i;return(0,_.oBD)(null===(i=t.data)||void 0===i?void 0:i.cost,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{field:"notes",filter:"agTextColumnFilter"},{field:"createdBy",filter:"agTextColumnFilter"},{field:"dateCreated",filter:"agDateColumnFilter"},{headerName:"Removed",field:"removed",filter:"agSetColumnFilter",cellRenderer:"checkboxRenderer"},{field:"approvedDate",filter:"agDateColumnFilter"},{field:"procedureReasonName",filter:"agTextColumnFilter"},{field:"decisionDate",filter:"agDateColumnFilter"},{field:"nextActionDate",filter:"agDateColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var a;t.includes(null===(a=i.data)||void 0===a?void 0:a.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-case-procedure-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(f.x,5),2&t){let a;e.iGM(a=e.CRH())&&(i.tableView=a.first)}},inputs:{autoHeight:"autoHeight",caseProcedures:"caseProcedures"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.caseProcedures)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[f.x],encapsulation:2}),s})();function u0(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-case-procedure-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","caseProcedure_edit")("formControl",t.formControl)("caseProcedure",t.caseProcedure)}}const m0=function(){return{}};function p0(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-case-procedure-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","caseProcedure_create")("formControl",t.formControl)("caseProcedure",e.DdM(3,m0))}}function h0(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-case-procedure-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(d.ref.close())}),e.qZA()}2&s&&e.Q6J("caseProcedures",o.data.items)}let f0=(()=>{class s extends G.fS{constructor(t){super(),this.store=t,this.store.loadCaseProceduresEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.caseProcedures$.pipe((0,h.w)(i=>(0,D.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Gs))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","caseProcedure","send","close"],[1,"w-full","h-full","bg-white",3,"caseProcedures","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,u0,2,3,"ng-template",null,1,e.W1O),e.YNc(3,p0,1,4,"ng-template",null,2,e.W1O),e.YNc(5,h0,1,1,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",d)("editTemplate",a)("createTemplate",l)("key",i.field.key)}},dependencies:[E.JJ,E.oH,H.$,en,tn],encapsulation:2}),s})();function _0(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-case-procedure-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","caseProcedure_edit")("caseProcedure",t.value)}}const g0=function(){return{}};function v0(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-case-procedure-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","caseProcedure_create")("caseProcedure",e.DdM(2,g0))}function C0(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-case-procedure-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(null==d.ref?null:d.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("caseProcedures",t.items)}}let S0=(()=>{class s extends pe{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","caseProcedure","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","caseProcedures","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,_0,1,2,"ng-template",null,1,e.W1O),e.YNc(3,v0,1,3,"ng-template",null,2,e.W1O),e.YNc(5,C0,1,2,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[he,en,tn],encapsulation:2}),s})(),b0=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[Gs],imports:[P.ez,U.F,E.UX,J.o,ae.u,$.P,j.t,me,k.h,se.G,G.X0.forChild({types:[{name:"case-procedure-select",component:f0,wrappers:["form-field"]},{name:"case-procedure-grid",component:S0}]})]}),s})(),T0=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[b0]}),s})();class Nt extends W.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class y0 extends Nt{constructor(o){super("ValidateCaseProgressStatusExcelDataAction"),this.valid=!1,this.excelData=o}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name)}),this.validationContext.addRule(new g.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof g.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(a=>a.name),newNames:[i.newName]}):i instanceof g.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,D.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class w0 extends g.wS{constructor(o,t,i,a,l){super(o,t,i,a,l,!0)}}class x0 extends g.ul{constructor(o,t,i,a=!1){super(o,t,a),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new g.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new w0("name","The caseprogressstatus name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class N0 extends Nt{constructor(o){super("CreateCaseProgressStatusAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new x0("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateCaseProgressStatus({input:this.input}).pipe((0,h.w)(o=>(0,ue.of)(o.data.created)))}}class A0 extends Nt{constructor(o){super("UpdateCaseProgressStatusesAction"),this.caseProgressStatuses=o}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.caseProgressStatuses,!0))}performAction(){this.response=this.businessProvider.data.userUpdateCaseProgressStatuses({input:{caseProgressStatuses:this.caseProgressStatuses}}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}class F0 extends Nt{constructor(o,t){super("UpdateCaseProgressStatusAction"),this.caseProgressStatus=o,this.caseProgressStatusId=t}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.caseProgressStatus,!0)).addRule(new g.xF("Id","Id should be a CUID and not null",this.caseProgressStatusId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateCaseProgressStatus({caseProgressStatusId:this.caseProgressStatusId,input:this.caseProgressStatus}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}let sn=(()=>{class s extends W.nH{constructor(t,i,a){super("NotificationService.CaseProgressStatusBusinessProviderService",t,a),this.data=i}createCaseProgressStatus(t){const i=new N0(t);return i.Do(this),i.response}updateCaseProgressStatus(t,i){const a=new F0(t,i);return a.Do(this),a.response}importCaseProgressStatuses(t){const i=new A0(t);return i.Do(this),i.response}validateCaseProgressStatusExcelData(t){const i=new y0(t);return i.Do(this),i.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(K.ed),e.LFG(z.q),e.LFG(W.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),P0=(()=>{class s extends W.nH{constructor(t,i,a){super("CaseProgressStatusService",a,t),this.businessProvider=i}createCaseProgressStatus(t){const i=Object.fromEntries(Object.entries(t).filter(([a,l])=>null!==l));return this.businessProvider.createCaseProgressStatus(i)}updateCaseProgressStatus(t,i){return this.businessProvider.updateCaseProgressStatus(t,i)}importCaseProgressStatuses(t){return this.businessProvider.importCaseProgressStatuses(t)}validateCaseProgressStatusExcelData(t){return this.businessProvider.validateCaseProgressStatusExcelData(t)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(sn,8),e.LFG(sn),e.LFG(K.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),Rs=(()=>{class s extends b.m1{constructor(t,i,a,l,d,ee){super({loading:!1,caseProgressStatuses:[],done:!1,searchQuery:"",formName:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=a,this.toast=l,this.formService=d,this.caseProgressStatusService=ee,this.errors$=this.select(c=>c.errors),this.loading$=this.select(c=>c.loading),this.done$=this.select(c=>c.done),this.item$=this.select(c=>c.item),this.caseProgressStatuses$=this.select(c=>c.caseProgressStatuses),this.paging$=this.select(c=>c.paging),this.searchQuery$=this.select(c=>c.searchQuery),this.formName$=this.select(c=>c.formName),this.actionResult$=this.select(this.item$,this.done$,(c,u)=>({item:c,done:u}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.caseProgressStatuses$,(c,u,n,r,m)=>({errors:c,loading:u,item:n,formName:r,caseProgressStatuses:m}),{debounce:!0}),this.input$=this.select(this.paging$,this.searchQuery$,(c,u)=>({limit:c.limit,skip:c.skip,name:u,total:c.total})),this.setFormName=this.updater((c,u)=>Object.assign(Object.assign({},c),{formName:u})),this.setItem=this.updater((c,u)=>Object.assign(Object.assign({},c),{item:u})),this.addNewCaseProgressStatus=this.updater((c,u)=>Object.assign(Object.assign({},c),{caseProgressStatuses:[...c.caseProgressStatuses,u]})),this.updateCaseProgressStatus=this.updater((c,u)=>Object.assign(Object.assign({},c),{caseProgressStatuses:c.caseProgressStatuses.map(n=>n.id===u.id?u:n)})),this.addCaseProgressStatuses=this.updater((c,u)=>Object.assign(Object.assign({},c),{caseProgressStatuses:c.caseProgressStatuses.concat(u)})),this.updateCaseProgressStatuses=this.updater((c,u)=>Object.assign(Object.assign({},c),{caseProgressStatuses:c.caseProgressStatuses.map(n=>u.find(m=>m.id===n.id)||n)})),this.setSearchQuery=this.updater((c,u)=>Object.assign(Object.assign({},c),{searchQuery:u})),this.loadCaseProgressStatusEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.data.userCaseProgressStatus({caseProgressStatusId:u}).pipe((0,b._b)(n=>{this.patchState({item:n.data.item,errors:n.errors,loading:!1})},n=>this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})))))),this.loadCaseProgressStatusesEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.input$),(0,h.w)(([u,n])=>this.data.userCaseProgressStatuses({input:n}).pipe((0,b._b)(r=>this.patchState({paging:{limit:n.limit,skip:n.skip,total:r.data.count.total},caseProgressStatuses:r.data.items,errors:r.errors,loading:!1}),r=>this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})))))),this.createCaseProgressStatusEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.caseProgressStatusService.createCaseProgressStatus(Object.assign({},u)).pipe((0,b._b)(n=>{this.addNewCaseProgressStatus(n),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:n,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},n=>{n.graphQLErrors?(this.toast.error(n.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})):(this.toast.error(n.Message),this.formService.setErrors(n.Data))}))))),this.updateCaseProgressStatusEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([u,n])=>this.caseProgressStatusService.updateCaseProgressStatus(u,u.id).pipe((0,b._b)(r=>{this.updateCaseProgressStatus(r),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:r,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},r=>{r.graphQLErrors?(this.toast.error(r.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})):(this.toast.error(r.Message),this.formService.setErrors(r.Data))}))))),this.deleteCaseProgressStatusEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([u,n])=>this.data.userDeleteCaseProgressStatus({caseProgressStatusId:n.id}).pipe((0,b._b)(r=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:r.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},r=>{r.graphQLErrors?(this.toast.error(r.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})):(this.toast.error(r.Message),this.formService.setErrors(r.Data))}))))),this.importExcelEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.caseProgressStatusService.importCaseProgressStatuses(u).pipe((0,de.K)(n=>{var r;return this.toast.error(null!==(r=n.Message)&&void 0!==r?r:"Failed to save",{duration:3e3}),q.E}),(0,y.b)(n=>{const r=JSON.parse(n.created),m=JSON.parse(n.updated),p=JSON.parse(n.failed),v=r.length+m.length+p.length;this.addCaseProgressStatuses(r),this.updateCaseProgressStatuses(m),this.toast.success(`${r.length} created, ${m.length} updated, ${p.length} failed of total ${v}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("caseProgressStatusId")?(this.route.snapshot.paramMap.get("caseProgressStatusId"),this.setFormName("caseProgressStatus_edit")):this.setFormName("caseProgressStatus_create")}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.caseProgressStatusService.validateCaseProgressStatusExcelData(t)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(z.q),e.LFG(O.F0),e.LFG(O.gz),e.LFG(X.F),e.LFG(Z.o),e.LFG(P0))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function I0(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.close.emit())})("formIsReady",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.caseProgressStatus)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let on=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"caseProgressStatus_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.caseProgressStatus=i.item})):t.formName&&t.formName.currentValue&&"caseProgressStatus_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadCaseProgressStatusEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.caseProgressStatus=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Rs),e.Y36(O.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-case-progress-status-form"]],inputs:{caseProgressStatus:"caseProgressStatus",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,I0,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[P.O5,te.M,P.Ov],encapsulation:2}),s})(),an=(()=>{class s{constructor(){this.autoHeight=!1,this.caseProgressStatuses=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[,{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var a;t.includes(null===(a=i.data)||void 0===a?void 0:a.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-case-progress-status-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(f.x,5),2&t){let a;e.iGM(a=e.CRH())&&(i.tableView=a.first)}},inputs:{autoHeight:"autoHeight",caseProgressStatuses:"caseProgressStatuses"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.caseProgressStatuses)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[f.x],encapsulation:2}),s})();function D0(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-case-progress-status-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","caseProgressStatus_edit")("formControl",t.formControl)("caseProgressStatus",t.caseProgressStatus)}}const M0=function(){return{}};function W0(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-case-progress-status-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","caseProgressStatus_create")("formControl",t.formControl)("caseProgressStatus",e.DdM(3,M0))}}function E0(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-case-progress-status-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(d.ref.close())}),e.qZA()}2&s&&e.Q6J("caseProgressStatuses",o.data.items)}let O0=(()=>{class s extends G.fS{constructor(t){super(),this.store=t,this.store.loadCaseProgressStatusesEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.caseProgressStatuses$.pipe((0,h.w)(i=>(0,D.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Rs))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","caseProgressStatus","send","close"],[1,"w-full","h-full","bg-white",3,"caseProgressStatuses","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,D0,2,3,"ng-template",null,1,e.W1O),e.YNc(3,W0,1,4,"ng-template",null,2,e.W1O),e.YNc(5,E0,1,1,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",d)("editTemplate",a)("createTemplate",l)("key",i.field.key)}},dependencies:[E.JJ,E.oH,H.$,on,an],encapsulation:2}),s})();function L0(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-case-progress-status-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","caseProgressStatus_edit")("caseProgressStatus",t.value)}}const $0=function(){return{}};function G0(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-case-progress-status-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","caseProgressStatus_create")("caseProgressStatus",e.DdM(2,$0))}function R0(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-case-progress-status-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(null==d.ref?null:d.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("caseProgressStatuses",t.items)}}let Q0=(()=>{class s extends pe{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","caseProgressStatus","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","caseProgressStatuses","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,L0,1,2,"ng-template",null,1,e.W1O),e.YNc(3,G0,1,3,"ng-template",null,2,e.W1O),e.YNc(5,R0,1,2,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[he,on,an],encapsulation:2}),s})(),V0=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[Rs],imports:[P.ez,U.F,E.UX,J.o,ae.u,$.P,j.t,me,k.h,se.G,G.X0.forChild({types:[{name:"case-progress-status-select",component:O0,wrappers:["form-field"]},{name:"case-progress-status-grid",component:Q0}]})]}),s})(),j0=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[V0]}),s})();class At extends W.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class U0 extends At{constructor(o){super("ValidateCaseStatusExcelDataAction"),this.valid=!1,this.excelData=o}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name)}),this.validationContext.addRule(new g.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof g.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(a=>a.name),newNames:[i.newName]}):i instanceof g.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,D.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class J0 extends g.wS{constructor(o,t,i,a,l){super(o,t,i,a,l,!0)}}class z0 extends g.ul{constructor(o,t,i,a=!1){super(o,t,a),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new g.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new J0("name","The casestatus name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class H0 extends At{constructor(o){super("CreateCaseStatusAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new z0("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateCaseStatus({input:this.input}).pipe((0,h.w)(o=>(0,ue.of)(o.data.created)))}}class q0 extends At{constructor(o){super("UpdateCaseStatusesAction"),this.caseStatuses=o}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.caseStatuses,!0))}performAction(){this.response=this.businessProvider.data.userUpdateCaseStatuses({input:{caseStatuses:this.caseStatuses}}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}class K0 extends At{constructor(o,t){super("UpdateCaseStatusAction"),this.caseStatus=o,this.caseStatusId=t}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.caseStatus,!0)).addRule(new g.xF("Id","Id should be a CUID and not null",this.caseStatusId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateCaseStatus({caseStatusId:this.caseStatusId,input:this.caseStatus}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}let rn=(()=>{class s extends W.nH{constructor(t,i,a){super("NotificationService.CaseStatusBusinessProviderService",t,a),this.data=i}createCaseStatus(t){const i=new H0(t);return i.Do(this),i.response}updateCaseStatus(t,i){const a=new K0(t,i);return a.Do(this),a.response}importCaseStatuses(t){const i=new q0(t);return i.Do(this),i.response}validateCaseStatusExcelData(t){const i=new U0(t);return i.Do(this),i.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(K.ed),e.LFG(z.q),e.LFG(W.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),Z0=(()=>{class s extends W.nH{constructor(t,i,a){super("CaseStatusService",a,t),this.businessProvider=i}createCaseStatus(t){const i=Object.fromEntries(Object.entries(t).filter(([a,l])=>null!==l));return this.businessProvider.createCaseStatus(i)}updateCaseStatus(t,i){return this.businessProvider.updateCaseStatus(t,i)}importCaseStatuses(t){return this.businessProvider.importCaseStatuses(t)}validateCaseStatusExcelData(t){return this.businessProvider.validateCaseStatusExcelData(t)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(rn,8),e.LFG(rn),e.LFG(K.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),Qs=(()=>{class s extends b.m1{constructor(t,i,a,l,d,ee){super({loading:!1,caseStatuses:[],done:!1,searchQuery:"",formName:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=a,this.toast=l,this.formService=d,this.caseStatusService=ee,this.errors$=this.select(c=>c.errors),this.loading$=this.select(c=>c.loading),this.done$=this.select(c=>c.done),this.item$=this.select(c=>c.item),this.caseStatuses$=this.select(c=>c.caseStatuses),this.paging$=this.select(c=>c.paging),this.searchQuery$=this.select(c=>c.searchQuery),this.formName$=this.select(c=>c.formName),this.actionResult$=this.select(this.item$,this.done$,(c,u)=>({item:c,done:u}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.caseStatuses$,(c,u,n,r,m)=>({errors:c,loading:u,item:n,formName:r,caseStatuses:m}),{debounce:!0}),this.input$=this.select(this.paging$,this.searchQuery$,(c,u)=>({limit:c.limit,skip:c.skip,name:u,total:c.total})),this.setFormName=this.updater((c,u)=>Object.assign(Object.assign({},c),{formName:u})),this.setItem=this.updater((c,u)=>Object.assign(Object.assign({},c),{item:u})),this.addNewCaseStatus=this.updater((c,u)=>Object.assign(Object.assign({},c),{caseStatuses:[...c.caseStatuses,u]})),this.updateCaseStatus=this.updater((c,u)=>Object.assign(Object.assign({},c),{caseStatuses:c.caseStatuses.map(n=>n.id===u.id?u:n)})),this.addCaseStatuses=this.updater((c,u)=>Object.assign(Object.assign({},c),{caseStatuses:c.caseStatuses.concat(u)})),this.updateCaseStatuses=this.updater((c,u)=>Object.assign(Object.assign({},c),{caseStatuses:c.caseStatuses.map(n=>u.find(m=>m.id===n.id)||n)})),this.setSearchQuery=this.updater((c,u)=>Object.assign(Object.assign({},c),{searchQuery:u})),this.loadCaseStatusEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.data.userCaseStatus({caseStatusId:u}).pipe((0,b._b)(n=>{this.patchState({item:n.data.item,errors:n.errors,loading:!1})},n=>this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})))))),this.loadCaseStatusesEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.input$),(0,h.w)(([u,n])=>this.data.userCaseStatuses({input:n}).pipe((0,b._b)(r=>this.patchState({paging:{limit:n.limit,skip:n.skip,total:r.data.count.total},caseStatuses:r.data.items,errors:r.errors,loading:!1}),r=>this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})))))),this.createCaseStatusEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.caseStatusService.createCaseStatus(Object.assign({},u)).pipe((0,b._b)(n=>{this.addNewCaseStatus(n),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:n,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},n=>{n.graphQLErrors?(this.toast.error(n.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})):(this.toast.error(n.Message),this.formService.setErrors(n.Data))}))))),this.updateCaseStatusEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([u,n])=>this.caseStatusService.updateCaseStatus(u,u.id).pipe((0,b._b)(r=>{this.updateCaseStatus(r),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:r,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},r=>{r.graphQLErrors?(this.toast.error(r.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})):(this.toast.error(r.Message),this.formService.setErrors(r.Data))}))))),this.deleteCaseStatusEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([u,n])=>this.data.userDeleteCaseStatus({caseStatusId:n.id}).pipe((0,b._b)(r=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:r.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},r=>{r.graphQLErrors?(this.toast.error(r.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})):(this.toast.error(r.Message),this.formService.setErrors(r.Data))}))))),this.importExcelEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.caseStatusService.importCaseStatuses(u).pipe((0,de.K)(n=>{var r;return this.toast.error(null!==(r=n.Message)&&void 0!==r?r:"Failed to save",{duration:3e3}),q.E}),(0,y.b)(n=>{const r=JSON.parse(n.created),m=JSON.parse(n.updated),p=JSON.parse(n.failed),v=r.length+m.length+p.length;this.addCaseStatuses(r),this.updateCaseStatuses(m),this.toast.success(`${r.length} created, ${m.length} updated, ${p.length} failed of total ${v}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("caseStatusId")?(this.route.snapshot.paramMap.get("caseStatusId"),this.setFormName("caseStatus_edit")):this.setFormName("caseStatus_create")}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.caseStatusService.validateCaseStatusExcelData(t)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(z.q),e.LFG(O.F0),e.LFG(O.gz),e.LFG(X.F),e.LFG(Z.o),e.LFG(Z0))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function B0(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.close.emit())})("formIsReady",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.caseStatus)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let nn=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"caseStatus_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.caseStatus=i.item})):t.formName&&t.formName.currentValue&&"caseStatus_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadCaseStatusEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.caseStatus=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Qs),e.Y36(O.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-case-status-form"]],inputs:{caseStatus:"caseStatus",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,B0,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[P.O5,te.M,P.Ov],encapsulation:2}),s})(),ln=(()=>{class s{constructor(){this.autoHeight=!1,this.caseStatuses=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[,{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{headerName:"Order Index",field:"orderIndex",filter:"agNumberColumnFilter",aggFunc:"sum"},{field:"color",filter:"agTextColumnFilter"},{headerName:"Is Default",field:"isDefault",filter:"agSetColumnFilter",cellRenderer:"checkboxRenderer"},{headerName:"Ticker Date",field:"tickerDate",filter:"agNumberColumnFilter",aggFunc:"sum"},{headerName:"Max Ticker Date",field:"maxTickerDate",filter:"agNumberColumnFilter",aggFunc:"sum"},{headerName:"Move Docs",field:"moveDocs",filter:"agSetColumnFilter",cellRenderer:"checkboxRenderer"},{field:"dateCreated",filter:"agDateColumnFilter"},{headerName:"Removed",field:"removed",filter:"agSetColumnFilter",cellRenderer:"checkboxRenderer"},{field:"createdBy",filter:"agTextColumnFilter"},{field:"migSource",filter:"agTextColumnFilter"},{field:"entity",filter:"agTextColumnFilter"},{field:"temp",filter:"agTextColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var a;t.includes(null===(a=i.data)||void 0===a?void 0:a.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-case-status-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(f.x,5),2&t){let a;e.iGM(a=e.CRH())&&(i.tableView=a.first)}},inputs:{autoHeight:"autoHeight",caseStatuses:"caseStatuses"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.caseStatuses)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[f.x],encapsulation:2}),s})();function k0(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-case-status-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","caseStatus_edit")("formControl",t.formControl)("caseStatus",t.caseStatus)}}const Y0=function(){return{}};function X0(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-case-status-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","caseStatus_create")("formControl",t.formControl)("caseStatus",e.DdM(3,Y0))}}function eT(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-case-status-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(d.ref.close())}),e.qZA()}2&s&&e.Q6J("caseStatuses",o.data.items)}let tT=(()=>{class s extends G.fS{constructor(t){super(),this.store=t,this.store.loadCaseStatusesEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.caseStatuses$.pipe((0,h.w)(i=>(0,D.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Qs))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","caseStatus","send","close"],[1,"w-full","h-full","bg-white",3,"caseStatuses","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,k0,2,3,"ng-template",null,1,e.W1O),e.YNc(3,X0,1,4,"ng-template",null,2,e.W1O),e.YNc(5,eT,1,1,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",d)("editTemplate",a)("createTemplate",l)("key",i.field.key)}},dependencies:[E.JJ,E.oH,H.$,nn,ln],encapsulation:2}),s})();function iT(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-case-status-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","caseStatus_edit")("caseStatus",t.value)}}const sT=function(){return{}};function oT(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-case-status-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","caseStatus_create")("caseStatus",e.DdM(2,sT))}function aT(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-case-status-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(null==d.ref?null:d.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("caseStatuses",t.items)}}let rT=(()=>{class s extends pe{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","caseStatus","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","caseStatuses","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,iT,1,2,"ng-template",null,1,e.W1O),e.YNc(3,oT,1,3,"ng-template",null,2,e.W1O),e.YNc(5,aT,1,2,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[he,nn,ln],encapsulation:2}),s})(),nT=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[Qs],imports:[P.ez,U.F,E.UX,J.o,ae.u,$.P,j.t,me,k.h,se.G,G.X0.forChild({types:[{name:"case-status-select",component:tT,wrappers:["form-field"]},{name:"case-status-grid",component:rT}]})]}),s})(),lT=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[nT]}),s})();class Ft extends W.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class cT extends Ft{constructor(o){super("ValidateCaseTypeExcelDataAction"),this.valid=!1,this.excelData=o}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name)}),this.validationContext.addRule(new g.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof g.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(a=>a.name),newNames:[i.newName]}):i instanceof g.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,D.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class dT extends g.wS{constructor(o,t,i,a,l){super(o,t,i,a,l,!0)}}class uT extends g.ul{constructor(o,t,i,a=!1){super(o,t,a),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new g.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new dT("name","The casetype name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class mT extends Ft{constructor(o){super("CreateCaseTypeAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new uT("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateCaseType({input:this.input}).pipe((0,h.w)(o=>(0,ue.of)(o.data.created)))}}class pT extends Ft{constructor(o){super("UpdateCaseTypesAction"),this.caseTypes=o}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.caseTypes,!0))}performAction(){this.response=this.businessProvider.data.userUpdateCaseTypes({input:{caseTypes:this.caseTypes}}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}class hT extends Ft{constructor(o,t){super("UpdateCaseTypeAction"),this.caseType=o,this.caseTypeId=t}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.caseType,!0)).addRule(new g.xF("Id","Id should be a CUID and not null",this.caseTypeId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateCaseType({caseTypeId:this.caseTypeId,input:this.caseType}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}let cn=(()=>{class s extends W.nH{constructor(t,i,a){super("NotificationService.CaseTypeBusinessProviderService",t,a),this.data=i}createCaseType(t){const i=new mT(t);return i.Do(this),i.response}updateCaseType(t,i){const a=new hT(t,i);return a.Do(this),a.response}importCaseTypes(t){const i=new pT(t);return i.Do(this),i.response}validateCaseTypeExcelData(t){const i=new cT(t);return i.Do(this),i.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(K.ed),e.LFG(z.q),e.LFG(W.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),fT=(()=>{class s extends W.nH{constructor(t,i,a){super("CaseTypeService",a,t),this.businessProvider=i}createCaseType(t){const i=Object.fromEntries(Object.entries(t).filter(([a,l])=>null!==l));return this.businessProvider.createCaseType(i)}updateCaseType(t,i){return this.businessProvider.updateCaseType(t,i)}importCaseTypes(t){return this.businessProvider.importCaseTypes(t)}validateCaseTypeExcelData(t){return this.businessProvider.validateCaseTypeExcelData(t)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(cn,8),e.LFG(cn),e.LFG(K.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),Vs=(()=>{class s extends b.m1{constructor(t,i,a,l,d,ee){super({loading:!1,caseTypes:[],done:!1,searchQuery:"",formName:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=a,this.toast=l,this.formService=d,this.caseTypeService=ee,this.errors$=this.select(c=>c.errors),this.loading$=this.select(c=>c.loading),this.done$=this.select(c=>c.done),this.item$=this.select(c=>c.item),this.caseTypes$=this.select(c=>c.caseTypes),this.paging$=this.select(c=>c.paging),this.searchQuery$=this.select(c=>c.searchQuery),this.formName$=this.select(c=>c.formName),this.actionResult$=this.select(this.item$,this.done$,(c,u)=>({item:c,done:u}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.caseTypes$,(c,u,n,r,m)=>({errors:c,loading:u,item:n,formName:r,caseTypes:m}),{debounce:!0}),this.input$=this.select(this.paging$,this.searchQuery$,(c,u)=>({limit:c.limit,skip:c.skip,name:u,total:c.total})),this.setFormName=this.updater((c,u)=>Object.assign(Object.assign({},c),{formName:u})),this.setItem=this.updater((c,u)=>Object.assign(Object.assign({},c),{item:u})),this.addNewCaseType=this.updater((c,u)=>Object.assign(Object.assign({},c),{caseTypes:[...c.caseTypes,u]})),this.updateCaseType=this.updater((c,u)=>Object.assign(Object.assign({},c),{caseTypes:c.caseTypes.map(n=>n.id===u.id?u:n)})),this.addCaseTypes=this.updater((c,u)=>Object.assign(Object.assign({},c),{caseTypes:c.caseTypes.concat(u)})),this.updateCaseTypes=this.updater((c,u)=>Object.assign(Object.assign({},c),{caseTypes:c.caseTypes.map(n=>u.find(m=>m.id===n.id)||n)})),this.setSearchQuery=this.updater((c,u)=>Object.assign(Object.assign({},c),{searchQuery:u})),this.loadCaseTypeEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.data.userCaseType({caseTypeId:u}).pipe((0,b._b)(n=>{this.patchState({item:n.data.item,errors:n.errors,loading:!1})},n=>this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})))))),this.loadCaseTypesEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.input$),(0,h.w)(([u,n])=>this.data.userCaseTypes({input:n}).pipe((0,b._b)(r=>this.patchState({paging:{limit:n.limit,skip:n.skip,total:r.data.count.total},caseTypes:r.data.items,errors:r.errors,loading:!1}),r=>this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})))))),this.createCaseTypeEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.caseTypeService.createCaseType(Object.assign({},u)).pipe((0,b._b)(n=>{this.addNewCaseType(n),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:n,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},n=>{n.graphQLErrors?(this.toast.error(n.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})):(this.toast.error(n.Message),this.formService.setErrors(n.Data))}))))),this.updateCaseTypeEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([u,n])=>this.caseTypeService.updateCaseType(u,u.id).pipe((0,b._b)(r=>{this.updateCaseType(r),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:r,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},r=>{r.graphQLErrors?(this.toast.error(r.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})):(this.toast.error(r.Message),this.formService.setErrors(r.Data))}))))),this.deleteCaseTypeEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([u,n])=>this.data.userDeleteCaseType({caseTypeId:n.id}).pipe((0,b._b)(r=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:r.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},r=>{r.graphQLErrors?(this.toast.error(r.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})):(this.toast.error(r.Message),this.formService.setErrors(r.Data))}))))),this.importExcelEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.caseTypeService.importCaseTypes(u).pipe((0,de.K)(n=>{var r;return this.toast.error(null!==(r=n.Message)&&void 0!==r?r:"Failed to save",{duration:3e3}),q.E}),(0,y.b)(n=>{const r=JSON.parse(n.created),m=JSON.parse(n.updated),p=JSON.parse(n.failed),v=r.length+m.length+p.length;this.addCaseTypes(r),this.updateCaseTypes(m),this.toast.success(`${r.length} created, ${m.length} updated, ${p.length} failed of total ${v}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("caseTypeId")?(this.route.snapshot.paramMap.get("caseTypeId"),this.setFormName("caseType_edit")):this.setFormName("caseType_create")}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.caseTypeService.validateCaseTypeExcelData(t)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(z.q),e.LFG(O.F0),e.LFG(O.gz),e.LFG(X.F),e.LFG(Z.o),e.LFG(fT))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function _T(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.close.emit())})("formIsReady",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.caseType)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let dn=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"caseType_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.caseType=i.item})):t.formName&&t.formName.currentValue&&"caseType_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadCaseTypeEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.caseType=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Vs),e.Y36(O.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-case-type-form"]],inputs:{caseType:"caseType",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,_T,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[P.O5,te.M,P.Ov],encapsulation:2}),s})(),un=(()=>{class s{constructor(){this.autoHeight=!1,this.caseTypes=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[,{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{headerName:"Order Index",field:"orderIndex",valueFormatter:t=>{var i;return(0,_.oBD)(null===(i=t.data)||void 0===i?void 0:i.orderIndex,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{field:"dateCreated",filter:"agDateColumnFilter"},{headerName:"Removed",field:"removed",filter:"agSetColumnFilter",cellRenderer:"checkboxRenderer"},{field:"migSource",filter:"agTextColumnFilter"},{field:"entity",filter:"agTextColumnFilter"},{field:"temp",filter:"agTextColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var a;t.includes(null===(a=i.data)||void 0===a?void 0:a.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-case-type-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(f.x,5),2&t){let a;e.iGM(a=e.CRH())&&(i.tableView=a.first)}},inputs:{autoHeight:"autoHeight",caseTypes:"caseTypes"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.caseTypes)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[f.x],encapsulation:2}),s})();function gT(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-case-type-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","caseType_edit")("formControl",t.formControl)("caseType",t.caseType)}}const vT=function(){return{}};function CT(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-case-type-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","caseType_create")("formControl",t.formControl)("caseType",e.DdM(3,vT))}}function ST(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-case-type-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(d.ref.close())}),e.qZA()}2&s&&e.Q6J("caseTypes",o.data.items)}let bT=(()=>{class s extends G.fS{constructor(t){super(),this.store=t,this.store.loadCaseTypesEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.caseTypes$.pipe((0,h.w)(i=>(0,D.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Vs))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","caseType","send","close"],[1,"w-full","h-full","bg-white",3,"caseTypes","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,gT,2,3,"ng-template",null,1,e.W1O),e.YNc(3,CT,1,4,"ng-template",null,2,e.W1O),e.YNc(5,ST,1,1,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",d)("editTemplate",a)("createTemplate",l)("key",i.field.key)}},dependencies:[E.JJ,E.oH,H.$,dn,un],encapsulation:2}),s})();function TT(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-case-type-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","caseType_edit")("caseType",t.value)}}const yT=function(){return{}};function wT(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-case-type-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","caseType_create")("caseType",e.DdM(2,yT))}function xT(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-case-type-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(null==d.ref?null:d.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("caseTypes",t.items)}}let NT=(()=>{class s extends pe{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","caseType","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","caseTypes","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,TT,1,2,"ng-template",null,1,e.W1O),e.YNc(3,wT,1,3,"ng-template",null,2,e.W1O),e.YNc(5,xT,1,2,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[he,dn,un],encapsulation:2}),s})(),AT=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[Vs],imports:[P.ez,U.F,E.UX,J.o,ae.u,$.P,j.t,me,k.h,se.G,G.X0.forChild({types:[{name:"case-type-select",component:bT,wrappers:["form-field"]},{name:"case-type-grid",component:NT}]})]}),s})(),FT=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[AT]}),s})();class Pt extends W.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class PT extends Pt{constructor(o){super("ValidateCategoryExcelDataAction"),this.valid=!1,this.excelData=o}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name)}),this.validationContext.addRule(new g.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof g.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(a=>a.name),newNames:[i.newName]}):i instanceof g.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,D.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class IT extends g.wS{constructor(o,t,i,a,l){super(o,t,i,a,l,!0)}}class DT extends g.ul{constructor(o,t,i,a=!1){super(o,t,a),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new g.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new IT("name","The category name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class MT extends Pt{constructor(o){super("CreateCategoryAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new DT("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateCategory({input:this.input}).pipe((0,h.w)(o=>(0,ue.of)(o.data.created)))}}class WT extends Pt{constructor(o){super("UpdateCategoriesAction"),this.categories=o}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.categories,!0))}performAction(){this.response=this.businessProvider.data.userUpdateCategories({input:{categories:this.categories}}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}class ET extends Pt{constructor(o,t){super("UpdateCategoryAction"),this.category=o,this.categoryId=t}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.category,!0)).addRule(new g.xF("Id","Id should be a CUID and not null",this.categoryId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateCategory({categoryId:this.categoryId,input:this.category}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}let mn=(()=>{class s extends W.nH{constructor(t,i,a){super("NotificationService.CategoryBusinessProviderService",t,a),this.data=i}createCategory(t){const i=new MT(t);return i.Do(this),i.response}updateCategory(t,i){const a=new ET(t,i);return a.Do(this),a.response}importCategories(t){const i=new WT(t);return i.Do(this),i.response}validateCategoryExcelData(t){const i=new PT(t);return i.Do(this),i.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(K.ed),e.LFG(z.q),e.LFG(W.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),OT=(()=>{class s extends W.nH{constructor(t,i,a){super("CategoryService",a,t),this.businessProvider=i}createCategory(t){const i=Object.fromEntries(Object.entries(t).filter(([a,l])=>null!==l));return this.businessProvider.createCategory(i)}updateCategory(t,i){return this.businessProvider.updateCategory(t,i)}importCategories(t){return this.businessProvider.importCategories(t)}validateCategoryExcelData(t){return this.businessProvider.validateCategoryExcelData(t)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(mn,8),e.LFG(mn),e.LFG(K.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),js=(()=>{class s extends b.m1{constructor(t,i,a,l,d,ee){super({loading:!1,categories:[],done:!1,searchQuery:"",formName:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=a,this.toast=l,this.formService=d,this.categoryService=ee,this.errors$=this.select(c=>c.errors),this.loading$=this.select(c=>c.loading),this.done$=this.select(c=>c.done),this.item$=this.select(c=>c.item),this.categories$=this.select(c=>c.categories),this.paging$=this.select(c=>c.paging),this.searchQuery$=this.select(c=>c.searchQuery),this.formName$=this.select(c=>c.formName),this.actionResult$=this.select(this.item$,this.done$,(c,u)=>({item:c,done:u}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.categories$,(c,u,n,r,m)=>({errors:c,loading:u,item:n,formName:r,categories:m}),{debounce:!0}),this.input$=this.select(this.paging$,this.searchQuery$,(c,u)=>({limit:c.limit,skip:c.skip,name:u,total:c.total})),this.setFormName=this.updater((c,u)=>Object.assign(Object.assign({},c),{formName:u})),this.setItem=this.updater((c,u)=>Object.assign(Object.assign({},c),{item:u})),this.addNewCategory=this.updater((c,u)=>Object.assign(Object.assign({},c),{categories:[...c.categories,u]})),this.updateCategory=this.updater((c,u)=>Object.assign(Object.assign({},c),{categories:c.categories.map(n=>n.id===u.id?u:n)})),this.addCategories=this.updater((c,u)=>Object.assign(Object.assign({},c),{categories:c.categories.concat(u)})),this.updateCategories=this.updater((c,u)=>Object.assign(Object.assign({},c),{categories:c.categories.map(n=>u.find(m=>m.id===n.id)||n)})),this.setSearchQuery=this.updater((c,u)=>Object.assign(Object.assign({},c),{searchQuery:u})),this.loadCategoryEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.data.userCategory({categoryId:u}).pipe((0,b._b)(n=>{this.patchState({item:n.data.item,errors:n.errors,loading:!1})},n=>this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})))))),this.loadCategoriesEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.input$),(0,h.w)(([u,n])=>this.data.userCategories({input:n}).pipe((0,b._b)(r=>this.patchState({paging:{limit:n.limit,skip:n.skip,total:r.data.count.total},categories:r.data.items,errors:r.errors,loading:!1}),r=>this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})))))),this.createCategoryEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.categoryService.createCategory(Object.assign({},u)).pipe((0,b._b)(n=>{this.addNewCategory(n),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:n,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},n=>{n.graphQLErrors?(this.toast.error(n.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})):(this.toast.error(n.Message),this.formService.setErrors(n.Data))}))))),this.updateCategoryEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([u,n])=>this.categoryService.updateCategory(u,u.id).pipe((0,b._b)(r=>{this.updateCategory(r),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:r,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},r=>{r.graphQLErrors?(this.toast.error(r.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})):(this.toast.error(r.Message),this.formService.setErrors(r.Data))}))))),this.deleteCategoryEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([u,n])=>this.data.userDeleteCategory({categoryId:n.id}).pipe((0,b._b)(r=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:r.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},r=>{r.graphQLErrors?(this.toast.error(r.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})):(this.toast.error(r.Message),this.formService.setErrors(r.Data))}))))),this.importExcelEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.categoryService.importCategories(u).pipe((0,de.K)(n=>{var r;return this.toast.error(null!==(r=n.Message)&&void 0!==r?r:"Failed to save",{duration:3e3}),q.E}),(0,y.b)(n=>{const r=JSON.parse(n.created),m=JSON.parse(n.updated),p=JSON.parse(n.failed),v=r.length+m.length+p.length;this.addCategories(r),this.updateCategories(m),this.toast.success(`${r.length} created, ${m.length} updated, ${p.length} failed of total ${v}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("categoryId")?(this.route.snapshot.paramMap.get("categoryId"),this.setFormName("category_edit")):this.setFormName("category_create")}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.categoryService.validateCategoryExcelData(t)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(z.q),e.LFG(O.F0),e.LFG(O.gz),e.LFG(X.F),e.LFG(Z.o),e.LFG(OT))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function LT(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.close.emit())})("formIsReady",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.category)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let pn=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"category_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.category=i.item})):t.formName&&t.formName.currentValue&&"category_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadCategoryEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.category=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(js),e.Y36(O.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-category-form"]],inputs:{category:"category",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,LT,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[P.O5,te.M,P.Ov],encapsulation:2}),s})(),hn=(()=>{class s{constructor(){this.autoHeight=!1,this.categories=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[,{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var a;t.includes(null===(a=i.data)||void 0===a?void 0:a.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-category-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(f.x,5),2&t){let a;e.iGM(a=e.CRH())&&(i.tableView=a.first)}},inputs:{autoHeight:"autoHeight",categories:"categories"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.categories)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[f.x],encapsulation:2}),s})();function $T(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-category-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","category_edit")("formControl",t.formControl)("category",t.category)}}const GT=function(){return{}};function RT(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-category-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","category_create")("formControl",t.formControl)("category",e.DdM(3,GT))}}function QT(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-category-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(d.ref.close())}),e.qZA()}2&s&&e.Q6J("categories",o.data.items)}let VT=(()=>{class s extends G.fS{constructor(t){super(),this.store=t,this.store.loadCategoriesEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.categories$.pipe((0,h.w)(i=>(0,D.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(js))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","category","send","close"],[1,"w-full","h-full","bg-white",3,"categories","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,$T,2,3,"ng-template",null,1,e.W1O),e.YNc(3,RT,1,4,"ng-template",null,2,e.W1O),e.YNc(5,QT,1,1,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",d)("editTemplate",a)("createTemplate",l)("key",i.field.key)}},dependencies:[E.JJ,E.oH,H.$,pn,hn],encapsulation:2}),s})();function jT(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-category-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","category_edit")("category",t.value)}}const UT=function(){return{}};function JT(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-category-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","category_create")("category",e.DdM(2,UT))}function zT(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-category-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(null==d.ref?null:d.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("categories",t.items)}}let HT=(()=>{class s extends pe{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","category","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","categories","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,jT,1,2,"ng-template",null,1,e.W1O),e.YNc(3,JT,1,3,"ng-template",null,2,e.W1O),e.YNc(5,zT,1,2,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[he,pn,hn],encapsulation:2}),s})(),qT=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[js],imports:[P.ez,U.F,E.UX,J.o,ae.u,$.P,j.t,me,k.h,se.G,G.X0.forChild({types:[{name:"category-select",component:VT,wrappers:["form-field"]},{name:"category-grid",component:HT}]})]}),s})(),KT=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[qT]}),s})();class It extends W.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class ZT extends It{constructor(o,t,i,a,l){super("ValidateClaimExcelDataAction"),this.valid=!1,this.excelData=o,this.priorAuthorizationRequests=t,this.claims=i,this.explanationOfPayments=a,this.patients=l}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name),this.validationContext.addRule(new g.mi(`priorAuthorizationRequestName_${i}_is_valid}`,"Prior Authorization Request Is Not Valid","priorAuthorizationRequest.name",t.priorAuthorizationRequest,this.priorAuthorizationRequests,!0)),this.validationContext.addRule(new g.mi(`claimName_${i}_is_valid}`,"Claim Is Not Valid","claim.name",t.claim,this.claims,!0)),this.validationContext.addRule(new g.mi(`explanationOfPaymentName_${i}_is_valid}`,"Explanation of Payment Is Not Valid","explanationOfPayment.name",t.explanationOfPayment,this.explanationOfPayments,!0)),this.validationContext.addRule(new g.mi(`patientName_${i}_is_valid}`,"Patient Is Not Valid","patient.name",t.patient,this.patients,!0))}),this.validationContext.addRule(new g.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof g.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(a=>a.name),newNames:[i.newName]}):i instanceof g.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,D.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class BT extends g.wS{constructor(o,t,i,a,l){super(o,t,i,a,l,!0)}}class kT extends g.ul{constructor(o,t,i,a=!1){super(o,t,a),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new g.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new BT("name","The claim name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class YT extends It{constructor(o){super("CreateClaimAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new kT("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateClaim({input:this.input}).pipe((0,h.w)(o=>(0,ue.of)(o.data.created)))}}class XT extends It{constructor(o){super("UpdateClaimsAction"),this.claims=o}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.claims,!0))}performAction(){this.response=this.businessProvider.data.userUpdateClaims({input:{claims:this.claims}}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}class ey extends It{constructor(o,t){super("UpdateClaimAction"),this.claim=o,this.claimId=t}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.claim,!0)).addRule(new g.xF("Id","Id should be a CUID and not null",this.claimId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateClaim({claimId:this.claimId,input:this.claim}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}let fn=(()=>{class s extends W.nH{constructor(t,i,a){super("NotificationService.ClaimBusinessProviderService",t,a),this.data=i}createClaim(t){const i=new YT(t);return i.Do(this),i.response}updateClaim(t,i){const a=new ey(t,i);return a.Do(this),a.response}importClaims(t){const i=new XT(t);return i.Do(this),i.response}validateClaimExcelData(t,i,a,l,d){const ee=new ZT(t,i,a,l,d);return ee.Do(this),ee.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(K.ed),e.LFG(z.q),e.LFG(W.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),ty=(()=>{class s extends W.nH{constructor(t,i,a){super("ClaimService",a,t),this.businessProvider=i}createClaim(t){const i=Object.fromEntries(Object.entries(t).filter(([a,l])=>null!==l));return this.businessProvider.createClaim(i)}updateClaim(t,i){return this.businessProvider.updateClaim(t,i)}importClaims(t){return this.businessProvider.importClaims(t)}validateClaimExcelData(t,i,a,l,d){return this.businessProvider.validateClaimExcelData(t,i,a,l,d)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(fn,8),e.LFG(fn),e.LFG(K.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),Us=(()=>{class s extends b.m1{constructor(t,i,a,l,d,ee){if(super({loading:!1,claims:[],done:!1,searchQuery:"",formName:void 0,priorAuthorizationRequestId:void 0,claimId:void 0,explanationOfPaymentId:void 0,patientId:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=a,this.toast=l,this.formService=d,this.claimService=ee,this.errors$=this.select(r=>r.errors),this.loading$=this.select(r=>r.loading),this.done$=this.select(r=>r.done),this.item$=this.select(r=>r.item),this.claims$=this.select(r=>r.claims),this.priorAuthorizationRequests$=this.select(r=>r.priorAuthorizationRequests||[]),this.documents$=this.select(r=>r.documents||[]),this.patients$=this.select(r=>r.patients||[]),this.priorAuthorizationRequestId$=this.select(r=>r.priorAuthorizationRequestId),this.claimId$=this.select(r=>r.claimId),this.explanationOfPaymentId$=this.select(r=>r.explanationOfPaymentId),this.patientId$=this.select(r=>r.patientId),this.paging$=this.select(r=>r.paging),this.searchQuery$=this.select(r=>r.searchQuery),this.formName$=this.select(r=>r.formName),this.actionResult$=this.select(this.item$,this.done$,(r,m)=>({item:r,done:m}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.claims$,this.priorAuthorizationRequests$,this.documents$,this.patients$,(r,m,p,v,I,B,_e,Ne)=>({errors:r,loading:m,item:p,formName:v,claims:I,priorAuthorizationRequests:B,documents:_e,patients:Ne}),{debounce:!0}),this.input$=this.select(this.paging$,this.priorAuthorizationRequestId$,this.claimId$,this.explanationOfPaymentId$,this.patientId$,this.searchQuery$,(r,m,p,v,I,B)=>({limit:r.limit,skip:r.skip,name:B,priorAuthorizationRequestId:m,claimId:p,explanationOfPaymentId:v,patientId:I,total:r.total})),this.setFormName=this.updater((r,m)=>Object.assign(Object.assign({},r),{formName:m})),this.setPriorAuthorizationRequestId=this.updater((r,m)=>Object.assign(Object.assign({},r),{priorAuthorizationRequestId:m})),this.setClaimId=this.updater((r,m)=>Object.assign(Object.assign({},r),{claimId:m})),this.setExplanationOfPaymentId=this.updater((r,m)=>Object.assign(Object.assign({},r),{explanationOfPaymentId:m})),this.setPatientId=this.updater((r,m)=>Object.assign(Object.assign({},r),{patientId:m})),this.filterPriorAuthorizationRequests=r=>this.data.userSelectPriorAuthorizationRequests({input:{name:r}}).pipe((0,b._b)(m=>{let p=m.data.items;return this.patchState({priorAuthorizationRequests:p}),p},m=>this.patchState({errors:m.graphQLErrors?m.graphQLErrors:m})),(0,fe.U)(m=>m.data.items)),this.filterDocuments=r=>this.data.userSelectDocuments({input:{name:r}}).pipe((0,b._b)(m=>{let p=m.data.items;return this.patchState({documents:p}),p},m=>this.patchState({errors:m.graphQLErrors?m.graphQLErrors:m})),(0,fe.U)(m=>m.data.items)),this.filterPatients=r=>this.data.userSelectPatients({input:{name:r}}).pipe((0,b._b)(m=>{let p=m.data.items;return this.patchState({patients:p}),p},m=>this.patchState({errors:m.graphQLErrors?m.graphQLErrors:m})),(0,fe.U)(m=>m.data.items)),this.addPriorAuthorizationRequest=this.updater((r,m)=>Object.assign(Object.assign({},r),{priorAuthorizationRequests:r.priorAuthorizationRequests.concat(m)})),this.addDocument=this.updater((r,m)=>Object.assign(Object.assign({},r),{documents:r.documents.concat(m)})),this.addPatient=this.updater((r,m)=>Object.assign(Object.assign({},r),{patients:r.patients.concat(m)})),this.setItem=this.updater((r,m)=>Object.assign(Object.assign({},r),{item:m})),this.addNewClaim=this.updater((r,m)=>Object.assign(Object.assign({},r),{claims:[...r.claims,m]})),this.updateClaim=this.updater((r,m)=>Object.assign(Object.assign({},r),{claims:r.claims.map(p=>p.id===m.id?m:p)})),this.addClaims=this.updater((r,m)=>Object.assign(Object.assign({},r),{claims:r.claims.concat(m)})),this.updateClaims=this.updater((r,m)=>Object.assign(Object.assign({},r),{claims:r.claims.map(p=>m.find(I=>I.id===p.id)||p)})),this.setSearchQuery=this.updater((r,m)=>Object.assign(Object.assign({},r),{searchQuery:m})),this.loadClaimEffect=this.effect(r=>r.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(m=>this.data.userClaim({claimId:m}).pipe((0,b._b)(p=>{this.patchState({item:p.data.item,errors:p.errors,loading:!1})},p=>this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})))))),this.loadClaimsEffect=this.effect(r=>r.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.input$),(0,h.w)(([m,p])=>this.data.userClaims({input:p}).pipe((0,b._b)(v=>this.patchState({paging:{limit:p.limit,skip:p.skip,total:v.data.count.total},claims:v.data.items,errors:v.errors,loading:!1}),v=>this.patchState({loading:!1,errors:v.graphQLErrors?v.graphQLErrors:v})))))),this.createClaimEffect=this.effect(r=>r.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(m=>this.claimService.createClaim(Object.assign({},m)).pipe((0,b._b)(p=>{this.addNewClaim(p),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:p,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},p=>{p.graphQLErrors?(this.toast.error(p.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})):(this.toast.error(p.Message),this.formService.setErrors(p.Data))}))))),this.updateClaimEffect=this.effect(r=>r.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([m,p])=>this.claimService.updateClaim(m,m.id).pipe((0,b._b)(v=>{this.updateClaim(v),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:v,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},v=>{v.graphQLErrors?(this.toast.error(v.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:v.graphQLErrors?v.graphQLErrors:v})):(this.toast.error(v.Message),this.formService.setErrors(v.Data))}))))),this.deleteClaimEffect=this.effect(r=>r.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([m,p])=>this.data.userDeleteClaim({claimId:p.id}).pipe((0,b._b)(v=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:v.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},v=>{v.graphQLErrors?(this.toast.error(v.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:v.graphQLErrors?v.graphQLErrors:v})):(this.toast.error(v.Message),this.formService.setErrors(v.Data))}))))),this.importExcelEffect=this.effect(r=>r.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(m=>this.claimService.importClaims(m).pipe((0,de.K)(p=>{var v;return this.toast.error(null!==(v=p.Message)&&void 0!==v?v:"Failed to save",{duration:3e3}),q.E}),(0,y.b)(p=>{const v=JSON.parse(p.created),I=JSON.parse(p.updated),B=JSON.parse(p.failed),_e=v.length+I.length+B.length;this.addClaims(v),this.updateClaims(I),this.toast.success(`${v.length} created, ${I.length} updated, ${B.length} failed of total ${_e}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("claimId")){var V=this.route.snapshot.paramMap.get("claimId");this.setFormName("claim_edit")}else this.setFormName("claim_create");if(this.route.snapshot.paramMap.has("priorAuthorizationRequestId")){var c=this.route.snapshot.paramMap.get("priorAuthorizationRequestId");this.setPriorAuthorizationRequestId(c)}if(this.route.snapshot.paramMap.has("claimId")&&(V=this.route.snapshot.paramMap.get("claimId"),this.setClaimId(V)),this.route.snapshot.paramMap.has("explanationOfPaymentId")){var u=this.route.snapshot.paramMap.get("explanationOfPaymentId");this.setExplanationOfPaymentId(u)}if(this.route.snapshot.paramMap.has("patientId")){var n=this.route.snapshot.paramMap.get("patientId");this.setPatientId(n)}}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.claimService.validateClaimExcelData(t,i.priorAuthorizationRequests,i.documents,i.documents,i.patients)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(z.q),e.LFG(O.F0),e.LFG(O.gz),e.LFG(X.F),e.LFG(Z.o),e.LFG(ty))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function iy(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.close.emit())})("formIsReady",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.claim)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let _n=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"claim_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.claim=i.item})):t.formName&&t.formName.currentValue&&"claim_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadClaimEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.claim=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Us),e.Y36(O.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-claim-form"]],inputs:{claim:"claim",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,iy,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[P.O5,te.M,P.Ov],encapsulation:2}),s})(),gn=(()=>{class s{constructor(){this.autoHeight=!1,this.claims=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[{field:"priorAuthorizationRequest.name",headerName:"Prior Authorization Request",filter:"agTextColumnFilter"},{field:"claim.name",headerName:"Claim",filter:"agTextColumnFilter"},{field:"explanationOfPayment.name",headerName:"Explanation of Payment",filter:"agTextColumnFilter"},{field:"patient.name",headerName:"Patient",filter:"agTextColumnFilter"},{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{field:"originalRecordDate",filter:"agDateColumnFilter"},{field:"receivedDate",filter:"agDateColumnFilter"},{field:"dueDate",filter:"agDateColumnFilter"},{field:"patientName",filter:"agTextColumnFilter"},{field:"patientPhoneNumber",filter:"agTextColumnFilter"},{field:"patientDob",filter:"agTextColumnFilter"},{field:"patientAddressLine1",filter:"agTextColumnFilter"},{field:"patientAddressCity",filter:"agTextColumnFilter"},{field:"patientAddressState",filter:"agTextColumnFilter"},{field:"patientAddressPostalCode",filter:"agTextColumnFilter"},{field:"carrierName",filter:"agTextColumnFilter"},{field:"carrierLine1",filter:"agTextColumnFilter"},{field:"carrierLine2",filter:"agTextColumnFilter"},{field:"carrierCity",filter:"agTextColumnFilter"},{field:"carrierState",filter:"agTextColumnFilter"},{field:"carrierPostalCode",filter:"agTextColumnFilter"},{field:"insuredName",filter:"agTextColumnFilter"},{field:"insuredLine1",filter:"agTextColumnFilter"},{field:"insuredCity",filter:"agTextColumnFilter"},{field:"insuredState",filter:"agTextColumnFilter"},{field:"insuredPostalCode",filter:"agTextColumnFilter"},{field:"patientSignature",filter:"agTextColumnFilter"},{field:"diagnosisCode1",filter:"agTextColumnFilter"},{field:"diagnosisCode2",filter:"agTextColumnFilter"},{field:"diagnosisCode3",filter:"agTextColumnFilter"},{field:"diagnosisCode4",filter:"agTextColumnFilter"},{field:"diagnosisCode5",filter:"agTextColumnFilter"},{field:"diagnosisCode6",filter:"agTextColumnFilter"},{field:"diagnosisCode7",filter:"agTextColumnFilter"},{field:"diagnosisCode8",filter:"agTextColumnFilter"},{field:"federalTaxId",filter:"agTextColumnFilter"},{field:"totalCharges",filter:"agTextColumnFilter"},{field:"amountPaid",filter:"agTextColumnFilter"},{field:"physicianSignature",filter:"agTextColumnFilter"},{field:"physicianSignedOn",filter:"agTextColumnFilter"},{field:"serviceFacility",filter:"agTextColumnFilter"},{field:"serviceFacilityLine1",filter:"agTextColumnFilter"},{field:"serviceFacilityCity",filter:"agTextColumnFilter"},{field:"serviceFacilityState",filter:"agTextColumnFilter"},{field:"serviceFacilityPostalCode",filter:"agTextColumnFilter"},{field:"serviceFacilityNpi",filter:"agTextColumnFilter"},{field:"billingFacility",filter:"agTextColumnFilter"},{field:"billingLine1",filter:"agTextColumnFilter"},{field:"billingCity",filter:"agTextColumnFilter"},{field:"billingState",filter:"agTextColumnFilter"},{field:"billingPostalCode",filter:"agTextColumnFilter"},{field:"billingNpi",filter:"agTextColumnFilter"},{field:"billingPhoneNumber",filter:"agTextColumnFilter"},{field:"billingOther",filter:"agTextColumnFilter"},{field:"sessionNotes",filter:"agTextColumnFilter"},{field:"referringProvider",filter:"agTextColumnFilter"},{field:"referringProviderNpi",filter:"agTextColumnFilter"},{field:"additionalClaimInfo",filter:"agTextColumnFilter"},{field:"accountNumber",filter:"agTextColumnFilter"},{field:"referenceNumber",filter:"agTextColumnFilter"},{field:"facility",filter:"agTextColumnFilter"},{field:"priorAuthorizationNumber",filter:"agTextColumnFilter"},{field:"priorAuthorizationRequestId",filter:"agTextColumnFilter",hide:!0},{field:"providerName",filter:"agTextColumnFilter"},{field:"providerNumber",filter:"agTextColumnFilter"},{field:"vendor",filter:"agTextColumnFilter"},{field:"vendorLine1",filter:"agTextColumnFilter"},{field:"vendorCSZ",filter:"agTextColumnFilter"},{field:"vendorTaxId",filter:"agTextColumnFilter"},{headerName:"Total Approved Amount",field:"totalApprovedAmount",valueFormatter:t=>{var i;return(0,_.oBD)(null===(i=t.data)||void 0===i?void 0:i.totalApprovedAmount,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{headerName:"Total Billed Amount",field:"totalBilledAmount",valueFormatter:t=>{var i;return(0,_.oBD)(null===(i=t.data)||void 0===i?void 0:i.totalBilledAmount,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{headerName:"Total Net Pay Amount",field:"totalNetPayAmount",valueFormatter:t=>{var i;return(0,_.oBD)(null===(i=t.data)||void 0===i?void 0:i.totalNetPayAmount,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{field:"notes",filter:"agTextColumnFilter"},{field:"claimId",filter:"agTextColumnFilter",hide:!0},{field:"explanationOfPaymentId",filter:"agTextColumnFilter",hide:!0},{field:"patientId",filter:"agTextColumnFilter",hide:!0}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var a;t.includes(null===(a=i.data)||void 0===a?void 0:a.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-claim-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(f.x,5),2&t){let a;e.iGM(a=e.CRH())&&(i.tableView=a.first)}},inputs:{autoHeight:"autoHeight",claims:"claims"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.claims)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[f.x],encapsulation:2}),s})();function sy(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-claim-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","claim_edit")("formControl",t.formControl)("claim",t.claim)}}const oy=function(){return{}};function ay(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-claim-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","claim_create")("formControl",t.formControl)("claim",e.DdM(3,oy))}}function ry(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-claim-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(d.ref.close())}),e.qZA()}2&s&&e.Q6J("claims",o.data.items)}let ny=(()=>{class s extends G.fS{constructor(t){super(),this.store=t,this.store.loadClaimsEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.claims$.pipe((0,h.w)(i=>(0,D.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Us))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:5,consts:[[3,"to","control","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","claim","send","close"],[1,"w-full","h-full","bg-white",3,"claims","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"ui-select-form",0),e.YNc(1,sy,2,3,"ng-template",null,1,e.W1O),e.YNc(3,ay,1,4,"ng-template",null,2,e.W1O),e.YNc(5,ry,1,1,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[E.JJ,E.oH,H.$,_n,gn],encapsulation:2}),s})();function ly(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-claim-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","claim_edit")("claim",t.value)}}const cy=function(){return{}};function dy(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-claim-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","claim_create")("claim",e.DdM(2,cy))}function uy(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-claim-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(null==d.ref?null:d.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("claims",t.items)}}let my=(()=>{class s extends pe{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:6,consts:[[3,"data","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","claim","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","claims","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,ly,1,2,"ng-template",null,1,e.W1O),e.YNc(3,dy,1,3,"ng-template",null,2,e.W1O),e.YNc(5,uy,1,2,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("data",i.data)("title",i.to.title)("onSave",i.onSave)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[he,_n,gn],encapsulation:2}),s})(),py=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[Us],imports:[P.ez,U.F,E.UX,J.o,ae.u,$.P,j.t,me,k.h,se.G,G.X0.forChild({types:[{name:"claim-select",component:ny,wrappers:["form-field"]},{name:"claim-grid",component:my}]})]}),s})(),hy=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[py]}),s})();class Dt extends W.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class fy extends Dt{constructor(o,t,i,a,l,d){super("ValidateClaimProcedureExcelDataAction"),this.valid=!1,this.excelData=o,this.placeOfServices=t,this.claimStatuses=i,this.claims=a,this.appointments=l,this.procedures=d}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name),this.validationContext.addRule(new g.mi(`placeOfServiceName_${i}_is_valid}`,"Place of Service Is Not Valid","placeOfService.name",t.placeOfService,this.placeOfServices,!0)),this.validationContext.addRule(new g.mi(`claimStatusName_${i}_is_valid}`,"Claim Status Is Not Valid","claimStatus.name",t.claimStatus,this.claimStatuses,!0)),this.validationContext.addRule(new g.mi(`claimName_${i}_is_valid}`,"Claim Is Not Valid","claim.name",t.claim,this.claims,!0)),this.validationContext.addRule(new g.mi(`appointmentName_${i}_is_valid}`,"Appointment Is Not Valid","appointment.name",t.appointment,this.appointments,!0)),this.validationContext.addRule(new g.mi(`procedureName_${i}_is_valid}`,"Procedure Is Not Valid","procedure.name",t.procedure,this.procedures,!0))}),this.validationContext.addRule(new g.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof g.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(a=>a.name),newNames:[i.newName]}):i instanceof g.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,D.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class _y extends g.wS{constructor(o,t,i,a,l){super(o,t,i,a,l,!0)}}class gy extends g.ul{constructor(o,t,i,a=!1){super(o,t,a),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new g.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new _y("name","The claimprocedure name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class vy extends Dt{constructor(o){super("CreateClaimProcedureAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new gy("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateClaimProcedure({input:this.input}).pipe((0,h.w)(o=>(0,ue.of)(o.data.created)))}}class Cy extends Dt{constructor(o){super("UpdateClaimProceduresAction"),this.claimProcedures=o}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.claimProcedures,!0))}performAction(){this.response=this.businessProvider.data.userUpdateClaimProcedures({input:{claimProcedures:this.claimProcedures}}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}class Sy extends Dt{constructor(o,t){super("UpdateClaimProcedureAction"),this.claimProcedure=o,this.claimProcedureId=t}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.claimProcedure,!0)).addRule(new g.xF("Id","Id should be a CUID and not null",this.claimProcedureId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateClaimProcedure({claimProcedureId:this.claimProcedureId,input:this.claimProcedure}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}let vn=(()=>{class s extends W.nH{constructor(t,i,a){super("NotificationService.ClaimProcedureBusinessProviderService",t,a),this.data=i}createClaimProcedure(t){const i=new vy(t);return i.Do(this),i.response}updateClaimProcedure(t,i){const a=new Sy(t,i);return a.Do(this),a.response}importClaimProcedures(t){const i=new Cy(t);return i.Do(this),i.response}validateClaimProcedureExcelData(t,i,a,l,d,ee){const V=new fy(t,i,a,l,d,ee);return V.Do(this),V.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(K.ed),e.LFG(z.q),e.LFG(W.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),by=(()=>{class s extends W.nH{constructor(t,i,a){super("ClaimProcedureService",a,t),this.businessProvider=i}createClaimProcedure(t){return this.businessProvider.createClaimProcedure(t)}updateClaimProcedure(t,i){return this.businessProvider.updateClaimProcedure(t,i)}importClaimProcedures(t){return this.businessProvider.importClaimProcedures(t)}validateClaimProcedureExcelData(t,i,a,l,d,ee){return this.businessProvider.validateClaimProcedureExcelData(t,i,a,l,d,ee)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(vn,8),e.LFG(vn),e.LFG(K.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),Mt=(()=>{class s extends b.m1{constructor(t,i,a,l,d,ee){if(super({loading:!1,claimProcedures:[],done:!1,searchQuery:"",formName:void 0,placeOfServiceId:void 0,claimStatusId:void 0,claimId:void 0,appointmentId:void 0,procedureId:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=a,this.toast=l,this.formService=d,this.claimProcedureService=ee,this.errors$=this.select(p=>p.errors),this.loading$=this.select(p=>p.loading),this.done$=this.select(p=>p.done),this.item$=this.select(p=>p.item),this.claimProcedures$=this.select(p=>p.claimProcedures),this.placeOfServices$=this.select(p=>p.placeOfServices||[]),this.claimStatuses$=this.select(p=>p.claimStatuses||[]),this.claims$=this.select(p=>p.claims||[]),this.appointments$=this.select(p=>p.appointments||[]),this.procedures$=this.select(p=>p.procedures||[]),this.placeOfServiceId$=this.select(p=>p.placeOfServiceId),this.claimStatusId$=this.select(p=>p.claimStatusId),this.claimId$=this.select(p=>p.claimId),this.appointmentId$=this.select(p=>p.appointmentId),this.procedureId$=this.select(p=>p.procedureId),this.paging$=this.select(p=>p.paging),this.searchQuery$=this.select(p=>p.searchQuery),this.formName$=this.select(p=>p.formName),this.actionResult$=this.select(this.item$,this.done$,(p,v)=>({item:p,done:v}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.claimProcedures$,this.placeOfServices$,this.claimStatuses$,this.claims$,this.appointments$,this.procedures$,(p,v,I,B,_e,Ne,le,ce,oe,ne)=>({errors:p,loading:v,item:I,formName:B,claimProcedures:_e,placeOfServices:Ne,claimStatuses:le,claims:ce,appointments:oe,procedures:ne}),{debounce:!0}),this.input$=this.select(this.paging$,this.placeOfServiceId$,this.claimStatusId$,this.claimId$,this.appointmentId$,this.procedureId$,this.searchQuery$,(p,v,I,B,_e,Ne,le)=>({limit:p.limit,skip:p.skip,name:le,placeOfServiceId:v,claimStatusId:I,claimId:B,appointmentId:_e,procedureId:Ne,total:p.total})),this.setFormName=this.updater((p,v)=>Object.assign(Object.assign({},p),{formName:v})),this.setPlaceOfServiceId=this.updater((p,v)=>Object.assign(Object.assign({},p),{placeOfServiceId:v})),this.setClaimStatusId=this.updater((p,v)=>Object.assign(Object.assign({},p),{claimStatusId:v})),this.setClaimId=this.updater((p,v)=>Object.assign(Object.assign({},p),{claimId:v})),this.setAppointmentId=this.updater((p,v)=>Object.assign(Object.assign({},p),{appointmentId:v})),this.setProcedureId=this.updater((p,v)=>Object.assign(Object.assign({},p),{procedureId:v})),this.filterPlaceOfServices=p=>this.data.userSelectPlaceOfServices({input:{name:p}}).pipe((0,b._b)(v=>{let I=v.data.items;return this.patchState({placeOfServices:I}),I},v=>this.patchState({errors:v.graphQLErrors?v.graphQLErrors:v})),(0,fe.U)(v=>v.data.items)),this.filterClaimStatuses=p=>this.data.userSelectClaimStatuses({input:{name:p}}).pipe((0,b._b)(v=>{let I=v.data.items;return this.patchState({claimStatuses:I}),I},v=>this.patchState({errors:v.graphQLErrors?v.graphQLErrors:v})),(0,fe.U)(v=>v.data.items)),this.filterClaims=p=>this.data.userSelectClaims({input:{name:p}}).pipe((0,b._b)(v=>{let I=v.data.items;return this.patchState({claims:I}),I},v=>this.patchState({errors:v.graphQLErrors?v.graphQLErrors:v})),(0,fe.U)(v=>v.data.items)),this.filterAppointments=p=>this.data.userSelectAppointments({input:{name:p}}).pipe((0,b._b)(v=>{let I=v.data.items;return this.patchState({appointments:I}),I},v=>this.patchState({errors:v.graphQLErrors?v.graphQLErrors:v})),(0,fe.U)(v=>v.data.items)),this.filterProcedures=p=>this.data.userSelectProcedures({input:{name:p}}).pipe((0,b._b)(v=>{let I=v.data.items;return this.patchState({procedures:I}),I},v=>this.patchState({errors:v.graphQLErrors?v.graphQLErrors:v})),(0,fe.U)(v=>v.data.items)),this.addPlaceOfService=this.updater((p,v)=>Object.assign(Object.assign({},p),{placeOfServices:p.placeOfServices.concat(v)})),this.addClaimStatus=this.updater((p,v)=>Object.assign(Object.assign({},p),{claimStatuses:p.claimStatuses.concat(v)})),this.addClaim=this.updater((p,v)=>Object.assign(Object.assign({},p),{claims:p.claims.concat(v)})),this.addAppointment=this.updater((p,v)=>Object.assign(Object.assign({},p),{appointments:p.appointments.concat(v)})),this.addProcedure=this.updater((p,v)=>Object.assign(Object.assign({},p),{procedures:p.procedures.concat(v)})),this.setItem=this.updater((p,v)=>Object.assign(Object.assign({},p),{item:v})),this.addNewClaimProcedure=this.updater((p,v)=>Object.assign(Object.assign({},p),{claimProcedures:[...p.claimProcedures,v]})),this.updateClaimProcedure=this.updater((p,v)=>Object.assign(Object.assign({},p),{claimProcedures:p.claimProcedures.map(I=>I.id===v.id?v:I)})),this.addClaimProcedures=this.updater((p,v)=>Object.assign(Object.assign({},p),{claimProcedures:p.claimProcedures.concat(v)})),this.updateClaimProcedures=this.updater((p,v)=>Object.assign(Object.assign({},p),{claimProcedures:p.claimProcedures.map(I=>v.find(_e=>_e.id===I.id)||I)})),this.setSearchQuery=this.updater((p,v)=>Object.assign(Object.assign({},p),{searchQuery:v})),this.loadClaimProcedureEffect=this.effect(p=>p.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(v=>this.data.userClaimProcedure({claimProcedureId:v}).pipe((0,b._b)(I=>{this.patchState({item:I.data.item,errors:I.errors,loading:!1})},I=>this.patchState({loading:!1,errors:I.graphQLErrors?I.graphQLErrors:I})))))),this.loadClaimProceduresEffect=this.effect(p=>p.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.input$),(0,h.w)(([v,I])=>this.data.userClaimProcedures({input:I}).pipe((0,b._b)(B=>this.patchState({paging:{limit:I.limit,skip:I.skip,total:B.data.count.total},claimProcedures:B.data.items,errors:B.errors,loading:!1}),B=>this.patchState({loading:!1,errors:B.graphQLErrors?B.graphQLErrors:B})))))),this.createClaimProcedureEffect=this.effect(p=>p.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(v=>this.claimProcedureService.createClaimProcedure(Object.assign({},v)).pipe((0,b._b)(I=>{this.addNewClaimProcedure(I),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:I,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},I=>{I.graphQLErrors?(this.toast.error(I.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:I.graphQLErrors?I.graphQLErrors:I})):(this.toast.error(I.Message),this.formService.setErrors(I.Data))}))))),this.updateClaimProcedureEffect=this.effect(p=>p.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([v,I])=>this.claimProcedureService.updateClaimProcedure(v,v.id).pipe((0,b._b)(B=>{this.updateClaimProcedure(B),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:B,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},B=>{B.graphQLErrors?(this.toast.error(B.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:B.graphQLErrors?B.graphQLErrors:B})):(this.toast.error(B.Message),this.formService.setErrors(B.Data))}))))),this.deleteClaimProcedureEffect=this.effect(p=>p.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([v,I])=>this.data.userDeleteClaimProcedure({claimProcedureId:I.id}).pipe((0,b._b)(B=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:B.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},B=>{B.graphQLErrors?(this.toast.error(B.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:B.graphQLErrors?B.graphQLErrors:B})):(this.toast.error(B.Message),this.formService.setErrors(B.Data))}))))),this.importExcelEffect=this.effect(p=>p.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(v=>this.claimProcedureService.importClaimProcedures(v).pipe((0,de.K)(I=>{var B;return this.toast.error(null!==(B=I.Message)&&void 0!==B?B:"Failed to save",{duration:3e3}),q.E}),(0,y.b)(I=>{const B=JSON.parse(I.created),_e=JSON.parse(I.updated),Ne=JSON.parse(I.failed),le=B.length+_e.length+Ne.length;this.addClaimProcedures(B),this.updateClaimProcedures(_e),this.toast.success(`${B.length} created, ${_e.length} updated, ${Ne.length} failed of total ${le}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("claimProcedureId")?(this.route.snapshot.paramMap.get("claimProcedureId"),this.setFormName("claimProcedure_edit")):this.setFormName("claimProcedure_create"),this.route.snapshot.paramMap.has("placeOfServiceId")){var c=this.route.snapshot.paramMap.get("placeOfServiceId");this.setPlaceOfServiceId(c)}if(this.route.snapshot.paramMap.has("claimStatusId")){var u=this.route.snapshot.paramMap.get("claimStatusId");this.setClaimStatusId(u)}if(this.route.snapshot.paramMap.has("claimId")){var n=this.route.snapshot.paramMap.get("claimId");this.setClaimId(n)}if(this.route.snapshot.paramMap.has("appointmentId")){var r=this.route.snapshot.paramMap.get("appointmentId");this.setAppointmentId(r)}if(this.route.snapshot.paramMap.has("procedureId")){var m=this.route.snapshot.paramMap.get("procedureId");this.setProcedureId(m)}}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.claimProcedureService.validateClaimProcedureExcelData(t,i.placeOfServices,i.claimStatuses,i.claims,i.appointments,i.procedures)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(z.q),e.LFG(O.F0),e.LFG(O.gz),e.LFG(X.F),e.LFG(Z.o),e.LFG(by))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function Ty(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.close.emit())})("formIsReady",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.claimProcedure)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let Cn=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"claimProcedure_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({id:null,name:""}),this.store.vm$.subscribe(i=>{this.claimProcedure=i.item})):t.formName&&t.formName.currentValue&&"claimProcedure_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadClaimProcedureEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.claimProcedure=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Mt),e.Y36(O.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-claim-procedure-form"]],inputs:{claimProcedure:"claimProcedure",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,Ty,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[P.O5,te.M,P.Ov],encapsulation:2}),s})(),Sn=(()=>{class s{constructor(){this.autoHeight=!1,this.claimProcedures=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[{field:"placeOfService.name",headerName:"Place of Service",filter:"agTextColumnFilter"},{field:"claimStatus.name",headerName:"Claim Status",filter:"agTextColumnFilter"},{field:"claim.name",headerName:"Claim",filter:"agTextColumnFilter"},{field:"appointment.name",headerName:"Appointment",filter:"agTextColumnFilter"},{field:"procedure.name",headerName:"Procedure",filter:"agTextColumnFilter"},{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{field:"claimProcedureCodeId",filter:"agTextColumnFilter"},{field:"procedureCodeId",filter:"agTextColumnFilter"},{field:"claimId",filter:"agTextColumnFilter",hide:!0},{field:"fromDateOfService",filter:"agDateColumnFilter"},{field:"toDateOfService",filter:"agDateColumnFilter"},{field:"placeOfServiceId",filter:"agTextColumnFilter",hide:!0},{field:"nationalDrugCode",filter:"agTextColumnFilter"},{field:"drugUnit",filter:"agTextColumnFilter"},{field:"drugQuantity",filter:"agTextColumnFilter"},{headerName:"Quantity",field:"quantity",valueFormatter:t=>{var i;return(0,_.oBD)(null===(i=t.data)||void 0===i?void 0:i.quantity,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{headerName:"Billed Amount",field:"billedAmount",valueFormatter:t=>{var i;return(0,_.oBD)(null===(i=t.data)||void 0===i?void 0:i.billedAmount,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{headerName:"Approved Amount",field:"approvedAmount",valueFormatter:t=>{var i;return(0,_.oBD)(null===(i=t.data)||void 0===i?void 0:i.approvedAmount,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{headerName:"Adjustment Amount",field:"adjustmentAmount",valueFormatter:t=>{var i;return(0,_.oBD)(null===(i=t.data)||void 0===i?void 0:i.adjustmentAmount,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{headerName:"Net Payment Amount",field:"netPaymentAmount",valueFormatter:t=>{var i;return(0,_.oBD)(null===(i=t.data)||void 0===i?void 0:i.netPaymentAmount,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{field:"paymentMethod",filter:"agTextColumnFilter"},{field:"internalMemo",filter:"agTextColumnFilter"},{field:"explainationOfBenefitsComment",filter:"agTextColumnFilter"},{field:"claimStatusId",filter:"agTextColumnFilter",hide:!0},{field:"reason",filter:"agTextColumnFilter"},{field:"procedureCode",filter:"agTextColumnFilter"},{field:"diagnosisPointer",filter:"agTextColumnFilter"},{field:"modifier1",filter:"agTextColumnFilter"},{field:"modifier2",filter:"agTextColumnFilter"},{field:"modifier3",filter:"agTextColumnFilter"},{field:"modifier4",filter:"agTextColumnFilter"},{field:"appointmentId",filter:"agTextColumnFilter",hide:!0},{field:"procedureId",filter:"agTextColumnFilter",hide:!0}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var a;t.includes(null===(a=i.data)||void 0===a?void 0:a.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-claim-procedure-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(f.x,5),2&t){let a;e.iGM(a=e.CRH())&&(i.tableView=a.first)}},inputs:{autoHeight:"autoHeight",claimProcedures:"claimProcedures"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","data","showSidebar","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("data",i.claimProcedures)("showSidebar",!1)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[f.x],encapsulation:2}),s})();function yy(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-claim-procedure-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","claimProcedure_edit")("formControl",t.formControl)("claimProcedure",t.claimProcedure)}}const wy=function(){return{}};function xy(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-claim-procedure-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","claimProcedure_create")("formControl",t.formControl)("claimProcedure",e.DdM(3,wy))}}function Ny(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-claim-procedure-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(d.ref.close())}),e.qZA()}2&s&&e.Q6J("claimProcedures",o.data.items)}let Ay=(()=>{class s extends G.fS{constructor(t){super(),this.store=t,this.store.loadClaimProceduresEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.claimProcedures$.pipe((0,h.w)(i=>(0,D.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Mt))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e._Bn([Mt]),e.qOj],decls:7,vars:5,consts:[[3,"to","control","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","claimProcedure","send","close"],[1,"w-full","h-full","bg-white",3,"claimProcedures","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"ui-select-form",0),e.YNc(1,yy,2,3,"ng-template",null,1,e.W1O),e.YNc(3,xy,1,4,"ng-template",null,2,e.W1O),e.YNc(5,Ny,1,1,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[E.JJ,E.oH,H.$,Cn,Sn],encapsulation:2}),s})();function Fy(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-claim-procedure-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","claimProcedure_edit")("claimProcedure",t.value)}}const Py=function(){return{}};function Iy(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-claim-procedure-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","claimProcedure_create")("claimProcedure",e.DdM(2,Py))}function Dy(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-claim-procedure-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(null==d.ref?null:d.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("claimProcedures",t.items)}}let My=(()=>{class s extends pe{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:6,consts:[[3,"data","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","claimProcedure","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","claimProcedures","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,Fy,1,2,"ng-template",null,1,e.W1O),e.YNc(3,Iy,1,3,"ng-template",null,2,e.W1O),e.YNc(5,Dy,1,2,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("data",i.data)("title",i.to.title)("onSave",i.onSave)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[he,Cn,Sn],encapsulation:2}),s})(),Wy=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[Mt],imports:[P.ez,U.F,E.UX,J.o,ae.u,$.P,j.t,me,k.h,se.G,G.X0.forChild({types:[{name:"claim-procedure-select",component:Ay,wrappers:["form-field"]},{name:"claim-procedure-grid",component:My}]})]}),s})(),Ey=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[Wy]}),s})();class Wt extends W.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class Oy extends Wt{constructor(o){super("ValidateClaimStatusExcelDataAction"),this.valid=!1,this.excelData=o}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name)}),this.validationContext.addRule(new g.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof g.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(a=>a.name),newNames:[i.newName]}):i instanceof g.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,D.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class Ly extends g.wS{constructor(o,t,i,a,l){super(o,t,i,a,l,!0)}}class $y extends g.ul{constructor(o,t,i,a=!1){super(o,t,a),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new g.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new Ly("name","The claimstatus name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class Gy extends Wt{constructor(o){super("CreateClaimStatusAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new $y("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateClaimStatus({input:this.input}).pipe((0,h.w)(o=>(0,ue.of)(o.data.created)))}}class Ry extends Wt{constructor(o){super("UpdateClaimStatusesAction"),this.claimStatuses=o}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.claimStatuses,!0))}performAction(){this.response=this.businessProvider.data.userUpdateClaimStatuses({input:{claimStatuses:this.claimStatuses}}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}class Qy extends Wt{constructor(o,t){super("UpdateClaimStatusAction"),this.claimStatus=o,this.claimStatusId=t}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.claimStatus,!0)).addRule(new g.xF("Id","Id should be a CUID and not null",this.claimStatusId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateClaimStatus({claimStatusId:this.claimStatusId,input:this.claimStatus}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}let bn=(()=>{class s extends W.nH{constructor(t,i,a){super("NotificationService.ClaimStatusBusinessProviderService",t,a),this.data=i}createClaimStatus(t){const i=new Gy(t);return i.Do(this),i.response}updateClaimStatus(t,i){const a=new Qy(t,i);return a.Do(this),a.response}importClaimStatuses(t){const i=new Ry(t);return i.Do(this),i.response}validateClaimStatusExcelData(t){const i=new Oy(t);return i.Do(this),i.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(K.ed),e.LFG(z.q),e.LFG(W.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),Vy=(()=>{class s extends W.nH{constructor(t,i,a){super("ClaimStatusService",a,t),this.businessProvider=i}createClaimStatus(t){const i=Object.fromEntries(Object.entries(t).filter(([a,l])=>null!==l));return this.businessProvider.createClaimStatus(i)}updateClaimStatus(t,i){return this.businessProvider.updateClaimStatus(t,i)}importClaimStatuses(t){return this.businessProvider.importClaimStatuses(t)}validateClaimStatusExcelData(t){return this.businessProvider.validateClaimStatusExcelData(t)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(bn,8),e.LFG(bn),e.LFG(K.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),Js=(()=>{class s extends b.m1{constructor(t,i,a,l,d,ee){super({loading:!1,claimStatuses:[],done:!1,searchQuery:"",formName:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=a,this.toast=l,this.formService=d,this.claimStatusService=ee,this.errors$=this.select(c=>c.errors),this.loading$=this.select(c=>c.loading),this.done$=this.select(c=>c.done),this.item$=this.select(c=>c.item),this.claimStatuses$=this.select(c=>c.claimStatuses),this.paging$=this.select(c=>c.paging),this.searchQuery$=this.select(c=>c.searchQuery),this.formName$=this.select(c=>c.formName),this.actionResult$=this.select(this.item$,this.done$,(c,u)=>({item:c,done:u}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.claimStatuses$,(c,u,n,r,m)=>({errors:c,loading:u,item:n,formName:r,claimStatuses:m}),{debounce:!0}),this.input$=this.select(this.paging$,this.searchQuery$,(c,u)=>({limit:c.limit,skip:c.skip,name:u,total:c.total})),this.setFormName=this.updater((c,u)=>Object.assign(Object.assign({},c),{formName:u})),this.setItem=this.updater((c,u)=>Object.assign(Object.assign({},c),{item:u})),this.addNewClaimStatus=this.updater((c,u)=>Object.assign(Object.assign({},c),{claimStatuses:[...c.claimStatuses,u]})),this.updateClaimStatus=this.updater((c,u)=>Object.assign(Object.assign({},c),{claimStatuses:c.claimStatuses.map(n=>n.id===u.id?u:n)})),this.addClaimStatuses=this.updater((c,u)=>Object.assign(Object.assign({},c),{claimStatuses:c.claimStatuses.concat(u)})),this.updateClaimStatuses=this.updater((c,u)=>Object.assign(Object.assign({},c),{claimStatuses:c.claimStatuses.map(n=>u.find(m=>m.id===n.id)||n)})),this.setSearchQuery=this.updater((c,u)=>Object.assign(Object.assign({},c),{searchQuery:u})),this.loadClaimStatusEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.data.userClaimStatus({claimStatusId:u}).pipe((0,b._b)(n=>{this.patchState({item:n.data.item,errors:n.errors,loading:!1})},n=>this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})))))),this.loadClaimStatusesEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.input$),(0,h.w)(([u,n])=>this.data.userClaimStatuses({input:n}).pipe((0,b._b)(r=>this.patchState({paging:{limit:n.limit,skip:n.skip,total:r.data.count.total},claimStatuses:r.data.items,errors:r.errors,loading:!1}),r=>this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})))))),this.createClaimStatusEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.claimStatusService.createClaimStatus(Object.assign({},u)).pipe((0,b._b)(n=>{this.addNewClaimStatus(n),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:n,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},n=>{n.graphQLErrors?(this.toast.error(n.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})):(this.toast.error(n.Message),this.formService.setErrors(n.Data))}))))),this.updateClaimStatusEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([u,n])=>this.claimStatusService.updateClaimStatus(u,u.id).pipe((0,b._b)(r=>{this.updateClaimStatus(r),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:r,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},r=>{r.graphQLErrors?(this.toast.error(r.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})):(this.toast.error(r.Message),this.formService.setErrors(r.Data))}))))),this.deleteClaimStatusEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([u,n])=>this.data.userDeleteClaimStatus({claimStatusId:n.id}).pipe((0,b._b)(r=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:r.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},r=>{r.graphQLErrors?(this.toast.error(r.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})):(this.toast.error(r.Message),this.formService.setErrors(r.Data))}))))),this.importExcelEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.claimStatusService.importClaimStatuses(u).pipe((0,de.K)(n=>{var r;return this.toast.error(null!==(r=n.Message)&&void 0!==r?r:"Failed to save",{duration:3e3}),q.E}),(0,y.b)(n=>{const r=JSON.parse(n.created),m=JSON.parse(n.updated),p=JSON.parse(n.failed),v=r.length+m.length+p.length;this.addClaimStatuses(r),this.updateClaimStatuses(m),this.toast.success(`${r.length} created, ${m.length} updated, ${p.length} failed of total ${v}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("claimStatusId")?(this.route.snapshot.paramMap.get("claimStatusId"),this.setFormName("claimStatus_edit")):this.setFormName("claimStatus_create")}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.claimStatusService.validateClaimStatusExcelData(t)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(z.q),e.LFG(O.F0),e.LFG(O.gz),e.LFG(X.F),e.LFG(Z.o),e.LFG(Vy))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function jy(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.close.emit())})("formIsReady",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.claimStatus)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let Tn=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"claimStatus_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.claimStatus=i.item})):t.formName&&t.formName.currentValue&&"claimStatus_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadClaimStatusEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.claimStatus=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Js),e.Y36(O.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-claim-status-form"]],inputs:{claimStatus:"claimStatus",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,jy,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[P.O5,te.M,P.Ov],encapsulation:2}),s})(),yn=(()=>{class s{constructor(){this.autoHeight=!1,this.claimStatuses=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[,{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var a;t.includes(null===(a=i.data)||void 0===a?void 0:a.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-claim-status-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(f.x,5),2&t){let a;e.iGM(a=e.CRH())&&(i.tableView=a.first)}},inputs:{autoHeight:"autoHeight",claimStatuses:"claimStatuses"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.claimStatuses)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[f.x],encapsulation:2}),s})();function Uy(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-claim-status-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","claimStatus_edit")("formControl",t.formControl)("claimStatus",t.claimStatus)}}const Jy=function(){return{}};function zy(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-claim-status-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","claimStatus_create")("formControl",t.formControl)("claimStatus",e.DdM(3,Jy))}}function Hy(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-claim-status-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(d.ref.close())}),e.qZA()}2&s&&e.Q6J("claimStatuses",o.data.items)}let qy=(()=>{class s extends G.fS{constructor(t){super(),this.store=t,this.store.loadClaimStatusesEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.claimStatuses$.pipe((0,h.w)(i=>(0,D.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Js))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","claimStatus","send","close"],[1,"w-full","h-full","bg-white",3,"claimStatuses","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,Uy,2,3,"ng-template",null,1,e.W1O),e.YNc(3,zy,1,4,"ng-template",null,2,e.W1O),e.YNc(5,Hy,1,1,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",d)("editTemplate",a)("createTemplate",l)("key",i.field.key)}},dependencies:[E.JJ,E.oH,H.$,Tn,yn],encapsulation:2}),s})();function Ky(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-claim-status-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","claimStatus_edit")("claimStatus",t.value)}}const Zy=function(){return{}};function By(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-claim-status-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","claimStatus_create")("claimStatus",e.DdM(2,Zy))}function ky(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-claim-status-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(null==d.ref?null:d.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("claimStatuses",t.items)}}let Yy=(()=>{class s extends pe{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","claimStatus","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","claimStatuses","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,Ky,1,2,"ng-template",null,1,e.W1O),e.YNc(3,By,1,3,"ng-template",null,2,e.W1O),e.YNc(5,ky,1,2,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[he,Tn,yn],encapsulation:2}),s})(),Xy=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[Js],imports:[P.ez,U.F,E.UX,J.o,ae.u,$.P,j.t,me,k.h,se.G,G.X0.forChild({types:[{name:"claim-status-select",component:qy,wrappers:["form-field"]},{name:"claim-status-grid",component:Yy}]})]}),s})(),ew=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[Xy]}),s})();var zs=M(60908);function tw(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.close.emit())})("formIsReady",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.clinicalProviderLocationAvailability)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let wn=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"clinicalProviderLocationAvailability_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.clinicalProviderLocationAvailability=i.item})):t.formName&&t.formName.currentValue&&"clinicalProviderLocationAvailability_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadClinicalProviderLocationAvailabilityEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.clinicalProviderLocationAvailability=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(zs.R),e.Y36(O.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-clinical-provider-location-availability-form"]],inputs:{clinicalProviderLocationAvailability:"clinicalProviderLocationAvailability",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,tw,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[P.O5,te.M,P.Ov],encapsulation:2}),s})(),xn=(()=>{class s{constructor(){this.autoHeight=!1,this.clinicalProviderLocationAvailabilities=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[{field:"clinicalProviderLocation.name",headerName:"Clinical Provider Location",filter:"agTextColumnFilter"},{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{field:"day",filter:"agTextColumnFilter"},{field:"startTime",filter:"agTextColumnFilter"},{field:"endTime",filter:"agTextColumnFilter"},{field:"clinicalProviderLocationId",filter:"agTextColumnFilter",hide:!0}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var a;t.includes(null===(a=i.data)||void 0===a?void 0:a.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-clinical-provider-location-availability-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(f.x,5),2&t){let a;e.iGM(a=e.CRH())&&(i.tableView=a.first)}},inputs:{autoHeight:"autoHeight",clinicalProviderLocationAvailabilities:"clinicalProviderLocationAvailabilities"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.clinicalProviderLocationAvailabilities)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[f.x],encapsulation:2}),s})();function iw(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-clinical-provider-location-availability-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","clinicalProviderLocationAvailability_edit")("formControl",t.formControl)("clinicalProviderLocationAvailability",t.clinicalProviderLocationAvailability)}}const sw=function(){return{}};function ow(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-clinical-provider-location-availability-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","clinicalProviderLocationAvailability_create")("formControl",t.formControl)("clinicalProviderLocationAvailability",e.DdM(3,sw))}}function aw(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-clinical-provider-location-availability-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(d.ref.close())}),e.qZA()}2&s&&e.Q6J("clinicalProviderLocationAvailabilities",o.data.items)}let rw=(()=>{class s extends G.fS{constructor(t){super(),this.store=t,this.store.loadClinicalProviderLocationAvailabilitiesEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.clinicalProviderLocationAvailabilities$.pipe((0,h.w)(i=>(0,D.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(zs.R))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","clinicalProviderLocationAvailability","send","close"],[1,"w-full","h-full","bg-white",3,"clinicalProviderLocationAvailabilities","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,iw,2,3,"ng-template",null,1,e.W1O),e.YNc(3,ow,1,4,"ng-template",null,2,e.W1O),e.YNc(5,aw,1,1,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",d)("editTemplate",a)("createTemplate",l)("key",i.field.key)}},dependencies:[E.JJ,E.oH,H.$,wn,xn],encapsulation:2}),s})();function nw(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-clinical-provider-location-availability-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","clinicalProviderLocationAvailability_edit")("clinicalProviderLocationAvailability",t.value)}}const lw=function(){return{}};function cw(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-clinical-provider-location-availability-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","clinicalProviderLocationAvailability_create")("clinicalProviderLocationAvailability",e.DdM(2,lw))}function dw(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-clinical-provider-location-availability-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(null==d.ref?null:d.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("clinicalProviderLocationAvailabilities",t.items)}}let uw=(()=>{class s extends pe{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","clinicalProviderLocationAvailability","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","clinicalProviderLocationAvailabilities","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,nw,1,2,"ng-template",null,1,e.W1O),e.YNc(3,cw,1,3,"ng-template",null,2,e.W1O),e.YNc(5,dw,1,2,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[he,wn,xn],encapsulation:2}),s})(),mw=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[zs.R],imports:[P.ez,U.F,E.UX,J.o,ae.u,$.P,j.t,me,k.h,se.G,G.X0.forChild({types:[{name:"clinical-provider-location-availability-select",component:rw,wrappers:["form-field"]},{name:"clinical-provider-location-availability-grid",component:uw}]})]}),s})(),pw=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[mw]}),s})();var Hs=M(30760);function hw(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.close.emit())})("formIsReady",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.clinicalProviderLocation)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let Nn=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"clinicalProviderLocation_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({id:null,name:""}),this.store.vm$.subscribe(i=>{this.clinicalProviderLocation=i.item})):t.formName&&t.formName.currentValue&&"clinicalProviderLocation_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadClinicalProviderLocationEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.clinicalProviderLocation=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Hs.j),e.Y36(O.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-clinical-provider-location-form"]],inputs:{clinicalProviderLocation:"clinicalProviderLocation",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,hw,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[P.O5,te.M,P.Ov],encapsulation:2}),s})(),An=(()=>{class s{constructor(){this.autoHeight=!1,this.clinicalProviderLocations=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[{field:"clinicalProvider.name",headerName:"Clinical Provider",filter:"agTextColumnFilter"},{field:"location.name",headerName:"Location",filter:"agTextColumnFilter"},{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{field:"clinicalProviderId",filter:"agTextColumnFilter",hide:!0},{field:"locationId",filter:"agTextColumnFilter",hide:!0}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var a;t.includes(null===(a=i.data)||void 0===a?void 0:a.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-clinical-provider-location-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(f.x,5),2&t){let a;e.iGM(a=e.CRH())&&(i.tableView=a.first)}},inputs:{autoHeight:"autoHeight",clinicalProviderLocations:"clinicalProviderLocations"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.clinicalProviderLocations)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[f.x],encapsulation:2}),s})();function fw(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-clinical-provider-location-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","clinicalProviderLocation_edit")("formControl",t.formControl)("clinicalProviderLocation",t.clinicalProviderLocation)}}const _w=function(){return{}};function gw(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-clinical-provider-location-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","clinicalProviderLocation_create")("formControl",t.formControl)("clinicalProviderLocation",e.DdM(3,_w))}}function vw(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-clinical-provider-location-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(d.ref.close())}),e.qZA()}2&s&&e.Q6J("clinicalProviderLocations",o.data.items)}let Cw=(()=>{class s extends G.fS{constructor(t){super(),this.store=t,this.store.loadClinicalProviderLocationsEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.clinicalProviderLocations$.pipe((0,h.w)(i=>(0,D.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Hs.j))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","clinicalProviderLocation","send","close"],[1,"w-full","h-full","bg-white",3,"clinicalProviderLocations","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,fw,2,3,"ng-template",null,1,e.W1O),e.YNc(3,gw,1,4,"ng-template",null,2,e.W1O),e.YNc(5,vw,1,1,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",d)("editTemplate",a)("createTemplate",l)("key",i.field.key)}},dependencies:[E.JJ,E.oH,H.$,Nn,An],encapsulation:2}),s})();function Sw(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-clinical-provider-location-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","clinicalProviderLocation_edit")("clinicalProviderLocation",t.value)}}const bw=function(){return{}};function Tw(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-clinical-provider-location-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","clinicalProviderLocation_create")("clinicalProviderLocation",e.DdM(2,bw))}function yw(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-clinical-provider-location-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(null==d.ref?null:d.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("clinicalProviderLocations",t.items)}}let ww=(()=>{class s extends pe{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","clinicalProviderLocation","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","clinicalProviderLocations","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,Sw,1,2,"ng-template",null,1,e.W1O),e.YNc(3,Tw,1,3,"ng-template",null,2,e.W1O),e.YNc(5,yw,1,2,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[he,Nn,An],encapsulation:2}),s})(),xw=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[Hs.j],imports:[P.ez,U.F,E.UX,J.o,ae.u,$.P,j.t,me,k.h,se.G,G.X0.forChild({types:[{name:"clinical-provider-location-select",component:Cw,wrappers:["form-field"]},{name:"clinical-provider-location-grid",component:ww}]})]}),s})(),Nw=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[xw]}),s})();var qs=M(94929);function Aw(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.close.emit())})("formIsReady",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.clinicalProvider)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let Fn=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"clinicalProvider_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.clinicalProvider=i.item})):t.formName&&t.formName.currentValue&&"clinicalProvider_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadClinicalProviderEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.clinicalProvider=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(qs.D),e.Y36(O.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-clinical-provider-form"]],inputs:{clinicalProvider:"clinicalProvider",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,Aw,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[P.O5,te.M,P.Ov],encapsulation:2}),s})(),Pn=(()=>{class s{constructor(){this.autoHeight=!1,this.clinicalProviders=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[{field:"vendor.name",headerName:"Vendor",filter:"agTextColumnFilter"},{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{field:"vendorId",filter:"agTextColumnFilter",hide:!0},{field:"expertId",filter:"agTextColumnFilter",hide:!0},{field:"npi",filter:"agTextColumnFilter"},{field:"honorific",filter:"agTextColumnFilter"},{field:"firstName",filter:"agTextColumnFilter"},{field:"lastName",filter:"agTextColumnFilter"},{field:"suffix",filter:"agTextColumnFilter"},{field:"phoneNumber",filter:"agTextColumnFilter"},{field:"emailAddress",filter:"agTextColumnFilter"},{field:"profilePictureId",filter:"agTextColumnFilter",hide:!0},{field:"compressProfilePictureId",filter:"agTextColumnFilter",hide:!0}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var a;t.includes(null===(a=i.data)||void 0===a?void 0:a.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-clinical-provider-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(f.x,5),2&t){let a;e.iGM(a=e.CRH())&&(i.tableView=a.first)}},inputs:{autoHeight:"autoHeight",clinicalProviders:"clinicalProviders"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.clinicalProviders)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[f.x],encapsulation:2}),s})();function Fw(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-clinical-provider-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","clinicalProvider_edit")("formControl",t.formControl)("clinicalProvider",t.clinicalProvider)}}const Pw=function(){return{}};function Iw(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-clinical-provider-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","clinicalProvider_create")("formControl",t.formControl)("clinicalProvider",e.DdM(3,Pw))}}function Dw(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-clinical-provider-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(d.ref.close())}),e.qZA()}2&s&&e.Q6J("clinicalProviders",o.data.items)}let Mw=(()=>{class s extends G.fS{constructor(t){super(),this.store=t,this.store.loadClinicalProvidersEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.clinicalProviders$.pipe((0,h.w)(i=>(0,D.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(qs.D))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","clinicalProvider","send","close"],[1,"w-full","h-full","bg-white",3,"clinicalProviders","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,Fw,2,3,"ng-template",null,1,e.W1O),e.YNc(3,Iw,1,4,"ng-template",null,2,e.W1O),e.YNc(5,Dw,1,1,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",d)("editTemplate",a)("createTemplate",l)("key",i.field.key)}},dependencies:[E.JJ,E.oH,H.$,Fn,Pn],encapsulation:2}),s})();function Ww(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-clinical-provider-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","clinicalProvider_edit")("clinicalProvider",t.value)}}const Ew=function(){return{}};function Ow(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-clinical-provider-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","clinicalProvider_create")("clinicalProvider",e.DdM(2,Ew))}function Lw(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-clinical-provider-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(null==d.ref?null:d.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("clinicalProviders",t.items)}}let $w=(()=>{class s extends pe{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","clinicalProvider","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","clinicalProviders","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,Ww,1,2,"ng-template",null,1,e.W1O),e.YNc(3,Ow,1,3,"ng-template",null,2,e.W1O),e.YNc(5,Lw,1,2,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[he,Fn,Pn],encapsulation:2}),s})(),Gw=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[qs.D],imports:[P.ez,U.F,E.UX,J.o,ae.u,$.P,j.t,me,k.h,se.G,G.X0.forChild({types:[{name:"clinical-provider-select",component:Mw,wrappers:["form-field"]},{name:"clinical-provider-grid",component:$w}]})]}),s})(),Rw=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[Gw]}),s})();class Et extends W.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class Qw extends Et{constructor(o,t,i){super("ValidateClinicalProviderSpecialtyExcelDataAction"),this.valid=!1,this.excelData=o,this.clinicalProviders=t,this.specialties=i}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name),this.validationContext.addRule(new g.mi(`clinicalProviderName_${i}_is_valid}`,"Clinical Provider Is Not Valid","clinicalProvider.name",t.clinicalProvider,this.clinicalProviders,!0)).addRule(new g.mi(`specialtyName_${i}_is_valid}`,"Specialty Is Not Valid","specialty.name",t.specialty,this.specialties,!0))}),this.validationContext.addRule(new g.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof g.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(a=>a.name),newNames:[i.newName]}):i instanceof g.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,D.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class Vw extends g.wS{constructor(o,t,i,a,l){super(o,t,i,a,l,!0)}}class jw extends g.ul{constructor(o,t,i,a=!1){super(o,t,a),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new g.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new Vw("name","The clinicalproviderspecialty name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class Uw extends Et{constructor(o){super("CreateClinicalProviderSpecialtyAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new jw("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateClinicalProviderSpecialty({input:this.input}).pipe((0,h.w)(o=>(0,ue.of)(o.data.created)))}}class Jw extends Et{constructor(o){super("UpdateClinicalProviderSpecialtiesAction"),this.clinicalProviderSpecialties=o}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.clinicalProviderSpecialties,!0))}performAction(){this.response=this.businessProvider.data.userUpdateClinicalProviderSpecialties({input:{clinicalProviderSpecialties:this.clinicalProviderSpecialties}}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}class zw extends Et{constructor(o,t){super("UpdateClinicalProviderSpecialtyAction"),this.clinicalProviderSpecialty=o,this.clinicalProviderSpecialtyId=t}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.clinicalProviderSpecialty,!0)).addRule(new g.xF("Id","Id should be a CUID and not null",this.clinicalProviderSpecialtyId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateClinicalProviderSpecialty({clinicalProviderSpecialtyId:this.clinicalProviderSpecialtyId,input:this.clinicalProviderSpecialty}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}let In=(()=>{class s extends W.nH{constructor(t,i,a){super("NotificationService.ClinicalProviderSpecialtyBusinessProviderService",t,a),this.data=i}createClinicalProviderSpecialty(t){const i=new Uw(t);return i.Do(this),i.response}updateClinicalProviderSpecialty(t,i){const a=new zw(t,i);return a.Do(this),a.response}importClinicalProviderSpecialties(t){const i=new Jw(t);return i.Do(this),i.response}validateClinicalProviderSpecialtyExcelData(t,i,a){const l=new Qw(t,i,a);return l.Do(this),l.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(K.ed),e.LFG(z.q),e.LFG(W.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),Hw=(()=>{class s extends W.nH{constructor(t,i,a){super("ClinicalProviderSpecialtyService",a,t),this.businessProvider=i}createClinicalProviderSpecialty(t){const i=Object.fromEntries(Object.entries(t).filter(([a,l])=>null!==l));return this.businessProvider.createClinicalProviderSpecialty(i)}updateClinicalProviderSpecialty(t,i){return this.businessProvider.updateClinicalProviderSpecialty(t,i)}importClinicalProviderSpecialties(t){return this.businessProvider.importClinicalProviderSpecialties(t)}validateClinicalProviderSpecialtyExcelData(t,i,a){return this.businessProvider.validateClinicalProviderSpecialtyExcelData(t,i,a)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(In,8),e.LFG(In),e.LFG(K.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),Ot=(()=>{class s extends b.m1{constructor(t,i,a,l,d,ee){if(super({loading:!1,clinicalProviderSpecialties:[],done:!1,searchQuery:"",formName:void 0,clinicalProviderId:void 0,specialtyId:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=a,this.toast=l,this.formService=d,this.clinicalProviderSpecialtyService=ee,this.errors$=this.select(n=>n.errors),this.loading$=this.select(n=>n.loading),this.done$=this.select(n=>n.done),this.item$=this.select(n=>n.item),this.clinicalProviderSpecialties$=this.select(n=>n.clinicalProviderSpecialties),this.clinicalProviders$=this.select(n=>n.clinicalProviders||[]),this.specialties$=this.select(n=>n.specialties||[]),this.clinicalProviderId$=this.select(n=>n.clinicalProviderId),this.specialtyId$=this.select(n=>n.specialtyId),this.paging$=this.select(n=>n.paging),this.searchQuery$=this.select(n=>n.searchQuery),this.formName$=this.select(n=>n.formName),this.actionResult$=this.select(this.item$,this.done$,(n,r)=>({item:n,done:r}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.clinicalProviderSpecialties$,this.clinicalProviders$,this.specialties$,(n,r,m,p,v,I,B)=>({errors:n,loading:r,item:m,formName:p,clinicalProviderSpecialties:v,clinicalProviders:I,specialties:B}),{debounce:!0}),this.input$=this.select(this.paging$,this.clinicalProviderId$,this.specialtyId$,this.searchQuery$,(n,r,m,p)=>({limit:n.limit,skip:n.skip,name:p,clinicalProviderId:r,specialtyId:m,total:n.total})),this.setFormName=this.updater((n,r)=>Object.assign(Object.assign({},n),{formName:r})),this.setClinicalProviderId=this.updater((n,r)=>Object.assign(Object.assign({},n),{clinicalProviderId:r})),this.setSpecialtyId=this.updater((n,r)=>Object.assign(Object.assign({},n),{specialtyId:r})),this.filterClinicalProviders=n=>this.data.userSelectClinicalProviders({input:{name:n}}).pipe((0,b._b)(r=>{let m=r.data.items;return this.patchState({clinicalProviders:m}),m},r=>this.patchState({errors:r.graphQLErrors?r.graphQLErrors:r})),(0,fe.U)(r=>r.data.items)),this.filterSpecialties=n=>this.data.userSelectSpecialties({input:{name:n}}).pipe((0,b._b)(r=>{let m=r.data.items;return this.patchState({specialties:m}),m},r=>this.patchState({errors:r.graphQLErrors?r.graphQLErrors:r})),(0,fe.U)(r=>r.data.items)),this.addClinicalProvider=this.updater((n,r)=>Object.assign(Object.assign({},n),{clinicalProviders:n.clinicalProviders.concat(r)})),this.addSpecialty=this.updater((n,r)=>Object.assign(Object.assign({},n),{specialties:n.specialties.concat(r)})),this.setItem=this.updater((n,r)=>Object.assign(Object.assign({},n),{item:r})),this.addNewClinicalProviderSpecialty=this.updater((n,r)=>Object.assign(Object.assign({},n),{clinicalProviderSpecialties:[...n.clinicalProviderSpecialties,r]})),this.updateClinicalProviderSpecialty=this.updater((n,r)=>Object.assign(Object.assign({},n),{clinicalProviderSpecialties:n.clinicalProviderSpecialties.map(m=>m.id===r.id?r:m)})),this.addClinicalProviderSpecialties=this.updater((n,r)=>Object.assign(Object.assign({},n),{clinicalProviderSpecialties:n.clinicalProviderSpecialties.concat(r)})),this.updateClinicalProviderSpecialties=this.updater((n,r)=>Object.assign(Object.assign({},n),{clinicalProviderSpecialties:n.clinicalProviderSpecialties.map(m=>r.find(v=>v.id===m.id)||m)})),this.setSearchQuery=this.updater((n,r)=>Object.assign(Object.assign({},n),{searchQuery:r})),this.loadClinicalProviderSpecialtyEffect=this.effect(n=>n.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(r=>this.data.userClinicalProviderSpecialty({clinicalProviderSpecialtyId:r}).pipe((0,b._b)(m=>{this.patchState({item:m.data.item,errors:m.errors,loading:!1})},m=>this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})))))),this.loadClinicalProviderSpecialtiesEffect=this.effect(n=>n.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.input$),(0,h.w)(([r,m])=>this.data.userClinicalProviderSpecialties({input:m}).pipe((0,b._b)(p=>this.patchState({paging:{limit:m.limit,skip:m.skip,total:p.data.count.total},clinicalProviderSpecialties:p.data.items,errors:p.errors,loading:!1}),p=>this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})))))),this.createClinicalProviderSpecialtyEffect=this.effect(n=>n.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(r=>this.clinicalProviderSpecialtyService.createClinicalProviderSpecialty(Object.assign({},r)).pipe((0,b._b)(m=>{this.addNewClinicalProviderSpecialty(m),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:m,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},m=>{m.graphQLErrors?(this.toast.error(m.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})):(this.toast.error(m.Message),this.formService.setErrors(m.Data))}))))),this.updateClinicalProviderSpecialtyEffect=this.effect(n=>n.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([r,m])=>this.clinicalProviderSpecialtyService.updateClinicalProviderSpecialty(r,r.id).pipe((0,b._b)(p=>{this.updateClinicalProviderSpecialty(p),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:p,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},p=>{p.graphQLErrors?(this.toast.error(p.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})):(this.toast.error(p.Message),this.formService.setErrors(p.Data))}))))),this.deleteClinicalProviderSpecialtyEffect=this.effect(n=>n.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([r,m])=>this.data.userDeleteClinicalProviderSpecialty({clinicalProviderSpecialtyId:m.id}).pipe((0,b._b)(p=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:p.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},p=>{p.graphQLErrors?(this.toast.error(p.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})):(this.toast.error(p.Message),this.formService.setErrors(p.Data))}))))),this.importExcelEffect=this.effect(n=>n.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(r=>this.clinicalProviderSpecialtyService.importClinicalProviderSpecialties(r).pipe((0,de.K)(m=>{var p;return this.toast.error(null!==(p=m.Message)&&void 0!==p?p:"Failed to save",{duration:3e3}),q.E}),(0,y.b)(m=>{const p=JSON.parse(m.created),v=JSON.parse(m.updated),I=JSON.parse(m.failed),B=p.length+v.length+I.length;this.addClinicalProviderSpecialties(p),this.updateClinicalProviderSpecialties(v),this.toast.success(`${p.length} created, ${v.length} updated, ${I.length} failed of total ${B}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("clinicalProviderSpecialtyId")?(this.route.snapshot.paramMap.get("clinicalProviderSpecialtyId"),this.setFormName("clinicalProviderSpecialty_edit")):this.setFormName("clinicalProviderSpecialty_create"),this.route.snapshot.paramMap.has("clinicalProviderId")){var c=this.route.snapshot.paramMap.get("clinicalProviderId");this.setClinicalProviderId(c)}if(this.route.snapshot.paramMap.has("specialtyId")){var u=this.route.snapshot.paramMap.get("specialtyId");this.setSpecialtyId(u)}}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.clinicalProviderSpecialtyService.validateClinicalProviderSpecialtyExcelData(t,i.clinicalProviders,i.specialties)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(z.q),e.LFG(O.F0),e.LFG(O.gz),e.LFG(X.F),e.LFG(Z.o),e.LFG(Hw))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function qw(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.close.emit())})("formIsReady",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.clinicalProviderSpecialty)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let Dn=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"clinicalProviderSpecialty_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({id:null,name:""}),this.store.vm$.subscribe(i=>{this.clinicalProviderSpecialty=i.item})):t.formName&&t.formName.currentValue&&"clinicalProviderSpecialty_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadClinicalProviderSpecialtyEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.clinicalProviderSpecialty=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Ot),e.Y36(O.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-clinical-provider-specialty-form"]],inputs:{clinicalProviderSpecialty:"clinicalProviderSpecialty",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,qw,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[P.O5,te.M,P.Ov],encapsulation:2}),s})(),Mn=(()=>{class s{constructor(){this.autoHeight=!1,this.clinicalProviderSpecialties=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[{field:"clinicalProvider.name",headerName:"Clinical Provider",filter:"agTextColumnFilter"},{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{field:"npi",filter:"agTextColumnFilter"},{field:"clinicalProviderId",filter:"agTextColumnFilter",hide:!0},{field:"clinicalProvider.name",header:"ClinicalProvider",filter:"agTextColumnFilter",hide:!0},{field:"specialtyId",filter:"agTextColumnFilter",hide:!0},{field:"specialty.name",header:"Specialty",filter:"agTextColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var a;t.includes(null===(a=i.data)||void 0===a?void 0:a.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-clinical-provider-specialty-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(f.x,5),2&t){let a;e.iGM(a=e.CRH())&&(i.tableView=a.first)}},inputs:{autoHeight:"autoHeight",clinicalProviderSpecialties:"clinicalProviderSpecialties"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","data","showSidebar","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("data",i.clinicalProviderSpecialties)("showSidebar",!1)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[f.x],encapsulation:2}),s})();function Kw(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-clinical-provider-specialty-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","clinicalProviderSpecialty_edit")("formControl",t.formControl)("clinicalProviderSpecialty",t.clinicalProviderSpecialty)}}const Zw=function(){return{}};function Bw(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-clinical-provider-specialty-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","clinicalProviderSpecialty_create")("formControl",t.formControl)("clinicalProviderSpecialty",e.DdM(3,Zw))}}function kw(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-clinical-provider-specialty-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(d.ref.close())}),e.qZA()}2&s&&e.Q6J("clinicalProviderSpecialties",o.data.items)}let Yw=(()=>{class s extends G.fS{constructor(t){super(),this.store=t,this.store.loadClinicalProviderSpecialtiesEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.clinicalProviderSpecialties$.pipe((0,h.w)(i=>(0,D.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Ot))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e._Bn([Ot]),e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","clinicalProviderSpecialty","send","close"],[1,"w-full","h-full","bg-white",3,"clinicalProviderSpecialties","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,Kw,2,3,"ng-template",null,1,e.W1O),e.YNc(3,Bw,1,4,"ng-template",null,2,e.W1O),e.YNc(5,kw,1,1,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",d)("editTemplate",a)("createTemplate",l)("key",i.field.key)}},dependencies:[E.JJ,E.oH,H.$,Dn,Mn],encapsulation:2}),s})();function Xw(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-clinical-provider-specialty-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","clinicalProviderSpecialty_edit")("clinicalProviderSpecialty",t.value)}}const ex=function(){return{}};function tx(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-clinical-provider-specialty-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","clinicalProviderSpecialty_create")("clinicalProviderSpecialty",e.DdM(2,ex))}function ix(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-clinical-provider-specialty-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(null==d.ref?null:d.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("clinicalProviderSpecialties",t.items)}}let sx=(()=>{class s extends pe{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","clinicalProviderSpecialty","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","clinicalProviderSpecialties","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,Xw,1,2,"ng-template",null,1,e.W1O),e.YNc(3,tx,1,3,"ng-template",null,2,e.W1O),e.YNc(5,ix,1,2,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[he,Dn,Mn],encapsulation:2}),s})(),ox=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[Ot],imports:[P.ez,U.F,E.UX,J.o,ae.u,$.P,j.t,me,k.h,se.G,G.X0.forChild({types:[{name:"clinical-provider-specialty-select",component:Yw,wrappers:["form-field"]},{name:"clinical-provider-specialty-grid",component:sx}]})]}),s})(),ax=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[ox]}),s})();class Lt extends W.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class rx extends Lt{constructor(o,t,i){super("ValidateClinicalProviderTagExcelDataAction"),this.valid=!1,this.excelData=o,this.clinicalProviders=t,this.tags=i}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name),this.validationContext.addRule(new g.mi(`clinicalProviderName_${i}_is_valid}`,"Clinical Provider Is Not Valid","clinicalProvider.name",t.clinicalProvider,this.clinicalProviders,!0)),this.validationContext.addRule(new g.mi(`tagName_${i}_is_valid}`,"Tag Is Not Valid","tag.name",t.tag,this.tags,!0))}),this.validationContext.addRule(new g.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof g.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(a=>a.name),newNames:[i.newName]}):i instanceof g.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,D.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class nx extends g.wS{constructor(o,t,i,a,l){super(o,t,i,a,l,!0)}}class lx extends g.ul{constructor(o,t,i,a=!1){super(o,t,a),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new g.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new nx("name","The clinicalprovidertag name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class cx extends Lt{constructor(o){super("CreateClinicalProviderTagAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new lx("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateClinicalProviderTag({input:this.input}).pipe((0,h.w)(o=>(0,ue.of)(o.data.created)))}}class dx extends Lt{constructor(o){super("UpdateClinicalProviderTagsAction"),this.clinicalProviderTags=o}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.clinicalProviderTags,!0))}performAction(){this.response=this.businessProvider.data.userUpdateClinicalProviderTags({input:{clinicalProviderTags:this.clinicalProviderTags}}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}class ux extends Lt{constructor(o,t){super("UpdateClinicalProviderTagAction"),this.clinicalProviderTag=o,this.clinicalProviderTagId=t}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.clinicalProviderTag,!0)).addRule(new g.xF("Id","Id should be a CUID and not null",this.clinicalProviderTagId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateClinicalProviderTag({clinicalProviderTagId:this.clinicalProviderTagId,input:this.clinicalProviderTag}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}let Wn=(()=>{class s extends W.nH{constructor(t,i,a){super("NotificationService.ClinicalProviderTagBusinessProviderService",t,a),this.data=i}createClinicalProviderTag(t){const i=new cx(t);return i.Do(this),i.response}updateClinicalProviderTag(t,i){const a=new ux(t,i);return a.Do(this),a.response}importClinicalProviderTags(t){const i=new dx(t);return i.Do(this),i.response}validateClinicalProviderTagExcelData(t,i,a){const l=new rx(t,i,a);return l.Do(this),l.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(K.ed),e.LFG(z.q),e.LFG(W.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),mx=(()=>{class s extends W.nH{constructor(t,i,a){super("ClinicalProviderTagService",a,t),this.businessProvider=i}createClinicalProviderTag(t){const i=Object.fromEntries(Object.entries(t).filter(([a,l])=>null!==l));return this.businessProvider.createClinicalProviderTag(i)}updateClinicalProviderTag(t,i){return this.businessProvider.updateClinicalProviderTag(t,i)}importClinicalProviderTags(t){return this.businessProvider.importClinicalProviderTags(t)}validateClinicalProviderTagExcelData(t,i,a){return this.businessProvider.validateClinicalProviderTagExcelData(t,i,a)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(Wn,8),e.LFG(Wn),e.LFG(K.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),Ks=(()=>{class s extends b.m1{constructor(t,i,a,l,d,ee){if(super({loading:!1,clinicalProviderTags:[],done:!1,searchQuery:"",formName:void 0,clinicalProviderId:void 0,tagId:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=a,this.toast=l,this.formService=d,this.clinicalProviderTagService=ee,this.errors$=this.select(n=>n.errors),this.loading$=this.select(n=>n.loading),this.done$=this.select(n=>n.done),this.item$=this.select(n=>n.item),this.clinicalProviderTags$=this.select(n=>n.clinicalProviderTags),this.clinicalProviders$=this.select(n=>n.clinicalProviders||[]),this.tags$=this.select(n=>n.tags||[]),this.clinicalProviderId$=this.select(n=>n.clinicalProviderId),this.tagId$=this.select(n=>n.tagId),this.paging$=this.select(n=>n.paging),this.searchQuery$=this.select(n=>n.searchQuery),this.formName$=this.select(n=>n.formName),this.actionResult$=this.select(this.item$,this.done$,(n,r)=>({item:n,done:r}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.clinicalProviderTags$,this.clinicalProviders$,this.tags$,(n,r,m,p,v,I,B)=>({errors:n,loading:r,item:m,formName:p,clinicalProviderTags:v,clinicalProviders:I,tags:B}),{debounce:!0}),this.input$=this.select(this.paging$,this.clinicalProviderId$,this.tagId$,this.searchQuery$,(n,r,m,p)=>({limit:n.limit,skip:n.skip,name:p,clinicalProviderId:r,tagId:m,total:n.total})),this.setFormName=this.updater((n,r)=>Object.assign(Object.assign({},n),{formName:r})),this.setClinicalProviderId=this.updater((n,r)=>Object.assign(Object.assign({},n),{clinicalProviderId:r})),this.setTagId=this.updater((n,r)=>Object.assign(Object.assign({},n),{tagId:r})),this.filterClinicalProviders=n=>this.data.userSelectClinicalProviders({input:{name:n}}).pipe((0,b._b)(r=>{let m=r.data.items;return this.patchState({clinicalProviders:m}),m},r=>this.patchState({errors:r.graphQLErrors?r.graphQLErrors:r})),(0,fe.U)(r=>r.data.items)),this.filterTags=n=>this.data.userSelectTags({input:{name:n}}).pipe((0,b._b)(r=>{let m=r.data.items;return this.patchState({tags:m}),m},r=>this.patchState({errors:r.graphQLErrors?r.graphQLErrors:r})),(0,fe.U)(r=>r.data.items)),this.addClinicalProvider=this.updater((n,r)=>Object.assign(Object.assign({},n),{clinicalProviders:n.clinicalProviders.concat(r)})),this.addTag=this.updater((n,r)=>Object.assign(Object.assign({},n),{tags:n.tags.concat(r)})),this.setItem=this.updater((n,r)=>Object.assign(Object.assign({},n),{item:r})),this.addNewClinicalProviderTag=this.updater((n,r)=>Object.assign(Object.assign({},n),{clinicalProviderTags:[...n.clinicalProviderTags,r]})),this.updateClinicalProviderTag=this.updater((n,r)=>Object.assign(Object.assign({},n),{clinicalProviderTags:n.clinicalProviderTags.map(m=>m.id===r.id?r:m)})),this.addClinicalProviderTags=this.updater((n,r)=>Object.assign(Object.assign({},n),{clinicalProviderTags:n.clinicalProviderTags.concat(r)})),this.updateClinicalProviderTags=this.updater((n,r)=>Object.assign(Object.assign({},n),{clinicalProviderTags:n.clinicalProviderTags.map(m=>r.find(v=>v.id===m.id)||m)})),this.setSearchQuery=this.updater((n,r)=>Object.assign(Object.assign({},n),{searchQuery:r})),this.loadClinicalProviderTagEffect=this.effect(n=>n.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(r=>this.data.userClinicalProviderTag({clinicalProviderTagId:r}).pipe((0,b._b)(m=>{this.patchState({item:m.data.item,errors:m.errors,loading:!1})},m=>this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})))))),this.loadClinicalProviderTagsEffect=this.effect(n=>n.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.input$),(0,h.w)(([r,m])=>this.data.userClinicalProviderTags({input:m}).pipe((0,b._b)(p=>this.patchState({paging:{limit:m.limit,skip:m.skip,total:p.data.count.total},clinicalProviderTags:p.data.items,errors:p.errors,loading:!1}),p=>this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})))))),this.createClinicalProviderTagEffect=this.effect(n=>n.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(r=>this.clinicalProviderTagService.createClinicalProviderTag(Object.assign({},r)).pipe((0,b._b)(m=>{this.addNewClinicalProviderTag(m),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:m,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},m=>{m.graphQLErrors?(this.toast.error(m.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})):(this.toast.error(m.Message),this.formService.setErrors(m.Data))}))))),this.updateClinicalProviderTagEffect=this.effect(n=>n.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([r,m])=>this.clinicalProviderTagService.updateClinicalProviderTag(r,r.id).pipe((0,b._b)(p=>{this.updateClinicalProviderTag(p),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:p,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},p=>{p.graphQLErrors?(this.toast.error(p.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})):(this.toast.error(p.Message),this.formService.setErrors(p.Data))}))))),this.deleteClinicalProviderTagEffect=this.effect(n=>n.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([r,m])=>this.data.userDeleteClinicalProviderTag({clinicalProviderTagId:m.id}).pipe((0,b._b)(p=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:p.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},p=>{p.graphQLErrors?(this.toast.error(p.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})):(this.toast.error(p.Message),this.formService.setErrors(p.Data))}))))),this.importExcelEffect=this.effect(n=>n.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(r=>this.clinicalProviderTagService.importClinicalProviderTags(r).pipe((0,de.K)(m=>{var p;return this.toast.error(null!==(p=m.Message)&&void 0!==p?p:"Failed to save",{duration:3e3}),q.E}),(0,y.b)(m=>{const p=JSON.parse(m.created),v=JSON.parse(m.updated),I=JSON.parse(m.failed),B=p.length+v.length+I.length;this.addClinicalProviderTags(p),this.updateClinicalProviderTags(v),this.toast.success(`${p.length} created, ${v.length} updated, ${I.length} failed of total ${B}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("clinicalProviderTagId")?(this.route.snapshot.paramMap.get("clinicalProviderTagId"),this.setFormName("clinicalProviderTag_edit")):this.setFormName("clinicalProviderTag_create"),this.route.snapshot.paramMap.has("clinicalProviderId")){var c=this.route.snapshot.paramMap.get("clinicalProviderId");this.setClinicalProviderId(c)}if(this.route.snapshot.paramMap.has("tagId")){var u=this.route.snapshot.paramMap.get("tagId");this.setTagId(u)}}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.clinicalProviderTagService.validateClinicalProviderTagExcelData(t,i.clinicalProviders,i.tags)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(z.q),e.LFG(O.F0),e.LFG(O.gz),e.LFG(X.F),e.LFG(Z.o),e.LFG(mx))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function px(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.close.emit())})("formIsReady",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.clinicalProviderTag)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let En=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"clinicalProviderTag_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.clinicalProviderTag=i.item})):t.formName&&t.formName.currentValue&&"clinicalProviderTag_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadClinicalProviderTagEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.clinicalProviderTag=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Ks),e.Y36(O.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-clinical-provider-tag-form"]],inputs:{clinicalProviderTag:"clinicalProviderTag",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,px,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[P.O5,te.M,P.Ov],encapsulation:2}),s})(),On=(()=>{class s{constructor(){this.autoHeight=!1,this.clinicalProviderTags=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[{field:"clinicalProvider.name",headerName:"Clinical Provider",filter:"agTextColumnFilter"},{field:"tag.name",headerName:"Tag",filter:"agTextColumnFilter"},{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{field:"clinicalProviderId",filter:"agTextColumnFilter",hide:!0},{field:"tagId",filter:"agTextColumnFilter",hide:!0}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var a;t.includes(null===(a=i.data)||void 0===a?void 0:a.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-clinical-provider-tag-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(f.x,5),2&t){let a;e.iGM(a=e.CRH())&&(i.tableView=a.first)}},inputs:{autoHeight:"autoHeight",clinicalProviderTags:"clinicalProviderTags"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.clinicalProviderTags)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[f.x],encapsulation:2}),s})();function hx(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-clinical-provider-tag-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","clinicalProviderTag_edit")("formControl",t.formControl)("clinicalProviderTag",t.clinicalProviderTag)}}const fx=function(){return{}};function _x(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-clinical-provider-tag-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","clinicalProviderTag_create")("formControl",t.formControl)("clinicalProviderTag",e.DdM(3,fx))}}function gx(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-clinical-provider-tag-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(d.ref.close())}),e.qZA()}2&s&&e.Q6J("clinicalProviderTags",o.data.items)}let vx=(()=>{class s extends G.fS{constructor(t){super(),this.store=t,this.store.loadClinicalProviderTagsEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.clinicalProviderTags$.pipe((0,h.w)(i=>(0,D.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Ks))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","clinicalProviderTag","send","close"],[1,"w-full","h-full","bg-white",3,"clinicalProviderTags","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,hx,2,3,"ng-template",null,1,e.W1O),e.YNc(3,_x,1,4,"ng-template",null,2,e.W1O),e.YNc(5,gx,1,1,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",d)("editTemplate",a)("createTemplate",l)("key",i.field.key)}},dependencies:[E.JJ,E.oH,H.$,En,On],encapsulation:2}),s})();function Cx(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-clinical-provider-tag-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","clinicalProviderTag_edit")("clinicalProviderTag",t.value)}}const Sx=function(){return{}};function bx(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-clinical-provider-tag-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","clinicalProviderTag_create")("clinicalProviderTag",e.DdM(2,Sx))}function Tx(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-clinical-provider-tag-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(null==d.ref?null:d.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("clinicalProviderTags",t.items)}}let yx=(()=>{class s extends pe{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","clinicalProviderTag","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","clinicalProviderTags","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,Cx,1,2,"ng-template",null,1,e.W1O),e.YNc(3,bx,1,3,"ng-template",null,2,e.W1O),e.YNc(5,Tx,1,2,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[he,En,On],encapsulation:2}),s})(),wx=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[Ks],imports:[P.ez,U.F,E.UX,J.o,ae.u,$.P,j.t,me,k.h,se.G,G.X0.forChild({types:[{name:"clinical-provider-tag-select",component:vx,wrappers:["form-field"]},{name:"clinical-provider-tag-grid",component:yx}]})]}),s})(),xx=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[wx]}),s})();class $t extends W.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class Nx extends $t{constructor(o,t){super("ValidateContactEmailExcelDataAction"),this.valid=!1,this.excelData=o,this.contacts=t}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name),this.validationContext.addRule(new g.mi(`contactName_${i}_is_valid}`,"Contact Is Not Valid","contact.name",t.contact,this.contacts,!0))}),this.validationContext.addRule(new g.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof g.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(a=>a.name),newNames:[i.newName]}):i instanceof g.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,D.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class Ax extends g.wS{constructor(o,t,i,a,l){super(o,t,i,a,l,!0)}}class Fx extends g.ul{constructor(o,t,i,a=!1){super(o,t,a),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new g.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new Ax("name","The contactemail name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class Px extends $t{constructor(o){super("CreateContactEmailAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new Fx("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateContactEmail({input:this.input}).pipe((0,h.w)(o=>(0,ue.of)(o.data.created)))}}class Ix extends $t{constructor(o){super("UpdateContactEmailsAction"),this.contactEmails=o}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.contactEmails,!0))}performAction(){this.response=this.businessProvider.data.userUpdateContactEmails({input:{contactEmails:this.contactEmails}}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}class Dx extends $t{constructor(o,t){super("UpdateContactEmailAction"),this.contactEmail=o,this.contactEmailId=t}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.contactEmail,!0)).addRule(new g.xF("Id","Id should be a CUID and not null",this.contactEmailId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateContactEmail({contactEmailId:this.contactEmailId,input:this.contactEmail}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}let Ln=(()=>{class s extends W.nH{constructor(t,i,a){super("NotificationService.ContactEmailBusinessProviderService",t,a),this.data=i}createContactEmail(t){const i=new Px(t);return i.Do(this),i.response}updateContactEmail(t,i){const a=new Dx(t,i);return a.Do(this),a.response}importContactEmails(t){const i=new Ix(t);return i.Do(this),i.response}validateContactEmailExcelData(t,i){const a=new Nx(t,i);return a.Do(this),a.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(K.ed),e.LFG(z.q),e.LFG(W.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),Mx=(()=>{class s extends W.nH{constructor(t,i,a){super("ContactEmailService",a,t),this.businessProvider=i}createContactEmail(t){const i=Object.fromEntries(Object.entries(t).filter(([a,l])=>null!==l));return this.businessProvider.createContactEmail(i)}updateContactEmail(t,i){return this.businessProvider.updateContactEmail(t,i)}importContactEmails(t){return this.businessProvider.importContactEmails(t)}validateContactEmailExcelData(t,i){return this.businessProvider.validateContactEmailExcelData(t,i)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(Ln,8),e.LFG(Ln),e.LFG(K.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),Zs=(()=>{class s extends b.m1{constructor(t,i,a,l,d,ee){if(super({loading:!1,contactEmails:[],done:!1,searchQuery:"",formName:void 0,contactId:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=a,this.toast=l,this.formService=d,this.contactEmailService=ee,this.errors$=this.select(u=>u.errors),this.loading$=this.select(u=>u.loading),this.done$=this.select(u=>u.done),this.item$=this.select(u=>u.item),this.contactEmails$=this.select(u=>u.contactEmails),this.contacts$=this.select(u=>u.contacts||[]),this.contactId$=this.select(u=>u.contactId),this.paging$=this.select(u=>u.paging),this.searchQuery$=this.select(u=>u.searchQuery),this.formName$=this.select(u=>u.formName),this.actionResult$=this.select(this.item$,this.done$,(u,n)=>({item:u,done:n}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.contactEmails$,this.contacts$,(u,n,r,m,p,v)=>({errors:u,loading:n,item:r,formName:m,contactEmails:p,contacts:v}),{debounce:!0}),this.input$=this.select(this.paging$,this.contactId$,this.searchQuery$,(u,n,r)=>({limit:u.limit,skip:u.skip,name:r,contactId:n,total:u.total})),this.setFormName=this.updater((u,n)=>Object.assign(Object.assign({},u),{formName:n})),this.setContactId=this.updater((u,n)=>Object.assign(Object.assign({},u),{contactId:n})),this.filterContacts=u=>this.data.userSelectContacts({input:{name:u}}).pipe((0,b._b)(n=>{let r=n.data.items;return this.patchState({contacts:r}),r},n=>this.patchState({errors:n.graphQLErrors?n.graphQLErrors:n})),(0,fe.U)(n=>n.data.items)),this.addContact=this.updater((u,n)=>Object.assign(Object.assign({},u),{contacts:u.contacts.concat(n)})),this.setItem=this.updater((u,n)=>Object.assign(Object.assign({},u),{item:n})),this.addNewContactEmail=this.updater((u,n)=>Object.assign(Object.assign({},u),{contactEmails:[...u.contactEmails,n]})),this.updateContactEmail=this.updater((u,n)=>Object.assign(Object.assign({},u),{contactEmails:u.contactEmails.map(r=>r.id===n.id?n:r)})),this.addContactEmails=this.updater((u,n)=>Object.assign(Object.assign({},u),{contactEmails:u.contactEmails.concat(n)})),this.updateContactEmails=this.updater((u,n)=>Object.assign(Object.assign({},u),{contactEmails:u.contactEmails.map(r=>n.find(p=>p.id===r.id)||r)})),this.setSearchQuery=this.updater((u,n)=>Object.assign(Object.assign({},u),{searchQuery:n})),this.loadContactEmailEffect=this.effect(u=>u.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(n=>this.data.userContactEmail({contactEmailId:n}).pipe((0,b._b)(r=>{this.patchState({item:r.data.item,errors:r.errors,loading:!1})},r=>this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})))))),this.loadContactEmailsEffect=this.effect(u=>u.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.input$),(0,h.w)(([n,r])=>this.data.userContactEmails({input:r}).pipe((0,b._b)(m=>this.patchState({paging:{limit:r.limit,skip:r.skip,total:m.data.count.total},contactEmails:m.data.items,errors:m.errors,loading:!1}),m=>this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})))))),this.createContactEmailEffect=this.effect(u=>u.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(n=>this.contactEmailService.createContactEmail(Object.assign({},n)).pipe((0,b._b)(r=>{this.addNewContactEmail(r),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:r,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},r=>{r.graphQLErrors?(this.toast.error(r.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})):(this.toast.error(r.Message),this.formService.setErrors(r.Data))}))))),this.updateContactEmailEffect=this.effect(u=>u.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([n,r])=>this.contactEmailService.updateContactEmail(n,n.id).pipe((0,b._b)(m=>{this.updateContactEmail(m),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:m,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},m=>{m.graphQLErrors?(this.toast.error(m.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})):(this.toast.error(m.Message),this.formService.setErrors(m.Data))}))))),this.deleteContactEmailEffect=this.effect(u=>u.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([n,r])=>this.data.userDeleteContactEmail({contactEmailId:r.id}).pipe((0,b._b)(m=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:m.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},m=>{m.graphQLErrors?(this.toast.error(m.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})):(this.toast.error(m.Message),this.formService.setErrors(m.Data))}))))),this.importExcelEffect=this.effect(u=>u.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(n=>this.contactEmailService.importContactEmails(n).pipe((0,de.K)(r=>{var m;return this.toast.error(null!==(m=r.Message)&&void 0!==m?m:"Failed to save",{duration:3e3}),q.E}),(0,y.b)(r=>{const m=JSON.parse(r.created),p=JSON.parse(r.updated),v=JSON.parse(r.failed),I=m.length+p.length+v.length;this.addContactEmails(m),this.updateContactEmails(p),this.toast.success(`${m.length} created, ${p.length} updated, ${v.length} failed of total ${I}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("contactEmailId")?(this.route.snapshot.paramMap.get("contactEmailId"),this.setFormName("contactEmail_edit")):this.setFormName("contactEmail_create"),this.route.snapshot.paramMap.has("contactId")){var c=this.route.snapshot.paramMap.get("contactId");this.setContactId(c)}}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.contactEmailService.validateContactEmailExcelData(t,i.contacts)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(z.q),e.LFG(O.F0),e.LFG(O.gz),e.LFG(X.F),e.LFG(Z.o),e.LFG(Mx))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function Wx(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.close.emit())})("formIsReady",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.contactEmail)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let $n=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"contactEmail_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.contactEmail=i.item})):t.formName&&t.formName.currentValue&&"contactEmail_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadContactEmailEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.contactEmail=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Zs),e.Y36(O.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-contact-email-form"]],inputs:{contactEmail:"contactEmail",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,Wx,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[P.O5,te.M,P.Ov],encapsulation:2}),s})(),Gn=(()=>{class s{constructor(){this.autoHeight=!1,this.contactEmails=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[{field:"contact.name",headerName:"Contact",filter:"agTextColumnFilter"},{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"email",filter:"agTextColumnFilter"},{field:"name",filter:"agTextColumnFilter"},{field:"contactId",filter:"agTextColumnFilter",hide:!0}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var a;t.includes(null===(a=i.data)||void 0===a?void 0:a.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-contact-email-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(f.x,5),2&t){let a;e.iGM(a=e.CRH())&&(i.tableView=a.first)}},inputs:{autoHeight:"autoHeight",contactEmails:"contactEmails"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.contactEmails)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[f.x],encapsulation:2}),s})();function Ex(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-contact-email-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","contactEmail_edit")("formControl",t.formControl)("contactEmail",t.contactEmail)}}const Ox=function(){return{}};function Lx(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-contact-email-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","contactEmail_create")("formControl",t.formControl)("contactEmail",e.DdM(3,Ox))}}function $x(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-contact-email-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(d.ref.close())}),e.qZA()}2&s&&e.Q6J("contactEmails",o.data.items)}let Gx=(()=>{class s extends G.fS{constructor(t){super(),this.store=t,this.store.loadContactEmailsEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.contactEmails$.pipe((0,h.w)(i=>(0,D.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Zs))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","contactEmail","send","close"],[1,"w-full","h-full","bg-white",3,"contactEmails","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,Ex,2,3,"ng-template",null,1,e.W1O),e.YNc(3,Lx,1,4,"ng-template",null,2,e.W1O),e.YNc(5,$x,1,1,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",d)("editTemplate",a)("createTemplate",l)("key",i.field.key)}},dependencies:[E.JJ,E.oH,H.$,$n,Gn],encapsulation:2}),s})();function Rx(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-contact-email-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","contactEmail_edit")("contactEmail",t.value)}}const Qx=function(){return{}};function Vx(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-contact-email-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","contactEmail_create")("contactEmail",e.DdM(2,Qx))}function jx(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-contact-email-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(null==d.ref?null:d.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("contactEmails",t.items)}}let Ux=(()=>{class s extends pe{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","contactEmail","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","contactEmails","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,Rx,1,2,"ng-template",null,1,e.W1O),e.YNc(3,Vx,1,3,"ng-template",null,2,e.W1O),e.YNc(5,jx,1,2,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[he,$n,Gn],encapsulation:2}),s})(),Jx=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[Zs],imports:[P.ez,U.F,E.UX,J.o,ae.u,$.P,j.t,me,k.h,se.G,G.X0.forChild({types:[{name:"contact-email-select",component:Gx,wrappers:["form-field"]},{name:"contact-email-grid",component:Ux}]})]}),s})(),zx=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[Jx]}),s})();class Gt extends W.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class Hx extends Gt{constructor(o){super("ValidateContactKindExcelDataAction"),this.valid=!1,this.excelData=o}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name)}),this.validationContext.addRule(new g.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof g.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(a=>a.name),newNames:[i.newName]}):i instanceof g.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,D.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class qx extends g.wS{constructor(o,t,i,a,l){super(o,t,i,a,l,!0)}}class Kx extends g.ul{constructor(o,t,i,a=!1){super(o,t,a),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new g.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new qx("name","The contactkind name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class Zx extends Gt{constructor(o){super("CreateContactKindAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new Kx("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateContactKind({input:this.input}).pipe((0,h.w)(o=>(0,ue.of)(o.data.created)))}}class Bx extends Gt{constructor(o){super("UpdateContactKindsAction"),this.contactKinds=o}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.contactKinds,!0))}performAction(){this.response=this.businessProvider.data.userUpdateContactKinds({input:{contactKinds:this.contactKinds}}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}class kx extends Gt{constructor(o,t){super("UpdateContactKindAction"),this.contactKind=o,this.contactKindId=t}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.contactKind,!0)).addRule(new g.xF("Id","Id should be a CUID and not null",this.contactKindId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateContactKind({contactKindId:this.contactKindId,input:this.contactKind}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}let Rn=(()=>{class s extends W.nH{constructor(t,i,a){super("NotificationService.ContactKindBusinessProviderService",t,a),this.data=i}createContactKind(t){const i=new Zx(t);return i.Do(this),i.response}updateContactKind(t,i){const a=new kx(t,i);return a.Do(this),a.response}importContactKinds(t){const i=new Bx(t);return i.Do(this),i.response}validateContactKindExcelData(t){const i=new Hx(t);return i.Do(this),i.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(K.ed),e.LFG(z.q),e.LFG(W.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),Yx=(()=>{class s extends W.nH{constructor(t,i,a){super("ContactKindService",a,t),this.businessProvider=i}createContactKind(t){const i=Object.fromEntries(Object.entries(t).filter(([a,l])=>null!==l));return this.businessProvider.createContactKind(i)}updateContactKind(t,i){return this.businessProvider.updateContactKind(t,i)}importContactKinds(t){return this.businessProvider.importContactKinds(t)}validateContactKindExcelData(t){return this.businessProvider.validateContactKindExcelData(t)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(Rn,8),e.LFG(Rn),e.LFG(K.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),Bs=(()=>{class s extends b.m1{constructor(t,i,a,l,d,ee){super({loading:!1,contactKinds:[],done:!1,searchQuery:"",formName:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=a,this.toast=l,this.formService=d,this.contactKindService=ee,this.errors$=this.select(c=>c.errors),this.loading$=this.select(c=>c.loading),this.done$=this.select(c=>c.done),this.item$=this.select(c=>c.item),this.contactKinds$=this.select(c=>c.contactKinds),this.paging$=this.select(c=>c.paging),this.searchQuery$=this.select(c=>c.searchQuery),this.formName$=this.select(c=>c.formName),this.actionResult$=this.select(this.item$,this.done$,(c,u)=>({item:c,done:u}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.contactKinds$,(c,u,n,r,m)=>({errors:c,loading:u,item:n,formName:r,contactKinds:m}),{debounce:!0}),this.input$=this.select(this.paging$,this.searchQuery$,(c,u)=>({limit:c.limit,skip:c.skip,name:u,total:c.total})),this.setFormName=this.updater((c,u)=>Object.assign(Object.assign({},c),{formName:u})),this.setItem=this.updater((c,u)=>Object.assign(Object.assign({},c),{item:u})),this.addNewContactKind=this.updater((c,u)=>Object.assign(Object.assign({},c),{contactKinds:[...c.contactKinds,u]})),this.updateContactKind=this.updater((c,u)=>Object.assign(Object.assign({},c),{contactKinds:c.contactKinds.map(n=>n.id===u.id?u:n)})),this.addContactKinds=this.updater((c,u)=>Object.assign(Object.assign({},c),{contactKinds:c.contactKinds.concat(u)})),this.updateContactKinds=this.updater((c,u)=>Object.assign(Object.assign({},c),{contactKinds:c.contactKinds.map(n=>u.find(m=>m.id===n.id)||n)})),this.setSearchQuery=this.updater((c,u)=>Object.assign(Object.assign({},c),{searchQuery:u})),this.loadContactKindEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.data.userContactKind({contactKindId:u}).pipe((0,b._b)(n=>{this.patchState({item:n.data.item,errors:n.errors,loading:!1})},n=>this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})))))),this.loadContactKindsEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.input$),(0,h.w)(([u,n])=>this.data.userContactKinds({input:n}).pipe((0,b._b)(r=>this.patchState({paging:{limit:n.limit,skip:n.skip,total:r.data.count.total},contactKinds:r.data.items,errors:r.errors,loading:!1}),r=>this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})))))),this.createContactKindEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.contactKindService.createContactKind(Object.assign({},u)).pipe((0,b._b)(n=>{this.addNewContactKind(n),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:n,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},n=>{n.graphQLErrors?(this.toast.error(n.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})):(this.toast.error(n.Message),this.formService.setErrors(n.Data))}))))),this.updateContactKindEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([u,n])=>this.contactKindService.updateContactKind(u,u.id).pipe((0,b._b)(r=>{this.updateContactKind(r),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:r,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},r=>{r.graphQLErrors?(this.toast.error(r.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})):(this.toast.error(r.Message),this.formService.setErrors(r.Data))}))))),this.deleteContactKindEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([u,n])=>this.data.userDeleteContactKind({contactKindId:n.id}).pipe((0,b._b)(r=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:r.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},r=>{r.graphQLErrors?(this.toast.error(r.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})):(this.toast.error(r.Message),this.formService.setErrors(r.Data))}))))),this.importExcelEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.contactKindService.importContactKinds(u).pipe((0,de.K)(n=>{var r;return this.toast.error(null!==(r=n.Message)&&void 0!==r?r:"Failed to save",{duration:3e3}),q.E}),(0,y.b)(n=>{const r=JSON.parse(n.created),m=JSON.parse(n.updated),p=JSON.parse(n.failed),v=r.length+m.length+p.length;this.addContactKinds(r),this.updateContactKinds(m),this.toast.success(`${r.length} created, ${m.length} updated, ${p.length} failed of total ${v}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("contactKindId")?(this.route.snapshot.paramMap.get("contactKindId"),this.setFormName("contactKind_edit")):this.setFormName("contactKind_create")}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.contactKindService.validateContactKindExcelData(t)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(z.q),e.LFG(O.F0),e.LFG(O.gz),e.LFG(X.F),e.LFG(Z.o),e.LFG(Yx))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function Xx(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.close.emit())})("formIsReady",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.contactKind)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let Qn=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"contactKind_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.contactKind=i.item})):t.formName&&t.formName.currentValue&&"contactKind_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadContactKindEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.contactKind=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Bs),e.Y36(O.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-contact-kind-form"]],inputs:{contactKind:"contactKind",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,Xx,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[P.O5,te.M,P.Ov],encapsulation:2}),s})(),Vn=(()=>{class s{constructor(){this.autoHeight=!1,this.contactKinds=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[,{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var a;t.includes(null===(a=i.data)||void 0===a?void 0:a.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-contact-kind-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(f.x,5),2&t){let a;e.iGM(a=e.CRH())&&(i.tableView=a.first)}},inputs:{autoHeight:"autoHeight",contactKinds:"contactKinds"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.contactKinds)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[f.x],encapsulation:2}),s})();function eN(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-contact-kind-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","contactKind_edit")("formControl",t.formControl)("contactKind",t.contactKind)}}const tN=function(){return{}};function iN(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-contact-kind-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","contactKind_create")("formControl",t.formControl)("contactKind",e.DdM(3,tN))}}function sN(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-contact-kind-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(d.ref.close())}),e.qZA()}2&s&&e.Q6J("contactKinds",o.data.items)}let oN=(()=>{class s extends G.fS{constructor(t){super(),this.store=t,this.store.loadContactKindsEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.contactKinds$.pipe((0,h.w)(i=>(0,D.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Bs))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","contactKind","send","close"],[1,"w-full","h-full","bg-white",3,"contactKinds","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,eN,2,3,"ng-template",null,1,e.W1O),e.YNc(3,iN,1,4,"ng-template",null,2,e.W1O),e.YNc(5,sN,1,1,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",d)("editTemplate",a)("createTemplate",l)("key",i.field.key)}},dependencies:[E.JJ,E.oH,H.$,Qn,Vn],encapsulation:2}),s})();function aN(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-contact-kind-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","contactKind_edit")("contactKind",t.value)}}const rN=function(){return{}};function nN(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-contact-kind-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","contactKind_create")("contactKind",e.DdM(2,rN))}function lN(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-contact-kind-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(null==d.ref?null:d.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("contactKinds",t.items)}}let cN=(()=>{class s extends pe{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","contactKind","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","contactKinds","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,aN,1,2,"ng-template",null,1,e.W1O),e.YNc(3,nN,1,3,"ng-template",null,2,e.W1O),e.YNc(5,lN,1,2,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[he,Qn,Vn],encapsulation:2}),s})(),dN=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[Bs],imports:[P.ez,U.F,E.UX,J.o,ae.u,$.P,j.t,me,k.h,se.G,G.X0.forChild({types:[{name:"contact-kind-select",component:oN,wrappers:["form-field"]},{name:"contact-kind-grid",component:cN}]})]}),s})(),uN=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[dN]}),s})();class Rt extends W.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class mN extends Rt{constructor(o,t){super("ValidateContactExcelDataAction"),this.valid=!1,this.excelData=o,this.contactKinds=t}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name),this.validationContext.addRule(new g.mi(`contactKindName_${i}_is_valid}`,"Contact Kind Is Not Valid","contactKind.name",t.contactKind,this.contactKinds,!0))}),this.validationContext.addRule(new g.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof g.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(a=>a.name),newNames:[i.newName]}):i instanceof g.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,D.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class pN extends g.wS{constructor(o,t,i,a,l){super(o,t,i,a,l,!0)}}class hN extends g.ul{constructor(o,t,i,a=!1){super(o,t,a),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new g.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new pN("name","The contact name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class fN extends Rt{constructor(o){super("CreateContactAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new hN("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateContact({input:this.input}).pipe((0,h.w)(o=>(0,ue.of)(o.data.created)))}}class _N extends Rt{constructor(o){super("UpdateContactsAction"),this.contacts=o}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.contacts,!0))}performAction(){this.response=this.businessProvider.data.userUpdateContacts({input:{contacts:this.contacts}}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}class gN extends Rt{constructor(o,t){super("UpdateContactAction"),this.contact=o,this.contactId=t}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.contact,!0)).addRule(new g.xF("Id","Id should be a CUID and not null",this.contactId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateContact({contactId:this.contactId,input:this.contact}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}let jn=(()=>{class s extends W.nH{constructor(t,i,a){super("NotificationService.ContactBusinessProviderService",t,a),this.data=i}createContact(t){const i=new fN(t);return i.Do(this),i.response}updateContact(t,i){const a=new gN(t,i);return a.Do(this),a.response}importContacts(t){const i=new _N(t);return i.Do(this),i.response}validateContactExcelData(t,i){const a=new mN(t,i);return a.Do(this),a.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(K.ed),e.LFG(z.q),e.LFG(W.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),vN=(()=>{class s extends W.nH{constructor(t,i,a){super("ContactService",a,t),this.businessProvider=i}createContact(t){const i=Object.fromEntries(Object.entries(t).filter(([a,l])=>null!==l));return this.businessProvider.createContact(i)}updateContact(t,i){return this.businessProvider.updateContact(t,i)}importContacts(t){return this.businessProvider.importContacts(t)}validateContactExcelData(t,i){return this.businessProvider.validateContactExcelData(t,i)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(jn,8),e.LFG(jn),e.LFG(K.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),ks=(()=>{class s extends b.m1{constructor(t,i,a,l,d,ee){if(super({loading:!1,contacts:[],done:!1,searchQuery:"",formName:void 0,contactKindId:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=a,this.toast=l,this.formService=d,this.contactService=ee,this.errors$=this.select(V=>V.errors),this.loading$=this.select(V=>V.loading),this.done$=this.select(V=>V.done),this.item$=this.select(V=>V.item),this.contacts$=this.select(V=>V.contacts),this.contactKinds$=this.select(V=>V.contactKinds||[]),this.contactKindId$=this.select(V=>V.contactKindId),this.paging$=this.select(V=>V.paging),this.searchQuery$=this.select(V=>V.searchQuery),this.formName$=this.select(V=>V.formName),this.actionResult$=this.select(this.item$,this.done$,(V,c)=>({item:V,done:c}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.contacts$,this.contactKinds$,(V,c,u,n,r,m)=>({errors:V,loading:c,item:u,formName:n,contacts:r,contactKinds:m}),{debounce:!0}),this.input$=this.select(this.paging$,this.contactKindId$,this.searchQuery$,(V,c,u)=>({limit:V.limit,skip:V.skip,name:u,contactKindId:c,total:V.total})),this.setFormName=this.updater((V,c)=>Object.assign(Object.assign({},V),{formName:c})),this.setContactKindId=this.updater((V,c)=>Object.assign(Object.assign({},V),{contactKindId:c})),this.filterContactKinds=V=>this.data.userSelectContactKinds({input:{name:V}}).pipe((0,b._b)(c=>{const u=c.data.items;return this.patchState({contactKinds:u}),u},c=>this.patchState({errors:c.graphQLErrors?c.graphQLErrors:c})),(0,fe.U)(c=>c.data.items)),this.addContactKind=this.updater((V,c)=>Object.assign(Object.assign({},V),{contactKinds:V.contactKinds.concat(c)})),this.setItem=this.updater((V,c)=>Object.assign(Object.assign({},V),{item:c})),this.addNewContact=this.updater((V,c)=>Object.assign(Object.assign({},V),{contacts:[...V.contacts,c]})),this.updateContact=this.updater((V,c)=>Object.assign(Object.assign({},V),{contacts:V.contacts.map(u=>u.id===c.id?c:u)})),this.addContacts=this.updater((V,c)=>Object.assign(Object.assign({},V),{contacts:V.contacts.concat(c)})),this.updateContacts=this.updater((V,c)=>Object.assign(Object.assign({},V),{contacts:V.contacts.map(u=>c.find(r=>r.id===u.id)||u)})),this.setSearchQuery=this.updater((V,c)=>Object.assign(Object.assign({},V),{searchQuery:c})),this.loadContactEffect=this.effect(V=>V.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(c=>this.data.userContact({contactId:c}).pipe((0,b._b)(u=>{this.patchState({item:u.data.item,errors:u.errors,loading:!1})},u=>this.patchState({loading:!1,errors:u.graphQLErrors?u.graphQLErrors:u})))))),this.loadContactsEffect=this.effect(V=>V.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.input$),(0,h.w)(([c,u])=>this.data.userContacts({input:u}).pipe((0,b._b)(n=>this.patchState({paging:{limit:u.limit,skip:u.skip,total:n.data.count.total},contacts:n.data.items,errors:n.errors,loading:!1}),n=>this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})))))),this.createContactEffect=this.effect(V=>V.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(c=>this.contactService.createContact(Object.assign({},c)).pipe((0,b._b)(u=>{this.addNewContact(u),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:u,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},u=>{u.graphQLErrors?(this.toast.error(u.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:u.graphQLErrors?u.graphQLErrors:u})):(this.toast.error(u.Message),this.formService.setErrors(u.Data))}))))),this.updateContactEffect=this.effect(V=>V.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([c,u])=>this.contactService.updateContact(c,c.id).pipe((0,b._b)(n=>{this.updateContact(n),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:n,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},n=>{n.graphQLErrors?(this.toast.error(n.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})):(this.toast.error(n.Message),this.formService.setErrors(n.Data))}))))),this.deleteContactEffect=this.effect(V=>V.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([c,u])=>this.data.userDeleteContact({contactId:u.id}).pipe((0,b._b)(n=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:n.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},n=>{n.graphQLErrors?(this.toast.error(n.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})):(this.toast.error(n.Message),this.formService.setErrors(n.Data))}))))),this.importExcelEffect=this.effect(V=>V.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(c=>this.contactService.importContacts(c).pipe((0,de.K)(u=>{var n;return this.toast.error(null!==(n=u.Message)&&void 0!==n?n:"Failed to save",{duration:3e3}),q.E}),(0,y.b)(u=>{const n=JSON.parse(u.created),r=JSON.parse(u.updated),m=JSON.parse(u.failed),p=n.length+r.length+m.length;this.addContacts(n),this.updateContacts(r),this.toast.success(`${n.length} created, ${r.length} updated, ${m.length} failed of total ${p}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("contactId")?this.setFormName("contact_edit"):this.setFormName("contact_create"),this.route.snapshot.paramMap.has("contactKindId")){const V=this.route.snapshot.paramMap.get("contactKindId");this.setContactKindId(V)}}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.contactService.validateContactExcelData(t,i.contactKinds)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(z.q),e.LFG(O.F0),e.LFG(O.gz),e.LFG(X.F),e.LFG(Z.o),e.LFG(vN))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function CN(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.close.emit())})("formIsReady",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.contact)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let Un=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"contact_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.contact=i.item})):t.formName&&t.formName.currentValue&&"contact_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadContactEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.contact=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(ks),e.Y36(O.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-contact-form"]],inputs:{contact:"contact",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,CN,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[P.O5,te.M,P.Ov],encapsulation:2}),s})(),Jn=(()=>{class s{constructor(){this.autoHeight=!1,this.contacts=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[{field:"contactKind.name",headerName:"Contact Kind",filter:"agTextColumnFilter"},{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{field:"honorific",filter:"agTextColumnFilter"},{field:"firstName",filter:"agTextColumnFilter"},{field:"lastName",filter:"agTextColumnFilter"},{field:"suffix",filter:"agTextColumnFilter"},{field:"primaryPhoneNumber",filter:"agTextColumnFilter"},{field:"primaryEmailAddress",filter:"agTextColumnFilter"},{field:"primaryAddressLine1",filter:"agTextColumnFilter"},{field:"primaryAddressLine2",filter:"agTextColumnFilter"},{field:"primaryAddressCity",filter:"agTextColumnFilter"},{field:"primaryAddressStateOrProvince",filter:"agTextColumnFilter"},{field:"primaryAddressPostalCode",filter:"agTextColumnFilter"},{field:"notes",filter:"agTextColumnFilter"},{field:"discriminator",filter:"agTextColumnFilter"},{field:"contactKindId",filter:"agTextColumnFilter",hide:!0},{field:"dateOfBirth",filter:"agDateColumnFilter"},{headerName:"Latitude",field:"latitude",valueFormatter:t=>{var i;return(0,_.oBD)(null===(i=t.data)||void 0===i?void 0:i.latitude,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{headerName:"Longitude",field:"longitude",valueFormatter:t=>{var i;return(0,_.oBD)(null===(i=t.data)||void 0===i?void 0:i.longitude,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{field:"avatar",filter:"agTextColumnFilter"},{field:"background",filter:"agTextColumnFilter"},{field:"title",filter:"agTextColumnFilter"},{field:"company",filter:"agTextColumnFilter"},{field:"birthday",filter:"agTextColumnFilter"},{field:"address",filter:"agTextColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var a;t.includes(null===(a=i.data)||void 0===a?void 0:a.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-contact-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(f.x,5),2&t){let a;e.iGM(a=e.CRH())&&(i.tableView=a.first)}},inputs:{autoHeight:"autoHeight",contacts:"contacts"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.contacts)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[f.x],encapsulation:2}),s})();function SN(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-contact-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","contact_edit")("formControl",t.formControl)("contact",t.contact)}}const bN=function(){return{}};function TN(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-contact-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","contact_create")("formControl",t.formControl)("contact",e.DdM(3,bN))}}function yN(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-contact-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(d.ref.close())}),e.qZA()}2&s&&e.Q6J("contacts",o.data.items)}let wN=(()=>{class s extends G.fS{constructor(t){super(),this.store=t,this.store.loadContactsEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.contacts$.pipe((0,h.w)(i=>(0,D.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(ks))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","contact","send","close"],[1,"w-full","h-full","bg-white",3,"contacts","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,SN,2,3,"ng-template",null,1,e.W1O),e.YNc(3,TN,1,4,"ng-template",null,2,e.W1O),e.YNc(5,yN,1,1,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",d)("editTemplate",a)("createTemplate",l)("key",i.field.key)}},dependencies:[E.JJ,E.oH,H.$,Un,Jn],encapsulation:2}),s})();function xN(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-contact-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","contact_edit")("contact",t.value)}}const NN=function(){return{}};function AN(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-contact-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","contact_create")("contact",e.DdM(2,NN))}function FN(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-contact-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(null==d.ref?null:d.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("contacts",t.items)}}let PN=(()=>{class s extends pe{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","contact","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","contacts","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,xN,1,2,"ng-template",null,1,e.W1O),e.YNc(3,AN,1,3,"ng-template",null,2,e.W1O),e.YNc(5,FN,1,2,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[he,Un,Jn],encapsulation:2}),s})(),IN=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[ks],imports:[P.ez,U.F,E.UX,J.o,ae.u,$.P,j.t,me,k.h,se.G,G.X0.forChild({types:[{name:"contact-select",component:wN,wrappers:["form-field"]},{name:"contact-grid",component:PN}]})]}),s})(),DN=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[IN]}),s})();class Qt extends W.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class MN extends Qt{constructor(o,t,i){super("ValidateContactPhoneNumberExcelDataAction"),this.valid=!1,this.excelData=o,this.countries=t,this.contacts=i}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name),this.validationContext.addRule(new g.mi(`countryName_${i}_is_valid}`,"Country Is Not Valid","country.name",t.country,this.countries,!0)),this.validationContext.addRule(new g.mi(`contactName_${i}_is_valid}`,"Contact Is Not Valid","contact.name",t.contact,this.contacts,!0))}),this.validationContext.addRule(new g.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof g.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(a=>a.name),newNames:[i.newName]}):i instanceof g.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,D.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class WN extends g.wS{constructor(o,t,i,a,l){super(o,t,i,a,l,!0)}}class EN extends g.ul{constructor(o,t,i,a=!1){super(o,t,a),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new g.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new WN("name","The contactphonenumber name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class ON extends Qt{constructor(o){super("CreateContactPhoneNumberAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new EN("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateContactPhoneNumber({input:this.input}).pipe((0,h.w)(o=>(0,ue.of)(o.data.created)))}}class LN extends Qt{constructor(o){super("UpdateContactPhoneNumbersAction"),this.contactPhoneNumbers=o}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.contactPhoneNumbers,!0))}performAction(){this.response=this.businessProvider.data.userUpdateContactPhoneNumbers({input:{contactPhoneNumbers:this.contactPhoneNumbers}}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}class $N extends Qt{constructor(o,t){super("UpdateContactPhoneNumberAction"),this.contactPhoneNumber=o,this.contactPhoneNumberId=t}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.contactPhoneNumber,!0)).addRule(new g.xF("Id","Id should be a CUID and not null",this.contactPhoneNumberId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateContactPhoneNumber({contactPhoneNumberId:this.contactPhoneNumberId,input:this.contactPhoneNumber}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}let zn=(()=>{class s extends W.nH{constructor(t,i,a){super("NotificationService.ContactPhoneNumberBusinessProviderService",t,a),this.data=i}createContactPhoneNumber(t){const i=new ON(t);return i.Do(this),i.response}updateContactPhoneNumber(t,i){const a=new $N(t,i);return a.Do(this),a.response}importContactPhoneNumbers(t){const i=new LN(t);return i.Do(this),i.response}validateContactPhoneNumberExcelData(t,i,a){const l=new MN(t,i,a);return l.Do(this),l.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(K.ed),e.LFG(z.q),e.LFG(W.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),GN=(()=>{class s extends W.nH{constructor(t,i,a){super("ContactPhoneNumberService",a,t),this.businessProvider=i}createContactPhoneNumber(t){const i=Object.fromEntries(Object.entries(t).filter(([a,l])=>null!==l));return this.businessProvider.createContactPhoneNumber(i)}updateContactPhoneNumber(t,i){return this.businessProvider.updateContactPhoneNumber(t,i)}importContactPhoneNumbers(t){return this.businessProvider.importContactPhoneNumbers(t)}validateContactPhoneNumberExcelData(t,i,a){return this.businessProvider.validateContactPhoneNumberExcelData(t,i,a)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(zn,8),e.LFG(zn),e.LFG(K.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),Ys=(()=>{class s extends b.m1{constructor(t,i,a,l,d,ee){if(super({loading:!1,contactPhoneNumbers:[],done:!1,searchQuery:"",formName:void 0,countryId:void 0,contactId:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=a,this.toast=l,this.formService=d,this.contactPhoneNumberService=ee,this.errors$=this.select(n=>n.errors),this.loading$=this.select(n=>n.loading),this.done$=this.select(n=>n.done),this.item$=this.select(n=>n.item),this.contactPhoneNumbers$=this.select(n=>n.contactPhoneNumbers),this.countries$=this.select(n=>n.countries||[]),this.contacts$=this.select(n=>n.contacts||[]),this.countryId$=this.select(n=>n.countryId),this.contactId$=this.select(n=>n.contactId),this.paging$=this.select(n=>n.paging),this.searchQuery$=this.select(n=>n.searchQuery),this.formName$=this.select(n=>n.formName),this.actionResult$=this.select(this.item$,this.done$,(n,r)=>({item:n,done:r}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.contactPhoneNumbers$,this.countries$,this.contacts$,(n,r,m,p,v,I,B)=>({errors:n,loading:r,item:m,formName:p,contactPhoneNumbers:v,countries:I,contacts:B}),{debounce:!0}),this.input$=this.select(this.paging$,this.countryId$,this.contactId$,this.searchQuery$,(n,r,m,p)=>({limit:n.limit,skip:n.skip,name:p,countryId:r,contactId:m,total:n.total})),this.setFormName=this.updater((n,r)=>Object.assign(Object.assign({},n),{formName:r})),this.setCountryId=this.updater((n,r)=>Object.assign(Object.assign({},n),{countryId:r})),this.setContactId=this.updater((n,r)=>Object.assign(Object.assign({},n),{contactId:r})),this.filterCountries=n=>this.data.userSelectCountries({input:{name:n}}).pipe((0,b._b)(r=>{let m=r.data.items;return this.patchState({countries:m}),m},r=>this.patchState({errors:r.graphQLErrors?r.graphQLErrors:r})),(0,fe.U)(r=>r.data.items)),this.filterContacts=n=>this.data.userSelectContacts({input:{name:n}}).pipe((0,b._b)(r=>{let m=r.data.items;return this.patchState({contacts:m}),m},r=>this.patchState({errors:r.graphQLErrors?r.graphQLErrors:r})),(0,fe.U)(r=>r.data.items)),this.addCountry=this.updater((n,r)=>Object.assign(Object.assign({},n),{countries:n.countries.concat(r)})),this.addContact=this.updater((n,r)=>Object.assign(Object.assign({},n),{contacts:n.contacts.concat(r)})),this.setItem=this.updater((n,r)=>Object.assign(Object.assign({},n),{item:r})),this.addNewContactPhoneNumber=this.updater((n,r)=>Object.assign(Object.assign({},n),{contactPhoneNumbers:[...n.contactPhoneNumbers,r]})),this.updateContactPhoneNumber=this.updater((n,r)=>Object.assign(Object.assign({},n),{contactPhoneNumbers:n.contactPhoneNumbers.map(m=>m.id===r.id?r:m)})),this.addContactPhoneNumbers=this.updater((n,r)=>Object.assign(Object.assign({},n),{contactPhoneNumbers:n.contactPhoneNumbers.concat(r)})),this.updateContactPhoneNumbers=this.updater((n,r)=>Object.assign(Object.assign({},n),{contactPhoneNumbers:n.contactPhoneNumbers.map(m=>r.find(v=>v.id===m.id)||m)})),this.setSearchQuery=this.updater((n,r)=>Object.assign(Object.assign({},n),{searchQuery:r})),this.loadContactPhoneNumberEffect=this.effect(n=>n.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(r=>this.data.userContactPhoneNumber({contactPhoneNumberId:r}).pipe((0,b._b)(m=>{this.patchState({item:m.data.item,errors:m.errors,loading:!1})},m=>this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})))))),this.loadContactPhoneNumbersEffect=this.effect(n=>n.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.input$),(0,h.w)(([r,m])=>this.data.userContactPhoneNumbers({input:m}).pipe((0,b._b)(p=>this.patchState({paging:{limit:m.limit,skip:m.skip,total:p.data.count.total},contactPhoneNumbers:p.data.items,errors:p.errors,loading:!1}),p=>this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})))))),this.createContactPhoneNumberEffect=this.effect(n=>n.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(r=>this.contactPhoneNumberService.createContactPhoneNumber(Object.assign({},r)).pipe((0,b._b)(m=>{this.addNewContactPhoneNumber(m),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:m,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},m=>{m.graphQLErrors?(this.toast.error(m.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})):(this.toast.error(m.Message),this.formService.setErrors(m.Data))}))))),this.updateContactPhoneNumberEffect=this.effect(n=>n.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([r,m])=>this.contactPhoneNumberService.updateContactPhoneNumber(r,r.id).pipe((0,b._b)(p=>{this.updateContactPhoneNumber(p),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:p,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},p=>{p.graphQLErrors?(this.toast.error(p.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})):(this.toast.error(p.Message),this.formService.setErrors(p.Data))}))))),this.deleteContactPhoneNumberEffect=this.effect(n=>n.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([r,m])=>this.data.userDeleteContactPhoneNumber({contactPhoneNumberId:m.id}).pipe((0,b._b)(p=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:p.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},p=>{p.graphQLErrors?(this.toast.error(p.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})):(this.toast.error(p.Message),this.formService.setErrors(p.Data))}))))),this.importExcelEffect=this.effect(n=>n.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(r=>this.contactPhoneNumberService.importContactPhoneNumbers(r).pipe((0,de.K)(m=>{var p;return this.toast.error(null!==(p=m.Message)&&void 0!==p?p:"Failed to save",{duration:3e3}),q.E}),(0,y.b)(m=>{const p=JSON.parse(m.created),v=JSON.parse(m.updated),I=JSON.parse(m.failed),B=p.length+v.length+I.length;this.addContactPhoneNumbers(p),this.updateContactPhoneNumbers(v),this.toast.success(`${p.length} created, ${v.length} updated, ${I.length} failed of total ${B}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("contactPhoneNumberId")?(this.route.snapshot.paramMap.get("contactPhoneNumberId"),this.setFormName("contactPhoneNumber_edit")):this.setFormName("contactPhoneNumber_create"),this.route.snapshot.paramMap.has("countryId")){var c=this.route.snapshot.paramMap.get("countryId");this.setCountryId(c)}if(this.route.snapshot.paramMap.has("contactId")){var u=this.route.snapshot.paramMap.get("contactId");this.setContactId(u)}}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.contactPhoneNumberService.validateContactPhoneNumberExcelData(t,i.countries,i.contacts)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(z.q),e.LFG(O.F0),e.LFG(O.gz),e.LFG(X.F),e.LFG(Z.o),e.LFG(GN))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function RN(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.close.emit())})("formIsReady",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.contactPhoneNumber)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let Hn=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"contactPhoneNumber_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.contactPhoneNumber=i.item})):t.formName&&t.formName.currentValue&&"contactPhoneNumber_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadContactPhoneNumberEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.contactPhoneNumber=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Ys),e.Y36(O.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-contact-phone-number-form"]],inputs:{contactPhoneNumber:"contactPhoneNumber",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,RN,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[P.O5,te.M,P.Ov],encapsulation:2}),s})(),qn=(()=>{class s{constructor(){this.autoHeight=!1,this.contactPhoneNumbers=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[{field:"country.name",headerName:"Country",filter:"agTextColumnFilter"},{field:"contact.name",headerName:"Contact",filter:"agTextColumnFilter"},{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{field:"countryId",filter:"agTextColumnFilter",hide:!0},{field:"phoneNumber",filter:"agTextColumnFilter"},{field:"label",filter:"agTextColumnFilter"},{field:"contactId",filter:"agTextColumnFilter",hide:!0}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var a;t.includes(null===(a=i.data)||void 0===a?void 0:a.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-contact-phone-number-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(f.x,5),2&t){let a;e.iGM(a=e.CRH())&&(i.tableView=a.first)}},inputs:{autoHeight:"autoHeight",contactPhoneNumbers:"contactPhoneNumbers"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.contactPhoneNumbers)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[f.x],encapsulation:2}),s})();function QN(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-contact-phone-number-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","contactPhoneNumber_edit")("formControl",t.formControl)("contactPhoneNumber",t.contactPhoneNumber)}}const VN=function(){return{}};function jN(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-contact-phone-number-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","contactPhoneNumber_create")("formControl",t.formControl)("contactPhoneNumber",e.DdM(3,VN))}}function UN(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-contact-phone-number-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(d.ref.close())}),e.qZA()}2&s&&e.Q6J("contactPhoneNumbers",o.data.items)}let JN=(()=>{class s extends G.fS{constructor(t){super(),this.store=t,this.store.loadContactPhoneNumbersEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.contactPhoneNumbers$.pipe((0,h.w)(i=>(0,D.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Ys))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","contactPhoneNumber","send","close"],[1,"w-full","h-full","bg-white",3,"contactPhoneNumbers","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,QN,2,3,"ng-template",null,1,e.W1O),e.YNc(3,jN,1,4,"ng-template",null,2,e.W1O),e.YNc(5,UN,1,1,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",d)("editTemplate",a)("createTemplate",l)("key",i.field.key)}},dependencies:[E.JJ,E.oH,H.$,Hn,qn],encapsulation:2}),s})();function zN(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-contact-phone-number-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","contactPhoneNumber_edit")("contactPhoneNumber",t.value)}}const HN=function(){return{}};function qN(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-contact-phone-number-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","contactPhoneNumber_create")("contactPhoneNumber",e.DdM(2,HN))}function KN(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-contact-phone-number-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(null==d.ref?null:d.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("contactPhoneNumbers",t.items)}}let ZN=(()=>{class s extends pe{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","contactPhoneNumber","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","contactPhoneNumbers","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,zN,1,2,"ng-template",null,1,e.W1O),e.YNc(3,qN,1,3,"ng-template",null,2,e.W1O),e.YNc(5,KN,1,2,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[he,Hn,qn],encapsulation:2}),s})(),BN=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[Ys],imports:[P.ez,U.F,E.UX,J.o,ae.u,$.P,j.t,me,k.h,se.G,G.X0.forChild({types:[{name:"contact-phone-number-select",component:JN,wrappers:["form-field"]},{name:"contact-phone-number-grid",component:ZN}]})]}),s})(),kN=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[BN]}),s})();class Vt extends W.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class YN extends Vt{constructor(o,t,i){super("ValidateContactSettingExcelDataAction"),this.valid=!1,this.excelData=o,this.contacts=t,this.integrations=i}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name),this.validationContext.addRule(new g.mi(`contactName_${i}_is_valid}`,"Contact Is Not Valid","contact.name",t.contact,this.contacts,!0)),this.validationContext.addRule(new g.mi(`integrationName_${i}_is_valid}`,"Integration Is Not Valid","integration.name",t.integration,this.integrations,!0))}),this.validationContext.addRule(new g.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof g.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(a=>a.name),newNames:[i.newName]}):i instanceof g.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,D.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class XN extends g.wS{constructor(o,t,i,a,l){super(o,t,i,a,l,!0)}}class eA extends g.ul{constructor(o,t,i,a=!1){super(o,t,a),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new g.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new XN("name","The contactsetting name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class tA extends Vt{constructor(o){super("CreateContactSettingAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new eA("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateContactSetting({input:this.input}).pipe((0,h.w)(o=>(0,ue.of)(o.data.created)))}}class iA extends Vt{constructor(o){super("UpdateContactSettingsAction"),this.contactSettings=o}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.contactSettings,!0))}performAction(){this.response=this.businessProvider.data.userUpdateContactSettings({input:{contactSettings:this.contactSettings}}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}class sA extends Vt{constructor(o,t){super("UpdateContactSettingAction"),this.contactSetting=o,this.contactSettingId=t}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.contactSetting,!0)).addRule(new g.xF("Id","Id should be a CUID and not null",this.contactSettingId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateContactSetting({contactSettingId:this.contactSettingId,input:this.contactSetting}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}let Kn=(()=>{class s extends W.nH{constructor(t,i,a){super("NotificationService.ContactSettingBusinessProviderService",t,a),this.data=i}createContactSetting(t){const i=new tA(t);return i.Do(this),i.response}updateContactSetting(t,i){const a=new sA(t,i);return a.Do(this),a.response}importContactSettings(t){const i=new iA(t);return i.Do(this),i.response}validateContactSettingExcelData(t,i,a){const l=new YN(t,i,a);return l.Do(this),l.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(K.ed),e.LFG(z.q),e.LFG(W.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),oA=(()=>{class s extends W.nH{constructor(t,i,a){super("ContactSettingService",a,t),this.businessProvider=i}createContactSetting(t){const i=Object.fromEntries(Object.entries(t).filter(([a,l])=>null!==l));return this.businessProvider.createContactSetting(i)}updateContactSetting(t,i){return this.businessProvider.updateContactSetting(t,i)}importContactSettings(t){return this.businessProvider.importContactSettings(t)}validateContactSettingExcelData(t,i,a){return this.businessProvider.validateContactSettingExcelData(t,i,a)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(Kn,8),e.LFG(Kn),e.LFG(K.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),Xs=(()=>{class s extends b.m1{constructor(t,i,a,l,d,ee){if(super({loading:!1,contactSettings:[],done:!1,searchQuery:"",formName:void 0,contactId:void 0,integrationId:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=a,this.toast=l,this.formService=d,this.contactSettingService=ee,this.errors$=this.select(n=>n.errors),this.loading$=this.select(n=>n.loading),this.done$=this.select(n=>n.done),this.item$=this.select(n=>n.item),this.contactSettings$=this.select(n=>n.contactSettings),this.contacts$=this.select(n=>n.contacts||[]),this.integrations$=this.select(n=>n.integrations||[]),this.contactId$=this.select(n=>n.contactId),this.integrationId$=this.select(n=>n.integrationId),this.paging$=this.select(n=>n.paging),this.searchQuery$=this.select(n=>n.searchQuery),this.formName$=this.select(n=>n.formName),this.actionResult$=this.select(this.item$,this.done$,(n,r)=>({item:n,done:r}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.contactSettings$,this.contacts$,this.integrations$,(n,r,m,p,v,I,B)=>({errors:n,loading:r,item:m,formName:p,contactSettings:v,contacts:I,integrations:B}),{debounce:!0}),this.input$=this.select(this.paging$,this.contactId$,this.integrationId$,this.searchQuery$,(n,r,m,p)=>({limit:n.limit,skip:n.skip,name:p,contactId:r,integrationId:m,total:n.total})),this.setFormName=this.updater((n,r)=>Object.assign(Object.assign({},n),{formName:r})),this.setContactId=this.updater((n,r)=>Object.assign(Object.assign({},n),{contactId:r})),this.setIntegrationId=this.updater((n,r)=>Object.assign(Object.assign({},n),{integrationId:r})),this.filterContacts=n=>this.data.userSelectContacts({input:{name:n}}).pipe((0,b._b)(r=>{let m=r.data.items;return this.patchState({contacts:m}),m},r=>this.patchState({errors:r.graphQLErrors?r.graphQLErrors:r})),(0,fe.U)(r=>r.data.items)),this.filterIntegrations=n=>this.data.userSelectIntegrations({input:{name:n}}).pipe((0,b._b)(r=>{let m=r.data.items;return this.patchState({integrations:m}),m},r=>this.patchState({errors:r.graphQLErrors?r.graphQLErrors:r})),(0,fe.U)(r=>r.data.items)),this.addContact=this.updater((n,r)=>Object.assign(Object.assign({},n),{contacts:n.contacts.concat(r)})),this.addIntegration=this.updater((n,r)=>Object.assign(Object.assign({},n),{integrations:n.integrations.concat(r)})),this.setItem=this.updater((n,r)=>Object.assign(Object.assign({},n),{item:r})),this.addNewContactSetting=this.updater((n,r)=>Object.assign(Object.assign({},n),{contactSettings:[...n.contactSettings,r]})),this.updateContactSetting=this.updater((n,r)=>Object.assign(Object.assign({},n),{contactSettings:n.contactSettings.map(m=>m.id===r.id?r:m)})),this.addContactSettings=this.updater((n,r)=>Object.assign(Object.assign({},n),{contactSettings:n.contactSettings.concat(r)})),this.updateContactSettings=this.updater((n,r)=>Object.assign(Object.assign({},n),{contactSettings:n.contactSettings.map(m=>r.find(v=>v.id===m.id)||m)})),this.setSearchQuery=this.updater((n,r)=>Object.assign(Object.assign({},n),{searchQuery:r})),this.loadContactSettingEffect=this.effect(n=>n.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(r=>this.data.userContactSetting({contactSettingId:r}).pipe((0,b._b)(m=>{this.patchState({item:m.data.item,errors:m.errors,loading:!1})},m=>this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})))))),this.loadContactSettingsEffect=this.effect(n=>n.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.input$),(0,h.w)(([r,m])=>this.data.userContactSettings({input:m}).pipe((0,b._b)(p=>this.patchState({paging:{limit:m.limit,skip:m.skip,total:p.data.count.total},contactSettings:p.data.items,errors:p.errors,loading:!1}),p=>this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})))))),this.createContactSettingEffect=this.effect(n=>n.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(r=>this.contactSettingService.createContactSetting(Object.assign({},r)).pipe((0,b._b)(m=>{this.addNewContactSetting(m),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:m,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},m=>{m.graphQLErrors?(this.toast.error(m.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})):(this.toast.error(m.Message),this.formService.setErrors(m.Data))}))))),this.updateContactSettingEffect=this.effect(n=>n.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([r,m])=>this.contactSettingService.updateContactSetting(r,r.id).pipe((0,b._b)(p=>{this.updateContactSetting(p),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:p,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},p=>{p.graphQLErrors?(this.toast.error(p.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})):(this.toast.error(p.Message),this.formService.setErrors(p.Data))}))))),this.deleteContactSettingEffect=this.effect(n=>n.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([r,m])=>this.data.userDeleteContactSetting({contactSettingId:m.id}).pipe((0,b._b)(p=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:p.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},p=>{p.graphQLErrors?(this.toast.error(p.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})):(this.toast.error(p.Message),this.formService.setErrors(p.Data))}))))),this.importExcelEffect=this.effect(n=>n.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(r=>this.contactSettingService.importContactSettings(r).pipe((0,de.K)(m=>{var p;return this.toast.error(null!==(p=m.Message)&&void 0!==p?p:"Failed to save",{duration:3e3}),q.E}),(0,y.b)(m=>{const p=JSON.parse(m.created),v=JSON.parse(m.updated),I=JSON.parse(m.failed),B=p.length+v.length+I.length;this.addContactSettings(p),this.updateContactSettings(v),this.toast.success(`${p.length} created, ${v.length} updated, ${I.length} failed of total ${B}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("contactSettingId")?(this.route.snapshot.paramMap.get("contactSettingId"),this.setFormName("contactSetting_edit")):this.setFormName("contactSetting_create"),this.route.snapshot.paramMap.has("contactId")){var c=this.route.snapshot.paramMap.get("contactId");this.setContactId(c)}if(this.route.snapshot.paramMap.has("integrationId")){var u=this.route.snapshot.paramMap.get("integrationId");this.setIntegrationId(u)}}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.contactSettingService.validateContactSettingExcelData(t,i.contacts,i.integrations)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(z.q),e.LFG(O.F0),e.LFG(O.gz),e.LFG(X.F),e.LFG(Z.o),e.LFG(oA))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function aA(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.close.emit())})("formIsReady",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.contactSetting)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let Zn=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"contactSetting_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.contactSetting=i.item})):t.formName&&t.formName.currentValue&&"contactSetting_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadContactSettingEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.contactSetting=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Xs),e.Y36(O.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-contact-setting-form"]],inputs:{contactSetting:"contactSetting",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,aA,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[P.O5,te.M,P.Ov],encapsulation:2}),s})(),Bn=(()=>{class s{constructor(){this.autoHeight=!1,this.contactSettings=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[{field:"contact.name",headerName:"Contact",filter:"agTextColumnFilter"},{field:"integration.name",headerName:"Integration",filter:"agTextColumnFilter"},{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{field:"value",filter:"agTextColumnFilter"},{field:"iconUrl",filter:"agTextColumnFilter"},{field:"properties",filter:"agTextColumnFilter"},{field:"contactId",filter:"agTextColumnFilter",hide:!0},{field:"integrationId",filter:"agTextColumnFilter",hide:!0}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var a;t.includes(null===(a=i.data)||void 0===a?void 0:a.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-contact-setting-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(f.x,5),2&t){let a;e.iGM(a=e.CRH())&&(i.tableView=a.first)}},inputs:{autoHeight:"autoHeight",contactSettings:"contactSettings"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.contactSettings)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[f.x],encapsulation:2}),s})();function rA(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-contact-setting-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","contactSetting_edit")("formControl",t.formControl)("contactSetting",t.contactSetting)}}const nA=function(){return{}};function lA(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-contact-setting-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","contactSetting_create")("formControl",t.formControl)("contactSetting",e.DdM(3,nA))}}function cA(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-contact-setting-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(d.ref.close())}),e.qZA()}2&s&&e.Q6J("contactSettings",o.data.items)}let dA=(()=>{class s extends G.fS{constructor(t){super(),this.store=t,this.store.loadContactSettingsEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.contactSettings$.pipe((0,h.w)(i=>(0,D.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Xs))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","contactSetting","send","close"],[1,"w-full","h-full","bg-white",3,"contactSettings","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,rA,2,3,"ng-template",null,1,e.W1O),e.YNc(3,lA,1,4,"ng-template",null,2,e.W1O),e.YNc(5,cA,1,1,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",d)("editTemplate",a)("createTemplate",l)("key",i.field.key)}},dependencies:[E.JJ,E.oH,H.$,Zn,Bn],encapsulation:2}),s})();function uA(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-contact-setting-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","contactSetting_edit")("contactSetting",t.value)}}const mA=function(){return{}};function pA(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-contact-setting-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","contactSetting_create")("contactSetting",e.DdM(2,mA))}function hA(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-contact-setting-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(null==d.ref?null:d.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("contactSettings",t.items)}}let fA=(()=>{class s extends pe{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","contactSetting","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","contactSettings","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,uA,1,2,"ng-template",null,1,e.W1O),e.YNc(3,pA,1,3,"ng-template",null,2,e.W1O),e.YNc(5,hA,1,2,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[he,Zn,Bn],encapsulation:2}),s})(),_A=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[Xs],imports:[P.ez,U.F,E.UX,J.o,ae.u,$.P,j.t,me,k.h,se.G,G.X0.forChild({types:[{name:"contact-setting-select",component:dA,wrappers:["form-field"]},{name:"contact-setting-grid",component:fA}]})]}),s})(),gA=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[_A]}),s})();class jt extends W.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class vA extends jt{constructor(o,t){super("ValidateContactTagExcelDataAction"),this.valid=!1,this.excelData=o,this.contacts=t}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name),this.validationContext.addRule(new g.mi(`contactName_${i}_is_valid}`,"Contact Is Not Valid","contact.name",t.contact,this.contacts,!0))}),this.validationContext.addRule(new g.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof g.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(a=>a.name),newNames:[i.newName]}):i instanceof g.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,D.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class CA extends g.wS{constructor(o,t,i,a,l){super(o,t,i,a,l,!0)}}class SA extends g.ul{constructor(o,t,i,a=!1){super(o,t,a),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new g.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new CA("name","The contacttag name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class bA extends jt{constructor(o){super("CreateContactTagAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new SA("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateContactTag({input:this.input}).pipe((0,h.w)(o=>(0,ue.of)(o.data.created)))}}class TA extends jt{constructor(o){super("UpdateContactTagsAction"),this.contactTags=o}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.contactTags,!0))}performAction(){this.response=this.businessProvider.data.userUpdateContactTags({input:{contactTags:this.contactTags}}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}class yA extends jt{constructor(o,t){super("UpdateContactTagAction"),this.contactTag=o,this.contactTagId=t}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.contactTag,!0)).addRule(new g.xF("Id","Id should be a CUID and not null",this.contactTagId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateContactTag({contactTagId:this.contactTagId,input:this.contactTag}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}let kn=(()=>{class s extends W.nH{constructor(t,i,a){super("NotificationService.ContactTagBusinessProviderService",t,a),this.data=i}createContactTag(t){const i=new bA(t);return i.Do(this),i.response}updateContactTag(t,i){const a=new yA(t,i);return a.Do(this),a.response}importContactTags(t){const i=new TA(t);return i.Do(this),i.response}validateContactTagExcelData(t,i){const a=new vA(t,i);return a.Do(this),a.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(K.ed),e.LFG(z.q),e.LFG(W.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),wA=(()=>{class s extends W.nH{constructor(t,i,a){super("ContactTagService",a,t),this.businessProvider=i}createContactTag(t){const i=Object.fromEntries(Object.entries(t).filter(([a,l])=>null!==l));return this.businessProvider.createContactTag(i)}updateContactTag(t,i){return this.businessProvider.updateContactTag(t,i)}importContactTags(t){return this.businessProvider.importContactTags(t)}validateContactTagExcelData(t,i){return this.businessProvider.validateContactTagExcelData(t,i)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(kn,8),e.LFG(kn),e.LFG(K.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),eo=(()=>{class s extends b.m1{constructor(t,i,a,l,d,ee){if(super({loading:!1,contactTags:[],done:!1,searchQuery:"",formName:void 0,contactId:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=a,this.toast=l,this.formService=d,this.contactTagService=ee,this.errors$=this.select(u=>u.errors),this.loading$=this.select(u=>u.loading),this.done$=this.select(u=>u.done),this.item$=this.select(u=>u.item),this.contactTags$=this.select(u=>u.contactTags),this.contacts$=this.select(u=>u.contacts||[]),this.contactId$=this.select(u=>u.contactId),this.paging$=this.select(u=>u.paging),this.searchQuery$=this.select(u=>u.searchQuery),this.formName$=this.select(u=>u.formName),this.actionResult$=this.select(this.item$,this.done$,(u,n)=>({item:u,done:n}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.contactTags$,this.contacts$,(u,n,r,m,p,v)=>({errors:u,loading:n,item:r,formName:m,contactTags:p,contacts:v}),{debounce:!0}),this.input$=this.select(this.paging$,this.contactId$,this.searchQuery$,(u,n,r)=>({limit:u.limit,skip:u.skip,name:r,contactId:n,total:u.total})),this.setFormName=this.updater((u,n)=>Object.assign(Object.assign({},u),{formName:n})),this.setContactId=this.updater((u,n)=>Object.assign(Object.assign({},u),{contactId:n})),this.filterContacts=u=>this.data.userSelectContacts({input:{name:u}}).pipe((0,b._b)(n=>{let r=n.data.items;return this.patchState({contacts:r}),r},n=>this.patchState({errors:n.graphQLErrors?n.graphQLErrors:n})),(0,fe.U)(n=>n.data.items)),this.addContact=this.updater((u,n)=>Object.assign(Object.assign({},u),{contacts:u.contacts.concat(n)})),this.setItem=this.updater((u,n)=>Object.assign(Object.assign({},u),{item:n})),this.addNewContactTag=this.updater((u,n)=>Object.assign(Object.assign({},u),{contactTags:[...u.contactTags,n]})),this.updateContactTag=this.updater((u,n)=>Object.assign(Object.assign({},u),{contactTags:u.contactTags.map(r=>r.id===n.id?n:r)})),this.addContactTags=this.updater((u,n)=>Object.assign(Object.assign({},u),{contactTags:u.contactTags.concat(n)})),this.updateContactTags=this.updater((u,n)=>Object.assign(Object.assign({},u),{contactTags:u.contactTags.map(r=>n.find(p=>p.id===r.id)||r)})),this.setSearchQuery=this.updater((u,n)=>Object.assign(Object.assign({},u),{searchQuery:n})),this.loadContactTagEffect=this.effect(u=>u.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(n=>this.data.userContactTag({contactTagId:n}).pipe((0,b._b)(r=>{this.patchState({item:r.data.item,errors:r.errors,loading:!1})},r=>this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})))))),this.loadContactTagsEffect=this.effect(u=>u.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.input$),(0,h.w)(([n,r])=>this.data.userContactTags({input:r}).pipe((0,b._b)(m=>this.patchState({paging:{limit:r.limit,skip:r.skip,total:m.data.count.total},contactTags:m.data.items,errors:m.errors,loading:!1}),m=>this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})))))),this.createContactTagEffect=this.effect(u=>u.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(n=>this.contactTagService.createContactTag(Object.assign({},n)).pipe((0,b._b)(r=>{this.addNewContactTag(r),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:r,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},r=>{r.graphQLErrors?(this.toast.error(r.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})):(this.toast.error(r.Message),this.formService.setErrors(r.Data))}))))),this.updateContactTagEffect=this.effect(u=>u.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([n,r])=>this.contactTagService.updateContactTag(n,n.id).pipe((0,b._b)(m=>{this.updateContactTag(m),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:m,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},m=>{m.graphQLErrors?(this.toast.error(m.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})):(this.toast.error(m.Message),this.formService.setErrors(m.Data))}))))),this.deleteContactTagEffect=this.effect(u=>u.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([n,r])=>this.data.userDeleteContactTag({contactTagId:r.id}).pipe((0,b._b)(m=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:m.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},m=>{m.graphQLErrors?(this.toast.error(m.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})):(this.toast.error(m.Message),this.formService.setErrors(m.Data))}))))),this.importExcelEffect=this.effect(u=>u.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(n=>this.contactTagService.importContactTags(n).pipe((0,de.K)(r=>{var m;return this.toast.error(null!==(m=r.Message)&&void 0!==m?m:"Failed to save",{duration:3e3}),q.E}),(0,y.b)(r=>{const m=JSON.parse(r.created),p=JSON.parse(r.updated),v=JSON.parse(r.failed),I=m.length+p.length+v.length;this.addContactTags(m),this.updateContactTags(p),this.toast.success(`${m.length} created, ${p.length} updated, ${v.length} failed of total ${I}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("contactTagId")?(this.route.snapshot.paramMap.get("contactTagId"),this.setFormName("contactTag_edit")):this.setFormName("contactTag_create"),this.route.snapshot.paramMap.has("contactId")){var c=this.route.snapshot.paramMap.get("contactId");this.setContactId(c)}}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.contactTagService.validateContactTagExcelData(t,i.contacts)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(z.q),e.LFG(O.F0),e.LFG(O.gz),e.LFG(X.F),e.LFG(Z.o),e.LFG(wA))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function xA(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.close.emit())})("formIsReady",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.contactTag)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let Yn=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"contactTag_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.contactTag=i.item})):t.formName&&t.formName.currentValue&&"contactTag_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadContactTagEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.contactTag=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(eo),e.Y36(O.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-contact-tag-form"]],inputs:{contactTag:"contactTag",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,xA,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[P.O5,te.M,P.Ov],encapsulation:2}),s})(),Xn=(()=>{class s{constructor(){this.autoHeight=!1,this.contactTags=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[{field:"contact.name",headerName:"Contact",filter:"agTextColumnFilter"},{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{field:"contactId",filter:"agTextColumnFilter",hide:!0}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var a;t.includes(null===(a=i.data)||void 0===a?void 0:a.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-contact-tag-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(f.x,5),2&t){let a;e.iGM(a=e.CRH())&&(i.tableView=a.first)}},inputs:{autoHeight:"autoHeight",contactTags:"contactTags"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.contactTags)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[f.x],encapsulation:2}),s})();function NA(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-contact-tag-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","contactTag_edit")("formControl",t.formControl)("contactTag",t.contactTag)}}const AA=function(){return{}};function FA(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-contact-tag-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","contactTag_create")("formControl",t.formControl)("contactTag",e.DdM(3,AA))}}function PA(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-contact-tag-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(d.ref.close())}),e.qZA()}2&s&&e.Q6J("contactTags",o.data.items)}let IA=(()=>{class s extends G.fS{constructor(t){super(),this.store=t,this.store.loadContactTagsEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.contactTags$.pipe((0,h.w)(i=>(0,D.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(eo))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","contactTag","send","close"],[1,"w-full","h-full","bg-white",3,"contactTags","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,NA,2,3,"ng-template",null,1,e.W1O),e.YNc(3,FA,1,4,"ng-template",null,2,e.W1O),e.YNc(5,PA,1,1,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",d)("editTemplate",a)("createTemplate",l)("key",i.field.key)}},dependencies:[E.JJ,E.oH,H.$,Yn,Xn],encapsulation:2}),s})();function DA(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-contact-tag-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","contactTag_edit")("contactTag",t.value)}}const MA=function(){return{}};function WA(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-contact-tag-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","contactTag_create")("contactTag",e.DdM(2,MA))}function EA(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-contact-tag-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(null==d.ref?null:d.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("contactTags",t.items)}}let OA=(()=>{class s extends pe{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","contactTag","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","contactTags","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,DA,1,2,"ng-template",null,1,e.W1O),e.YNc(3,WA,1,3,"ng-template",null,2,e.W1O),e.YNc(5,EA,1,2,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[he,Yn,Xn],encapsulation:2}),s})(),LA=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[eo],imports:[P.ez,U.F,E.UX,J.o,ae.u,$.P,j.t,me,k.h,se.G,G.X0.forChild({types:[{name:"contact-tag-select",component:IA,wrappers:["form-field"]},{name:"contact-tag-grid",component:OA}]})]}),s})(),$A=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[LA]}),s})();class Ut extends W.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class GA extends Ut{constructor(o){super("ValidateContractedRateKindExcelDataAction"),this.valid=!1,this.excelData=o}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name)}),this.validationContext.addRule(new g.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof g.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(a=>a.name),newNames:[i.newName]}):i instanceof g.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,D.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class RA extends g.wS{constructor(o,t,i,a,l){super(o,t,i,a,l,!0)}}class QA extends g.ul{constructor(o,t,i,a=!1){super(o,t,a),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new g.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new RA("name","The contractedratekind name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class VA extends Ut{constructor(o){super("CreateContractedRateKindAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new QA("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateContractedRateKind({input:this.input}).pipe((0,h.w)(o=>(0,ue.of)(o.data.created)))}}class jA extends Ut{constructor(o){super("UpdateContractedRateKindsAction"),this.contractedRateKinds=o}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.contractedRateKinds,!0))}performAction(){this.response=this.businessProvider.data.userUpdateContractedRateKinds({input:{contractedRateKinds:this.contractedRateKinds}}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}class UA extends Ut{constructor(o,t){super("UpdateContractedRateKindAction"),this.contractedRateKind=o,this.contractedRateKindId=t}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.contractedRateKind,!0)).addRule(new g.xF("Id","Id should be a CUID and not null",this.contractedRateKindId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateContractedRateKind({contractedRateKindId:this.contractedRateKindId,input:this.contractedRateKind}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}let el=(()=>{class s extends W.nH{constructor(t,i,a){super("NotificationService.ContractedRateKindBusinessProviderService",t,a),this.data=i}createContractedRateKind(t){const i=new VA(t);return i.Do(this),i.response}updateContractedRateKind(t,i){const a=new UA(t,i);return a.Do(this),a.response}importContractedRateKinds(t){const i=new jA(t);return i.Do(this),i.response}validateContractedRateKindExcelData(t){const i=new GA(t);return i.Do(this),i.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(K.ed),e.LFG(z.q),e.LFG(W.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),JA=(()=>{class s extends W.nH{constructor(t,i,a){super("ContractedRateKindService",a,t),this.businessProvider=i}createContractedRateKind(t){const i=Object.fromEntries(Object.entries(t).filter(([a,l])=>null!==l));return this.businessProvider.createContractedRateKind(i)}updateContractedRateKind(t,i){return this.businessProvider.updateContractedRateKind(t,i)}importContractedRateKinds(t){return this.businessProvider.importContractedRateKinds(t)}validateContractedRateKindExcelData(t){return this.businessProvider.validateContractedRateKindExcelData(t)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(el,8),e.LFG(el),e.LFG(K.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),to=(()=>{class s extends b.m1{constructor(t,i,a,l,d,ee){super({loading:!1,contractedRateKinds:[],done:!1,searchQuery:"",formName:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=a,this.toast=l,this.formService=d,this.contractedRateKindService=ee,this.errors$=this.select(c=>c.errors),this.loading$=this.select(c=>c.loading),this.done$=this.select(c=>c.done),this.item$=this.select(c=>c.item),this.contractedRateKinds$=this.select(c=>c.contractedRateKinds),this.paging$=this.select(c=>c.paging),this.searchQuery$=this.select(c=>c.searchQuery),this.formName$=this.select(c=>c.formName),this.actionResult$=this.select(this.item$,this.done$,(c,u)=>({item:c,done:u}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.contractedRateKinds$,(c,u,n,r,m)=>({errors:c,loading:u,item:n,formName:r,contractedRateKinds:m}),{debounce:!0}),this.input$=this.select(this.paging$,this.searchQuery$,(c,u)=>({limit:c.limit,skip:c.skip,name:u,total:c.total})),this.setFormName=this.updater((c,u)=>Object.assign(Object.assign({},c),{formName:u})),this.setItem=this.updater((c,u)=>Object.assign(Object.assign({},c),{item:u})),this.addNewContractedRateKind=this.updater((c,u)=>Object.assign(Object.assign({},c),{contractedRateKinds:[...c.contractedRateKinds,u]})),this.updateContractedRateKind=this.updater((c,u)=>Object.assign(Object.assign({},c),{contractedRateKinds:c.contractedRateKinds.map(n=>n.id===u.id?u:n)})),this.addContractedRateKinds=this.updater((c,u)=>Object.assign(Object.assign({},c),{contractedRateKinds:c.contractedRateKinds.concat(u)})),this.updateContractedRateKinds=this.updater((c,u)=>Object.assign(Object.assign({},c),{contractedRateKinds:c.contractedRateKinds.map(n=>u.find(m=>m.id===n.id)||n)})),this.setSearchQuery=this.updater((c,u)=>Object.assign(Object.assign({},c),{searchQuery:u})),this.loadContractedRateKindEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.data.userContractedRateKind({contractedRateKindId:u}).pipe((0,b._b)(n=>{this.patchState({item:n.data.item,errors:n.errors,loading:!1})},n=>this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})))))),this.loadContractedRateKindsEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.input$),(0,h.w)(([u,n])=>this.data.userContractedRateKinds({input:n}).pipe((0,b._b)(r=>this.patchState({paging:{limit:n.limit,skip:n.skip,total:r.data.count.total},contractedRateKinds:r.data.items,errors:r.errors,loading:!1}),r=>this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})))))),this.createContractedRateKindEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.contractedRateKindService.createContractedRateKind(Object.assign({},u)).pipe((0,b._b)(n=>{this.addNewContractedRateKind(n),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:n,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},n=>{n.graphQLErrors?(this.toast.error(n.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})):(this.toast.error(n.Message),this.formService.setErrors(n.Data))}))))),this.updateContractedRateKindEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([u,n])=>this.contractedRateKindService.updateContractedRateKind(u,u.id).pipe((0,b._b)(r=>{this.updateContractedRateKind(r),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:r,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},r=>{r.graphQLErrors?(this.toast.error(r.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})):(this.toast.error(r.Message),this.formService.setErrors(r.Data))}))))),this.deleteContractedRateKindEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([u,n])=>this.data.userDeleteContractedRateKind({contractedRateKindId:n.id}).pipe((0,b._b)(r=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:r.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},r=>{r.graphQLErrors?(this.toast.error(r.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})):(this.toast.error(r.Message),this.formService.setErrors(r.Data))}))))),this.importExcelEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.contractedRateKindService.importContractedRateKinds(u).pipe((0,de.K)(n=>{var r;return this.toast.error(null!==(r=n.Message)&&void 0!==r?r:"Failed to save",{duration:3e3}),q.E}),(0,y.b)(n=>{const r=JSON.parse(n.created),m=JSON.parse(n.updated),p=JSON.parse(n.failed),v=r.length+m.length+p.length;this.addContractedRateKinds(r),this.updateContractedRateKinds(m),this.toast.success(`${r.length} created, ${m.length} updated, ${p.length} failed of total ${v}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("contractedRateKindId")?(this.route.snapshot.paramMap.get("contractedRateKindId"),this.setFormName("contractedRateKind_edit")):this.setFormName("contractedRateKind_create")}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.contractedRateKindService.validateContractedRateKindExcelData(t)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(z.q),e.LFG(O.F0),e.LFG(O.gz),e.LFG(X.F),e.LFG(Z.o),e.LFG(JA))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function zA(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.close.emit())})("formIsReady",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.contractedRateKind)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let tl=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"contractedRateKind_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.contractedRateKind=i.item})):t.formName&&t.formName.currentValue&&"contractedRateKind_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadContractedRateKindEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.contractedRateKind=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(to),e.Y36(O.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-contracted-rate-kind-form"]],inputs:{contractedRateKind:"contractedRateKind",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,zA,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[P.O5,te.M,P.Ov],encapsulation:2}),s})(),il=(()=>{class s{constructor(){this.autoHeight=!1,this.contractedRateKinds=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[,{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{field:"code",filter:"agTextColumnFilter"},{headerName:"Value",field:"value",valueFormatter:t=>{var i;return(0,_.oBD)(null===(i=t.data)||void 0===i?void 0:i.value,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var a;t.includes(null===(a=i.data)||void 0===a?void 0:a.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-contracted-rate-kind-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(f.x,5),2&t){let a;e.iGM(a=e.CRH())&&(i.tableView=a.first)}},inputs:{autoHeight:"autoHeight",contractedRateKinds:"contractedRateKinds"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.contractedRateKinds)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[f.x],encapsulation:2}),s})();function HA(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-contracted-rate-kind-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","contractedRateKind_edit")("formControl",t.formControl)("contractedRateKind",t.contractedRateKind)}}const qA=function(){return{}};function KA(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-contracted-rate-kind-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","contractedRateKind_create")("formControl",t.formControl)("contractedRateKind",e.DdM(3,qA))}}function ZA(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-contracted-rate-kind-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(d.ref.close())}),e.qZA()}2&s&&e.Q6J("contractedRateKinds",o.data.items)}let BA=(()=>{class s extends G.fS{constructor(t){super(),this.store=t,this.store.loadContractedRateKindsEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.contractedRateKinds$.pipe((0,h.w)(i=>(0,D.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(to))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","contractedRateKind","send","close"],[1,"w-full","h-full","bg-white",3,"contractedRateKinds","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,HA,2,3,"ng-template",null,1,e.W1O),e.YNc(3,KA,1,4,"ng-template",null,2,e.W1O),e.YNc(5,ZA,1,1,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",d)("editTemplate",a)("createTemplate",l)("key",i.field.key)}},dependencies:[E.JJ,E.oH,H.$,tl,il],encapsulation:2}),s})();function kA(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-contracted-rate-kind-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","contractedRateKind_edit")("contractedRateKind",t.value)}}const YA=function(){return{}};function XA(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-contracted-rate-kind-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","contractedRateKind_create")("contractedRateKind",e.DdM(2,YA))}function eF(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-contracted-rate-kind-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(null==d.ref?null:d.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("contractedRateKinds",t.items)}}let tF=(()=>{class s extends pe{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","contractedRateKind","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","contractedRateKinds","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,kA,1,2,"ng-template",null,1,e.W1O),e.YNc(3,XA,1,3,"ng-template",null,2,e.W1O),e.YNc(5,eF,1,2,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[he,tl,il],encapsulation:2}),s})(),iF=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[to],imports:[P.ez,U.F,E.UX,J.o,ae.u,$.P,j.t,me,k.h,se.G,G.X0.forChild({types:[{name:"contracted-rate-kind-select",component:BA,wrappers:["form-field"]},{name:"contracted-rate-kind-grid",component:tF}]})]}),s})(),sF=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[iF]}),s})();class Jt extends W.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class oF extends Jt{constructor(o,t,i,a,l,d,ee){super("ValidateContractedRateExcelDataAction"),this.valid=!1,this.excelData=o,this.contracts=t,this.contractedRateKinds=i,this.contractKinds=a,this.visitKinds=l,this.clinicalProviders=d,this.specialties=ee}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name),this.validationContext.addRule(new g.mi(`contractName_${i}_is_valid}`,"Contract Is Not Valid","contract.name",t.contract,this.contracts,!0)),this.validationContext.addRule(new g.mi(`contractedRateKindName_${i}_is_valid}`,"Contracted Rate Kind Is Not Valid","contractedRateKind.name",t.contractedRateKind,this.contractedRateKinds,!0)),this.validationContext.addRule(new g.mi(`contractKindName_${i}_is_valid}`,"Contract Kind Is Not Valid","contractKind.name",t.contractKind,this.contractKinds,!0)),this.validationContext.addRule(new g.mi(`visitKindName_${i}_is_valid}`,"Visit Kind Is Not Valid","visitKind.name",t.visitKind,this.visitKinds,!0)),this.validationContext.addRule(new g.mi(`clinicalProviderName_${i}_is_valid}`,"Clinical Provider Is Not Valid","clinicalProvider.name",t.clinicalProvider,this.clinicalProviders,!0)),this.validationContext.addRule(new g.mi(`specialtyName_${i}_is_valid}`,"Specialty Is Not Valid","specialty.name",t.specialty,this.specialties,!0))}),this.validationContext.addRule(new g.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof g.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(a=>a.name),newNames:[i.newName]}):i instanceof g.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,D.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class aF extends g.wS{constructor(o,t,i,a,l){super(o,t,i,a,l,!0)}}class rF extends g.ul{constructor(o,t,i,a=!1){super(o,t,a),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new g.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new aF("name","The contractedrate name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class nF extends Jt{constructor(o){super("CreateContractedRateAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new rF("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateContractedRate({input:this.input}).pipe((0,h.w)(o=>(0,ue.of)(o.data.created)))}}class lF extends Jt{constructor(o){super("UpdateContractedRatesAction"),this.contractedRates=o}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.contractedRates,!0))}performAction(){this.response=this.businessProvider.data.userUpdateContractedRates({input:{contractedRates:this.contractedRates}}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}class cF extends Jt{constructor(o,t){super("UpdateContractedRateAction"),this.contractedRate=o,this.contractedRateId=t}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.contractedRate,!0)).addRule(new g.xF("Id","Id should be a CUID and not null",this.contractedRateId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateContractedRate({contractedRateId:this.contractedRateId,input:this.contractedRate}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}let sl=(()=>{class s extends W.nH{constructor(t,i,a){super("NotificationService.ContractedRateBusinessProviderService",t,a),this.data=i}createContractedRate(t){const i=new nF(t);return i.Do(this),i.response}updateContractedRate(t,i){const a=new cF(t,i);return a.Do(this),a.response}importContractedRates(t){const i=new lF(t);return i.Do(this),i.response}validateContractedRateExcelData(t,i,a,l,d,ee,V){const c=new oF(t,i,a,l,d,ee,V);return c.Do(this),c.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(K.ed),e.LFG(z.q),e.LFG(W.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),dF=(()=>{class s extends W.nH{constructor(t,i,a){super("ContractedRateService",a,t),this.businessProvider=i}createContractedRate(t){const i=Object.fromEntries(Object.entries(t).filter(([a,l])=>null!==l));return this.businessProvider.createContractedRate(i)}updateContractedRate(t,i){return this.businessProvider.updateContractedRate(t,i)}importContractedRates(t){return this.businessProvider.importContractedRates(t)}validateContractedRateExcelData(t,i,a,l,d,ee,V){return this.businessProvider.validateContractedRateExcelData(t,i,a,l,d,ee,V)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(sl,8),e.LFG(sl),e.LFG(K.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),io=(()=>{class s extends b.m1{constructor(t,i,a,l,d,ee){if(super({loading:!1,contractedRates:[],done:!1,searchQuery:"",formName:void 0,contractId:void 0,contractedRateKindId:void 0,contractKindId:void 0,visitKindId:void 0,clinicalProviderId:void 0,specialtyId:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=a,this.toast=l,this.formService=d,this.contractedRateService=ee,this.errors$=this.select(v=>v.errors),this.loading$=this.select(v=>v.loading),this.done$=this.select(v=>v.done),this.item$=this.select(v=>v.item),this.contractedRates$=this.select(v=>v.contractedRates),this.contracts$=this.select(v=>v.contracts||[]),this.contractedRateKinds$=this.select(v=>v.contractedRateKinds||[]),this.contractKinds$=this.select(v=>v.contractKinds||[]),this.visitKinds$=this.select(v=>v.visitKinds||[]),this.clinicalProviders$=this.select(v=>v.clinicalProviders||[]),this.specialties$=this.select(v=>v.specialties||[]),this.contractId$=this.select(v=>v.contractId),this.contractedRateKindId$=this.select(v=>v.contractedRateKindId),this.contractKindId$=this.select(v=>v.contractKindId),this.visitKindId$=this.select(v=>v.visitKindId),this.clinicalProviderId$=this.select(v=>v.clinicalProviderId),this.specialtyId$=this.select(v=>v.specialtyId),this.paging$=this.select(v=>v.paging),this.searchQuery$=this.select(v=>v.searchQuery),this.formName$=this.select(v=>v.formName),this.actionResult$=this.select(this.item$,this.done$,(v,I)=>({item:v,done:I}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.contractedRates$,this.contracts$,this.contractedRateKinds$,this.contractKinds$,this.visitKinds$,this.clinicalProviders$,this.specialties$,(v,I,B,_e,Ne,le,ce,oe,ne,ve,Te)=>({errors:v,loading:I,item:B,formName:_e,contractedRates:Ne,contracts:le,contractedRateKinds:ce,contractKinds:oe,visitKinds:ne,clinicalProviders:ve,specialties:Te}),{debounce:!0}),this.input$=this.select(this.paging$,this.contractId$,this.contractedRateKindId$,this.contractKindId$,this.visitKindId$,this.clinicalProviderId$,this.specialtyId$,this.searchQuery$,(v,I,B,_e,Ne,le,ce,oe)=>({limit:v.limit,skip:v.skip,name:oe,contractId:I,contractedRateKindId:B,contractKindId:_e,visitKindId:Ne,clinicalProviderId:le,specialtyId:ce,total:v.total})),this.setFormName=this.updater((v,I)=>Object.assign(Object.assign({},v),{formName:I})),this.setContractId=this.updater((v,I)=>Object.assign(Object.assign({},v),{contractId:I})),this.setContractedRateKindId=this.updater((v,I)=>Object.assign(Object.assign({},v),{contractedRateKindId:I})),this.setContractKindId=this.updater((v,I)=>Object.assign(Object.assign({},v),{contractKindId:I})),this.setVisitKindId=this.updater((v,I)=>Object.assign(Object.assign({},v),{visitKindId:I})),this.setClinicalProviderId=this.updater((v,I)=>Object.assign(Object.assign({},v),{clinicalProviderId:I})),this.setSpecialtyId=this.updater((v,I)=>Object.assign(Object.assign({},v),{specialtyId:I})),this.filterContracts=v=>this.data.userSelectContracts({input:{name:v}}).pipe((0,b._b)(I=>{let B=I.data.items;return this.patchState({contracts:B}),B},I=>this.patchState({errors:I.graphQLErrors?I.graphQLErrors:I})),(0,fe.U)(I=>I.data.items)),this.filterContractedRateKinds=v=>this.data.userSelectContractedRateKinds({input:{name:v}}).pipe((0,b._b)(I=>{let B=I.data.items;return this.patchState({contractedRateKinds:B}),B},I=>this.patchState({errors:I.graphQLErrors?I.graphQLErrors:I})),(0,fe.U)(I=>I.data.items)),this.filterContractKinds=v=>this.data.userSelectContractKinds({input:{name:v}}).pipe((0,b._b)(I=>{let B=I.data.items;return this.patchState({contractKinds:B}),B},I=>this.patchState({errors:I.graphQLErrors?I.graphQLErrors:I})),(0,fe.U)(I=>I.data.items)),this.filterVisitKinds=v=>this.data.userSelectVisitKinds({input:{name:v}}).pipe((0,b._b)(I=>{let B=I.data.items;return this.patchState({visitKinds:B}),B},I=>this.patchState({errors:I.graphQLErrors?I.graphQLErrors:I})),(0,fe.U)(I=>I.data.items)),this.filterClinicalProviders=v=>this.data.userSelectClinicalProviders({input:{name:v}}).pipe((0,b._b)(I=>{let B=I.data.items;return this.patchState({clinicalProviders:B}),B},I=>this.patchState({errors:I.graphQLErrors?I.graphQLErrors:I})),(0,fe.U)(I=>I.data.items)),this.filterSpecialties=v=>this.data.userSelectSpecialties({input:{name:v}}).pipe((0,b._b)(I=>{let B=I.data.items;return this.patchState({specialties:B}),B},I=>this.patchState({errors:I.graphQLErrors?I.graphQLErrors:I})),(0,fe.U)(I=>I.data.items)),this.addContract=this.updater((v,I)=>Object.assign(Object.assign({},v),{contracts:v.contracts.concat(I)})),this.addContractedRateKind=this.updater((v,I)=>Object.assign(Object.assign({},v),{contractedRateKinds:v.contractedRateKinds.concat(I)})),this.addContractKind=this.updater((v,I)=>Object.assign(Object.assign({},v),{contractKinds:v.contractKinds.concat(I)})),this.addVisitKind=this.updater((v,I)=>Object.assign(Object.assign({},v),{visitKinds:v.visitKinds.concat(I)})),this.addClinicalProvider=this.updater((v,I)=>Object.assign(Object.assign({},v),{clinicalProviders:v.clinicalProviders.concat(I)})),this.addSpecialty=this.updater((v,I)=>Object.assign(Object.assign({},v),{specialties:v.specialties.concat(I)})),this.setItem=this.updater((v,I)=>Object.assign(Object.assign({},v),{item:I})),this.addNewContractedRate=this.updater((v,I)=>Object.assign(Object.assign({},v),{contractedRates:[...v.contractedRates,I]})),this.updateContractedRate=this.updater((v,I)=>Object.assign(Object.assign({},v),{contractedRates:v.contractedRates.map(B=>B.id===I.id?I:B)})),this.addContractedRates=this.updater((v,I)=>Object.assign(Object.assign({},v),{contractedRates:v.contractedRates.concat(I)})),this.updateContractedRates=this.updater((v,I)=>Object.assign(Object.assign({},v),{contractedRates:v.contractedRates.map(B=>I.find(Ne=>Ne.id===B.id)||B)})),this.setSearchQuery=this.updater((v,I)=>Object.assign(Object.assign({},v),{searchQuery:I})),this.loadContractedRateEffect=this.effect(v=>v.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(I=>this.data.userContractedRate({contractedRateId:I}).pipe((0,b._b)(B=>{this.patchState({item:B.data.item,errors:B.errors,loading:!1})},B=>this.patchState({loading:!1,errors:B.graphQLErrors?B.graphQLErrors:B})))))),this.loadContractedRatesEffect=this.effect(v=>v.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.input$),(0,h.w)(([I,B])=>this.data.userContractedRates({input:B}).pipe((0,b._b)(_e=>this.patchState({paging:{limit:B.limit,skip:B.skip,total:_e.data.count.total},contractedRates:_e.data.items,errors:_e.errors,loading:!1}),_e=>this.patchState({loading:!1,errors:_e.graphQLErrors?_e.graphQLErrors:_e})))))),this.createContractedRateEffect=this.effect(v=>v.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(I=>this.contractedRateService.createContractedRate(Object.assign({},I)).pipe((0,b._b)(B=>{this.addNewContractedRate(B),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:B,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},B=>{B.graphQLErrors?(this.toast.error(B.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:B.graphQLErrors?B.graphQLErrors:B})):(this.toast.error(B.Message),this.formService.setErrors(B.Data))}))))),this.updateContractedRateEffect=this.effect(v=>v.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([I,B])=>this.contractedRateService.updateContractedRate(I,I.id).pipe((0,b._b)(_e=>{this.updateContractedRate(_e),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:_e,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},_e=>{_e.graphQLErrors?(this.toast.error(_e.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:_e.graphQLErrors?_e.graphQLErrors:_e})):(this.toast.error(_e.Message),this.formService.setErrors(_e.Data))}))))),this.deleteContractedRateEffect=this.effect(v=>v.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([I,B])=>this.data.userDeleteContractedRate({contractedRateId:B.id}).pipe((0,b._b)(_e=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:_e.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},_e=>{_e.graphQLErrors?(this.toast.error(_e.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:_e.graphQLErrors?_e.graphQLErrors:_e})):(this.toast.error(_e.Message),this.formService.setErrors(_e.Data))}))))),this.importExcelEffect=this.effect(v=>v.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(I=>this.contractedRateService.importContractedRates(I).pipe((0,de.K)(B=>{var _e;return this.toast.error(null!==(_e=B.Message)&&void 0!==_e?_e:"Failed to save",{duration:3e3}),q.E}),(0,y.b)(B=>{const _e=JSON.parse(B.created),Ne=JSON.parse(B.updated),le=JSON.parse(B.failed),ce=_e.length+Ne.length+le.length;this.addContractedRates(_e),this.updateContractedRates(Ne),this.toast.success(`${_e.length} created, ${Ne.length} updated, ${le.length} failed of total ${ce}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("contractedRateId")?(this.route.snapshot.paramMap.get("contractedRateId"),this.setFormName("contractedRate_edit")):this.setFormName("contractedRate_create"),this.route.snapshot.paramMap.has("contractId")){var c=this.route.snapshot.paramMap.get("contractId");this.setContractId(c)}if(this.route.snapshot.paramMap.has("contractedRateKindId")){var u=this.route.snapshot.paramMap.get("contractedRateKindId");this.setContractedRateKindId(u)}if(this.route.snapshot.paramMap.has("contractKindId")){var n=this.route.snapshot.paramMap.get("contractKindId");this.setContractKindId(n)}if(this.route.snapshot.paramMap.has("visitKindId")){var r=this.route.snapshot.paramMap.get("visitKindId");this.setVisitKindId(r)}if(this.route.snapshot.paramMap.has("clinicalProviderId")){var m=this.route.snapshot.paramMap.get("clinicalProviderId");this.setClinicalProviderId(m)}if(this.route.snapshot.paramMap.has("specialtyId")){var p=this.route.snapshot.paramMap.get("specialtyId");this.setSpecialtyId(p)}}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.contractedRateService.validateContractedRateExcelData(t,i.contracts,i.contractedRateKinds,i.contractKinds,i.visitKinds,i.clinicalProviders,i.specialties)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(z.q),e.LFG(O.F0),e.LFG(O.gz),e.LFG(X.F),e.LFG(Z.o),e.LFG(dF))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function uF(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.close.emit())})("formIsReady",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.contractedRate)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let ol=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"contractedRate_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({id:null,name:""}),this.store.vm$.subscribe(i=>{this.contractedRate=i.item})):t.formName&&t.formName.currentValue&&"contractedRate_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadContractedRateEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.contractedRate=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(io),e.Y36(O.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-contracted-rate-form"]],inputs:{contractedRate:"contractedRate",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,uF,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[P.O5,te.M,P.Ov],encapsulation:2}),s})(),al=(()=>{class s{constructor(){this.autoHeight=!1,this.contractedRates=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[{field:"contract.name",headerName:"Contract",filter:"agTextColumnFilter"},{field:"contractedRateKind.name",headerName:"Contracted Rate Kind",filter:"agTextColumnFilter"},{field:"contractKind.name",headerName:"Contract Kind",filter:"agTextColumnFilter"},{field:"visitKind.name",headerName:"Visit Kind",filter:"agTextColumnFilter"},{field:"clinicalProvider.name",headerName:"Clinical Provider",filter:"agTextColumnFilter"},{field:"specialty.name",headerName:"Specialty",filter:"agTextColumnFilter"},{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{headerName:"Amount",field:"amount",valueFormatter:t=>{var i;return(0,_.oBD)(null===(i=t.data)||void 0===i?void 0:i.amount,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{headerName:"Percentage",field:"percentage",valueFormatter:t=>{var i;return(0,_.oBD)(null===(i=t.data)||void 0===i?void 0:i.percentage,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{headerName:"Reimbursed Rate",field:"reimbursedRate",valueFormatter:t=>{var i;return(0,_.oBD)(null===(i=t.data)||void 0===i?void 0:i.reimbursedRate,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{headerName:"Bill on Behalf",field:"billOnBehalf",filter:"agSetColumnFilter",cellRenderer:"checkboxRenderer"},{field:"contractId",filter:"agTextColumnFilter",hide:!0},{field:"contractedRateKindId",filter:"agTextColumnFilter",hide:!0},{field:"contractKindId",filter:"agTextColumnFilter",hide:!0},{field:"visitKindId",filter:"agTextColumnFilter",hide:!0},{field:"clinicalProviderId",filter:"agTextColumnFilter",hide:!0},{field:"specialtyId",filter:"agTextColumnFilter",hide:!0}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var a;t.includes(null===(a=i.data)||void 0===a?void 0:a.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-contracted-rate-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(f.x,5),2&t){let a;e.iGM(a=e.CRH())&&(i.tableView=a.first)}},inputs:{autoHeight:"autoHeight",contractedRates:"contractedRates"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.contractedRates)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[f.x],encapsulation:2}),s})();function mF(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-contracted-rate-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","contractedRate_edit")("formControl",t.formControl)("contractedRate",t.contractedRate)}}const pF=function(){return{}};function hF(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-contracted-rate-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","contractedRate_create")("formControl",t.formControl)("contractedRate",e.DdM(3,pF))}}function fF(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-contracted-rate-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(d.ref.close())}),e.qZA()}2&s&&e.Q6J("contractedRates",o.data.items)}let _F=(()=>{class s extends G.fS{constructor(t){super(),this.store=t,this.store.loadContractedRatesEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.contractedRates$.pipe((0,h.w)(i=>(0,D.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(io))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","contractedRate","send","close"],[1,"w-full","h-full","bg-white",3,"contractedRates","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,mF,2,3,"ng-template",null,1,e.W1O),e.YNc(3,hF,1,4,"ng-template",null,2,e.W1O),e.YNc(5,fF,1,1,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",d)("editTemplate",a)("createTemplate",l)("key",i.field.key)}},dependencies:[E.JJ,E.oH,H.$,ol,al],encapsulation:2}),s})();function gF(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-contracted-rate-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","contractedRate_edit")("contractedRate",t.value)}}const vF=function(){return{}};function CF(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-contracted-rate-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","contractedRate_create")("contractedRate",e.DdM(2,vF))}function SF(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-contracted-rate-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(null==d.ref?null:d.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("contractedRates",t.items)}}let bF=(()=>{class s extends pe{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:6,consts:[[3,"data","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","contractedRate","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","contractedRates","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,gF,1,2,"ng-template",null,1,e.W1O),e.YNc(3,CF,1,3,"ng-template",null,2,e.W1O),e.YNc(5,SF,1,2,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("data",i.data)("title",i.to.title)("onSave",i.onSave)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[he,ol,al],encapsulation:2}),s})(),TF=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[io],imports:[P.ez,U.F,E.UX,J.o,ae.u,$.P,j.t,me,k.h,se.G,G.X0.forChild({types:[{name:"contracted-rate-select",component:_F,wrappers:["form-field"]},{name:"contracted-rate-grid",component:bF}]})]}),s})(),yF=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[TF]}),s})();class zt extends W.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class wF extends zt{constructor(o){super("ValidateContractKindExcelDataAction"),this.valid=!1,this.excelData=o}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name)}),this.validationContext.addRule(new g.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof g.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(a=>a.name),newNames:[i.newName]}):i instanceof g.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,D.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class xF extends g.wS{constructor(o,t,i,a,l){super(o,t,i,a,l,!0)}}class NF extends g.ul{constructor(o,t,i,a=!1){super(o,t,a),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new g.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new xF("name","The contractkind name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class AF extends zt{constructor(o){super("CreateContractKindAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new NF("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateContractKind({input:this.input}).pipe((0,h.w)(o=>(0,ue.of)(o.data.created)))}}class FF extends zt{constructor(o){super("UpdateContractKindsAction"),this.contractKinds=o}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.contractKinds,!0))}performAction(){this.response=this.businessProvider.data.userUpdateContractKinds({input:{contractKinds:this.contractKinds}}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}class PF extends zt{constructor(o,t){super("UpdateContractKindAction"),this.contractKind=o,this.contractKindId=t}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.contractKind,!0)).addRule(new g.xF("Id","Id should be a CUID and not null",this.contractKindId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateContractKind({contractKindId:this.contractKindId,input:this.contractKind}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}let rl=(()=>{class s extends W.nH{constructor(t,i,a){super("NotificationService.ContractKindBusinessProviderService",t,a),this.data=i}createContractKind(t){const i=new AF(t);return i.Do(this),i.response}updateContractKind(t,i){const a=new PF(t,i);return a.Do(this),a.response}importContractKinds(t){const i=new FF(t);return i.Do(this),i.response}validateContractKindExcelData(t){const i=new wF(t);return i.Do(this),i.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(K.ed),e.LFG(z.q),e.LFG(W.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),IF=(()=>{class s extends W.nH{constructor(t,i,a){super("ContractKindService",a,t),this.businessProvider=i}createContractKind(t){const i=Object.fromEntries(Object.entries(t).filter(([a,l])=>null!==l));return this.businessProvider.createContractKind(i)}updateContractKind(t,i){return this.businessProvider.updateContractKind(t,i)}importContractKinds(t){return this.businessProvider.importContractKinds(t)}validateContractKindExcelData(t){return this.businessProvider.validateContractKindExcelData(t)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(rl,8),e.LFG(rl),e.LFG(K.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),so=(()=>{class s extends b.m1{constructor(t,i,a,l,d,ee){super({loading:!1,contractKinds:[],done:!1,searchQuery:"",formName:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=a,this.toast=l,this.formService=d,this.contractKindService=ee,this.errors$=this.select(c=>c.errors),this.loading$=this.select(c=>c.loading),this.done$=this.select(c=>c.done),this.item$=this.select(c=>c.item),this.contractKinds$=this.select(c=>c.contractKinds),this.paging$=this.select(c=>c.paging),this.searchQuery$=this.select(c=>c.searchQuery),this.formName$=this.select(c=>c.formName),this.actionResult$=this.select(this.item$,this.done$,(c,u)=>({item:c,done:u}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.contractKinds$,(c,u,n,r,m)=>({errors:c,loading:u,item:n,formName:r,contractKinds:m}),{debounce:!0}),this.input$=this.select(this.paging$,this.searchQuery$,(c,u)=>({limit:c.limit,skip:c.skip,name:u,total:c.total})),this.setFormName=this.updater((c,u)=>Object.assign(Object.assign({},c),{formName:u})),this.setItem=this.updater((c,u)=>Object.assign(Object.assign({},c),{item:u})),this.addNewContractKind=this.updater((c,u)=>Object.assign(Object.assign({},c),{contractKinds:[...c.contractKinds,u]})),this.updateContractKind=this.updater((c,u)=>Object.assign(Object.assign({},c),{contractKinds:c.contractKinds.map(n=>n.id===u.id?u:n)})),this.addContractKinds=this.updater((c,u)=>Object.assign(Object.assign({},c),{contractKinds:c.contractKinds.concat(u)})),this.updateContractKinds=this.updater((c,u)=>Object.assign(Object.assign({},c),{contractKinds:c.contractKinds.map(n=>u.find(m=>m.id===n.id)||n)})),this.setSearchQuery=this.updater((c,u)=>Object.assign(Object.assign({},c),{searchQuery:u})),this.loadContractKindEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.data.userContractKind({contractKindId:u}).pipe((0,b._b)(n=>{this.patchState({item:n.data.item,errors:n.errors,loading:!1})},n=>this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})))))),this.loadContractKindsEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.input$),(0,h.w)(([u,n])=>this.data.userContractKinds({input:n}).pipe((0,b._b)(r=>this.patchState({paging:{limit:n.limit,skip:n.skip,total:r.data.count.total},contractKinds:r.data.items,errors:r.errors,loading:!1}),r=>this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})))))),this.createContractKindEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.contractKindService.createContractKind(Object.assign({},u)).pipe((0,b._b)(n=>{this.addNewContractKind(n),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:n,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},n=>{n.graphQLErrors?(this.toast.error(n.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})):(this.toast.error(n.Message),this.formService.setErrors(n.Data))}))))),this.updateContractKindEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([u,n])=>this.contractKindService.updateContractKind(u,u.id).pipe((0,b._b)(r=>{this.updateContractKind(r),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:r,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},r=>{r.graphQLErrors?(this.toast.error(r.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})):(this.toast.error(r.Message),this.formService.setErrors(r.Data))}))))),this.deleteContractKindEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([u,n])=>this.data.userDeleteContractKind({contractKindId:n.id}).pipe((0,b._b)(r=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:r.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},r=>{r.graphQLErrors?(this.toast.error(r.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})):(this.toast.error(r.Message),this.formService.setErrors(r.Data))}))))),this.importExcelEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.contractKindService.importContractKinds(u).pipe((0,de.K)(n=>{var r;return this.toast.error(null!==(r=n.Message)&&void 0!==r?r:"Failed to save",{duration:3e3}),q.E}),(0,y.b)(n=>{const r=JSON.parse(n.created),m=JSON.parse(n.updated),p=JSON.parse(n.failed),v=r.length+m.length+p.length;this.addContractKinds(r),this.updateContractKinds(m),this.toast.success(`${r.length} created, ${m.length} updated, ${p.length} failed of total ${v}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("contractKindId")?(this.route.snapshot.paramMap.get("contractKindId"),this.setFormName("contractKind_edit")):this.setFormName("contractKind_create")}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.contractKindService.validateContractKindExcelData(t)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(z.q),e.LFG(O.F0),e.LFG(O.gz),e.LFG(X.F),e.LFG(Z.o),e.LFG(IF))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function DF(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.close.emit())})("formIsReady",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.contractKind)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let nl=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"contractKind_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.contractKind=i.item})):t.formName&&t.formName.currentValue&&"contractKind_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadContractKindEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.contractKind=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(so),e.Y36(O.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-contract-kind-form"]],inputs:{contractKind:"contractKind",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,DF,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[P.O5,te.M,P.Ov],encapsulation:2}),s})(),ll=(()=>{class s{constructor(){this.autoHeight=!1,this.contractKinds=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[,{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var a;t.includes(null===(a=i.data)||void 0===a?void 0:a.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-contract-kind-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(f.x,5),2&t){let a;e.iGM(a=e.CRH())&&(i.tableView=a.first)}},inputs:{autoHeight:"autoHeight",contractKinds:"contractKinds"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.contractKinds)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[f.x],encapsulation:2}),s})();function MF(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-contract-kind-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","contractKind_edit")("formControl",t.formControl)("contractKind",t.contractKind)}}const WF=function(){return{}};function EF(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-contract-kind-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","contractKind_create")("formControl",t.formControl)("contractKind",e.DdM(3,WF))}}function OF(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-contract-kind-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(d.ref.close())}),e.qZA()}2&s&&e.Q6J("contractKinds",o.data.items)}let LF=(()=>{class s extends G.fS{constructor(t){super(),this.store=t,this.store.loadContractKindsEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.contractKinds$.pipe((0,h.w)(i=>(0,D.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(so))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","contractKind","send","close"],[1,"w-full","h-full","bg-white",3,"contractKinds","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,MF,2,3,"ng-template",null,1,e.W1O),e.YNc(3,EF,1,4,"ng-template",null,2,e.W1O),e.YNc(5,OF,1,1,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",d)("editTemplate",a)("createTemplate",l)("key",i.field.key)}},dependencies:[E.JJ,E.oH,H.$,nl,ll],encapsulation:2}),s})();function $F(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-contract-kind-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","contractKind_edit")("contractKind",t.value)}}const GF=function(){return{}};function RF(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-contract-kind-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","contractKind_create")("contractKind",e.DdM(2,GF))}function QF(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-contract-kind-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(null==d.ref?null:d.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("contractKinds",t.items)}}let VF=(()=>{class s extends pe{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","contractKind","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","contractKinds","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,$F,1,2,"ng-template",null,1,e.W1O),e.YNc(3,RF,1,3,"ng-template",null,2,e.W1O),e.YNc(5,QF,1,2,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[he,nl,ll],encapsulation:2}),s})(),jF=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[so],imports:[P.ez,U.F,E.UX,J.o,ae.u,$.P,j.t,me,k.h,se.G,G.X0.forChild({types:[{name:"contract-kind-select",component:LF,wrappers:["form-field"]},{name:"contract-kind-grid",component:VF}]})]}),s})(),UF=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[jF]}),s})();class Ze extends W.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class JF extends Ze{constructor(o,t,i,a,l,d,ee,V){super("ValidateContractExcelDataAction"),this.valid=!1,this.excelData=o,this.organizations=t,this.billingOrganizations=i,this.templates=a,this.vendors=l,this.reconciliationPeriodTypes=d,this.calculationBasisTypes=ee,this.processes=V}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name),this.validationContext.addRule(new g.mi(`organizationName_${i}_is_valid}`,"Organization Is Not Valid","organization.name",t.organization,this.organizations,!0)),this.validationContext.addRule(new g.mi(`billingOrganizationName_${i}_is_valid}`,"Billing Organization Is Not Valid","billingOrganization.name",t.billingOrganization,this.billingOrganizations,!0)),this.validationContext.addRule(new g.mi(`templateName_${i}_is_valid}`,"Template Is Not Valid","template.name",t.template,this.templates,!0)),this.validationContext.addRule(new g.mi(`vendorName_${i}_is_valid}`,"Vendor Is Not Valid","vendor.name",t.vendor,this.vendors,!0)),this.validationContext.addRule(new g.mi(`reconciliationPeriodTypeName_${i}_is_valid}`,"Reconciliation Period Type Is Not Valid","reconciliationPeriodType.name",t.reconciliationPeriodType,this.reconciliationPeriodTypes,!0)),this.validationContext.addRule(new g.mi(`calculationBasisTypeName_${i}_is_valid}`,"Calculation Basis Type Is Not Valid","calculationBasisType.name",t.calculationBasisType,this.calculationBasisTypes,!0)),this.validationContext.addRule(new g.mi(`processName_${i}_is_valid}`,"Process Is Not Valid","process.name",t.process,this.processes,!0))}),this.validationContext.addRule(new g.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof g.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(a=>a.name),newNames:[i.newName]}):i instanceof g.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,D.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class zF extends g.wS{constructor(o,t,i,a,l){super(o,t,i,a,l,!0)}}class HF extends g.ul{constructor(o,t,i,a=!1){super(o,t,a),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new g.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new zF("name","The contract name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class qF extends Ze{constructor(o){super("CreateContractAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new HF("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateContract({input:this.input}).pipe((0,h.w)(o=>(0,ue.of)(o.data.created)))}}class KF extends Ze{constructor(o){super("UpdateContractsAction"),this.contracts=o}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.contracts,!0))}performAction(){this.response=this.businessProvider.data.userUpdateContracts({input:{contracts:this.contracts}}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}class ZF extends Ze{constructor(o,t){super("UpdateContractAction"),this.contract=o,this.contractId=t}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.contract,!0)).addRule(new g.xF("Id","Id should be a CUID and not null",this.contractId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateContract({contractId:this.contractId,input:this.contract}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}const cl=["name","organization","vendor","billingOrganization","reconciliationPeriodType","calculationBasisType","process"];class BF extends Ze{constructor(o){super("CheckRequiredFieldsAction"),this.excelData=o,console.log(o)}preValidateAction(){this.excelData.map((o,t)=>{this.validationContext.addRule(new g.r7(`row_${t}_is_valid`,`Row ${t} is not valid`,o,cl,!0))})}finish(){super.finish();let o=[];const t=[];this.validationContext.hasRuleViolations()?this.validationContext.rules.map(i=>{i instanceof g.r7&&(i.isValid?o.push(i.target):t.push(i.target))}):o=this.excelData,this.response=(0,D.of)({data:o,badData:t,requiredFields:cl})}}let dl=(()=>{class s extends W.nH{constructor(t,i,a){super("NotificationService.ContractBusinessProviderService",t,a),this.data=i}createContract(t){const i=new qF(t);return i.Do(this),i.response}updateContract(t,i){const a=new ZF(t,i);return a.Do(this),a.response}importContracts(t){const i=new KF(t);return i.Do(this),i.response}validateRequredFields(t){const i=new BF(t);return i.Do(this),i.response}validateContractExcelData(t,i,a,l,d,ee,V,c){const u=new JF(t,i,a,l,d,ee,V,c);return u.Do(this),u.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(K.ed),e.LFG(z.q),e.LFG(W.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),kF=(()=>{class s extends W.nH{constructor(t,i,a){super("ContractService",a,t),this.businessProvider=i}createContract(t){const i=Object.fromEntries(Object.entries(t).filter(([a,l])=>null!==l));return this.businessProvider.createContract(i)}updateContract(t,i){return this.businessProvider.updateContract(t,i)}importContracts(t){return this.businessProvider.importContracts(t)}checkRequiredFields(t){return this.businessProvider.validateRequredFields(t)}validateContractExcelData(t,i,a,l,d,ee,V,c){return this.businessProvider.validateContractExcelData(t,i,a,l,d,ee,V,c)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(dl,8),e.LFG(dl),e.LFG(K.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),oo=(()=>{class s extends b.m1{constructor(t,i,a,l,d,ee){if(super({loading:!1,contracts:[],done:!1,searchQuery:"",formName:void 0,organizationId:void 0,billingOrganizationId:void 0,templateId:void 0,vendorId:void 0,reconciliationPeriodTypeId:void 0,calculationBasisTypeId:void 0,processId:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=a,this.toast=l,this.formService=d,this.contractService=ee,this.errors$=this.select(V=>V.errors),this.loading$=this.select(V=>V.loading),this.done$=this.select(V=>V.done),this.item$=this.select(V=>V.item),this.contracts$=this.select(V=>V.contracts),this.organizations$=this.select(V=>V.organizations||[]),this.templates$=this.select(V=>V.templates||[]),this.vendors$=this.select(V=>V.vendors||[]),this.reconciliationPeriodTypes$=this.select(V=>V.reconciliationPeriodTypes||[]),this.calculationBasisTypes$=this.select(V=>V.calculationBasisTypes||[]),this.processes$=this.select(V=>V.processes||[]),this.organizationId$=this.select(V=>V.organizationId),this.billingOrganizationId$=this.select(V=>V.billingOrganizationId),this.templateId$=this.select(V=>V.templateId),this.vendorId$=this.select(V=>V.vendorId),this.reconciliationPeriodTypeId$=this.select(V=>V.reconciliationPeriodTypeId),this.calculationBasisTypeId$=this.select(V=>V.calculationBasisTypeId),this.processId$=this.select(V=>V.processId),this.paging$=this.select(V=>V.paging),this.searchQuery$=this.select(V=>V.searchQuery),this.formName$=this.select(V=>V.formName),this.actionResult$=this.select(this.item$,this.done$,(V,c)=>({item:V,done:c}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.contracts$,this.organizations$,this.templates$,this.vendors$,this.reconciliationPeriodTypes$,this.calculationBasisTypes$,this.processes$,(V,c,u,n,r,m,p,v,I,B,_e)=>({errors:V,loading:c,item:u,formName:n,contracts:r,organizations:m,templates:p,vendors:v,reconciliationPeriodTypes:I,calculationBasisTypes:B,processes:_e}),{debounce:!0}),this.input$=this.select(this.paging$,this.organizationId$,this.billingOrganizationId$,this.templateId$,this.vendorId$,this.reconciliationPeriodTypeId$,this.calculationBasisTypeId$,this.processId$,this.searchQuery$,(V,c,u,n,r,m,p,v,I)=>({limit:V.limit,skip:V.skip,name:I,organizationId:c,billingOrganizationId:u,templateId:n,vendorId:r,reconciliationPeriodTypeId:m,calculationBasisTypeId:p,processId:v,total:V.total})),this.setFormName=this.updater((V,c)=>Object.assign(Object.assign({},V),{formName:c})),this.setOrganizationId=this.updater((V,c)=>Object.assign(Object.assign({},V),{organizationId:c})),this.setBillingOrganizationId=this.updater((V,c)=>Object.assign(Object.assign({},V),{billingOrganizationId:c})),this.setTemplateId=this.updater((V,c)=>Object.assign(Object.assign({},V),{templateId:c})),this.setVendorId=this.updater((V,c)=>Object.assign(Object.assign({},V),{vendorId:c})),this.setReconciliationPeriodTypeId=this.updater((V,c)=>Object.assign(Object.assign({},V),{reconciliationPeriodTypeId:c})),this.setCalculationBasisTypeId=this.updater((V,c)=>Object.assign(Object.assign({},V),{calculationBasisTypeId:c})),this.setProcessId=this.updater((V,c)=>Object.assign(Object.assign({},V),{processId:c})),this.filterOrganizations=V=>this.data.userSelectOrganizations({input:{name:V,limit:1e3}}).pipe((0,b._b)(c=>{const u=c.data.items;return this.patchState({organizations:u}),u},c=>this.patchState({errors:c.graphQLErrors?c.graphQLErrors:c})),(0,fe.U)(c=>c.data.items)),this.filterTemplates=V=>this.data.userSelectTemplates({input:{name:V}}).pipe((0,b._b)(c=>{const u=c.data.items;return this.patchState({templates:u}),u},c=>this.patchState({errors:c.graphQLErrors?c.graphQLErrors:c})),(0,fe.U)(c=>c.data.items)),this.filterVendors=V=>this.data.userSelectVendors({input:{name:V}}).pipe((0,b._b)(c=>{const u=c.data.items;return this.patchState({vendors:u}),u},c=>this.patchState({errors:c.graphQLErrors?c.graphQLErrors:c})),(0,fe.U)(c=>c.data.items)),this.filterReconciliationPeriodTypes=V=>this.data.userSelectReconciliationPeriodTypes({input:{name:V}}).pipe((0,b._b)(c=>{const u=c.data.items;return this.patchState({reconciliationPeriodTypes:u}),u},c=>this.patchState({errors:c.graphQLErrors?c.graphQLErrors:c})),(0,fe.U)(c=>c.data.items)),this.filterCalculationBasisTypes=V=>this.data.userSelectCalculationBasisTypes({input:{name:V}}).pipe((0,b._b)(c=>{const u=c.data.items;return this.patchState({calculationBasisTypes:u}),u},c=>this.patchState({errors:c.graphQLErrors?c.graphQLErrors:c})),(0,fe.U)(c=>c.data.items)),this.filterProcesses=V=>this.data.userSelectProcesses({input:{name:V}}).pipe((0,b._b)(c=>{const u=c.data.items;return this.patchState({processes:u}),u},c=>this.patchState({errors:c.graphQLErrors?c.graphQLErrors:c})),(0,fe.U)(c=>c.data.items)),this.addOrganization=this.updater((V,c)=>Object.assign(Object.assign({},V),{organizations:V.organizations.concat(c)})),this.addTemplate=this.updater((V,c)=>Object.assign(Object.assign({},V),{templates:V.templates.concat(c)})),this.addVendor=this.updater((V,c)=>Object.assign(Object.assign({},V),{vendors:V.vendors.concat(c)})),this.addReconciliationPeriodType=this.updater((V,c)=>Object.assign(Object.assign({},V),{reconciliationPeriodTypes:V.reconciliationPeriodTypes.concat(c)})),this.addCalculationBasisType=this.updater((V,c)=>Object.assign(Object.assign({},V),{calculationBasisTypes:V.calculationBasisTypes.concat(c)})),this.addProcess=this.updater((V,c)=>Object.assign(Object.assign({},V),{processes:V.processes.concat(c)})),this.setItem=this.updater((V,c)=>Object.assign(Object.assign({},V),{item:c})),this.addNewContract=this.updater((V,c)=>Object.assign(Object.assign({},V),{contracts:[...V.contracts,c]})),this.updateContract=this.updater((V,c)=>Object.assign(Object.assign({},V),{contracts:V.contracts.map(u=>u.id===c.id?c:u)})),this.addContracts=this.updater((V,c)=>Object.assign(Object.assign({},V),{contracts:V.contracts.concat(c)})),this.updateContracts=this.updater((V,c)=>Object.assign(Object.assign({},V),{contracts:V.contracts.map(u=>c.find(r=>r.id===u.id)||u)})),this.setSearchQuery=this.updater((V,c)=>Object.assign(Object.assign({},V),{searchQuery:c})),this.loadContractEffect=this.effect(V=>V.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(c=>this.data.userContract({contractId:c}).pipe((0,b._b)(u=>{this.patchState({item:u.data.item,errors:u.errors,loading:!1})},u=>this.patchState({loading:!1,errors:u.graphQLErrors?u.graphQLErrors:u})))))),this.loadContractsEffect=this.effect(V=>V.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.input$),(0,h.w)(([c,u])=>this.data.userContracts({input:u}).pipe((0,b._b)(n=>this.patchState({paging:{limit:u.limit,skip:u.skip,total:n.data.count.total},contracts:n.data.items,errors:n.errors,loading:!1}),n=>this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})))))),this.createContractEffect=this.effect(V=>V.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(c=>this.contractService.createContract(Object.assign({},c)).pipe((0,b._b)(u=>{this.addNewContract(u),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:u,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},u=>{u.graphQLErrors?(this.toast.error(u.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:u.graphQLErrors?u.graphQLErrors:u})):(this.toast.error(u.Message),this.formService.setErrors(u.Data))}))))),this.updateContractEffect=this.effect(V=>V.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([c,u])=>this.contractService.updateContract(c,c.id).pipe((0,b._b)(n=>{this.updateContract(n),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:n,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},n=>{n.graphQLErrors?(this.toast.error(n.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})):(this.toast.error(n.Message),this.formService.setErrors(n.Data))}))))),this.deleteContractEffect=this.effect(V=>V.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([c,u])=>this.data.userDeleteContract({contractId:u.id}).pipe((0,b._b)(n=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:n.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},n=>{n.graphQLErrors?(this.toast.error(n.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})):(this.toast.error(n.Message),this.formService.setErrors(n.Data))}))))),this.importExcelEffect=this.effect(V=>V.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(c=>this.contractService.importContracts(c).pipe((0,de.K)(u=>{var n;return this.toast.error(null!==(n=u.Message)&&void 0!==n?n:"Failed to save",{duration:3e3}),q.E}),(0,y.b)(u=>{const n=JSON.parse(u.created),r=JSON.parse(u.updated),m=JSON.parse(u.failed),p=n.length+r.length+m.length;this.addContracts(n),this.updateContracts(r),this.toast.success(`${n.length} created, ${r.length} updated, ${m.length} failed of total ${p}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("contractId")?(this.route.snapshot.paramMap.get("contractId"),this.setFormName("contract_edit")):this.setFormName("contract_create"),this.route.snapshot.paramMap.has("organizationId")){const V=this.route.snapshot.paramMap.get("organizationId");this.setOrganizationId(V)}if(this.route.snapshot.paramMap.has("billingOrganizationId")){const V=this.route.snapshot.paramMap.get("billingOrganizationId");this.setBillingOrganizationId(V)}if(this.route.snapshot.paramMap.has("templateId")){const V=this.route.snapshot.paramMap.get("templateId");this.setTemplateId(V)}if(this.route.snapshot.paramMap.has("vendorId")){const V=this.route.snapshot.paramMap.get("vendorId");this.setVendorId(V)}if(this.route.snapshot.paramMap.has("reconciliationPeriodTypeId")){const V=this.route.snapshot.paramMap.get("reconciliationPeriodTypeId");this.setReconciliationPeriodTypeId(V)}if(this.route.snapshot.paramMap.has("calculationBasisTypeId")){const V=this.route.snapshot.paramMap.get("calculationBasisTypeId");this.setCalculationBasisTypeId(V)}if(this.route.snapshot.paramMap.has("processId")){const V=this.route.snapshot.paramMap.get("processId");this.setProcessId(V)}}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.contractService.checkRequiredFields(t).pipe((0,h.w)(({data:a,badData:l,requiredFields:d})=>(l?.length>0&&this.toast.error(`${l.length} rows do not have all required fields. All rows should contain ${d.join(", ")}`,{duration:3e3}),this.contractService.validateContractExcelData(a,i.organizations,i.organizations,i.templates,i.vendors,i.reconciliationPeriodTypes,i.calculationBasisTypes,i.processes))))))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(z.q),e.LFG(O.F0),e.LFG(O.gz),e.LFG(X.F),e.LFG(Z.o),e.LFG(kF))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function YF(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.close.emit())})("formIsReady",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.contract)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let ul=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"contract_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.contract=i.item})):t.formName&&t.formName.currentValue&&"contract_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadContractEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.contract=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(oo),e.Y36(O.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-contract-form"]],inputs:{contract:"contract",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,YF,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[P.O5,te.M,P.Ov],encapsulation:2}),s})(),ml=(()=>{class s{constructor(){this.autoHeight=!1,this.contracts=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[{field:"organization.name",headerName:"Organization",filter:"agTextColumnFilter"},{field:"billingOrganization.name",headerName:"Billing Organization",filter:"agTextColumnFilter"},{field:"template.name",headerName:"Template",filter:"agTextColumnFilter"},{field:"vendor.name",headerName:"Vendor",filter:"agTextColumnFilter"},{field:"reconciliationPeriodType.name",headerName:"Reconciliation Period Type",filter:"agTextColumnFilter"},{field:"calculationBasisType.name",headerName:"Calculation Basis Type",filter:"agTextColumnFilter"},{field:"process.name",headerName:"Process",filter:"agTextColumnFilter"},{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{field:"organizationId",filter:"agTextColumnFilter",hide:!0},{field:"billingOrganizationId",filter:"agTextColumnFilter",hide:!0},{field:"templateId",filter:"agTextColumnFilter",hide:!0},{headerName:"Bill on Behalf",field:"billOnBehalf",filter:"agSetColumnFilter",cellRenderer:"checkboxRenderer"},{field:"billRate",filter:"agTextColumnFilter"},{field:"vendorId",filter:"agTextColumnFilter",hide:!0},{field:"contractDate",filter:"agDateColumnFilter"},{field:"maturityDate",filter:"agDateColumnFilter"},{headerName:"Requires Tpa Medical Necessity",field:"requiresTpaMedicalNecessity",filter:"agSetColumnFilter",cellRenderer:"checkboxRenderer"},{headerName:"Requires Tpa Medicare Allowable",field:"requiresTpaMedicareAllowable",filter:"agSetColumnFilter",cellRenderer:"checkboxRenderer"},{field:"reconciliationPeriodTypeId",filter:"agTextColumnFilter",hide:!0},{field:"calculationBasisTypeId",filter:"agTextColumnFilter",hide:!0},{headerName:"Signed",field:"signed",filter:"agSetColumnFilter",cellRenderer:"checkboxRenderer"},{field:"processId",filter:"agTextColumnFilter",hide:!0}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var a;t.includes(null===(a=i.data)||void 0===a?void 0:a.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-contract-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(f.x,5),2&t){let a;e.iGM(a=e.CRH())&&(i.tableView=a.first)}},inputs:{autoHeight:"autoHeight",contracts:"contracts"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.contracts)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[f.x],encapsulation:2}),s})();function XF(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-contract-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","contract_edit")("formControl",t.formControl)("contract",t.contract)}}const eP=function(){return{}};function tP(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-contract-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","contract_create")("formControl",t.formControl)("contract",e.DdM(3,eP))}}function iP(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-contract-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(d.ref.close())}),e.qZA()}2&s&&e.Q6J("contracts",o.data.items)}let sP=(()=>{class s extends G.fS{constructor(t){super(),this.store=t,this.store.loadContractsEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.contracts$.pipe((0,h.w)(i=>(0,D.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(oo))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","contract","send","close"],[1,"w-full","h-full","bg-white",3,"contracts","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,XF,2,3,"ng-template",null,1,e.W1O),e.YNc(3,tP,1,4,"ng-template",null,2,e.W1O),e.YNc(5,iP,1,1,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",d)("editTemplate",a)("createTemplate",l)("key",i.field.key)}},dependencies:[E.JJ,E.oH,H.$,ul,ml],encapsulation:2}),s})();function oP(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-contract-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","contract_edit")("contract",t.value)}}const aP=function(){return{}};function rP(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-contract-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","contract_create")("contract",e.DdM(2,aP))}function nP(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-contract-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(null==d.ref?null:d.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("contracts",t.items)}}let lP=(()=>{class s extends pe{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","contract","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","contracts","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,oP,1,2,"ng-template",null,1,e.W1O),e.YNc(3,rP,1,3,"ng-template",null,2,e.W1O),e.YNc(5,nP,1,2,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[he,ul,ml],encapsulation:2}),s})(),cP=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[oo],imports:[P.ez,U.F,E.UX,J.o,ae.u,$.P,j.t,me,k.h,se.G,G.X0.forChild({types:[{name:"contract-select",component:sP,wrappers:["form-field"]},{name:"contract-grid",component:lP}]})]}),s})(),dP=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[cP]}),s})();class Ht extends W.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class uP extends Ht{constructor(o,t){super("ValidateContractTermExcelDataAction"),this.valid=!1,this.excelData=o,this.contracts=t}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name),this.validationContext.addRule(new g.mi(`contractName_${i}_is_valid}`,"Contract Is Not Valid","contract.name",t.contract,this.contracts,!0))}),this.validationContext.addRule(new g.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof g.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(a=>a.name),newNames:[i.newName]}):i instanceof g.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,D.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class mP extends g.wS{constructor(o,t,i,a,l){super(o,t,i,a,l,!0)}}class pP extends g.ul{constructor(o,t,i,a=!1){super(o,t,a),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new g.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new mP("name","The contractterm name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class hP extends Ht{constructor(o){super("CreateContractTermAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new pP("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateContractTerm({input:this.input}).pipe((0,h.w)(o=>(0,ue.of)(o.data.created)))}}class fP extends Ht{constructor(o){super("UpdateContractTermsAction"),this.contractTerms=o}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.contractTerms,!0))}performAction(){this.response=this.businessProvider.data.userUpdateContractTerms({input:{contractTerms:this.contractTerms}}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}class _P extends Ht{constructor(o,t){super("UpdateContractTermAction"),this.contractTerm=o,this.contractTermId=t}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.contractTerm,!0)).addRule(new g.xF("Id","Id should be a CUID and not null",this.contractTermId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateContractTerm({contractTermId:this.contractTermId,input:this.contractTerm}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}let pl=(()=>{class s extends W.nH{constructor(t,i,a){super("NotificationService.ContractTermBusinessProviderService",t,a),this.data=i}createContractTerm(t){const i=new hP(t);return i.Do(this),i.response}updateContractTerm(t,i){const a=new _P(t,i);return a.Do(this),a.response}importContractTerms(t){const i=new fP(t);return i.Do(this),i.response}validateContractTermExcelData(t,i){const a=new uP(t,i);return a.Do(this),a.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(K.ed),e.LFG(z.q),e.LFG(W.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),gP=(()=>{class s extends W.nH{constructor(t,i,a){super("ContractTermService",a,t),this.businessProvider=i}createContractTerm(t){const i=Object.fromEntries(Object.entries(t).filter(([a,l])=>null!==l));return this.businessProvider.createContractTerm(i)}updateContractTerm(t,i){return this.businessProvider.updateContractTerm(t,i)}importContractTerms(t){return this.businessProvider.importContractTerms(t)}validateContractTermExcelData(t,i){return this.businessProvider.validateContractTermExcelData(t,i)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(pl,8),e.LFG(pl),e.LFG(K.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),ao=(()=>{class s extends b.m1{constructor(t,i,a,l,d,ee){if(super({loading:!1,contractTerms:[],done:!1,searchQuery:"",formName:void 0,contractTermId:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=a,this.toast=l,this.formService=d,this.contractTermService=ee,this.errors$=this.select(c=>c.errors),this.loading$=this.select(c=>c.loading),this.done$=this.select(c=>c.done),this.item$=this.select(c=>c.item),this.contractTerms$=this.select(c=>c.contractTerms),this.contracts$=this.select(c=>c.contracts||[]),this.contractTermId$=this.select(c=>c.contractTermId),this.paging$=this.select(c=>c.paging),this.searchQuery$=this.select(c=>c.searchQuery),this.formName$=this.select(c=>c.formName),this.actionResult$=this.select(this.item$,this.done$,(c,u)=>({item:c,done:u}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.contractTerms$,this.contracts$,(c,u,n,r,m,p)=>({errors:c,loading:u,item:n,formName:r,contractTerms:m,contracts:p}),{debounce:!0}),this.input$=this.select(this.paging$,this.contractTermId$,this.searchQuery$,(c,u,n)=>({limit:c.limit,skip:c.skip,name:n,contractTermId:u,total:c.total})),this.setFormName=this.updater((c,u)=>Object.assign(Object.assign({},c),{formName:u})),this.setContractTermId=this.updater((c,u)=>Object.assign(Object.assign({},c),{contractTermId:u})),this.filterContracts=c=>this.data.userSelectContracts({input:{name:c}}).pipe((0,b._b)(u=>{let n=u.data.items;return this.patchState({contracts:n}),n},u=>this.patchState({errors:u.graphQLErrors?u.graphQLErrors:u})),(0,fe.U)(u=>u.data.items)),this.addContract=this.updater((c,u)=>Object.assign(Object.assign({},c),{contracts:c.contracts.concat(u)})),this.setItem=this.updater((c,u)=>Object.assign(Object.assign({},c),{item:u})),this.addNewContractTerm=this.updater((c,u)=>Object.assign(Object.assign({},c),{contractTerms:[...c.contractTerms,u]})),this.updateContractTerm=this.updater((c,u)=>Object.assign(Object.assign({},c),{contractTerms:c.contractTerms.map(n=>n.id===u.id?u:n)})),this.addContractTerms=this.updater((c,u)=>Object.assign(Object.assign({},c),{contractTerms:c.contractTerms.concat(u)})),this.updateContractTerms=this.updater((c,u)=>Object.assign(Object.assign({},c),{contractTerms:c.contractTerms.map(n=>u.find(m=>m.id===n.id)||n)})),this.setSearchQuery=this.updater((c,u)=>Object.assign(Object.assign({},c),{searchQuery:u})),this.loadContractTermEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.data.userContractTerm({contractTermId:u}).pipe((0,b._b)(n=>{this.patchState({item:n.data.item,errors:n.errors,loading:!1})},n=>this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})))))),this.loadContractTermsEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.input$),(0,h.w)(([u,n])=>this.data.userContractTerms({input:n}).pipe((0,b._b)(r=>this.patchState({paging:{limit:n.limit,skip:n.skip,total:r.data.count.total},contractTerms:r.data.items,errors:r.errors,loading:!1}),r=>this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})))))),this.createContractTermEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.contractTermService.createContractTerm(Object.assign({},u)).pipe((0,b._b)(n=>{this.addNewContractTerm(n),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:n,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},n=>{n.graphQLErrors?(this.toast.error(n.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})):(this.toast.error(n.Message),this.formService.setErrors(n.Data))}))))),this.updateContractTermEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([u,n])=>this.contractTermService.updateContractTerm(u,u.id).pipe((0,b._b)(r=>{this.updateContractTerm(r),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:r,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},r=>{r.graphQLErrors?(this.toast.error(r.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})):(this.toast.error(r.Message),this.formService.setErrors(r.Data))}))))),this.deleteContractTermEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([u,n])=>this.data.userDeleteContractTerm({contractTermId:n.id}).pipe((0,b._b)(r=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:r.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},r=>{r.graphQLErrors?(this.toast.error(r.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})):(this.toast.error(r.Message),this.formService.setErrors(r.Data))}))))),this.importExcelEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.contractTermService.importContractTerms(u).pipe((0,de.K)(n=>{var r;return this.toast.error(null!==(r=n.Message)&&void 0!==r?r:"Failed to save",{duration:3e3}),q.E}),(0,y.b)(n=>{const r=JSON.parse(n.created),m=JSON.parse(n.updated),p=JSON.parse(n.failed),v=r.length+m.length+p.length;this.addContractTerms(r),this.updateContractTerms(m),this.toast.success(`${r.length} created, ${m.length} updated, ${p.length} failed of total ${v}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("contractTermId")){var V=this.route.snapshot.paramMap.get("contractTermId");this.setFormName("contractTerm_edit")}else this.setFormName("contractTerm_create");this.route.snapshot.paramMap.has("contractTermId")&&(V=this.route.snapshot.paramMap.get("contractTermId"),this.setContractTermId(V))}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.contractTermService.validateContractTermExcelData(t,i.contracts)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(z.q),e.LFG(O.F0),e.LFG(O.gz),e.LFG(X.F),e.LFG(Z.o),e.LFG(gP))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function vP(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.close.emit())})("formIsReady",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.contractTerm)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let hl=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"contractTerm_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.contractTerm=i.item})):t.formName&&t.formName.currentValue&&"contractTerm_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadContractTermEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.contractTerm=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(ao),e.Y36(O.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-contract-term-form"]],inputs:{contractTerm:"contractTerm",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,vP,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[P.O5,te.M,P.Ov],encapsulation:2}),s})(),fl=(()=>{class s{constructor(){this.autoHeight=!1,this.contractTerms=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[{field:"contract.name",headerName:"Contract",filter:"agTextColumnFilter"},{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{headerName:"Max Approved",field:"maxApproved",valueFormatter:t=>{var i;return(0,_.oBD)(null===(i=t.data)||void 0===i?void 0:i.maxApproved,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{headerName:"Number Included",field:"numberIncluded",valueFormatter:t=>{var i;return(0,_.oBD)(null===(i=t.data)||void 0===i?void 0:i.numberIncluded,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{headerName:"Factor",field:"factor",valueFormatter:t=>{var i;return(0,_.oBD)(null===(i=t.data)||void 0===i?void 0:i.factor,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{field:"contractTermId",filter:"agTextColumnFilter",hide:!0}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var a;t.includes(null===(a=i.data)||void 0===a?void 0:a.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-contract-term-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(f.x,5),2&t){let a;e.iGM(a=e.CRH())&&(i.tableView=a.first)}},inputs:{autoHeight:"autoHeight",contractTerms:"contractTerms"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.contractTerms)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[f.x],encapsulation:2}),s})();function CP(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-contract-term-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","contractTerm_edit")("formControl",t.formControl)("contractTerm",t.contractTerm)}}const SP=function(){return{}};function bP(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-contract-term-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","contractTerm_create")("formControl",t.formControl)("contractTerm",e.DdM(3,SP))}}function TP(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-contract-term-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(d.ref.close())}),e.qZA()}2&s&&e.Q6J("contractTerms",o.data.items)}let yP=(()=>{class s extends G.fS{constructor(t){super(),this.store=t,this.store.loadContractTermsEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.contractTerms$.pipe((0,h.w)(i=>(0,D.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(ao))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","contractTerm","send","close"],[1,"w-full","h-full","bg-white",3,"contractTerms","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,CP,2,3,"ng-template",null,1,e.W1O),e.YNc(3,bP,1,4,"ng-template",null,2,e.W1O),e.YNc(5,TP,1,1,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",d)("editTemplate",a)("createTemplate",l)("key",i.field.key)}},dependencies:[E.JJ,E.oH,H.$,hl,fl],encapsulation:2}),s})();function wP(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-contract-term-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","contractTerm_edit")("contractTerm",t.value)}}const xP=function(){return{}};function NP(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-contract-term-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","contractTerm_create")("contractTerm",e.DdM(2,xP))}function AP(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-contract-term-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(null==d.ref?null:d.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("contractTerms",t.items)}}let FP=(()=>{class s extends pe{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","contractTerm","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","contractTerms","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,wP,1,2,"ng-template",null,1,e.W1O),e.YNc(3,NP,1,3,"ng-template",null,2,e.W1O),e.YNc(5,AP,1,2,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[he,hl,fl],encapsulation:2}),s})(),PP=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[ao],imports:[P.ez,U.F,E.UX,J.o,ae.u,$.P,j.t,me,k.h,se.G,G.X0.forChild({types:[{name:"contract-term-select",component:yP,wrappers:["form-field"]},{name:"contract-term-grid",component:FP}]})]}),s})(),IP=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[PP]}),s})();class qt extends W.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class DP extends qt{constructor(o){super("ValidateCostCategoryExcelDataAction"),this.valid=!1,this.excelData=o}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name)}),this.validationContext.addRule(new g.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof g.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(a=>a.name),newNames:[i.newName]}):i instanceof g.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,D.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class MP extends g.wS{constructor(o,t,i,a,l){super(o,t,i,a,l,!0)}}class WP extends g.ul{constructor(o,t,i,a=!1){super(o,t,a),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new g.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new MP("name","The costcategory name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class EP extends qt{constructor(o){super("CreateCostCategoryAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new WP("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateCostCategory({input:this.input}).pipe((0,h.w)(o=>(0,ue.of)(o.data.created)))}}class OP extends qt{constructor(o){super("UpdateCostCategoriesAction"),this.costCategories=o}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.costCategories,!0))}performAction(){this.response=this.businessProvider.data.userUpdateCostCategories({input:{costCategories:this.costCategories}}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}class LP extends qt{constructor(o,t){super("UpdateCostCategoryAction"),this.costCategory=o,this.costCategoryId=t}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.costCategory,!0)).addRule(new g.xF("Id","Id should be a CUID and not null",this.costCategoryId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateCostCategory({costCategoryId:this.costCategoryId,input:this.costCategory}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}let _l=(()=>{class s extends W.nH{constructor(t,i,a){super("NotificationService.CostCategoryBusinessProviderService",t,a),this.data=i}createCostCategory(t){const i=new EP(t);return i.Do(this),i.response}updateCostCategory(t,i){const a=new LP(t,i);return a.Do(this),a.response}importCostCategories(t){const i=new OP(t);return i.Do(this),i.response}validateCostCategoryExcelData(t){const i=new DP(t);return i.Do(this),i.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(K.ed),e.LFG(z.q),e.LFG(W.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),$P=(()=>{class s extends W.nH{constructor(t,i,a){super("CostCategoryService",a,t),this.businessProvider=i}createCostCategory(t){const i=Object.fromEntries(Object.entries(t).filter(([a,l])=>null!==l));return this.businessProvider.createCostCategory(i)}updateCostCategory(t,i){return this.businessProvider.updateCostCategory(t,i)}importCostCategories(t){return this.businessProvider.importCostCategories(t)}validateCostCategoryExcelData(t){return this.businessProvider.validateCostCategoryExcelData(t)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(_l,8),e.LFG(_l),e.LFG(K.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),ro=(()=>{class s extends b.m1{constructor(t,i,a,l,d,ee){super({loading:!1,costCategories:[],done:!1,searchQuery:"",formName:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=a,this.toast=l,this.formService=d,this.costCategoryService=ee,this.errors$=this.select(c=>c.errors),this.loading$=this.select(c=>c.loading),this.done$=this.select(c=>c.done),this.item$=this.select(c=>c.item),this.costCategories$=this.select(c=>c.costCategories),this.paging$=this.select(c=>c.paging),this.searchQuery$=this.select(c=>c.searchQuery),this.formName$=this.select(c=>c.formName),this.actionResult$=this.select(this.item$,this.done$,(c,u)=>({item:c,done:u}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.costCategories$,(c,u,n,r,m)=>({errors:c,loading:u,item:n,formName:r,costCategories:m}),{debounce:!0}),this.input$=this.select(this.paging$,this.searchQuery$,(c,u)=>({limit:c.limit,skip:c.skip,name:u,total:c.total})),this.setFormName=this.updater((c,u)=>Object.assign(Object.assign({},c),{formName:u})),this.setItem=this.updater((c,u)=>Object.assign(Object.assign({},c),{item:u})),this.addNewCostCategory=this.updater((c,u)=>Object.assign(Object.assign({},c),{costCategories:[...c.costCategories,u]})),this.updateCostCategory=this.updater((c,u)=>Object.assign(Object.assign({},c),{costCategories:c.costCategories.map(n=>n.id===u.id?u:n)})),this.addCostCategories=this.updater((c,u)=>Object.assign(Object.assign({},c),{costCategories:c.costCategories.concat(u)})),this.updateCostCategories=this.updater((c,u)=>Object.assign(Object.assign({},c),{costCategories:c.costCategories.map(n=>u.find(m=>m.id===n.id)||n)})),this.setSearchQuery=this.updater((c,u)=>Object.assign(Object.assign({},c),{searchQuery:u})),this.loadCostCategoryEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.data.userCostCategory({costCategoryId:u}).pipe((0,b._b)(n=>{this.patchState({item:n.data.item,errors:n.errors,loading:!1})},n=>this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})))))),this.loadCostCategoriesEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.input$),(0,h.w)(([u,n])=>this.data.userCostCategories({input:n}).pipe((0,b._b)(r=>this.patchState({paging:{limit:n.limit,skip:n.skip,total:r.data.count.total},costCategories:r.data.items,errors:r.errors,loading:!1}),r=>this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})))))),this.createCostCategoryEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.costCategoryService.createCostCategory(Object.assign({},u)).pipe((0,b._b)(n=>{this.addNewCostCategory(n),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:n,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},n=>{n.graphQLErrors?(this.toast.error(n.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})):(this.toast.error(n.Message),this.formService.setErrors(n.Data))}))))),this.updateCostCategoryEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([u,n])=>this.costCategoryService.updateCostCategory(u,u.id).pipe((0,b._b)(r=>{this.updateCostCategory(r),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:r,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},r=>{r.graphQLErrors?(this.toast.error(r.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})):(this.toast.error(r.Message),this.formService.setErrors(r.Data))}))))),this.deleteCostCategoryEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([u,n])=>this.data.userDeleteCostCategory({costCategoryId:n.id}).pipe((0,b._b)(r=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:r.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},r=>{r.graphQLErrors?(this.toast.error(r.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})):(this.toast.error(r.Message),this.formService.setErrors(r.Data))}))))),this.importExcelEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.costCategoryService.importCostCategories(u).pipe((0,de.K)(n=>{var r;return this.toast.error(null!==(r=n.Message)&&void 0!==r?r:"Failed to save",{duration:3e3}),q.E}),(0,y.b)(n=>{const r=JSON.parse(n.created),m=JSON.parse(n.updated),p=JSON.parse(n.failed),v=r.length+m.length+p.length;this.addCostCategories(r),this.updateCostCategories(m),this.toast.success(`${r.length} created, ${m.length} updated, ${p.length} failed of total ${v}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("costCategoryId")?(this.route.snapshot.paramMap.get("costCategoryId"),this.setFormName("costCategory_edit")):this.setFormName("costCategory_create")}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.costCategoryService.validateCostCategoryExcelData(t)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(z.q),e.LFG(O.F0),e.LFG(O.gz),e.LFG(X.F),e.LFG(Z.o),e.LFG($P))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function GP(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.close.emit())})("formIsReady",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.costCategory)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let gl=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"costCategory_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.costCategory=i.item})):t.formName&&t.formName.currentValue&&"costCategory_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadCostCategoryEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.costCategory=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(ro),e.Y36(O.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-cost-category-form"]],inputs:{costCategory:"costCategory",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,GP,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[P.O5,te.M,P.Ov],encapsulation:2}),s})(),vl=(()=>{class s{constructor(){this.autoHeight=!1,this.costCategories=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[,{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var a;t.includes(null===(a=i.data)||void 0===a?void 0:a.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-cost-category-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(f.x,5),2&t){let a;e.iGM(a=e.CRH())&&(i.tableView=a.first)}},inputs:{autoHeight:"autoHeight",costCategories:"costCategories"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.costCategories)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[f.x],encapsulation:2}),s})();function RP(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-cost-category-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","costCategory_edit")("formControl",t.formControl)("costCategory",t.costCategory)}}const QP=function(){return{}};function VP(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-cost-category-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","costCategory_create")("formControl",t.formControl)("costCategory",e.DdM(3,QP))}}function jP(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-cost-category-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(d.ref.close())}),e.qZA()}2&s&&e.Q6J("costCategories",o.data.items)}let UP=(()=>{class s extends G.fS{constructor(t){super(),this.store=t,this.store.loadCostCategoriesEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.costCategories$.pipe((0,h.w)(i=>(0,D.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(ro))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","costCategory","send","close"],[1,"w-full","h-full","bg-white",3,"costCategories","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,RP,2,3,"ng-template",null,1,e.W1O),e.YNc(3,VP,1,4,"ng-template",null,2,e.W1O),e.YNc(5,jP,1,1,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",d)("editTemplate",a)("createTemplate",l)("key",i.field.key)}},dependencies:[E.JJ,E.oH,H.$,gl,vl],encapsulation:2}),s})();function JP(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-cost-category-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","costCategory_edit")("costCategory",t.value)}}const zP=function(){return{}};function HP(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-cost-category-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","costCategory_create")("costCategory",e.DdM(2,zP))}function qP(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-cost-category-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(null==d.ref?null:d.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("costCategories",t.items)}}let KP=(()=>{class s extends pe{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","costCategory","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","costCategories","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,JP,1,2,"ng-template",null,1,e.W1O),e.YNc(3,HP,1,3,"ng-template",null,2,e.W1O),e.YNc(5,qP,1,2,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[he,gl,vl],encapsulation:2}),s})(),ZP=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[ro],imports:[P.ez,U.F,E.UX,J.o,ae.u,$.P,j.t,me,k.h,se.G,G.X0.forChild({types:[{name:"cost-category-select",component:UP,wrappers:["form-field"]},{name:"cost-category-grid",component:KP}]})]}),s})(),BP=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[ZP]}),s})();var Kt=M(59443);function kP(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.close.emit())})("formIsReady",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.diagnosisCode)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let Cl=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"diagnosisCode_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({id:null,name:""}),this.store.vm$.subscribe(i=>{this.diagnosisCode=i.item})):t.formName&&t.formName.currentValue&&"diagnosisCode_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadDiagnosisCodeEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.diagnosisCode=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Kt.r),e.Y36(O.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-diagnosis-code-form"]],inputs:{diagnosisCode:"diagnosisCode",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,kP,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[P.O5,te.M,P.Ov],encapsulation:2}),s})(),Sl=(()=>{class s{constructor(){this.autoHeight=!1,this.diagnosisCodes=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[,{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var a;t.includes(null===(a=i.data)||void 0===a?void 0:a.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-diagnosis-code-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(f.x,5),2&t){let a;e.iGM(a=e.CRH())&&(i.tableView=a.first)}},inputs:{autoHeight:"autoHeight",diagnosisCodes:"diagnosisCodes"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:6,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.diagnosisCodes)("showSidebar",!1)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[f.x],encapsulation:2}),s})();function YP(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-diagnosis-code-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","diagnosisCode_edit")("formControl",t.formControl)("diagnosisCode",t.diagnosisCode)}}const XP=function(){return{}};function eI(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-diagnosis-code-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","diagnosisCode_create")("formControl",t.formControl)("diagnosisCode",e.DdM(3,XP))}}function tI(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-diagnosis-code-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(d.ref.close())}),e.qZA()}2&s&&e.Q6J("diagnosisCodes",o.data.items)}let iI=(()=>{class s extends G.fS{constructor(t){super(),this.store=t,this.store.loadDiagnosisCodesEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.diagnosisCodes$.pipe((0,h.w)(i=>(0,D.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Kt.r))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e._Bn([Kt.r]),e.qOj],decls:7,vars:5,consts:[[3,"to","control","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","diagnosisCode","send","close"],[1,"w-full","h-full","bg-white",3,"diagnosisCodes","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"ui-select-form",0),e.YNc(1,YP,2,3,"ng-template",null,1,e.W1O),e.YNc(3,eI,1,4,"ng-template",null,2,e.W1O),e.YNc(5,tI,1,1,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[E.JJ,E.oH,H.$,Cl,Sl],encapsulation:2}),s})();function sI(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-diagnosis-code-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","diagnosisCode_edit")("diagnosisCode",t.value)}}const oI=function(){return{}};function aI(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-diagnosis-code-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","diagnosisCode_create")("diagnosisCode",e.DdM(2,oI))}function rI(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-diagnosis-code-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(null==d.ref?null:d.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("diagnosisCodes",t.items)}}let nI=(()=>{class s extends pe{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:6,consts:[[3,"data","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","diagnosisCode","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","diagnosisCodes","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,sI,1,2,"ng-template",null,1,e.W1O),e.YNc(3,aI,1,3,"ng-template",null,2,e.W1O),e.YNc(5,rI,1,2,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("data",i.data)("title",i.to.title)("onSave",i.onSave)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[he,Cl,Sl],encapsulation:2}),s})(),lI=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[Kt.r],imports:[P.ez,U.F,E.UX,J.o,ae.u,$.P,j.t,me,k.h,se.G,G.X0.forChild({types:[{name:"diagnosis-code-select",component:iI,wrappers:["form-field"]},{name:"diagnosis-code-grid",component:nI}]})]}),s})(),cI=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[lI]}),s})(),bl=(()=>{class s extends b.m1{constructor(t){super({loading:!1,documents:[]}),this.data=t,this.errors$=this.select(i=>i.errors),this.loading$=this.select(i=>i.loading),this.documents$=this.select(i=>i.documents),this.vm$=this.select(this.errors$,this.loading$,this.documents$,(i,a,l)=>({errors:i,loading:a,documents:l}),{debounce:!0}),this.addNewDocument=this.updater((i,a)=>({documents:[...i.documents,a]})),this.updateDocument=this.updater((i,a)=>Object.assign(Object.assign({},i),{documents:i.documents.map(l=>l.id===a.id?a:l)})),this.createDocumentEffect=this.effect(i=>i.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(a=>this.data.userCreateDocument({input:a.input}).pipe((0,b._b)(l=>{this.addNewDocument(l.data.created),this.patchState({errors:l.errors,loading:!1}),a.resultEmitter.emit(l.data.created)},l=>this.patchState({loading:!1,errors:l.graphQLErrors?l.graphQLErrors:l})))))),this.updateDocumentEffect=this.effect(i=>i.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(a=>this.data.userUpdateDocument({documentId:a.input.id,input:a.input}).pipe((0,b._b)(l=>{this.updateDocument(l.data.updated),this.patchState({errors:l.errors,loading:!1}),a.resultEmitter.emit(l.data.updated)},l=>this.patchState({loading:!1,errors:l.graphQLErrors?l.graphQLErrors:l})))))),this.loadDocumentsEffect=this.effect(i=>i.pipe((0,y.b)(()=>{this.patchState({loading:!0})}),(0,h.w)(()=>this.data.userDocuments({input:{}}).pipe((0,b._b)(a=>{this.patchState({loading:!1,documents:a.data.items})},a=>{this.patchState({loading:!1})})))))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(z.q))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();var Tl=M(56794);function dI(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.close.emit())})("formIsReady",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.document)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let yl=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"document_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.document=i.item})):t.formName&&t.formName.currentValue&&"document_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadDocumentEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.document=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Tl.F),e.Y36(O.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-document-form"]],inputs:{document:"document",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,dI,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[P.O5,te.M,P.Ov],encapsulation:2}),s})();const uI=function(){return{}};function mI(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-document-form",3),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("document",o.data.value||e.DdM(1,uI))}function pI(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-document-table-view",4),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(d.ref.close())}),e.qZA()}2&s&&e.Q6J("documents",o.data.items)}let hI=(()=>{class s extends G.fS{constructor(t){super(),this.store=t,this.store.loadDocumentsEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.documents$.pipe((0,h.w)(i=>(0,D.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(bl))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:5,vars:4,consts:[[3,"to","control","listTemplate","editTemplate"],["editTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"document","send","close"],[1,"w-full","h-full","bg-white",3,"documents","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"ui-select-form",0),e.YNc(1,mI,1,2,"ng-template",null,1,e.W1O),e.YNc(3,pI,1,1,"ng-template",null,2,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4);e.Q6J("to",i.to)("control",i.formControl)("listTemplate",l)("editTemplate",a)}},dependencies:[H.$,yl],encapsulation:2}),s})(),fI=(()=>{class s{constructor(){this.documents=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.autoHeight=!1,this.columnDefs=[{field:"contract.name",headerName:"Contract",filter:"agTextColumnFilter"},{field:"patient.name",headerName:"Patient",filter:"agTextColumnFilter"},{field:"prescription.name",headerName:"Prescription",filter:"agTextColumnFilter"},{field:"provider.name",headerName:"Provider",filter:"agTextColumnFilter"},{field:"patientStudies.name",headerName:"Patient Studies",filter:"agTextColumnFilter"},{field:"procedureVendor.name",headerName:"Procedure Vendor",filter:"agTextColumnFilter"},{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{field:"attachment",filter:"agTextColumnFilter"},{field:"encoding",filter:"agTextColumnFilter"},{field:"extension",filter:"agTextColumnFilter"},{field:"contractId",filter:"agTextColumnFilter",hide:!0},{field:"patientId",filter:"agTextColumnFilter",hide:!0},{field:"prescriptionId",filter:"agTextColumnFilter",hide:!0},{field:"providerId",filter:"agTextColumnFilter",hide:!0},{field:"patientStudyId",filter:"agTextColumnFilter",hide:!0},{field:"procedureVendorId",filter:"agTextColumnFilter",hide:!0}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var a;t.includes(null===(a=i.data)||void 0===a?void 0:a.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-document-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(f.x,5),2&t){let a;e.iGM(a=e.CRH())&&(i.tableView=a.first)}},inputs:{documents:"documents",autoHeight:"autoHeight"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:4,consts:[[1,"w-full","h-full",3,"autoHeight","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("data",i.documents)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[f.x],encapsulation:2}),s})();function _I(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-document-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","document_edit")("document",t.value)}}const gI=function(){return{}};function vI(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-document-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","document_create")("document",e.DdM(2,gI))}function CI(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-document-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(null==d.ref?null:d.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("documents",t.items)}}let SI=(()=>{class s extends pe{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","document","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","documents","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,_I,1,2,"ng-template",null,1,e.W1O),e.YNc(3,vI,1,3,"ng-template",null,2,e.W1O),e.YNc(5,CI,1,2,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[he,yl,fI],encapsulation:2}),s})(),bI=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[bl,Tl.F],imports:[P.ez,U.F,E.UX,J.o,ae.u,$.P,j.t,k.h,se.G,me,G.X0.forChild({types:[{name:"document-select",component:hI,wrappers:["form-field"]},{name:"document-grid",component:SI,wrappers:["form-field"]}]})]}),s})(),TI=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[bI]}),s})();class Zt extends W.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class yI extends Zt{constructor(o){super("ValidateDocumentTypeExcelDataAction"),this.valid=!1,this.excelData=o}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name)}),this.validationContext.addRule(new g.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof g.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(a=>a.name),newNames:[i.newName]}):i instanceof g.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,D.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class wI extends g.wS{constructor(o,t,i,a,l){super(o,t,i,a,l,!0)}}class xI extends g.ul{constructor(o,t,i,a=!1){super(o,t,a),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new g.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new wI("name","The documenttype name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class NI extends Zt{constructor(o){super("CreateDocumentTypeAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new xI("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateDocumentType({input:this.input}).pipe((0,h.w)(o=>(0,ue.of)(o.data.created)))}}class AI extends Zt{constructor(o){super("UpdateDocumentTypesAction"),this.documentTypes=o}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.documentTypes,!0))}performAction(){this.response=this.businessProvider.data.userUpdateDocumentTypes({input:{documentTypes:this.documentTypes}}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}class FI extends Zt{constructor(o,t){super("UpdateDocumentTypeAction"),this.documentType=o,this.documentTypeId=t}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.documentType,!0)).addRule(new g.xF("Id","Id should be a CUID and not null",this.documentTypeId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateDocumentType({documentTypeId:this.documentTypeId,input:this.documentType}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}let wl=(()=>{class s extends W.nH{constructor(t,i,a){super("NotificationService.DocumentTypeBusinessProviderService",t,a),this.data=i}createDocumentType(t){const i=new NI(t);return i.Do(this),i.response}updateDocumentType(t,i){const a=new FI(t,i);return a.Do(this),a.response}importDocumentTypes(t){const i=new AI(t);return i.Do(this),i.response}validateDocumentTypeExcelData(t){const i=new yI(t);return i.Do(this),i.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(K.ed),e.LFG(z.q),e.LFG(W.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),PI=(()=>{class s extends W.nH{constructor(t,i,a){super("DocumentTypeService",a,t),this.businessProvider=i}createDocumentType(t){const i=Object.fromEntries(Object.entries(t).filter(([a,l])=>null!==l));return this.businessProvider.createDocumentType(i)}updateDocumentType(t,i){return this.businessProvider.updateDocumentType(t,i)}importDocumentTypes(t){return this.businessProvider.importDocumentTypes(t)}validateDocumentTypeExcelData(t){return this.businessProvider.validateDocumentTypeExcelData(t)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(wl,8),e.LFG(wl),e.LFG(K.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),no=(()=>{class s extends b.m1{constructor(t,i,a,l,d,ee){super({loading:!1,documentTypes:[],done:!1,searchQuery:"",formName:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=a,this.toast=l,this.formService=d,this.documentTypeService=ee,this.errors$=this.select(c=>c.errors),this.loading$=this.select(c=>c.loading),this.done$=this.select(c=>c.done),this.item$=this.select(c=>c.item),this.documentTypes$=this.select(c=>c.documentTypes),this.paging$=this.select(c=>c.paging),this.searchQuery$=this.select(c=>c.searchQuery),this.formName$=this.select(c=>c.formName),this.actionResult$=this.select(this.item$,this.done$,(c,u)=>({item:c,done:u}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.documentTypes$,(c,u,n,r,m)=>({errors:c,loading:u,item:n,formName:r,documentTypes:m}),{debounce:!0}),this.input$=this.select(this.paging$,this.searchQuery$,(c,u)=>({limit:c.limit,skip:c.skip,name:u,total:c.total})),this.setFormName=this.updater((c,u)=>Object.assign(Object.assign({},c),{formName:u})),this.setItem=this.updater((c,u)=>Object.assign(Object.assign({},c),{item:u})),this.addNewDocumentType=this.updater((c,u)=>Object.assign(Object.assign({},c),{documentTypes:[...c.documentTypes,u]})),this.updateDocumentType=this.updater((c,u)=>Object.assign(Object.assign({},c),{documentTypes:c.documentTypes.map(n=>n.id===u.id?u:n)})),this.addDocumentTypes=this.updater((c,u)=>Object.assign(Object.assign({},c),{documentTypes:c.documentTypes.concat(u)})),this.updateDocumentTypes=this.updater((c,u)=>Object.assign(Object.assign({},c),{documentTypes:c.documentTypes.map(n=>u.find(m=>m.id===n.id)||n)})),this.setSearchQuery=this.updater((c,u)=>Object.assign(Object.assign({},c),{searchQuery:u})),this.loadDocumentTypeEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.data.userDocumentType({documentTypeId:u}).pipe((0,b._b)(n=>{this.patchState({item:n.data.item,errors:n.errors,loading:!1})},n=>this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})))))),this.loadDocumentTypesEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.input$),(0,h.w)(([u,n])=>this.data.userDocumentTypes({input:n}).pipe((0,b._b)(r=>this.patchState({paging:{limit:n.limit,skip:n.skip,total:r.data.count.total},documentTypes:r.data.items,errors:r.errors,loading:!1}),r=>this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})))))),this.createDocumentTypeEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.documentTypeService.createDocumentType(Object.assign({},u)).pipe((0,b._b)(n=>{this.addNewDocumentType(n),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:n,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},n=>{n.graphQLErrors?(this.toast.error(n.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})):(this.toast.error(n.Message),this.formService.setErrors(n.Data))}))))),this.updateDocumentTypeEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([u,n])=>this.documentTypeService.updateDocumentType(u,u.id).pipe((0,b._b)(r=>{this.updateDocumentType(r),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:r,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},r=>{r.graphQLErrors?(this.toast.error(r.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})):(this.toast.error(r.Message),this.formService.setErrors(r.Data))}))))),this.deleteDocumentTypeEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([u,n])=>this.data.userDeleteDocumentType({documentTypeId:n.id}).pipe((0,b._b)(r=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:r.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},r=>{r.graphQLErrors?(this.toast.error(r.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})):(this.toast.error(r.Message),this.formService.setErrors(r.Data))}))))),this.importExcelEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.documentTypeService.importDocumentTypes(u).pipe((0,de.K)(n=>{var r;return this.toast.error(null!==(r=n.Message)&&void 0!==r?r:"Failed to save",{duration:3e3}),q.E}),(0,y.b)(n=>{const r=JSON.parse(n.created),m=JSON.parse(n.updated),p=JSON.parse(n.failed),v=r.length+m.length+p.length;this.addDocumentTypes(r),this.updateDocumentTypes(m),this.toast.success(`${r.length} created, ${m.length} updated, ${p.length} failed of total ${v}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("documentTypeId")?(this.route.snapshot.paramMap.get("documentTypeId"),this.setFormName("documentType_edit")):this.setFormName("documentType_create")}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.documentTypeService.validateDocumentTypeExcelData(t)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(z.q),e.LFG(O.F0),e.LFG(O.gz),e.LFG(X.F),e.LFG(Z.o),e.LFG(PI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function II(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.close.emit())})("formIsReady",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.documentType)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let xl=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"documentType_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.documentType=i.item})):t.formName&&t.formName.currentValue&&"documentType_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadDocumentTypeEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.documentType=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(no),e.Y36(O.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-document-type-form"]],inputs:{documentType:"documentType",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,II,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[P.O5,te.M,P.Ov],encapsulation:2}),s})(),Nl=(()=>{class s{constructor(){this.autoHeight=!1,this.documentTypes=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var a;t.includes(null===(a=i.data)||void 0===a?void 0:a.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-document-type-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(f.x,5),2&t){let a;e.iGM(a=e.CRH())&&(i.tableView=a.first)}},inputs:{autoHeight:"autoHeight",documentTypes:"documentTypes"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.documentTypes)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[f.x],encapsulation:2}),s})();function DI(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-document-type-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","documentType_edit")("formControl",t.formControl)("documentType",t.documentType)}}const MI=function(){return{}};function WI(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-document-type-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","documentType_create")("formControl",t.formControl)("documentType",e.DdM(3,MI))}}function EI(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-document-type-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(d.ref.close())}),e.qZA()}2&s&&e.Q6J("documentTypes",o.data.items)}let OI=(()=>{class s extends G.fS{constructor(t){super(),this.store=t,this.store.loadDocumentTypesEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.documentTypes$.pipe((0,h.w)(i=>(0,D.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(no))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","documentType","send","close"],[1,"w-full","h-full","bg-white",3,"documentTypes","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,DI,2,3,"ng-template",null,1,e.W1O),e.YNc(3,WI,1,4,"ng-template",null,2,e.W1O),e.YNc(5,EI,1,1,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",d)("editTemplate",a)("createTemplate",l)("key",i.field.key)}},dependencies:[E.JJ,E.oH,H.$,xl,Nl],encapsulation:2}),s})();function LI(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-document-type-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","documentType_edit")("documentType",t.value)}}const $I=function(){return{}};function GI(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-document-type-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","documentType_create")("documentType",e.DdM(2,$I))}function RI(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-document-type-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(null==d.ref?null:d.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("documentTypes",t.items)}}let QI=(()=>{class s extends pe{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","documentType","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","documentTypes","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,LI,1,2,"ng-template",null,1,e.W1O),e.YNc(3,GI,1,3,"ng-template",null,2,e.W1O),e.YNc(5,RI,1,2,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[he,xl,Nl],encapsulation:2}),s})(),VI=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[no],imports:[P.ez,U.F,E.UX,J.o,ae.u,$.P,j.t,me,k.h,se.G,G.X0.forChild({types:[{name:"document-type-select",component:OI,wrappers:["form-field"]},{name:"document-type-grid",component:QI}]})]}),s})(),jI=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[VI]}),s})();class Bt extends W.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class UI extends Bt{constructor(o,t){super("ValidateDurableMedicalEquipmentExcelDataAction"),this.valid=!1,this.excelData=o,this.vendors=t}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name),this.validationContext.addRule(new g.mi(`vendorName_${i}_is_valid}`,"Vendor Is Not Valid","vendor.name",t.vendor,this.vendors,!0))}),this.validationContext.addRule(new g.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof g.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(a=>a.name),newNames:[i.newName]}):i instanceof g.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,D.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class JI extends g.wS{constructor(o,t,i,a,l){super(o,t,i,a,l,!0)}}class zI extends g.ul{constructor(o,t,i,a=!1){super(o,t,a),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new g.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new JI("name","The durablemedicalequipment name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class HI extends Bt{constructor(o){super("CreateDurableMedicalEquipmentAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new zI("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateDurableMedicalEquipment({input:this.input}).pipe((0,h.w)(o=>(0,ue.of)(o.data.created)))}}class qI extends Bt{constructor(o){super("UpdateDurableMedicalEquipmentsAction"),this.durableMedicalEquipments=o}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.durableMedicalEquipments,!0))}performAction(){this.response=this.businessProvider.data.userUpdateDurableMedicalEquipments({input:{durableMedicalEquipments:this.durableMedicalEquipments}}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}class KI extends Bt{constructor(o,t){super("UpdateDurableMedicalEquipmentAction"),this.durableMedicalEquipment=o,this.durableMedicalEquipmentId=t}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.durableMedicalEquipment,!0)).addRule(new g.xF("Id","Id should be a CUID and not null",this.durableMedicalEquipmentId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateDurableMedicalEquipment({durableMedicalEquipmentId:this.durableMedicalEquipmentId,input:this.durableMedicalEquipment}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}let Al=(()=>{class s extends W.nH{constructor(t,i,a){super("NotificationService.DurableMedicalEquipmentBusinessProviderService",t,a),this.data=i}createDurableMedicalEquipment(t){const i=new HI(t);return i.Do(this),i.response}updateDurableMedicalEquipment(t,i){const a=new KI(t,i);return a.Do(this),a.response}importDurableMedicalEquipments(t){const i=new qI(t);return i.Do(this),i.response}validateDurableMedicalEquipmentExcelData(t,i){const a=new UI(t,i);return a.Do(this),a.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(K.ed),e.LFG(z.q),e.LFG(W.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),ZI=(()=>{class s extends W.nH{constructor(t,i,a){super("DurableMedicalEquipmentService",a,t),this.businessProvider=i}createDurableMedicalEquipment(t){const i=Object.fromEntries(Object.entries(t).filter(([a,l])=>null!==l));return this.businessProvider.createDurableMedicalEquipment(i)}updateDurableMedicalEquipment(t,i){return this.businessProvider.updateDurableMedicalEquipment(t,i)}importDurableMedicalEquipments(t){return this.businessProvider.importDurableMedicalEquipments(t)}validateDurableMedicalEquipmentExcelData(t,i){return this.businessProvider.validateDurableMedicalEquipmentExcelData(t,i)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(Al,8),e.LFG(Al),e.LFG(K.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),lo=(()=>{class s extends b.m1{constructor(t,i,a,l,d,ee){if(super({loading:!1,durableMedicalEquipments:[],done:!1,searchQuery:"",formName:void 0,vendorId:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=a,this.toast=l,this.formService=d,this.durableMedicalEquipmentService=ee,this.errors$=this.select(u=>u.errors),this.loading$=this.select(u=>u.loading),this.done$=this.select(u=>u.done),this.item$=this.select(u=>u.item),this.durableMedicalEquipments$=this.select(u=>u.durableMedicalEquipments),this.vendors$=this.select(u=>u.vendors||[]),this.vendorId$=this.select(u=>u.vendorId),this.paging$=this.select(u=>u.paging),this.searchQuery$=this.select(u=>u.searchQuery),this.formName$=this.select(u=>u.formName),this.actionResult$=this.select(this.item$,this.done$,(u,n)=>({item:u,done:n}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.durableMedicalEquipments$,this.vendors$,(u,n,r,m,p,v)=>({errors:u,loading:n,item:r,formName:m,durableMedicalEquipments:p,vendors:v}),{debounce:!0}),this.input$=this.select(this.paging$,this.vendorId$,this.searchQuery$,(u,n,r)=>({limit:u.limit,skip:u.skip,name:r,vendorId:n,total:u.total})),this.setFormName=this.updater((u,n)=>Object.assign(Object.assign({},u),{formName:n})),this.setVendorId=this.updater((u,n)=>Object.assign(Object.assign({},u),{vendorId:n})),this.filterVendors=u=>this.data.userSelectVendors({input:{name:u}}).pipe((0,b._b)(n=>{let r=n.data.items;return this.patchState({vendors:r}),r},n=>this.patchState({errors:n.graphQLErrors?n.graphQLErrors:n})),(0,fe.U)(n=>n.data.items)),this.addVendor=this.updater((u,n)=>Object.assign(Object.assign({},u),{vendors:u.vendors.concat(n)})),this.setItem=this.updater((u,n)=>Object.assign(Object.assign({},u),{item:n})),this.addNewDurableMedicalEquipment=this.updater((u,n)=>Object.assign(Object.assign({},u),{durableMedicalEquipments:[...u.durableMedicalEquipments,n]})),this.updateDurableMedicalEquipment=this.updater((u,n)=>Object.assign(Object.assign({},u),{durableMedicalEquipments:u.durableMedicalEquipments.map(r=>r.id===n.id?n:r)})),this.addDurableMedicalEquipments=this.updater((u,n)=>Object.assign(Object.assign({},u),{durableMedicalEquipments:u.durableMedicalEquipments.concat(n)})),this.updateDurableMedicalEquipments=this.updater((u,n)=>Object.assign(Object.assign({},u),{durableMedicalEquipments:u.durableMedicalEquipments.map(r=>n.find(p=>p.id===r.id)||r)})),this.setSearchQuery=this.updater((u,n)=>Object.assign(Object.assign({},u),{searchQuery:n})),this.loadDurableMedicalEquipmentEffect=this.effect(u=>u.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(n=>this.data.userDurableMedicalEquipment({durableMedicalEquipmentId:n}).pipe((0,b._b)(r=>{this.patchState({item:r.data.item,errors:r.errors,loading:!1})},r=>this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})))))),this.loadDurableMedicalEquipmentsEffect=this.effect(u=>u.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.input$),(0,h.w)(([n,r])=>this.data.userDurableMedicalEquipments({input:r}).pipe((0,b._b)(m=>this.patchState({paging:{limit:r.limit,skip:r.skip,total:m.data.count.total},durableMedicalEquipments:m.data.items,errors:m.errors,loading:!1}),m=>this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})))))),this.createDurableMedicalEquipmentEffect=this.effect(u=>u.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(n=>this.durableMedicalEquipmentService.createDurableMedicalEquipment(Object.assign({},n)).pipe((0,b._b)(r=>{this.addNewDurableMedicalEquipment(r),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:r,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},r=>{r.graphQLErrors?(this.toast.error(r.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})):(this.toast.error(r.Message),this.formService.setErrors(r.Data))}))))),this.updateDurableMedicalEquipmentEffect=this.effect(u=>u.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([n,r])=>this.durableMedicalEquipmentService.updateDurableMedicalEquipment(n,n.id).pipe((0,b._b)(m=>{this.updateDurableMedicalEquipment(m),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:m,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},m=>{m.graphQLErrors?(this.toast.error(m.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})):(this.toast.error(m.Message),this.formService.setErrors(m.Data))}))))),this.deleteDurableMedicalEquipmentEffect=this.effect(u=>u.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([n,r])=>this.data.userDeleteDurableMedicalEquipment({durableMedicalEquipmentId:r.id}).pipe((0,b._b)(m=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:m.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},m=>{m.graphQLErrors?(this.toast.error(m.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})):(this.toast.error(m.Message),this.formService.setErrors(m.Data))}))))),this.importExcelEffect=this.effect(u=>u.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(n=>this.durableMedicalEquipmentService.importDurableMedicalEquipments(n).pipe((0,de.K)(r=>{var m;return this.toast.error(null!==(m=r.Message)&&void 0!==m?m:"Failed to save",{duration:3e3}),q.E}),(0,y.b)(r=>{const m=JSON.parse(r.created),p=JSON.parse(r.updated),v=JSON.parse(r.failed),I=m.length+p.length+v.length;this.addDurableMedicalEquipments(m),this.updateDurableMedicalEquipments(p),this.toast.success(`${m.length} created, ${p.length} updated, ${v.length} failed of total ${I}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("durableMedicalEquipmentId")?(this.route.snapshot.paramMap.get("durableMedicalEquipmentId"),this.setFormName("durableMedicalEquipment_edit")):this.setFormName("durableMedicalEquipment_create"),this.route.snapshot.paramMap.has("vendorId")){var c=this.route.snapshot.paramMap.get("vendorId");this.setVendorId(c)}}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.durableMedicalEquipmentService.validateDurableMedicalEquipmentExcelData(t,i.vendors)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(z.q),e.LFG(O.F0),e.LFG(O.gz),e.LFG(X.F),e.LFG(Z.o),e.LFG(ZI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function BI(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.close.emit())})("formIsReady",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.durableMedicalEquipment)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let Fl=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"durableMedicalEquipment_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.durableMedicalEquipment=i.item})):t.formName&&t.formName.currentValue&&"durableMedicalEquipment_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadDurableMedicalEquipmentEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.durableMedicalEquipment=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(lo),e.Y36(O.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-durable-medical-equipment-form"]],inputs:{durableMedicalEquipment:"durableMedicalEquipment",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,BI,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[P.O5,te.M,P.Ov],encapsulation:2}),s})(),Pl=(()=>{class s{constructor(){this.autoHeight=!1,this.durableMedicalEquipments=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[{field:"vendor.name",headerName:"Vendor",filter:"agTextColumnFilter"},{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{field:"itemCode",filter:"agTextColumnFilter"},{field:"vendorId",filter:"agTextColumnFilter",hide:!0},{field:"size",filter:"agTextColumnFilter"},{field:"brand",filter:"agTextColumnFilter"},{field:"itemURL",filter:"agTextColumnFilter"},{field:"estimatedCost",filter:"agTextColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var a;t.includes(null===(a=i.data)||void 0===a?void 0:a.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-durable-medical-equipment-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(f.x,5),2&t){let a;e.iGM(a=e.CRH())&&(i.tableView=a.first)}},inputs:{autoHeight:"autoHeight",durableMedicalEquipments:"durableMedicalEquipments"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.durableMedicalEquipments)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[f.x],encapsulation:2}),s})();function kI(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-durable-medical-equipment-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","durableMedicalEquipment_edit")("formControl",t.formControl)("durableMedicalEquipment",t.durableMedicalEquipment)}}const YI=function(){return{}};function XI(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-durable-medical-equipment-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","durableMedicalEquipment_create")("formControl",t.formControl)("durableMedicalEquipment",e.DdM(3,YI))}}function eD(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-durable-medical-equipment-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(d.ref.close())}),e.qZA()}2&s&&e.Q6J("durableMedicalEquipments",o.data.items)}let tD=(()=>{class s extends G.fS{constructor(t){super(),this.store=t,this.store.loadDurableMedicalEquipmentsEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.durableMedicalEquipments$.pipe((0,h.w)(i=>(0,D.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(lo))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","durableMedicalEquipment","send","close"],[1,"w-full","h-full","bg-white",3,"durableMedicalEquipments","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,kI,2,3,"ng-template",null,1,e.W1O),e.YNc(3,XI,1,4,"ng-template",null,2,e.W1O),e.YNc(5,eD,1,1,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",d)("editTemplate",a)("createTemplate",l)("key",i.field.key)}},dependencies:[E.JJ,E.oH,H.$,Fl,Pl],encapsulation:2}),s})();function iD(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-durable-medical-equipment-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","durableMedicalEquipment_edit")("durableMedicalEquipment",t.value)}}const sD=function(){return{}};function oD(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-durable-medical-equipment-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","durableMedicalEquipment_create")("durableMedicalEquipment",e.DdM(2,sD))}function aD(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-durable-medical-equipment-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(null==d.ref?null:d.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("durableMedicalEquipments",t.items)}}let rD=(()=>{class s extends pe{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","durableMedicalEquipment","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","durableMedicalEquipments","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,iD,1,2,"ng-template",null,1,e.W1O),e.YNc(3,oD,1,3,"ng-template",null,2,e.W1O),e.YNc(5,aD,1,2,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[he,Fl,Pl],encapsulation:2}),s})(),nD=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[lo],imports:[P.ez,U.F,E.UX,J.o,ae.u,$.P,j.t,me,k.h,se.G,G.X0.forChild({types:[{name:"durable-medical-equipment-select",component:tD,wrappers:["form-field"]},{name:"durable-medical-equipment-grid",component:rD}]})]}),s})(),lD=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[nD]}),s})();class kt extends W.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class cD extends kt{constructor(o){super("ValidateEquipmentExcelDataAction"),this.valid=!1,this.excelData=o}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name)}),this.validationContext.addRule(new g.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof g.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(a=>a.name),newNames:[i.newName]}):i instanceof g.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,D.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class dD extends g.wS{constructor(o,t,i,a,l){super(o,t,i,a,l,!0)}}class uD extends g.ul{constructor(o,t,i,a=!1){super(o,t,a),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new g.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new dD("name","The equipment name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class mD extends kt{constructor(o){super("CreateEquipmentAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new uD("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateEquipment({input:this.input}).pipe((0,h.w)(o=>(0,ue.of)(o.data.created)))}}class pD extends kt{constructor(o){super("UpdateEquipmentsAction"),this.equipments=o}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.equipments,!0))}performAction(){this.response=this.businessProvider.data.userUpdateEquipments({input:{equipments:this.equipments}}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}class hD extends kt{constructor(o,t){super("UpdateEquipmentAction"),this.equipment=o,this.equipmentId=t}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.equipment,!0)).addRule(new g.xF("Id","Id should be a CUID and not null",this.equipmentId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateEquipment({equipmentId:this.equipmentId,input:this.equipment}).pipe((0,h.w)(()=>(0,D.of)(!0)))}}let Il=(()=>{class s extends W.nH{constructor(t,i,a){super("NotificationService.EquipmentBusinessProviderService",t,a),this.data=i}createEquipment(t){const i=new mD(t);return i.Do(this),i.response}updateEquipment(t,i){const a=new hD(t,i);return a.Do(this),a.response}importEquipments(t){const i=new pD(t);return i.Do(this),i.response}validateEquipmentExcelData(t){const i=new cD(t);return i.Do(this),i.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(K.ed),e.LFG(z.q),e.LFG(W.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),fD=(()=>{class s extends W.nH{constructor(t,i,a){super("EquipmentService",a,t),this.businessProvider=i}createEquipment(t){const i=Object.fromEntries(Object.entries(t).filter(([a,l])=>null!==l));return this.businessProvider.createEquipment(i)}updateEquipment(t,i){return this.businessProvider.updateEquipment(t,i)}importEquipments(t){return this.businessProvider.importEquipments(t)}validateEquipmentExcelData(t){return this.businessProvider.validateEquipmentExcelData(t)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(Il,8),e.LFG(Il),e.LFG(K.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),co=(()=>{class s extends b.m1{constructor(t,i,a,l,d,ee){super({loading:!1,equipments:[],done:!1,searchQuery:"",formName:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=a,this.toast=l,this.formService=d,this.equipmentService=ee,this.errors$=this.select(c=>c.errors),this.loading$=this.select(c=>c.loading),this.done$=this.select(c=>c.done),this.item$=this.select(c=>c.item),this.equipments$=this.select(c=>c.equipments),this.paging$=this.select(c=>c.paging),this.searchQuery$=this.select(c=>c.searchQuery),this.formName$=this.select(c=>c.formName),this.actionResult$=this.select(this.item$,this.done$,(c,u)=>({item:c,done:u}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.equipments$,(c,u,n,r,m)=>({errors:c,loading:u,item:n,formName:r,equipments:m}),{debounce:!0}),this.input$=this.select(this.paging$,this.searchQuery$,(c,u)=>({limit:c.limit,skip:c.skip,name:u,total:c.total})),this.setFormName=this.updater((c,u)=>Object.assign(Object.assign({},c),{formName:u})),this.setItem=this.updater((c,u)=>Object.assign(Object.assign({},c),{item:u})),this.addNewEquipment=this.updater((c,u)=>Object.assign(Object.assign({},c),{equipments:[...c.equipments,u]})),this.updateEquipment=this.updater((c,u)=>Object.assign(Object.assign({},c),{equipments:c.equipments.map(n=>n.id===u.id?u:n)})),this.addEquipments=this.updater((c,u)=>Object.assign(Object.assign({},c),{equipments:c.equipments.concat(u)})),this.updateEquipments=this.updater((c,u)=>Object.assign(Object.assign({},c),{equipments:c.equipments.map(n=>u.find(m=>m.id===n.id)||n)})),this.setSearchQuery=this.updater((c,u)=>Object.assign(Object.assign({},c),{searchQuery:u})),this.loadEquipmentEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.data.userEquipment({equipmentId:u}).pipe((0,b._b)(n=>{this.patchState({item:n.data.item,errors:n.errors,loading:!1})},n=>this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})))))),this.loadEquipmentsEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.input$),(0,h.w)(([u,n])=>this.data.userEquipments({input:n}).pipe((0,b._b)(r=>this.patchState({paging:{limit:n.limit,skip:n.skip,total:r.data.count.total},equipments:r.data.items,errors:r.errors,loading:!1}),r=>this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})))))),this.createEquipmentEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.equipmentService.createEquipment(Object.assign({},u)).pipe((0,b._b)(n=>{this.addNewEquipment(n),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:n,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},n=>{n.graphQLErrors?(this.toast.error(n.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})):(this.toast.error(n.Message),this.formService.setErrors(n.Data))}))))),this.updateEquipmentEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([u,n])=>this.equipmentService.updateEquipment(u,u.id).pipe((0,b._b)(r=>{this.updateEquipment(r),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:r,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},r=>{r.graphQLErrors?(this.toast.error(r.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})):(this.toast.error(r.Message),this.formService.setErrors(r.Data))}))))),this.deleteEquipmentEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([u,n])=>this.data.userDeleteEquipment({equipmentId:n.id}).pipe((0,b._b)(r=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:r.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},r=>{r.graphQLErrors?(this.toast.error(r.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})):(this.toast.error(r.Message),this.formService.setErrors(r.Data))}))))),this.importExcelEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.equipmentService.importEquipments(u).pipe((0,de.K)(n=>{var r;return this.toast.error(null!==(r=n.Message)&&void 0!==r?r:"Failed to save",{duration:3e3}),q.E}),(0,y.b)(n=>{const r=JSON.parse(n.created),m=JSON.parse(n.updated),p=JSON.parse(n.failed),v=r.length+m.length+p.length;this.addEquipments(r),this.updateEquipments(m),this.toast.success(`${r.length} created, ${m.length} updated, ${p.length} failed of total ${v}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("equipmentId")?(this.route.snapshot.paramMap.get("equipmentId"),this.setFormName("equipment_edit")):this.setFormName("equipment_create")}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.equipmentService.validateEquipmentExcelData(t)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(z.q),e.LFG(O.F0),e.LFG(O.gz),e.LFG(X.F),e.LFG(Z.o),e.LFG(fD))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function _D(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.close.emit())})("formIsReady",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.equipment)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let Dl=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"equipment_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.equipment=i.item})):t.formName&&t.formName.currentValue&&"equipment_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadEquipmentEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.equipment=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(co),e.Y36(O.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-equipment-form"]],inputs:{equipment:"equipment",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,_D,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[P.O5,te.M,P.Ov],encapsulation:2}),s})(),Ml=(()=>{class s{constructor(){this.autoHeight=!1,this.equipments=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[,{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var a;t.includes(null===(a=i.data)||void 0===a?void 0:a.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-equipment-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(f.x,5),2&t){let a;e.iGM(a=e.CRH())&&(i.tableView=a.first)}},inputs:{autoHeight:"autoHeight",equipments:"equipments"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.equipments)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[f.x],encapsulation:2}),s})();function gD(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-equipment-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","equipment_edit")("formControl",t.formControl)("equipment",t.equipment)}}const vD=function(){return{}};function CD(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-equipment-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","equipment_create")("formControl",t.formControl)("equipment",e.DdM(3,vD))}}function SD(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-equipment-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(d.ref.close())}),e.qZA()}2&s&&e.Q6J("equipments",o.data.items)}let bD=(()=>{class s extends G.fS{constructor(t){super(),this.store=t,this.store.loadEquipmentsEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.equipments$.pipe((0,h.w)(i=>(0,D.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(co))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","equipment","send","close"],[1,"w-full","h-full","bg-white",3,"equipments","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,gD,2,3,"ng-template",null,1,e.W1O),e.YNc(3,CD,1,4,"ng-template",null,2,e.W1O),e.YNc(5,SD,1,1,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",d)("editTemplate",a)("createTemplate",l)("key",i.field.key)}},dependencies:[E.JJ,E.oH,H.$,Dl,Ml],encapsulation:2}),s})();function TD(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-equipment-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","equipment_edit")("equipment",t.value)}}const yD=function(){return{}};function wD(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-equipment-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","equipment_create")("equipment",e.DdM(2,yD))}function xD(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-equipment-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(null==d.ref?null:d.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("equipments",t.items)}}let ND=(()=>{class s extends pe{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","equipment","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","equipments","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,TD,1,2,"ng-template",null,1,e.W1O),e.YNc(3,wD,1,3,"ng-template",null,2,e.W1O),e.YNc(5,xD,1,2,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[he,Dl,Ml],encapsulation:2}),s})(),AD=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[co],imports:[P.ez,U.F,E.UX,J.o,ae.u,$.P,j.t,me,k.h,se.G,G.X0.forChild({types:[{name:"equipment-select",component:bD,wrappers:["form-field"]},{name:"equipment-grid",component:ND}]})]}),s})(),FD=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[AD]}),s})();class Yt extends W.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class PD extends Yt{constructor(o){super("ValidateEthnicityExcelDataAction"),this.valid=!1,this.excelData=o}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name)}),this.validationContext.addRule(new g.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof g.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(a=>a.name),newNames:[i.newName]}):i instanceof g.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,D.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class ID extends g.wS{constructor(o,t,i,a,l){super(o,t,i,a,l,!0)}}class DD extends g.ul{constructor(o,t,i,a=!1){super(o,t,a),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new g.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new ID("name","The ethnicity name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class MD extends Yt{constructor(o){super("CreateEthnicityAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new DD("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateEthnicity({input:this.input}).pipe((0,h.w)(o=>(0,ue.of)(o.data.created)))}}class WD extends Yt{constructor(o){super("UpdateEthnicitiesAction"),this.ethnicities=o}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.ethnicities,!0))}performAction(){this.response=this.businessProvider.data.userUpdateEthnicities({input:{ethnicities:this.ethnicities}}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}class ED extends Yt{constructor(o,t){super("UpdateEthnicityAction"),this.ethnicity=o,this.ethnicityId=t}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.ethnicity,!0)).addRule(new g.xF("Id","Id should be a CUID and not null",this.ethnicityId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateEthnicity({ethnicityId:this.ethnicityId,input:this.ethnicity}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}let Wl=(()=>{class s extends W.nH{constructor(t,i,a){super("NotificationService.EthnicityBusinessProviderService",t,a),this.data=i}createEthnicity(t){const i=new MD(t);return i.Do(this),i.response}updateEthnicity(t,i){const a=new ED(t,i);return a.Do(this),a.response}importEthnicities(t){const i=new WD(t);return i.Do(this),i.response}validateEthnicityExcelData(t){const i=new PD(t);return i.Do(this),i.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(K.ed),e.LFG(z.q),e.LFG(W.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),OD=(()=>{class s extends W.nH{constructor(t,i,a){super("EthnicityService",a,t),this.businessProvider=i}createEthnicity(t){const i=Object.fromEntries(Object.entries(t).filter(([a,l])=>null!==l));return this.businessProvider.createEthnicity(i)}updateEthnicity(t,i){return this.businessProvider.updateEthnicity(t,i)}importEthnicities(t){return this.businessProvider.importEthnicities(t)}validateEthnicityExcelData(t){return this.businessProvider.validateEthnicityExcelData(t)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(Wl,8),e.LFG(Wl),e.LFG(K.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),uo=(()=>{class s extends b.m1{constructor(t,i,a,l,d,ee){super({loading:!1,ethnicities:[],done:!1,searchQuery:"",formName:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=a,this.toast=l,this.formService=d,this.ethnicityService=ee,this.errors$=this.select(c=>c.errors),this.loading$=this.select(c=>c.loading),this.done$=this.select(c=>c.done),this.item$=this.select(c=>c.item),this.ethnicities$=this.select(c=>c.ethnicities),this.paging$=this.select(c=>c.paging),this.searchQuery$=this.select(c=>c.searchQuery),this.formName$=this.select(c=>c.formName),this.actionResult$=this.select(this.item$,this.done$,(c,u)=>({item:c,done:u}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.ethnicities$,(c,u,n,r,m)=>({errors:c,loading:u,item:n,formName:r,ethnicities:m}),{debounce:!0}),this.input$=this.select(this.paging$,this.searchQuery$,(c,u)=>({limit:c.limit,skip:c.skip,name:u,total:c.total})),this.setFormName=this.updater((c,u)=>Object.assign(Object.assign({},c),{formName:u})),this.setItem=this.updater((c,u)=>Object.assign(Object.assign({},c),{item:u})),this.addNewEthnicity=this.updater((c,u)=>Object.assign(Object.assign({},c),{ethnicities:[...c.ethnicities,u]})),this.updateEthnicity=this.updater((c,u)=>Object.assign(Object.assign({},c),{ethnicities:c.ethnicities.map(n=>n.id===u.id?u:n)})),this.addEthnicities=this.updater((c,u)=>Object.assign(Object.assign({},c),{ethnicities:c.ethnicities.concat(u)})),this.updateEthnicities=this.updater((c,u)=>Object.assign(Object.assign({},c),{ethnicities:c.ethnicities.map(n=>u.find(m=>m.id===n.id)||n)})),this.setSearchQuery=this.updater((c,u)=>Object.assign(Object.assign({},c),{searchQuery:u})),this.loadEthnicityEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.data.userEthnicity({ethnicityId:u}).pipe((0,b._b)(n=>{this.patchState({item:n.data.item,errors:n.errors,loading:!1})},n=>this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})))))),this.loadEthnicitiesEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.input$),(0,h.w)(([u,n])=>this.data.userEthnicities({input:n}).pipe((0,b._b)(r=>this.patchState({paging:{limit:n.limit,skip:n.skip,total:r.data.count.total},ethnicities:r.data.items,errors:r.errors,loading:!1}),r=>this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})))))),this.createEthnicityEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.ethnicityService.createEthnicity(Object.assign({},u)).pipe((0,b._b)(n=>{this.addNewEthnicity(n),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:n,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},n=>{n.graphQLErrors?(this.toast.error(n.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})):(this.toast.error(n.Message),this.formService.setErrors(n.Data))}))))),this.updateEthnicityEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([u,n])=>this.ethnicityService.updateEthnicity(u,u.id).pipe((0,b._b)(r=>{this.updateEthnicity(r),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:r,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},r=>{r.graphQLErrors?(this.toast.error(r.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})):(this.toast.error(r.Message),this.formService.setErrors(r.Data))}))))),this.deleteEthnicityEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([u,n])=>this.data.userDeleteEthnicity({ethnicityId:n.id}).pipe((0,b._b)(r=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:r.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},r=>{r.graphQLErrors?(this.toast.error(r.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})):(this.toast.error(r.Message),this.formService.setErrors(r.Data))}))))),this.importExcelEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.ethnicityService.importEthnicities(u).pipe((0,de.K)(n=>{var r;return this.toast.error(null!==(r=n.Message)&&void 0!==r?r:"Failed to save",{duration:3e3}),q.E}),(0,y.b)(n=>{const r=JSON.parse(n.created),m=JSON.parse(n.updated),p=JSON.parse(n.failed),v=r.length+m.length+p.length;this.addEthnicities(r),this.updateEthnicities(m),this.toast.success(`${r.length} created, ${m.length} updated, ${p.length} failed of total ${v}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("ethnicityId")?(this.route.snapshot.paramMap.get("ethnicityId"),this.setFormName("ethnicity_edit")):this.setFormName("ethnicity_create")}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.ethnicityService.validateEthnicityExcelData(t)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(z.q),e.LFG(O.F0),e.LFG(O.gz),e.LFG(X.F),e.LFG(Z.o),e.LFG(OD))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function LD(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.close.emit())})("formIsReady",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.ethnicity)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let El=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"ethnicity_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.ethnicity=i.item})):t.formName&&t.formName.currentValue&&"ethnicity_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadEthnicityEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.ethnicity=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(uo),e.Y36(O.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-ethnicity-form"]],inputs:{ethnicity:"ethnicity",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,LD,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[P.O5,te.M,P.Ov],encapsulation:2}),s})(),Ol=(()=>{class s{constructor(){this.autoHeight=!1,this.ethnicities=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[,{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var a;t.includes(null===(a=i.data)||void 0===a?void 0:a.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-ethnicity-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(f.x,5),2&t){let a;e.iGM(a=e.CRH())&&(i.tableView=a.first)}},inputs:{autoHeight:"autoHeight",ethnicities:"ethnicities"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.ethnicities)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[f.x],encapsulation:2}),s})();function $D(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-ethnicity-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","ethnicity_edit")("formControl",t.formControl)("ethnicity",t.ethnicity)}}const GD=function(){return{}};function RD(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-ethnicity-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","ethnicity_create")("formControl",t.formControl)("ethnicity",e.DdM(3,GD))}}function QD(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-ethnicity-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(d.ref.close())}),e.qZA()}2&s&&e.Q6J("ethnicities",o.data.items)}let VD=(()=>{class s extends G.fS{constructor(t){super(),this.store=t,this.store.loadEthnicitiesEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.ethnicities$.pipe((0,h.w)(i=>(0,D.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(uo))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","ethnicity","send","close"],[1,"w-full","h-full","bg-white",3,"ethnicities","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,$D,2,3,"ng-template",null,1,e.W1O),e.YNc(3,RD,1,4,"ng-template",null,2,e.W1O),e.YNc(5,QD,1,1,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",d)("editTemplate",a)("createTemplate",l)("key",i.field.key)}},dependencies:[E.JJ,E.oH,H.$,El,Ol],encapsulation:2}),s})();function jD(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-ethnicity-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","ethnicity_edit")("ethnicity",t.value)}}const UD=function(){return{}};function JD(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-ethnicity-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","ethnicity_create")("ethnicity",e.DdM(2,UD))}function zD(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-ethnicity-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(null==d.ref?null:d.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("ethnicities",t.items)}}let HD=(()=>{class s extends pe{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","ethnicity","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","ethnicities","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,jD,1,2,"ng-template",null,1,e.W1O),e.YNc(3,JD,1,3,"ng-template",null,2,e.W1O),e.YNc(5,zD,1,2,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[he,El,Ol],encapsulation:2}),s})(),qD=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[uo],imports:[P.ez,U.F,E.UX,J.o,ae.u,$.P,j.t,me,k.h,se.G,G.X0.forChild({types:[{name:"ethnicity-select",component:VD,wrappers:["form-field"]},{name:"ethnicity-grid",component:HD}]})]}),s})(),KD=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[qD]}),s})();class Xt extends W.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class ZD extends Xt{constructor(o,t,i){super("ValidateFacilityFeeScheduleExcelDataAction"),this.valid=!1,this.excelData=o,this.organizations=t,this.specialties=i}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name),this.validationContext.addRule(new g.mi(`organizationName_${i}_is_valid}`,"Organization Is Not Valid","organization.name",t.organization,this.organizations,!0)),this.validationContext.addRule(new g.mi(`specialtyName_${i}_is_valid}`,"Specialty Is Not Valid","specialty.name",t.specialty,this.specialties,!0))}),this.validationContext.addRule(new g.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof g.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(a=>a.name),newNames:[i.newName]}):i instanceof g.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,D.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class BD extends g.wS{constructor(o,t,i,a,l){super(o,t,i,a,l,!0)}}class kD extends g.ul{constructor(o,t,i,a=!1){super(o,t,a),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new g.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new BD("name","The facilityfeeschedule name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class YD extends Xt{constructor(o){super("CreateFacilityFeeScheduleAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new kD("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateFacilityFeeSchedule({input:this.input}).pipe((0,h.w)(o=>(0,ue.of)(o.data.created)))}}class XD extends Xt{constructor(o){super("UpdateFacilityFeeSchedulesAction"),this.facilityFeeSchedules=o}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.facilityFeeSchedules,!0))}performAction(){this.response=this.businessProvider.data.userUpdateFacilityFeeSchedules({input:{facilityFeeSchedules:this.facilityFeeSchedules}}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}class e1 extends Xt{constructor(o,t){super("UpdateFacilityFeeScheduleAction"),this.facilityFeeSchedule=o,this.facilityFeeScheduleId=t}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.facilityFeeSchedule,!0)).addRule(new g.xF("Id","Id should be a CUID and not null",this.facilityFeeScheduleId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateFacilityFeeSchedule({facilityFeeScheduleId:this.facilityFeeScheduleId,input:this.facilityFeeSchedule}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}let Ll=(()=>{class s extends W.nH{constructor(t,i,a){super("NotificationService.FacilityFeeScheduleBusinessProviderService",t,a),this.data=i}createFacilityFeeSchedule(t){const i=new YD(t);return i.Do(this),i.response}updateFacilityFeeSchedule(t,i){const a=new e1(t,i);return a.Do(this),a.response}importFacilityFeeSchedules(t){const i=new XD(t);return i.Do(this),i.response}validateFacilityFeeScheduleExcelData(t,i,a){const l=new ZD(t,i,a);return l.Do(this),l.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(K.ed),e.LFG(z.q),e.LFG(W.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),t1=(()=>{class s extends W.nH{constructor(t,i,a){super("FacilityFeeScheduleService",a,t),this.businessProvider=i}createFacilityFeeSchedule(t){const i=Object.fromEntries(Object.entries(t).filter(([a,l])=>null!==l));return this.businessProvider.createFacilityFeeSchedule(i)}updateFacilityFeeSchedule(t,i){return this.businessProvider.updateFacilityFeeSchedule(t,i)}importFacilityFeeSchedules(t){return this.businessProvider.importFacilityFeeSchedules(t)}validateFacilityFeeScheduleExcelData(t,i,a){return this.businessProvider.validateFacilityFeeScheduleExcelData(t,i,a)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(Ll,8),e.LFG(Ll),e.LFG(K.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),mo=(()=>{class s extends b.m1{constructor(t,i,a,l,d,ee){if(super({loading:!1,facilityFeeSchedules:[],done:!1,searchQuery:"",formName:void 0,organizationId:void 0,specialtyId:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=a,this.toast=l,this.formService=d,this.facilityFeeScheduleService=ee,this.errors$=this.select(n=>n.errors),this.loading$=this.select(n=>n.loading),this.done$=this.select(n=>n.done),this.item$=this.select(n=>n.item),this.facilityFeeSchedules$=this.select(n=>n.facilityFeeSchedules),this.organizations$=this.select(n=>n.organizations||[]),this.specialties$=this.select(n=>n.specialties||[]),this.organizationId$=this.select(n=>n.organizationId),this.specialtyId$=this.select(n=>n.specialtyId),this.paging$=this.select(n=>n.paging),this.searchQuery$=this.select(n=>n.searchQuery),this.formName$=this.select(n=>n.formName),this.actionResult$=this.select(this.item$,this.done$,(n,r)=>({item:n,done:r}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.facilityFeeSchedules$,this.organizations$,this.specialties$,(n,r,m,p,v,I,B)=>({errors:n,loading:r,item:m,formName:p,facilityFeeSchedules:v,organizations:I,specialties:B}),{debounce:!0}),this.input$=this.select(this.paging$,this.organizationId$,this.specialtyId$,this.searchQuery$,(n,r,m,p)=>({limit:n.limit,skip:n.skip,name:p,organizationId:r,specialtyId:m,total:n.total})),this.setFormName=this.updater((n,r)=>Object.assign(Object.assign({},n),{formName:r})),this.setOrganizationId=this.updater((n,r)=>Object.assign(Object.assign({},n),{organizationId:r})),this.setSpecialtyId=this.updater((n,r)=>Object.assign(Object.assign({},n),{specialtyId:r})),this.filterOrganizations=n=>this.data.userSelectOrganizations({input:{name:n}}).pipe((0,b._b)(r=>{let m=r.data.items;return this.patchState({organizations:m}),m},r=>this.patchState({errors:r.graphQLErrors?r.graphQLErrors:r})),(0,fe.U)(r=>r.data.items)),this.filterSpecialties=n=>this.data.userSelectSpecialties({input:{name:n}}).pipe((0,b._b)(r=>{let m=r.data.items;return this.patchState({specialties:m}),m},r=>this.patchState({errors:r.graphQLErrors?r.graphQLErrors:r})),(0,fe.U)(r=>r.data.items)),this.addOrganization=this.updater((n,r)=>Object.assign(Object.assign({},n),{organizations:n.organizations.concat(r)})),this.addSpecialty=this.updater((n,r)=>Object.assign(Object.assign({},n),{specialties:n.specialties.concat(r)})),this.setItem=this.updater((n,r)=>Object.assign(Object.assign({},n),{item:r})),this.addNewFacilityFeeSchedule=this.updater((n,r)=>Object.assign(Object.assign({},n),{facilityFeeSchedules:[...n.facilityFeeSchedules,r]})),this.updateFacilityFeeSchedule=this.updater((n,r)=>Object.assign(Object.assign({},n),{facilityFeeSchedules:n.facilityFeeSchedules.map(m=>m.id===r.id?r:m)})),this.addFacilityFeeSchedules=this.updater((n,r)=>Object.assign(Object.assign({},n),{facilityFeeSchedules:n.facilityFeeSchedules.concat(r)})),this.updateFacilityFeeSchedules=this.updater((n,r)=>Object.assign(Object.assign({},n),{facilityFeeSchedules:n.facilityFeeSchedules.map(m=>r.find(v=>v.id===m.id)||m)})),this.setSearchQuery=this.updater((n,r)=>Object.assign(Object.assign({},n),{searchQuery:r})),this.loadFacilityFeeScheduleEffect=this.effect(n=>n.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(r=>this.data.userFacilityFeeSchedule({facilityFeeScheduleId:r}).pipe((0,b._b)(m=>{this.patchState({item:m.data.item,errors:m.errors,loading:!1})},m=>this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})))))),this.loadFacilityFeeSchedulesEffect=this.effect(n=>n.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.input$),(0,h.w)(([r,m])=>this.data.userFacilityFeeSchedules({input:m}).pipe((0,b._b)(p=>this.patchState({paging:{limit:m.limit,skip:m.skip,total:p.data.count.total},facilityFeeSchedules:p.data.items,errors:p.errors,loading:!1}),p=>this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})))))),this.createFacilityFeeScheduleEffect=this.effect(n=>n.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(r=>this.facilityFeeScheduleService.createFacilityFeeSchedule(Object.assign({},r)).pipe((0,b._b)(m=>{this.addNewFacilityFeeSchedule(m),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:m,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},m=>{m.graphQLErrors?(this.toast.error(m.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})):(this.toast.error(m.Message),this.formService.setErrors(m.Data))}))))),this.updateFacilityFeeScheduleEffect=this.effect(n=>n.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([r,m])=>this.facilityFeeScheduleService.updateFacilityFeeSchedule(r,r.id).pipe((0,b._b)(p=>{this.updateFacilityFeeSchedule(p),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:p,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},p=>{p.graphQLErrors?(this.toast.error(p.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})):(this.toast.error(p.Message),this.formService.setErrors(p.Data))}))))),this.deleteFacilityFeeScheduleEffect=this.effect(n=>n.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([r,m])=>this.data.userDeleteFacilityFeeSchedule({facilityFeeScheduleId:m.id}).pipe((0,b._b)(p=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:p.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},p=>{p.graphQLErrors?(this.toast.error(p.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})):(this.toast.error(p.Message),this.formService.setErrors(p.Data))}))))),this.importExcelEffect=this.effect(n=>n.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(r=>this.facilityFeeScheduleService.importFacilityFeeSchedules(r).pipe((0,de.K)(m=>{var p;return this.toast.error(null!==(p=m.Message)&&void 0!==p?p:"Failed to save",{duration:3e3}),q.E}),(0,y.b)(m=>{const p=JSON.parse(m.created),v=JSON.parse(m.updated),I=JSON.parse(m.failed),B=p.length+v.length+I.length;this.addFacilityFeeSchedules(p),this.updateFacilityFeeSchedules(v),this.toast.success(`${p.length} created, ${v.length} updated, ${I.length} failed of total ${B}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("facilityFeeScheduleId")?(this.route.snapshot.paramMap.get("facilityFeeScheduleId"),this.setFormName("facilityFeeSchedule_edit")):this.setFormName("facilityFeeSchedule_create"),this.route.snapshot.paramMap.has("organizationId")){var c=this.route.snapshot.paramMap.get("organizationId");this.setOrganizationId(c)}if(this.route.snapshot.paramMap.has("specialtyId")){var u=this.route.snapshot.paramMap.get("specialtyId");this.setSpecialtyId(u)}}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.facilityFeeScheduleService.validateFacilityFeeScheduleExcelData(t,i.organizations,i.specialties)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(z.q),e.LFG(O.F0),e.LFG(O.gz),e.LFG(X.F),e.LFG(Z.o),e.LFG(t1))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function i1(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.close.emit())})("formIsReady",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.facilityFeeSchedule)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let $l=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"facilityFeeSchedule_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.facilityFeeSchedule=i.item})):t.formName&&t.formName.currentValue&&"facilityFeeSchedule_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadFacilityFeeScheduleEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.facilityFeeSchedule=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(mo),e.Y36(O.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-facility-fee-schedule-form"]],inputs:{facilityFeeSchedule:"facilityFeeSchedule",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,i1,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[P.O5,te.M,P.Ov],encapsulation:2}),s})(),Gl=(()=>{class s{constructor(){this.autoHeight=!1,this.facilityFeeSchedules=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[{field:"organization.name",headerName:"Organization",filter:"agTextColumnFilter"},{field:"specialty.name",headerName:"Specialty",filter:"agTextColumnFilter"},{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{field:"organizationId",filter:"agTextColumnFilter",hide:!0},{field:"specialtyId",filter:"agTextColumnFilter",hide:!0},{field:"code",filter:"agTextColumnFilter"},{field:"modifier",filter:"agTextColumnFilter"},{field:"description",filter:"agTextColumnFilter"},{headerName:"Medicare Facility Rate",field:"medicareFacilityRate",valueFormatter:t=>{var i;return(0,_.oBD)(null===(i=t.data)||void 0===i?void 0:i.medicareFacilityRate,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{headerName:"Facility Fee",field:"facilityFee",valueFormatter:t=>{var i;return(0,_.oBD)(null===(i=t.data)||void 0===i?void 0:i.facilityFee,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{headerName:"Base Unit",field:"baseUnit",valueFormatter:t=>{var i;return(0,_.oBD)(null===(i=t.data)||void 0===i?void 0:i.baseUnit,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{headerName:"Prof Cf",field:"profCf",valueFormatter:t=>{var i;return(0,_.oBD)(null===(i=t.data)||void 0===i?void 0:i.profCf,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var a;t.includes(null===(a=i.data)||void 0===a?void 0:a.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-facility-fee-schedule-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(f.x,5),2&t){let a;e.iGM(a=e.CRH())&&(i.tableView=a.first)}},inputs:{autoHeight:"autoHeight",facilityFeeSchedules:"facilityFeeSchedules"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.facilityFeeSchedules)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[f.x],encapsulation:2}),s})();function s1(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-facility-fee-schedule-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","facilityFeeSchedule_edit")("formControl",t.formControl)("facilityFeeSchedule",t.facilityFeeSchedule)}}const o1=function(){return{}};function a1(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-facility-fee-schedule-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","facilityFeeSchedule_create")("formControl",t.formControl)("facilityFeeSchedule",e.DdM(3,o1))}}function r1(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-facility-fee-schedule-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(d.ref.close())}),e.qZA()}2&s&&e.Q6J("facilityFeeSchedules",o.data.items)}let n1=(()=>{class s extends G.fS{constructor(t){super(),this.store=t,this.store.loadFacilityFeeSchedulesEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.facilityFeeSchedules$.pipe((0,h.w)(i=>(0,D.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(mo))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","facilityFeeSchedule","send","close"],[1,"w-full","h-full","bg-white",3,"facilityFeeSchedules","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,s1,2,3,"ng-template",null,1,e.W1O),e.YNc(3,a1,1,4,"ng-template",null,2,e.W1O),e.YNc(5,r1,1,1,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",d)("editTemplate",a)("createTemplate",l)("key",i.field.key)}},dependencies:[E.JJ,E.oH,H.$,$l,Gl],encapsulation:2}),s})();function l1(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-facility-fee-schedule-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","facilityFeeSchedule_edit")("facilityFeeSchedule",t.value)}}const c1=function(){return{}};function d1(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-facility-fee-schedule-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","facilityFeeSchedule_create")("facilityFeeSchedule",e.DdM(2,c1))}function u1(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-facility-fee-schedule-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(null==d.ref?null:d.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("facilityFeeSchedules",t.items)}}let m1=(()=>{class s extends pe{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","facilityFeeSchedule","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","facilityFeeSchedules","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,l1,1,2,"ng-template",null,1,e.W1O),e.YNc(3,d1,1,3,"ng-template",null,2,e.W1O),e.YNc(5,u1,1,2,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[he,$l,Gl],encapsulation:2}),s})(),p1=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[mo],imports:[P.ez,U.F,E.UX,J.o,ae.u,$.P,j.t,me,k.h,se.G,G.X0.forChild({types:[{name:"facility-fee-schedule-select",component:n1,wrappers:["form-field"]},{name:"facility-fee-schedule-grid",component:m1}]})]}),s})(),h1=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[p1]}),s})();class ei extends W.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class f1 extends ei{constructor(o,t){super("ValidateFavoriteProviderExcelDataAction"),this.valid=!1,this.excelData=o,this.clinicalProviders=t}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name),this.validationContext.addRule(new g.mi(`clinicalProviderName_${i}_is_valid}`,"Clinical Provider Is Not Valid","clinicalProvider.name",t.clinicalProvider,this.clinicalProviders,!0))}),this.validationContext.addRule(new g.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof g.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(a=>a.name),newNames:[i.newName]}):i instanceof g.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,D.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class _1 extends g.wS{constructor(o,t,i,a,l){super(o,t,i,a,l,!0)}}class g1 extends g.ul{constructor(o,t,i,a=!1){super(o,t,a),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new g.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new _1("name","The favoriteprovider name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class v1 extends ei{constructor(o){super("CreateFavoriteProviderAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new g1("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateFavoriteProvider({input:this.input}).pipe((0,h.w)(o=>(0,ue.of)(o.data.created)))}}class C1 extends ei{constructor(o){super("UpdateFavoriteProvidersAction"),this.favoriteProviders=o}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.favoriteProviders,!0))}performAction(){this.response=this.businessProvider.data.userUpdateFavoriteProviders({input:{favoriteProviders:this.favoriteProviders}}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}class S1 extends ei{constructor(o,t){super("UpdateFavoriteProviderAction"),this.favoriteProvider=o,this.favoriteProviderId=t}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.favoriteProvider,!0)).addRule(new g.xF("Id","Id should be a CUID and not null",this.favoriteProviderId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateFavoriteProvider({favoriteProviderId:this.favoriteProviderId,input:this.favoriteProvider}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}let Rl=(()=>{class s extends W.nH{constructor(t,i,a){super("NotificationService.FavoriteProviderBusinessProviderService",t,a),this.data=i}createFavoriteProvider(t){const i=new v1(t);return i.Do(this),i.response}updateFavoriteProvider(t,i){const a=new S1(t,i);return a.Do(this),a.response}importFavoriteProviders(t){const i=new C1(t);return i.Do(this),i.response}validateFavoriteProviderExcelData(t,i){const a=new f1(t,i);return a.Do(this),a.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(K.ed),e.LFG(z.q),e.LFG(W.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),b1=(()=>{class s extends W.nH{constructor(t,i,a){super("FavoriteProviderService",a,t),this.businessProvider=i}createFavoriteProvider(t){const i=Object.fromEntries(Object.entries(t).filter(([a,l])=>null!==l));return this.businessProvider.createFavoriteProvider(i)}updateFavoriteProvider(t,i){return this.businessProvider.updateFavoriteProvider(t,i)}importFavoriteProviders(t){return this.businessProvider.importFavoriteProviders(t)}validateFavoriteProviderExcelData(t,i){return this.businessProvider.validateFavoriteProviderExcelData(t,i)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(Rl,8),e.LFG(Rl),e.LFG(K.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),po=(()=>{class s extends b.m1{constructor(t,i,a,l,d,ee){if(super({loading:!1,favoriteProviders:[],done:!1,searchQuery:"",formName:void 0,clinicalProviderId:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=a,this.toast=l,this.formService=d,this.favoriteProviderService=ee,this.errors$=this.select(u=>u.errors),this.loading$=this.select(u=>u.loading),this.done$=this.select(u=>u.done),this.item$=this.select(u=>u.item),this.favoriteProviders$=this.select(u=>u.favoriteProviders),this.clinicalProviders$=this.select(u=>u.clinicalProviders||[]),this.clinicalProviderId$=this.select(u=>u.clinicalProviderId),this.paging$=this.select(u=>u.paging),this.searchQuery$=this.select(u=>u.searchQuery),this.formName$=this.select(u=>u.formName),this.actionResult$=this.select(this.item$,this.done$,(u,n)=>({item:u,done:n}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.favoriteProviders$,this.clinicalProviders$,(u,n,r,m,p,v)=>({errors:u,loading:n,item:r,formName:m,favoriteProviders:p,clinicalProviders:v}),{debounce:!0}),this.input$=this.select(this.paging$,this.clinicalProviderId$,this.searchQuery$,(u,n,r)=>({limit:u.limit,skip:u.skip,name:r,clinicalProviderId:n,total:u.total})),this.setFormName=this.updater((u,n)=>Object.assign(Object.assign({},u),{formName:n})),this.setClinicalProviderId=this.updater((u,n)=>Object.assign(Object.assign({},u),{clinicalProviderId:n})),this.filterClinicalProviders=u=>this.data.userSelectClinicalProviders({input:{name:u}}).pipe((0,b._b)(n=>{let r=n.data.items;return this.patchState({clinicalProviders:r}),r},n=>this.patchState({errors:n.graphQLErrors?n.graphQLErrors:n})),(0,fe.U)(n=>n.data.items)),this.addClinicalProvider=this.updater((u,n)=>Object.assign(Object.assign({},u),{clinicalProviders:u.clinicalProviders.concat(n)})),this.setItem=this.updater((u,n)=>Object.assign(Object.assign({},u),{item:n})),this.addNewFavoriteProvider=this.updater((u,n)=>Object.assign(Object.assign({},u),{favoriteProviders:[...u.favoriteProviders,n]})),this.updateFavoriteProvider=this.updater((u,n)=>Object.assign(Object.assign({},u),{favoriteProviders:u.favoriteProviders.map(r=>r.id===n.id?n:r)})),this.addFavoriteProviders=this.updater((u,n)=>Object.assign(Object.assign({},u),{favoriteProviders:u.favoriteProviders.concat(n)})),this.updateFavoriteProviders=this.updater((u,n)=>Object.assign(Object.assign({},u),{favoriteProviders:u.favoriteProviders.map(r=>n.find(p=>p.id===r.id)||r)})),this.setSearchQuery=this.updater((u,n)=>Object.assign(Object.assign({},u),{searchQuery:n})),this.loadFavoriteProviderEffect=this.effect(u=>u.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(n=>this.data.userFavoriteProvider({favoriteProviderId:n}).pipe((0,b._b)(r=>{this.patchState({item:r.data.item,errors:r.errors,loading:!1})},r=>this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})))))),this.loadFavoriteProvidersEffect=this.effect(u=>u.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.input$),(0,h.w)(([n,r])=>this.data.userFavoriteProviders({input:r}).pipe((0,b._b)(m=>this.patchState({paging:{limit:r.limit,skip:r.skip,total:m.data.count.total},favoriteProviders:m.data.items,errors:m.errors,loading:!1}),m=>this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})))))),this.createFavoriteProviderEffect=this.effect(u=>u.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(n=>this.favoriteProviderService.createFavoriteProvider(Object.assign({},n)).pipe((0,b._b)(r=>{this.addNewFavoriteProvider(r),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:r,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},r=>{r.graphQLErrors?(this.toast.error(r.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})):(this.toast.error(r.Message),this.formService.setErrors(r.Data))}))))),this.updateFavoriteProviderEffect=this.effect(u=>u.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([n,r])=>this.favoriteProviderService.updateFavoriteProvider(n,n.id).pipe((0,b._b)(m=>{this.updateFavoriteProvider(m),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:m,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},m=>{m.graphQLErrors?(this.toast.error(m.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})):(this.toast.error(m.Message),this.formService.setErrors(m.Data))}))))),this.deleteFavoriteProviderEffect=this.effect(u=>u.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([n,r])=>this.data.userDeleteFavoriteProvider({favoriteProviderId:r.id}).pipe((0,b._b)(m=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:m.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},m=>{m.graphQLErrors?(this.toast.error(m.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})):(this.toast.error(m.Message),this.formService.setErrors(m.Data))}))))),this.deleteSpecificFavoriteProviderEffect=this.effect(u=>u.pipe((0,h.w)(n=>this.data.userDeleteFavoriteProvider({favoriteProviderId:n.id}).pipe((0,b._b)(r=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:r.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},r=>{r.graphQLErrors?(this.toast.error(r.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})):(this.toast.error(r.Message),this.formService.setErrors(r.Data))}))))),this.importExcelEffect=this.effect(u=>u.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(n=>this.favoriteProviderService.importFavoriteProviders(n).pipe((0,de.K)(r=>{var m;return this.toast.error(null!==(m=r.Message)&&void 0!==m?m:"Failed to save",{duration:3e3}),q.E}),(0,y.b)(r=>{const m=JSON.parse(r.created),p=JSON.parse(r.updated),v=JSON.parse(r.failed),I=m.length+p.length+v.length;this.addFavoriteProviders(m),this.updateFavoriteProviders(p),this.toast.success(`${m.length} created, ${p.length} updated, ${v.length} failed of total ${I}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("favoriteProviderId")?(this.route.snapshot.paramMap.get("favoriteProviderId"),this.setFormName("favoriteProvider_edit")):this.setFormName("favoriteProvider_create"),this.route.snapshot.paramMap.has("clinicalProviderId")){var c=this.route.snapshot.paramMap.get("clinicalProviderId");this.setClinicalProviderId(c)}}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.favoriteProviderService.validateFavoriteProviderExcelData(t,i.clinicalProviders)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(z.q),e.LFG(O.F0),e.LFG(O.gz),e.LFG(X.F),e.LFG(Z.o),e.LFG(b1))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function T1(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.close.emit())})("formIsReady",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.favoriteProvider)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let Ql=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"favoriteProvider_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.favoriteProvider=i.item})):t.formName&&t.formName.currentValue&&"favoriteProvider_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadFavoriteProviderEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.favoriteProvider=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(po),e.Y36(O.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-favorite-provider-form"]],inputs:{favoriteProvider:"favoriteProvider",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,T1,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[P.O5,te.M,P.Ov],encapsulation:2}),s})(),Vl=(()=>{class s{constructor(){this.autoHeight=!1,this.favoriteProviders=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[{field:"clinicalProvider.name",headerName:"Clinical Provider",filter:"agTextColumnFilter"},{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{field:"clinicalProviderId",filter:"agTextColumnFilter",hide:!0},{field:"userId",filter:"agTextColumnFilter",hide:!0},{field:"specialtyId",filter:"agTextColumnFilter",hide:!0}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var a;t.includes(null===(a=i.data)||void 0===a?void 0:a.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-favorite-provider-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(f.x,5),2&t){let a;e.iGM(a=e.CRH())&&(i.tableView=a.first)}},inputs:{autoHeight:"autoHeight",favoriteProviders:"favoriteProviders"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.favoriteProviders)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[f.x],encapsulation:2}),s})();function y1(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-favorite-provider-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","favoriteProvider_edit")("formControl",t.formControl)("favoriteProvider",t.favoriteProvider)}}const w1=function(){return{}};function x1(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-favorite-provider-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","favoriteProvider_create")("formControl",t.formControl)("favoriteProvider",e.DdM(3,w1))}}function N1(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-favorite-provider-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(d.ref.close())}),e.qZA()}2&s&&e.Q6J("favoriteProviders",o.data.items)}let A1=(()=>{class s extends G.fS{constructor(t){super(),this.store=t,this.store.loadFavoriteProvidersEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.favoriteProviders$.pipe((0,h.w)(i=>(0,D.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(po))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","favoriteProvider","send","close"],[1,"w-full","h-full","bg-white",3,"favoriteProviders","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,y1,2,3,"ng-template",null,1,e.W1O),e.YNc(3,x1,1,4,"ng-template",null,2,e.W1O),e.YNc(5,N1,1,1,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",d)("editTemplate",a)("createTemplate",l)("key",i.field.key)}},dependencies:[E.JJ,E.oH,H.$,Ql,Vl],encapsulation:2}),s})();function F1(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-favorite-provider-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","favoriteProvider_edit")("favoriteProvider",t.value)}}const P1=function(){return{}};function I1(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-favorite-provider-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","favoriteProvider_create")("favoriteProvider",e.DdM(2,P1))}function D1(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-favorite-provider-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(null==d.ref?null:d.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("favoriteProviders",t.items)}}let M1=(()=>{class s extends pe{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","favoriteProvider","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","favoriteProviders","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,F1,1,2,"ng-template",null,1,e.W1O),e.YNc(3,I1,1,3,"ng-template",null,2,e.W1O),e.YNc(5,D1,1,2,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[he,Ql,Vl],encapsulation:2}),s})(),W1=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[po],imports:[P.ez,U.F,E.UX,J.o,ae.u,$.P,j.t,me,k.h,se.G,G.X0.forChild({types:[{name:"favorite-provider-select",component:A1,wrappers:["form-field"]},{name:"favorite-provider-grid",component:M1}]})]}),s})(),E1=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[W1]}),s})();class ti extends W.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class O1 extends ti{constructor(o,t,i){super("ValidateFeeScheduleExcelDataAction"),this.valid=!1,this.excelData=o,this.organizations=t,this.specialties=i}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name),this.validationContext.addRule(new g.mi(`organizationName_${i}_is_valid}`,"Organization Is Not Valid","organization.name",t.organization,this.organizations,!0)),this.validationContext.addRule(new g.mi(`specialtyName_${i}_is_valid}`,"Specialty Is Not Valid","specialty.name",t.specialty,this.specialties,!0))}),this.validationContext.addRule(new g.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof g.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(a=>a.name),newNames:[i.newName]}):i instanceof g.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,D.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class L1 extends g.wS{constructor(o,t,i,a,l){super(o,t,i,a,l,!0)}}class $1 extends g.ul{constructor(o,t,i,a=!1){super(o,t,a),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new g.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new L1("name","The feeschedule name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class G1 extends ti{constructor(o){super("CreateFeeScheduleAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new $1("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateFeeSchedule({input:this.input}).pipe((0,h.w)(o=>(0,ue.of)(o.data.created)))}}class R1 extends ti{constructor(o){super("UpdateFeeSchedulesAction"),this.feeSchedules=o}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.feeSchedules,!0))}performAction(){this.response=this.businessProvider.data.userUpdateFeeSchedules({input:{feeSchedules:this.feeSchedules}}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}class Q1 extends ti{constructor(o,t){super("UpdateFeeScheduleAction"),this.feeSchedule=o,this.feeScheduleId=t}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.feeSchedule,!0)).addRule(new g.xF("Id","Id should be a CUID and not null",this.feeScheduleId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateFeeSchedule({feeScheduleId:this.feeScheduleId,input:this.feeSchedule}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}let jl=(()=>{class s extends W.nH{constructor(t,i,a){super("NotificationService.FeeScheduleBusinessProviderService",t,a),this.data=i}createFeeSchedule(t){const i=new G1(t);return i.Do(this),i.response}updateFeeSchedule(t,i){const a=new Q1(t,i);return a.Do(this),a.response}importFeeSchedules(t){const i=new R1(t);return i.Do(this),i.response}validateFeeScheduleExcelData(t,i,a){const l=new O1(t,i,a);return l.Do(this),l.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(K.ed),e.LFG(z.q),e.LFG(W.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),V1=(()=>{class s extends W.nH{constructor(t,i,a){super("FeeScheduleService",a,t),this.businessProvider=i}createFeeSchedule(t){const i=Object.fromEntries(Object.entries(t).filter(([a,l])=>null!==l));return this.businessProvider.createFeeSchedule(i)}updateFeeSchedule(t,i){return this.businessProvider.updateFeeSchedule(t,i)}importFeeSchedules(t){return this.businessProvider.importFeeSchedules(t)}validateFeeScheduleExcelData(t,i,a){return this.businessProvider.validateFeeScheduleExcelData(t,i,a)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(jl,8),e.LFG(jl),e.LFG(K.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),ho=(()=>{class s extends b.m1{constructor(t,i,a,l,d,ee){if(super({loading:!1,feeSchedules:[],done:!1,searchQuery:"",formName:void 0,organizationId:void 0,specialtyId:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=a,this.toast=l,this.formService=d,this.feeScheduleService=ee,this.errors$=this.select(n=>n.errors),this.loading$=this.select(n=>n.loading),this.done$=this.select(n=>n.done),this.item$=this.select(n=>n.item),this.feeSchedules$=this.select(n=>n.feeSchedules),this.organizations$=this.select(n=>n.organizations||[]),this.specialties$=this.select(n=>n.specialties||[]),this.organizationId$=this.select(n=>n.organizationId),this.specialtyId$=this.select(n=>n.specialtyId),this.paging$=this.select(n=>n.paging),this.searchQuery$=this.select(n=>n.searchQuery),this.formName$=this.select(n=>n.formName),this.actionResult$=this.select(this.item$,this.done$,(n,r)=>({item:n,done:r}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.feeSchedules$,this.organizations$,this.specialties$,(n,r,m,p,v,I,B)=>({errors:n,loading:r,item:m,formName:p,feeSchedules:v,organizations:I,specialties:B}),{debounce:!0}),this.input$=this.select(this.paging$,this.organizationId$,this.specialtyId$,this.searchQuery$,(n,r,m,p)=>({limit:n.limit,skip:n.skip,name:p,organizationId:r,specialtyId:m,total:n.total})),this.setFormName=this.updater((n,r)=>Object.assign(Object.assign({},n),{formName:r})),this.setOrganizationId=this.updater((n,r)=>Object.assign(Object.assign({},n),{organizationId:r})),this.setSpecialtyId=this.updater((n,r)=>Object.assign(Object.assign({},n),{specialtyId:r})),this.filterOrganizations=n=>this.data.userSelectOrganizations({input:{name:n}}).pipe((0,b._b)(r=>{let m=r.data.items;return this.patchState({organizations:m}),m},r=>this.patchState({errors:r.graphQLErrors?r.graphQLErrors:r})),(0,fe.U)(r=>r.data.items)),this.filterSpecialties=n=>this.data.userSelectSpecialties({input:{name:n}}).pipe((0,b._b)(r=>{let m=r.data.items;return this.patchState({specialties:m}),m},r=>this.patchState({errors:r.graphQLErrors?r.graphQLErrors:r})),(0,fe.U)(r=>r.data.items)),this.addOrganization=this.updater((n,r)=>Object.assign(Object.assign({},n),{organizations:n.organizations.concat(r)})),this.addSpecialty=this.updater((n,r)=>Object.assign(Object.assign({},n),{specialties:n.specialties.concat(r)})),this.setItem=this.updater((n,r)=>Object.assign(Object.assign({},n),{item:r})),this.addNewFeeSchedule=this.updater((n,r)=>Object.assign(Object.assign({},n),{feeSchedules:[...n.feeSchedules,r]})),this.updateFeeSchedule=this.updater((n,r)=>Object.assign(Object.assign({},n),{feeSchedules:n.feeSchedules.map(m=>m.id===r.id?r:m)})),this.addFeeSchedules=this.updater((n,r)=>Object.assign(Object.assign({},n),{feeSchedules:n.feeSchedules.concat(r)})),this.updateFeeSchedules=this.updater((n,r)=>Object.assign(Object.assign({},n),{feeSchedules:n.feeSchedules.map(m=>r.find(v=>v.id===m.id)||m)})),this.setSearchQuery=this.updater((n,r)=>Object.assign(Object.assign({},n),{searchQuery:r})),this.loadFeeScheduleEffect=this.effect(n=>n.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(r=>this.data.userFeeSchedule({feeScheduleId:r}).pipe((0,b._b)(m=>{this.patchState({item:m.data.item,errors:m.errors,loading:!1})},m=>this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})))))),this.loadFeeSchedulesEffect=this.effect(n=>n.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.input$),(0,h.w)(([r,m])=>this.data.userFeeSchedules({input:m}).pipe((0,b._b)(p=>this.patchState({paging:{limit:m.limit,skip:m.skip,total:p.data.count.total},feeSchedules:p.data.items,errors:p.errors,loading:!1}),p=>this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})))))),this.createFeeScheduleEffect=this.effect(n=>n.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(r=>this.feeScheduleService.createFeeSchedule(Object.assign({},r)).pipe((0,b._b)(m=>{this.addNewFeeSchedule(m),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:m,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},m=>{m.graphQLErrors?(this.toast.error(m.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})):(this.toast.error(m.Message),this.formService.setErrors(m.Data))}))))),this.updateFeeScheduleEffect=this.effect(n=>n.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([r,m])=>this.feeScheduleService.updateFeeSchedule(r,r.id).pipe((0,b._b)(p=>{this.updateFeeSchedule(p),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:p,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},p=>{p.graphQLErrors?(this.toast.error(p.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})):(this.toast.error(p.Message),this.formService.setErrors(p.Data))}))))),this.deleteFeeScheduleEffect=this.effect(n=>n.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([r,m])=>this.data.userDeleteFeeSchedule({feeScheduleId:m.id}).pipe((0,b._b)(p=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:p.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},p=>{p.graphQLErrors?(this.toast.error(p.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})):(this.toast.error(p.Message),this.formService.setErrors(p.Data))}))))),this.importExcelEffect=this.effect(n=>n.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(r=>this.feeScheduleService.importFeeSchedules(r).pipe((0,de.K)(m=>{var p;return this.toast.error(null!==(p=m.Message)&&void 0!==p?p:"Failed to save",{duration:3e3}),q.E}),(0,y.b)(m=>{const p=JSON.parse(m.created),v=JSON.parse(m.updated),I=JSON.parse(m.failed),B=p.length+v.length+I.length;this.addFeeSchedules(p),this.updateFeeSchedules(v),this.toast.success(`${p.length} created, ${v.length} updated, ${I.length} failed of total ${B}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("feeScheduleId")?(this.route.snapshot.paramMap.get("feeScheduleId"),this.setFormName("feeSchedule_edit")):this.setFormName("feeSchedule_create"),this.route.snapshot.paramMap.has("organizationId")){var c=this.route.snapshot.paramMap.get("organizationId");this.setOrganizationId(c)}if(this.route.snapshot.paramMap.has("specialtyId")){var u=this.route.snapshot.paramMap.get("specialtyId");this.setSpecialtyId(u)}}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.feeScheduleService.validateFeeScheduleExcelData(t,i.organizations,i.specialties)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(z.q),e.LFG(O.F0),e.LFG(O.gz),e.LFG(X.F),e.LFG(Z.o),e.LFG(V1))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function j1(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.close.emit())})("formIsReady",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.feeSchedule)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let Ul=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"feeSchedule_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.feeSchedule=i.item})):t.formName&&t.formName.currentValue&&"feeSchedule_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadFeeScheduleEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.feeSchedule=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(ho),e.Y36(O.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-fee-schedule-form"]],inputs:{feeSchedule:"feeSchedule",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,j1,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[P.O5,te.M,P.Ov],encapsulation:2}),s})(),Jl=(()=>{class s{constructor(){this.autoHeight=!1,this.feeSchedules=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[{field:"organization.name",headerName:"Organization",filter:"agTextColumnFilter"},{field:"specialty.name",headerName:"Specialty",filter:"agTextColumnFilter"},{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{field:"organizationId",filter:"agTextColumnFilter",hide:!0},{field:"specialtyId",filter:"agTextColumnFilter",hide:!0},{field:"code",filter:"agTextColumnFilter"},{field:"modifier",filter:"agTextColumnFilter"},{field:"description",filter:"agTextColumnFilter"},{headerName:"Medicare Physician Non Facility Rate",field:"medicarePhysicianNonFacilityRate",valueFormatter:t=>{var i;return(0,_.oBD)(null===(i=t.data)||void 0===i?void 0:i.medicarePhysicianNonFacilityRate,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{headerName:"Physician Non Facility Fee",field:"physicianNonFacilityFee",valueFormatter:t=>{var i;return(0,_.oBD)(null===(i=t.data)||void 0===i?void 0:i.physicianNonFacilityFee,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{headerName:"Medicare Physician Facility Rate",field:"medicarePhysicianFacilityRate",valueFormatter:t=>{var i;return(0,_.oBD)(null===(i=t.data)||void 0===i?void 0:i.medicarePhysicianFacilityRate,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{headerName:"Physician Facility Fee",field:"physicianFacilityFee",valueFormatter:t=>{var i;return(0,_.oBD)(null===(i=t.data)||void 0===i?void 0:i.physicianFacilityFee,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{field:"baseUnit",filter:"agTextColumnFilter"},{field:"profCf",filter:"agTextColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var a;t.includes(null===(a=i.data)||void 0===a?void 0:a.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-fee-schedule-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(f.x,5),2&t){let a;e.iGM(a=e.CRH())&&(i.tableView=a.first)}},inputs:{autoHeight:"autoHeight",feeSchedules:"feeSchedules"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.feeSchedules)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[f.x],encapsulation:2}),s})();function U1(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-fee-schedule-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","feeSchedule_edit")("formControl",t.formControl)("feeSchedule",t.feeSchedule)}}const J1=function(){return{}};function z1(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-fee-schedule-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","feeSchedule_create")("formControl",t.formControl)("feeSchedule",e.DdM(3,J1))}}function H1(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-fee-schedule-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(d.ref.close())}),e.qZA()}2&s&&e.Q6J("feeSchedules",o.data.items)}let q1=(()=>{class s extends G.fS{constructor(t){super(),this.store=t,this.store.loadFeeSchedulesEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.feeSchedules$.pipe((0,h.w)(i=>(0,D.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(ho))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","feeSchedule","send","close"],[1,"w-full","h-full","bg-white",3,"feeSchedules","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,U1,2,3,"ng-template",null,1,e.W1O),e.YNc(3,z1,1,4,"ng-template",null,2,e.W1O),e.YNc(5,H1,1,1,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",d)("editTemplate",a)("createTemplate",l)("key",i.field.key)}},dependencies:[E.JJ,E.oH,H.$,Ul,Jl],encapsulation:2}),s})();function K1(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-fee-schedule-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","feeSchedule_edit")("feeSchedule",t.value)}}const Z1=function(){return{}};function B1(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-fee-schedule-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","feeSchedule_create")("feeSchedule",e.DdM(2,Z1))}function k1(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-fee-schedule-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(null==d.ref?null:d.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("feeSchedules",t.items)}}let Y1=(()=>{class s extends pe{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","feeSchedule","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","feeSchedules","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,K1,1,2,"ng-template",null,1,e.W1O),e.YNc(3,B1,1,3,"ng-template",null,2,e.W1O),e.YNc(5,k1,1,2,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[he,Ul,Jl],encapsulation:2}),s})(),X1=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[ho],imports:[P.ez,U.F,E.UX,J.o,ae.u,$.P,j.t,me,k.h,se.G,G.X0.forChild({types:[{name:"fee-schedule-select",component:q1,wrappers:["form-field"]},{name:"fee-schedule-grid",component:Y1}]})]}),s})(),eM=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[X1]}),s})();class ii extends W.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class tM extends ii{constructor(o,t,i){super("ValidateFirmExcelDataAction"),this.valid=!1,this.excelData=o,this.firmStatuses=t,this.eulas=i}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name),this.validationContext.addRule(new g.mi(`firmStatusName_${i}_is_valid}`,"Firm Status Is Not Valid","firmStatus.name",t.firmStatus,this.firmStatuses,!0)),this.validationContext.addRule(new g.mi(`eulaName_${i}_is_valid}`,"Eula Is Not Valid","eula.name",t.eula,this.eulas,!0))}),this.validationContext.addRule(new g.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof g.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(a=>a.name),newNames:[i.newName]}):i instanceof g.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,D.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class iM extends g.wS{constructor(o,t,i,a,l){super(o,t,i,a,l,!0)}}class sM extends g.ul{constructor(o,t,i,a=!1){super(o,t,a),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new g.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new iM("name","The firm name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class oM extends ii{constructor(o){super("CreateFirmAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new sM("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateFirm({input:this.input}).pipe((0,h.w)(o=>(0,ue.of)(o.data.created)))}}class aM extends ii{constructor(o){super("UpdateFirmsAction"),this.firms=o}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.firms,!0))}performAction(){this.response=this.businessProvider.data.userUpdateFirms({input:{firms:this.firms}}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}class rM extends ii{constructor(o,t){super("UpdateFirmAction"),this.firm=o,this.firmId=t}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.firm,!0)).addRule(new g.xF("Id","Id should be a CUID and not null",this.firmId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateFirm({firmId:this.firmId,input:this.firm}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}let zl=(()=>{class s extends W.nH{constructor(t,i,a){super("NotificationService.FirmBusinessProviderService",t,a),this.data=i}createFirm(t){const i=new oM(t);return i.Do(this),i.response}updateFirm(t,i){const a=new rM(t,i);return a.Do(this),a.response}importFirms(t){const i=new aM(t);return i.Do(this),i.response}validateFirmExcelData(t,i,a){const l=new tM(t,i,a);return l.Do(this),l.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(K.ed),e.LFG(z.q),e.LFG(W.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),nM=(()=>{class s extends W.nH{constructor(t,i,a){super("FirmService",a,t),this.businessProvider=i}createFirm(t){var i,a,l,d,ee,V;t.firmStatusNote=(null===(i=t.firmStatusNote)||void 0===i?void 0:i.length)>1e3?null===(a=t.firmStatusNote)||void 0===a?void 0:a.substring(0,999):t.firmStatusNote,t.reductionNotes=(null===(l=t.reductionNotes)||void 0===l?void 0:l.length)>1e3?null===(d=t.reductionNotes)||void 0===d?void 0:d.substring(0,999):t.reductionNotes,t.notes=(null===(ee=t.notes)||void 0===ee?void 0:ee.length)>1e3?null===(V=t.notes)||void 0===V?void 0:V.substring(0,999):t.notes;const c=Object.fromEntries(Object.entries(t).filter(([u,n])=>null!==n));return this.businessProvider.createFirm(c)}updateFirm(t,i){var a,l,d,ee,V,c;return t.firmStatusNote=(null===(a=t.firmStatusNote)||void 0===a?void 0:a.length)>1e3?null===(l=t.firmStatusNote)||void 0===l?void 0:l.substring(0,999):t.firmStatusNote,t.reductionNotes=(null===(d=t.reductionNotes)||void 0===d?void 0:d.length)>1e3?null===(ee=t.reductionNotes)||void 0===ee?void 0:ee.substring(0,999):t.reductionNotes,t.notes=(null===(V=t.notes)||void 0===V?void 0:V.length)>1e3?null===(c=t.notes)||void 0===c?void 0:c.substring(0,999):t.notes,this.businessProvider.updateFirm(t,i)}importFirms(t){return this.businessProvider.importFirms(t)}validateFirmExcelData(t,i,a){return this.businessProvider.validateFirmExcelData(t,i,a)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(zl,8),e.LFG(zl),e.LFG(K.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),fo=(()=>{class s extends b.m1{constructor(t,i,a,l,d,ee){if(super({loading:!1,firms:[],done:!1,searchQuery:"",formName:void 0,firmStatusId:void 0,eulaId:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=a,this.toast=l,this.formService=d,this.firmService=ee,this.errors$=this.select(n=>n.errors),this.loading$=this.select(n=>n.loading),this.done$=this.select(n=>n.done),this.item$=this.select(n=>n.item),this.firms$=this.select(n=>n.firms),this.firmStatuses$=this.select(n=>n.firmStatuses||[]),this.documents$=this.select(n=>n.documents||[]),this.firmStatusId$=this.select(n=>n.firmStatusId),this.eulaId$=this.select(n=>n.eulaId),this.paging$=this.select(n=>n.paging),this.searchQuery$=this.select(n=>n.searchQuery),this.formName$=this.select(n=>n.formName),this.actionResult$=this.select(this.item$,this.done$,(n,r)=>({item:n,done:r}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.firms$,this.firmStatuses$,this.documents$,(n,r,m,p,v,I,B)=>({errors:n,loading:r,item:m,formName:p,firms:v,firmStatuses:I,documents:B}),{debounce:!0}),this.input$=this.select(this.paging$,this.firmStatusId$,this.eulaId$,this.searchQuery$,(n,r,m,p)=>({limit:n.limit,skip:n.skip,name:p,firmStatusId:r,eulaId:m,total:n.total})),this.setFormName=this.updater((n,r)=>Object.assign(Object.assign({},n),{formName:r})),this.setFirmStatusId=this.updater((n,r)=>Object.assign(Object.assign({},n),{firmStatusId:r})),this.setEulaId=this.updater((n,r)=>Object.assign(Object.assign({},n),{eulaId:r})),this.filterFirmStatuses=n=>this.data.userSelectFirmStatuses({input:{name:n}}).pipe((0,b._b)(r=>{let m=r.data.items;return this.patchState({firmStatuses:m}),m},r=>this.patchState({errors:r.graphQLErrors?r.graphQLErrors:r})),(0,fe.U)(r=>r.data.items)),this.filterDocuments=n=>this.data.userSelectDocuments({input:{name:n}}).pipe((0,b._b)(r=>{let m=r.data.items;return this.patchState({documents:m}),m},r=>this.patchState({errors:r.graphQLErrors?r.graphQLErrors:r})),(0,fe.U)(r=>r.data.items)),this.addFirmStatus=this.updater((n,r)=>Object.assign(Object.assign({},n),{firmStatuses:n.firmStatuses.concat(r)})),this.addDocument=this.updater((n,r)=>Object.assign(Object.assign({},n),{documents:n.documents.concat(r)})),this.setItem=this.updater((n,r)=>Object.assign(Object.assign({},n),{item:r})),this.addNewFirm=this.updater((n,r)=>Object.assign(Object.assign({},n),{firms:[...n.firms,r]})),this.updateFirm=this.updater((n,r)=>Object.assign(Object.assign({},n),{firms:n.firms.map(m=>m.id===r.id?r:m)})),this.addFirms=this.updater((n,r)=>Object.assign(Object.assign({},n),{firms:n.firms.concat(r)})),this.updateFirms=this.updater((n,r)=>Object.assign(Object.assign({},n),{firms:n.firms.map(m=>r.find(v=>v.id===m.id)||m)})),this.setSearchQuery=this.updater((n,r)=>Object.assign(Object.assign({},n),{searchQuery:r})),this.loadFirmEffect=this.effect(n=>n.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(r=>this.data.userFirm({firmId:r}).pipe((0,b._b)(m=>{this.patchState({item:m.data.item,errors:m.errors,loading:!1})},m=>this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})))))),this.loadFirmsEffect=this.effect(n=>n.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.input$),(0,h.w)(([r,m])=>this.data.userFirms({input:m}).pipe((0,b._b)(p=>this.patchState({paging:{limit:m.limit,skip:m.skip,total:p.data.count.total},firms:p.data.items,errors:p.errors,loading:!1}),p=>this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})))))),this.createFirmEffect=this.effect(n=>n.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(r=>this.firmService.createFirm(Object.assign({},r)).pipe((0,b._b)(m=>{this.addNewFirm(m),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:m,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},m=>{m.graphQLErrors?(this.toast.error(m.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})):(this.toast.error(m.Message),this.formService.setErrors(m.Data))}))))),this.updateFirmEffect=this.effect(n=>n.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([r,m])=>this.firmService.updateFirm(r,r.id).pipe((0,b._b)(p=>{this.updateFirm(p),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:p,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},p=>{p.graphQLErrors?(this.toast.error(p.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})):(this.toast.error(p.Message),this.formService.setErrors(p.Data))}))))),this.deleteFirmEffect=this.effect(n=>n.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([r,m])=>this.data.userDeleteFirm({firmId:m.id}).pipe((0,b._b)(p=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:p.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},p=>{p.graphQLErrors?(this.toast.error(p.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})):(this.toast.error(p.Message),this.formService.setErrors(p.Data))}))))),this.importExcelEffect=this.effect(n=>n.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(r=>this.firmService.importFirms(r).pipe((0,de.K)(m=>{var p;return this.toast.error(null!==(p=m.Message)&&void 0!==p?p:"Failed to save",{duration:3e3}),q.E}),(0,y.b)(m=>{const p=JSON.parse(m.created),v=JSON.parse(m.updated),I=JSON.parse(m.failed),B=p.length+v.length+I.length;this.addFirms(p),this.updateFirms(v),this.toast.success(`${p.length} created, ${v.length} updated, ${I.length} failed of total ${B}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("firmId")?(this.route.snapshot.paramMap.get("firmId"),this.setFormName("firm_edit")):this.setFormName("firm_create"),this.route.snapshot.paramMap.has("firmStatusId")){var c=this.route.snapshot.paramMap.get("firmStatusId");this.setFirmStatusId(c)}if(this.route.snapshot.paramMap.has("eulaId")){var u=this.route.snapshot.paramMap.get("eulaId");this.setEulaId(u)}}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.firmService.validateFirmExcelData(t,i.firmStatuses,i.documents)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(z.q),e.LFG(O.F0),e.LFG(O.gz),e.LFG(X.F),e.LFG(Z.o),e.LFG(nM))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function lM(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.close.emit())})("formIsReady",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.firm)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let Hl=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"firm_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.firm=i.item})):t.formName&&t.formName.currentValue&&"firm_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadFirmEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.firm=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(fo),e.Y36(O.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-firm-form"]],inputs:{firm:"firm",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,lM,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[P.O5,te.M,P.Ov],encapsulation:2}),s})(),ql=(()=>{class s{constructor(){this.autoHeight=!1,this.firms=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[{field:"firmStatus.name",headerName:"Firm Status",filter:"agTextColumnFilter"},{field:"eula.name",headerName:"Eula",filter:"agTextColumnFilter"},{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{field:"firmStatusNote",filter:"agTextColumnFilter"},{field:"firmStatusId",filter:"agTextColumnFilter",hide:!0},{field:"firmName",filter:"agTextColumnFilter"},{field:"address",filter:"agTextColumnFilter"},{field:"address2",filter:"agTextColumnFilter"},{field:"city",filter:"agTextColumnFilter"},{field:"state",filter:"agTextColumnFilter"},{field:"zip",filter:"agTextColumnFilter"},{field:"country",filter:"agTextColumnFilter"},{field:"office",filter:"agTextColumnFilter"},{field:"fax",filter:"agTextColumnFilter"},{field:"webAddress",filter:"agTextColumnFilter"},{field:"email",filter:"agTextColumnFilter"},{headerName:"Rating",field:"rating",valueFormatter:t=>{var i;return(0,_.oBD)(null===(i=t.data)||void 0===i?void 0:i.rating,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{field:"notes",filter:"agTextColumnFilter"},{headerName:"Do Not Disturb",field:"doNotDisturb",filter:"agSetColumnFilter",cellRenderer:"checkboxRenderer"},{headerName:"Invoice Only",field:"invoiceOnly",filter:"agSetColumnFilter",cellRenderer:"checkboxRenderer"},{field:"reductionNotes",filter:"agTextColumnFilter"},{headerName:"Deceased",field:"deceased",filter:"agSetColumnFilter",cellRenderer:"checkboxRenderer"},{field:"createdBy",filter:"agTextColumnFilter"},{field:"dateCreated",filter:"agDateColumnFilter"},{field:"eulaId",filter:"agTextColumnFilter",hide:!0}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var a;t.includes(null===(a=i.data)||void 0===a?void 0:a.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-firm-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(f.x,5),2&t){let a;e.iGM(a=e.CRH())&&(i.tableView=a.first)}},inputs:{autoHeight:"autoHeight",firms:"firms"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.firms)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[f.x],encapsulation:2}),s})();function cM(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-firm-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","firm_edit")("formControl",t.formControl)("firm",t.firm)}}const dM=function(){return{}};function uM(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-firm-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","firm_create")("formControl",t.formControl)("firm",e.DdM(3,dM))}}function mM(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-firm-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(d.ref.close())}),e.qZA()}2&s&&e.Q6J("firms",o.data.items)}let pM=(()=>{class s extends G.fS{constructor(t){super(),this.store=t,this.store.loadFirmsEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.firms$.pipe((0,h.w)(i=>(0,D.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(fo))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","firm","send","close"],[1,"w-full","h-full","bg-white",3,"firms","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,cM,2,3,"ng-template",null,1,e.W1O),e.YNc(3,uM,1,4,"ng-template",null,2,e.W1O),e.YNc(5,mM,1,1,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",d)("editTemplate",a)("createTemplate",l)("key",i.field.key)}},dependencies:[E.JJ,E.oH,H.$,Hl,ql],encapsulation:2}),s})();function hM(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-firm-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","firm_edit")("firm",t.value)}}const fM=function(){return{}};function _M(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-firm-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","firm_create")("firm",e.DdM(2,fM))}function gM(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-firm-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(null==d.ref?null:d.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("firms",t.items)}}let vM=(()=>{class s extends pe{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","firm","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","firms","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,hM,1,2,"ng-template",null,1,e.W1O),e.YNc(3,_M,1,3,"ng-template",null,2,e.W1O),e.YNc(5,gM,1,2,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[he,Hl,ql],encapsulation:2}),s})(),CM=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[fo],imports:[P.ez,U.F,E.UX,J.o,ae.u,$.P,j.t,me,k.h,se.G,G.X0.forChild({types:[{name:"firm-select",component:pM,wrappers:["form-field"]},{name:"firm-grid",component:vM}]})]}),s})(),SM=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[CM]}),s})();class si extends W.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class bM extends si{constructor(o){super("ValidateFirmStatusExcelDataAction"),this.valid=!1,this.excelData=o}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name)}),this.validationContext.addRule(new g.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof g.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(a=>a.name),newNames:[i.newName]}):i instanceof g.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,D.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class TM extends g.wS{constructor(o,t,i,a,l){super(o,t,i,a,l,!0)}}class yM extends g.ul{constructor(o,t,i,a=!1){super(o,t,a),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new g.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new TM("name","The firmstatus name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class wM extends si{constructor(o){super("CreateFirmStatusAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new yM("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateFirmStatus({input:this.input}).pipe((0,h.w)(o=>(0,ue.of)(o.data.created)))}}class xM extends si{constructor(o){super("UpdateFirmStatusesAction"),this.firmStatuses=o}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.firmStatuses,!0))}performAction(){this.response=this.businessProvider.data.userUpdateFirmStatuses({input:{firmStatuses:this.firmStatuses}}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}class NM extends si{constructor(o,t){super("UpdateFirmStatusAction"),this.firmStatus=o,this.firmStatusId=t}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.firmStatus,!0)).addRule(new g.xF("Id","Id should be a CUID and not null",this.firmStatusId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateFirmStatus({firmStatusId:this.firmStatusId,input:this.firmStatus}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}let Kl=(()=>{class s extends W.nH{constructor(t,i,a){super("NotificationService.FirmStatusBusinessProviderService",t,a),this.data=i}createFirmStatus(t){const i=new wM(t);return i.Do(this),i.response}updateFirmStatus(t,i){const a=new NM(t,i);return a.Do(this),a.response}importFirmStatuses(t){const i=new xM(t);return i.Do(this),i.response}validateFirmStatusExcelData(t){const i=new bM(t);return i.Do(this),i.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(K.ed),e.LFG(z.q),e.LFG(W.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),AM=(()=>{class s extends W.nH{constructor(t,i,a){super("FirmStatusService",a,t),this.businessProvider=i}createFirmStatus(t){var i,a;t.name=(null===(i=t.name)||void 0===i?void 0:i.length)>256?null===(a=t.name)||void 0===a?void 0:a.substring(0,255):t.name;const l=Object.fromEntries(Object.entries(t).filter(([d,ee])=>null!==ee));return this.businessProvider.createFirmStatus(l)}updateFirmStatus(t,i){var a,l;return t.name=(null===(a=t.name)||void 0===a?void 0:a.length)>256?null===(l=t.name)||void 0===l?void 0:l.substring(0,255):t.name,this.businessProvider.updateFirmStatus(t,i)}importFirmStatuses(t){return this.businessProvider.importFirmStatuses(t)}validateFirmStatusExcelData(t){return this.businessProvider.validateFirmStatusExcelData(t)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(Kl,8),e.LFG(Kl),e.LFG(K.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),_o=(()=>{class s extends b.m1{constructor(t,i,a,l,d,ee){super({loading:!1,firmStatuses:[],done:!1,searchQuery:"",formName:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=a,this.toast=l,this.formService=d,this.firmStatusService=ee,this.errors$=this.select(c=>c.errors),this.loading$=this.select(c=>c.loading),this.done$=this.select(c=>c.done),this.item$=this.select(c=>c.item),this.firmStatuses$=this.select(c=>c.firmStatuses),this.paging$=this.select(c=>c.paging),this.searchQuery$=this.select(c=>c.searchQuery),this.formName$=this.select(c=>c.formName),this.actionResult$=this.select(this.item$,this.done$,(c,u)=>({item:c,done:u}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.firmStatuses$,(c,u,n,r,m)=>({errors:c,loading:u,item:n,formName:r,firmStatuses:m}),{debounce:!0}),this.input$=this.select(this.paging$,this.searchQuery$,(c,u)=>({limit:c.limit,skip:c.skip,name:u,total:c.total})),this.setFormName=this.updater((c,u)=>Object.assign(Object.assign({},c),{formName:u})),this.setItem=this.updater((c,u)=>Object.assign(Object.assign({},c),{item:u})),this.addNewFirmStatus=this.updater((c,u)=>Object.assign(Object.assign({},c),{firmStatuses:[...c.firmStatuses,u]})),this.updateFirmStatus=this.updater((c,u)=>Object.assign(Object.assign({},c),{firmStatuses:c.firmStatuses.map(n=>n.id===u.id?u:n)})),this.addFirmStatuses=this.updater((c,u)=>Object.assign(Object.assign({},c),{firmStatuses:c.firmStatuses.concat(u)})),this.updateFirmStatuses=this.updater((c,u)=>Object.assign(Object.assign({},c),{firmStatuses:c.firmStatuses.map(n=>u.find(m=>m.id===n.id)||n)})),this.setSearchQuery=this.updater((c,u)=>Object.assign(Object.assign({},c),{searchQuery:u})),this.loadFirmStatusEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.data.userFirmStatus({firmStatusId:u}).pipe((0,b._b)(n=>{this.patchState({item:n.data.item,errors:n.errors,loading:!1})},n=>this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})))))),this.loadFirmStatusesEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.input$),(0,h.w)(([u,n])=>this.data.userFirmStatuses({input:n}).pipe((0,b._b)(r=>this.patchState({paging:{limit:n.limit,skip:n.skip,total:r.data.count.total},firmStatuses:r.data.items,errors:r.errors,loading:!1}),r=>this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})))))),this.createFirmStatusEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.firmStatusService.createFirmStatus(Object.assign({},u)).pipe((0,b._b)(n=>{this.addNewFirmStatus(n),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:n,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},n=>{n.graphQLErrors?(this.toast.error(n.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})):(this.toast.error(n.Message),this.formService.setErrors(n.Data))}))))),this.updateFirmStatusEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([u,n])=>this.firmStatusService.updateFirmStatus(u,u.id).pipe((0,b._b)(r=>{this.updateFirmStatus(r),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:r,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},r=>{r.graphQLErrors?(this.toast.error(r.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})):(this.toast.error(r.Message),this.formService.setErrors(r.Data))}))))),this.deleteFirmStatusEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([u,n])=>this.data.userDeleteFirmStatus({firmStatusId:n.id}).pipe((0,b._b)(r=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:r.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},r=>{r.graphQLErrors?(this.toast.error(r.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})):(this.toast.error(r.Message),this.formService.setErrors(r.Data))}))))),this.importExcelEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.firmStatusService.importFirmStatuses(u).pipe((0,de.K)(n=>{var r;return this.toast.error(null!==(r=n.Message)&&void 0!==r?r:"Failed to save",{duration:3e3}),q.E}),(0,y.b)(n=>{const r=JSON.parse(n.created),m=JSON.parse(n.updated),p=JSON.parse(n.failed),v=r.length+m.length+p.length;this.addFirmStatuses(r),this.updateFirmStatuses(m),this.toast.success(`${r.length} created, ${m.length} updated, ${p.length} failed of total ${v}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("firmStatusId")?(this.route.snapshot.paramMap.get("firmStatusId"),this.setFormName("firmStatus_edit")):this.setFormName("firmStatus_create")}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.firmStatusService.validateFirmStatusExcelData(t)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(z.q),e.LFG(O.F0),e.LFG(O.gz),e.LFG(X.F),e.LFG(Z.o),e.LFG(AM))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function FM(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.close.emit())})("formIsReady",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.firmStatus)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let Zl=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"firmStatus_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.firmStatus=i.item})):t.formName&&t.formName.currentValue&&"firmStatus_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadFirmStatusEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.firmStatus=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(_o),e.Y36(O.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-firm-status-form"]],inputs:{firmStatus:"firmStatus",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,FM,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[P.O5,te.M,P.Ov],encapsulation:2}),s})(),Bl=(()=>{class s{constructor(){this.autoHeight=!1,this.firmStatuses=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[,{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{headerName:"Black Listed",field:"blackListed",filter:"agSetColumnFilter",cellRenderer:"checkboxRenderer"},{headerName:"Active",field:"active",filter:"agSetColumnFilter",cellRenderer:"checkboxRenderer"},{field:"statusColor",filter:"agTextColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var a;t.includes(null===(a=i.data)||void 0===a?void 0:a.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-firm-status-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(f.x,5),2&t){let a;e.iGM(a=e.CRH())&&(i.tableView=a.first)}},inputs:{autoHeight:"autoHeight",firmStatuses:"firmStatuses"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.firmStatuses)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[f.x],encapsulation:2}),s})();function PM(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-firm-status-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","firmStatus_edit")("formControl",t.formControl)("firmStatus",t.firmStatus)}}const IM=function(){return{}};function DM(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-firm-status-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","firmStatus_create")("formControl",t.formControl)("firmStatus",e.DdM(3,IM))}}function MM(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-firm-status-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(d.ref.close())}),e.qZA()}2&s&&e.Q6J("firmStatuses",o.data.items)}let WM=(()=>{class s extends G.fS{constructor(t){super(),this.store=t,this.store.loadFirmStatusesEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.firmStatuses$.pipe((0,h.w)(i=>(0,D.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(_o))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","firmStatus","send","close"],[1,"w-full","h-full","bg-white",3,"firmStatuses","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,PM,2,3,"ng-template",null,1,e.W1O),e.YNc(3,DM,1,4,"ng-template",null,2,e.W1O),e.YNc(5,MM,1,1,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",d)("editTemplate",a)("createTemplate",l)("key",i.field.key)}},dependencies:[E.JJ,E.oH,H.$,Zl,Bl],encapsulation:2}),s})();function EM(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-firm-status-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","firmStatus_edit")("firmStatus",t.value)}}const OM=function(){return{}};function LM(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-firm-status-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","firmStatus_create")("firmStatus",e.DdM(2,OM))}function $M(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-firm-status-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(null==d.ref?null:d.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("firmStatuses",t.items)}}let GM=(()=>{class s extends pe{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","firmStatus","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","firmStatuses","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,EM,1,2,"ng-template",null,1,e.W1O),e.YNc(3,LM,1,3,"ng-template",null,2,e.W1O),e.YNc(5,$M,1,2,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[he,Zl,Bl],encapsulation:2}),s})(),RM=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[_o],imports:[P.ez,U.F,E.UX,J.o,ae.u,$.P,j.t,me,k.h,se.G,G.X0.forChild({types:[{name:"firm-status-select",component:WM,wrappers:["form-field"]},{name:"firm-status-grid",component:GM}]})]}),s})(),QM=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[RM]}),s})();var go=M(28816);function VM(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.close.emit())})("formIsReady",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.gender)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let kl=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"gender_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.gender=i.item})):t.formName&&t.formName.currentValue&&"gender_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadGenderEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.gender=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(go._),e.Y36(O.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-gender-form"]],inputs:{gender:"gender",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,VM,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[P.O5,te.M,P.Ov],encapsulation:2}),s})(),Yl=(()=>{class s{constructor(){this.autoHeight=!1,this.genders=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[,{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{field:"code",filter:"agTextColumnFilter"},{headerName:"Value",field:"value",valueFormatter:t=>{var i;return(0,_.oBD)(null===(i=t.data)||void 0===i?void 0:i.value,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var a;t.includes(null===(a=i.data)||void 0===a?void 0:a.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-gender-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(f.x,5),2&t){let a;e.iGM(a=e.CRH())&&(i.tableView=a.first)}},inputs:{autoHeight:"autoHeight",genders:"genders"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.genders)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[f.x],encapsulation:2}),s})();function jM(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-gender-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","gender_edit")("formControl",t.formControl)("gender",t.gender)}}const UM=function(){return{}};function JM(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-gender-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","gender_create")("formControl",t.formControl)("gender",e.DdM(3,UM))}}function zM(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-gender-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(d.ref.close())}),e.qZA()}2&s&&e.Q6J("genders",o.data.items)}let HM=(()=>{class s extends G.fS{constructor(t){super(),this.store=t,this.store.loadGendersEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.genders$.pipe((0,h.w)(i=>(0,D.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(go._))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","gender","send","close"],[1,"w-full","h-full","bg-white",3,"genders","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,jM,2,3,"ng-template",null,1,e.W1O),e.YNc(3,JM,1,4,"ng-template",null,2,e.W1O),e.YNc(5,zM,1,1,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",d)("editTemplate",a)("createTemplate",l)("key",i.field.key)}},dependencies:[E.JJ,E.oH,H.$,kl,Yl],encapsulation:2}),s})();function qM(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-gender-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","gender_edit")("gender",t.value)}}const KM=function(){return{}};function ZM(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-gender-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","gender_create")("gender",e.DdM(2,KM))}function BM(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-gender-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(null==d.ref?null:d.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("genders",t.items)}}let kM=(()=>{class s extends pe{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","gender","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","genders","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,qM,1,2,"ng-template",null,1,e.W1O),e.YNc(3,ZM,1,3,"ng-template",null,2,e.W1O),e.YNc(5,BM,1,2,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[he,kl,Yl],encapsulation:2}),s})(),YM=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[go._],imports:[P.ez,U.F,E.UX,J.o,ae.u,$.P,j.t,me,k.h,se.G,G.X0.forChild({types:[{name:"gender-select",component:HM,wrappers:["form-field"]},{name:"gender-grid",component:kM}]})]}),s})(),XM=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[YM]}),s})();class oi extends W.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class eW extends oi{constructor(o){super("ValidateGuidelineExcelDataAction"),this.valid=!1,this.excelData=o}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name)}),this.validationContext.addRule(new g.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof g.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(a=>a.name),newNames:[i.newName]}):i instanceof g.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,D.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class tW extends g.wS{constructor(o,t,i,a,l){super(o,t,i,a,l,!0)}}class iW extends g.ul{constructor(o,t,i,a=!1){super(o,t,a),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new g.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new tW("name","The guideline name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class sW extends oi{constructor(o){super("CreateGuidelineAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new iW("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateGuideline({input:this.input}).pipe((0,h.w)(o=>(0,ue.of)(o.data.created)))}}class oW extends oi{constructor(o){super("UpdateGuidelinesAction"),this.guidelines=o}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.guidelines,!0))}performAction(){this.response=this.businessProvider.data.userUpdateGuidelines({input:{guidelines:this.guidelines}}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}class aW extends oi{constructor(o,t){super("UpdateGuidelineAction"),this.guideline=o,this.guidelineId=t}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.guideline,!0)).addRule(new g.xF("Id","Id should be a CUID and not null",this.guidelineId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateGuideline({guidelineId:this.guidelineId,input:this.guideline}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}let Xl=(()=>{class s extends W.nH{constructor(t,i,a){super("NotificationService.GuidelineBusinessProviderService",t,a),this.data=i}createGuideline(t){const i=new sW(t);return i.Do(this),i.response}updateGuideline(t,i){const a=new aW(t,i);return a.Do(this),a.response}importGuidelines(t){const i=new oW(t);return i.Do(this),i.response}validateGuidelineExcelData(t){const i=new eW(t);return i.Do(this),i.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(K.ed),e.LFG(z.q),e.LFG(W.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),rW=(()=>{class s extends W.nH{constructor(t,i,a){super("GuidelineService",a,t),this.businessProvider=i}createGuideline(t){const i=Object.fromEntries(Object.entries(t).filter(([a,l])=>null!==l));return this.businessProvider.createGuideline(i)}updateGuideline(t,i){return this.businessProvider.updateGuideline(t,i)}importGuidelines(t){return this.businessProvider.importGuidelines(t)}validateGuidelineExcelData(t){return this.businessProvider.validateGuidelineExcelData(t)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(Xl,8),e.LFG(Xl),e.LFG(K.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),vo=(()=>{class s extends b.m1{constructor(t,i,a,l,d,ee){super({loading:!1,guidelines:[],done:!1,searchQuery:"",formName:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=a,this.toast=l,this.formService=d,this.guidelineService=ee,this.errors$=this.select(c=>c.errors),this.loading$=this.select(c=>c.loading),this.done$=this.select(c=>c.done),this.item$=this.select(c=>c.item),this.guidelines$=this.select(c=>c.guidelines),this.paging$=this.select(c=>c.paging),this.searchQuery$=this.select(c=>c.searchQuery),this.formName$=this.select(c=>c.formName),this.actionResult$=this.select(this.item$,this.done$,(c,u)=>({item:c,done:u}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.guidelines$,(c,u,n,r,m)=>({errors:c,loading:u,item:n,formName:r,guidelines:m}),{debounce:!0}),this.input$=this.select(this.paging$,this.searchQuery$,(c,u)=>({limit:c.limit,skip:c.skip,name:u,total:c.total})),this.setFormName=this.updater((c,u)=>Object.assign(Object.assign({},c),{formName:u})),this.setItem=this.updater((c,u)=>Object.assign(Object.assign({},c),{item:u})),this.addNewGuideline=this.updater((c,u)=>Object.assign(Object.assign({},c),{guidelines:[...c.guidelines,u]})),this.updateGuideline=this.updater((c,u)=>Object.assign(Object.assign({},c),{guidelines:c.guidelines.map(n=>n.id===u.id?u:n)})),this.addGuidelines=this.updater((c,u)=>Object.assign(Object.assign({},c),{guidelines:c.guidelines.concat(u)})),this.updateGuidelines=this.updater((c,u)=>Object.assign(Object.assign({},c),{guidelines:c.guidelines.map(n=>u.find(m=>m.id===n.id)||n)})),this.setSearchQuery=this.updater((c,u)=>Object.assign(Object.assign({},c),{searchQuery:u})),this.loadGuidelineEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.data.userGuideline({guidelineId:u}).pipe((0,b._b)(n=>{this.patchState({item:n.data.item,errors:n.errors,loading:!1})},n=>this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})))))),this.loadGuidelinesEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.input$),(0,h.w)(([u,n])=>this.data.userGuidelines({input:n}).pipe((0,b._b)(r=>this.patchState({paging:{limit:n.limit,skip:n.skip,total:r.data.count.total},guidelines:r.data.items,errors:r.errors,loading:!1}),r=>this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})))))),this.createGuidelineEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.guidelineService.createGuideline(Object.assign({},u)).pipe((0,b._b)(n=>{this.addNewGuideline(n),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:n,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},n=>{n.graphQLErrors?(this.toast.error(n.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})):(this.toast.error(n.Message),this.formService.setErrors(n.Data))}))))),this.updateGuidelineEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([u,n])=>this.guidelineService.updateGuideline(u,u.id).pipe((0,b._b)(r=>{this.updateGuideline(r),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:r,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},r=>{r.graphQLErrors?(this.toast.error(r.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})):(this.toast.error(r.Message),this.formService.setErrors(r.Data))}))))),this.deleteGuidelineEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([u,n])=>this.data.userDeleteGuideline({guidelineId:n.id}).pipe((0,b._b)(r=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:r.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},r=>{r.graphQLErrors?(this.toast.error(r.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})):(this.toast.error(r.Message),this.formService.setErrors(r.Data))}))))),this.importExcelEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.guidelineService.importGuidelines(u).pipe((0,de.K)(n=>{var r;return this.toast.error(null!==(r=n.Message)&&void 0!==r?r:"Failed to save",{duration:3e3}),q.E}),(0,y.b)(n=>{const r=JSON.parse(n.created),m=JSON.parse(n.updated),p=JSON.parse(n.failed),v=r.length+m.length+p.length;this.addGuidelines(r),this.updateGuidelines(m),this.toast.success(`${r.length} created, ${m.length} updated, ${p.length} failed of total ${v}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("guidelineId")?(this.route.snapshot.paramMap.get("guidelineId"),this.setFormName("guideline_edit")):this.setFormName("guideline_create")}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.guidelineService.validateGuidelineExcelData(t)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(z.q),e.LFG(O.F0),e.LFG(O.gz),e.LFG(X.F),e.LFG(Z.o),e.LFG(rW))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function nW(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.close.emit())})("formIsReady",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.guideline)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let ec=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"guideline_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.guideline=i.item})):t.formName&&t.formName.currentValue&&"guideline_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadGuidelineEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.guideline=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(vo),e.Y36(O.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-guideline-form"]],inputs:{guideline:"guideline",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,nW,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[P.O5,te.M,P.Ov],encapsulation:2}),s})(),tc=(()=>{class s{constructor(){this.autoHeight=!1,this.guidelines=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[,{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var a;t.includes(null===(a=i.data)||void 0===a?void 0:a.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-guideline-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(f.x,5),2&t){let a;e.iGM(a=e.CRH())&&(i.tableView=a.first)}},inputs:{autoHeight:"autoHeight",guidelines:"guidelines"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.guidelines)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[f.x],encapsulation:2}),s})();function lW(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-guideline-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","guideline_edit")("formControl",t.formControl)("guideline",t.guideline)}}const cW=function(){return{}};function dW(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-guideline-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","guideline_create")("formControl",t.formControl)("guideline",e.DdM(3,cW))}}function uW(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-guideline-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(d.ref.close())}),e.qZA()}2&s&&e.Q6J("guidelines",o.data.items)}let mW=(()=>{class s extends G.fS{constructor(t){super(),this.store=t,this.store.loadGuidelinesEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.guidelines$.pipe((0,h.w)(i=>(0,D.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(vo))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","guideline","send","close"],[1,"w-full","h-full","bg-white",3,"guidelines","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,lW,2,3,"ng-template",null,1,e.W1O),e.YNc(3,dW,1,4,"ng-template",null,2,e.W1O),e.YNc(5,uW,1,1,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",d)("editTemplate",a)("createTemplate",l)("key",i.field.key)}},dependencies:[E.JJ,E.oH,H.$,ec,tc],encapsulation:2}),s})();function pW(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-guideline-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","guideline_edit")("guideline",t.value)}}const hW=function(){return{}};function fW(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-guideline-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","guideline_create")("guideline",e.DdM(2,hW))}function _W(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-guideline-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(null==d.ref?null:d.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("guidelines",t.items)}}let gW=(()=>{class s extends pe{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","guideline","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","guidelines","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,pW,1,2,"ng-template",null,1,e.W1O),e.YNc(3,fW,1,3,"ng-template",null,2,e.W1O),e.YNc(5,_W,1,2,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[he,ec,tc],encapsulation:2}),s})(),vW=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[vo],imports:[P.ez,U.F,E.UX,J.o,ae.u,$.P,j.t,me,k.h,se.G,G.X0.forChild({types:[{name:"guideline-select",component:mW,wrappers:["form-field"]},{name:"guideline-grid",component:gW}]})]}),s})(),CW=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[vW]}),s})();class ai extends W.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class SW extends ai{constructor(o){super("ValidateGuidelineUsedExcelDataAction"),this.valid=!1,this.excelData=o}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name)}),this.validationContext.addRule(new g.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof g.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(a=>a.name),newNames:[i.newName]}):i instanceof g.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,D.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class bW extends g.wS{constructor(o,t,i,a,l){super(o,t,i,a,l,!0)}}class TW extends g.ul{constructor(o,t,i,a=!1){super(o,t,a),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new g.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new bW("name","The guidelineused name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class yW extends ai{constructor(o){super("CreateGuidelineUsedAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new TW("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateGuidelineUsed({input:this.input}).pipe((0,h.w)(o=>(0,ue.of)(o.data.created)))}}class wW extends ai{constructor(o){super("UpdateGuidelineUsedsAction"),this.guidelineUseds=o}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.guidelineUseds,!0))}performAction(){this.response=this.businessProvider.data.userUpdateGuidelineUseds({input:{guidelineUseds:this.guidelineUseds}}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}class xW extends ai{constructor(o,t){super("UpdateGuidelineUsedAction"),this.guidelineUsed=o,this.guidelineUsedId=t}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.guidelineUsed,!0)).addRule(new g.xF("Id","Id should be a CUID and not null",this.guidelineUsedId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateGuidelineUsed({guidelineUsedId:this.guidelineUsedId,input:this.guidelineUsed}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}let ic=(()=>{class s extends W.nH{constructor(t,i,a){super("NotificationService.GuidelineUsedBusinessProviderService",t,a),this.data=i}createGuidelineUsed(t){const i=new yW(t);return i.Do(this),i.response}updateGuidelineUsed(t,i){const a=new xW(t,i);return a.Do(this),a.response}importGuidelineUseds(t){const i=new wW(t);return i.Do(this),i.response}validateGuidelineUsedExcelData(t){const i=new SW(t);return i.Do(this),i.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(K.ed),e.LFG(z.q),e.LFG(W.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),NW=(()=>{class s extends W.nH{constructor(t,i,a){super("GuidelineUsedService",a,t),this.businessProvider=i}createGuidelineUsed(t){const i=Object.fromEntries(Object.entries(t).filter(([a,l])=>null!==l));return this.businessProvider.createGuidelineUsed(i)}updateGuidelineUsed(t,i){return this.businessProvider.updateGuidelineUsed(t,i)}importGuidelineUseds(t){return this.businessProvider.importGuidelineUseds(t)}validateGuidelineUsedExcelData(t){return this.businessProvider.validateGuidelineUsedExcelData(t)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(ic,8),e.LFG(ic),e.LFG(K.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),Co=(()=>{class s extends b.m1{constructor(t,i,a,l,d,ee){super({loading:!1,guidelineUseds:[],done:!1,searchQuery:"",formName:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=a,this.toast=l,this.formService=d,this.guidelineUsedService=ee,this.errors$=this.select(c=>c.errors),this.loading$=this.select(c=>c.loading),this.done$=this.select(c=>c.done),this.item$=this.select(c=>c.item),this.guidelineUseds$=this.select(c=>c.guidelineUseds),this.paging$=this.select(c=>c.paging),this.searchQuery$=this.select(c=>c.searchQuery),this.formName$=this.select(c=>c.formName),this.actionResult$=this.select(this.item$,this.done$,(c,u)=>({item:c,done:u}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.guidelineUseds$,(c,u,n,r,m)=>({errors:c,loading:u,item:n,formName:r,guidelineUseds:m}),{debounce:!0}),this.input$=this.select(this.paging$,this.searchQuery$,(c,u)=>({limit:c.limit,skip:c.skip,name:u,total:c.total})),this.setFormName=this.updater((c,u)=>Object.assign(Object.assign({},c),{formName:u})),this.setItem=this.updater((c,u)=>Object.assign(Object.assign({},c),{item:u})),this.addNewGuidelineUsed=this.updater((c,u)=>Object.assign(Object.assign({},c),{guidelineUseds:[...c.guidelineUseds,u]})),this.updateGuidelineUsed=this.updater((c,u)=>Object.assign(Object.assign({},c),{guidelineUseds:c.guidelineUseds.map(n=>n.id===u.id?u:n)})),this.addGuidelineUseds=this.updater((c,u)=>Object.assign(Object.assign({},c),{guidelineUseds:c.guidelineUseds.concat(u)})),this.updateGuidelineUseds=this.updater((c,u)=>Object.assign(Object.assign({},c),{guidelineUseds:c.guidelineUseds.map(n=>u.find(m=>m.id===n.id)||n)})),this.setSearchQuery=this.updater((c,u)=>Object.assign(Object.assign({},c),{searchQuery:u})),this.loadGuidelineUsedEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.data.userGuidelineUsed({guidelineUsedId:u}).pipe((0,b._b)(n=>{this.patchState({item:n.data.item,errors:n.errors,loading:!1})},n=>this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})))))),this.loadGuidelineUsedsEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.input$),(0,h.w)(([u,n])=>this.data.userGuidelineUseds({input:n}).pipe((0,b._b)(r=>this.patchState({paging:{limit:n.limit,skip:n.skip,total:r.data.count.total},guidelineUseds:r.data.items,errors:r.errors,loading:!1}),r=>this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})))))),this.createGuidelineUsedEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.guidelineUsedService.createGuidelineUsed(Object.assign({},u)).pipe((0,b._b)(n=>{this.addNewGuidelineUsed(n),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:n,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},n=>{n.graphQLErrors?(this.toast.error(n.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})):(this.toast.error(n.Message),this.formService.setErrors(n.Data))}))))),this.updateGuidelineUsedEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([u,n])=>this.guidelineUsedService.updateGuidelineUsed(u,u.id).pipe((0,b._b)(r=>{this.updateGuidelineUsed(r),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:r,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},r=>{r.graphQLErrors?(this.toast.error(r.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})):(this.toast.error(r.Message),this.formService.setErrors(r.Data))}))))),this.deleteGuidelineUsedEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([u,n])=>this.data.userDeleteGuidelineUsed({guidelineUsedId:n.id}).pipe((0,b._b)(r=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:r.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},r=>{r.graphQLErrors?(this.toast.error(r.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})):(this.toast.error(r.Message),this.formService.setErrors(r.Data))}))))),this.importExcelEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.guidelineUsedService.importGuidelineUseds(u).pipe((0,de.K)(n=>{var r;return this.toast.error(null!==(r=n.Message)&&void 0!==r?r:"Failed to save",{duration:3e3}),q.E}),(0,y.b)(n=>{const r=JSON.parse(n.created),m=JSON.parse(n.updated),p=JSON.parse(n.failed),v=r.length+m.length+p.length;this.addGuidelineUseds(r),this.updateGuidelineUseds(m),this.toast.success(`${r.length} created, ${m.length} updated, ${p.length} failed of total ${v}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("guidelineUsedId")?(this.route.snapshot.paramMap.get("guidelineUsedId"),this.setFormName("guidelineUsed_edit")):this.setFormName("guidelineUsed_create")}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.guidelineUsedService.validateGuidelineUsedExcelData(t)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(z.q),e.LFG(O.F0),e.LFG(O.gz),e.LFG(X.F),e.LFG(Z.o),e.LFG(NW))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function AW(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.close.emit())})("formIsReady",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.guidelineUsed)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let sc=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"guidelineUsed_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.guidelineUsed=i.item})):t.formName&&t.formName.currentValue&&"guidelineUsed_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadGuidelineUsedEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.guidelineUsed=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Co),e.Y36(O.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-guideline-used-form"]],inputs:{guidelineUsed:"guidelineUsed",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,AW,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[P.O5,te.M,P.Ov],encapsulation:2}),s})(),oc=(()=>{class s{constructor(){this.autoHeight=!1,this.guidelineUseds=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[,{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var a;t.includes(null===(a=i.data)||void 0===a?void 0:a.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-guideline-used-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(f.x,5),2&t){let a;e.iGM(a=e.CRH())&&(i.tableView=a.first)}},inputs:{autoHeight:"autoHeight",guidelineUseds:"guidelineUseds"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.guidelineUseds)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[f.x],encapsulation:2}),s})();function FW(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-guideline-used-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","guidelineUsed_edit")("formControl",t.formControl)("guidelineUsed",t.guidelineUsed)}}const PW=function(){return{}};function IW(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-guideline-used-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","guidelineUsed_create")("formControl",t.formControl)("guidelineUsed",e.DdM(3,PW))}}function DW(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-guideline-used-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(d.ref.close())}),e.qZA()}2&s&&e.Q6J("guidelineUseds",o.data.items)}let MW=(()=>{class s extends G.fS{constructor(t){super(),this.store=t,this.store.loadGuidelineUsedsEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.guidelineUseds$.pipe((0,h.w)(i=>(0,D.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Co))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","guidelineUsed","send","close"],[1,"w-full","h-full","bg-white",3,"guidelineUseds","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,FW,2,3,"ng-template",null,1,e.W1O),e.YNc(3,IW,1,4,"ng-template",null,2,e.W1O),e.YNc(5,DW,1,1,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",d)("editTemplate",a)("createTemplate",l)("key",i.field.key)}},dependencies:[E.JJ,E.oH,H.$,sc,oc],encapsulation:2}),s})();function WW(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-guideline-used-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","guidelineUsed_edit")("guidelineUsed",t.value)}}const EW=function(){return{}};function OW(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-guideline-used-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","guidelineUsed_create")("guidelineUsed",e.DdM(2,EW))}function LW(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-guideline-used-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(null==d.ref?null:d.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("guidelineUseds",t.items)}}let $W=(()=>{class s extends pe{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","guidelineUsed","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","guidelineUseds","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,WW,1,2,"ng-template",null,1,e.W1O),e.YNc(3,OW,1,3,"ng-template",null,2,e.W1O),e.YNc(5,LW,1,2,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[he,sc,oc],encapsulation:2}),s})(),GW=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[Co],imports:[P.ez,U.F,E.UX,J.o,ae.u,$.P,j.t,me,k.h,se.G,G.X0.forChild({types:[{name:"guideline-used-select",component:MW,wrappers:["form-field"]},{name:"guideline-used-grid",component:$W}]})]}),s})(),RW=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[GW]}),s})();class ri extends W.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class QW extends ri{constructor(o){super("ValidateHealthInsuranceExcelDataAction"),this.valid=!1,this.excelData=o}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name)}),this.validationContext.addRule(new g.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof g.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(a=>a.name),newNames:[i.newName]}):i instanceof g.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,D.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class VW extends g.wS{constructor(o,t,i,a,l){super(o,t,i,a,l,!0)}}class jW extends g.ul{constructor(o,t,i,a=!1){super(o,t,a),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new g.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new VW("name","The healthinsurance name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class UW extends ri{constructor(o){super("CreateHealthInsuranceAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new jW("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateHealthInsurance({input:this.input}).pipe((0,h.w)(o=>(0,ue.of)(o.data.created)))}}class JW extends ri{constructor(o){super("UpdateHealthInsurancesAction"),this.healthInsurances=o}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.healthInsurances,!0))}performAction(){this.response=this.businessProvider.data.userUpdateHealthInsurances({input:{healthInsurances:this.healthInsurances}}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}class zW extends ri{constructor(o,t){super("UpdateHealthInsuranceAction"),this.healthInsurance=o,this.healthInsuranceId=t}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.healthInsurance,!0)).addRule(new g.xF("Id","Id should be a CUID and not null",this.healthInsuranceId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateHealthInsurance({healthInsuranceId:this.healthInsuranceId,input:this.healthInsurance}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}let ac=(()=>{class s extends W.nH{constructor(t,i,a){super("NotificationService.HealthInsuranceBusinessProviderService",t,a),this.data=i}createHealthInsurance(t){const i=new UW(t);return i.Do(this),i.response}updateHealthInsurance(t,i){const a=new zW(t,i);return a.Do(this),a.response}importHealthInsurances(t){const i=new JW(t);return i.Do(this),i.response}validateHealthInsuranceExcelData(t){const i=new QW(t);return i.Do(this),i.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(K.ed),e.LFG(z.q),e.LFG(W.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),HW=(()=>{class s extends W.nH{constructor(t,i,a){super("HealthInsuranceService",a,t),this.businessProvider=i}createHealthInsurance(t){const i=Object.fromEntries(Object.entries(t).filter(([a,l])=>null!==l));return this.businessProvider.createHealthInsurance(i)}updateHealthInsurance(t,i){return this.businessProvider.updateHealthInsurance(t,i)}importHealthInsurances(t){return this.businessProvider.importHealthInsurances(t)}validateHealthInsuranceExcelData(t){return this.businessProvider.validateHealthInsuranceExcelData(t)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(ac,8),e.LFG(ac),e.LFG(K.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),So=(()=>{class s extends b.m1{constructor(t,i,a,l,d,ee){super({loading:!1,healthInsurances:[],done:!1,searchQuery:"",formName:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=a,this.toast=l,this.formService=d,this.healthInsuranceService=ee,this.errors$=this.select(c=>c.errors),this.loading$=this.select(c=>c.loading),this.done$=this.select(c=>c.done),this.item$=this.select(c=>c.item),this.healthInsurances$=this.select(c=>c.healthInsurances),this.paging$=this.select(c=>c.paging),this.searchQuery$=this.select(c=>c.searchQuery),this.formName$=this.select(c=>c.formName),this.actionResult$=this.select(this.item$,this.done$,(c,u)=>({item:c,done:u}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.healthInsurances$,(c,u,n,r,m)=>({errors:c,loading:u,item:n,formName:r,healthInsurances:m}),{debounce:!0}),this.input$=this.select(this.paging$,this.searchQuery$,(c,u)=>({limit:c.limit,skip:c.skip,name:u,total:c.total})),this.setFormName=this.updater((c,u)=>Object.assign(Object.assign({},c),{formName:u})),this.setItem=this.updater((c,u)=>Object.assign(Object.assign({},c),{item:u})),this.addNewHealthInsurance=this.updater((c,u)=>Object.assign(Object.assign({},c),{healthInsurances:[...c.healthInsurances,u]})),this.updateHealthInsurance=this.updater((c,u)=>Object.assign(Object.assign({},c),{healthInsurances:c.healthInsurances.map(n=>n.id===u.id?u:n)})),this.addHealthInsurances=this.updater((c,u)=>Object.assign(Object.assign({},c),{healthInsurances:c.healthInsurances.concat(u)})),this.updateHealthInsurances=this.updater((c,u)=>Object.assign(Object.assign({},c),{healthInsurances:c.healthInsurances.map(n=>u.find(m=>m.id===n.id)||n)})),this.setSearchQuery=this.updater((c,u)=>Object.assign(Object.assign({},c),{searchQuery:u})),this.loadHealthInsuranceEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.data.userHealthInsurance({healthInsuranceId:u}).pipe((0,b._b)(n=>{this.patchState({item:n.data.item,errors:n.errors,loading:!1})},n=>this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})))))),this.loadHealthInsurancesEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.input$),(0,h.w)(([u,n])=>this.data.userHealthInsurances({input:n}).pipe((0,b._b)(r=>this.patchState({paging:{limit:n.limit,skip:n.skip,total:r.data.count.total},healthInsurances:r.data.items,errors:r.errors,loading:!1}),r=>this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})))))),this.createHealthInsuranceEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.healthInsuranceService.createHealthInsurance(Object.assign({},u)).pipe((0,b._b)(n=>{this.addNewHealthInsurance(n),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:n,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},n=>{n.graphQLErrors?(this.toast.error(n.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})):(this.toast.error(n.Message),this.formService.setErrors(n.Data))}))))),this.updateHealthInsuranceEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([u,n])=>this.healthInsuranceService.updateHealthInsurance(u,u.id).pipe((0,b._b)(r=>{this.updateHealthInsurance(r),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:r,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},r=>{r.graphQLErrors?(this.toast.error(r.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})):(this.toast.error(r.Message),this.formService.setErrors(r.Data))}))))),this.deleteHealthInsuranceEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([u,n])=>this.data.userDeleteHealthInsurance({healthInsuranceId:n.id}).pipe((0,b._b)(r=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:r.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},r=>{r.graphQLErrors?(this.toast.error(r.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})):(this.toast.error(r.Message),this.formService.setErrors(r.Data))}))))),this.importExcelEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.healthInsuranceService.importHealthInsurances(u).pipe((0,de.K)(n=>{var r;return this.toast.error(null!==(r=n.Message)&&void 0!==r?r:"Failed to save",{duration:3e3}),q.E}),(0,y.b)(n=>{const r=JSON.parse(n.created),m=JSON.parse(n.updated),p=JSON.parse(n.failed),v=r.length+m.length+p.length;this.addHealthInsurances(r),this.updateHealthInsurances(m),this.toast.success(`${r.length} created, ${m.length} updated, ${p.length} failed of total ${v}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("healthInsuranceId")?(this.route.snapshot.paramMap.get("healthInsuranceId"),this.setFormName("healthInsurance_edit")):this.setFormName("healthInsurance_create")}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.healthInsuranceService.validateHealthInsuranceExcelData(t)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(z.q),e.LFG(O.F0),e.LFG(O.gz),e.LFG(X.F),e.LFG(Z.o),e.LFG(HW))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function qW(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.close.emit())})("formIsReady",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.healthInsurance)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let rc=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"healthInsurance_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.healthInsurance=i.item})):t.formName&&t.formName.currentValue&&"healthInsurance_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadHealthInsuranceEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.healthInsurance=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(So),e.Y36(O.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-health-insurance-form"]],inputs:{healthInsurance:"healthInsurance",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,qW,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[P.O5,te.M,P.Ov],encapsulation:2}),s})(),nc=(()=>{class s{constructor(){this.autoHeight=!1,this.healthInsurances=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[,{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{field:"healthInsuranceKind",filter:"agTextColumnFilter"},{field:"identificationGroupNumber",filter:"agTextColumnFilter"},{field:"mediCalNumber",filter:"agTextColumnFilter"},{field:"medicareNumber",filter:"agTextColumnFilter"},{field:"policyNumber",filter:"agTextColumnFilter"},{field:"legalCaseId",filter:"agTextColumnFilter",hide:!0}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var a;t.includes(null===(a=i.data)||void 0===a?void 0:a.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-health-insurance-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(f.x,5),2&t){let a;e.iGM(a=e.CRH())&&(i.tableView=a.first)}},inputs:{autoHeight:"autoHeight",healthInsurances:"healthInsurances"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.healthInsurances)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[f.x],encapsulation:2}),s})();function KW(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-health-insurance-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","healthInsurance_edit")("formControl",t.formControl)("healthInsurance",t.healthInsurance)}}const ZW=function(){return{}};function BW(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-health-insurance-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","healthInsurance_create")("formControl",t.formControl)("healthInsurance",e.DdM(3,ZW))}}function kW(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-health-insurance-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(d.ref.close())}),e.qZA()}2&s&&e.Q6J("healthInsurances",o.data.items)}let YW=(()=>{class s extends G.fS{constructor(t){super(),this.store=t,this.store.loadHealthInsurancesEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.healthInsurances$.pipe((0,h.w)(i=>(0,D.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(So))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","healthInsurance","send","close"],[1,"w-full","h-full","bg-white",3,"healthInsurances","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,KW,2,3,"ng-template",null,1,e.W1O),e.YNc(3,BW,1,4,"ng-template",null,2,e.W1O),e.YNc(5,kW,1,1,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",d)("editTemplate",a)("createTemplate",l)("key",i.field.key)}},dependencies:[E.JJ,E.oH,H.$,rc,nc],encapsulation:2}),s})();function XW(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-health-insurance-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","healthInsurance_edit")("healthInsurance",t.value)}}const eE=function(){return{}};function tE(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-health-insurance-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","healthInsurance_create")("healthInsurance",e.DdM(2,eE))}function iE(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-health-insurance-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(null==d.ref?null:d.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("healthInsurances",t.items)}}let sE=(()=>{class s extends pe{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","healthInsurance","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","healthInsurances","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,XW,1,2,"ng-template",null,1,e.W1O),e.YNc(3,tE,1,3,"ng-template",null,2,e.W1O),e.YNc(5,iE,1,2,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[he,rc,nc],encapsulation:2}),s})(),oE=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[So],imports:[P.ez,U.F,E.UX,J.o,ae.u,$.P,j.t,me,k.h,se.G,G.X0.forChild({types:[{name:"health-insurance-select",component:YW,wrappers:["form-field"]},{name:"health-insurance-grid",component:sE}]})]}),s})(),aE=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[oE]}),s})();class ni extends W.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class rE extends ni{constructor(o){super("ValidateImplantCategoryExcelDataAction"),this.valid=!1,this.excelData=o}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name)}),this.validationContext.addRule(new g.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof g.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(a=>a.name),newNames:[i.newName]}):i instanceof g.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,D.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class nE extends g.wS{constructor(o,t,i,a,l){super(o,t,i,a,l,!0)}}class lE extends g.ul{constructor(o,t,i,a=!1){super(o,t,a),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new g.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new nE("name","The implantcategory name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class cE extends ni{constructor(o){super("CreateImplantCategoryAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new lE("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateImplantCategory({input:this.input}).pipe((0,h.w)(o=>(0,ue.of)(o.data.created)))}}class dE extends ni{constructor(o){super("UpdateImplantCategoriesAction"),this.implantCategories=o}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.implantCategories,!0))}performAction(){this.response=this.businessProvider.data.userUpdateImplantCategories({input:{implantCategories:this.implantCategories}}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}class uE extends ni{constructor(o,t){super("UpdateImplantCategoryAction"),this.implantCategory=o,this.implantCategoryId=t}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.implantCategory,!0)).addRule(new g.xF("Id","Id should be a CUID and not null",this.implantCategoryId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateImplantCategory({implantCategoryId:this.implantCategoryId,input:this.implantCategory}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}let lc=(()=>{class s extends W.nH{constructor(t,i,a){super("NotificationService.ImplantCategoryBusinessProviderService",t,a),this.data=i}createImplantCategory(t){const i=new cE(t);return i.Do(this),i.response}updateImplantCategory(t,i){const a=new uE(t,i);return a.Do(this),a.response}importImplantCategories(t){const i=new dE(t);return i.Do(this),i.response}validateImplantCategoryExcelData(t){const i=new rE(t);return i.Do(this),i.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(K.ed),e.LFG(z.q),e.LFG(W.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),mE=(()=>{class s extends W.nH{constructor(t,i,a){super("ImplantCategoryService",a,t),this.businessProvider=i}createImplantCategory(t){const i=Object.fromEntries(Object.entries(t).filter(([a,l])=>null!==l));return this.businessProvider.createImplantCategory(i)}updateImplantCategory(t,i){return this.businessProvider.updateImplantCategory(t,i)}importImplantCategories(t){return this.businessProvider.importImplantCategories(t)}validateImplantCategoryExcelData(t){return this.businessProvider.validateImplantCategoryExcelData(t)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(lc,8),e.LFG(lc),e.LFG(K.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),bo=(()=>{class s extends b.m1{constructor(t,i,a,l,d,ee){super({loading:!1,implantCategories:[],done:!1,searchQuery:"",formName:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=a,this.toast=l,this.formService=d,this.implantCategoryService=ee,this.errors$=this.select(c=>c.errors),this.loading$=this.select(c=>c.loading),this.done$=this.select(c=>c.done),this.item$=this.select(c=>c.item),this.implantCategories$=this.select(c=>c.implantCategories),this.paging$=this.select(c=>c.paging),this.searchQuery$=this.select(c=>c.searchQuery),this.formName$=this.select(c=>c.formName),this.actionResult$=this.select(this.item$,this.done$,(c,u)=>({item:c,done:u}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.implantCategories$,(c,u,n,r,m)=>({errors:c,loading:u,item:n,formName:r,implantCategories:m}),{debounce:!0}),this.input$=this.select(this.paging$,this.searchQuery$,(c,u)=>({limit:c.limit,skip:c.skip,name:u,total:c.total})),this.setFormName=this.updater((c,u)=>Object.assign(Object.assign({},c),{formName:u})),this.setItem=this.updater((c,u)=>Object.assign(Object.assign({},c),{item:u})),this.addNewImplantCategory=this.updater((c,u)=>Object.assign(Object.assign({},c),{implantCategories:[...c.implantCategories,u]})),this.updateImplantCategory=this.updater((c,u)=>Object.assign(Object.assign({},c),{implantCategories:c.implantCategories.map(n=>n.id===u.id?u:n)})),this.addImplantCategories=this.updater((c,u)=>Object.assign(Object.assign({},c),{implantCategories:c.implantCategories.concat(u)})),this.updateImplantCategories=this.updater((c,u)=>Object.assign(Object.assign({},c),{implantCategories:c.implantCategories.map(n=>u.find(m=>m.id===n.id)||n)})),this.setSearchQuery=this.updater((c,u)=>Object.assign(Object.assign({},c),{searchQuery:u})),this.loadImplantCategoryEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.data.userImplantCategory({implantCategoryId:u}).pipe((0,b._b)(n=>{this.patchState({item:n.data.item,errors:n.errors,loading:!1})},n=>this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})))))),this.loadImplantCategoriesEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.input$),(0,h.w)(([u,n])=>this.data.userImplantCategories({input:n}).pipe((0,b._b)(r=>this.patchState({paging:{limit:n.limit,skip:n.skip,total:r.data.count.total},implantCategories:r.data.items,errors:r.errors,loading:!1}),r=>this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})))))),this.createImplantCategoryEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.implantCategoryService.createImplantCategory(Object.assign({},u)).pipe((0,b._b)(n=>{this.addNewImplantCategory(n),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:n,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},n=>{n.graphQLErrors?(this.toast.error(n.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})):(this.toast.error(n.Message),this.formService.setErrors(n.Data))}))))),this.updateImplantCategoryEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([u,n])=>this.implantCategoryService.updateImplantCategory(u,u.id).pipe((0,b._b)(r=>{this.updateImplantCategory(r),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:r,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},r=>{r.graphQLErrors?(this.toast.error(r.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})):(this.toast.error(r.Message),this.formService.setErrors(r.Data))}))))),this.deleteImplantCategoryEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([u,n])=>this.data.userDeleteImplantCategory({implantCategoryId:n.id}).pipe((0,b._b)(r=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:r.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},r=>{r.graphQLErrors?(this.toast.error(r.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})):(this.toast.error(r.Message),this.formService.setErrors(r.Data))}))))),this.importExcelEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.implantCategoryService.importImplantCategories(u).pipe((0,de.K)(n=>{var r;return this.toast.error(null!==(r=n.Message)&&void 0!==r?r:"Failed to save",{duration:3e3}),q.E}),(0,y.b)(n=>{const r=JSON.parse(n.created),m=JSON.parse(n.updated),p=JSON.parse(n.failed),v=r.length+m.length+p.length;this.addImplantCategories(r),this.updateImplantCategories(m),this.toast.success(`${r.length} created, ${m.length} updated, ${p.length} failed of total ${v}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("implantCategoryId")?(this.route.snapshot.paramMap.get("implantCategoryId"),this.setFormName("implantCategory_edit")):this.setFormName("implantCategory_create")}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.implantCategoryService.validateImplantCategoryExcelData(t)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(z.q),e.LFG(O.F0),e.LFG(O.gz),e.LFG(X.F),e.LFG(Z.o),e.LFG(mE))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function pE(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.close.emit())})("formIsReady",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.implantCategory)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let cc=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"implantCategory_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.implantCategory=i.item})):t.formName&&t.formName.currentValue&&"implantCategory_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadImplantCategoryEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.implantCategory=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(bo),e.Y36(O.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-implant-category-form"]],inputs:{implantCategory:"implantCategory",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,pE,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[P.O5,te.M,P.Ov],encapsulation:2}),s})(),dc=(()=>{class s{constructor(){this.autoHeight=!1,this.implantCategories=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[,{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var a;t.includes(null===(a=i.data)||void 0===a?void 0:a.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-implant-category-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(f.x,5),2&t){let a;e.iGM(a=e.CRH())&&(i.tableView=a.first)}},inputs:{autoHeight:"autoHeight",implantCategories:"implantCategories"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.implantCategories)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[f.x],encapsulation:2}),s})();function hE(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-implant-category-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","implantCategory_edit")("formControl",t.formControl)("implantCategory",t.implantCategory)}}const fE=function(){return{}};function _E(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-implant-category-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","implantCategory_create")("formControl",t.formControl)("implantCategory",e.DdM(3,fE))}}function gE(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-implant-category-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(d.ref.close())}),e.qZA()}2&s&&e.Q6J("implantCategories",o.data.items)}let vE=(()=>{class s extends G.fS{constructor(t){super(),this.store=t,this.store.loadImplantCategoriesEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.implantCategories$.pipe((0,h.w)(i=>(0,D.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(bo))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","implantCategory","send","close"],[1,"w-full","h-full","bg-white",3,"implantCategories","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,hE,2,3,"ng-template",null,1,e.W1O),e.YNc(3,_E,1,4,"ng-template",null,2,e.W1O),e.YNc(5,gE,1,1,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",d)("editTemplate",a)("createTemplate",l)("key",i.field.key)}},dependencies:[E.JJ,E.oH,H.$,cc,dc],encapsulation:2}),s})();function CE(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-implant-category-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","implantCategory_edit")("implantCategory",t.value)}}const SE=function(){return{}};function bE(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-implant-category-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","implantCategory_create")("implantCategory",e.DdM(2,SE))}function TE(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-implant-category-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(null==d.ref?null:d.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("implantCategories",t.items)}}let yE=(()=>{class s extends pe{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","implantCategory","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","implantCategories","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,CE,1,2,"ng-template",null,1,e.W1O),e.YNc(3,bE,1,3,"ng-template",null,2,e.W1O),e.YNc(5,TE,1,2,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[he,cc,dc],encapsulation:2}),s})(),wE=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[bo],imports:[P.ez,U.F,E.UX,J.o,ae.u,$.P,j.t,me,k.h,se.G,G.X0.forChild({types:[{name:"implant-category-select",component:vE,wrappers:["form-field"]},{name:"implant-category-grid",component:yE}]})]}),s})(),xE=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[wE]}),s})();class li extends W.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class NE extends li{constructor(o,t,i,a){super("ValidateImplantExcelDataAction"),this.valid=!1,this.excelData=o,this.implantCategories=t,this.salesRepresentatives=i,this.manufacturers=a}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name),this.validationContext.addRule(new g.mi(`implantCategoryName_${i}_is_valid}`,"Implant Category Is Not Valid","implantCategory.name",t.implantCategory,this.implantCategories,!0)),this.validationContext.addRule(new g.mi(`salesRepresentativeName_${i}_is_valid}`,"Sales Representative Is Not Valid","salesRepresentative.name",t.salesRepresentative,this.salesRepresentatives,!0)),this.validationContext.addRule(new g.mi(`manufacturerName_${i}_is_valid}`,"Manufacturer Is Not Valid","manufacturer.name",t.manufacturer,this.manufacturers,!0))}),this.validationContext.addRule(new g.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof g.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(a=>a.name),newNames:[i.newName]}):i instanceof g.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,D.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class AE extends g.wS{constructor(o,t,i,a,l){super(o,t,i,a,l,!0)}}class FE extends g.ul{constructor(o,t,i,a=!1){super(o,t,a),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new g.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new AE("name","The implant name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class PE extends li{constructor(o){super("CreateImplantAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new FE("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateImplant({input:this.input}).pipe((0,h.w)(o=>(0,ue.of)(o.data.created)))}}class IE extends li{constructor(o){super("UpdateImplantsAction"),this.implants=o}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.implants,!0))}performAction(){this.response=this.businessProvider.data.userUpdateImplants({input:{implants:this.implants}}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}class DE extends li{constructor(o,t){super("UpdateImplantAction"),this.implant=o,this.implantId=t}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.implant,!0)).addRule(new g.xF("Id","Id should be a CUID and not null",this.implantId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateImplant({implantId:this.implantId,input:this.implant}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}let uc=(()=>{class s extends W.nH{constructor(t,i,a){super("NotificationService.ImplantBusinessProviderService",t,a),this.data=i}createImplant(t){const i=new PE(t);return i.Do(this),i.response}updateImplant(t,i){const a=new DE(t,i);return a.Do(this),a.response}importImplants(t){const i=new IE(t);return i.Do(this),i.response}validateImplantExcelData(t,i,a,l){const d=new NE(t,i,a,l);return d.Do(this),d.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(K.ed),e.LFG(z.q),e.LFG(W.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),ME=(()=>{class s extends W.nH{constructor(t,i,a){super("ImplantService",a,t),this.businessProvider=i}createImplant(t){const i=Object.fromEntries(Object.entries(t).filter(([a,l])=>null!==l));return this.businessProvider.createImplant(i)}updateImplant(t,i){return this.businessProvider.updateImplant(t,i)}importImplants(t){return this.businessProvider.importImplants(t)}validateImplantExcelData(t,i,a,l){return this.businessProvider.validateImplantExcelData(t,i,a,l)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(uc,8),e.LFG(uc),e.LFG(K.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),To=(()=>{class s extends b.m1{constructor(t,i,a,l,d,ee){if(super({loading:!1,implants:[],done:!1,searchQuery:"",formName:void 0,implantCategoryId:void 0,salesRepresentativeId:void 0,manufacturerId:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=a,this.toast=l,this.formService=d,this.implantService=ee,this.errors$=this.select(r=>r.errors),this.loading$=this.select(r=>r.loading),this.done$=this.select(r=>r.done),this.item$=this.select(r=>r.item),this.implants$=this.select(r=>r.implants),this.implantCategories$=this.select(r=>r.implantCategories||[]),this.contacts$=this.select(r=>r.contacts||[]),this.manufacturers$=this.select(r=>r.manufacturers||[]),this.implantCategoryId$=this.select(r=>r.implantCategoryId),this.salesRepresentativeId$=this.select(r=>r.salesRepresentativeId),this.manufacturerId$=this.select(r=>r.manufacturerId),this.paging$=this.select(r=>r.paging),this.searchQuery$=this.select(r=>r.searchQuery),this.formName$=this.select(r=>r.formName),this.actionResult$=this.select(this.item$,this.done$,(r,m)=>({item:r,done:m}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.implants$,this.implantCategories$,this.contacts$,this.manufacturers$,(r,m,p,v,I,B,_e,Ne)=>({errors:r,loading:m,item:p,formName:v,implants:I,implantCategories:B,contacts:_e,manufacturers:Ne}),{debounce:!0}),this.input$=this.select(this.paging$,this.implantCategoryId$,this.salesRepresentativeId$,this.manufacturerId$,this.searchQuery$,(r,m,p,v,I)=>({limit:r.limit,skip:r.skip,name:I,implantCategoryId:m,salesRepresentativeId:p,manufacturerId:v,total:r.total})),this.setFormName=this.updater((r,m)=>Object.assign(Object.assign({},r),{formName:m})),this.setImplantCategoryId=this.updater((r,m)=>Object.assign(Object.assign({},r),{implantCategoryId:m})),this.setSalesRepresentativeId=this.updater((r,m)=>Object.assign(Object.assign({},r),{salesRepresentativeId:m})),this.setManufacturerId=this.updater((r,m)=>Object.assign(Object.assign({},r),{manufacturerId:m})),this.filterImplantCategories=r=>this.data.userSelectImplantCategories({input:{name:r}}).pipe((0,b._b)(m=>{let p=m.data.items;return this.patchState({implantCategories:p}),p},m=>this.patchState({errors:m.graphQLErrors?m.graphQLErrors:m})),(0,fe.U)(m=>m.data.items)),this.filterContacts=r=>this.data.userSelectContacts({input:{name:r}}).pipe((0,b._b)(m=>{let p=m.data.items;return this.patchState({contacts:p}),p},m=>this.patchState({errors:m.graphQLErrors?m.graphQLErrors:m})),(0,fe.U)(m=>m.data.items)),this.filterManufacturers=r=>this.data.userSelectManufacturers({input:{name:r}}).pipe((0,b._b)(m=>{let p=m.data.items;return this.patchState({manufacturers:p}),p},m=>this.patchState({errors:m.graphQLErrors?m.graphQLErrors:m})),(0,fe.U)(m=>m.data.items)),this.addImplantCategory=this.updater((r,m)=>Object.assign(Object.assign({},r),{implantCategories:r.implantCategories.concat(m)})),this.addContact=this.updater((r,m)=>Object.assign(Object.assign({},r),{contacts:r.contacts.concat(m)})),this.addManufacturer=this.updater((r,m)=>Object.assign(Object.assign({},r),{manufacturers:r.manufacturers.concat(m)})),this.setItem=this.updater((r,m)=>Object.assign(Object.assign({},r),{item:m})),this.addNewImplant=this.updater((r,m)=>Object.assign(Object.assign({},r),{implants:[...r.implants,m]})),this.updateImplant=this.updater((r,m)=>Object.assign(Object.assign({},r),{implants:r.implants.map(p=>p.id===m.id?m:p)})),this.addImplants=this.updater((r,m)=>Object.assign(Object.assign({},r),{implants:r.implants.concat(m)})),this.updateImplants=this.updater((r,m)=>Object.assign(Object.assign({},r),{implants:r.implants.map(p=>m.find(I=>I.id===p.id)||p)})),this.setSearchQuery=this.updater((r,m)=>Object.assign(Object.assign({},r),{searchQuery:m})),this.loadImplantEffect=this.effect(r=>r.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(m=>this.data.userImplant({implantId:m}).pipe((0,b._b)(p=>{this.patchState({item:p.data.item,errors:p.errors,loading:!1})},p=>this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})))))),this.loadImplantsEffect=this.effect(r=>r.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.input$),(0,h.w)(([m,p])=>this.data.userImplants({input:p}).pipe((0,b._b)(v=>this.patchState({paging:{limit:p.limit,skip:p.skip,total:v.data.count.total},implants:v.data.items,errors:v.errors,loading:!1}),v=>this.patchState({loading:!1,errors:v.graphQLErrors?v.graphQLErrors:v})))))),this.createImplantEffect=this.effect(r=>r.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(m=>this.implantService.createImplant(Object.assign({},m)).pipe((0,b._b)(p=>{this.addNewImplant(p),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:p,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},p=>{p.graphQLErrors?(this.toast.error(p.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})):(this.toast.error(p.Message),this.formService.setErrors(p.Data))}))))),this.updateImplantEffect=this.effect(r=>r.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([m,p])=>this.implantService.updateImplant(m,m.id).pipe((0,b._b)(v=>{this.updateImplant(v),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:v,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},v=>{v.graphQLErrors?(this.toast.error(v.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:v.graphQLErrors?v.graphQLErrors:v})):(this.toast.error(v.Message),this.formService.setErrors(v.Data))}))))),this.deleteImplantEffect=this.effect(r=>r.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([m,p])=>this.data.userDeleteImplant({implantId:p.id}).pipe((0,b._b)(v=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:v.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},v=>{v.graphQLErrors?(this.toast.error(v.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:v.graphQLErrors?v.graphQLErrors:v})):(this.toast.error(v.Message),this.formService.setErrors(v.Data))}))))),this.importExcelEffect=this.effect(r=>r.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(m=>this.implantService.importImplants(m).pipe((0,de.K)(p=>{var v;return this.toast.error(null!==(v=p.Message)&&void 0!==v?v:"Failed to save",{duration:3e3}),q.E}),(0,y.b)(p=>{const v=JSON.parse(p.created),I=JSON.parse(p.updated),B=JSON.parse(p.failed),_e=v.length+I.length+B.length;this.addImplants(v),this.updateImplants(I),this.toast.success(`${v.length} created, ${I.length} updated, ${B.length} failed of total ${_e}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("implantId")?(this.route.snapshot.paramMap.get("implantId"),this.setFormName("implant_edit")):this.setFormName("implant_create"),this.route.snapshot.paramMap.has("implantCategoryId")){var c=this.route.snapshot.paramMap.get("implantCategoryId");this.setImplantCategoryId(c)}if(this.route.snapshot.paramMap.has("salesRepresentativeId")){var u=this.route.snapshot.paramMap.get("salesRepresentativeId");this.setSalesRepresentativeId(u)}if(this.route.snapshot.paramMap.has("manufacturerId")){var n=this.route.snapshot.paramMap.get("manufacturerId");this.setManufacturerId(n)}}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.implantService.validateImplantExcelData(t,i.implantCategories,i.contacts,i.manufacturers)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(z.q),e.LFG(O.F0),e.LFG(O.gz),e.LFG(X.F),e.LFG(Z.o),e.LFG(ME))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function WE(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.close.emit())})("formIsReady",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.implant)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let mc=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"implant_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.implant=i.item})):t.formName&&t.formName.currentValue&&"implant_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadImplantEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.implant=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(To),e.Y36(O.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-implant-form"]],inputs:{implant:"implant",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,WE,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[P.O5,te.M,P.Ov],encapsulation:2}),s})(),pc=(()=>{class s{constructor(){this.autoHeight=!1,this.implants=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[{field:"implantCategory.name",headerName:"Implant Category",filter:"agTextColumnFilter"},{field:"salesRepresentative.name",headerName:"Sales Representative",filter:"agTextColumnFilter"},{field:"manufacturer.name",headerName:"Manufacturer",filter:"agTextColumnFilter"},{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{headerName:"Estimated Cost",field:"estimatedCost",valueFormatter:t=>{var i;return(0,_.oBD)(null===(i=t.data)||void 0===i?void 0:i.estimatedCost,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{field:"implantCategoryId",filter:"agTextColumnFilter",hide:!0},{field:"manufacturerId",filter:"agTextColumnFilter",hide:!0},{field:"photoUrl",filter:"agTextColumnFilter"},{field:"salesRepresentativeId",filter:"agTextColumnFilter",hide:!0},{field:"sku",filter:"agTextColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var a;t.includes(null===(a=i.data)||void 0===a?void 0:a.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-implant-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(f.x,5),2&t){let a;e.iGM(a=e.CRH())&&(i.tableView=a.first)}},inputs:{autoHeight:"autoHeight",implants:"implants"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.implants)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[f.x],encapsulation:2}),s})();function EE(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-implant-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","implant_edit")("formControl",t.formControl)("implant",t.implant)}}const OE=function(){return{}};function LE(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-implant-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","implant_create")("formControl",t.formControl)("implant",e.DdM(3,OE))}}function $E(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-implant-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(d.ref.close())}),e.qZA()}2&s&&e.Q6J("implants",o.data.items)}let GE=(()=>{class s extends G.fS{constructor(t){super(),this.store=t,this.store.loadImplantsEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.implants$.pipe((0,h.w)(i=>(0,D.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(To))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","implant","send","close"],[1,"w-full","h-full","bg-white",3,"implants","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,EE,2,3,"ng-template",null,1,e.W1O),e.YNc(3,LE,1,4,"ng-template",null,2,e.W1O),e.YNc(5,$E,1,1,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",d)("editTemplate",a)("createTemplate",l)("key",i.field.key)}},dependencies:[E.JJ,E.oH,H.$,mc,pc],encapsulation:2}),s})();function RE(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-implant-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","implant_edit")("implant",t.value)}}const QE=function(){return{}};function VE(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-implant-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","implant_create")("implant",e.DdM(2,QE))}function jE(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-implant-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(null==d.ref?null:d.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("implants",t.items)}}let UE=(()=>{class s extends pe{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","implant","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","implants","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,RE,1,2,"ng-template",null,1,e.W1O),e.YNc(3,VE,1,3,"ng-template",null,2,e.W1O),e.YNc(5,jE,1,2,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[he,mc,pc],encapsulation:2}),s})(),JE=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[To],imports:[P.ez,U.F,E.UX,J.o,ae.u,$.P,j.t,me,k.h,se.G,G.X0.forChild({types:[{name:"implant-select",component:GE,wrappers:["form-field"]},{name:"implant-grid",component:UE}]})]}),s})(),zE=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[JE]}),s})();class ci extends W.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class HE extends ci{constructor(o,t,i,a,l){super("ValidateInsuranceExcelDataAction"),this.valid=!1,this.excelData=o,this.legalCases=t,this.insuranceTypes=i,this.insuranceSectors=a,this.leads=l}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name),this.validationContext.addRule(new g.mi(`legalCaseName_${i}_is_valid}`,"Legal Case Is Not Valid","legalCase.name",t.legalCase,this.legalCases,!0)),this.validationContext.addRule(new g.mi(`insuranceTypeName_${i}_is_valid}`,"Insurance Type Is Not Valid","insuranceType.name",t.insuranceType,this.insuranceTypes,!0)),this.validationContext.addRule(new g.mi(`insuranceSectorName_${i}_is_valid}`,"Insurance Sector Is Not Valid","insuranceSector.name",t.insuranceSector,this.insuranceSectors,!0)),this.validationContext.addRule(new g.mi(`leadName_${i}_is_valid}`,"Lead Is Not Valid","lead.name",t.lead,this.leads,!0))}),this.validationContext.addRule(new g.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof g.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(a=>a.name),newNames:[i.newName]}):i instanceof g.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,D.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class qE extends g.wS{constructor(o,t,i,a,l){super(o,t,i,a,l,!0)}}class KE extends g.ul{constructor(o,t,i,a=!1){super(o,t,a),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new g.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new qE("name","The insurance name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class ZE extends ci{constructor(o){super("CreateInsuranceAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new KE("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateInsurance({input:this.input}).pipe((0,h.w)(o=>(0,ue.of)(o.data.created)))}}class BE extends ci{constructor(o){super("UpdateInsurancesAction"),this.insurances=o}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.insurances,!0))}performAction(){this.response=this.businessProvider.data.userUpdateInsurances({input:{insurances:this.insurances}}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}class kE extends ci{constructor(o,t){super("UpdateInsuranceAction"),this.insurance=o,this.insuranceId=t}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.insurance,!0)).addRule(new g.xF("Id","Id should be a CUID and not null",this.insuranceId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateInsurance({insuranceId:this.insuranceId,input:this.insurance}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}let hc=(()=>{class s extends W.nH{constructor(t,i,a){super("NotificationService.InsuranceBusinessProviderService",t,a),this.data=i}createInsurance(t){const i=new ZE(t);return i.Do(this),i.response}updateInsurance(t,i){const a=new kE(t,i);return a.Do(this),a.response}importInsurances(t){const i=new BE(t);return i.Do(this),i.response}validateInsuranceExcelData(t,i,a,l,d){const ee=new HE(t,i,a,l,d);return ee.Do(this),ee.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(K.ed),e.LFG(z.q),e.LFG(W.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),YE=(()=>{class s extends W.nH{constructor(t,i,a){super("InsuranceService",a,t),this.businessProvider=i}createInsurance(t){const i=Object.fromEntries(Object.entries(t).filter(([a,l])=>null!==l));return this.businessProvider.createInsurance(i)}updateInsurance(t,i){return this.businessProvider.updateInsurance(t,i)}importInsurances(t){return this.businessProvider.importInsurances(t)}validateInsuranceExcelData(t,i,a,l,d){return this.businessProvider.validateInsuranceExcelData(t,i,a,l,d)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(hc,8),e.LFG(hc),e.LFG(K.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),yo=(()=>{class s extends b.m1{constructor(t,i,a,l,d,ee){if(super({loading:!1,insurances:[],done:!1,searchQuery:"",formName:void 0,legalCaseId:void 0,insuranceTypeId:void 0,insuranceSectorId:void 0,leadId:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=a,this.toast=l,this.formService=d,this.insuranceService=ee,this.errors$=this.select(m=>m.errors),this.loading$=this.select(m=>m.loading),this.done$=this.select(m=>m.done),this.item$=this.select(m=>m.item),this.insurances$=this.select(m=>m.insurances),this.legalCases$=this.select(m=>m.legalCases||[]),this.insuranceTypes$=this.select(m=>m.insuranceTypes||[]),this.insuranceSectors$=this.select(m=>m.insuranceSectors||[]),this.leads$=this.select(m=>m.leads||[]),this.legalCaseId$=this.select(m=>m.legalCaseId),this.insuranceTypeId$=this.select(m=>m.insuranceTypeId),this.insuranceSectorId$=this.select(m=>m.insuranceSectorId),this.leadId$=this.select(m=>m.leadId),this.paging$=this.select(m=>m.paging),this.searchQuery$=this.select(m=>m.searchQuery),this.formName$=this.select(m=>m.formName),this.actionResult$=this.select(this.item$,this.done$,(m,p)=>({item:m,done:p}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.insurances$,this.legalCases$,this.insuranceTypes$,this.insuranceSectors$,this.leads$,(m,p,v,I,B,_e,Ne,le,ce)=>({errors:m,loading:p,item:v,formName:I,insurances:B,legalCases:_e,insuranceTypes:Ne,insuranceSectors:le,leads:ce}),{debounce:!0}),this.input$=this.select(this.paging$,this.legalCaseId$,this.insuranceTypeId$,this.insuranceSectorId$,this.leadId$,this.searchQuery$,(m,p,v,I,B,_e)=>({limit:m.limit,skip:m.skip,name:_e,legalCaseId:p,insuranceTypeId:v,insuranceSectorId:I,leadId:B,total:m.total})),this.setFormName=this.updater((m,p)=>Object.assign(Object.assign({},m),{formName:p})),this.setLegalCaseId=this.updater((m,p)=>Object.assign(Object.assign({},m),{legalCaseId:p})),this.setInsuranceTypeId=this.updater((m,p)=>Object.assign(Object.assign({},m),{insuranceTypeId:p})),this.setInsuranceSectorId=this.updater((m,p)=>Object.assign(Object.assign({},m),{insuranceSectorId:p})),this.setLeadId=this.updater((m,p)=>Object.assign(Object.assign({},m),{leadId:p})),this.filterLegalCases=m=>this.data.userSelectLegalCases({input:{name:m}}).pipe((0,b._b)(p=>{let v=p.data.items;return this.patchState({legalCases:v}),v},p=>this.patchState({errors:p.graphQLErrors?p.graphQLErrors:p})),(0,fe.U)(p=>p.data.items)),this.filterInsuranceTypes=m=>this.data.userSelectInsuranceTypes({input:{name:m}}).pipe((0,b._b)(p=>{let v=p.data.items;return this.patchState({insuranceTypes:v}),v},p=>this.patchState({errors:p.graphQLErrors?p.graphQLErrors:p})),(0,fe.U)(p=>p.data.items)),this.filterInsuranceSectors=m=>this.data.userSelectInsuranceSectors({input:{name:m}}).pipe((0,b._b)(p=>{let v=p.data.items;return this.patchState({insuranceSectors:v}),v},p=>this.patchState({errors:p.graphQLErrors?p.graphQLErrors:p})),(0,fe.U)(p=>p.data.items)),this.filterLeads=m=>this.data.userSelectLeads({input:{name:m}}).pipe((0,b._b)(p=>{let v=p.data.items;return this.patchState({leads:v}),v},p=>this.patchState({errors:p.graphQLErrors?p.graphQLErrors:p})),(0,fe.U)(p=>p.data.items)),this.addLegalCase=this.updater((m,p)=>Object.assign(Object.assign({},m),{legalCases:m.legalCases.concat(p)})),this.addInsuranceType=this.updater((m,p)=>Object.assign(Object.assign({},m),{insuranceTypes:m.insuranceTypes.concat(p)})),this.addInsuranceSector=this.updater((m,p)=>Object.assign(Object.assign({},m),{insuranceSectors:m.insuranceSectors.concat(p)})),this.addLead=this.updater((m,p)=>Object.assign(Object.assign({},m),{leads:m.leads.concat(p)})),this.setItem=this.updater((m,p)=>Object.assign(Object.assign({},m),{item:p})),this.addNewInsurance=this.updater((m,p)=>Object.assign(Object.assign({},m),{insurances:[...m.insurances,p]})),this.updateInsurance=this.updater((m,p)=>Object.assign(Object.assign({},m),{insurances:m.insurances.map(v=>v.id===p.id?p:v)})),this.addInsurances=this.updater((m,p)=>Object.assign(Object.assign({},m),{insurances:m.insurances.concat(p)})),this.updateInsurances=this.updater((m,p)=>Object.assign(Object.assign({},m),{insurances:m.insurances.map(v=>p.find(B=>B.id===v.id)||v)})),this.setSearchQuery=this.updater((m,p)=>Object.assign(Object.assign({},m),{searchQuery:p})),this.loadInsuranceEffect=this.effect(m=>m.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(p=>this.data.userInsurance({insuranceId:p}).pipe((0,b._b)(v=>{this.patchState({item:v.data.item,errors:v.errors,loading:!1})},v=>this.patchState({loading:!1,errors:v.graphQLErrors?v.graphQLErrors:v})))))),this.loadInsurancesEffect=this.effect(m=>m.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.input$),(0,h.w)(([p,v])=>this.data.userInsurances({input:v}).pipe((0,b._b)(I=>this.patchState({paging:{limit:v.limit,skip:v.skip,total:I.data.count.total},insurances:I.data.items,errors:I.errors,loading:!1}),I=>this.patchState({loading:!1,errors:I.graphQLErrors?I.graphQLErrors:I})))))),this.createInsuranceEffect=this.effect(m=>m.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(p=>this.insuranceService.createInsurance(Object.assign({},p)).pipe((0,b._b)(v=>{this.addNewInsurance(v),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:v,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},v=>{v.graphQLErrors?(this.toast.error(v.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:v.graphQLErrors?v.graphQLErrors:v})):(this.toast.error(v.Message),this.formService.setErrors(v.Data))}))))),this.updateInsuranceEffect=this.effect(m=>m.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([p,v])=>this.insuranceService.updateInsurance(p,p.id).pipe((0,b._b)(I=>{this.updateInsurance(I),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:I,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},I=>{I.graphQLErrors?(this.toast.error(I.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:I.graphQLErrors?I.graphQLErrors:I})):(this.toast.error(I.Message),this.formService.setErrors(I.Data))}))))),this.deleteInsuranceEffect=this.effect(m=>m.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([p,v])=>this.data.userDeleteInsurance({insuranceId:v.id}).pipe((0,b._b)(I=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:I.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},I=>{I.graphQLErrors?(this.toast.error(I.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:I.graphQLErrors?I.graphQLErrors:I})):(this.toast.error(I.Message),this.formService.setErrors(I.Data))}))))),this.importExcelEffect=this.effect(m=>m.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(p=>this.insuranceService.importInsurances(p).pipe((0,de.K)(v=>{var I;return this.toast.error(null!==(I=v.Message)&&void 0!==I?I:"Failed to save",{duration:3e3}),q.E}),(0,y.b)(v=>{const I=JSON.parse(v.created),B=JSON.parse(v.updated),_e=JSON.parse(v.failed),Ne=I.length+B.length+_e.length;this.addInsurances(I),this.updateInsurances(B),this.toast.success(`${I.length} created, ${B.length} updated, ${_e.length} failed of total ${Ne}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("insuranceId")?(this.route.snapshot.paramMap.get("insuranceId"),this.setFormName("insurance_edit")):this.setFormName("insurance_create"),this.route.snapshot.paramMap.has("legalCaseId")){var c=this.route.snapshot.paramMap.get("legalCaseId");this.setLegalCaseId(c)}if(this.route.snapshot.paramMap.has("insuranceTypeId")){var u=this.route.snapshot.paramMap.get("insuranceTypeId");this.setInsuranceTypeId(u)}if(this.route.snapshot.paramMap.has("insuranceSectorId")){var n=this.route.snapshot.paramMap.get("insuranceSectorId");this.setInsuranceSectorId(n)}if(this.route.snapshot.paramMap.has("leadId")){var r=this.route.snapshot.paramMap.get("leadId");this.setLeadId(r)}}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.insuranceService.validateInsuranceExcelData(t,i.legalCases,i.insuranceTypes,i.insuranceSectors,i.leads)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(z.q),e.LFG(O.F0),e.LFG(O.gz),e.LFG(X.F),e.LFG(Z.o),e.LFG(YE))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function XE(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.close.emit())})("formIsReady",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.insurance)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let fc=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"insurance_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({id:null,name:""}),this.store.vm$.subscribe(i=>{this.insurance=i.item})):t.formName&&t.formName.currentValue&&"insurance_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadInsuranceEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.insurance=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(yo),e.Y36(O.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-insurance-form"]],inputs:{insurance:"insurance",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,XE,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[P.O5,te.M,P.Ov],encapsulation:2}),s})(),_c=(()=>{class s{constructor(){this.autoHeight=!1,this.insurances=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[{field:"legalCase.name",headerName:"Legal Case",filter:"agTextColumnFilter"},{field:"insuranceType.name",headerName:"Insurance Type",filter:"agTextColumnFilter"},{field:"insuranceSector.name",headerName:"Insurance Sector",filter:"agTextColumnFilter"},{field:"lead.name",headerName:"Lead",filter:"agTextColumnFilter"},{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{field:"legalCaseId",filter:"agTextColumnFilter",hide:!0},{field:"insuranceTypeId",filter:"agTextColumnFilter",hide:!0},{field:"insuranceSectorId",filter:"agTextColumnFilter",hide:!0},{field:"policyNumber",filter:"agTextColumnFilter"},{field:"insuranceCompany",filter:"agTextColumnFilter"},{headerName:"Minimum Coverage Amount",field:"minimumCoverageAmount",valueFormatter:t=>{var i;return(0,_.oBD)(null===(i=t.data)||void 0===i?void 0:i.minimumCoverageAmount,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{headerName:"Maximum Coverage Amount",field:"maximumCoverageAmount",valueFormatter:t=>{var i;return(0,_.oBD)(null===(i=t.data)||void 0===i?void 0:i.maximumCoverageAmount,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{headerName:"Is Stackable",field:"isStackable",filter:"agSetColumnFilter",cellRenderer:"checkboxRenderer"},{field:"adjuster",filter:"agTextColumnFilter"},{field:"leadId",filter:"agTextColumnFilter",hide:!0}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var a;t.includes(null===(a=i.data)||void 0===a?void 0:a.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-insurance-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(f.x,5),2&t){let a;e.iGM(a=e.CRH())&&(i.tableView=a.first)}},inputs:{autoHeight:"autoHeight",insurances:"insurances"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.insurances)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[f.x],encapsulation:2}),s})();function eO(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-insurance-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","insurance_edit")("formControl",t.formControl)("insurance",t.insurance)}}const tO=function(){return{}};function iO(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-insurance-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","insurance_create")("formControl",t.formControl)("insurance",e.DdM(3,tO))}}function sO(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-insurance-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(d.ref.close())}),e.qZA()}2&s&&e.Q6J("insurances",o.data.items)}let oO=(()=>{class s extends G.fS{constructor(t){super(),this.store=t,this.store.loadInsurancesEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.insurances$.pipe((0,h.w)(i=>(0,D.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(yo))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","insurance","send","close"],[1,"w-full","h-full","bg-white",3,"insurances","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,eO,2,3,"ng-template",null,1,e.W1O),e.YNc(3,iO,1,4,"ng-template",null,2,e.W1O),e.YNc(5,sO,1,1,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",d)("editTemplate",a)("createTemplate",l)("key",i.field.key)}},dependencies:[E.JJ,E.oH,H.$,fc,_c],encapsulation:2}),s})();function aO(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-insurance-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","insurance_edit")("insurance",t.value)}}const rO=function(){return{}};function nO(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-insurance-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","insurance_create")("insurance",e.DdM(2,rO))}function lO(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-insurance-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(null==d.ref?null:d.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("insurances",t.items)}}let cO=(()=>{class s extends pe{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:6,consts:[[3,"data","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","insurance","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","insurances","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,aO,1,2,"ng-template",null,1,e.W1O),e.YNc(3,nO,1,3,"ng-template",null,2,e.W1O),e.YNc(5,lO,1,2,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("data",i.data)("title",i.to.title)("onSave",i.onSave)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[he,fc,_c],encapsulation:2}),s})(),dO=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[yo],imports:[P.ez,U.F,E.UX,J.o,ae.u,$.P,j.t,me,k.h,se.G,G.X0.forChild({types:[{name:"insurance-select",component:oO,wrappers:["form-field"]},{name:"insurance-grid",component:cO}]})]}),s})(),uO=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[dO]}),s})();class di extends W.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class mO extends di{constructor(o){super("ValidateInsuranceSectorExcelDataAction"),this.valid=!1,this.excelData=o}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name)}),this.validationContext.addRule(new g.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof g.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(a=>a.name),newNames:[i.newName]}):i instanceof g.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,D.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class pO extends g.wS{constructor(o,t,i,a,l){super(o,t,i,a,l,!0)}}class hO extends g.ul{constructor(o,t,i,a=!1){super(o,t,a),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new g.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new pO("name","The insurancesector name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class fO extends di{constructor(o){super("CreateInsuranceSectorAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new hO("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateInsuranceSector({input:this.input}).pipe((0,h.w)(o=>(0,ue.of)(o.data.created)))}}class _O extends di{constructor(o){super("UpdateInsuranceSectorsAction"),this.insuranceSectors=o}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.insuranceSectors,!0))}performAction(){this.response=this.businessProvider.data.userUpdateInsuranceSectors({input:{insuranceSectors:this.insuranceSectors}}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}class gO extends di{constructor(o,t){super("UpdateInsuranceSectorAction"),this.insuranceSector=o,this.insuranceSectorId=t}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.insuranceSector,!0)).addRule(new g.xF("Id","Id should be a CUID and not null",this.insuranceSectorId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateInsuranceSector({insuranceSectorId:this.insuranceSectorId,input:this.insuranceSector}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}let gc=(()=>{class s extends W.nH{constructor(t,i,a){super("NotificationService.InsuranceSectorBusinessProviderService",t,a),this.data=i}createInsuranceSector(t){const i=new fO(t);return i.Do(this),i.response}updateInsuranceSector(t,i){const a=new gO(t,i);return a.Do(this),a.response}importInsuranceSectors(t){const i=new _O(t);return i.Do(this),i.response}validateInsuranceSectorExcelData(t){const i=new mO(t);return i.Do(this),i.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(K.ed),e.LFG(z.q),e.LFG(W.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),vO=(()=>{class s extends W.nH{constructor(t,i,a){super("InsuranceSectorService",a,t),this.businessProvider=i}createInsuranceSector(t){const i=Object.fromEntries(Object.entries(t).filter(([a,l])=>null!==l));return this.businessProvider.createInsuranceSector(i)}updateInsuranceSector(t,i){return this.businessProvider.updateInsuranceSector(t,i)}importInsuranceSectors(t){return this.businessProvider.importInsuranceSectors(t)}validateInsuranceSectorExcelData(t){return this.businessProvider.validateInsuranceSectorExcelData(t)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(gc,8),e.LFG(gc),e.LFG(K.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),wo=(()=>{class s extends b.m1{constructor(t,i,a,l,d,ee){super({loading:!1,insuranceSectors:[],done:!1,searchQuery:"",formName:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=a,this.toast=l,this.formService=d,this.insuranceSectorService=ee,this.errors$=this.select(c=>c.errors),this.loading$=this.select(c=>c.loading),this.done$=this.select(c=>c.done),this.item$=this.select(c=>c.item),this.insuranceSectors$=this.select(c=>c.insuranceSectors),this.paging$=this.select(c=>c.paging),this.searchQuery$=this.select(c=>c.searchQuery),this.formName$=this.select(c=>c.formName),this.actionResult$=this.select(this.item$,this.done$,(c,u)=>({item:c,done:u}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.insuranceSectors$,(c,u,n,r,m)=>({errors:c,loading:u,item:n,formName:r,insuranceSectors:m}),{debounce:!0}),this.input$=this.select(this.paging$,this.searchQuery$,(c,u)=>({limit:c.limit,skip:c.skip,name:u,total:c.total})),this.setFormName=this.updater((c,u)=>Object.assign(Object.assign({},c),{formName:u})),this.setItem=this.updater((c,u)=>Object.assign(Object.assign({},c),{item:u})),this.addNewInsuranceSector=this.updater((c,u)=>Object.assign(Object.assign({},c),{insuranceSectors:[...c.insuranceSectors,u]})),this.updateInsuranceSector=this.updater((c,u)=>Object.assign(Object.assign({},c),{insuranceSectors:c.insuranceSectors.map(n=>n.id===u.id?u:n)})),this.addInsuranceSectors=this.updater((c,u)=>Object.assign(Object.assign({},c),{insuranceSectors:c.insuranceSectors.concat(u)})),this.updateInsuranceSectors=this.updater((c,u)=>Object.assign(Object.assign({},c),{insuranceSectors:c.insuranceSectors.map(n=>u.find(m=>m.id===n.id)||n)})),this.setSearchQuery=this.updater((c,u)=>Object.assign(Object.assign({},c),{searchQuery:u})),this.loadInsuranceSectorEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.data.userInsuranceSector({insuranceSectorId:u}).pipe((0,b._b)(n=>{this.patchState({item:n.data.item,errors:n.errors,loading:!1})},n=>this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})))))),this.loadInsuranceSectorsEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.input$),(0,h.w)(([u,n])=>this.data.userInsuranceSectors({input:n}).pipe((0,b._b)(r=>this.patchState({paging:{limit:n.limit,skip:n.skip,total:r.data.count.total},insuranceSectors:r.data.items,errors:r.errors,loading:!1}),r=>this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})))))),this.createInsuranceSectorEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.insuranceSectorService.createInsuranceSector(Object.assign({},u)).pipe((0,b._b)(n=>{this.addNewInsuranceSector(n),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:n,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},n=>{n.graphQLErrors?(this.toast.error(n.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})):(this.toast.error(n.Message),this.formService.setErrors(n.Data))}))))),this.updateInsuranceSectorEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([u,n])=>this.insuranceSectorService.updateInsuranceSector(u,u.id).pipe((0,b._b)(r=>{this.updateInsuranceSector(r),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:r,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},r=>{r.graphQLErrors?(this.toast.error(r.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})):(this.toast.error(r.Message),this.formService.setErrors(r.Data))}))))),this.deleteInsuranceSectorEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([u,n])=>this.data.userDeleteInsuranceSector({insuranceSectorId:n.id}).pipe((0,b._b)(r=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:r.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},r=>{r.graphQLErrors?(this.toast.error(r.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})):(this.toast.error(r.Message),this.formService.setErrors(r.Data))}))))),this.importExcelEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.insuranceSectorService.importInsuranceSectors(u).pipe((0,de.K)(n=>{var r;return this.toast.error(null!==(r=n.Message)&&void 0!==r?r:"Failed to save",{duration:3e3}),q.E}),(0,y.b)(n=>{const r=JSON.parse(n.created),m=JSON.parse(n.updated),p=JSON.parse(n.failed),v=r.length+m.length+p.length;this.addInsuranceSectors(r),this.updateInsuranceSectors(m),this.toast.success(`${r.length} created, ${m.length} updated, ${p.length} failed of total ${v}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("insuranceSectorId")?(this.route.snapshot.paramMap.get("insuranceSectorId"),this.setFormName("insuranceSector_edit")):this.setFormName("insuranceSector_create")}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.insuranceSectorService.validateInsuranceSectorExcelData(t)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(z.q),e.LFG(O.F0),e.LFG(O.gz),e.LFG(X.F),e.LFG(Z.o),e.LFG(vO))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function CO(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.close.emit())})("formIsReady",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.insuranceSector)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let vc=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"insuranceSector_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.insuranceSector=i.item})):t.formName&&t.formName.currentValue&&"insuranceSector_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadInsuranceSectorEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.insuranceSector=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(wo),e.Y36(O.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-insurance-sector-form"]],inputs:{insuranceSector:"insuranceSector",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,CO,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[P.O5,te.M,P.Ov],encapsulation:2}),s})(),Cc=(()=>{class s{constructor(){this.autoHeight=!1,this.insuranceSectors=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[,{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var a;t.includes(null===(a=i.data)||void 0===a?void 0:a.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-insurance-sector-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(f.x,5),2&t){let a;e.iGM(a=e.CRH())&&(i.tableView=a.first)}},inputs:{autoHeight:"autoHeight",insuranceSectors:"insuranceSectors"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.insuranceSectors)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[f.x],encapsulation:2}),s})();function SO(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-insurance-sector-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","insuranceSector_edit")("formControl",t.formControl)("insuranceSector",t.insuranceSector)}}const bO=function(){return{}};function TO(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-insurance-sector-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","insuranceSector_create")("formControl",t.formControl)("insuranceSector",e.DdM(3,bO))}}function yO(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-insurance-sector-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(d.ref.close())}),e.qZA()}2&s&&e.Q6J("insuranceSectors",o.data.items)}let wO=(()=>{class s extends G.fS{constructor(t){super(),this.store=t,this.store.loadInsuranceSectorsEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.insuranceSectors$.pipe((0,h.w)(i=>(0,D.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(wo))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","insuranceSector","send","close"],[1,"w-full","h-full","bg-white",3,"insuranceSectors","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,SO,2,3,"ng-template",null,1,e.W1O),e.YNc(3,TO,1,4,"ng-template",null,2,e.W1O),e.YNc(5,yO,1,1,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",d)("editTemplate",a)("createTemplate",l)("key",i.field.key)}},dependencies:[E.JJ,E.oH,H.$,vc,Cc],encapsulation:2}),s})();function xO(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-insurance-sector-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","insuranceSector_edit")("insuranceSector",t.value)}}const NO=function(){return{}};function AO(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-insurance-sector-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","insuranceSector_create")("insuranceSector",e.DdM(2,NO))}function FO(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-insurance-sector-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(null==d.ref?null:d.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("insuranceSectors",t.items)}}let PO=(()=>{class s extends pe{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","insuranceSector","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","insuranceSectors","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,xO,1,2,"ng-template",null,1,e.W1O),e.YNc(3,AO,1,3,"ng-template",null,2,e.W1O),e.YNc(5,FO,1,2,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[he,vc,Cc],encapsulation:2}),s})(),IO=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[wo],imports:[P.ez,U.F,E.UX,J.o,ae.u,$.P,j.t,me,k.h,se.G,G.X0.forChild({types:[{name:"insurance-sector-select",component:wO,wrappers:["form-field"]},{name:"insurance-sector-grid",component:PO}]})]}),s})(),DO=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[IO]}),s})();class ui extends W.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class MO extends ui{constructor(o){super("ValidateInsuranceTypeExcelDataAction"),this.valid=!1,this.excelData=o}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name)}),this.validationContext.addRule(new g.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof g.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(a=>a.name),newNames:[i.newName]}):i instanceof g.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,D.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class WO extends g.wS{constructor(o,t,i,a,l){super(o,t,i,a,l,!0)}}class EO extends g.ul{constructor(o,t,i,a=!1){super(o,t,a),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new g.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new WO("name","The insurancetype name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class OO extends ui{constructor(o){super("CreateInsuranceTypeAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new EO("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateInsuranceType({input:this.input}).pipe((0,h.w)(o=>(0,ue.of)(o.data.created)))}}class LO extends ui{constructor(o){super("UpdateInsuranceTypesAction"),this.insuranceTypes=o}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.insuranceTypes,!0))}performAction(){this.response=this.businessProvider.data.userUpdateInsuranceTypes({input:{insuranceTypes:this.insuranceTypes}}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}class $O extends ui{constructor(o,t){super("UpdateInsuranceTypeAction"),this.insuranceType=o,this.insuranceTypeId=t}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.insuranceType,!0)).addRule(new g.xF("Id","Id should be a CUID and not null",this.insuranceTypeId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateInsuranceType({insuranceTypeId:this.insuranceTypeId,input:this.insuranceType}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}let Sc=(()=>{class s extends W.nH{constructor(t,i,a){super("NotificationService.InsuranceTypeBusinessProviderService",t,a),this.data=i}createInsuranceType(t){const i=new OO(t);return i.Do(this),i.response}updateInsuranceType(t,i){const a=new $O(t,i);return a.Do(this),a.response}importInsuranceTypes(t){const i=new LO(t);return i.Do(this),i.response}validateInsuranceTypeExcelData(t){const i=new MO(t);return i.Do(this),i.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(K.ed),e.LFG(z.q),e.LFG(W.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),GO=(()=>{class s extends W.nH{constructor(t,i,a){super("InsuranceTypeService",a,t),this.businessProvider=i}createInsuranceType(t){const i=Object.fromEntries(Object.entries(t).filter(([a,l])=>null!==l));return this.businessProvider.createInsuranceType(i)}updateInsuranceType(t,i){return this.businessProvider.updateInsuranceType(t,i)}importInsuranceTypes(t){return this.businessProvider.importInsuranceTypes(t)}validateInsuranceTypeExcelData(t){return this.businessProvider.validateInsuranceTypeExcelData(t)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(Sc,8),e.LFG(Sc),e.LFG(K.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),xo=(()=>{class s extends b.m1{constructor(t,i,a,l,d,ee){super({loading:!1,insuranceTypes:[],done:!1,searchQuery:"",formName:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=a,this.toast=l,this.formService=d,this.insuranceTypeService=ee,this.errors$=this.select(c=>c.errors),this.loading$=this.select(c=>c.loading),this.done$=this.select(c=>c.done),this.item$=this.select(c=>c.item),this.insuranceTypes$=this.select(c=>c.insuranceTypes),this.paging$=this.select(c=>c.paging),this.searchQuery$=this.select(c=>c.searchQuery),this.formName$=this.select(c=>c.formName),this.actionResult$=this.select(this.item$,this.done$,(c,u)=>({item:c,done:u}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.insuranceTypes$,(c,u,n,r,m)=>({errors:c,loading:u,item:n,formName:r,insuranceTypes:m}),{debounce:!0}),this.input$=this.select(this.paging$,this.searchQuery$,(c,u)=>({limit:c.limit,skip:c.skip,name:u,total:c.total})),this.setFormName=this.updater((c,u)=>Object.assign(Object.assign({},c),{formName:u})),this.setItem=this.updater((c,u)=>Object.assign(Object.assign({},c),{item:u})),this.addNewInsuranceType=this.updater((c,u)=>Object.assign(Object.assign({},c),{insuranceTypes:[...c.insuranceTypes,u]})),this.updateInsuranceType=this.updater((c,u)=>Object.assign(Object.assign({},c),{insuranceTypes:c.insuranceTypes.map(n=>n.id===u.id?u:n)})),this.addInsuranceTypes=this.updater((c,u)=>Object.assign(Object.assign({},c),{insuranceTypes:c.insuranceTypes.concat(u)})),this.updateInsuranceTypes=this.updater((c,u)=>Object.assign(Object.assign({},c),{insuranceTypes:c.insuranceTypes.map(n=>u.find(m=>m.id===n.id)||n)})),this.setSearchQuery=this.updater((c,u)=>Object.assign(Object.assign({},c),{searchQuery:u})),this.loadInsuranceTypeEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.data.userInsuranceType({insuranceTypeId:u}).pipe((0,b._b)(n=>{this.patchState({item:n.data.item,errors:n.errors,loading:!1})},n=>this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})))))),this.loadInsuranceTypesEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.input$),(0,h.w)(([u,n])=>this.data.userInsuranceTypes({input:n}).pipe((0,b._b)(r=>this.patchState({paging:{limit:n.limit,skip:n.skip,total:r.data.count.total},insuranceTypes:r.data.items,errors:r.errors,loading:!1}),r=>this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})))))),this.createInsuranceTypeEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.insuranceTypeService.createInsuranceType(Object.assign({},u)).pipe((0,b._b)(n=>{this.addNewInsuranceType(n),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:n,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},n=>{n.graphQLErrors?(this.toast.error(n.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})):(this.toast.error(n.Message),this.formService.setErrors(n.Data))}))))),this.updateInsuranceTypeEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([u,n])=>this.insuranceTypeService.updateInsuranceType(u,u.id).pipe((0,b._b)(r=>{this.updateInsuranceType(r),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:r,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},r=>{r.graphQLErrors?(this.toast.error(r.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})):(this.toast.error(r.Message),this.formService.setErrors(r.Data))}))))),this.deleteInsuranceTypeEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([u,n])=>this.data.userDeleteInsuranceType({insuranceTypeId:n.id}).pipe((0,b._b)(r=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:r.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},r=>{r.graphQLErrors?(this.toast.error(r.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})):(this.toast.error(r.Message),this.formService.setErrors(r.Data))}))))),this.importExcelEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.insuranceTypeService.importInsuranceTypes(u).pipe((0,de.K)(n=>{var r;return this.toast.error(null!==(r=n.Message)&&void 0!==r?r:"Failed to save",{duration:3e3}),q.E}),(0,y.b)(n=>{const r=JSON.parse(n.created),m=JSON.parse(n.updated),p=JSON.parse(n.failed),v=r.length+m.length+p.length;this.addInsuranceTypes(r),this.updateInsuranceTypes(m),this.toast.success(`${r.length} created, ${m.length} updated, ${p.length} failed of total ${v}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("insuranceTypeId")?(this.route.snapshot.paramMap.get("insuranceTypeId"),this.setFormName("insuranceType_edit")):this.setFormName("insuranceType_create")}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.insuranceTypeService.validateInsuranceTypeExcelData(t)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(z.q),e.LFG(O.F0),e.LFG(O.gz),e.LFG(X.F),e.LFG(Z.o),e.LFG(GO))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function RO(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.close.emit())})("formIsReady",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.insuranceType)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let bc=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"insuranceType_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.insuranceType=i.item})):t.formName&&t.formName.currentValue&&"insuranceType_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadInsuranceTypeEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.insuranceType=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(xo),e.Y36(O.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-insurance-type-form"]],inputs:{insuranceType:"insuranceType",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,RO,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[P.O5,te.M,P.Ov],encapsulation:2}),s})(),Tc=(()=>{class s{constructor(){this.autoHeight=!1,this.insuranceTypes=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[,{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var a;t.includes(null===(a=i.data)||void 0===a?void 0:a.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-insurance-type-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(f.x,5),2&t){let a;e.iGM(a=e.CRH())&&(i.tableView=a.first)}},inputs:{autoHeight:"autoHeight",insuranceTypes:"insuranceTypes"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.insuranceTypes)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[f.x],encapsulation:2}),s})();function QO(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-insurance-type-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","insuranceType_edit")("formControl",t.formControl)("insuranceType",t.insuranceType)}}const VO=function(){return{}};function jO(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-insurance-type-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","insuranceType_create")("formControl",t.formControl)("insuranceType",e.DdM(3,VO))}}function UO(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-insurance-type-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(d.ref.close())}),e.qZA()}2&s&&e.Q6J("insuranceTypes",o.data.items)}let JO=(()=>{class s extends G.fS{constructor(t){super(),this.store=t,this.store.loadInsuranceTypesEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.insuranceTypes$.pipe((0,h.w)(i=>(0,D.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(xo))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","insuranceType","send","close"],[1,"w-full","h-full","bg-white",3,"insuranceTypes","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,QO,2,3,"ng-template",null,1,e.W1O),e.YNc(3,jO,1,4,"ng-template",null,2,e.W1O),e.YNc(5,UO,1,1,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",d)("editTemplate",a)("createTemplate",l)("key",i.field.key)}},dependencies:[E.JJ,E.oH,H.$,bc,Tc],encapsulation:2}),s})();function zO(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-insurance-type-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","insuranceType_edit")("insuranceType",t.value)}}const HO=function(){return{}};function qO(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-insurance-type-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","insuranceType_create")("insuranceType",e.DdM(2,HO))}function KO(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-insurance-type-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(null==d.ref?null:d.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("insuranceTypes",t.items)}}let ZO=(()=>{class s extends pe{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","insuranceType","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","insuranceTypes","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,zO,1,2,"ng-template",null,1,e.W1O),e.YNc(3,qO,1,3,"ng-template",null,2,e.W1O),e.YNc(5,KO,1,2,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[he,bc,Tc],encapsulation:2}),s})(),BO=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[xo],imports:[P.ez,U.F,E.UX,J.o,ae.u,$.P,j.t,me,k.h,se.G,G.X0.forChild({types:[{name:"insurance-type-select",component:JO,wrappers:["form-field"]},{name:"insurance-type-grid",component:ZO}]})]}),s})(),kO=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[BO]}),s})();class mi extends W.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class YO extends mi{constructor(o){super("ValidateIntegrationExcelDataAction"),this.valid=!1,this.excelData=o}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name)}),this.validationContext.addRule(new g.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof g.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(a=>a.name),newNames:[i.newName]}):i instanceof g.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,D.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class XO extends g.wS{constructor(o,t,i,a,l){super(o,t,i,a,l,!0)}}class eL extends g.ul{constructor(o,t,i,a=!1){super(o,t,a),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new g.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new XO("name","The integration name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class tL extends mi{constructor(o){super("CreateIntegrationAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new eL("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateIntegration({input:this.input}).pipe((0,h.w)(o=>(0,ue.of)(o.data.created)))}}class iL extends mi{constructor(o){super("UpdateIntegrationsAction"),this.integrations=o}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.integrations,!0))}performAction(){this.response=this.businessProvider.data.userUpdateIntegrations({input:{integrations:this.integrations}}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}class sL extends mi{constructor(o,t){super("UpdateIntegrationAction"),this.integration=o,this.integrationId=t}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.integration,!0)).addRule(new g.xF("Id","Id should be a CUID and not null",this.integrationId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateIntegration({integrationId:this.integrationId,input:this.integration}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}let yc=(()=>{class s extends W.nH{constructor(t,i,a){super("NotificationService.IntegrationBusinessProviderService",t,a),this.data=i}createIntegration(t){const i=new tL(t);return i.Do(this),i.response}updateIntegration(t,i){const a=new sL(t,i);return a.Do(this),a.response}importIntegrations(t){const i=new iL(t);return i.Do(this),i.response}validateIntegrationExcelData(t){const i=new YO(t);return i.Do(this),i.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(K.ed),e.LFG(z.q),e.LFG(W.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),oL=(()=>{class s extends W.nH{constructor(t,i,a){super("IntegrationService",a,t),this.businessProvider=i}createIntegration(t){const i=Object.fromEntries(Object.entries(t).filter(([a,l])=>null!==l));return this.businessProvider.createIntegration(i)}updateIntegration(t,i){return this.businessProvider.updateIntegration(t,i)}importIntegrations(t){return this.businessProvider.importIntegrations(t)}validateIntegrationExcelData(t){return this.businessProvider.validateIntegrationExcelData(t)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(yc,8),e.LFG(yc),e.LFG(K.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),No=(()=>{class s extends b.m1{constructor(t,i,a,l,d,ee){super({loading:!1,integrations:[],done:!1,searchQuery:"",formName:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=a,this.toast=l,this.formService=d,this.integrationService=ee,this.errors$=this.select(c=>c.errors),this.loading$=this.select(c=>c.loading),this.done$=this.select(c=>c.done),this.item$=this.select(c=>c.item),this.integrations$=this.select(c=>c.integrations),this.paging$=this.select(c=>c.paging),this.searchQuery$=this.select(c=>c.searchQuery),this.formName$=this.select(c=>c.formName),this.actionResult$=this.select(this.item$,this.done$,(c,u)=>({item:c,done:u}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.integrations$,(c,u,n,r,m)=>({errors:c,loading:u,item:n,formName:r,integrations:m}),{debounce:!0}),this.input$=this.select(this.paging$,this.searchQuery$,(c,u)=>({limit:c.limit,skip:c.skip,name:u,total:c.total})),this.setFormName=this.updater((c,u)=>Object.assign(Object.assign({},c),{formName:u})),this.setItem=this.updater((c,u)=>Object.assign(Object.assign({},c),{item:u})),this.addNewIntegration=this.updater((c,u)=>Object.assign(Object.assign({},c),{integrations:[...c.integrations,u]})),this.updateIntegration=this.updater((c,u)=>Object.assign(Object.assign({},c),{integrations:c.integrations.map(n=>n.id===u.id?u:n)})),this.addIntegrations=this.updater((c,u)=>Object.assign(Object.assign({},c),{integrations:c.integrations.concat(u)})),this.updateIntegrations=this.updater((c,u)=>Object.assign(Object.assign({},c),{integrations:c.integrations.map(n=>u.find(m=>m.id===n.id)||n)})),this.setSearchQuery=this.updater((c,u)=>Object.assign(Object.assign({},c),{searchQuery:u})),this.loadIntegrationEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.data.userIntegration({integrationId:u}).pipe((0,b._b)(n=>{this.patchState({item:n.data.item,errors:n.errors,loading:!1})},n=>this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})))))),this.loadIntegrationsEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.input$),(0,h.w)(([u,n])=>this.data.userIntegrations({input:n}).pipe((0,b._b)(r=>this.patchState({paging:{limit:n.limit,skip:n.skip,total:r.data.count.total},integrations:r.data.items,errors:r.errors,loading:!1}),r=>this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})))))),this.createIntegrationEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.integrationService.createIntegration(Object.assign({},u)).pipe((0,b._b)(n=>{this.addNewIntegration(n),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:n,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},n=>{n.graphQLErrors?(this.toast.error(n.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})):(this.toast.error(n.Message),this.formService.setErrors(n.Data))}))))),this.updateIntegrationEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([u,n])=>this.integrationService.updateIntegration(u,u.id).pipe((0,b._b)(r=>{this.updateIntegration(r),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:r,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},r=>{r.graphQLErrors?(this.toast.error(r.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})):(this.toast.error(r.Message),this.formService.setErrors(r.Data))}))))),this.deleteIntegrationEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([u,n])=>this.data.userDeleteIntegration({integrationId:n.id}).pipe((0,b._b)(r=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:r.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},r=>{r.graphQLErrors?(this.toast.error(r.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})):(this.toast.error(r.Message),this.formService.setErrors(r.Data))}))))),this.importExcelEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.integrationService.importIntegrations(u).pipe((0,de.K)(n=>{var r;return this.toast.error(null!==(r=n.Message)&&void 0!==r?r:"Failed to save",{duration:3e3}),q.E}),(0,y.b)(n=>{const r=JSON.parse(n.created),m=JSON.parse(n.updated),p=JSON.parse(n.failed),v=r.length+m.length+p.length;this.addIntegrations(r),this.updateIntegrations(m),this.toast.success(`${r.length} created, ${m.length} updated, ${p.length} failed of total ${v}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("integrationId")?(this.route.snapshot.paramMap.get("integrationId"),this.setFormName("integration_edit")):this.setFormName("integration_create")}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.integrationService.validateIntegrationExcelData(t)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(z.q),e.LFG(O.F0),e.LFG(O.gz),e.LFG(X.F),e.LFG(Z.o),e.LFG(oL))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function aL(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.close.emit())})("formIsReady",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.integration)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let wc=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"integration_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.integration=i.item})):t.formName&&t.formName.currentValue&&"integration_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadIntegrationEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.integration=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(No),e.Y36(O.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-integration-form"]],inputs:{integration:"integration",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,aL,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[P.O5,te.M,P.Ov],encapsulation:2}),s})(),xc=(()=>{class s{constructor(){this.autoHeight=!1,this.integrations=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[,{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var a;t.includes(null===(a=i.data)||void 0===a?void 0:a.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-integration-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(f.x,5),2&t){let a;e.iGM(a=e.CRH())&&(i.tableView=a.first)}},inputs:{autoHeight:"autoHeight",integrations:"integrations"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.integrations)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[f.x],encapsulation:2}),s})();function rL(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-integration-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","integration_edit")("formControl",t.formControl)("integration",t.integration)}}const nL=function(){return{}};function lL(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-integration-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","integration_create")("formControl",t.formControl)("integration",e.DdM(3,nL))}}function cL(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-integration-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(d.ref.close())}),e.qZA()}2&s&&e.Q6J("integrations",o.data.items)}let dL=(()=>{class s extends G.fS{constructor(t){super(),this.store=t,this.store.loadIntegrationsEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.integrations$.pipe((0,h.w)(i=>(0,D.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(No))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","integration","send","close"],[1,"w-full","h-full","bg-white",3,"integrations","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,rL,2,3,"ng-template",null,1,e.W1O),e.YNc(3,lL,1,4,"ng-template",null,2,e.W1O),e.YNc(5,cL,1,1,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",d)("editTemplate",a)("createTemplate",l)("key",i.field.key)}},dependencies:[E.JJ,E.oH,H.$,wc,xc],encapsulation:2}),s})();function uL(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-integration-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","integration_edit")("integration",t.value)}}const mL=function(){return{}};function pL(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-integration-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","integration_create")("integration",e.DdM(2,mL))}function hL(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-integration-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(null==d.ref?null:d.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("integrations",t.items)}}let fL=(()=>{class s extends pe{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","integration","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","integrations","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,uL,1,2,"ng-template",null,1,e.W1O),e.YNc(3,pL,1,3,"ng-template",null,2,e.W1O),e.YNc(5,hL,1,2,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[he,wc,xc],encapsulation:2}),s})(),_L=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[No],imports:[P.ez,U.F,E.UX,J.o,ae.u,$.P,j.t,me,k.h,se.G,G.X0.forChild({types:[{name:"integration-select",component:dL,wrappers:["form-field"]},{name:"integration-grid",component:fL}]})]}),s})(),gL=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[_L]}),s})();class pi extends W.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class vL extends pi{constructor(o,t){super("ValidateInvoiceDetailExcelDataAction"),this.valid=!1,this.excelData=o,this.invoices=t}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name),this.validationContext.addRule(new g.mi(`invoiceName_${i}_is_valid}`,"Invoice Is Not Valid","invoice.name",t.invoice,this.invoices,!0))}),this.validationContext.addRule(new g.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof g.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(a=>a.name),newNames:[i.newName]}):i instanceof g.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,D.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class CL extends g.wS{constructor(o,t,i,a,l){super(o,t,i,a,l,!0)}}class SL extends g.ul{constructor(o,t,i,a=!1){super(o,t,a),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new g.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new CL("name","The invoicedetail name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class bL extends pi{constructor(o){super("CreateInvoiceDetailAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new SL("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateInvoiceDetail({input:this.input}).pipe((0,h.w)(o=>(0,ue.of)(o.data.created)))}}class TL extends pi{constructor(o){super("UpdateInvoiceDetailsAction"),this.invoiceDetails=o}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.invoiceDetails,!0))}performAction(){this.response=this.businessProvider.data.userUpdateInvoiceDetails({input:{invoiceDetails:this.invoiceDetails}}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}class yL extends pi{constructor(o,t){super("UpdateInvoiceDetailAction"),this.invoiceDetail=o,this.invoiceDetailId=t}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.invoiceDetail,!0)).addRule(new g.xF("Id","Id should be a CUID and not null",this.invoiceDetailId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateInvoiceDetail({invoiceDetailId:this.invoiceDetailId,input:this.invoiceDetail}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}let Nc=(()=>{class s extends W.nH{constructor(t,i,a){super("NotificationService.InvoiceDetailBusinessProviderService",t,a),this.data=i}createInvoiceDetail(t){const i=new bL(t);return i.Do(this),i.response}updateInvoiceDetail(t,i){const a=new yL(t,i);return a.Do(this),a.response}importInvoiceDetails(t){const i=new TL(t);return i.Do(this),i.response}validateInvoiceDetailExcelData(t,i){const a=new vL(t,i);return a.Do(this),a.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(K.ed),e.LFG(z.q),e.LFG(W.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),wL=(()=>{class s extends W.nH{constructor(t,i,a){super("InvoiceDetailService",a,t),this.businessProvider=i}createInvoiceDetail(t){const i=Object.fromEntries(Object.entries(t).filter(([a,l])=>null!==l));return this.businessProvider.createInvoiceDetail(i)}updateInvoiceDetail(t,i){return this.businessProvider.updateInvoiceDetail(t,i)}importInvoiceDetails(t){return this.businessProvider.importInvoiceDetails(t)}validateInvoiceDetailExcelData(t,i){return this.businessProvider.validateInvoiceDetailExcelData(t,i)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(Nc,8),e.LFG(Nc),e.LFG(K.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),Ao=(()=>{class s extends b.m1{constructor(t,i,a,l,d,ee){if(super({loading:!1,invoiceDetails:[],done:!1,searchQuery:"",formName:void 0,invoiceId:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=a,this.toast=l,this.formService=d,this.invoiceDetailService=ee,this.errors$=this.select(u=>u.errors),this.loading$=this.select(u=>u.loading),this.done$=this.select(u=>u.done),this.item$=this.select(u=>u.item),this.invoiceDetails$=this.select(u=>u.invoiceDetails),this.invoices$=this.select(u=>u.invoices||[]),this.invoiceId$=this.select(u=>u.invoiceId),this.paging$=this.select(u=>u.paging),this.searchQuery$=this.select(u=>u.searchQuery),this.formName$=this.select(u=>u.formName),this.actionResult$=this.select(this.item$,this.done$,(u,n)=>({item:u,done:n}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.invoiceDetails$,this.invoices$,(u,n,r,m,p,v)=>({errors:u,loading:n,item:r,formName:m,invoiceDetails:p,invoices:v}),{debounce:!0}),this.input$=this.select(this.paging$,this.invoiceId$,this.searchQuery$,(u,n,r)=>({limit:u.limit,skip:u.skip,name:r,invoiceId:n,total:u.total})),this.setFormName=this.updater((u,n)=>Object.assign(Object.assign({},u),{formName:n})),this.setInvoiceId=this.updater((u,n)=>Object.assign(Object.assign({},u),{invoiceId:n})),this.filterInvoices=u=>this.data.userSelectInvoices({input:{name:u}}).pipe((0,b._b)(n=>{let r=n.data.items;return this.patchState({invoices:r}),r},n=>this.patchState({errors:n.graphQLErrors?n.graphQLErrors:n})),(0,fe.U)(n=>n.data.items)),this.addInvoice=this.updater((u,n)=>Object.assign(Object.assign({},u),{invoices:u.invoices.concat(n)})),this.setItem=this.updater((u,n)=>Object.assign(Object.assign({},u),{item:n})),this.addNewInvoiceDetail=this.updater((u,n)=>Object.assign(Object.assign({},u),{invoiceDetails:[...u.invoiceDetails,n]})),this.updateInvoiceDetail=this.updater((u,n)=>Object.assign(Object.assign({},u),{invoiceDetails:u.invoiceDetails.map(r=>r.id===n.id?n:r)})),this.addInvoiceDetails=this.updater((u,n)=>Object.assign(Object.assign({},u),{invoiceDetails:u.invoiceDetails.concat(n)})),this.updateInvoiceDetails=this.updater((u,n)=>Object.assign(Object.assign({},u),{invoiceDetails:u.invoiceDetails.map(r=>n.find(p=>p.id===r.id)||r)})),this.setSearchQuery=this.updater((u,n)=>Object.assign(Object.assign({},u),{searchQuery:n})),this.loadInvoiceDetailEffect=this.effect(u=>u.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(n=>this.data.userInvoiceDetail({invoiceDetailId:n}).pipe((0,b._b)(r=>{this.patchState({item:r.data.item,errors:r.errors,loading:!1})},r=>this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})))))),this.loadInvoiceDetailsEffect=this.effect(u=>u.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.input$),(0,h.w)(([n,r])=>this.data.userInvoiceDetails({input:r}).pipe((0,b._b)(m=>this.patchState({paging:{limit:r.limit,skip:r.skip,total:m.data.count.total},invoiceDetails:m.data.items,errors:m.errors,loading:!1}),m=>this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})))))),this.createInvoiceDetailEffect=this.effect(u=>u.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(n=>this.invoiceDetailService.createInvoiceDetail(Object.assign({},n)).pipe((0,b._b)(r=>{this.addNewInvoiceDetail(r),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:r,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},r=>{r.graphQLErrors?(this.toast.error(r.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})):(this.toast.error(r.Message),this.formService.setErrors(r.Data))}))))),this.updateInvoiceDetailEffect=this.effect(u=>u.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([n,r])=>this.invoiceDetailService.updateInvoiceDetail(n,n.id).pipe((0,b._b)(m=>{this.updateInvoiceDetail(m),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:m,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},m=>{m.graphQLErrors?(this.toast.error(m.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})):(this.toast.error(m.Message),this.formService.setErrors(m.Data))}))))),this.deleteInvoiceDetailEffect=this.effect(u=>u.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([n,r])=>this.data.userDeleteInvoiceDetail({invoiceDetailId:r.id}).pipe((0,b._b)(m=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:m.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},m=>{m.graphQLErrors?(this.toast.error(m.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})):(this.toast.error(m.Message),this.formService.setErrors(m.Data))}))))),this.importExcelEffect=this.effect(u=>u.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(n=>this.invoiceDetailService.importInvoiceDetails(n).pipe((0,de.K)(r=>{var m;return this.toast.error(null!==(m=r.Message)&&void 0!==m?m:"Failed to save",{duration:3e3}),q.E}),(0,y.b)(r=>{const m=JSON.parse(r.created),p=JSON.parse(r.updated),v=JSON.parse(r.failed),I=m.length+p.length+v.length;this.addInvoiceDetails(m),this.updateInvoiceDetails(p),this.toast.success(`${m.length} created, ${p.length} updated, ${v.length} failed of total ${I}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("invoiceDetailId")?(this.route.snapshot.paramMap.get("invoiceDetailId"),this.setFormName("invoiceDetail_edit")):this.setFormName("invoiceDetail_create"),this.route.snapshot.paramMap.has("invoiceId")){var c=this.route.snapshot.paramMap.get("invoiceId");this.setInvoiceId(c)}}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.invoiceDetailService.validateInvoiceDetailExcelData(t,i.invoices)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(z.q),e.LFG(O.F0),e.LFG(O.gz),e.LFG(X.F),e.LFG(Z.o),e.LFG(wL))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function xL(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.close.emit())})("formIsReady",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.invoiceDetail)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let Ac=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"invoiceDetail_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({id:null,name:""}),this.store.vm$.subscribe(i=>{this.invoiceDetail=i.item})):t.formName&&t.formName.currentValue&&"invoiceDetail_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadInvoiceDetailEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.invoiceDetail=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Ao),e.Y36(O.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-invoice-detail-form"]],inputs:{invoiceDetail:"invoiceDetail",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,xL,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[P.O5,te.M,P.Ov],encapsulation:2}),s})(),Fc=(()=>{class s{constructor(){this.autoHeight=!1,this.invoiceDetails=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[{field:"invoice.name",headerName:"Invoice",filter:"agTextColumnFilter"},{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{field:"invoiceId",filter:"agTextColumnFilter",hide:!0},{field:"dateOfService",filter:"agDateColumnFilter"},{field:"providerName",filter:"agTextColumnFilter"},{field:"procedureDescription",filter:"agTextColumnFilter"},{headerName:"Quantity",field:"quantity",valueFormatter:t=>{var i;return(0,_.oBD)(null===(i=t.data)||void 0===i?void 0:i.quantity,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{headerName:"Charges",field:"charges",valueFormatter:t=>{var i;return(0,_.oBD)(null===(i=t.data)||void 0===i?void 0:i.charges,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{headerName:"Line Total",field:"lineTotal",valueFormatter:t=>{var i;return(0,_.oBD)(null===(i=t.data)||void 0===i?void 0:i.lineTotal,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var a;t.includes(null===(a=i.data)||void 0===a?void 0:a.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-invoice-detail-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(f.x,5),2&t){let a;e.iGM(a=e.CRH())&&(i.tableView=a.first)}},inputs:{autoHeight:"autoHeight",invoiceDetails:"invoiceDetails"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:6,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.invoiceDetails)("showSidebar",!1)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[f.x],encapsulation:2}),s})();function NL(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-invoice-detail-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","invoiceDetail_edit")("formControl",t.formControl)("invoiceDetail",t.invoiceDetail)}}const AL=function(){return{}};function FL(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-invoice-detail-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","invoiceDetail_create")("formControl",t.formControl)("invoiceDetail",e.DdM(3,AL))}}function PL(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-invoice-detail-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(d.ref.close())}),e.qZA()}2&s&&e.Q6J("invoiceDetails",o.data.items)}let IL=(()=>{class s extends G.fS{constructor(t){super(),this.store=t,this.store.loadInvoiceDetailsEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.invoiceDetails$.pipe((0,h.w)(i=>(0,D.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Ao))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:5,consts:[[3,"to","control","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","invoiceDetail","send","close"],[1,"w-full","h-full","bg-white",3,"invoiceDetails","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"ui-select-form",0),e.YNc(1,NL,2,3,"ng-template",null,1,e.W1O),e.YNc(3,FL,1,4,"ng-template",null,2,e.W1O),e.YNc(5,PL,1,1,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[E.JJ,E.oH,H.$,Ac,Fc],encapsulation:2}),s})();function DL(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-invoice-detail-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","invoiceDetail_edit")("invoiceDetail",t.value)}}const ML=function(){return{}};function WL(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-invoice-detail-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","invoiceDetail_create")("invoiceDetail",e.DdM(2,ML))}function EL(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-invoice-detail-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(null==d.ref?null:d.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("invoiceDetails",t.items)}}let OL=(()=>{class s extends pe{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:6,consts:[[3,"data","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","invoiceDetail","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","invoiceDetails","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,DL,1,2,"ng-template",null,1,e.W1O),e.YNc(3,WL,1,3,"ng-template",null,2,e.W1O),e.YNc(5,EL,1,2,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("data",i.data)("title",i.to.title)("onSave",i.onSave)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[he,Ac,Fc],encapsulation:2}),s})(),LL=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[Ao],imports:[P.ez,U.F,E.UX,J.o,ae.u,$.P,j.t,me,k.h,se.G,G.X0.forChild({types:[{name:"invoice-detail-select",component:IL,wrappers:["form-field"]},{name:"invoice-detail-grid",component:OL}]})]}),s})(),$L=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[LL]}),s})();var Fo=M(11913);function GL(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.close.emit())})("formIsReady",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.invoice)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let Pc=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"invoice_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({id:null,name:""}),this.store.vm$.subscribe(i=>{this.invoice=i.item})):t.formName&&t.formName.currentValue&&"invoice_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadInvoiceEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.invoice=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Fo.I),e.Y36(O.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-invoice-form"]],inputs:{invoice:"invoice",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,GL,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[P.O5,te.M,P.Ov],encapsulation:2}),s})(),Ic=(()=>{class s{constructor(){this.autoHeight=!1,this.invoices=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[{field:"billingOrganization.name",headerName:"Billing Organization",filter:"agTextColumnFilter"},{field:"clinicalProvider.name",headerName:"Clinical Provider",filter:"agTextColumnFilter"},{field:"legalCase.name",headerName:"Legal Case",filter:"agTextColumnFilter"},{field:"invoice.name",headerName:"Invoice",filter:"agTextColumnFilter"},{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{field:"invoiceNumber",filter:"agTextColumnFilter"},{headerName:"Amount",field:"amount",valueFormatter:t=>{var i;return(0,_.oBD)(null===(i=t.data)||void 0===i?void 0:i.amount,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{headerName:"Paid",field:"paid",valueFormatter:t=>{var i;return(0,_.oBD)(null===(i=t.data)||void 0===i?void 0:i.paid,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{headerName:"Due",field:"due",valueFormatter:t=>{var i;return(0,_.oBD)(null===(i=t.data)||void 0===i?void 0:i.due,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{field:"organizationId",filter:"agTextColumnFilter",hide:!0},{field:"legalCaseId",filter:"agTextColumnFilter",hide:!0},{field:"invoiceId",filter:"agTextColumnFilter",hide:!0}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var a;t.includes(null===(a=i.data)||void 0===a?void 0:a.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-invoice-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(f.x,5),2&t){let a;e.iGM(a=e.CRH())&&(i.tableView=a.first)}},inputs:{autoHeight:"autoHeight",invoices:"invoices"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.invoices)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[f.x],encapsulation:2}),s})();function RL(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-invoice-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","invoice_edit")("formControl",t.formControl)("invoice",t.invoice)}}const QL=function(){return{}};function VL(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-invoice-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","invoice_create")("formControl",t.formControl)("invoice",e.DdM(3,QL))}}function jL(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-invoice-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(d.ref.close())}),e.qZA()}2&s&&e.Q6J("invoices",o.data.items)}let UL=(()=>{class s extends G.fS{constructor(t){super(),this.store=t,this.store.loadInvoicesEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.invoices$.pipe((0,h.w)(i=>(0,D.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Fo.I))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:5,consts:[[3,"to","control","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","invoice","send","close"],[1,"w-full","h-full","bg-white",3,"invoices","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"ui-select-form",0),e.YNc(1,RL,2,3,"ng-template",null,1,e.W1O),e.YNc(3,VL,1,4,"ng-template",null,2,e.W1O),e.YNc(5,jL,1,1,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[E.JJ,E.oH,H.$,Pc,Ic],encapsulation:2}),s})();function JL(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-invoice-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","invoice_edit")("invoice",t.value)}}const zL=function(){return{}};function HL(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-invoice-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","invoice_create")("invoice",e.DdM(2,zL))}function qL(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-invoice-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(null==d.ref?null:d.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("invoices",t.items)}}let KL=(()=>{class s extends pe{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:6,consts:[[3,"data","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","invoice","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","invoices","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,JL,1,2,"ng-template",null,1,e.W1O),e.YNc(3,HL,1,3,"ng-template",null,2,e.W1O),e.YNc(5,qL,1,2,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("data",i.data)("title",i.to.title)("onSave",i.onSave)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[he,Pc,Ic],encapsulation:2}),s})(),ZL=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[Fo.I],imports:[P.ez,U.F,E.UX,J.o,ae.u,$.P,j.t,me,k.h,se.G,G.X0.forChild({types:[{name:"invoice-select",component:UL,wrappers:["form-field"]},{name:"invoice-grid",component:KL}]})]}),s})(),BL=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[ZL]}),s})();class hi extends W.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class kL extends hi{constructor(o,t){super("ValidateJournalEntryExcelDataAction"),this.valid=!1,this.excelData=o,this.caseAccounts=t}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name),this.validationContext.addRule(new g.mi(`caseAccountName_${i}_is_valid}`,"Case Account Is Not Valid","caseAccount.name",t.caseAccount,this.caseAccounts,!0))}),this.validationContext.addRule(new g.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof g.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(a=>a.name),newNames:[i.newName]}):i instanceof g.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,D.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class YL extends g.wS{constructor(o,t,i,a,l){super(o,t,i,a,l,!0)}}class XL extends g.ul{constructor(o,t,i,a=!1){super(o,t,a),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new g.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new YL("name","The journalentry name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class e$ extends hi{constructor(o){super("CreateJournalEntryAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new XL("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateJournalEntry({input:this.input}).pipe((0,h.w)(o=>(0,ue.of)(o.data.created)))}}class t$ extends hi{constructor(o){super("UpdateJournalEntriesAction"),this.journalEntries=o}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.journalEntries,!0))}performAction(){this.response=this.businessProvider.data.userUpdateJournalEntries({input:{journalEntries:this.journalEntries}}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}class i$ extends hi{constructor(o,t){super("UpdateJournalEntryAction"),this.journalEntry=o,this.journalEntryId=t}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.journalEntry,!0)).addRule(new g.xF("Id","Id should be a CUID and not null",this.journalEntryId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateJournalEntry({journalEntryId:this.journalEntryId,input:this.journalEntry}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}let Dc=(()=>{class s extends W.nH{constructor(t,i,a){super("NotificationService.JournalEntryBusinessProviderService",t,a),this.data=i}createJournalEntry(t){const i=new e$(t);return i.Do(this),i.response}updateJournalEntry(t,i){const a=new i$(t,i);return a.Do(this),a.response}importJournalEntries(t){const i=new t$(t);return i.Do(this),i.response}validateJournalEntryExcelData(t,i){const a=new kL(t,i);return a.Do(this),a.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(K.ed),e.LFG(z.q),e.LFG(W.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),s$=(()=>{class s extends W.nH{constructor(t,i,a){super("JournalEntryService",a,t),this.businessProvider=i}createJournalEntry(t){const i=Object.fromEntries(Object.entries(t).filter(([a,l])=>null!==l));return this.businessProvider.createJournalEntry(i)}updateJournalEntry(t,i){return this.businessProvider.updateJournalEntry(t,i)}importJournalEntries(t){return this.businessProvider.importJournalEntries(t)}validateJournalEntryExcelData(t,i){return this.businessProvider.validateJournalEntryExcelData(t,i)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(Dc,8),e.LFG(Dc),e.LFG(K.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),Po=(()=>{class s extends b.m1{constructor(t,i,a,l,d,ee){if(super({loading:!1,journalEntries:[],done:!1,searchQuery:"",formName:void 0,caseAccountId:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=a,this.toast=l,this.formService=d,this.journalEntryService=ee,this.errors$=this.select(u=>u.errors),this.loading$=this.select(u=>u.loading),this.done$=this.select(u=>u.done),this.item$=this.select(u=>u.item),this.journalEntries$=this.select(u=>u.journalEntries),this.caseAccounts$=this.select(u=>u.caseAccounts||[]),this.caseAccountId$=this.select(u=>u.caseAccountId),this.paging$=this.select(u=>u.paging),this.searchQuery$=this.select(u=>u.searchQuery),this.formName$=this.select(u=>u.formName),this.actionResult$=this.select(this.item$,this.done$,(u,n)=>({item:u,done:n}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.journalEntries$,this.caseAccounts$,(u,n,r,m,p,v)=>({errors:u,loading:n,item:r,formName:m,journalEntries:p,caseAccounts:v}),{debounce:!0}),this.input$=this.select(this.paging$,this.caseAccountId$,this.searchQuery$,(u,n,r)=>({limit:u.limit,skip:u.skip,name:r,caseAccountId:n,total:u.total})),this.setFormName=this.updater((u,n)=>Object.assign(Object.assign({},u),{formName:n})),this.setCaseAccountId=this.updater((u,n)=>Object.assign(Object.assign({},u),{caseAccountId:n})),this.filterCaseAccounts=u=>this.data.userSelectCaseAccounts({input:{name:u}}).pipe((0,b._b)(n=>{let r=n.data.items;return this.patchState({caseAccounts:r}),r},n=>this.patchState({errors:n.graphQLErrors?n.graphQLErrors:n})),(0,fe.U)(n=>n.data.items)),this.addCaseAccount=this.updater((u,n)=>Object.assign(Object.assign({},u),{caseAccounts:u.caseAccounts.concat(n)})),this.setItem=this.updater((u,n)=>Object.assign(Object.assign({},u),{item:n})),this.addNewJournalEntry=this.updater((u,n)=>Object.assign(Object.assign({},u),{journalEntries:[...u.journalEntries,n]})),this.updateJournalEntry=this.updater((u,n)=>Object.assign(Object.assign({},u),{journalEntries:u.journalEntries.map(r=>r.id===n.id?n:r)})),this.addJournalEntries=this.updater((u,n)=>Object.assign(Object.assign({},u),{journalEntries:u.journalEntries.concat(n)})),this.updateJournalEntries=this.updater((u,n)=>Object.assign(Object.assign({},u),{journalEntries:u.journalEntries.map(r=>n.find(p=>p.id===r.id)||r)})),this.setSearchQuery=this.updater((u,n)=>Object.assign(Object.assign({},u),{searchQuery:n})),this.loadJournalEntryEffect=this.effect(u=>u.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(n=>this.data.userJournalEntry({journalEntryId:n}).pipe((0,b._b)(r=>{this.patchState({item:r.data.item,errors:r.errors,loading:!1})},r=>this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})))))),this.loadJournalEntriesEffect=this.effect(u=>u.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.input$),(0,h.w)(([n,r])=>this.data.userJournalEntries({input:r}).pipe((0,b._b)(m=>this.patchState({paging:{limit:r.limit,skip:r.skip,total:m.data.count.total},journalEntries:m.data.items,errors:m.errors,loading:!1}),m=>this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})))))),this.createJournalEntryEffect=this.effect(u=>u.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(n=>this.journalEntryService.createJournalEntry(Object.assign({},n)).pipe((0,b._b)(r=>{this.addNewJournalEntry(r),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:r,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},r=>{r.graphQLErrors?(this.toast.error(r.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})):(this.toast.error(r.Message),this.formService.setErrors(r.Data))}))))),this.updateJournalEntryEffect=this.effect(u=>u.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([n,r])=>this.journalEntryService.updateJournalEntry(n,n.id).pipe((0,b._b)(m=>{this.updateJournalEntry(m),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:m,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},m=>{m.graphQLErrors?(this.toast.error(m.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})):(this.toast.error(m.Message),this.formService.setErrors(m.Data))}))))),this.deleteJournalEntryEffect=this.effect(u=>u.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([n,r])=>this.data.userDeleteJournalEntry({journalEntryId:r.id}).pipe((0,b._b)(m=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:m.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},m=>{m.graphQLErrors?(this.toast.error(m.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})):(this.toast.error(m.Message),this.formService.setErrors(m.Data))}))))),this.importExcelEffect=this.effect(u=>u.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(n=>this.journalEntryService.importJournalEntries(n).pipe((0,de.K)(r=>{var m;return this.toast.error(null!==(m=r.Message)&&void 0!==m?m:"Failed to save",{duration:3e3}),q.E}),(0,y.b)(r=>{const m=JSON.parse(r.created),p=JSON.parse(r.updated),v=JSON.parse(r.failed),I=m.length+p.length+v.length;this.addJournalEntries(m),this.updateJournalEntries(p),this.toast.success(`${m.length} created, ${p.length} updated, ${v.length} failed of total ${I}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("journalEntryId")?(this.route.snapshot.paramMap.get("journalEntryId"),this.setFormName("journalEntry_edit")):this.setFormName("journalEntry_create"),this.route.snapshot.paramMap.has("caseAccountId")){var c=this.route.snapshot.paramMap.get("caseAccountId");this.setCaseAccountId(c)}}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.journalEntryService.validateJournalEntryExcelData(t,i.caseAccounts)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(z.q),e.LFG(O.F0),e.LFG(O.gz),e.LFG(X.F),e.LFG(Z.o),e.LFG(s$))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function o$(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.close.emit())})("formIsReady",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.journalEntry)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let Mc=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"journalEntry_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({id:null,name:""}),this.store.vm$.subscribe(i=>{this.journalEntry=i.item})):t.formName&&t.formName.currentValue&&"journalEntry_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadJournalEntryEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.journalEntry=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Po),e.Y36(O.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-journal-entry-form"]],inputs:{journalEntry:"journalEntry",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,o$,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[P.O5,te.M,P.Ov],encapsulation:2}),s})(),Wc=(()=>{class s{constructor(){this.autoHeight=!1,this.journalEntries=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[{field:"caseAccount.name",headerName:"Case Account",filter:"agTextColumnFilter"},{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{field:"locationName",filter:"agTextColumnFilter"},{field:"fromTo",filter:"agTextColumnFilter"},{field:"frequency",filter:"agTextColumnFilter"},{field:"autoOrManual",filter:"agTextColumnFilter"},{field:"process",filter:"agTextColumnFilter"},{field:"perAccountOrAggregateJE",filter:"agTextColumnFilter"},{headerName:"Cost Rate",field:"costRate",valueFormatter:t=>{var i;return(0,_.oBD)(null===(i=t.data)||void 0===i?void 0:i.costRate,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{field:"postingDate",filter:"agDateColumnFilter"},{field:"documentDate",filter:"agDateColumnFilter"},{field:"dueDate",filter:"agDateColumnFilter"},{headerName:"Amount",field:"amount",valueFormatter:t=>{var i;return(0,_.oBD)(null===(i=t.data)||void 0===i?void 0:i.amount,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{field:"accountType",filter:"agTextColumnFilter"},{field:"accountNumber",filter:"agTextColumnFilter"},{field:"costCenter",filter:"agTextColumnFilter"},{field:"appliesToDocumentNumber",filter:"agTextColumnFilter"},{field:"caseAccountId",filter:"agTextColumnFilter",hide:!0}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var a;t.includes(null===(a=i.data)||void 0===a?void 0:a.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-journal-entry-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(f.x,5),2&t){let a;e.iGM(a=e.CRH())&&(i.tableView=a.first)}},inputs:{autoHeight:"autoHeight",journalEntries:"journalEntries"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.journalEntries)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[f.x],encapsulation:2}),s})();function a$(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-journal-entry-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","journalEntry_edit")("formControl",t.formControl)("journalEntry",t.journalEntry)}}const r$=function(){return{}};function n$(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-journal-entry-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","journalEntry_create")("formControl",t.formControl)("journalEntry",e.DdM(3,r$))}}function l$(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-journal-entry-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(d.ref.close())}),e.qZA()}2&s&&e.Q6J("journalEntries",o.data.items)}let c$=(()=>{class s extends G.fS{constructor(t){super(),this.store=t,this.store.loadJournalEntriesEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.journalEntries$.pipe((0,h.w)(i=>(0,D.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Po))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","journalEntry","send","close"],[1,"w-full","h-full","bg-white",3,"journalEntries","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,a$,2,3,"ng-template",null,1,e.W1O),e.YNc(3,n$,1,4,"ng-template",null,2,e.W1O),e.YNc(5,l$,1,1,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",d)("editTemplate",a)("createTemplate",l)("key",i.field.key)}},dependencies:[E.JJ,E.oH,H.$,Mc,Wc],encapsulation:2}),s})();function d$(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-journal-entry-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","journalEntry_edit")("journalEntry",t.value)}}const u$=function(){return{}};function m$(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-journal-entry-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","journalEntry_create")("journalEntry",e.DdM(2,u$))}function p$(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-journal-entry-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(null==d.ref?null:d.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("journalEntries",t.items)}}let h$=(()=>{class s extends pe{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:6,consts:[[3,"data","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","journalEntry","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","journalEntries","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,d$,1,2,"ng-template",null,1,e.W1O),e.YNc(3,m$,1,3,"ng-template",null,2,e.W1O),e.YNc(5,p$,1,2,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("data",i.data)("title",i.to.title)("onSave",i.onSave)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[he,Mc,Wc],encapsulation:2}),s})(),f$=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[Po],imports:[P.ez,U.F,E.UX,J.o,ae.u,$.P,j.t,me,k.h,se.G,G.X0.forChild({types:[{name:"journal-entry-select",component:c$,wrappers:["form-field"]},{name:"journal-entry-grid",component:h$}]})]}),s})(),_$=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[f$]}),s})();class fi extends W.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class g$ extends fi{constructor(o){super("ValidateLanguageExcelDataAction"),this.valid=!1,this.excelData=o}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name)}),this.validationContext.addRule(new g.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof g.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(a=>a.name),newNames:[i.newName]}):i instanceof g.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,D.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class v$ extends g.wS{constructor(o,t,i,a,l){super(o,t,i,a,l,!0)}}class C$ extends g.ul{constructor(o,t,i,a=!1){super(o,t,a),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new g.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new v$("name","The language name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class S$ extends fi{constructor(o){super("CreateLanguageAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new C$("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateLanguage({input:this.input}).pipe((0,h.w)(o=>(0,ue.of)(o.data.created)))}}class b$ extends fi{constructor(o){super("UpdateLanguagesAction"),this.languages=o}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.languages,!0))}performAction(){this.response=this.businessProvider.data.userUpdateLanguages({input:{languages:this.languages}}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}class T$ extends fi{constructor(o,t){super("UpdateLanguageAction"),this.language=o,this.languageId=t}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.language,!0)).addRule(new g.xF("Id","Id should be a CUID and not null",this.languageId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateLanguage({languageId:this.languageId,input:this.language}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}let Ec=(()=>{class s extends W.nH{constructor(t,i,a){super("NotificationService.LanguageBusinessProviderService",t,a),this.data=i}createLanguage(t){const i=new S$(t);return i.Do(this),i.response}updateLanguage(t,i){const a=new T$(t,i);return a.Do(this),a.response}importLanguages(t){const i=new b$(t);return i.Do(this),i.response}validateLanguageExcelData(t){const i=new g$(t);return i.Do(this),i.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(K.ed),e.LFG(z.q),e.LFG(W.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),y$=(()=>{class s extends W.nH{constructor(t,i,a){super("LanguageService",a,t),this.businessProvider=i}createLanguage(t){const i=Object.fromEntries(Object.entries(t).filter(([a,l])=>null!==l));return this.businessProvider.createLanguage(i)}updateLanguage(t,i){return this.businessProvider.updateLanguage(t,i)}importLanguages(t){return this.businessProvider.importLanguages(t)}validateLanguageExcelData(t){return this.businessProvider.validateLanguageExcelData(t)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(Ec,8),e.LFG(Ec),e.LFG(K.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),Io=(()=>{class s extends b.m1{constructor(t,i,a,l,d,ee){super({loading:!1,languages:[],done:!1,searchQuery:"",formName:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=a,this.toast=l,this.formService=d,this.languageService=ee,this.errors$=this.select(c=>c.errors),this.loading$=this.select(c=>c.loading),this.done$=this.select(c=>c.done),this.item$=this.select(c=>c.item),this.languages$=this.select(c=>c.languages),this.paging$=this.select(c=>c.paging),this.searchQuery$=this.select(c=>c.searchQuery),this.formName$=this.select(c=>c.formName),this.actionResult$=this.select(this.item$,this.done$,(c,u)=>({item:c,done:u}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.languages$,(c,u,n,r,m)=>({errors:c,loading:u,item:n,formName:r,languages:m}),{debounce:!0}),this.input$=this.select(this.paging$,this.searchQuery$,(c,u)=>({limit:c.limit,skip:c.skip,name:u,total:c.total})),this.setFormName=this.updater((c,u)=>Object.assign(Object.assign({},c),{formName:u})),this.setItem=this.updater((c,u)=>Object.assign(Object.assign({},c),{item:u})),this.addNewLanguage=this.updater((c,u)=>Object.assign(Object.assign({},c),{languages:[...c.languages,u]})),this.updateLanguage=this.updater((c,u)=>Object.assign(Object.assign({},c),{languages:c.languages.map(n=>n.id===u.id?u:n)})),this.addLanguages=this.updater((c,u)=>Object.assign(Object.assign({},c),{languages:c.languages.concat(u)})),this.updateLanguages=this.updater((c,u)=>Object.assign(Object.assign({},c),{languages:c.languages.map(n=>u.find(m=>m.id===n.id)||n)})),this.setSearchQuery=this.updater((c,u)=>Object.assign(Object.assign({},c),{searchQuery:u})),this.loadLanguageEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.data.userLanguage({languageId:u}).pipe((0,b._b)(n=>{this.patchState({item:n.data.item,errors:n.errors,loading:!1})},n=>this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})))))),this.loadLanguagesEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.input$),(0,h.w)(([u,n])=>this.data.userLanguages({input:n}).pipe((0,b._b)(r=>this.patchState({paging:{limit:n.limit,skip:n.skip,total:r.data.count.total},languages:r.data.items,errors:r.errors,loading:!1}),r=>this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})))))),this.createLanguageEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.languageService.createLanguage(Object.assign({},u)).pipe((0,b._b)(n=>{this.addNewLanguage(n),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:n,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},n=>{n.graphQLErrors?(this.toast.error(n.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})):(this.toast.error(n.Message),this.formService.setErrors(n.Data))}))))),this.updateLanguageEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([u,n])=>this.languageService.updateLanguage(u,u.id).pipe((0,b._b)(r=>{this.updateLanguage(r),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:r,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},r=>{r.graphQLErrors?(this.toast.error(r.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})):(this.toast.error(r.Message),this.formService.setErrors(r.Data))}))))),this.deleteLanguageEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([u,n])=>this.data.userDeleteLanguage({languageId:n.id}).pipe((0,b._b)(r=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:r.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},r=>{r.graphQLErrors?(this.toast.error(r.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})):(this.toast.error(r.Message),this.formService.setErrors(r.Data))}))))),this.importExcelEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.languageService.importLanguages(u).pipe((0,de.K)(n=>{var r;return this.toast.error(null!==(r=n.Message)&&void 0!==r?r:"Failed to save",{duration:3e3}),q.E}),(0,y.b)(n=>{const r=JSON.parse(n.created),m=JSON.parse(n.updated),p=JSON.parse(n.failed),v=r.length+m.length+p.length;this.addLanguages(r),this.updateLanguages(m),this.toast.success(`${r.length} created, ${m.length} updated, ${p.length} failed of total ${v}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("languageId")?(this.route.snapshot.paramMap.get("languageId"),this.setFormName("language_edit")):this.setFormName("language_create")}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.languageService.validateLanguageExcelData(t)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(z.q),e.LFG(O.F0),e.LFG(O.gz),e.LFG(X.F),e.LFG(Z.o),e.LFG(y$))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function w$(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.close.emit())})("formIsReady",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.language)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let Oc=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"language_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.language=i.item})):t.formName&&t.formName.currentValue&&"language_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadLanguageEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.language=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Io),e.Y36(O.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-language-form"]],inputs:{language:"language",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,w$,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[P.O5,te.M,P.Ov],encapsulation:2}),s})(),Lc=(()=>{class s{constructor(){this.autoHeight=!1,this.languages=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[,{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var a;t.includes(null===(a=i.data)||void 0===a?void 0:a.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}ngOnInit(){}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-language-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(f.x,5),2&t){let a;e.iGM(a=e.CRH())&&(i.tableView=a.first)}},inputs:{autoHeight:"autoHeight",languages:"languages"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.languages)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[f.x],encapsulation:2}),s})();function x$(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-language-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","language_edit")("formControl",t.formControl)("language",t.language)}}const N$=function(){return{}};function A$(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-language-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","language_create")("formControl",t.formControl)("language",e.DdM(3,N$))}}function F$(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-language-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(d.ref.close())}),e.qZA()}2&s&&e.Q6J("languages",o.data.items)}let P$=(()=>{class s extends G.fS{constructor(t){super(),this.store=t,this.store.loadLanguagesEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.languages$.pipe((0,h.w)(i=>(0,D.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Io))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","language","send","close"],[1,"w-full","h-full","bg-white",3,"languages","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,x$,2,3,"ng-template",null,1,e.W1O),e.YNc(3,A$,1,4,"ng-template",null,2,e.W1O),e.YNc(5,F$,1,1,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",d)("editTemplate",a)("createTemplate",l)("key",i.field.key)}},dependencies:[E.JJ,E.oH,H.$,Oc,Lc],encapsulation:2}),s})();function I$(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-language-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","language_edit")("language",t.value)}}const D$=function(){return{}};function M$(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-language-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","language_create")("language",e.DdM(2,D$))}function W$(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-language-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(null==d.ref?null:d.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("languages",t.items)}}let E$=(()=>{class s extends pe{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","language","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","languages","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,I$,1,2,"ng-template",null,1,e.W1O),e.YNc(3,M$,1,3,"ng-template",null,2,e.W1O),e.YNc(5,W$,1,2,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[he,Oc,Lc],encapsulation:2}),s})(),O$=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[Io],imports:[P.ez,U.F,E.UX,J.o,ae.u,$.P,j.t,me,k.h,se.G,G.X0.forChild({types:[{name:"language-select",component:P$,wrappers:["form-field"]},{name:"language-grid",component:E$}]})]}),s})(),L$=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[O$]}),s})();class _i extends W.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class $$ extends _i{constructor(o,t){super("ValidateLeadActionExcelDataAction"),this.valid=!1,this.excelData=o,this.leads=t}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name),this.validationContext.addRule(new g.mi(`leadName_${i}_is_valid}`,"Lead Is Not Valid","lead.name",t.lead,this.leads,!0))}),this.validationContext.addRule(new g.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof g.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(a=>a.name),newNames:[i.newName]}):i instanceof g.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,D.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class G$ extends g.wS{constructor(o,t,i,a,l){super(o,t,i,a,l,!0)}}class R$ extends g.ul{constructor(o,t,i,a=!1){super(o,t,a),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new g.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new G$("name","The leadaction name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class Q$ extends _i{constructor(o){super("CreateLeadActionAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new R$("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateLeadAction({input:this.input}).pipe((0,h.w)(o=>(0,ue.of)(o.data.created)))}}class V$ extends _i{constructor(o){super("UpdateLeadActionsAction"),this.leadActions=o}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.leadActions,!0))}performAction(){this.response=this.businessProvider.data.userUpdateLeadActions({input:{leadActions:this.leadActions}}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}class j$ extends _i{constructor(o,t){super("UpdateLeadActionAction"),this.leadAction=o,this.leadActionId=t}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.leadAction,!0)).addRule(new g.xF("Id","Id should be a CUID and not null",this.leadActionId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateLeadAction({leadActionId:this.leadActionId,input:this.leadAction}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}let $c=(()=>{class s extends W.nH{constructor(t,i,a){super("NotificationService.LeadActionBusinessProviderService",t,a),this.data=i}createLeadAction(t){const i=new Q$(t);return i.Do(this),i.response}updateLeadAction(t,i){const a=new j$(t,i);return a.Do(this),a.response}importLeadActions(t){const i=new V$(t);return i.Do(this),i.response}validateLeadActionExcelData(t,i){const a=new $$(t,i);return a.Do(this),a.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(K.ed),e.LFG(z.q),e.LFG(W.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),U$=(()=>{class s extends W.nH{constructor(t,i,a){super("LeadActionService",a,t),this.businessProvider=i}createLeadAction(t){const i=Object.fromEntries(Object.entries(t).filter(([a,l])=>null!==l));return this.businessProvider.createLeadAction(i)}updateLeadAction(t,i){return this.businessProvider.updateLeadAction(t,i)}importLeadActions(t){return this.businessProvider.importLeadActions(t)}validateLeadActionExcelData(t,i){return this.businessProvider.validateLeadActionExcelData(t,i)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG($c,8),e.LFG($c),e.LFG(K.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),Do=(()=>{class s extends b.m1{constructor(t,i,a,l,d,ee){if(super({loading:!1,leadActions:[],done:!1,searchQuery:"",formName:void 0,leadId:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=a,this.toast=l,this.formService=d,this.leadActionService=ee,this.errors$=this.select(u=>u.errors),this.loading$=this.select(u=>u.loading),this.done$=this.select(u=>u.done),this.item$=this.select(u=>u.item),this.leadActions$=this.select(u=>u.leadActions),this.leads$=this.select(u=>u.leads||[]),this.leadId$=this.select(u=>u.leadId),this.paging$=this.select(u=>u.paging),this.searchQuery$=this.select(u=>u.searchQuery),this.formName$=this.select(u=>u.formName),this.actionResult$=this.select(this.item$,this.done$,(u,n)=>({item:u,done:n}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.leadActions$,this.leads$,(u,n,r,m,p,v)=>({errors:u,loading:n,item:r,formName:m,leadActions:p,leads:v}),{debounce:!0}),this.input$=this.select(this.paging$,this.leadId$,this.searchQuery$,(u,n,r)=>({limit:u.limit,skip:u.skip,name:r,leadId:n,total:u.total})),this.setFormName=this.updater((u,n)=>Object.assign(Object.assign({},u),{formName:n})),this.setLeadId=this.updater((u,n)=>Object.assign(Object.assign({},u),{leadId:n})),this.filterLeads=u=>this.data.userSelectLeads({input:{name:u}}).pipe((0,b._b)(n=>{let r=n.data.items;return this.patchState({leads:r}),r},n=>this.patchState({errors:n.graphQLErrors?n.graphQLErrors:n})),(0,fe.U)(n=>n.data.items)),this.addLead=this.updater((u,n)=>Object.assign(Object.assign({},u),{leads:u.leads.concat(n)})),this.setItem=this.updater((u,n)=>Object.assign(Object.assign({},u),{item:n})),this.addNewLeadAction=this.updater((u,n)=>Object.assign(Object.assign({},u),{leadActions:[...u.leadActions,n]})),this.updateLeadAction=this.updater((u,n)=>Object.assign(Object.assign({},u),{leadActions:u.leadActions.map(r=>r.id===n.id?n:r)})),this.addLeadActions=this.updater((u,n)=>Object.assign(Object.assign({},u),{leadActions:u.leadActions.concat(n)})),this.updateLeadActions=this.updater((u,n)=>Object.assign(Object.assign({},u),{leadActions:u.leadActions.map(r=>n.find(p=>p.id===r.id)||r)})),this.setSearchQuery=this.updater((u,n)=>Object.assign(Object.assign({},u),{searchQuery:n})),this.loadLeadActionEffect=this.effect(u=>u.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(n=>this.data.userLeadAction({leadActionId:n}).pipe((0,b._b)(r=>{this.patchState({item:r.data.item,errors:r.errors,loading:!1})},r=>this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})))))),this.loadLeadActionsEffect=this.effect(u=>u.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.input$),(0,h.w)(([n,r])=>this.data.userLeadActions({input:r}).pipe((0,b._b)(m=>this.patchState({paging:{limit:r.limit,skip:r.skip,total:m.data.count.total},leadActions:m.data.items,errors:m.errors,loading:!1}),m=>this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})))))),this.createLeadActionEffect=this.effect(u=>u.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(n=>this.leadActionService.createLeadAction(Object.assign({},n)).pipe((0,b._b)(r=>{this.addNewLeadAction(r),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:r,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},r=>{r.graphQLErrors?(this.toast.error(r.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})):(this.toast.error(r.Message),this.formService.setErrors(r.Data))}))))),this.updateLeadActionEffect=this.effect(u=>u.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([n,r])=>this.leadActionService.updateLeadAction(n,n.id).pipe((0,b._b)(m=>{this.updateLeadAction(m),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:m,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},m=>{m.graphQLErrors?(this.toast.error(m.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})):(this.toast.error(m.Message),this.formService.setErrors(m.Data))}))))),this.deleteLeadActionEffect=this.effect(u=>u.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([n,r])=>this.data.userDeleteLeadAction({leadActionId:r.id}).pipe((0,b._b)(m=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:m.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},m=>{m.graphQLErrors?(this.toast.error(m.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})):(this.toast.error(m.Message),this.formService.setErrors(m.Data))}))))),this.importExcelEffect=this.effect(u=>u.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(n=>this.leadActionService.importLeadActions(n).pipe((0,de.K)(r=>{var m;return this.toast.error(null!==(m=r.Message)&&void 0!==m?m:"Failed to save",{duration:3e3}),q.E}),(0,y.b)(r=>{const m=JSON.parse(r.created),p=JSON.parse(r.updated),v=JSON.parse(r.failed),I=m.length+p.length+v.length;this.addLeadActions(m),this.updateLeadActions(p),this.toast.success(`${m.length} created, ${p.length} updated, ${v.length} failed of total ${I}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("leadActionId")?(this.route.snapshot.paramMap.get("leadActionId"),this.setFormName("leadAction_edit")):this.setFormName("leadAction_create"),this.route.snapshot.paramMap.has("leadId")){var c=this.route.snapshot.paramMap.get("leadId");this.setLeadId(c)}}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.leadActionService.validateLeadActionExcelData(t,i.leads)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(z.q),e.LFG(O.F0),e.LFG(O.gz),e.LFG(X.F),e.LFG(Z.o),e.LFG(U$))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function J$(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.close.emit())})("formIsReady",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.leadAction)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let Gc=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"leadAction_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({id:null,name:""}),this.store.vm$.subscribe(i=>{this.leadAction=i.item})):t.formName&&t.formName.currentValue&&"leadAction_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadLeadActionEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.leadAction=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Do),e.Y36(O.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-lead-action-form"]],inputs:{leadAction:"leadAction",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,J$,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[P.O5,te.M,P.Ov],encapsulation:2}),s})(),Rc=(()=>{class s{constructor(){this.autoHeight=!1,this.leadActions=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[{field:"lead.name",headerName:"Lead",filter:"agTextColumnFilter"},{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{field:"leadId",filter:"agTextColumnFilter",hide:!0}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var a;t.includes(null===(a=i.data)||void 0===a?void 0:a.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-lead-action-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(f.x,5),2&t){let a;e.iGM(a=e.CRH())&&(i.tableView=a.first)}},inputs:{autoHeight:"autoHeight",leadActions:"leadActions"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.leadActions)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[f.x],encapsulation:2}),s})();function z$(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-lead-action-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","leadAction_edit")("formControl",t.formControl)("leadAction",t.leadAction)}}const H$=function(){return{}};function q$(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-lead-action-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","leadAction_create")("formControl",t.formControl)("leadAction",e.DdM(3,H$))}}function K$(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-lead-action-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(d.ref.close())}),e.qZA()}2&s&&e.Q6J("leadActions",o.data.items)}let Z$=(()=>{class s extends G.fS{constructor(t){super(),this.store=t,this.store.loadLeadActionsEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.leadActions$.pipe((0,h.w)(i=>(0,D.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Do))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","leadAction","send","close"],[1,"w-full","h-full","bg-white",3,"leadActions","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,z$,2,3,"ng-template",null,1,e.W1O),e.YNc(3,q$,1,4,"ng-template",null,2,e.W1O),e.YNc(5,K$,1,1,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",d)("editTemplate",a)("createTemplate",l)("key",i.field.key)}},dependencies:[E.JJ,E.oH,H.$,Gc,Rc],encapsulation:2}),s})();function B$(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-lead-action-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","leadAction_edit")("leadAction",t.value)}}const k$=function(){return{}};function Y$(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-lead-action-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","leadAction_create")("leadAction",e.DdM(2,k$))}function X$(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-lead-action-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(null==d.ref?null:d.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("leadActions",t.items)}}let e3=(()=>{class s extends pe{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:6,consts:[[3,"data","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","leadAction","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","leadActions","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,B$,1,2,"ng-template",null,1,e.W1O),e.YNc(3,Y$,1,3,"ng-template",null,2,e.W1O),e.YNc(5,X$,1,2,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("data",i.data)("title",i.to.title)("onSave",i.onSave)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[he,Gc,Rc],encapsulation:2}),s})(),t3=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[Do],imports:[P.ez,U.F,E.UX,J.o,ae.u,$.P,j.t,me,k.h,se.G,G.X0.forChild({types:[{name:"lead-action-select",component:Z$,wrappers:["form-field"]},{name:"lead-action-grid",component:e3}]})]}),s})(),i3=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[t3]}),s})();var gi=M(6489);function s3(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.close.emit())})("formIsReady",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.lead)("formName",t.formName)("showSubmitButton",!0)("formData",t.formData)("componentStore",t.store)}}let Mo=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$,this.formData={accidentTypes:this.store.filterAccidentTypes(""),documents:this.store.filterDocuments(""),leadStatuses:this.store.filterLeadStatuses(""),leadSources:this.store.filterLeadSources(""),users:this.store.filterUsers(""),bodyParts:this.store.filterBodyParts("")}}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"lead_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.lead=i.item})):t.formName&&t.formName.currentValue&&"lead_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadLeadEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.lead=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(gi.O),e.Y36(O.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-lead-form"]],inputs:{lead:"lead",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","formData","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,s3,4,5,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[P.O5,te.M,P.Ov],encapsulation:2}),s})(),Qc=(()=>{class s{constructor(){this.autoHeight=!1,this.leads=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[{field:"accidentType.name",headerName:"Accident Type",filter:"agTextColumnFilter"},{field:"driversLicense.name",headerName:"Drivers License",filter:"agTextColumnFilter"},{field:"policeReportAttachment.name",headerName:"Police Report Attachment",filter:"agTextColumnFilter"},{field:"phoneRecording.name",headerName:"Phone Recording",filter:"agTextColumnFilter"},{field:"status.name",headerName:"Status",filter:"agTextColumnFilter"},{field:"sourceOfLead.name",headerName:"Source of Lead",filter:"agTextColumnFilter"},{field:"submittedBy.name",headerName:"Submitted by",filter:"agTextColumnFilter"},{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{field:"firstName",filter:"agTextColumnFilter"},{field:"middleName",filter:"agTextColumnFilter"},{field:"lastName",filter:"agTextColumnFilter"},{field:"address",filter:"agTextColumnFilter"},{field:"city",filter:"agTextColumnFilter"},{field:"state",filter:"agTextColumnFilter"},{field:"postalCode",filter:"agTextColumnFilter"},{field:"dateOfBirth",filter:"agDateColumnFilter"},{field:"dateOfLoss",filter:"agDateColumnFilter"},{field:"dateOfRetention",filter:"agDateColumnFilter"},{field:"phoneNumber",filter:"agTextColumnFilter"},{field:"emailAddress",filter:"agTextColumnFilter"},{field:"priorRepresentation",filter:"agTextColumnFilter"},{field:"accidentTypeId",filter:"agTextColumnFilter",hide:!0},{field:"driversLicenseId",filter:"agTextColumnFilter",hide:!0},{field:"driversLicenseNumber",filter:"agTextColumnFilter"},{field:"driversLicenseState",filter:"agTextColumnFilter"},{headerName:"Severe Injury",field:"severeInjury",filter:"agSetColumnFilter",cellRenderer:"checkboxRenderer"},{field:"emergencyContactId",filter:"agTextColumnFilter"},{headerName:"Allowed to Contact Emergency Contact",field:"allowedToContactEmergencyContact",filter:"agSetColumnFilter",cellRenderer:"checkboxRenderer"},{headerName:"Police Report",field:"policeReport",filter:"agSetColumnFilter",cellRenderer:"checkboxRenderer"},{field:"policeReportAttachmentId",filter:"agTextColumnFilter",hide:!0},{field:"phoneRecordingId",filter:"agTextColumnFilter",hide:!0},{field:"leadStatusId",filter:"agTextColumnFilter",hide:!0},{field:"leadSpecialistId",filter:"agTextColumnFilter"},{field:"leadSourceId",filter:"agTextColumnFilter",hide:!0},{field:"submittedById",filter:"agTextColumnFilter",hide:!0},{field:"legalCaseId",filter:"agTextColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var a;t.includes(null===(a=i.data)||void 0===a?void 0:a.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-lead-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(f.x,5),2&t){let a;e.iGM(a=e.CRH())&&(i.tableView=a.first)}},inputs:{autoHeight:"autoHeight",leads:"leads"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","data","showSidebar","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("data",i.leads)("showSidebar",!1)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[f.x],encapsulation:2}),s})();function o3(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-lead-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","lead_edit")("formControl",t.formControl)("lead",t.lead)}}const a3=function(){return{}};function r3(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-lead-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","lead_create")("formControl",t.formControl)("lead",e.DdM(3,a3))}}function n3(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-lead-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(d.ref.close())}),e.qZA()}2&s&&e.Q6J("leads",o.data.items)}let l3=(()=>{class s extends G.fS{constructor(t){super(),this.store=t,this.store.loadLeadsEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.leads$.pipe((0,h.w)(i=>(0,D.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(gi.O))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e._Bn([gi.O]),e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","lead","send","close"],[1,"w-full","h-full","bg-white",3,"leads","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,o3,2,3,"ng-template",null,1,e.W1O),e.YNc(3,r3,1,4,"ng-template",null,2,e.W1O),e.YNc(5,n3,1,1,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",d)("editTemplate",a)("createTemplate",l)("key",i.field.key)}},dependencies:[E.JJ,E.oH,H.$,Mo,Qc],encapsulation:2}),s})();function c3(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-lead-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","lead_edit")("lead",t.value)}}const d3=function(){return{}};function u3(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-lead-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","lead_create")("lead",e.DdM(2,d3))}function m3(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-lead-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(null==d.ref?null:d.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("leads",t.items)}}let p3=(()=>{class s extends pe{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:6,consts:[[3,"data","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","lead","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","leads","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,c3,1,2,"ng-template",null,1,e.W1O),e.YNc(3,u3,1,3,"ng-template",null,2,e.W1O),e.YNc(5,m3,1,2,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("data",i.data)("title",i.to.title)("onSave",i.onSave)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[he,Mo,Qc],encapsulation:2}),s})();const h3=function(){return{}};let f3=(()=>{class s extends G.fS{save(t){this.to.save&&this.to.save instanceof Function&&this.to.save(t)}cancel(){this.to.cancel&&this.to.cancel instanceof Function&&this.to.cancel()}}return s.\u0275fac=function(){let o;return function(i){return(o||(o=e.n5z(s)))(i||s)}}(),s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-web-lead-form"]],features:[e.qOj],decls:1,vars:4,consts:[[1,"flex-grow","flex","flex-col",3,"formName","formControl","lead","send","close"]],template:function(t,i){1&t&&(e.TgZ(0,"ui-lead-form",0),e.NdJ("send",function(l){return i.save(l)})("close",function(){return i.cancel()}),e.qZA()),2&t&&e.Q6J("formName","lead_create")("formControl",i.formControl)("lead",e.DdM(3,h3))},dependencies:[E.JJ,E.oH,Mo],encapsulation:2}),s})(),_3=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[gi.O],imports:[P.ez,U.F,E.UX,J.o,ae.u,$.P,j.t,me,k.h,se.G,G.X0.forChild({types:[{name:"lead-select",component:l3,wrappers:["form-field"]},{name:"lead-grid",component:p3},{name:"lead-form",component:f3}]})]}),s})(),g3=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[_3]}),s})();class vi extends W.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class v3 extends vi{constructor(o){super("ValidateLeadSourceExcelDataAction"),this.valid=!1,this.excelData=o}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name)}),this.validationContext.addRule(new g.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof g.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(a=>a.name),newNames:[i.newName]}):i instanceof g.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,D.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class C3 extends g.wS{constructor(o,t,i,a,l){super(o,t,i,a,l,!0)}}class S3 extends g.ul{constructor(o,t,i,a=!1){super(o,t,a),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new g.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new C3("name","The leadsource name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class b3 extends vi{constructor(o){super("CreateLeadSourceAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new S3("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateLeadSource({input:this.input}).pipe((0,h.w)(o=>(0,ue.of)(o.data.created)))}}class T3 extends vi{constructor(o){super("UpdateLeadSourcesAction"),this.leadSources=o}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.leadSources,!0))}performAction(){this.response=this.businessProvider.data.userUpdateLeadSources({input:{leadSources:this.leadSources}}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}class y3 extends vi{constructor(o,t){super("UpdateLeadSourceAction"),this.leadSource=o,this.leadSourceId=t}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.leadSource,!0)).addRule(new g.xF("Id","Id should be a CUID and not null",this.leadSourceId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateLeadSource({leadSourceId:this.leadSourceId,input:this.leadSource}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}let Vc=(()=>{class s extends W.nH{constructor(t,i,a){super("NotificationService.LeadSourceBusinessProviderService",t,a),this.data=i}createLeadSource(t){const i=new b3(t);return i.Do(this),i.response}updateLeadSource(t,i){const a=new y3(t,i);return a.Do(this),a.response}importLeadSources(t){const i=new T3(t);return i.Do(this),i.response}validateLeadSourceExcelData(t){const i=new v3(t);return i.Do(this),i.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(K.ed),e.LFG(z.q),e.LFG(W.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),w3=(()=>{class s extends W.nH{constructor(t,i,a){super("LeadSourceService",a,t),this.businessProvider=i}createLeadSource(t){const i=Object.fromEntries(Object.entries(t).filter(([a,l])=>null!==l));return this.businessProvider.createLeadSource(i)}updateLeadSource(t,i){return this.businessProvider.updateLeadSource(t,i)}importLeadSources(t){return this.businessProvider.importLeadSources(t)}validateLeadSourceExcelData(t){return this.businessProvider.validateLeadSourceExcelData(t)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(Vc,8),e.LFG(Vc),e.LFG(K.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),Wo=(()=>{class s extends b.m1{constructor(t,i,a,l,d,ee){super({loading:!1,leadSources:[],done:!1,searchQuery:"",formName:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=a,this.toast=l,this.formService=d,this.leadSourceService=ee,this.errors$=this.select(c=>c.errors),this.loading$=this.select(c=>c.loading),this.done$=this.select(c=>c.done),this.item$=this.select(c=>c.item),this.leadSources$=this.select(c=>c.leadSources),this.paging$=this.select(c=>c.paging),this.searchQuery$=this.select(c=>c.searchQuery),this.formName$=this.select(c=>c.formName),this.actionResult$=this.select(this.item$,this.done$,(c,u)=>({item:c,done:u}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.leadSources$,(c,u,n,r,m)=>({errors:c,loading:u,item:n,formName:r,leadSources:m}),{debounce:!0}),this.input$=this.select(this.paging$,this.searchQuery$,(c,u)=>({limit:c.limit,skip:c.skip,name:u,total:c.total})),this.setFormName=this.updater((c,u)=>Object.assign(Object.assign({},c),{formName:u})),this.setItem=this.updater((c,u)=>Object.assign(Object.assign({},c),{item:u})),this.addNewLeadSource=this.updater((c,u)=>Object.assign(Object.assign({},c),{leadSources:[...c.leadSources,u]})),this.updateLeadSource=this.updater((c,u)=>Object.assign(Object.assign({},c),{leadSources:c.leadSources.map(n=>n.id===u.id?u:n)})),this.addLeadSources=this.updater((c,u)=>Object.assign(Object.assign({},c),{leadSources:c.leadSources.concat(u)})),this.updateLeadSources=this.updater((c,u)=>Object.assign(Object.assign({},c),{leadSources:c.leadSources.map(n=>u.find(m=>m.id===n.id)||n)})),this.setSearchQuery=this.updater((c,u)=>Object.assign(Object.assign({},c),{searchQuery:u})),this.loadLeadSourceEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.data.userLeadSource({leadSourceId:u}).pipe((0,b._b)(n=>{this.patchState({item:n.data.item,errors:n.errors,loading:!1})},n=>this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})))))),this.loadLeadSourcesEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.input$),(0,h.w)(([u,n])=>this.data.userLeadSources({input:n}).pipe((0,b._b)(r=>this.patchState({paging:{limit:n.limit,skip:n.skip,total:r.data.count.total},leadSources:r.data.items,errors:r.errors,loading:!1}),r=>this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})))))),this.createLeadSourceEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.leadSourceService.createLeadSource(Object.assign({},u)).pipe((0,b._b)(n=>{this.addNewLeadSource(n),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:n,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},n=>{n.graphQLErrors?(this.toast.error(n.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})):(this.toast.error(n.Message),this.formService.setErrors(n.Data))}))))),this.updateLeadSourceEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([u,n])=>this.leadSourceService.updateLeadSource(u,u.id).pipe((0,b._b)(r=>{this.updateLeadSource(r),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:r,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},r=>{r.graphQLErrors?(this.toast.error(r.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})):(this.toast.error(r.Message),this.formService.setErrors(r.Data))}))))),this.deleteLeadSourceEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([u,n])=>this.data.userDeleteLeadSource({leadSourceId:n.id}).pipe((0,b._b)(r=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:r.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},r=>{r.graphQLErrors?(this.toast.error(r.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})):(this.toast.error(r.Message),this.formService.setErrors(r.Data))}))))),this.importExcelEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.leadSourceService.importLeadSources(u).pipe((0,de.K)(n=>{var r;return this.toast.error(null!==(r=n.Message)&&void 0!==r?r:"Failed to save",{duration:3e3}),q.E}),(0,y.b)(n=>{const r=JSON.parse(n.created),m=JSON.parse(n.updated),p=JSON.parse(n.failed),v=r.length+m.length+p.length;this.addLeadSources(r),this.updateLeadSources(m),this.toast.success(`${r.length} created, ${m.length} updated, ${p.length} failed of total ${v}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("leadSourceId")?(this.route.snapshot.paramMap.get("leadSourceId"),this.setFormName("leadSource_edit")):this.setFormName("leadSource_create")}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.leadSourceService.validateLeadSourceExcelData(t)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(z.q),e.LFG(O.F0),e.LFG(O.gz),e.LFG(X.F),e.LFG(Z.o),e.LFG(w3))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function x3(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.close.emit())})("formIsReady",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.leadSource)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let jc=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"leadSource_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({id:null,name:""}),this.store.vm$.subscribe(i=>{this.leadSource=i.item})):t.formName&&t.formName.currentValue&&"leadSource_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadLeadSourceEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.leadSource=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Wo),e.Y36(O.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-lead-source-form"]],inputs:{leadSource:"leadSource",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,x3,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[P.O5,te.M,P.Ov],encapsulation:2}),s})(),Uc=(()=>{class s{constructor(){this.autoHeight=!1,this.leadSources=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[,{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var a;t.includes(null===(a=i.data)||void 0===a?void 0:a.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-lead-source-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(f.x,5),2&t){let a;e.iGM(a=e.CRH())&&(i.tableView=a.first)}},inputs:{autoHeight:"autoHeight",leadSources:"leadSources"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.leadSources)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[f.x],encapsulation:2}),s})();function N3(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-lead-source-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","leadSource_edit")("formControl",t.formControl)("leadSource",t.leadSource)}}const A3=function(){return{}};function F3(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-lead-source-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","leadSource_create")("formControl",t.formControl)("leadSource",e.DdM(3,A3))}}function P3(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-lead-source-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(d.ref.close())}),e.qZA()}2&s&&e.Q6J("leadSources",o.data.items)}let I3=(()=>{class s extends G.fS{constructor(t){super(),this.store=t,this.store.loadLeadSourcesEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.leadSources$.pipe((0,h.w)(i=>(0,D.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Wo))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","leadSource","send","close"],[1,"w-full","h-full","bg-white",3,"leadSources","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,N3,2,3,"ng-template",null,1,e.W1O),e.YNc(3,F3,1,4,"ng-template",null,2,e.W1O),e.YNc(5,P3,1,1,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",d)("editTemplate",a)("createTemplate",l)("key",i.field.key)}},dependencies:[E.JJ,E.oH,H.$,jc,Uc],encapsulation:2}),s})();function D3(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-lead-source-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","leadSource_edit")("leadSource",t.value)}}const M3=function(){return{}};function W3(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-lead-source-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","leadSource_create")("leadSource",e.DdM(2,M3))}function E3(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-lead-source-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(null==d.ref?null:d.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("leadSources",t.items)}}let O3=(()=>{class s extends pe{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:6,consts:[[3,"data","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","leadSource","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","leadSources","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,D3,1,2,"ng-template",null,1,e.W1O),e.YNc(3,W3,1,3,"ng-template",null,2,e.W1O),e.YNc(5,E3,1,2,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("data",i.data)("title",i.to.title)("onSave",i.onSave)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[he,jc,Uc],encapsulation:2}),s})(),L3=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[Wo],imports:[P.ez,U.F,E.UX,J.o,ae.u,$.P,j.t,me,k.h,se.G,G.X0.forChild({types:[{name:"lead-source-select",component:I3,wrappers:["form-field"]},{name:"lead-source-grid",component:O3}]})]}),s})(),$3=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[L3]}),s})();class Ci extends W.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class G3 extends Ci{constructor(o){super("ValidateLeadStatusExcelDataAction"),this.valid=!1,this.excelData=o}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name)}),this.validationContext.addRule(new g.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof g.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(a=>a.name),newNames:[i.newName]}):i instanceof g.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,D.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class R3 extends g.wS{constructor(o,t,i,a,l){super(o,t,i,a,l,!0)}}class Q3 extends g.ul{constructor(o,t,i,a=!1){super(o,t,a),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new g.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new R3("name","The leadstatus name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class V3 extends Ci{constructor(o){super("CreateLeadStatusAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new Q3("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateLeadStatus({input:this.input}).pipe((0,h.w)(o=>(0,ue.of)(o.data.created)))}}class j3 extends Ci{constructor(o){super("UpdateLeadStatusesAction"),this.leadStatuses=o}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.leadStatuses,!0))}performAction(){this.response=this.businessProvider.data.userUpdateLeadStatuses({input:{leadStatuses:this.leadStatuses}}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}class U3 extends Ci{constructor(o,t){super("UpdateLeadStatusAction"),this.leadStatus=o,this.leadStatusId=t}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.leadStatus,!0)).addRule(new g.xF("Id","Id should be a CUID and not null",this.leadStatusId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateLeadStatus({leadStatusId:this.leadStatusId,input:this.leadStatus}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}let Jc=(()=>{class s extends W.nH{constructor(t,i,a){super("NotificationService.LeadStatusBusinessProviderService",t,a),this.data=i}createLeadStatus(t){const i=new V3(t);return i.Do(this),i.response}updateLeadStatus(t,i){const a=new U3(t,i);return a.Do(this),a.response}importLeadStatuses(t){const i=new j3(t);return i.Do(this),i.response}validateLeadStatusExcelData(t){const i=new G3(t);return i.Do(this),i.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(K.ed),e.LFG(z.q),e.LFG(W.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),J3=(()=>{class s extends W.nH{constructor(t,i,a){super("LeadStatusService",a,t),this.businessProvider=i}createLeadStatus(t){const i=Object.fromEntries(Object.entries(t).filter(([a,l])=>null!==l));return this.businessProvider.createLeadStatus(i)}updateLeadStatus(t,i){return this.businessProvider.updateLeadStatus(t,i)}importLeadStatuses(t){return this.businessProvider.importLeadStatuses(t)}validateLeadStatusExcelData(t){return this.businessProvider.validateLeadStatusExcelData(t)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(Jc,8),e.LFG(Jc),e.LFG(K.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),Eo=(()=>{class s extends b.m1{constructor(t,i,a,l,d,ee){super({loading:!1,leadStatuses:[],done:!1,searchQuery:"",formName:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=a,this.toast=l,this.formService=d,this.leadStatusService=ee,this.errors$=this.select(c=>c.errors),this.loading$=this.select(c=>c.loading),this.done$=this.select(c=>c.done),this.item$=this.select(c=>c.item),this.leadStatuses$=this.select(c=>c.leadStatuses),this.paging$=this.select(c=>c.paging),this.searchQuery$=this.select(c=>c.searchQuery),this.formName$=this.select(c=>c.formName),this.actionResult$=this.select(this.item$,this.done$,(c,u)=>({item:c,done:u}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.leadStatuses$,(c,u,n,r,m)=>({errors:c,loading:u,item:n,formName:r,leadStatuses:m}),{debounce:!0}),this.input$=this.select(this.paging$,this.searchQuery$,(c,u)=>({limit:c.limit,skip:c.skip,name:u,total:c.total})),this.setFormName=this.updater((c,u)=>Object.assign(Object.assign({},c),{formName:u})),this.setItem=this.updater((c,u)=>Object.assign(Object.assign({},c),{item:u})),this.addNewLeadStatus=this.updater((c,u)=>Object.assign(Object.assign({},c),{leadStatuses:[...c.leadStatuses,u]})),this.updateLeadStatus=this.updater((c,u)=>Object.assign(Object.assign({},c),{leadStatuses:c.leadStatuses.map(n=>n.id===u.id?u:n)})),this.addLeadStatuses=this.updater((c,u)=>Object.assign(Object.assign({},c),{leadStatuses:c.leadStatuses.concat(u)})),this.updateLeadStatuses=this.updater((c,u)=>Object.assign(Object.assign({},c),{leadStatuses:c.leadStatuses.map(n=>u.find(m=>m.id===n.id)||n)})),this.setSearchQuery=this.updater((c,u)=>Object.assign(Object.assign({},c),{searchQuery:u})),this.loadLeadStatusEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.data.userLeadStatus({leadStatusId:u}).pipe((0,b._b)(n=>{this.patchState({item:n.data.item,errors:n.errors,loading:!1})},n=>this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})))))),this.loadLeadStatusesEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.input$),(0,h.w)(([u,n])=>this.data.userLeadStatuses({input:n}).pipe((0,b._b)(r=>this.patchState({paging:{limit:n.limit,skip:n.skip,total:r.data.count.total},leadStatuses:r.data.items,errors:r.errors,loading:!1}),r=>this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})))))),this.createLeadStatusEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.leadStatusService.createLeadStatus(Object.assign({},u)).pipe((0,b._b)(n=>{this.addNewLeadStatus(n),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:n,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},n=>{n.graphQLErrors?(this.toast.error(n.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})):(this.toast.error(n.Message),this.formService.setErrors(n.Data))}))))),this.updateLeadStatusEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([u,n])=>this.leadStatusService.updateLeadStatus(u,u.id).pipe((0,b._b)(r=>{this.updateLeadStatus(r),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:r,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},r=>{r.graphQLErrors?(this.toast.error(r.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})):(this.toast.error(r.Message),this.formService.setErrors(r.Data))}))))),this.deleteLeadStatusEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([u,n])=>this.data.userDeleteLeadStatus({leadStatusId:n.id}).pipe((0,b._b)(r=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:r.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},r=>{r.graphQLErrors?(this.toast.error(r.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})):(this.toast.error(r.Message),this.formService.setErrors(r.Data))}))))),this.importExcelEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.leadStatusService.importLeadStatuses(u).pipe((0,de.K)(n=>{var r;return this.toast.error(null!==(r=n.Message)&&void 0!==r?r:"Failed to save",{duration:3e3}),q.E}),(0,y.b)(n=>{const r=JSON.parse(n.created),m=JSON.parse(n.updated),p=JSON.parse(n.failed),v=r.length+m.length+p.length;this.addLeadStatuses(r),this.updateLeadStatuses(m),this.toast.success(`${r.length} created, ${m.length} updated, ${p.length} failed of total ${v}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("leadStatusId")?(this.route.snapshot.paramMap.get("leadStatusId"),this.setFormName("leadStatus_edit")):this.setFormName("leadStatus_create")}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.leadStatusService.validateLeadStatusExcelData(t)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(z.q),e.LFG(O.F0),e.LFG(O.gz),e.LFG(X.F),e.LFG(Z.o),e.LFG(J3))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function z3(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.close.emit())})("formIsReady",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.leadStatus)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let zc=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"leadStatus_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({id:null,name:""}),this.store.vm$.subscribe(i=>{this.leadStatus=i.item})):t.formName&&t.formName.currentValue&&"leadStatus_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadLeadStatusEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.leadStatus=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Eo),e.Y36(O.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-lead-status-form"]],inputs:{leadStatus:"leadStatus",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,z3,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[P.O5,te.M,P.Ov],encapsulation:2}),s})(),Hc=(()=>{class s{constructor(){this.autoHeight=!1,this.leadStatuses=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[,{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var a;t.includes(null===(a=i.data)||void 0===a?void 0:a.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-lead-status-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(f.x,5),2&t){let a;e.iGM(a=e.CRH())&&(i.tableView=a.first)}},inputs:{autoHeight:"autoHeight",leadStatuses:"leadStatuses"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.leadStatuses)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[f.x],encapsulation:2}),s})();function H3(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-lead-status-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","leadStatus_edit")("formControl",t.formControl)("leadStatus",t.leadStatus)}}const q3=function(){return{}};function K3(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-lead-status-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","leadStatus_create")("formControl",t.formControl)("leadStatus",e.DdM(3,q3))}}function Z3(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-lead-status-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(d.ref.close())}),e.qZA()}2&s&&e.Q6J("leadStatuses",o.data.items)}let B3=(()=>{class s extends G.fS{constructor(t){super(),this.store=t,this.store.loadLeadStatusesEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.leadStatuses$.pipe((0,h.w)(i=>(0,D.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Eo))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","leadStatus","send","close"],[1,"w-full","h-full","bg-white",3,"leadStatuses","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,H3,2,3,"ng-template",null,1,e.W1O),e.YNc(3,K3,1,4,"ng-template",null,2,e.W1O),e.YNc(5,Z3,1,1,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",d)("editTemplate",a)("createTemplate",l)("key",i.field.key)}},dependencies:[E.JJ,E.oH,H.$,zc,Hc],encapsulation:2}),s})();function k3(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-lead-status-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","leadStatus_edit")("leadStatus",t.value)}}const Y3=function(){return{}};function X3(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-lead-status-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","leadStatus_create")("leadStatus",e.DdM(2,Y3))}function eG(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-lead-status-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(null==d.ref?null:d.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("leadStatuses",t.items)}}let tG=(()=>{class s extends pe{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:6,consts:[[3,"data","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","leadStatus","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","leadStatuses","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,k3,1,2,"ng-template",null,1,e.W1O),e.YNc(3,X3,1,3,"ng-template",null,2,e.W1O),e.YNc(5,eG,1,2,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("data",i.data)("title",i.to.title)("onSave",i.onSave)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[he,zc,Hc],encapsulation:2}),s})(),iG=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[Eo],imports:[P.ez,U.F,E.UX,J.o,ae.u,$.P,j.t,me,k.h,se.G,G.X0.forChild({types:[{name:"lead-status-select",component:B3,wrappers:["form-field"]},{name:"lead-status-grid",component:tG}]})]}),s})(),sG=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[iG]}),s})();var Oo=M(19647);function oG(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.close.emit())})("formIsReady",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.legalCase)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let qc=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"legalCase_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.legalCase=i.item})):t.formName&&t.formName.currentValue&&"legalCase_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadLegalCaseEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.legalCase=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Oo.d),e.Y36(O.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-legal-case-form"]],inputs:{legalCase:"legalCase",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,oG,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[P.O5,te.M,P.Ov],encapsulation:2}),s})(),Kc=(()=>{class s{constructor(){this.autoHeight=!1,this.legalCases=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[{field:"accidentType.name",headerName:"Accident Type",filter:"agTextColumnFilter"},{field:"patient.name",headerName:"Patient",filter:"agTextColumnFilter"},{field:"medLevel.name",headerName:"Med Level",filter:"agTextColumnFilter"},{field:"firm.name",headerName:"Firm",filter:"agTextColumnFilter"},{field:"attorney.name",headerName:"Attorney",filter:"agTextColumnFilter"},{field:"caseStatus.name",headerName:"Case Status",filter:"agTextColumnFilter"},{field:"caseType.name",headerName:"Case Type",filter:"agTextColumnFilter"},{field:"patientTreatmentStatus.name",headerName:"Patient Treatment Status",filter:"agTextColumnFilter"},{field:"caseProgressStatus.name",headerName:"Case Progress Status",filter:"agTextColumnFilter"},{field:"adverseInsuranceStatus.name",headerName:"Adverse Insurance Status",filter:"agTextColumnFilter"},{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{field:"accidentTypeId",filter:"agTextColumnFilter",hide:!0},{field:"patientId",filter:"agTextColumnFilter",hide:!0},{field:"medLevelId",filter:"agTextColumnFilter",hide:!0},{field:"firmId",filter:"agTextColumnFilter",hide:!0},{field:"attorneyId",filter:"agTextColumnFilter",hide:!0},{field:"agentId",filter:"agTextColumnFilter"},{field:"caseStatusId",filter:"agTextColumnFilter",hide:!0},{field:"caseTypeId",filter:"agTextColumnFilter",hide:!0},{field:"patientTreatmentStatusId",filter:"agTextColumnFilter",hide:!0},{field:"medicalRecordNumber",filter:"agTextColumnFilter"},{field:"pharmacyControlNumber",filter:"agTextColumnFilter"},{field:"pchGroupNumber",filter:"agTextColumnFilter"},{field:"dateOfLoss",filter:"agDateColumnFilter"},{field:"caseStatusDate",filter:"agDateColumnFilter"},{field:"caseStatusOther",filter:"agTextColumnFilter"},{field:"paralegal",filter:"agTextColumnFilter"},{field:"paralegalContact",filter:"agTextColumnFilter"},{field:"caseNoteSummary",filter:"agTextColumnFilter"},{headerName:"Policy Limit",field:"policyLimit",valueFormatter:t=>{var i;return(0,_.oBD)(null===(i=t.data)||void 0===i?void 0:i.policyLimit,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{headerName:"Attorney Fee",field:"attorneyFee",valueFormatter:t=>{var i;return(0,_.oBD)(null===(i=t.data)||void 0===i?void 0:i.attorneyFee,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{field:"referringPhysician",filter:"agTextColumnFilter"},{headerName:"No More Treatment",field:"noMoreTreatment",filter:"agSetColumnFilter",cellRenderer:"checkboxRenderer"},{headerName:"Medpay",field:"medpay",filter:"agSetColumnFilter",cellRenderer:"checkboxRenderer"},{field:"fileNumber",filter:"agTextColumnFilter"},{field:"caseNumber",filter:"agTextColumnFilter"},{field:"accidentState",filter:"agTextColumnFilter"},{field:"assignedTo",filter:"agTextColumnFilter"},{headerName:"Attorney Paid",field:"attorneyPaid",filter:"agSetColumnFilter",cellRenderer:"checkboxRenderer"},{field:"attorneySentDate",filter:"agDateColumnFilter"},{headerName:"Write off",field:"writeOff",filter:"agSetColumnFilter",cellRenderer:"checkboxRenderer"},{headerName:"No MRI",field:"noMRI",filter:"agSetColumnFilter",cellRenderer:"checkboxRenderer"},{headerName:"No PT",field:"noPT",filter:"agSetColumnFilter",cellRenderer:"checkboxRenderer"},{headerName:"No First Appointment",field:"noFirstAppointment",filter:"agSetColumnFilter",cellRenderer:"checkboxRenderer"},{headerName:"Hot",field:"hot",filter:"agSetColumnFilter",cellRenderer:"checkboxRenderer"},{headerName:"Documents Uploaded",field:"documentsUploaded",filter:"agSetColumnFilter",cellRenderer:"checkboxRenderer"},{headerName:"Attorney Review",field:"attorneyReview",filter:"agSetColumnFilter",cellRenderer:"checkboxRenderer"},{headerName:"Escalated Review",field:"escalatedReview",filter:"agSetColumnFilter",cellRenderer:"checkboxRenderer"},{headerName:"In Active",field:"inActive",filter:"agSetColumnFilter",cellRenderer:"checkboxRenderer"},{headerName:"Criteria 1712",field:"criteria1712",filter:"agSetColumnFilter",cellRenderer:"checkboxRenderer"},{field:"documentUploadedDate",filter:"agDateColumnFilter"},{field:"patientDischargedGatheringRecordsDate",filter:"agDateColumnFilter"},{field:"resubmitted",filter:"agDateColumnFilter"},{field:"caseProgressStatusId",filter:"agTextColumnFilter",hide:!0},{field:"firmCaseManager",filter:"agTextColumnFilter"},{field:"adverseInsuranceStatusId",filter:"agTextColumnFilter",hide:!0},{field:"createdBy",filter:"agTextColumnFilter"},{field:"renegotiatePayOffDate",filter:"agDateColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var a;t.includes(null===(a=i.data)||void 0===a?void 0:a.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-legal-case-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(f.x,5),2&t){let a;e.iGM(a=e.CRH())&&(i.tableView=a.first)}},inputs:{autoHeight:"autoHeight",legalCases:"legalCases"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.legalCases)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[f.x],encapsulation:2}),s})();function aG(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-legal-case-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","legalCase_edit")("formControl",t.formControl)("legalCase",t.legalCase)}}const rG=function(){return{}};function nG(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-legal-case-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","legalCase_create")("formControl",t.formControl)("legalCase",e.DdM(3,rG))}}function lG(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-legal-case-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(d.ref.close())}),e.qZA()}2&s&&e.Q6J("legalCases",o.data.items)}let cG=(()=>{class s extends G.fS{constructor(t,i){if(super(),this.store=t,this.route=i,this.routerKeys=["accidentTypeId","patientId","medLevelId","firmId","attorneyId","caseStatusId","caseTypeId","patientTreatmentStatusId","caseProgressStatusId","adverseInsuranceStatusId"],this.route.snapshot.paramMap.has("patientId")){var a=this.route.snapshot.paramMap.get("patientId");this.store.setPatientId(a)}this.store.loadLegalCasesEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.legalCases$.pipe((0,h.w)(i=>(0,D.of)(i)))}formRouterKeyDidChange(t){t.accidentTypeId&&this.store.setAccidentTypeId(t.accidentTypeId),t.patientId&&this.store.setPatientId(t.patientId),t.medLevelId&&this.store.setMedLevelId(t.medLevelId),t.firmId&&this.store.setFirmId(t.firmId),t.attorneyId&&this.store.setAttorneyId(t.attorneyId),t.caseStatusId&&this.store.setCaseStatusId(t.caseStatusId),t.caseTypeId&&this.store.setCaseTypeId(t.caseTypeId),t.patientTreatmentStatusId&&this.store.setPatientTreatmentStatusId(t.patientTreatmentStatusId),t.caseProgressStatusId&&this.store.setCaseProgressStatusId(t.caseProgressStatusId),t.adverseInsuranceStatusId&&this.store.setAdverseInsuranceStatusId(t.adverseInsuranceStatusId),this.store.loadLegalCasesEffect()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Oo.d),e.Y36(O.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e._Bn([Oo.d]),e.qOj],decls:7,vars:7,consts:[[3,"to","control","listTemplate","editTemplate","createTemplate","key","routerKeys","selectionChanged","formRouterKeyDidChange"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","legalCase","send","close"],[1,"w-full","h-full","bg-white",3,"legalCases","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value})("formRouterKeyDidChange",function(l){return i.formRouterKeyDidChange(l)}),e.qZA(),e.YNc(1,aG,2,3,"ng-template",null,1,e.W1O),e.YNc(3,nG,1,4,"ng-template",null,2,e.W1O),e.YNc(5,lG,1,1,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("listTemplate",d)("editTemplate",a)("createTemplate",l)("key",i.field.key)("routerKeys",i.routerKeys)}},dependencies:[E.JJ,E.oH,H.$,qc,Kc],encapsulation:2}),s})();function dG(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-legal-case-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","legalCase_edit")("legalCase",t.value)}}const uG=function(){return{}};function mG(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-legal-case-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","legalCase_create")("legalCase",e.DdM(2,uG))}function pG(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-legal-case-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(null==d.ref?null:d.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("legalCases",t.items)}}let hG=(()=>{class s extends pe{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","legalCase","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","legalCases","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,dG,1,2,"ng-template",null,1,e.W1O),e.YNc(3,mG,1,3,"ng-template",null,2,e.W1O),e.YNc(5,pG,1,2,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[he,qc,Kc],encapsulation:2}),s})(),fG=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[P.ez,U.F,E.UX,J.o,ae.u,$.P,j.t,me,k.h,se.G,G.X0.forChild({types:[{name:"legal-case-select",component:cG,wrappers:["form-field"]},{name:"legal-case-grid",component:hG}]})]}),s})(),_G=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[fG]}),s})();var Lo=M(3866);function gG(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.close.emit())})("formIsReady",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.location)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let Zc=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"location_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.location=i.item})):t.formName&&t.formName.currentValue&&"location_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadLocationEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.location=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Lo.v),e.Y36(O.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-location-form"]],inputs:{location:"location",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,gG,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[P.O5,te.M,P.Ov],encapsulation:2}),s})(),Bc=(()=>{class s{constructor(){this.autoHeight=!1,this.locations=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[{field:"placeOfService.name",headerName:"Place of Service",filter:"agTextColumnFilter"},{field:"vendorLocation.name",headerName:"Vendor Location",filter:"agTextColumnFilter"},{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{field:"locationName",filter:"agTextColumnFilter"},{field:"line1",filter:"agTextColumnFilter"},{field:"line2",filter:"agTextColumnFilter"},{field:"city",filter:"agTextColumnFilter"},{field:"state",filter:"agTextColumnFilter"},{field:"postalCode",filter:"agTextColumnFilter"},{headerName:"Latitude",field:"latitude",valueFormatter:t=>{var i;return(0,_.oBD)(null===(i=t.data)||void 0===i?void 0:i.latitude,"",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{headerName:"Longitude",field:"longitude",valueFormatter:t=>{var i;return(0,_.oBD)(null===(i=t.data)||void 0===i?void 0:i.longitude,"",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{field:"abbrev",filter:"agTextColumnFilter"},{field:"division",filter:"agTextColumnFilter"},{field:"country",filter:"agTextColumnFilter"},{field:"officePhone",filter:"agTextColumnFilter"},{field:"fax",filter:"agTextColumnFilter"},{field:"attentionTo",filter:"agTextColumnFilter"},{field:"placeOfServiceId",filter:"agTextColumnFilter",hide:!0}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var a;t.includes(null===(a=i.data)||void 0===a?void 0:a.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-location-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(f.x,5),2&t){let a;e.iGM(a=e.CRH())&&(i.tableView=a.first)}},inputs:{autoHeight:"autoHeight",locations:"locations"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.locations)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[f.x],encapsulation:2}),s})();function vG(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-location-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","location_edit")("formControl",t.formControl)("location",t.location)}}const CG=function(){return{}};function SG(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-location-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","location_create")("formControl",t.formControl)("location",e.DdM(3,CG))}}function bG(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-location-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(d.ref.close())}),e.qZA()}2&s&&e.Q6J("locations",o.data.items)}let TG=(()=>{class s extends G.fS{constructor(t){super(),this.store=t,this.routerKeys=["placeOfServiceId","vendorLocationId","vendorId","clinicalProviderId"],this.store.loadLocationsEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.locations$.pipe((0,h.w)(i=>(0,D.of)(i)))}formRouterKeyDidChange(t){t.placeOfServiceId&&this.store.setPlaceOfServiceId(t.placeOfServiceId),t.vendorLocationId&&this.store.setVendorLocationId(t.vendorLocationId),t.vendorId&&this.store.setVendorId(t.vendorId),t.clinicalProviderId&&this.store.setClinicalProviderId(t.clinicalProviderId),this.store.loadLocationsEffect()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Lo.v))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e._Bn([Lo.v]),e.qOj],decls:7,vars:8,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","routerKeys","selectionChanged","formRouterKeyDidChange"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","location","send","close"],[1,"w-full","h-full","bg-white",3,"locations","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value})("formRouterKeyDidChange",function(l){return i.formRouterKeyDidChange(l)}),e.qZA(),e.YNc(1,vG,2,3,"ng-template",null,1,e.W1O),e.YNc(3,SG,1,4,"ng-template",null,2,e.W1O),e.YNc(5,bG,1,1,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",d)("editTemplate",a)("createTemplate",l)("key",i.field.key)("routerKeys",i.routerKeys)}},dependencies:[E.JJ,E.oH,H.$,Zc,Bc],encapsulation:2}),s})();function yG(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-location-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","location_edit")("location",t.value)}}const wG=function(){return{}};function xG(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-location-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","location_create")("location",e.DdM(2,wG))}function NG(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-location-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(null==d.ref?null:d.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("locations",t.items)}}let AG=(()=>{class s extends pe{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","location","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","locations","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,yG,1,2,"ng-template",null,1,e.W1O),e.YNc(3,xG,1,3,"ng-template",null,2,e.W1O),e.YNc(5,NG,1,2,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[he,Zc,Bc],encapsulation:2}),s})(),FG=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[P.ez,U.F,E.UX,J.o,ae.u,$.P,j.t,me,k.h,se.G,G.X0.forChild({types:[{name:"location-select",component:TG,wrappers:["form-field"]},{name:"location-grid",component:AG}]})]}),s})(),PG=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[FG]}),s})();class Si extends W.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class IG extends Si{constructor(o){super("ValidateManufacturerExcelDataAction"),this.valid=!1,this.excelData=o}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name)}),this.validationContext.addRule(new g.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof g.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(a=>a.name),newNames:[i.newName]}):i instanceof g.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,D.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class DG extends g.wS{constructor(o,t,i,a,l){super(o,t,i,a,l,!0)}}class MG extends g.ul{constructor(o,t,i,a=!1){super(o,t,a),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new g.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new DG("name","The manufacturer name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class WG extends Si{constructor(o){super("CreateManufacturerAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new MG("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateManufacturer({input:this.input}).pipe((0,h.w)(o=>(0,ue.of)(o.data.created)))}}class EG extends Si{constructor(o){super("UpdateManufacturersAction"),this.manufacturers=o}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.manufacturers,!0))}performAction(){this.response=this.businessProvider.data.userUpdateManufacturers({input:{manufacturers:this.manufacturers}}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}class OG extends Si{constructor(o,t){super("UpdateManufacturerAction"),this.manufacturer=o,this.manufacturerId=t}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.manufacturer,!0)).addRule(new g.xF("Id","Id should be a CUID and not null",this.manufacturerId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateManufacturer({manufacturerId:this.manufacturerId,input:this.manufacturer}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}let kc=(()=>{class s extends W.nH{constructor(t,i,a){super("NotificationService.ManufacturerBusinessProviderService",t,a),this.data=i}createManufacturer(t){const i=new WG(t);return i.Do(this),i.response}updateManufacturer(t,i){const a=new OG(t,i);return a.Do(this),a.response}importManufacturers(t){const i=new EG(t);return i.Do(this),i.response}validateManufacturerExcelData(t){const i=new IG(t);return i.Do(this),i.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(K.ed),e.LFG(z.q),e.LFG(W.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),LG=(()=>{class s extends W.nH{constructor(t,i,a){super("ManufacturerService",a,t),this.businessProvider=i}createManufacturer(t){const i=Object.fromEntries(Object.entries(t).filter(([a,l])=>null!==l));return this.businessProvider.createManufacturer(i)}updateManufacturer(t,i){return this.businessProvider.updateManufacturer(t,i)}importManufacturers(t){return this.businessProvider.importManufacturers(t)}validateManufacturerExcelData(t){return this.businessProvider.validateManufacturerExcelData(t)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(kc,8),e.LFG(kc),e.LFG(K.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),$o=(()=>{class s extends b.m1{constructor(t,i,a,l,d,ee){super({loading:!1,manufacturers:[],done:!1,searchQuery:"",formName:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=a,this.toast=l,this.formService=d,this.manufacturerService=ee,this.errors$=this.select(c=>c.errors),this.loading$=this.select(c=>c.loading),this.done$=this.select(c=>c.done),this.item$=this.select(c=>c.item),this.manufacturers$=this.select(c=>c.manufacturers),this.paging$=this.select(c=>c.paging),this.searchQuery$=this.select(c=>c.searchQuery),this.formName$=this.select(c=>c.formName),this.actionResult$=this.select(this.item$,this.done$,(c,u)=>({item:c,done:u}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.manufacturers$,(c,u,n,r,m)=>({errors:c,loading:u,item:n,formName:r,manufacturers:m}),{debounce:!0}),this.input$=this.select(this.paging$,this.searchQuery$,(c,u)=>({limit:c.limit,skip:c.skip,name:u,total:c.total})),this.setFormName=this.updater((c,u)=>Object.assign(Object.assign({},c),{formName:u})),this.setItem=this.updater((c,u)=>Object.assign(Object.assign({},c),{item:u})),this.addNewManufacturer=this.updater((c,u)=>Object.assign(Object.assign({},c),{manufacturers:[...c.manufacturers,u]})),this.updateManufacturer=this.updater((c,u)=>Object.assign(Object.assign({},c),{manufacturers:c.manufacturers.map(n=>n.id===u.id?u:n)})),this.addManufacturers=this.updater((c,u)=>Object.assign(Object.assign({},c),{manufacturers:c.manufacturers.concat(u)})),this.updateManufacturers=this.updater((c,u)=>Object.assign(Object.assign({},c),{manufacturers:c.manufacturers.map(n=>u.find(m=>m.id===n.id)||n)})),this.setSearchQuery=this.updater((c,u)=>Object.assign(Object.assign({},c),{searchQuery:u})),this.loadManufacturerEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.data.userManufacturer({manufacturerId:u}).pipe((0,b._b)(n=>{this.patchState({item:n.data.item,errors:n.errors,loading:!1})},n=>this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})))))),this.loadManufacturersEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.input$),(0,h.w)(([u,n])=>this.data.userManufacturers({input:n}).pipe((0,b._b)(r=>this.patchState({paging:{limit:n.limit,skip:n.skip,total:r.data.count.total},manufacturers:r.data.items,errors:r.errors,loading:!1}),r=>this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})))))),this.createManufacturerEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.manufacturerService.createManufacturer(Object.assign({},u)).pipe((0,b._b)(n=>{this.addNewManufacturer(n),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:n,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},n=>{n.graphQLErrors?(this.toast.error(n.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})):(this.toast.error(n.Message),this.formService.setErrors(n.Data))}))))),this.updateManufacturerEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([u,n])=>this.manufacturerService.updateManufacturer(u,u.id).pipe((0,b._b)(r=>{this.updateManufacturer(r),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:r,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},r=>{r.graphQLErrors?(this.toast.error(r.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})):(this.toast.error(r.Message),this.formService.setErrors(r.Data))}))))),this.deleteManufacturerEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([u,n])=>this.data.userDeleteManufacturer({manufacturerId:n.id}).pipe((0,b._b)(r=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:r.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},r=>{r.graphQLErrors?(this.toast.error(r.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})):(this.toast.error(r.Message),this.formService.setErrors(r.Data))}))))),this.importExcelEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.manufacturerService.importManufacturers(u).pipe((0,de.K)(n=>{var r;return this.toast.error(null!==(r=n.Message)&&void 0!==r?r:"Failed to save",{duration:3e3}),q.E}),(0,y.b)(n=>{const r=JSON.parse(n.created),m=JSON.parse(n.updated),p=JSON.parse(n.failed),v=r.length+m.length+p.length;this.addManufacturers(r),this.updateManufacturers(m),this.toast.success(`${r.length} created, ${m.length} updated, ${p.length} failed of total ${v}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("manufacturerId")?(this.route.snapshot.paramMap.get("manufacturerId"),this.setFormName("manufacturer_edit")):this.setFormName("manufacturer_create")}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.manufacturerService.validateManufacturerExcelData(t)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(z.q),e.LFG(O.F0),e.LFG(O.gz),e.LFG(X.F),e.LFG(Z.o),e.LFG(LG))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function $G(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.close.emit())})("formIsReady",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.manufacturer)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let Yc=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"manufacturer_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.manufacturer=i.item})):t.formName&&t.formName.currentValue&&"manufacturer_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadManufacturerEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.manufacturer=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36($o),e.Y36(O.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-manufacturer-form"]],inputs:{manufacturer:"manufacturer",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,$G,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[P.O5,te.M,P.Ov],encapsulation:2}),s})(),Xc=(()=>{class s{constructor(){this.autoHeight=!1,this.manufacturers=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[,{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{field:"primaryPhoneNumber",filter:"agTextColumnFilter"},{field:"primaryEmailAddress",filter:"agTextColumnFilter"},{field:"primaryAddressLine1",filter:"agTextColumnFilter"},{field:"primaryAddressLine2",filter:"agTextColumnFilter"},{field:"primaryAddressCity",filter:"agTextColumnFilter"},{field:"primaryAddressStateOrProvince",filter:"agTextColumnFilter"},{field:"primaryAddressPostalCode",filter:"agTextColumnFilter"},{field:"notes",filter:"agTextColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var a;t.includes(null===(a=i.data)||void 0===a?void 0:a.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-manufacturer-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(f.x,5),2&t){let a;e.iGM(a=e.CRH())&&(i.tableView=a.first)}},inputs:{autoHeight:"autoHeight",manufacturers:"manufacturers"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.manufacturers)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[f.x],encapsulation:2}),s})();function GG(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-manufacturer-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","manufacturer_edit")("formControl",t.formControl)("manufacturer",t.manufacturer)}}const RG=function(){return{}};function QG(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-manufacturer-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","manufacturer_create")("formControl",t.formControl)("manufacturer",e.DdM(3,RG))}}function VG(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-manufacturer-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(d.ref.close())}),e.qZA()}2&s&&e.Q6J("manufacturers",o.data.items)}let jG=(()=>{class s extends G.fS{constructor(t){super(),this.store=t,this.store.loadManufacturersEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.manufacturers$.pipe((0,h.w)(i=>(0,D.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36($o))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","manufacturer","send","close"],[1,"w-full","h-full","bg-white",3,"manufacturers","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,GG,2,3,"ng-template",null,1,e.W1O),e.YNc(3,QG,1,4,"ng-template",null,2,e.W1O),e.YNc(5,VG,1,1,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",d)("editTemplate",a)("createTemplate",l)("key",i.field.key)}},dependencies:[E.JJ,E.oH,H.$,Yc,Xc],encapsulation:2}),s})();function UG(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-manufacturer-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","manufacturer_edit")("manufacturer",t.value)}}const JG=function(){return{}};function zG(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-manufacturer-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","manufacturer_create")("manufacturer",e.DdM(2,JG))}function HG(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-manufacturer-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(null==d.ref?null:d.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("manufacturers",t.items)}}let qG=(()=>{class s extends pe{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","manufacturer","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","manufacturers","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,UG,1,2,"ng-template",null,1,e.W1O),e.YNc(3,zG,1,3,"ng-template",null,2,e.W1O),e.YNc(5,HG,1,2,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[he,Yc,Xc],encapsulation:2}),s})(),KG=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[$o],imports:[P.ez,U.F,E.UX,J.o,ae.u,$.P,j.t,me,k.h,se.G,G.X0.forChild({types:[{name:"manufacturer-select",component:jG,wrappers:["form-field"]},{name:"manufacturer-grid",component:qG}]})]}),s})(),ZG=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[KG]}),s})();class bi extends W.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class BG extends bi{constructor(o,t){super("ValidateMedicalConditionProviderExcelDataAction"),this.valid=!1,this.excelData=o,this.clinicalProviders=t}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name),this.validationContext.addRule(new g.mi(`clinicalProviderName_${i}_is_valid}`,"Clinical Provider Is Not Valid","clinicalProvider.name",t.clinicalProvider,this.clinicalProviders,!0))}),this.validationContext.addRule(new g.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof g.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(a=>a.name),newNames:[i.newName]}):i instanceof g.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,D.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class kG extends g.wS{constructor(o,t,i,a,l){super(o,t,i,a,l,!0)}}class YG extends g.ul{constructor(o,t,i,a=!1){super(o,t,a),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new g.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new kG("name","The medicalconditionprovider name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class XG extends bi{constructor(o){super("CreateMedicalConditionProviderAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new YG("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateMedicalConditionProvider({input:this.input}).pipe((0,h.w)(o=>(0,ue.of)(o.data.created)))}}class eR extends bi{constructor(o){super("UpdateMedicalConditionProvidersAction"),this.medicalConditionProviders=o}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.medicalConditionProviders,!0))}performAction(){this.response=this.businessProvider.data.userUpdateMedicalConditionProviders({input:{medicalConditionProviders:this.medicalConditionProviders}}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}class tR extends bi{constructor(o,t){super("UpdateMedicalConditionProviderAction"),this.medicalConditionProvider=o,this.medicalConditionProviderId=t}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.medicalConditionProvider,!0)).addRule(new g.xF("Id","Id should be a CUID and not null",this.medicalConditionProviderId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateMedicalConditionProvider({medicalConditionProviderId:this.medicalConditionProviderId,input:this.medicalConditionProvider}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}let ed=(()=>{class s extends W.nH{constructor(t,i,a){super("NotificationService.MedicalConditionProviderBusinessProviderService",t,a),this.data=i}createMedicalConditionProvider(t){const i=new XG(t);return i.Do(this),i.response}updateMedicalConditionProvider(t,i){const a=new tR(t,i);return a.Do(this),a.response}importMedicalConditionProviders(t){const i=new eR(t);return i.Do(this),i.response}validateMedicalConditionProviderExcelData(t,i){const a=new BG(t,i);return a.Do(this),a.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(K.ed),e.LFG(z.q),e.LFG(W.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),iR=(()=>{class s extends W.nH{constructor(t,i,a){super("MedicalConditionProviderService",a,t),this.businessProvider=i}createMedicalConditionProvider(t){const i=Object.fromEntries(Object.entries(t).filter(([a,l])=>null!==l));return this.businessProvider.createMedicalConditionProvider(i)}updateMedicalConditionProvider(t,i){return this.businessProvider.updateMedicalConditionProvider(t,i)}importMedicalConditionProviders(t){return this.businessProvider.importMedicalConditionProviders(t)}validateMedicalConditionProviderExcelData(t,i){return this.businessProvider.validateMedicalConditionProviderExcelData(t,i)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(ed,8),e.LFG(ed),e.LFG(K.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),Go=(()=>{class s extends b.m1{constructor(t,i,a,l,d,ee){if(super({loading:!1,medicalConditionProviders:[],done:!1,searchQuery:"",formName:void 0,clinicalProviderId:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=a,this.toast=l,this.formService=d,this.medicalConditionProviderService=ee,this.errors$=this.select(u=>u.errors),this.loading$=this.select(u=>u.loading),this.done$=this.select(u=>u.done),this.item$=this.select(u=>u.item),this.medicalConditionProviders$=this.select(u=>u.medicalConditionProviders),this.clinicalProviders$=this.select(u=>u.clinicalProviders||[]),this.clinicalProviderId$=this.select(u=>u.clinicalProviderId),this.paging$=this.select(u=>u.paging),this.searchQuery$=this.select(u=>u.searchQuery),this.formName$=this.select(u=>u.formName),this.actionResult$=this.select(this.item$,this.done$,(u,n)=>({item:u,done:n}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.medicalConditionProviders$,this.clinicalProviders$,(u,n,r,m,p,v)=>({errors:u,loading:n,item:r,formName:m,medicalConditionProviders:p,clinicalProviders:v}),{debounce:!0}),this.input$=this.select(this.paging$,this.clinicalProviderId$,this.searchQuery$,(u,n,r)=>({limit:u.limit,skip:u.skip,name:r,clinicalProviderId:n,total:u.total})),this.setFormName=this.updater((u,n)=>Object.assign(Object.assign({},u),{formName:n})),this.setClinicalProviderId=this.updater((u,n)=>Object.assign(Object.assign({},u),{clinicalProviderId:n})),this.filterClinicalProviders=u=>this.data.userSelectClinicalProviders({input:{name:u}}).pipe((0,b._b)(n=>{let r=n.data.items;return this.patchState({clinicalProviders:r}),r},n=>this.patchState({errors:n.graphQLErrors?n.graphQLErrors:n})),(0,fe.U)(n=>n.data.items)),this.addClinicalProvider=this.updater((u,n)=>Object.assign(Object.assign({},u),{clinicalProviders:u.clinicalProviders.concat(n)})),this.setItem=this.updater((u,n)=>Object.assign(Object.assign({},u),{item:n})),this.addNewMedicalConditionProvider=this.updater((u,n)=>Object.assign(Object.assign({},u),{medicalConditionProviders:[...u.medicalConditionProviders,n]})),this.updateMedicalConditionProvider=this.updater((u,n)=>Object.assign(Object.assign({},u),{medicalConditionProviders:u.medicalConditionProviders.map(r=>r.id===n.id?n:r)})),this.addMedicalConditionProviders=this.updater((u,n)=>Object.assign(Object.assign({},u),{medicalConditionProviders:u.medicalConditionProviders.concat(n)})),this.updateMedicalConditionProviders=this.updater((u,n)=>Object.assign(Object.assign({},u),{medicalConditionProviders:u.medicalConditionProviders.map(r=>n.find(p=>p.id===r.id)||r)})),this.setSearchQuery=this.updater((u,n)=>Object.assign(Object.assign({},u),{searchQuery:n})),this.loadMedicalConditionProviderEffect=this.effect(u=>u.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(n=>this.data.userMedicalConditionProvider({medicalConditionProviderId:n}).pipe((0,b._b)(r=>{this.patchState({item:r.data.item,errors:r.errors,loading:!1})},r=>this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})))))),this.loadMedicalConditionProvidersEffect=this.effect(u=>u.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.input$),(0,h.w)(([n,r])=>this.data.userMedicalConditionProviders({input:r}).pipe((0,b._b)(m=>this.patchState({paging:{limit:r.limit,skip:r.skip,total:m.data.count.total},medicalConditionProviders:m.data.items,errors:m.errors,loading:!1}),m=>this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})))))),this.createMedicalConditionProviderEffect=this.effect(u=>u.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(n=>this.medicalConditionProviderService.createMedicalConditionProvider(Object.assign({},n)).pipe((0,b._b)(r=>{this.addNewMedicalConditionProvider(r),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:r,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},r=>{r.graphQLErrors?(this.toast.error(r.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})):(this.toast.error(r.Message),this.formService.setErrors(r.Data))}))))),this.updateMedicalConditionProviderEffect=this.effect(u=>u.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([n,r])=>this.medicalConditionProviderService.updateMedicalConditionProvider(n,n.id).pipe((0,b._b)(m=>{this.updateMedicalConditionProvider(m),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:m,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},m=>{m.graphQLErrors?(this.toast.error(m.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})):(this.toast.error(m.Message),this.formService.setErrors(m.Data))}))))),this.deleteMedicalConditionProviderEffect=this.effect(u=>u.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([n,r])=>this.data.userDeleteMedicalConditionProvider({medicalConditionProviderId:r.id}).pipe((0,b._b)(m=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:m.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},m=>{m.graphQLErrors?(this.toast.error(m.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})):(this.toast.error(m.Message),this.formService.setErrors(m.Data))}))))),this.importExcelEffect=this.effect(u=>u.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(n=>this.medicalConditionProviderService.importMedicalConditionProviders(n).pipe((0,de.K)(r=>{var m;return this.toast.error(null!==(m=r.Message)&&void 0!==m?m:"Failed to save",{duration:3e3}),q.E}),(0,y.b)(r=>{const m=JSON.parse(r.created),p=JSON.parse(r.updated),v=JSON.parse(r.failed),I=m.length+p.length+v.length;this.addMedicalConditionProviders(m),this.updateMedicalConditionProviders(p),this.toast.success(`${m.length} created, ${p.length} updated, ${v.length} failed of total ${I}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("medicalConditionProviderId")?(this.route.snapshot.paramMap.get("medicalConditionProviderId"),this.setFormName("medicalConditionProvider_edit")):this.setFormName("medicalConditionProvider_create"),this.route.snapshot.paramMap.has("clinicalProviderId")){var c=this.route.snapshot.paramMap.get("clinicalProviderId");this.setClinicalProviderId(c)}}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.medicalConditionProviderService.validateMedicalConditionProviderExcelData(t,i.clinicalProviders)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(z.q),e.LFG(O.F0),e.LFG(O.gz),e.LFG(X.F),e.LFG(Z.o),e.LFG(iR))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function sR(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.close.emit())})("formIsReady",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.medicalConditionProvider)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let td=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"medicalConditionProvider_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.medicalConditionProvider=i.item})):t.formName&&t.formName.currentValue&&"medicalConditionProvider_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadMedicalConditionProviderEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.medicalConditionProvider=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Go),e.Y36(O.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-medical-condition-provider-form"]],inputs:{medicalConditionProvider:"medicalConditionProvider",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,sR,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[P.O5,te.M,P.Ov],encapsulation:2}),s})(),id=(()=>{class s{constructor(){this.autoHeight=!1,this.medicalConditionProviders=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[{field:"clinicalProvider.name",headerName:"Clinical Provider",filter:"agTextColumnFilter"},{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{field:"medicalConditionId",filter:"agTextColumnFilter",hide:!0},{field:"clinicalProviderId",filter:"agTextColumnFilter",hide:!0}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var a;t.includes(null===(a=i.data)||void 0===a?void 0:a.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-medical-condition-provider-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(f.x,5),2&t){let a;e.iGM(a=e.CRH())&&(i.tableView=a.first)}},inputs:{autoHeight:"autoHeight",medicalConditionProviders:"medicalConditionProviders"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.medicalConditionProviders)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[f.x],encapsulation:2}),s})();function oR(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-medical-condition-provider-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","medicalConditionProvider_edit")("formControl",t.formControl)("medicalConditionProvider",t.medicalConditionProvider)}}const aR=function(){return{}};function rR(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-medical-condition-provider-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","medicalConditionProvider_create")("formControl",t.formControl)("medicalConditionProvider",e.DdM(3,aR))}}function nR(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-medical-condition-provider-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(d.ref.close())}),e.qZA()}2&s&&e.Q6J("medicalConditionProviders",o.data.items)}let lR=(()=>{class s extends G.fS{constructor(t){super(),this.store=t,this.store.loadMedicalConditionProvidersEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.medicalConditionProviders$.pipe((0,h.w)(i=>(0,D.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Go))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","medicalConditionProvider","send","close"],[1,"w-full","h-full","bg-white",3,"medicalConditionProviders","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,oR,2,3,"ng-template",null,1,e.W1O),e.YNc(3,rR,1,4,"ng-template",null,2,e.W1O),e.YNc(5,nR,1,1,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",d)("editTemplate",a)("createTemplate",l)("key",i.field.key)}},dependencies:[E.JJ,E.oH,H.$,td,id],encapsulation:2}),s})();function cR(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-medical-condition-provider-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","medicalConditionProvider_edit")("medicalConditionProvider",t.value)}}const dR=function(){return{}};function uR(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-medical-condition-provider-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","medicalConditionProvider_create")("medicalConditionProvider",e.DdM(2,dR))}function mR(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-medical-condition-provider-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(null==d.ref?null:d.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("medicalConditionProviders",t.items)}}let pR=(()=>{class s extends pe{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","medicalConditionProvider","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","medicalConditionProviders","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,cR,1,2,"ng-template",null,1,e.W1O),e.YNc(3,uR,1,3,"ng-template",null,2,e.W1O),e.YNc(5,mR,1,2,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[he,td,id],encapsulation:2}),s})(),hR=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[Go],imports:[P.ez,U.F,E.UX,J.o,ae.u,$.P,j.t,me,k.h,se.G,G.X0.forChild({types:[{name:"medical-condition-provider-select",component:lR,wrappers:["form-field"]},{name:"medical-condition-provider-grid",component:pR}]})]}),s})(),fR=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[hR]}),s})();var Ro=M(6506);function _R(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.close.emit())})("formIsReady",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.medicalRecord)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let sd=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"medicalRecord_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.medicalRecord=i.item})):t.formName&&t.formName.currentValue&&"medicalRecord_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadMedicalRecordEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.medicalRecord=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Ro.t),e.Y36(O.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-medical-record-form"]],inputs:{medicalRecord:"medicalRecord",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,_R,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[P.O5,te.M,P.Ov],encapsulation:2}),s})(),od=(()=>{class s{constructor(){this.autoHeight=!1,this.medicalRecords=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[{field:"clinicalProvider.name",headerName:"Clinical Provider",filter:"agTextColumnFilter"},{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{field:"clinicalProviderId",filter:"agTextColumnFilter",hide:!0}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var a;t.includes(null===(a=i.data)||void 0===a?void 0:a.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-medical-record-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(f.x,5),2&t){let a;e.iGM(a=e.CRH())&&(i.tableView=a.first)}},inputs:{autoHeight:"autoHeight",medicalRecords:"medicalRecords"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.medicalRecords)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[f.x],encapsulation:2}),s})();function gR(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-medical-record-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","medicalRecord_edit")("formControl",t.formControl)("medicalRecord",t.medicalRecord)}}const vR=function(){return{}};function CR(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-medical-record-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","medicalRecord_create")("formControl",t.formControl)("medicalRecord",e.DdM(3,vR))}}function SR(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-medical-record-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(d.ref.close())}),e.qZA()}2&s&&e.Q6J("medicalRecords",o.data.items)}let bR=(()=>{class s extends G.fS{constructor(t){super(),this.store=t,this.store.loadMedicalRecordsEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.medicalRecords$.pipe((0,h.w)(i=>(0,D.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Ro.t))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","medicalRecord","send","close"],[1,"w-full","h-full","bg-white",3,"medicalRecords","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,gR,2,3,"ng-template",null,1,e.W1O),e.YNc(3,CR,1,4,"ng-template",null,2,e.W1O),e.YNc(5,SR,1,1,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",d)("editTemplate",a)("createTemplate",l)("key",i.field.key)}},dependencies:[E.JJ,E.oH,H.$,sd,od],encapsulation:2}),s})();function TR(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-medical-record-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","medicalRecord_edit")("medicalRecord",t.value)}}const yR=function(){return{}};function wR(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-medical-record-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","medicalRecord_create")("medicalRecord",e.DdM(2,yR))}function xR(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-medical-record-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(null==d.ref?null:d.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("medicalRecords",t.items)}}let NR=(()=>{class s extends pe{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","medicalRecord","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","medicalRecords","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,TR,1,2,"ng-template",null,1,e.W1O),e.YNc(3,wR,1,3,"ng-template",null,2,e.W1O),e.YNc(5,xR,1,2,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[he,sd,od],encapsulation:2}),s})(),AR=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[Ro.t],imports:[P.ez,U.F,E.UX,J.o,ae.u,$.P,j.t,me,k.h,se.G,G.X0.forChild({types:[{name:"medical-record-select",component:bR,wrappers:["form-field"]},{name:"medical-record-grid",component:NR}]})]}),s})(),FR=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[AR]}),s})();class Ti extends W.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class PR extends Ti{constructor(o){super("ValidateMedicalRecordStatusExcelDataAction"),this.valid=!1,this.excelData=o}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name)}),this.validationContext.addRule(new g.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof g.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(a=>a.name),newNames:[i.newName]}):i instanceof g.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,D.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class IR extends g.wS{constructor(o,t,i,a,l){super(o,t,i,a,l,!0)}}class DR extends g.ul{constructor(o,t,i,a=!1){super(o,t,a),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new g.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new IR("name","The medicalrecordstatus name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class MR extends Ti{constructor(o){super("CreateMedicalRecordStatusAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new DR("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateMedicalRecordStatus({input:this.input}).pipe((0,h.w)(o=>(0,ue.of)(o.data.created)))}}class WR extends Ti{constructor(o){super("UpdateMedicalRecordStatusesAction"),this.medicalRecordStatuses=o}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.medicalRecordStatuses,!0))}performAction(){this.response=this.businessProvider.data.userUpdateMedicalRecordStatuses({input:{medicalRecordStatuses:this.medicalRecordStatuses}}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}class ER extends Ti{constructor(o,t){super("UpdateMedicalRecordStatusAction"),this.medicalRecordStatus=o,this.medicalRecordStatusId=t}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.medicalRecordStatus,!0)).addRule(new g.xF("Id","Id should be a CUID and not null",this.medicalRecordStatusId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateMedicalRecordStatus({medicalRecordStatusId:this.medicalRecordStatusId,input:this.medicalRecordStatus}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}let ad=(()=>{class s extends W.nH{constructor(t,i,a){super("NotificationService.MedicalRecordStatusBusinessProviderService",t,a),this.data=i}createMedicalRecordStatus(t){const i=new MR(t);return i.Do(this),i.response}updateMedicalRecordStatus(t,i){const a=new ER(t,i);return a.Do(this),a.response}importMedicalRecordStatuses(t){const i=new WR(t);return i.Do(this),i.response}validateMedicalRecordStatusExcelData(t){const i=new PR(t);return i.Do(this),i.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(K.ed),e.LFG(z.q),e.LFG(W.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),OR=(()=>{class s extends W.nH{constructor(t,i,a){super("MedicalRecordStatusService",a,t),this.businessProvider=i}createMedicalRecordStatus(t){return this.businessProvider.createMedicalRecordStatus(t)}updateMedicalRecordStatus(t,i){return this.businessProvider.updateMedicalRecordStatus(t,i)}importMedicalRecordStatuses(t){return this.businessProvider.importMedicalRecordStatuses(t)}validateMedicalRecordStatusExcelData(t){return this.businessProvider.validateMedicalRecordStatusExcelData(t)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(ad,8),e.LFG(ad),e.LFG(K.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),yi=(()=>{class s extends b.m1{constructor(t,i,a,l,d,ee){super({loading:!1,medicalRecordStatuses:[],done:!1,searchQuery:"",formName:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=a,this.toast=l,this.formService=d,this.medicalRecordStatusService=ee,this.errors$=this.select(c=>c.errors),this.loading$=this.select(c=>c.loading),this.done$=this.select(c=>c.done),this.item$=this.select(c=>c.item),this.medicalRecordStatuses$=this.select(c=>c.medicalRecordStatuses),this.paging$=this.select(c=>c.paging),this.searchQuery$=this.select(c=>c.searchQuery),this.formName$=this.select(c=>c.formName),this.actionResult$=this.select(this.item$,this.done$,(c,u)=>({item:c,done:u}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.medicalRecordStatuses$,(c,u,n,r,m)=>({errors:c,loading:u,item:n,formName:r,medicalRecordStatuses:m}),{debounce:!0}),this.input$=this.select(this.paging$,this.searchQuery$,(c,u)=>({limit:c.limit,skip:c.skip,name:u,total:c.total})),this.setFormName=this.updater((c,u)=>Object.assign(Object.assign({},c),{formName:u})),this.setItem=this.updater((c,u)=>Object.assign(Object.assign({},c),{item:u})),this.addNewMedicalRecordStatus=this.updater((c,u)=>Object.assign(Object.assign({},c),{medicalRecordStatuses:[...c.medicalRecordStatuses,u]})),this.updateMedicalRecordStatus=this.updater((c,u)=>Object.assign(Object.assign({},c),{medicalRecordStatuses:c.medicalRecordStatuses.map(n=>n.id===u.id?u:n)})),this.addMedicalRecordStatuses=this.updater((c,u)=>Object.assign(Object.assign({},c),{medicalRecordStatuses:c.medicalRecordStatuses.concat(u)})),this.updateMedicalRecordStatuses=this.updater((c,u)=>Object.assign(Object.assign({},c),{medicalRecordStatuses:c.medicalRecordStatuses.map(n=>u.find(m=>m.id===n.id)||n)})),this.setSearchQuery=this.updater((c,u)=>Object.assign(Object.assign({},c),{searchQuery:u})),this.loadMedicalRecordStatusEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.data.userMedicalRecordStatus({medicalRecordStatusId:u}).pipe((0,b._b)(n=>{this.patchState({item:n.data.item,errors:n.errors,loading:!1})},n=>this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})))))),this.loadMedicalRecordStatusesEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.input$),(0,h.w)(([u,n])=>this.data.userMedicalRecordStatuses({input:n}).pipe((0,b._b)(r=>this.patchState({paging:{limit:n.limit,skip:n.skip,total:r.data.count.total},medicalRecordStatuses:r.data.items,errors:r.errors,loading:!1}),r=>this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})))))),this.createMedicalRecordStatusEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.medicalRecordStatusService.createMedicalRecordStatus(Object.assign({},u)).pipe((0,b._b)(n=>{this.addNewMedicalRecordStatus(n),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:n,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},n=>{n.graphQLErrors?(this.toast.error(n.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})):(this.toast.error(n.Message),this.formService.setErrors(n.Data))}))))),this.updateMedicalRecordStatusEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([u,n])=>this.medicalRecordStatusService.updateMedicalRecordStatus(u,u.id).pipe((0,b._b)(r=>{this.updateMedicalRecordStatus(r),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:r,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},r=>{r.graphQLErrors?(this.toast.error(r.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})):(this.toast.error(r.Message),this.formService.setErrors(r.Data))}))))),this.deleteMedicalRecordStatusEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([u,n])=>this.data.userDeleteMedicalRecordStatus({medicalRecordStatusId:n.id}).pipe((0,b._b)(r=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:r.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},r=>{r.graphQLErrors?(this.toast.error(r.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})):(this.toast.error(r.Message),this.formService.setErrors(r.Data))}))))),this.importExcelEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.medicalRecordStatusService.importMedicalRecordStatuses(u).pipe((0,de.K)(n=>{var r;return this.toast.error(null!==(r=n.Message)&&void 0!==r?r:"Failed to save",{duration:3e3}),q.E}),(0,y.b)(n=>{const r=JSON.parse(n.created),m=JSON.parse(n.updated),p=JSON.parse(n.failed),v=r.length+m.length+p.length;this.addMedicalRecordStatuses(r),this.updateMedicalRecordStatuses(m),this.toast.success(`${r.length} created, ${m.length} updated, ${p.length} failed of total ${v}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("medicalRecordStatusId")?(this.route.snapshot.paramMap.get("medicalRecordStatusId"),this.setFormName("medicalRecordStatus_edit")):this.setFormName("medicalRecordStatus_create")}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.medicalRecordStatusService.validateMedicalRecordStatusExcelData(t)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(z.q),e.LFG(O.F0),e.LFG(O.gz),e.LFG(X.F),e.LFG(Z.o),e.LFG(OR))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function LR(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.close.emit())})("formIsReady",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.medicalRecordStatus)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let rd=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"medicalRecordStatus_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.medicalRecordStatus=i.item})):t.formName&&t.formName.currentValue&&"medicalRecordStatus_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadMedicalRecordStatusEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.medicalRecordStatus=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(yi),e.Y36(O.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-medical-record-status-form"]],inputs:{medicalRecordStatus:"medicalRecordStatus",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,LR,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[P.O5,te.M,P.Ov],encapsulation:2}),s})(),nd=(()=>{class s{constructor(){this.autoHeight=!1,this.medicalRecordStatuses=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[,{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var a;t.includes(null===(a=i.data)||void 0===a?void 0:a.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-medical-record-status-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(f.x,5),2&t){let a;e.iGM(a=e.CRH())&&(i.tableView=a.first)}},inputs:{autoHeight:"autoHeight",medicalRecordStatuses:"medicalRecordStatuses"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","data","showSidebar","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("data",i.medicalRecordStatuses)("showSidebar",!1)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[f.x],encapsulation:2}),s})();function $R(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-medical-record-status-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","medicalRecordStatus_edit")("formControl",t.formControl)("medicalRecordStatus",t.medicalRecordStatus)}}const GR=function(){return{}};function RR(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-medical-record-status-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","medicalRecordStatus_create")("formControl",t.formControl)("medicalRecordStatus",e.DdM(3,GR))}}function QR(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-medical-record-status-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(d.ref.close())}),e.qZA()}2&s&&e.Q6J("medicalRecordStatuses",o.data.items)}let VR=(()=>{class s extends G.fS{constructor(t){super(),this.store=t,this.store.loadMedicalRecordStatusesEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.medicalRecordStatuses$.pipe((0,h.w)(i=>(0,D.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(yi))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e._Bn([yi]),e.qOj],decls:7,vars:5,consts:[[3,"to","control","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","medicalRecordStatus","send","close"],[1,"w-full","h-full","bg-white",3,"medicalRecordStatuses","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"ui-select-form",0),e.YNc(1,$R,2,3,"ng-template",null,1,e.W1O),e.YNc(3,RR,1,4,"ng-template",null,2,e.W1O),e.YNc(5,QR,1,1,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[E.JJ,E.oH,H.$,rd,nd],encapsulation:2}),s})();function jR(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-medical-record-status-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","medicalRecordStatus_edit")("medicalRecordStatus",t.value)}}const UR=function(){return{}};function JR(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-medical-record-status-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","medicalRecordStatus_create")("medicalRecordStatus",e.DdM(2,UR))}function zR(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-medical-record-status-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(null==d.ref?null:d.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("medicalRecordStatuses",t.items)}}let HR=(()=>{class s extends pe{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:6,consts:[[3,"data","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","medicalRecordStatus","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","medicalRecordStatuses","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,jR,1,2,"ng-template",null,1,e.W1O),e.YNc(3,JR,1,3,"ng-template",null,2,e.W1O),e.YNc(5,zR,1,2,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("data",i.data)("title",i.to.title)("onSave",i.onSave)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[he,rd,nd],encapsulation:2}),s})(),qR=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[yi],imports:[P.ez,U.F,E.UX,J.o,ae.u,$.P,j.t,me,k.h,se.G,G.X0.forChild({types:[{name:"medical-record-status-select",component:VR,wrappers:["form-field"]},{name:"medical-record-status-grid",component:HR}]})]}),s})(),KR=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[qR]}),s})();class wi extends W.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class ZR extends wi{constructor(o){super("ValidateMedLevelExcelDataAction"),this.valid=!1,this.excelData=o}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name)}),this.validationContext.addRule(new g.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof g.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(a=>a.name),newNames:[i.newName]}):i instanceof g.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,D.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class BR extends g.wS{constructor(o,t,i,a,l){super(o,t,i,a,l,!0)}}class kR extends g.ul{constructor(o,t,i,a=!1){super(o,t,a),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new g.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new BR("name","The medlevel name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class YR extends wi{constructor(o){super("CreateMedLevelAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new kR("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateMedLevel({input:this.input}).pipe((0,h.w)(o=>(0,ue.of)(o.data.created)))}}class XR extends wi{constructor(o){super("UpdateMedLevelsAction"),this.medLevels=o}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.medLevels,!0))}performAction(){this.response=this.businessProvider.data.userUpdateMedLevels({input:{medLevels:this.medLevels}}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}class e2 extends wi{constructor(o,t){super("UpdateMedLevelAction"),this.medLevel=o,this.medLevelId=t}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.medLevel,!0)).addRule(new g.xF("Id","Id should be a CUID and not null",this.medLevelId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateMedLevel({medLevelId:this.medLevelId,input:this.medLevel}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}let ld=(()=>{class s extends W.nH{constructor(t,i,a){super("NotificationService.MedLevelBusinessProviderService",t,a),this.data=i}createMedLevel(t){const i=new YR(t);return i.Do(this),i.response}updateMedLevel(t,i){const a=new e2(t,i);return a.Do(this),a.response}importMedLevels(t){const i=new XR(t);return i.Do(this),i.response}validateMedLevelExcelData(t){const i=new ZR(t);return i.Do(this),i.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(K.ed),e.LFG(z.q),e.LFG(W.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),t2=(()=>{class s extends W.nH{constructor(t,i,a){super("MedLevelService",a,t),this.businessProvider=i}createMedLevel(t){const i=Object.fromEntries(Object.entries(t).filter(([a,l])=>null!==l));return this.businessProvider.createMedLevel(i)}updateMedLevel(t,i){return this.businessProvider.updateMedLevel(t,i)}importMedLevels(t){return this.businessProvider.importMedLevels(t)}validateMedLevelExcelData(t){return this.businessProvider.validateMedLevelExcelData(t)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(ld,8),e.LFG(ld),e.LFG(K.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),Qo=(()=>{class s extends b.m1{constructor(t,i,a,l,d,ee){super({loading:!1,medLevels:[],done:!1,searchQuery:"",formName:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=a,this.toast=l,this.formService=d,this.medLevelService=ee,this.errors$=this.select(c=>c.errors),this.loading$=this.select(c=>c.loading),this.done$=this.select(c=>c.done),this.item$=this.select(c=>c.item),this.medLevels$=this.select(c=>c.medLevels),this.paging$=this.select(c=>c.paging),this.searchQuery$=this.select(c=>c.searchQuery),this.formName$=this.select(c=>c.formName),this.actionResult$=this.select(this.item$,this.done$,(c,u)=>({item:c,done:u}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.medLevels$,(c,u,n,r,m)=>({errors:c,loading:u,item:n,formName:r,medLevels:m}),{debounce:!0}),this.input$=this.select(this.paging$,this.searchQuery$,(c,u)=>({limit:c.limit,skip:c.skip,name:u,total:c.total})),this.setFormName=this.updater((c,u)=>Object.assign(Object.assign({},c),{formName:u})),this.setItem=this.updater((c,u)=>Object.assign(Object.assign({},c),{item:u})),this.addNewMedLevel=this.updater((c,u)=>Object.assign(Object.assign({},c),{medLevels:[...c.medLevels,u]})),this.updateMedLevel=this.updater((c,u)=>Object.assign(Object.assign({},c),{medLevels:c.medLevels.map(n=>n.id===u.id?u:n)})),this.addMedLevels=this.updater((c,u)=>Object.assign(Object.assign({},c),{medLevels:c.medLevels.concat(u)})),this.updateMedLevels=this.updater((c,u)=>Object.assign(Object.assign({},c),{medLevels:c.medLevels.map(n=>u.find(m=>m.id===n.id)||n)})),this.setSearchQuery=this.updater((c,u)=>Object.assign(Object.assign({},c),{searchQuery:u})),this.loadMedLevelEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.data.userMedLevel({medLevelId:u}).pipe((0,b._b)(n=>{this.patchState({item:n.data.item,errors:n.errors,loading:!1})},n=>this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})))))),this.loadMedLevelsEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.input$),(0,h.w)(([u,n])=>this.data.userMedLevels({input:n}).pipe((0,b._b)(r=>this.patchState({paging:{limit:n.limit,skip:n.skip,total:r.data.count.total},medLevels:r.data.items,errors:r.errors,loading:!1}),r=>this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})))))),this.createMedLevelEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.medLevelService.createMedLevel(Object.assign({},u)).pipe((0,b._b)(n=>{this.addNewMedLevel(n),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:n,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},n=>{n.graphQLErrors?(this.toast.error(n.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})):(this.toast.error(n.Message),this.formService.setErrors(n.Data))}))))),this.updateMedLevelEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([u,n])=>this.medLevelService.updateMedLevel(u,u.id).pipe((0,b._b)(r=>{this.updateMedLevel(r),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:r,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},r=>{r.graphQLErrors?(this.toast.error(r.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})):(this.toast.error(r.Message),this.formService.setErrors(r.Data))}))))),this.deleteMedLevelEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([u,n])=>this.data.userDeleteMedLevel({medLevelId:n.id}).pipe((0,b._b)(r=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:r.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},r=>{r.graphQLErrors?(this.toast.error(r.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})):(this.toast.error(r.Message),this.formService.setErrors(r.Data))}))))),this.importExcelEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.medLevelService.importMedLevels(u).pipe((0,de.K)(n=>{var r;return this.toast.error(null!==(r=n.Message)&&void 0!==r?r:"Failed to save",{duration:3e3}),q.E}),(0,y.b)(n=>{const r=JSON.parse(n.created),m=JSON.parse(n.updated),p=JSON.parse(n.failed),v=r.length+m.length+p.length;this.addMedLevels(r),this.updateMedLevels(m),this.toast.success(`${r.length} created, ${m.length} updated, ${p.length} failed of total ${v}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("medLevelId")?(this.route.snapshot.paramMap.get("medLevelId"),this.setFormName("medLevel_edit")):this.setFormName("medLevel_create")}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.medLevelService.validateMedLevelExcelData(t)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(z.q),e.LFG(O.F0),e.LFG(O.gz),e.LFG(X.F),e.LFG(Z.o),e.LFG(t2))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function i2(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.close.emit())})("formIsReady",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.medLevel)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let cd=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"medLevel_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.medLevel=i.item})):t.formName&&t.formName.currentValue&&"medLevel_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadMedLevelEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.medLevel=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Qo),e.Y36(O.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-med-level-form"]],inputs:{medLevel:"medLevel",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,i2,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[P.O5,te.M,P.Ov],encapsulation:2}),s})(),dd=(()=>{class s{constructor(){this.autoHeight=!1,this.medLevels=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[,{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{headerName:"Approved Site Costs",field:"approvedSiteCosts",valueFormatter:t=>{var i;return(0,_.oBD)(null===(i=t.data)||void 0===i?void 0:i.approvedSiteCosts,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{headerName:"Maximum Medical Bills to Date",field:"maximumMedicalBillsToDate",valueFormatter:t=>{var i;return(0,_.oBD)(null===(i=t.data)||void 0===i?void 0:i.maximumMedicalBillsToDate,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var a;t.includes(null===(a=i.data)||void 0===a?void 0:a.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-med-level-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(f.x,5),2&t){let a;e.iGM(a=e.CRH())&&(i.tableView=a.first)}},inputs:{autoHeight:"autoHeight",medLevels:"medLevels"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.medLevels)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[f.x],encapsulation:2}),s})();function s2(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-med-level-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","medLevel_edit")("formControl",t.formControl)("medLevel",t.medLevel)}}const o2=function(){return{}};function a2(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-med-level-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","medLevel_create")("formControl",t.formControl)("medLevel",e.DdM(3,o2))}}function r2(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-med-level-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(d.ref.close())}),e.qZA()}2&s&&e.Q6J("medLevels",o.data.items)}let n2=(()=>{class s extends G.fS{constructor(t){super(),this.store=t,this.store.loadMedLevelsEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.medLevels$.pipe((0,h.w)(i=>(0,D.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Qo))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","medLevel","send","close"],[1,"w-full","h-full","bg-white",3,"medLevels","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,s2,2,3,"ng-template",null,1,e.W1O),e.YNc(3,a2,1,4,"ng-template",null,2,e.W1O),e.YNc(5,r2,1,1,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",d)("editTemplate",a)("createTemplate",l)("key",i.field.key)}},dependencies:[E.JJ,E.oH,H.$,cd,dd],encapsulation:2}),s})();function l2(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-med-level-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","medLevel_edit")("medLevel",t.value)}}const c2=function(){return{}};function d2(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-med-level-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","medLevel_create")("medLevel",e.DdM(2,c2))}function u2(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-med-level-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(null==d.ref?null:d.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("medLevels",t.items)}}let m2=(()=>{class s extends pe{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","medLevel","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","medLevels","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,l2,1,2,"ng-template",null,1,e.W1O),e.YNc(3,d2,1,3,"ng-template",null,2,e.W1O),e.YNc(5,u2,1,2,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[he,cd,dd],encapsulation:2}),s})(),p2=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[Qo],imports:[P.ez,U.F,E.UX,J.o,ae.u,$.P,j.t,me,k.h,se.G,G.X0.forChild({types:[{name:"med-level-select",component:n2,wrappers:["form-field"]},{name:"med-level-grid",component:m2}]})]}),s})(),h2=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[p2]}),s})();class xi extends W.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class f2 extends xi{constructor(o){super("ValidateOrganizationExcelDataAction"),this.valid=!1,this.excelData=o}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name)}),this.validationContext.addRule(new g.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof g.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(a=>a.name),newNames:[i.newName]}):i instanceof g.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,D.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class _2 extends g.wS{constructor(o,t,i,a,l){super(o,t,i,a,l,!0)}}class g2 extends g.ul{constructor(o,t,i,a=!1){super(o,t,a),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new g.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new _2("name","The organization name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class v2 extends xi{constructor(o){super("CreateOrganizationAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new g2("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateOrganization({input:this.input}).pipe((0,h.w)(o=>(0,ue.of)(o.data.created)))}}class C2 extends xi{constructor(o){super("UpdateOrganizationsAction"),this.organizations=o}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.organizations,!0))}performAction(){this.response=this.businessProvider.data.userUpdateOrganizations({input:{organizations:this.organizations}}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}class S2 extends xi{constructor(o,t){super("UpdateOrganizationAction"),this.organization=o,this.organizationId=t}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.organization,!0)).addRule(new g.xF("Id","Id should be a CUID and not null",this.organizationId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateOrganization({organizationId:this.organizationId,input:this.organization}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}let ud=(()=>{class s extends W.nH{constructor(t,i,a){super("NotificationService.OrganizationBusinessProviderService",t,a),this.data=i}createOrganization(t){const i=new v2(t);return i.Do(this),i.response}updateOrganization(t,i){const a=new S2(t,i);return a.Do(this),a.response}importOrganizations(t){const i=new C2(t);return i.Do(this),i.response}validateOrganizationExcelData(t){const i=new f2(t);return i.Do(this),i.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(K.ed),e.LFG(z.q),e.LFG(W.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),b2=(()=>{class s extends W.nH{constructor(t,i,a){super("OrganizationService",a,t),this.businessProvider=i}createOrganization(t){const i=Object.fromEntries(Object.entries(t).filter(([a,l])=>null!==l));return this.businessProvider.createOrganization(i)}updateOrganization(t,i){return this.businessProvider.updateOrganization(t,i)}importOrganizations(t){return this.businessProvider.importOrganizations(t)}validateOrganizationExcelData(t){return this.businessProvider.validateOrganizationExcelData(t)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(ud,8),e.LFG(ud),e.LFG(K.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),Vo=(()=>{class s extends b.m1{constructor(t,i,a,l,d,ee){super({loading:!1,organizations:[],done:!1,searchQuery:"",formName:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=a,this.toast=l,this.formService=d,this.organizationService=ee,this.errors$=this.select(c=>c.errors),this.loading$=this.select(c=>c.loading),this.done$=this.select(c=>c.done),this.item$=this.select(c=>c.item),this.organizations$=this.select(c=>c.organizations),this.paging$=this.select(c=>c.paging),this.searchQuery$=this.select(c=>c.searchQuery),this.formName$=this.select(c=>c.formName),this.actionResult$=this.select(this.item$,this.done$,(c,u)=>({item:c,done:u}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.organizations$,(c,u,n,r,m)=>({errors:c,loading:u,item:n,formName:r,organizations:m}),{debounce:!0}),this.input$=this.select(this.paging$,this.searchQuery$,(c,u)=>({limit:c.limit,skip:c.skip,name:u,total:c.total})),this.setFormName=this.updater((c,u)=>Object.assign(Object.assign({},c),{formName:u})),this.setItem=this.updater((c,u)=>Object.assign(Object.assign({},c),{item:u})),this.addNewOrganization=this.updater((c,u)=>Object.assign(Object.assign({},c),{organizations:[...c.organizations,u]})),this.updateOrganization=this.updater((c,u)=>Object.assign(Object.assign({},c),{organizations:c.organizations.map(n=>n.id===u.id?u:n)})),this.addOrganizations=this.updater((c,u)=>Object.assign(Object.assign({},c),{organizations:c.organizations.concat(u)})),this.updateOrganizations=this.updater((c,u)=>Object.assign(Object.assign({},c),{organizations:c.organizations.map(n=>u.find(m=>m.id===n.id)||n)})),this.setSearchQuery=this.updater((c,u)=>Object.assign(Object.assign({},c),{searchQuery:u})),this.loadOrganizationEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.data.userOrganization({organizationId:u}).pipe((0,b._b)(n=>{this.patchState({item:n.data.item,errors:n.errors,loading:!1})},n=>this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})))))),this.loadOrganizationsEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.input$),(0,h.w)(([u,n])=>this.data.userOrganizations({input:n}).pipe((0,b._b)(r=>this.patchState({paging:{limit:n.limit,skip:n.skip,total:r.data.count.total},organizations:r.data.items,errors:r.errors,loading:!1}),r=>this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})))))),this.createOrganizationEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.organizationService.createOrganization(Object.assign({},u)).pipe((0,b._b)(n=>{this.addNewOrganization(n),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:n,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},n=>{n.graphQLErrors?(this.toast.error(n.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})):(this.toast.error(n.Message),this.formService.setErrors(n.Data))}))))),this.updateOrganizationEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([u,n])=>this.organizationService.updateOrganization(u,u.id).pipe((0,b._b)(r=>{this.updateOrganization(r),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:r,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},r=>{r.graphQLErrors?(this.toast.error(r.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})):(this.toast.error(r.Message),this.formService.setErrors(r.Data))}))))),this.deleteOrganizationEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([u,n])=>this.data.userDeleteOrganization({organizationId:n.id}).pipe((0,b._b)(r=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:r.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},r=>{r.graphQLErrors?(this.toast.error(r.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})):(this.toast.error(r.Message),this.formService.setErrors(r.Data))}))))),this.importExcelEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.organizationService.importOrganizations(u).pipe((0,de.K)(n=>{var r;return this.toast.error(null!==(r=n.Message)&&void 0!==r?r:"Failed to save",{duration:3e3}),q.E}),(0,y.b)(n=>{const r=JSON.parse(n.created),m=JSON.parse(n.updated),p=JSON.parse(n.failed),v=r.length+m.length+p.length;this.addOrganizations(r),this.updateOrganizations(m),this.toast.success(`${r.length} created, ${m.length} updated, ${p.length} failed of total ${v}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("organizationId")?(this.route.snapshot.paramMap.get("organizationId"),this.setFormName("organization_edit")):this.setFormName("organization_create")}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.organizationService.validateOrganizationExcelData(t)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(z.q),e.LFG(O.F0),e.LFG(O.gz),e.LFG(X.F),e.LFG(Z.o),e.LFG(b2))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function T2(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.close.emit())})("formIsReady",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.organization)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let md=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"organization_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.organization=i.item})):t.formName&&t.formName.currentValue&&"organization_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadOrganizationEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.organization=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Vo),e.Y36(O.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-organization-form"]],inputs:{organization:"organization",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,T2,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[P.O5,te.M,P.Ov],encapsulation:2}),s})(),pd=(()=>{class s{constructor(){this.autoHeight=!1,this.organizations=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[,{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var a;t.includes(null===(a=i.data)||void 0===a?void 0:a.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-organization-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(f.x,5),2&t){let a;e.iGM(a=e.CRH())&&(i.tableView=a.first)}},inputs:{autoHeight:"autoHeight",organizations:"organizations"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.organizations)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[f.x],encapsulation:2}),s})();function y2(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-organization-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","organization_edit")("formControl",t.formControl)("organization",t.organization)}}const w2=function(){return{}};function x2(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-organization-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","organization_create")("formControl",t.formControl)("organization",e.DdM(3,w2))}}function N2(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-organization-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(d.ref.close())}),e.qZA()}2&s&&e.Q6J("organizations",o.data.items)}let A2=(()=>{class s extends G.fS{constructor(t){super(),this.store=t,this.store.loadOrganizationsEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.organizations$.pipe((0,h.w)(i=>(0,D.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Vo))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","organization","send","close"],[1,"w-full","h-full","bg-white",3,"organizations","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,y2,2,3,"ng-template",null,1,e.W1O),e.YNc(3,x2,1,4,"ng-template",null,2,e.W1O),e.YNc(5,N2,1,1,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",d)("editTemplate",a)("createTemplate",l)("key",i.field.key)}},dependencies:[E.JJ,E.oH,H.$,md,pd],encapsulation:2}),s})();function F2(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-organization-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","organization_edit")("organization",t.value)}}const P2=function(){return{}};function I2(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-organization-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","organization_create")("organization",e.DdM(2,P2))}function D2(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-organization-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(null==d.ref?null:d.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("organizations",t.items)}}let M2=(()=>{class s extends pe{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","organization","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","organizations","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,F2,1,2,"ng-template",null,1,e.W1O),e.YNc(3,I2,1,3,"ng-template",null,2,e.W1O),e.YNc(5,D2,1,2,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[he,md,pd],encapsulation:2}),s})(),W2=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[Vo],imports:[P.ez,U.F,E.UX,J.o,ae.u,$.P,j.t,me,k.h,se.G,G.X0.forChild({types:[{name:"organization-select",component:A2,wrappers:["form-field"]},{name:"organization-grid",component:M2}]})]}),s})(),E2=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[W2]}),s})();var jo=M(51194);function O2(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.close.emit())})("formIsReady",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.patient)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let hd=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"patient_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.patient=i.item})):t.formName&&t.formName.currentValue&&"patient_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadPatientEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.patient=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(jo.d),e.Y36(O.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-patient-form"]],inputs:{patient:"patient",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,O2,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[P.O5,te.M,P.Ov],encapsulation:2}),s})(),fd=(()=>{class s{constructor(){this.autoHeight=!1,this.patients=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[{field:"ethnicity.name",headerName:"Ethnicity",filter:"agTextColumnFilter"},{field:"gender.name",headerName:"Gender",filter:"agTextColumnFilter"},{field:"language.name",headerName:"Language",filter:"agTextColumnFilter"},{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{field:"firstName",filter:"agTextColumnFilter"},{field:"middleName",filter:"agTextColumnFilter"},{field:"lastName",filter:"agTextColumnFilter"},{field:"suffix",filter:"agTextColumnFilter"},{field:"genderId",filter:"agTextColumnFilter",hide:!0},{field:"nickname",filter:"agTextColumnFilter"},{field:"height",filter:"agTextColumnFilter"},{field:"weight",filter:"agTextColumnFilter"},{field:"dateOfBirth",filter:"agDateColumnFilter"},{field:"primaryPhoneNumber",filter:"agTextColumnFilter"},{headerName:"Is Primary Phone Mobile",field:"isPrimaryPhoneMobile",filter:"agSetColumnFilter",cellRenderer:"checkboxRenderer"},{field:"secondaryPhoneNumber",filter:"agTextColumnFilter"},{headerName:"Is Secondary Phone Mobile",field:"isSecondaryPhoneMobile",filter:"agSetColumnFilter",cellRenderer:"checkboxRenderer"},{field:"memberRegistrationNumber",filter:"agTextColumnFilter"},{field:"ethnicityId",filter:"agTextColumnFilter",hide:!0},{field:"languageId",filter:"agTextColumnFilter",hide:!0},{headerName:"Requires Translator",field:"requiresTranslator",filter:"agSetColumnFilter",cellRenderer:"checkboxRenderer"},{field:"socialSecurityNumber",filter:"agTextColumnFilter"},{field:"honorific",filter:"agTextColumnFilter"},{field:"primaryEmailAddress",filter:"agTextColumnFilter"},{field:"primaryAddressLine1",filter:"agTextColumnFilter"},{field:"primaryAddressLine2",filter:"agTextColumnFilter"},{field:"primaryAddressCity",filter:"agTextColumnFilter"},{field:"primaryAddressStateOrProvince",filter:"agTextColumnFilter"},{field:"primaryAddressPostalCode",filter:"agTextColumnFilter"},{field:"notes",filter:"agTextColumnFilter"},{headerName:"Latitude",field:"latitude",valueFormatter:t=>{var i;return(0,_.oBD)(null===(i=t.data)||void 0===i?void 0:i.latitude,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{headerName:"Longitude",field:"longitude",valueFormatter:t=>{var i;return(0,_.oBD)(null===(i=t.data)||void 0===i?void 0:i.longitude,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{field:"emergencyContactId",filter:"agTextColumnFilter",hide:!0},{field:"homePhoneNumber",filter:"agTextColumnFilter"},{field:"mobileNumber",filter:"agTextColumnFilter"},{field:"bmi",filter:"agTextColumnFilter"},{field:"occupation",filter:"agTextColumnFilter"},{field:"debtorRemarks",filter:"agTextColumnFilter"},{field:"workAddressLine1",filter:"agTextColumnFilter"},{field:"workAddressLine2",filter:"agTextColumnFilter"},{field:"workAddressCity",filter:"agTextColumnFilter"},{field:"workAddressStateOrProvince",filter:"agTextColumnFilter"},{field:"workAddressPostalCode",filter:"agTextColumnFilter"},{headerName:"Work Latitude",field:"workLatitude",valueFormatter:t=>{var i;return(0,_.oBD)(null===(i=t.data)||void 0===i?void 0:i.latitude,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{headerName:"Work Longitude",field:"workLongitude",valueFormatter:t=>{var i;return(0,_.oBD)(null===(i=t.data)||void 0===i?void 0:i.longitude,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var a;t.includes(null===(a=i.data)||void 0===a?void 0:a.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-patient-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(f.x,5),2&t){let a;e.iGM(a=e.CRH())&&(i.tableView=a.first)}},inputs:{autoHeight:"autoHeight",patients:"patients"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.patients)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[f.x],encapsulation:2}),s})();function L2(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-patient-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","patient_edit")("formControl",t.formControl)("patient",t.patient)}}const $2=function(){return{}};function G2(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-patient-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","patient_create")("formControl",t.formControl)("patient",e.DdM(3,$2))}}function R2(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-patient-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(d.ref.close())}),e.qZA()}2&s&&e.Q6J("patients",o.data.items)}let Q2=(()=>{class s extends G.fS{constructor(t){super(),this.store=t,this.store.loadPatientsEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.patients$.pipe((0,h.w)(i=>(0,D.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(jo.d))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","patient","send","close"],[1,"w-full","h-full","bg-white",3,"patients","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,L2,2,3,"ng-template",null,1,e.W1O),e.YNc(3,G2,1,4,"ng-template",null,2,e.W1O),e.YNc(5,R2,1,1,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",d)("editTemplate",a)("createTemplate",l)("key",i.field.key)}},dependencies:[E.JJ,E.oH,H.$,hd,fd],encapsulation:2}),s})();function V2(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-patient-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","patient_edit")("patient",t.value)}}const j2=function(){return{}};function U2(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-patient-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","patient_create")("patient",e.DdM(2,j2))}function J2(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-patient-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(null==d.ref?null:d.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("patients",t.items)}}let z2=(()=>{class s extends pe{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","patient","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","patients","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,V2,1,2,"ng-template",null,1,e.W1O),e.YNc(3,U2,1,3,"ng-template",null,2,e.W1O),e.YNc(5,J2,1,2,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[he,hd,fd],encapsulation:2}),s})(),H2=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[jo.d],imports:[P.ez,U.F,E.UX,J.o,ae.u,$.P,j.t,me,k.h,se.G,G.X0.forChild({types:[{name:"patient-select",component:Q2,wrappers:["form-field"]},{name:"patient-grid",component:z2}]})]}),s})(),q2=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[H2]}),s})();class Ni extends W.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class K2 extends Ni{constructor(o,t){super("ValidatePatientStudyExcelDataAction"),this.valid=!1,this.excelData=o,this.patients=t}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name),this.validationContext.addRule(new g.mi(`patientName_${i}_is_valid}`,"Patient Is Not Valid","patient.name",t.patient,this.patients,!0))}),this.validationContext.addRule(new g.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof g.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(a=>a.name),newNames:[i.newName]}):i instanceof g.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,D.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class Z2 extends g.wS{constructor(o,t,i,a,l){super(o,t,i,a,l,!0)}}class B2 extends g.ul{constructor(o,t,i,a=!1){super(o,t,a),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new g.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new Z2("name","The patientstudy name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class k2 extends Ni{constructor(o){super("CreatePatientStudyAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new B2("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreatePatientStudy({input:this.input}).pipe((0,h.w)(o=>(0,ue.of)(o.data.created)))}}class Y2 extends Ni{constructor(o){super("UpdatePatientStudiesAction"),this.patientStudies=o}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.patientStudies,!0))}performAction(){this.response=this.businessProvider.data.userUpdatePatientStudies({input:{patientStudies:this.patientStudies}}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}class X2 extends Ni{constructor(o,t){super("UpdatePatientStudyAction"),this.patientStudy=o,this.patientStudyId=t}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.patientStudy,!0)).addRule(new g.xF("Id","Id should be a CUID and not null",this.patientStudyId,!0))}performAction(){this.response=this.businessProvider.data.userUpdatePatientStudy({patientStudyId:this.patientStudyId,input:this.patientStudy}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}let _d=(()=>{class s extends W.nH{constructor(t,i,a){super("NotificationService.PatientStudyBusinessProviderService",t,a),this.data=i}createPatientStudy(t){const i=new k2(t);return i.Do(this),i.response}updatePatientStudy(t,i){const a=new X2(t,i);return a.Do(this),a.response}importPatientStudies(t){const i=new Y2(t);return i.Do(this),i.response}validatePatientStudyExcelData(t,i){const a=new K2(t,i);return a.Do(this),a.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(K.ed),e.LFG(z.q),e.LFG(W.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),eQ=(()=>{class s extends W.nH{constructor(t,i,a){super("PatientStudyService",a,t),this.businessProvider=i}createPatientStudy(t){const i=Object.fromEntries(Object.entries(t).filter(([a,l])=>null!==l));return this.businessProvider.createPatientStudy(i)}updatePatientStudy(t,i){return this.businessProvider.updatePatientStudy(t,i)}importPatientStudies(t){return this.businessProvider.importPatientStudies(t)}validatePatientStudyExcelData(t,i){return this.businessProvider.validatePatientStudyExcelData(t,i)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(_d,8),e.LFG(_d),e.LFG(K.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),Uo=(()=>{class s extends b.m1{constructor(t,i,a,l,d,ee){if(super({loading:!1,patientStudies:[],done:!1,searchQuery:"",formName:void 0,patientId:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=a,this.toast=l,this.formService=d,this.patientStudyService=ee,this.errors$=this.select(u=>u.errors),this.loading$=this.select(u=>u.loading),this.done$=this.select(u=>u.done),this.item$=this.select(u=>u.item),this.patientStudies$=this.select(u=>u.patientStudies),this.patients$=this.select(u=>u.patients||[]),this.patientId$=this.select(u=>u.patientId),this.paging$=this.select(u=>u.paging),this.searchQuery$=this.select(u=>u.searchQuery),this.formName$=this.select(u=>u.formName),this.actionResult$=this.select(this.item$,this.done$,(u,n)=>({item:u,done:n}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.patientStudies$,this.patients$,(u,n,r,m,p,v)=>({errors:u,loading:n,item:r,formName:m,patientStudies:p,patients:v}),{debounce:!0}),this.input$=this.select(this.paging$,this.patientId$,this.searchQuery$,(u,n,r)=>({limit:u.limit,skip:u.skip,name:r,patientId:n,total:u.total})),this.setFormName=this.updater((u,n)=>Object.assign(Object.assign({},u),{formName:n})),this.setPatientId=this.updater((u,n)=>Object.assign(Object.assign({},u),{patientId:n})),this.filterPatients=u=>this.data.userSelectPatients({input:{name:u}}).pipe((0,b._b)(n=>{let r=n.data.items;return this.patchState({patients:r}),r},n=>this.patchState({errors:n.graphQLErrors?n.graphQLErrors:n})),(0,fe.U)(n=>n.data.items)),this.addPatient=this.updater((u,n)=>Object.assign(Object.assign({},u),{patients:u.patients.concat(n)})),this.setItem=this.updater((u,n)=>Object.assign(Object.assign({},u),{item:n})),this.addNewPatientStudy=this.updater((u,n)=>Object.assign(Object.assign({},u),{patientStudies:[...u.patientStudies,n]})),this.updatePatientStudy=this.updater((u,n)=>Object.assign(Object.assign({},u),{patientStudies:u.patientStudies.map(r=>r.id===n.id?n:r)})),this.addPatientStudies=this.updater((u,n)=>Object.assign(Object.assign({},u),{patientStudies:u.patientStudies.concat(n)})),this.updatePatientStudies=this.updater((u,n)=>Object.assign(Object.assign({},u),{patientStudies:u.patientStudies.map(r=>n.find(p=>p.id===r.id)||r)})),this.setSearchQuery=this.updater((u,n)=>Object.assign(Object.assign({},u),{searchQuery:n})),this.loadPatientStudyEffect=this.effect(u=>u.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(n=>this.data.userPatientStudy({patientStudyId:n}).pipe((0,b._b)(r=>{this.patchState({item:r.data.item,errors:r.errors,loading:!1})},r=>this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})))))),this.loadPatientStudiesEffect=this.effect(u=>u.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.input$),(0,h.w)(([n,r])=>this.data.userPatientStudies({input:r}).pipe((0,b._b)(m=>this.patchState({paging:{limit:r.limit,skip:r.skip,total:m.data.count.total},patientStudies:m.data.items,errors:m.errors,loading:!1}),m=>this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})))))),this.createPatientStudyEffect=this.effect(u=>u.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(n=>this.patientStudyService.createPatientStudy(Object.assign({},n)).pipe((0,b._b)(r=>{this.addNewPatientStudy(r),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:r,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},r=>{r.graphQLErrors?(this.toast.error(r.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})):(this.toast.error(r.Message),this.formService.setErrors(r.Data))}))))),this.updatePatientStudyEffect=this.effect(u=>u.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([n,r])=>this.patientStudyService.updatePatientStudy(n,n.id).pipe((0,b._b)(m=>{this.updatePatientStudy(m),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:m,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},m=>{m.graphQLErrors?(this.toast.error(m.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})):(this.toast.error(m.Message),this.formService.setErrors(m.Data))}))))),this.deletePatientStudyEffect=this.effect(u=>u.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([n,r])=>this.data.userDeletePatientStudy({patientStudyId:r.id}).pipe((0,b._b)(m=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:m.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},m=>{m.graphQLErrors?(this.toast.error(m.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})):(this.toast.error(m.Message),this.formService.setErrors(m.Data))}))))),this.importExcelEffect=this.effect(u=>u.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(n=>this.patientStudyService.importPatientStudies(n).pipe((0,de.K)(r=>{var m;return this.toast.error(null!==(m=r.Message)&&void 0!==m?m:"Failed to save",{duration:3e3}),q.E}),(0,y.b)(r=>{const m=JSON.parse(r.created),p=JSON.parse(r.updated),v=JSON.parse(r.failed),I=m.length+p.length+v.length;this.addPatientStudies(m),this.updatePatientStudies(p),this.toast.success(`${m.length} created, ${p.length} updated, ${v.length} failed of total ${I}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("patientStudyId")?(this.route.snapshot.paramMap.get("patientStudyId"),this.setFormName("patientStudy_edit")):this.setFormName("patientStudy_create"),this.route.snapshot.paramMap.has("patientId")){var c=this.route.snapshot.paramMap.get("patientId");this.setPatientId(c)}}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.patientStudyService.validatePatientStudyExcelData(t,i.patients)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(z.q),e.LFG(O.F0),e.LFG(O.gz),e.LFG(X.F),e.LFG(Z.o),e.LFG(eQ))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function tQ(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.close.emit())})("formIsReady",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.patientStudy)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let gd=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"patientStudy_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.patientStudy=i.item})):t.formName&&t.formName.currentValue&&"patientStudy_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadPatientStudyEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.patientStudy=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Uo),e.Y36(O.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-patient-study-form"]],inputs:{patientStudy:"patientStudy",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,tQ,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[P.O5,te.M,P.Ov],encapsulation:2}),s})(),vd=(()=>{class s{constructor(){this.autoHeight=!1,this.patientStudies=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[{field:"patient.name",headerName:"Patient",filter:"agTextColumnFilter"},{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{field:"patientId",filter:"agTextColumnFilter",hide:!0}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var a;t.includes(null===(a=i.data)||void 0===a?void 0:a.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-patient-study-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(f.x,5),2&t){let a;e.iGM(a=e.CRH())&&(i.tableView=a.first)}},inputs:{autoHeight:"autoHeight",patientStudies:"patientStudies"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.patientStudies)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[f.x],encapsulation:2}),s})();function iQ(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-patient-study-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","patientStudy_edit")("formControl",t.formControl)("patientStudy",t.patientStudy)}}const sQ=function(){return{}};function oQ(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-patient-study-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","patientStudy_create")("formControl",t.formControl)("patientStudy",e.DdM(3,sQ))}}function aQ(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-patient-study-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(d.ref.close())}),e.qZA()}2&s&&e.Q6J("patientStudies",o.data.items)}let rQ=(()=>{class s extends G.fS{constructor(t){super(),this.store=t,this.store.loadPatientStudiesEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.patientStudies$.pipe((0,h.w)(i=>(0,D.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Uo))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","patientStudy","send","close"],[1,"w-full","h-full","bg-white",3,"patientStudies","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,iQ,2,3,"ng-template",null,1,e.W1O),e.YNc(3,oQ,1,4,"ng-template",null,2,e.W1O),e.YNc(5,aQ,1,1,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",d)("editTemplate",a)("createTemplate",l)("key",i.field.key)}},dependencies:[E.JJ,E.oH,H.$,gd,vd],encapsulation:2}),s})();function nQ(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-patient-study-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","patientStudy_edit")("patientStudy",t.value)}}const lQ=function(){return{}};function cQ(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-patient-study-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","patientStudy_create")("patientStudy",e.DdM(2,lQ))}function dQ(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-patient-study-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(null==d.ref?null:d.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("patientStudies",t.items)}}let uQ=(()=>{class s extends pe{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","patientStudy","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","patientStudies","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,nQ,1,2,"ng-template",null,1,e.W1O),e.YNc(3,cQ,1,3,"ng-template",null,2,e.W1O),e.YNc(5,dQ,1,2,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[he,gd,vd],encapsulation:2}),s})(),mQ=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[Uo],imports:[P.ez,U.F,E.UX,J.o,ae.u,$.P,j.t,me,k.h,se.G,G.X0.forChild({types:[{name:"patient-study-select",component:rQ,wrappers:["form-field"]},{name:"patient-study-grid",component:uQ}]})]}),s})(),pQ=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[mQ]}),s})();class Ai extends W.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class hQ extends Ai{constructor(o){super("ValidatePatientTreatmentStatusExcelDataAction"),this.valid=!1,this.excelData=o}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name)}),this.validationContext.addRule(new g.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof g.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(a=>a.name),newNames:[i.newName]}):i instanceof g.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,D.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class fQ extends g.wS{constructor(o,t,i,a,l){super(o,t,i,a,l,!0)}}class _Q extends g.ul{constructor(o,t,i,a=!1){super(o,t,a),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new g.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new fQ("name","The patienttreatmentstatus name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class gQ extends Ai{constructor(o){super("CreatePatientTreatmentStatusAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new _Q("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreatePatientTreatmentStatus({input:this.input}).pipe((0,h.w)(o=>(0,ue.of)(o.data.created)))}}class vQ extends Ai{constructor(o){super("UpdatePatientTreatmentStatusesAction"),this.patientTreatmentStatuses=o}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.patientTreatmentStatuses,!0))}performAction(){this.response=this.businessProvider.data.userUpdatePatientTreatmentStatuses({input:{patientTreatmentStatuses:this.patientTreatmentStatuses}}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}class CQ extends Ai{constructor(o,t){super("UpdatePatientTreatmentStatusAction"),this.patientTreatmentStatus=o,this.patientTreatmentStatusId=t}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.patientTreatmentStatus,!0)).addRule(new g.xF("Id","Id should be a CUID and not null",this.patientTreatmentStatusId,!0))}performAction(){this.response=this.businessProvider.data.userUpdatePatientTreatmentStatus({patientTreatmentStatusId:this.patientTreatmentStatusId,input:this.patientTreatmentStatus}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}let Cd=(()=>{class s extends W.nH{constructor(t,i,a){super("NotificationService.PatientTreatmentStatusBusinessProviderService",t,a),this.data=i}createPatientTreatmentStatus(t){const i=new gQ(t);return i.Do(this),i.response}updatePatientTreatmentStatus(t,i){const a=new CQ(t,i);return a.Do(this),a.response}importPatientTreatmentStatuses(t){const i=new vQ(t);return i.Do(this),i.response}validatePatientTreatmentStatusExcelData(t){const i=new hQ(t);return i.Do(this),i.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(K.ed),e.LFG(z.q),e.LFG(W.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),SQ=(()=>{class s extends W.nH{constructor(t,i,a){super("PatientTreatmentStatusService",a,t),this.businessProvider=i}createPatientTreatmentStatus(t){const i=Object.fromEntries(Object.entries(t).filter(([a,l])=>null!==l));return this.businessProvider.createPatientTreatmentStatus(i)}updatePatientTreatmentStatus(t,i){return this.businessProvider.updatePatientTreatmentStatus(t,i)}importPatientTreatmentStatuses(t){return this.businessProvider.importPatientTreatmentStatuses(t)}validatePatientTreatmentStatusExcelData(t){return this.businessProvider.validatePatientTreatmentStatusExcelData(t)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(Cd,8),e.LFG(Cd),e.LFG(K.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),Jo=(()=>{class s extends b.m1{constructor(t,i,a,l,d,ee){super({loading:!1,patientTreatmentStatuses:[],done:!1,searchQuery:"",formName:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=a,this.toast=l,this.formService=d,this.patientTreatmentStatusService=ee,this.errors$=this.select(c=>c.errors),this.loading$=this.select(c=>c.loading),this.done$=this.select(c=>c.done),this.item$=this.select(c=>c.item),this.patientTreatmentStatuses$=this.select(c=>c.patientTreatmentStatuses),this.paging$=this.select(c=>c.paging),this.searchQuery$=this.select(c=>c.searchQuery),this.formName$=this.select(c=>c.formName),this.actionResult$=this.select(this.item$,this.done$,(c,u)=>({item:c,done:u}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.patientTreatmentStatuses$,(c,u,n,r,m)=>({errors:c,loading:u,item:n,formName:r,patientTreatmentStatuses:m}),{debounce:!0}),this.input$=this.select(this.paging$,this.searchQuery$,(c,u)=>({limit:c.limit,skip:c.skip,name:u,total:c.total})),this.setFormName=this.updater((c,u)=>Object.assign(Object.assign({},c),{formName:u})),this.setItem=this.updater((c,u)=>Object.assign(Object.assign({},c),{item:u})),this.addNewPatientTreatmentStatus=this.updater((c,u)=>Object.assign(Object.assign({},c),{patientTreatmentStatuses:[...c.patientTreatmentStatuses,u]})),this.updatePatientTreatmentStatus=this.updater((c,u)=>Object.assign(Object.assign({},c),{patientTreatmentStatuses:c.patientTreatmentStatuses.map(n=>n.id===u.id?u:n)})),this.addPatientTreatmentStatuses=this.updater((c,u)=>Object.assign(Object.assign({},c),{patientTreatmentStatuses:c.patientTreatmentStatuses.concat(u)})),this.updatePatientTreatmentStatuses=this.updater((c,u)=>Object.assign(Object.assign({},c),{patientTreatmentStatuses:c.patientTreatmentStatuses.map(n=>u.find(m=>m.id===n.id)||n)})),this.setSearchQuery=this.updater((c,u)=>Object.assign(Object.assign({},c),{searchQuery:u})),this.loadPatientTreatmentStatusEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.data.userPatientTreatmentStatus({patientTreatmentStatusId:u}).pipe((0,b._b)(n=>{this.patchState({item:n.data.item,errors:n.errors,loading:!1})},n=>this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})))))),this.loadPatientTreatmentStatusesEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.input$),(0,h.w)(([u,n])=>this.data.userPatientTreatmentStatuses({input:n}).pipe((0,b._b)(r=>this.patchState({paging:{limit:n.limit,skip:n.skip,total:r.data.count.total},patientTreatmentStatuses:r.data.items,errors:r.errors,loading:!1}),r=>this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})))))),this.createPatientTreatmentStatusEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.patientTreatmentStatusService.createPatientTreatmentStatus(Object.assign({},u)).pipe((0,b._b)(n=>{this.addNewPatientTreatmentStatus(n),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:n,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},n=>{n.graphQLErrors?(this.toast.error(n.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})):(this.toast.error(n.Message),this.formService.setErrors(n.Data))}))))),this.updatePatientTreatmentStatusEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([u,n])=>this.patientTreatmentStatusService.updatePatientTreatmentStatus(u,u.id).pipe((0,b._b)(r=>{this.updatePatientTreatmentStatus(r),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:r,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},r=>{r.graphQLErrors?(this.toast.error(r.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})):(this.toast.error(r.Message),this.formService.setErrors(r.Data))}))))),this.deletePatientTreatmentStatusEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([u,n])=>this.data.userDeletePatientTreatmentStatus({patientTreatmentStatusId:n.id}).pipe((0,b._b)(r=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:r.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},r=>{r.graphQLErrors?(this.toast.error(r.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})):(this.toast.error(r.Message),this.formService.setErrors(r.Data))}))))),this.importExcelEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.patientTreatmentStatusService.importPatientTreatmentStatuses(u).pipe((0,de.K)(n=>{var r;return this.toast.error(null!==(r=n.Message)&&void 0!==r?r:"Failed to save",{duration:3e3}),q.E}),(0,y.b)(n=>{const r=JSON.parse(n.created),m=JSON.parse(n.updated),p=JSON.parse(n.failed),v=r.length+m.length+p.length;this.addPatientTreatmentStatuses(r),this.updatePatientTreatmentStatuses(m),this.toast.success(`${r.length} created, ${m.length} updated, ${p.length} failed of total ${v}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("patientTreatmentStatusId")?(this.route.snapshot.paramMap.get("patientTreatmentStatusId"),this.setFormName("patientTreatmentStatus_edit")):this.setFormName("patientTreatmentStatus_create")}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.patientTreatmentStatusService.validatePatientTreatmentStatusExcelData(t)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(z.q),e.LFG(O.F0),e.LFG(O.gz),e.LFG(X.F),e.LFG(Z.o),e.LFG(SQ))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function bQ(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.close.emit())})("formIsReady",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.patientTreatmentStatus)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let Sd=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"patientTreatmentStatus_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.patientTreatmentStatus=i.item})):t.formName&&t.formName.currentValue&&"patientTreatmentStatus_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadPatientTreatmentStatusEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.patientTreatmentStatus=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Jo),e.Y36(O.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-patient-treatment-status-form"]],inputs:{patientTreatmentStatus:"patientTreatmentStatus",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,bQ,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[P.O5,te.M,P.Ov],encapsulation:2}),s})(),bd=(()=>{class s{constructor(){this.autoHeight=!1,this.patientTreatmentStatuses=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[,{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var a;t.includes(null===(a=i.data)||void 0===a?void 0:a.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-patient-treatment-status-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(f.x,5),2&t){let a;e.iGM(a=e.CRH())&&(i.tableView=a.first)}},inputs:{autoHeight:"autoHeight",patientTreatmentStatuses:"patientTreatmentStatuses"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.patientTreatmentStatuses)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[f.x],encapsulation:2}),s})();function TQ(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-patient-treatment-status-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","patientTreatmentStatus_edit")("formControl",t.formControl)("patientTreatmentStatus",t.patientTreatmentStatus)}}const yQ=function(){return{}};function wQ(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-patient-treatment-status-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","patientTreatmentStatus_create")("formControl",t.formControl)("patientTreatmentStatus",e.DdM(3,yQ))}}function xQ(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-patient-treatment-status-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(d.ref.close())}),e.qZA()}2&s&&e.Q6J("patientTreatmentStatuses",o.data.items)}let NQ=(()=>{class s extends G.fS{constructor(t){super(),this.store=t,this.store.loadPatientTreatmentStatusesEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.patientTreatmentStatuses$.pipe((0,h.w)(i=>(0,D.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Jo))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","patientTreatmentStatus","send","close"],[1,"w-full","h-full","bg-white",3,"patientTreatmentStatuses","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,TQ,2,3,"ng-template",null,1,e.W1O),e.YNc(3,wQ,1,4,"ng-template",null,2,e.W1O),e.YNc(5,xQ,1,1,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",d)("editTemplate",a)("createTemplate",l)("key",i.field.key)}},dependencies:[E.JJ,E.oH,H.$,Sd,bd],encapsulation:2}),s})();function AQ(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-patient-treatment-status-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","patientTreatmentStatus_edit")("patientTreatmentStatus",t.value)}}const FQ=function(){return{}};function PQ(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-patient-treatment-status-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","patientTreatmentStatus_create")("patientTreatmentStatus",e.DdM(2,FQ))}function IQ(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-patient-treatment-status-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(null==d.ref?null:d.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("patientTreatmentStatuses",t.items)}}let DQ=(()=>{class s extends pe{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","patientTreatmentStatus","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","patientTreatmentStatuses","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,AQ,1,2,"ng-template",null,1,e.W1O),e.YNc(3,PQ,1,3,"ng-template",null,2,e.W1O),e.YNc(5,IQ,1,2,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[he,Sd,bd],encapsulation:2}),s})(),MQ=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[Jo],imports:[P.ez,U.F,E.UX,J.o,ae.u,$.P,j.t,me,k.h,se.G,G.X0.forChild({types:[{name:"patient-treatment-status-select",component:NQ,wrappers:["form-field"]},{name:"patient-treatment-status-grid",component:DQ}]})]}),s})(),WQ=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[MQ]}),s})();class Fi extends W.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class EQ extends Fi{constructor(o){super("ValidatePaymentApplicationMethodExcelDataAction"),this.valid=!1,this.excelData=o}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name)}),this.validationContext.addRule(new g.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof g.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(a=>a.name),newNames:[i.newName]}):i instanceof g.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,D.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class OQ extends g.wS{constructor(o,t,i,a,l){super(o,t,i,a,l,!0)}}class LQ extends g.ul{constructor(o,t,i,a=!1){super(o,t,a),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new g.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new OQ("name","The paymentapplicationmethod name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class $Q extends Fi{constructor(o){super("CreatePaymentApplicationMethodAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new LQ("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreatePaymentApplicationMethod({input:this.input}).pipe((0,h.w)(o=>(0,ue.of)(o.data.created)))}}class GQ extends Fi{constructor(o){super("UpdatePaymentApplicationMethodsAction"),this.paymentApplicationMethods=o}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.paymentApplicationMethods,!0))}performAction(){this.response=this.businessProvider.data.userUpdatePaymentApplicationMethods({input:{paymentApplicationMethods:this.paymentApplicationMethods}}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}class RQ extends Fi{constructor(o,t){super("UpdatePaymentApplicationMethodAction"),this.paymentApplicationMethod=o,this.paymentApplicationMethodId=t}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.paymentApplicationMethod,!0)).addRule(new g.xF("Id","Id should be a CUID and not null",this.paymentApplicationMethodId,!0))}performAction(){this.response=this.businessProvider.data.userUpdatePaymentApplicationMethod({paymentApplicationMethodId:this.paymentApplicationMethodId,input:this.paymentApplicationMethod}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}let Td=(()=>{class s extends W.nH{constructor(t,i,a){super("NotificationService.PaymentApplicationMethodBusinessProviderService",t,a),this.data=i}createPaymentApplicationMethod(t){const i=new $Q(t);return i.Do(this),i.response}updatePaymentApplicationMethod(t,i){const a=new RQ(t,i);return a.Do(this),a.response}importPaymentApplicationMethods(t){const i=new GQ(t);return i.Do(this),i.response}validatePaymentApplicationMethodExcelData(t){const i=new EQ(t);return i.Do(this),i.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(K.ed),e.LFG(z.q),e.LFG(W.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),QQ=(()=>{class s extends W.nH{constructor(t,i,a){super("PaymentApplicationMethodService",a,t),this.businessProvider=i}createPaymentApplicationMethod(t){const i=Object.fromEntries(Object.entries(t).filter(([a,l])=>null!==l));return this.businessProvider.createPaymentApplicationMethod(i)}updatePaymentApplicationMethod(t,i){return this.businessProvider.updatePaymentApplicationMethod(t,i)}importPaymentApplicationMethods(t){return this.businessProvider.importPaymentApplicationMethods(t)}validatePaymentApplicationMethodExcelData(t){return this.businessProvider.validatePaymentApplicationMethodExcelData(t)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(Td,8),e.LFG(Td),e.LFG(K.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),zo=(()=>{class s extends b.m1{constructor(t,i,a,l,d,ee){super({loading:!1,paymentApplicationMethods:[],done:!1,searchQuery:"",formName:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=a,this.toast=l,this.formService=d,this.paymentApplicationMethodService=ee,this.errors$=this.select(c=>c.errors),this.loading$=this.select(c=>c.loading),this.done$=this.select(c=>c.done),this.item$=this.select(c=>c.item),this.paymentApplicationMethods$=this.select(c=>c.paymentApplicationMethods),this.paging$=this.select(c=>c.paging),this.searchQuery$=this.select(c=>c.searchQuery),this.formName$=this.select(c=>c.formName),this.actionResult$=this.select(this.item$,this.done$,(c,u)=>({item:c,done:u}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.paymentApplicationMethods$,(c,u,n,r,m)=>({errors:c,loading:u,item:n,formName:r,paymentApplicationMethods:m}),{debounce:!0}),this.input$=this.select(this.paging$,this.searchQuery$,(c,u)=>({limit:c.limit,skip:c.skip,name:u,total:c.total})),this.setFormName=this.updater((c,u)=>Object.assign(Object.assign({},c),{formName:u})),this.setItem=this.updater((c,u)=>Object.assign(Object.assign({},c),{item:u})),this.addNewPaymentApplicationMethod=this.updater((c,u)=>Object.assign(Object.assign({},c),{paymentApplicationMethods:[...c.paymentApplicationMethods,u]})),this.updatePaymentApplicationMethod=this.updater((c,u)=>Object.assign(Object.assign({},c),{paymentApplicationMethods:c.paymentApplicationMethods.map(n=>n.id===u.id?u:n)})),this.addPaymentApplicationMethods=this.updater((c,u)=>Object.assign(Object.assign({},c),{paymentApplicationMethods:c.paymentApplicationMethods.concat(u)})),this.updatePaymentApplicationMethods=this.updater((c,u)=>Object.assign(Object.assign({},c),{paymentApplicationMethods:c.paymentApplicationMethods.map(n=>u.find(m=>m.id===n.id)||n)})),this.setSearchQuery=this.updater((c,u)=>Object.assign(Object.assign({},c),{searchQuery:u})),this.loadPaymentApplicationMethodEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.data.userPaymentApplicationMethod({paymentApplicationMethodId:u}).pipe((0,b._b)(n=>{this.patchState({item:n.data.item,errors:n.errors,loading:!1})},n=>this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})))))),this.loadPaymentApplicationMethodsEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.input$),(0,h.w)(([u,n])=>this.data.userPaymentApplicationMethods({input:n}).pipe((0,b._b)(r=>this.patchState({paging:{limit:n.limit,skip:n.skip,total:r.data.count.total},paymentApplicationMethods:r.data.items,errors:r.errors,loading:!1}),r=>this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})))))),this.createPaymentApplicationMethodEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.paymentApplicationMethodService.createPaymentApplicationMethod(Object.assign({},u)).pipe((0,b._b)(n=>{this.addNewPaymentApplicationMethod(n),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:n,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},n=>{n.graphQLErrors?(this.toast.error(n.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})):(this.toast.error(n.Message),this.formService.setErrors(n.Data))}))))),this.updatePaymentApplicationMethodEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([u,n])=>this.paymentApplicationMethodService.updatePaymentApplicationMethod(u,u.id).pipe((0,b._b)(r=>{this.updatePaymentApplicationMethod(r),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:r,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},r=>{r.graphQLErrors?(this.toast.error(r.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})):(this.toast.error(r.Message),this.formService.setErrors(r.Data))}))))),this.deletePaymentApplicationMethodEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([u,n])=>this.data.userDeletePaymentApplicationMethod({paymentApplicationMethodId:n.id}).pipe((0,b._b)(r=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:r.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},r=>{r.graphQLErrors?(this.toast.error(r.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})):(this.toast.error(r.Message),this.formService.setErrors(r.Data))}))))),this.importExcelEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.paymentApplicationMethodService.importPaymentApplicationMethods(u).pipe((0,de.K)(n=>{var r;return this.toast.error(null!==(r=n.Message)&&void 0!==r?r:"Failed to save",{duration:3e3}),q.E}),(0,y.b)(n=>{const r=JSON.parse(n.created),m=JSON.parse(n.updated),p=JSON.parse(n.failed),v=r.length+m.length+p.length;this.addPaymentApplicationMethods(r),this.updatePaymentApplicationMethods(m),this.toast.success(`${r.length} created, ${m.length} updated, ${p.length} failed of total ${v}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("paymentApplicationMethodId")?(this.route.snapshot.paramMap.get("paymentApplicationMethodId"),this.setFormName("paymentApplicationMethod_edit")):this.setFormName("paymentApplicationMethod_create")}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.paymentApplicationMethodService.validatePaymentApplicationMethodExcelData(t)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(z.q),e.LFG(O.F0),e.LFG(O.gz),e.LFG(X.F),e.LFG(Z.o),e.LFG(QQ))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function VQ(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.close.emit())})("formIsReady",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.paymentApplicationMethod)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let yd=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"paymentApplicationMethod_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.paymentApplicationMethod=i.item})):t.formName&&t.formName.currentValue&&"paymentApplicationMethod_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadPaymentApplicationMethodEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.paymentApplicationMethod=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(zo),e.Y36(O.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-payment-application-method-form"]],inputs:{paymentApplicationMethod:"paymentApplicationMethod",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,VQ,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[P.O5,te.M,P.Ov],encapsulation:2}),s})(),wd=(()=>{class s{constructor(){this.autoHeight=!1,this.paymentApplicationMethods=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[,{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var a;t.includes(null===(a=i.data)||void 0===a?void 0:a.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-payment-application-method-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(f.x,5),2&t){let a;e.iGM(a=e.CRH())&&(i.tableView=a.first)}},inputs:{autoHeight:"autoHeight",paymentApplicationMethods:"paymentApplicationMethods"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.paymentApplicationMethods)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[f.x],encapsulation:2}),s})();function jQ(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-payment-application-method-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","paymentApplicationMethod_edit")("formControl",t.formControl)("paymentApplicationMethod",t.paymentApplicationMethod)}}const UQ=function(){return{}};function JQ(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-payment-application-method-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","paymentApplicationMethod_create")("formControl",t.formControl)("paymentApplicationMethod",e.DdM(3,UQ))}}function zQ(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-payment-application-method-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(d.ref.close())}),e.qZA()}2&s&&e.Q6J("paymentApplicationMethods",o.data.items)}let HQ=(()=>{class s extends G.fS{constructor(t){super(),this.store=t,this.store.loadPaymentApplicationMethodsEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.paymentApplicationMethods$.pipe((0,h.w)(i=>(0,D.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(zo))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","paymentApplicationMethod","send","close"],[1,"w-full","h-full","bg-white",3,"paymentApplicationMethods","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,jQ,2,3,"ng-template",null,1,e.W1O),e.YNc(3,JQ,1,4,"ng-template",null,2,e.W1O),e.YNc(5,zQ,1,1,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",d)("editTemplate",a)("createTemplate",l)("key",i.field.key)}},dependencies:[E.JJ,E.oH,H.$,yd,wd],encapsulation:2}),s})();function qQ(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-payment-application-method-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","paymentApplicationMethod_edit")("paymentApplicationMethod",t.value)}}const KQ=function(){return{}};function ZQ(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-payment-application-method-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","paymentApplicationMethod_create")("paymentApplicationMethod",e.DdM(2,KQ))}function BQ(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-payment-application-method-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(null==d.ref?null:d.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("paymentApplicationMethods",t.items)}}let kQ=(()=>{class s extends pe{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","paymentApplicationMethod","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","paymentApplicationMethods","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,qQ,1,2,"ng-template",null,1,e.W1O),e.YNc(3,ZQ,1,3,"ng-template",null,2,e.W1O),e.YNc(5,BQ,1,2,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[he,yd,wd],encapsulation:2}),s})(),YQ=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[zo],imports:[P.ez,U.F,E.UX,J.o,ae.u,$.P,j.t,me,k.h,se.G,G.X0.forChild({types:[{name:"payment-application-method-select",component:HQ,wrappers:["form-field"]},{name:"payment-application-method-grid",component:kQ}]})]}),s})(),XQ=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[YQ]}),s})();class Pi extends W.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class eV extends Pi{constructor(o,t,i,a,l,d){super("ValidatePaymentExcelDataAction"),this.valid=!1,this.excelData=o,this.batchControls=t,this.banks=i,this.payorTypes=a,this.paymentTypes=l,this.paymentApplicationMethods=d}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name),this.validationContext.addRule(new g.mi(`batchControlName_${i}_is_valid}`,"Batch Control Is Not Valid","batchControl.name",t.batchControl,this.batchControls,!0)),this.validationContext.addRule(new g.mi(`bankName_${i}_is_valid}`,"Bank Is Not Valid","bank.name",t.bank,this.banks,!0)),this.validationContext.addRule(new g.mi(`payorTypeName_${i}_is_valid}`,"Payor Type Is Not Valid","payorType.name",t.payorType,this.payorTypes,!0)),this.validationContext.addRule(new g.mi(`paymentTypeName_${i}_is_valid}`,"Payment Type Is Not Valid","paymentType.name",t.paymentType,this.paymentTypes,!0)),this.validationContext.addRule(new g.mi(`paymentApplicationMethodName_${i}_is_valid}`,"Payment Application Method Is Not Valid","paymentApplicationMethod.name",t.paymentApplicationMethod,this.paymentApplicationMethods,!0))}),this.validationContext.addRule(new g.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof g.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(a=>a.name),newNames:[i.newName]}):i instanceof g.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,D.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class tV extends g.wS{constructor(o,t,i,a,l){super(o,t,i,a,l,!0)}}class iV extends g.ul{constructor(o,t,i,a=!1){super(o,t,a),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new g.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new tV("name","The payment name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class sV extends Pi{constructor(o){super("CreatePaymentAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new iV("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreatePayment({input:this.input}).pipe((0,h.w)(o=>(0,ue.of)(o.data.created)))}}class oV extends Pi{constructor(o){super("UpdatePaymentsAction"),this.payments=o}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.payments,!0))}performAction(){this.response=this.businessProvider.data.userUpdatePayments({input:{payments:this.payments}}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}class aV extends Pi{constructor(o,t){super("UpdatePaymentAction"),this.payment=o,this.paymentId=t}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.payment,!0)).addRule(new g.xF("Id","Id should be a CUID and not null",this.paymentId,!0))}performAction(){this.response=this.businessProvider.data.userUpdatePayment({paymentId:this.paymentId,input:this.payment}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}let xd=(()=>{class s extends W.nH{constructor(t,i,a){super("NotificationService.PaymentBusinessProviderService",t,a),this.data=i}createPayment(t){const i=new sV(t);return i.Do(this),i.response}updatePayment(t,i){const a=new aV(t,i);return a.Do(this),a.response}importPayments(t){const i=new oV(t);return i.Do(this),i.response}validatePaymentExcelData(t,i,a,l,d,ee){const V=new eV(t,i,a,l,d,ee);return V.Do(this),V.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(K.ed),e.LFG(z.q),e.LFG(W.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),rV=(()=>{class s extends W.nH{constructor(t,i,a){super("PaymentService",a,t),this.businessProvider=i}createPayment(t){const i=Object.fromEntries(Object.entries(t).filter(([a,l])=>null!==l));return this.businessProvider.createPayment(i)}updatePayment(t,i){return this.businessProvider.updatePayment(t,i)}importPayments(t){return this.businessProvider.importPayments(t)}validatePaymentExcelData(t,i,a,l,d,ee){return this.businessProvider.validatePaymentExcelData(t,i,a,l,d,ee)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(xd,8),e.LFG(xd),e.LFG(K.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),Ho=(()=>{class s extends b.m1{constructor(t,i,a,l,d,ee){if(super({loading:!1,payments:[],done:!1,searchQuery:"",formName:void 0,batchControlId:void 0,bankId:void 0,payorTypeId:void 0,paymentTypeId:void 0,paymentApplicationMethodId:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=a,this.toast=l,this.formService=d,this.paymentService=ee,this.errors$=this.select(p=>p.errors),this.loading$=this.select(p=>p.loading),this.done$=this.select(p=>p.done),this.item$=this.select(p=>p.item),this.payments$=this.select(p=>p.payments),this.batchControls$=this.select(p=>p.batchControls||[]),this.banks$=this.select(p=>p.banks||[]),this.payorTypes$=this.select(p=>p.payorTypes||[]),this.paymentTypes$=this.select(p=>p.paymentTypes||[]),this.paymentApplicationMethods$=this.select(p=>p.paymentApplicationMethods||[]),this.batchControlId$=this.select(p=>p.batchControlId),this.bankId$=this.select(p=>p.bankId),this.payorTypeId$=this.select(p=>p.payorTypeId),this.paymentTypeId$=this.select(p=>p.paymentTypeId),this.paymentApplicationMethodId$=this.select(p=>p.paymentApplicationMethodId),this.paging$=this.select(p=>p.paging),this.searchQuery$=this.select(p=>p.searchQuery),this.formName$=this.select(p=>p.formName),this.actionResult$=this.select(this.item$,this.done$,(p,v)=>({item:p,done:v}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.payments$,this.batchControls$,this.banks$,this.payorTypes$,this.paymentTypes$,this.paymentApplicationMethods$,(p,v,I,B,_e,Ne,le,ce,oe,ne)=>({errors:p,loading:v,item:I,formName:B,payments:_e,batchControls:Ne,banks:le,payorTypes:ce,paymentTypes:oe,paymentApplicationMethods:ne}),{debounce:!0}),this.input$=this.select(this.paging$,this.batchControlId$,this.bankId$,this.payorTypeId$,this.paymentTypeId$,this.paymentApplicationMethodId$,this.searchQuery$,(p,v,I,B,_e,Ne,le)=>({limit:p.limit,skip:p.skip,name:le,batchControlId:v,bankId:I,payorTypeId:B,paymentTypeId:_e,paymentApplicationMethodId:Ne,total:p.total})),this.setFormName=this.updater((p,v)=>Object.assign(Object.assign({},p),{formName:v})),this.setBatchControlId=this.updater((p,v)=>Object.assign(Object.assign({},p),{batchControlId:v})),this.setBankId=this.updater((p,v)=>Object.assign(Object.assign({},p),{bankId:v})),this.setPayorTypeId=this.updater((p,v)=>Object.assign(Object.assign({},p),{payorTypeId:v})),this.setPaymentTypeId=this.updater((p,v)=>Object.assign(Object.assign({},p),{paymentTypeId:v})),this.setPaymentApplicationMethodId=this.updater((p,v)=>Object.assign(Object.assign({},p),{paymentApplicationMethodId:v})),this.filterBatchControls=p=>this.data.userSelectBatchControls({input:{name:p}}).pipe((0,b._b)(v=>{let I=v.data.items;return this.patchState({batchControls:I}),I},v=>this.patchState({errors:v.graphQLErrors?v.graphQLErrors:v})),(0,fe.U)(v=>v.data.items)),this.filterBanks=p=>this.data.userSelectBanks({input:{name:p}}).pipe((0,b._b)(v=>{let I=v.data.items;return this.patchState({banks:I}),I},v=>this.patchState({errors:v.graphQLErrors?v.graphQLErrors:v})),(0,fe.U)(v=>v.data.items)),this.filterPayorTypes=p=>this.data.userSelectPayorTypes({input:{name:p}}).pipe((0,b._b)(v=>{let I=v.data.items;return this.patchState({payorTypes:I}),I},v=>this.patchState({errors:v.graphQLErrors?v.graphQLErrors:v})),(0,fe.U)(v=>v.data.items)),this.filterPaymentTypes=p=>this.data.userSelectPaymentTypes({input:{name:p}}).pipe((0,b._b)(v=>{let I=v.data.items;return this.patchState({paymentTypes:I}),I},v=>this.patchState({errors:v.graphQLErrors?v.graphQLErrors:v})),(0,fe.U)(v=>v.data.items)),this.filterPaymentApplicationMethods=p=>this.data.userSelectPaymentApplicationMethods({input:{name:p}}).pipe((0,b._b)(v=>{let I=v.data.items;return this.patchState({paymentApplicationMethods:I}),I},v=>this.patchState({errors:v.graphQLErrors?v.graphQLErrors:v})),(0,fe.U)(v=>v.data.items)),this.addBatchControl=this.updater((p,v)=>Object.assign(Object.assign({},p),{batchControls:p.batchControls.concat(v)})),this.addBank=this.updater((p,v)=>Object.assign(Object.assign({},p),{banks:p.banks.concat(v)})),this.addPayorType=this.updater((p,v)=>Object.assign(Object.assign({},p),{payorTypes:p.payorTypes.concat(v)})),this.addPaymentType=this.updater((p,v)=>Object.assign(Object.assign({},p),{paymentTypes:p.paymentTypes.concat(v)})),this.addPaymentApplicationMethod=this.updater((p,v)=>Object.assign(Object.assign({},p),{paymentApplicationMethods:p.paymentApplicationMethods.concat(v)})),this.setItem=this.updater((p,v)=>Object.assign(Object.assign({},p),{item:v})),this.addNewPayment=this.updater((p,v)=>Object.assign(Object.assign({},p),{payments:[...p.payments,v]})),this.updatePayment=this.updater((p,v)=>Object.assign(Object.assign({},p),{payments:p.payments.map(I=>I.id===v.id?v:I)})),this.addPayments=this.updater((p,v)=>Object.assign(Object.assign({},p),{payments:p.payments.concat(v)})),this.updatePayments=this.updater((p,v)=>Object.assign(Object.assign({},p),{payments:p.payments.map(I=>v.find(_e=>_e.id===I.id)||I)})),this.setSearchQuery=this.updater((p,v)=>Object.assign(Object.assign({},p),{searchQuery:v})),this.loadPaymentEffect=this.effect(p=>p.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(v=>this.data.userPayment({paymentId:v}).pipe((0,b._b)(I=>{this.patchState({item:I.data.item,errors:I.errors,loading:!1})},I=>this.patchState({loading:!1,errors:I.graphQLErrors?I.graphQLErrors:I})))))),this.loadPaymentsEffect=this.effect(p=>p.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.input$),(0,h.w)(([v,I])=>this.data.userPayments({input:I}).pipe((0,b._b)(B=>this.patchState({paging:{limit:I.limit,skip:I.skip,total:B.data.count.total},payments:B.data.items,errors:B.errors,loading:!1}),B=>this.patchState({loading:!1,errors:B.graphQLErrors?B.graphQLErrors:B})))))),this.createPaymentEffect=this.effect(p=>p.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(v=>this.paymentService.createPayment(Object.assign({},v)).pipe((0,b._b)(I=>{this.addNewPayment(I),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:I,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},I=>{I.graphQLErrors?(this.toast.error(I.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:I.graphQLErrors?I.graphQLErrors:I})):(this.toast.error(I.Message),this.formService.setErrors(I.Data))}))))),this.updatePaymentEffect=this.effect(p=>p.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([v,I])=>this.paymentService.updatePayment(v,v.id).pipe((0,b._b)(B=>{this.updatePayment(B),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:B,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},B=>{B.graphQLErrors?(this.toast.error(B.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:B.graphQLErrors?B.graphQLErrors:B})):(this.toast.error(B.Message),this.formService.setErrors(B.Data))}))))),this.deletePaymentEffect=this.effect(p=>p.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([v,I])=>this.data.userDeletePayment({paymentId:I.id}).pipe((0,b._b)(B=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:B.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},B=>{B.graphQLErrors?(this.toast.error(B.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:B.graphQLErrors?B.graphQLErrors:B})):(this.toast.error(B.Message),this.formService.setErrors(B.Data))}))))),this.importExcelEffect=this.effect(p=>p.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(v=>this.paymentService.importPayments(v).pipe((0,de.K)(I=>{var B;return this.toast.error(null!==(B=I.Message)&&void 0!==B?B:"Failed to save",{duration:3e3}),q.E}),(0,y.b)(I=>{const B=JSON.parse(I.created),_e=JSON.parse(I.updated),Ne=JSON.parse(I.failed),le=B.length+_e.length+Ne.length;this.addPayments(B),this.updatePayments(_e),this.toast.success(`${B.length} created, ${_e.length} updated, ${Ne.length} failed of total ${le}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("paymentId")?(this.route.snapshot.paramMap.get("paymentId"),this.setFormName("payment_edit")):this.setFormName("payment_create"),this.route.snapshot.paramMap.has("batchControlId")){var c=this.route.snapshot.paramMap.get("batchControlId");this.setBatchControlId(c)}if(this.route.snapshot.paramMap.has("bankId")){var u=this.route.snapshot.paramMap.get("bankId");this.setBankId(u)}if(this.route.snapshot.paramMap.has("payorTypeId")){var n=this.route.snapshot.paramMap.get("payorTypeId");this.setPayorTypeId(n)}if(this.route.snapshot.paramMap.has("paymentTypeId")){var r=this.route.snapshot.paramMap.get("paymentTypeId");this.setPaymentTypeId(r)}if(this.route.snapshot.paramMap.has("paymentApplicationMethodId")){var m=this.route.snapshot.paramMap.get("paymentApplicationMethodId");this.setPaymentApplicationMethodId(m)}}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.paymentService.validatePaymentExcelData(t,i.batchControls,i.banks,i.payorTypes,i.paymentTypes,i.paymentApplicationMethods)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(z.q),e.LFG(O.F0),e.LFG(O.gz),e.LFG(X.F),e.LFG(Z.o),e.LFG(rV))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function nV(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.close.emit())})("formIsReady",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.payment)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let Nd=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"payment_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.payment=i.item})):t.formName&&t.formName.currentValue&&"payment_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadPaymentEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.payment=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Ho),e.Y36(O.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-payment-form"]],inputs:{payment:"payment",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,nV,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[P.O5,te.M,P.Ov],encapsulation:2}),s})(),Ad=(()=>{class s{constructor(){this.autoHeight=!1,this.payments=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[{field:"batchControl.name",headerName:"Batch Control",filter:"agTextColumnFilter"},{field:"bank.name",headerName:"Bank",filter:"agTextColumnFilter"},{field:"payorType.name",headerName:"Payor Type",filter:"agTextColumnFilter"},{field:"paymentType.name",headerName:"Payment Type",filter:"agTextColumnFilter"},{field:"paymentApplicationMethod.name",headerName:"Payment Application Method",filter:"agTextColumnFilter"},{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"paidOn",filter:"agDateColumnFilter"},{field:"name",filter:"agTextColumnFilter"},{field:"batchControlId",filter:"agTextColumnFilter",hide:!0},{field:"bankId",filter:"agTextColumnFilter",hide:!0},{field:"payorTypeId",filter:"agTextColumnFilter",hide:!0},{field:"paymentTypeId",filter:"agTextColumnFilter",hide:!0},{headerName:"Amount",field:"amount",valueFormatter:t=>{var i;return(0,_.oBD)(null===(i=t.data)||void 0===i?void 0:i.amount,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{headerName:"Collected",field:"collected",valueFormatter:t=>{var i;return(0,_.oBD)(null===(i=t.data)||void 0===i?void 0:i.collected,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{headerName:"Dac",field:"dac",valueFormatter:t=>{var i;return(0,_.oBD)(null===(i=t.data)||void 0===i?void 0:i.dac,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{headerName:"Is Partial",field:"isPartial",filter:"agSetColumnFilter",cellRenderer:"checkboxRenderer"},{field:"dateReceived",filter:"agDateColumnFilter"},{field:"memo",filter:"agTextColumnFilter"},{field:"createdBy",filter:"agTextColumnFilter"},{field:"dateCreated",filter:"agDateColumnFilter"},{field:"securitizationGroup",filter:"agTextColumnFilter"},{field:"paymentApplicationMethodId",filter:"agTextColumnFilter",hide:!0}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var a;t.includes(null===(a=i.data)||void 0===a?void 0:a.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-payment-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(f.x,5),2&t){let a;e.iGM(a=e.CRH())&&(i.tableView=a.first)}},inputs:{autoHeight:"autoHeight",payments:"payments"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.payments)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[f.x],encapsulation:2}),s})();function lV(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-payment-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","payment_edit")("formControl",t.formControl)("payment",t.payment)}}const cV=function(){return{}};function dV(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-payment-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","payment_create")("formControl",t.formControl)("payment",e.DdM(3,cV))}}function uV(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-payment-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(d.ref.close())}),e.qZA()}2&s&&e.Q6J("payments",o.data.items)}let mV=(()=>{class s extends G.fS{constructor(t){super(),this.store=t,this.store.loadPaymentsEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.payments$.pipe((0,h.w)(i=>(0,D.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Ho))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","payment","send","close"],[1,"w-full","h-full","bg-white",3,"payments","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,lV,2,3,"ng-template",null,1,e.W1O),e.YNc(3,dV,1,4,"ng-template",null,2,e.W1O),e.YNc(5,uV,1,1,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",d)("editTemplate",a)("createTemplate",l)("key",i.field.key)}},dependencies:[E.JJ,E.oH,H.$,Nd,Ad],encapsulation:2}),s})();function pV(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-payment-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","payment_edit")("payment",t.value)}}const hV=function(){return{}};function fV(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-payment-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","payment_create")("payment",e.DdM(2,hV))}function _V(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-payment-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(null==d.ref?null:d.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("payments",t.items)}}let gV=(()=>{class s extends pe{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","payment","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","payments","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,pV,1,2,"ng-template",null,1,e.W1O),e.YNc(3,fV,1,3,"ng-template",null,2,e.W1O),e.YNc(5,_V,1,2,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[he,Nd,Ad],encapsulation:2}),s})(),vV=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[Ho],imports:[P.ez,U.F,E.UX,J.o,ae.u,$.P,j.t,me,k.h,se.G,G.X0.forChild({types:[{name:"payment-select",component:mV,wrappers:["form-field"]},{name:"payment-grid",component:gV}]})]}),s})(),CV=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[vV]}),s})();class Ii extends W.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class SV extends Ii{constructor(o){super("ValidatePaymentTypeExcelDataAction"),this.valid=!1,this.excelData=o}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name)}),this.validationContext.addRule(new g.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof g.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(a=>a.name),newNames:[i.newName]}):i instanceof g.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,D.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class bV extends g.wS{constructor(o,t,i,a,l){super(o,t,i,a,l,!0)}}class TV extends g.ul{constructor(o,t,i,a=!1){super(o,t,a),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new g.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new bV("name","The paymenttype name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class yV extends Ii{constructor(o){super("CreatePaymentTypeAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new TV("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreatePaymentType({input:this.input}).pipe((0,h.w)(o=>(0,ue.of)(o.data.created)))}}class wV extends Ii{constructor(o){super("UpdatePaymentTypesAction"),this.paymentTypes=o}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.paymentTypes,!0))}performAction(){this.response=this.businessProvider.data.userUpdatePaymentTypes({input:{paymentTypes:this.paymentTypes}}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}class xV extends Ii{constructor(o,t){super("UpdatePaymentTypeAction"),this.paymentType=o,this.paymentTypeId=t}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.paymentType,!0)).addRule(new g.xF("Id","Id should be a CUID and not null",this.paymentTypeId,!0))}performAction(){this.response=this.businessProvider.data.userUpdatePaymentType({paymentTypeId:this.paymentTypeId,input:this.paymentType}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}let Fd=(()=>{class s extends W.nH{constructor(t,i,a){super("NotificationService.PaymentTypeBusinessProviderService",t,a),this.data=i}createPaymentType(t){const i=new yV(t);return i.Do(this),i.response}updatePaymentType(t,i){const a=new xV(t,i);return a.Do(this),a.response}importPaymentTypes(t){const i=new wV(t);return i.Do(this),i.response}validatePaymentTypeExcelData(t){const i=new SV(t);return i.Do(this),i.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(K.ed),e.LFG(z.q),e.LFG(W.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),NV=(()=>{class s extends W.nH{constructor(t,i,a){super("PaymentTypeService",a,t),this.businessProvider=i}createPaymentType(t){const i=Object.fromEntries(Object.entries(t).filter(([a,l])=>null!==l));return this.businessProvider.createPaymentType(i)}updatePaymentType(t,i){return this.businessProvider.updatePaymentType(t,i)}importPaymentTypes(t){return this.businessProvider.importPaymentTypes(t)}validatePaymentTypeExcelData(t){return this.businessProvider.validatePaymentTypeExcelData(t)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(Fd,8),e.LFG(Fd),e.LFG(K.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),qo=(()=>{class s extends b.m1{constructor(t,i,a,l,d,ee){super({loading:!1,paymentTypes:[],done:!1,searchQuery:"",formName:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=a,this.toast=l,this.formService=d,this.paymentTypeService=ee,this.errors$=this.select(c=>c.errors),this.loading$=this.select(c=>c.loading),this.done$=this.select(c=>c.done),this.item$=this.select(c=>c.item),this.paymentTypes$=this.select(c=>c.paymentTypes),this.paging$=this.select(c=>c.paging),this.searchQuery$=this.select(c=>c.searchQuery),this.formName$=this.select(c=>c.formName),this.actionResult$=this.select(this.item$,this.done$,(c,u)=>({item:c,done:u}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.paymentTypes$,(c,u,n,r,m)=>({errors:c,loading:u,item:n,formName:r,paymentTypes:m}),{debounce:!0}),this.input$=this.select(this.paging$,this.searchQuery$,(c,u)=>({limit:c.limit,skip:c.skip,name:u,total:c.total})),this.setFormName=this.updater((c,u)=>Object.assign(Object.assign({},c),{formName:u})),this.setItem=this.updater((c,u)=>Object.assign(Object.assign({},c),{item:u})),this.addNewPaymentType=this.updater((c,u)=>Object.assign(Object.assign({},c),{paymentTypes:[...c.paymentTypes,u]})),this.updatePaymentType=this.updater((c,u)=>Object.assign(Object.assign({},c),{paymentTypes:c.paymentTypes.map(n=>n.id===u.id?u:n)})),this.addPaymentTypes=this.updater((c,u)=>Object.assign(Object.assign({},c),{paymentTypes:c.paymentTypes.concat(u)})),this.updatePaymentTypes=this.updater((c,u)=>Object.assign(Object.assign({},c),{paymentTypes:c.paymentTypes.map(n=>u.find(m=>m.id===n.id)||n)})),this.setSearchQuery=this.updater((c,u)=>Object.assign(Object.assign({},c),{searchQuery:u})),this.loadPaymentTypeEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.data.userPaymentType({paymentTypeId:u}).pipe((0,b._b)(n=>{this.patchState({item:n.data.item,errors:n.errors,loading:!1})},n=>this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})))))),this.loadPaymentTypesEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.input$),(0,h.w)(([u,n])=>this.data.userPaymentTypes({input:n}).pipe((0,b._b)(r=>this.patchState({paging:{limit:n.limit,skip:n.skip,total:r.data.count.total},paymentTypes:r.data.items,errors:r.errors,loading:!1}),r=>this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})))))),this.createPaymentTypeEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.paymentTypeService.createPaymentType(Object.assign({},u)).pipe((0,b._b)(n=>{this.addNewPaymentType(n),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:n,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},n=>{n.graphQLErrors?(this.toast.error(n.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})):(this.toast.error(n.Message),this.formService.setErrors(n.Data))}))))),this.updatePaymentTypeEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([u,n])=>this.paymentTypeService.updatePaymentType(u,u.id).pipe((0,b._b)(r=>{this.updatePaymentType(r),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:r,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},r=>{r.graphQLErrors?(this.toast.error(r.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})):(this.toast.error(r.Message),this.formService.setErrors(r.Data))}))))),this.deletePaymentTypeEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([u,n])=>this.data.userDeletePaymentType({paymentTypeId:n.id}).pipe((0,b._b)(r=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:r.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},r=>{r.graphQLErrors?(this.toast.error(r.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})):(this.toast.error(r.Message),this.formService.setErrors(r.Data))}))))),this.importExcelEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.paymentTypeService.importPaymentTypes(u).pipe((0,de.K)(n=>{var r;return this.toast.error(null!==(r=n.Message)&&void 0!==r?r:"Failed to save",{duration:3e3}),q.E}),(0,y.b)(n=>{const r=JSON.parse(n.created),m=JSON.parse(n.updated),p=JSON.parse(n.failed),v=r.length+m.length+p.length;this.addPaymentTypes(r),this.updatePaymentTypes(m),this.toast.success(`${r.length} created, ${m.length} updated, ${p.length} failed of total ${v}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("paymentTypeId")?(this.route.snapshot.paramMap.get("paymentTypeId"),this.setFormName("paymentType_edit")):this.setFormName("paymentType_create")}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.paymentTypeService.validatePaymentTypeExcelData(t)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(z.q),e.LFG(O.F0),e.LFG(O.gz),e.LFG(X.F),e.LFG(Z.o),e.LFG(NV))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function AV(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.close.emit())})("formIsReady",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.paymentType)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let Pd=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"paymentType_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.paymentType=i.item})):t.formName&&t.formName.currentValue&&"paymentType_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadPaymentTypeEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.paymentType=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(qo),e.Y36(O.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-payment-type-form"]],inputs:{paymentType:"paymentType",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,AV,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[P.O5,te.M,P.Ov],encapsulation:2}),s})(),Id=(()=>{class s{constructor(){this.autoHeight=!1,this.paymentTypes=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[,{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var a;t.includes(null===(a=i.data)||void 0===a?void 0:a.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-payment-type-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(f.x,5),2&t){let a;e.iGM(a=e.CRH())&&(i.tableView=a.first)}},inputs:{autoHeight:"autoHeight",paymentTypes:"paymentTypes"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.paymentTypes)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[f.x],encapsulation:2}),s})();function FV(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-payment-type-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","paymentType_edit")("formControl",t.formControl)("paymentType",t.paymentType)}}const PV=function(){return{}};function IV(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-payment-type-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","paymentType_create")("formControl",t.formControl)("paymentType",e.DdM(3,PV))}}function DV(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-payment-type-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(d.ref.close())}),e.qZA()}2&s&&e.Q6J("paymentTypes",o.data.items)}let MV=(()=>{class s extends G.fS{constructor(t){super(),this.store=t,this.store.loadPaymentTypesEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.paymentTypes$.pipe((0,h.w)(i=>(0,D.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(qo))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","paymentType","send","close"],[1,"w-full","h-full","bg-white",3,"paymentTypes","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,FV,2,3,"ng-template",null,1,e.W1O),e.YNc(3,IV,1,4,"ng-template",null,2,e.W1O),e.YNc(5,DV,1,1,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",d)("editTemplate",a)("createTemplate",l)("key",i.field.key)}},dependencies:[E.JJ,E.oH,H.$,Pd,Id],encapsulation:2}),s})();function WV(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-payment-type-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","paymentType_edit")("paymentType",t.value)}}const EV=function(){return{}};function OV(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-payment-type-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","paymentType_create")("paymentType",e.DdM(2,EV))}function LV(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-payment-type-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(null==d.ref?null:d.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("paymentTypes",t.items)}}let $V=(()=>{class s extends pe{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","paymentType","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","paymentTypes","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,WV,1,2,"ng-template",null,1,e.W1O),e.YNc(3,OV,1,3,"ng-template",null,2,e.W1O),e.YNc(5,LV,1,2,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[he,Pd,Id],encapsulation:2}),s})(),GV=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[qo],imports:[P.ez,U.F,E.UX,J.o,ae.u,$.P,j.t,me,k.h,se.G,G.X0.forChild({types:[{name:"payment-type-select",component:MV,wrappers:["form-field"]},{name:"payment-type-grid",component:$V}]})]}),s})(),RV=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[GV]}),s})();class Di extends W.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class QV extends Di{constructor(o){super("ValidatePayorTypeExcelDataAction"),this.valid=!1,this.excelData=o}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name)}),this.validationContext.addRule(new g.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof g.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(a=>a.name),newNames:[i.newName]}):i instanceof g.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,D.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class VV extends g.wS{constructor(o,t,i,a,l){super(o,t,i,a,l,!0)}}class jV extends g.ul{constructor(o,t,i,a=!1){super(o,t,a),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new g.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new VV("name","The payortype name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class UV extends Di{constructor(o){super("CreatePayorTypeAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new jV("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreatePayorType({input:this.input}).pipe((0,h.w)(o=>(0,ue.of)(o.data.created)))}}class JV extends Di{constructor(o){super("UpdatePayorTypesAction"),this.payorTypes=o}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.payorTypes,!0))}performAction(){this.response=this.businessProvider.data.userUpdatePayorTypes({input:{payorTypes:this.payorTypes}}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}class zV extends Di{constructor(o,t){super("UpdatePayorTypeAction"),this.payorType=o,this.payorTypeId=t}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.payorType,!0)).addRule(new g.xF("Id","Id should be a CUID and not null",this.payorTypeId,!0))}performAction(){this.response=this.businessProvider.data.userUpdatePayorType({payorTypeId:this.payorTypeId,input:this.payorType}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}let Dd=(()=>{class s extends W.nH{constructor(t,i,a){super("NotificationService.PayorTypeBusinessProviderService",t,a),this.data=i}createPayorType(t){const i=new UV(t);return i.Do(this),i.response}updatePayorType(t,i){const a=new zV(t,i);return a.Do(this),a.response}importPayorTypes(t){const i=new JV(t);return i.Do(this),i.response}validatePayorTypeExcelData(t){const i=new QV(t);return i.Do(this),i.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(K.ed),e.LFG(z.q),e.LFG(W.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),HV=(()=>{class s extends W.nH{constructor(t,i,a){super("PayorTypeService",a,t),this.businessProvider=i}createPayorType(t){const i=Object.fromEntries(Object.entries(t).filter(([a,l])=>null!==l));return this.businessProvider.createPayorType(i)}updatePayorType(t,i){return this.businessProvider.updatePayorType(t,i)}importPayorTypes(t){return this.businessProvider.importPayorTypes(t)}validatePayorTypeExcelData(t){return this.businessProvider.validatePayorTypeExcelData(t)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(Dd,8),e.LFG(Dd),e.LFG(K.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),Ko=(()=>{class s extends b.m1{constructor(t,i,a,l,d,ee){super({loading:!1,payorTypes:[],done:!1,searchQuery:"",formName:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=a,this.toast=l,this.formService=d,this.payorTypeService=ee,this.errors$=this.select(c=>c.errors),this.loading$=this.select(c=>c.loading),this.done$=this.select(c=>c.done),this.item$=this.select(c=>c.item),this.payorTypes$=this.select(c=>c.payorTypes),this.paging$=this.select(c=>c.paging),this.searchQuery$=this.select(c=>c.searchQuery),this.formName$=this.select(c=>c.formName),this.actionResult$=this.select(this.item$,this.done$,(c,u)=>({item:c,done:u}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.payorTypes$,(c,u,n,r,m)=>({errors:c,loading:u,item:n,formName:r,payorTypes:m}),{debounce:!0}),this.input$=this.select(this.paging$,this.searchQuery$,(c,u)=>({limit:c.limit,skip:c.skip,name:u,total:c.total})),this.setFormName=this.updater((c,u)=>Object.assign(Object.assign({},c),{formName:u})),this.setItem=this.updater((c,u)=>Object.assign(Object.assign({},c),{item:u})),this.addNewPayorType=this.updater((c,u)=>Object.assign(Object.assign({},c),{payorTypes:[...c.payorTypes,u]})),this.updatePayorType=this.updater((c,u)=>Object.assign(Object.assign({},c),{payorTypes:c.payorTypes.map(n=>n.id===u.id?u:n)})),this.addPayorTypes=this.updater((c,u)=>Object.assign(Object.assign({},c),{payorTypes:c.payorTypes.concat(u)})),this.updatePayorTypes=this.updater((c,u)=>Object.assign(Object.assign({},c),{payorTypes:c.payorTypes.map(n=>u.find(m=>m.id===n.id)||n)})),this.setSearchQuery=this.updater((c,u)=>Object.assign(Object.assign({},c),{searchQuery:u})),this.loadPayorTypeEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.data.userPayorType({payorTypeId:u}).pipe((0,b._b)(n=>{this.patchState({item:n.data.item,errors:n.errors,loading:!1})},n=>this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})))))),this.loadPayorTypesEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.input$),(0,h.w)(([u,n])=>this.data.userPayorTypes({input:n}).pipe((0,b._b)(r=>this.patchState({paging:{limit:n.limit,skip:n.skip,total:r.data.count.total},payorTypes:r.data.items,errors:r.errors,loading:!1}),r=>this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})))))),this.createPayorTypeEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.payorTypeService.createPayorType(Object.assign({},u)).pipe((0,b._b)(n=>{this.addNewPayorType(n),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:n,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},n=>{n.graphQLErrors?(this.toast.error(n.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})):(this.toast.error(n.Message),this.formService.setErrors(n.Data))}))))),this.updatePayorTypeEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([u,n])=>this.payorTypeService.updatePayorType(u,u.id).pipe((0,b._b)(r=>{this.updatePayorType(r),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:r,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},r=>{r.graphQLErrors?(this.toast.error(r.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})):(this.toast.error(r.Message),this.formService.setErrors(r.Data))}))))),this.deletePayorTypeEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([u,n])=>this.data.userDeletePayorType({payorTypeId:n.id}).pipe((0,b._b)(r=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:r.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},r=>{r.graphQLErrors?(this.toast.error(r.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})):(this.toast.error(r.Message),this.formService.setErrors(r.Data))}))))),this.importExcelEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.payorTypeService.importPayorTypes(u).pipe((0,de.K)(n=>{var r;return this.toast.error(null!==(r=n.Message)&&void 0!==r?r:"Failed to save",{duration:3e3}),q.E}),(0,y.b)(n=>{const r=JSON.parse(n.created),m=JSON.parse(n.updated),p=JSON.parse(n.failed),v=r.length+m.length+p.length;this.addPayorTypes(r),this.updatePayorTypes(m),this.toast.success(`${r.length} created, ${m.length} updated, ${p.length} failed of total ${v}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("payorTypeId")?(this.route.snapshot.paramMap.get("payorTypeId"),this.setFormName("payorType_edit")):this.setFormName("payorType_create")}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.payorTypeService.validatePayorTypeExcelData(t)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(z.q),e.LFG(O.F0),e.LFG(O.gz),e.LFG(X.F),e.LFG(Z.o),e.LFG(HV))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function qV(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.close.emit())})("formIsReady",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.payorType)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let Md=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"payorType_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.payorType=i.item})):t.formName&&t.formName.currentValue&&"payorType_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadPayorTypeEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.payorType=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Ko),e.Y36(O.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-payor-type-form"]],inputs:{payorType:"payorType",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,qV,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[P.O5,te.M,P.Ov],encapsulation:2}),s})(),Wd=(()=>{class s{constructor(){this.autoHeight=!1,this.payorTypes=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[,{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var a;t.includes(null===(a=i.data)||void 0===a?void 0:a.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-payor-type-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(f.x,5),2&t){let a;e.iGM(a=e.CRH())&&(i.tableView=a.first)}},inputs:{autoHeight:"autoHeight",payorTypes:"payorTypes"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.payorTypes)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[f.x],encapsulation:2}),s})();function KV(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-payor-type-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","payorType_edit")("formControl",t.formControl)("payorType",t.payorType)}}const ZV=function(){return{}};function BV(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-payor-type-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","payorType_create")("formControl",t.formControl)("payorType",e.DdM(3,ZV))}}function kV(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-payor-type-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(d.ref.close())}),e.qZA()}2&s&&e.Q6J("payorTypes",o.data.items)}let YV=(()=>{class s extends G.fS{constructor(t){super(),this.store=t,this.store.loadPayorTypesEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.payorTypes$.pipe((0,h.w)(i=>(0,D.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Ko))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","payorType","send","close"],[1,"w-full","h-full","bg-white",3,"payorTypes","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,KV,2,3,"ng-template",null,1,e.W1O),e.YNc(3,BV,1,4,"ng-template",null,2,e.W1O),e.YNc(5,kV,1,1,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",d)("editTemplate",a)("createTemplate",l)("key",i.field.key)}},dependencies:[E.JJ,E.oH,H.$,Md,Wd],encapsulation:2}),s})();function XV(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-payor-type-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","payorType_edit")("payorType",t.value)}}const ej=function(){return{}};function tj(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-payor-type-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","payorType_create")("payorType",e.DdM(2,ej))}function ij(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-payor-type-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(null==d.ref?null:d.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("payorTypes",t.items)}}let sj=(()=>{class s extends pe{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","payorType","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","payorTypes","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,XV,1,2,"ng-template",null,1,e.W1O),e.YNc(3,tj,1,3,"ng-template",null,2,e.W1O),e.YNc(5,ij,1,2,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[he,Md,Wd],encapsulation:2}),s})(),oj=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[Ko],imports:[P.ez,U.F,E.UX,J.o,ae.u,$.P,j.t,me,k.h,se.G,G.X0.forChild({types:[{name:"payor-type-select",component:YV,wrappers:["form-field"]},{name:"payor-type-grid",component:sj}]})]}),s})(),aj=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[oj]}),s})();class Mi extends W.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class rj extends Mi{constructor(o,t){super("ValidatePchProviderExcelDataAction"),this.valid=!1,this.excelData=o,this.clinicalProviders=t}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name),this.validationContext.addRule(new g.mi(`clinicalProviderName_${i}_is_valid}`,"Clinical Provider Is Not Valid","clinicalProvider.name",t.clinicalProvider,this.clinicalProviders,!0))}),this.validationContext.addRule(new g.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof g.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(a=>a.name),newNames:[i.newName]}):i instanceof g.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,D.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class nj extends g.wS{constructor(o,t,i,a,l){super(o,t,i,a,l,!0)}}class lj extends g.ul{constructor(o,t,i,a=!1){super(o,t,a),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new g.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new nj("name","The pchprovider name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class cj extends Mi{constructor(o){super("CreatePchProviderAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new lj("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreatePchProvider({input:this.input}).pipe((0,h.w)(o=>(0,ue.of)(o.data.created)))}}class dj extends Mi{constructor(o){super("UpdatePchProvidersAction"),this.pchProviders=o}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.pchProviders,!0))}performAction(){this.response=this.businessProvider.data.userUpdatePchProviders({input:{pchProviders:this.pchProviders}}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}class uj extends Mi{constructor(o,t){super("UpdatePchProviderAction"),this.pchProvider=o,this.pchProviderId=t}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.pchProvider,!0)).addRule(new g.xF("Id","Id should be a CUID and not null",this.pchProviderId,!0))}performAction(){this.response=this.businessProvider.data.userUpdatePchProvider({pchProviderId:this.pchProviderId,input:this.pchProvider}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}let Ed=(()=>{class s extends W.nH{constructor(t,i,a){super("NotificationService.PchProviderBusinessProviderService",t,a),this.data=i}createPchProvider(t){const i=new cj(t);return i.Do(this),i.response}updatePchProvider(t,i){const a=new uj(t,i);return a.Do(this),a.response}importPchProviders(t){const i=new dj(t);return i.Do(this),i.response}validatePchProviderExcelData(t,i){const a=new rj(t,i);return a.Do(this),a.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(K.ed),e.LFG(z.q),e.LFG(W.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),mj=(()=>{class s extends W.nH{constructor(t,i,a){super("PchProviderService",a,t),this.businessProvider=i}createPchProvider(t){const i=Object.fromEntries(Object.entries(t).filter(([a,l])=>null!==l));return this.businessProvider.createPchProvider(i)}updatePchProvider(t,i){return this.businessProvider.updatePchProvider(t,i)}importPchProviders(t){return this.businessProvider.importPchProviders(t)}validatePchProviderExcelData(t,i){return this.businessProvider.validatePchProviderExcelData(t,i)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(Ed,8),e.LFG(Ed),e.LFG(K.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),Zo=(()=>{class s extends b.m1{constructor(t,i,a,l,d,ee){if(super({loading:!1,pchProviders:[],done:!1,searchQuery:"",formName:void 0,clinicalProviderId:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=a,this.toast=l,this.formService=d,this.pchProviderService=ee,this.errors$=this.select(u=>u.errors),this.loading$=this.select(u=>u.loading),this.done$=this.select(u=>u.done),this.item$=this.select(u=>u.item),this.pchProviders$=this.select(u=>u.pchProviders),this.clinicalProviders$=this.select(u=>u.clinicalProviders||[]),this.clinicalProviderId$=this.select(u=>u.clinicalProviderId),this.paging$=this.select(u=>u.paging),this.searchQuery$=this.select(u=>u.searchQuery),this.formName$=this.select(u=>u.formName),this.actionResult$=this.select(this.item$,this.done$,(u,n)=>({item:u,done:n}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.pchProviders$,this.clinicalProviders$,(u,n,r,m,p,v)=>({errors:u,loading:n,item:r,formName:m,pchProviders:p,clinicalProviders:v}),{debounce:!0}),this.input$=this.select(this.paging$,this.clinicalProviderId$,this.searchQuery$,(u,n,r)=>({limit:u.limit,skip:u.skip,name:r,clinicalProviderId:n,total:u.total})),this.setFormName=this.updater((u,n)=>Object.assign(Object.assign({},u),{formName:n})),this.setClinicalProviderId=this.updater((u,n)=>Object.assign(Object.assign({},u),{clinicalProviderId:n})),this.filterClinicalProviders=u=>this.data.userSelectClinicalProviders({input:{name:u}}).pipe((0,b._b)(n=>{let r=n.data.items;return this.patchState({clinicalProviders:r}),r},n=>this.patchState({errors:n.graphQLErrors?n.graphQLErrors:n})),(0,fe.U)(n=>n.data.items)),this.addClinicalProvider=this.updater((u,n)=>Object.assign(Object.assign({},u),{clinicalProviders:u.clinicalProviders.concat(n)})),this.setItem=this.updater((u,n)=>Object.assign(Object.assign({},u),{item:n})),this.addNewPchProvider=this.updater((u,n)=>Object.assign(Object.assign({},u),{pchProviders:[...u.pchProviders,n]})),this.updatePchProvider=this.updater((u,n)=>Object.assign(Object.assign({},u),{pchProviders:u.pchProviders.map(r=>r.id===n.id?n:r)})),this.addPchProviders=this.updater((u,n)=>Object.assign(Object.assign({},u),{pchProviders:u.pchProviders.concat(n)})),this.updatePchProviders=this.updater((u,n)=>Object.assign(Object.assign({},u),{pchProviders:u.pchProviders.map(r=>n.find(p=>p.id===r.id)||r)})),this.setSearchQuery=this.updater((u,n)=>Object.assign(Object.assign({},u),{searchQuery:n})),this.loadPchProviderEffect=this.effect(u=>u.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(n=>this.data.userPchProvider({pchProviderId:n}).pipe((0,b._b)(r=>{this.patchState({item:r.data.item,errors:r.errors,loading:!1})},r=>this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})))))),this.loadPchProvidersEffect=this.effect(u=>u.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.input$),(0,h.w)(([n,r])=>this.data.userPchProviders({input:r}).pipe((0,b._b)(m=>this.patchState({paging:{limit:r.limit,skip:r.skip,total:m.data.count.total},pchProviders:m.data.items,errors:m.errors,loading:!1}),m=>this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})))))),this.createPchProviderEffect=this.effect(u=>u.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(n=>this.pchProviderService.createPchProvider(Object.assign({},n)).pipe((0,b._b)(r=>{this.addNewPchProvider(r),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:r,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},r=>{r.graphQLErrors?(this.toast.error(r.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})):(this.toast.error(r.Message),this.formService.setErrors(r.Data))}))))),this.updatePchProviderEffect=this.effect(u=>u.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([n,r])=>this.pchProviderService.updatePchProvider(n,n.id).pipe((0,b._b)(m=>{this.updatePchProvider(m),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:m,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},m=>{m.graphQLErrors?(this.toast.error(m.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})):(this.toast.error(m.Message),this.formService.setErrors(m.Data))}))))),this.deletePchProviderEffect=this.effect(u=>u.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([n,r])=>this.data.userDeletePchProvider({pchProviderId:r.id}).pipe((0,b._b)(m=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:m.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},m=>{m.graphQLErrors?(this.toast.error(m.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})):(this.toast.error(m.Message),this.formService.setErrors(m.Data))}))))),this.importExcelEffect=this.effect(u=>u.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(n=>this.pchProviderService.importPchProviders(n).pipe((0,de.K)(r=>{var m;return this.toast.error(null!==(m=r.Message)&&void 0!==m?m:"Failed to save",{duration:3e3}),q.E}),(0,y.b)(r=>{const m=JSON.parse(r.created),p=JSON.parse(r.updated),v=JSON.parse(r.failed),I=m.length+p.length+v.length;this.addPchProviders(m),this.updatePchProviders(p),this.toast.success(`${m.length} created, ${p.length} updated, ${v.length} failed of total ${I}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("pchProviderId")?(this.route.snapshot.paramMap.get("pchProviderId"),this.setFormName("pchProvider_edit")):this.setFormName("pchProvider_create"),this.route.snapshot.paramMap.has("clinicalProviderId")){var c=this.route.snapshot.paramMap.get("clinicalProviderId");this.setClinicalProviderId(c)}}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.pchProviderService.validatePchProviderExcelData(t,i.clinicalProviders)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(z.q),e.LFG(O.F0),e.LFG(O.gz),e.LFG(X.F),e.LFG(Z.o),e.LFG(mj))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function pj(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.close.emit())})("formIsReady",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.pchProvider)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let Od=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"pchProvider_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.pchProvider=i.item})):t.formName&&t.formName.currentValue&&"pchProvider_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadPchProviderEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.pchProvider=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Zo),e.Y36(O.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-pch-provider-form"]],inputs:{pchProvider:"pchProvider",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,pj,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[P.O5,te.M,P.Ov],encapsulation:2}),s})(),Ld=(()=>{class s{constructor(){this.autoHeight=!1,this.pchProviders=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[{field:"clinicalProvider.name",headerName:"Clinical Provider",filter:"agTextColumnFilter"},{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{field:"clinicalProviderId",filter:"agTextColumnFilter",hide:!0}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var a;t.includes(null===(a=i.data)||void 0===a?void 0:a.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-pch-provider-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(f.x,5),2&t){let a;e.iGM(a=e.CRH())&&(i.tableView=a.first)}},inputs:{autoHeight:"autoHeight",pchProviders:"pchProviders"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.pchProviders)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[f.x],encapsulation:2}),s})();function hj(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-pch-provider-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","pchProvider_edit")("formControl",t.formControl)("pchProvider",t.pchProvider)}}const fj=function(){return{}};function _j(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-pch-provider-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","pchProvider_create")("formControl",t.formControl)("pchProvider",e.DdM(3,fj))}}function gj(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-pch-provider-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(d.ref.close())}),e.qZA()}2&s&&e.Q6J("pchProviders",o.data.items)}let vj=(()=>{class s extends G.fS{constructor(t){super(),this.store=t,this.store.loadPchProvidersEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.pchProviders$.pipe((0,h.w)(i=>(0,D.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Zo))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","pchProvider","send","close"],[1,"w-full","h-full","bg-white",3,"pchProviders","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,hj,2,3,"ng-template",null,1,e.W1O),e.YNc(3,_j,1,4,"ng-template",null,2,e.W1O),e.YNc(5,gj,1,1,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",d)("editTemplate",a)("createTemplate",l)("key",i.field.key)}},dependencies:[E.JJ,E.oH,H.$,Od,Ld],encapsulation:2}),s})();function Cj(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-pch-provider-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","pchProvider_edit")("pchProvider",t.value)}}const Sj=function(){return{}};function bj(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-pch-provider-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","pchProvider_create")("pchProvider",e.DdM(2,Sj))}function Tj(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-pch-provider-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(null==d.ref?null:d.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("pchProviders",t.items)}}let yj=(()=>{class s extends pe{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","pchProvider","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","pchProviders","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,Cj,1,2,"ng-template",null,1,e.W1O),e.YNc(3,bj,1,3,"ng-template",null,2,e.W1O),e.YNc(5,Tj,1,2,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[he,Od,Ld],encapsulation:2}),s})(),wj=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[Zo],imports:[P.ez,U.F,E.UX,J.o,ae.u,$.P,j.t,me,k.h,se.G,G.X0.forChild({types:[{name:"pch-provider-select",component:vj,wrappers:["form-field"]},{name:"pch-provider-grid",component:yj}]})]}),s})(),xj=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[wj]}),s})();class Wi extends W.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class Nj extends Wi{constructor(o){super("ValidatePlaceOfServiceExcelDataAction"),this.valid=!1,this.excelData=o}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name)}),this.validationContext.addRule(new g.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof g.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(a=>a.name),newNames:[i.newName]}):i instanceof g.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,D.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class Aj extends g.wS{constructor(o,t,i,a,l){super(o,t,i,a,l,!0)}}class Fj extends g.ul{constructor(o,t,i,a=!1){super(o,t,a),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new g.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new Aj("name","The placeofservice name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class Pj extends Wi{constructor(o){super("CreatePlaceOfServiceAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new Fj("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreatePlaceOfService({input:this.input}).pipe((0,h.w)(o=>(0,ue.of)(o.data.created)))}}class Ij extends Wi{constructor(o){super("UpdatePlaceOfServicesAction"),this.placeOfServices=o}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.placeOfServices,!0))}performAction(){this.response=this.businessProvider.data.userUpdatePlaceOfServices({input:{placeOfServices:this.placeOfServices}}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}class Dj extends Wi{constructor(o,t){super("UpdatePlaceOfServiceAction"),this.placeOfService=o,this.placeOfServiceId=t}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.placeOfService,!0)).addRule(new g.xF("Id","Id should be a CUID and not null",this.placeOfServiceId,!0))}performAction(){this.response=this.businessProvider.data.userUpdatePlaceOfService({placeOfServiceId:this.placeOfServiceId,input:this.placeOfService}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}let $d=(()=>{class s extends W.nH{constructor(t,i,a){super("NotificationService.PlaceOfServiceBusinessProviderService",t,a),this.data=i}createPlaceOfService(t){const i=new Pj(t);return i.Do(this),i.response}updatePlaceOfService(t,i){const a=new Dj(t,i);return a.Do(this),a.response}importPlaceOfServices(t){const i=new Ij(t);return i.Do(this),i.response}validatePlaceOfServiceExcelData(t){const i=new Nj(t);return i.Do(this),i.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(K.ed),e.LFG(z.q),e.LFG(W.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),Mj=(()=>{class s extends W.nH{constructor(t,i,a){super("PlaceOfServiceService",a,t),this.businessProvider=i}createPlaceOfService(t){const i=Object.fromEntries(Object.entries(t).filter(([a,l])=>null!==l));return this.businessProvider.createPlaceOfService(i)}updatePlaceOfService(t,i){return this.businessProvider.updatePlaceOfService(t,i)}importPlaceOfServices(t){return this.businessProvider.importPlaceOfServices(t)}validatePlaceOfServiceExcelData(t){return this.businessProvider.validatePlaceOfServiceExcelData(t)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG($d,8),e.LFG($d),e.LFG(K.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),Bo=(()=>{class s extends b.m1{constructor(t,i,a,l,d,ee){super({loading:!1,placeOfServices:[],done:!1,searchQuery:"",formName:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=a,this.toast=l,this.formService=d,this.placeOfServiceService=ee,this.errors$=this.select(c=>c.errors),this.loading$=this.select(c=>c.loading),this.done$=this.select(c=>c.done),this.item$=this.select(c=>c.item),this.placeOfServices$=this.select(c=>c.placeOfServices),this.paging$=this.select(c=>c.paging),this.searchQuery$=this.select(c=>c.searchQuery),this.formName$=this.select(c=>c.formName),this.actionResult$=this.select(this.item$,this.done$,(c,u)=>({item:c,done:u}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.placeOfServices$,(c,u,n,r,m)=>({errors:c,loading:u,item:n,formName:r,placeOfServices:m}),{debounce:!0}),this.input$=this.select(this.paging$,this.searchQuery$,(c,u)=>({limit:c.limit,skip:c.skip,name:u,total:c.total})),this.setFormName=this.updater((c,u)=>Object.assign(Object.assign({},c),{formName:u})),this.setItem=this.updater((c,u)=>Object.assign(Object.assign({},c),{item:u})),this.addNewPlaceOfService=this.updater((c,u)=>Object.assign(Object.assign({},c),{placeOfServices:[...c.placeOfServices,u]})),this.updatePlaceOfService=this.updater((c,u)=>Object.assign(Object.assign({},c),{placeOfServices:c.placeOfServices.map(n=>n.id===u.id?u:n)})),this.addPlaceOfServices=this.updater((c,u)=>Object.assign(Object.assign({},c),{placeOfServices:c.placeOfServices.concat(u)})),this.updatePlaceOfServices=this.updater((c,u)=>Object.assign(Object.assign({},c),{placeOfServices:c.placeOfServices.map(n=>u.find(m=>m.id===n.id)||n)})),this.setSearchQuery=this.updater((c,u)=>Object.assign(Object.assign({},c),{searchQuery:u})),this.loadPlaceOfServiceEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.data.userPlaceOfService({placeOfServiceId:u}).pipe((0,b._b)(n=>{this.patchState({item:n.data.item,errors:n.errors,loading:!1})},n=>this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})))))),this.loadPlaceOfServicesEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.input$),(0,h.w)(([u,n])=>this.data.userPlaceOfServices({input:n}).pipe((0,b._b)(r=>this.patchState({paging:{limit:n.limit,skip:n.skip,total:r.data.count.total},placeOfServices:r.data.items,errors:r.errors,loading:!1}),r=>this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})))))),this.createPlaceOfServiceEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.placeOfServiceService.createPlaceOfService(Object.assign({},u)).pipe((0,b._b)(n=>{this.addNewPlaceOfService(n),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:n,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},n=>{n.graphQLErrors?(this.toast.error(n.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})):(this.toast.error(n.Message),this.formService.setErrors(n.Data))}))))),this.updatePlaceOfServiceEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([u,n])=>this.placeOfServiceService.updatePlaceOfService(u,u.id).pipe((0,b._b)(r=>{this.updatePlaceOfService(r),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:r,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},r=>{r.graphQLErrors?(this.toast.error(r.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})):(this.toast.error(r.Message),this.formService.setErrors(r.Data))}))))),this.deletePlaceOfServiceEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([u,n])=>this.data.userDeletePlaceOfService({placeOfServiceId:n.id}).pipe((0,b._b)(r=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:r.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},r=>{r.graphQLErrors?(this.toast.error(r.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})):(this.toast.error(r.Message),this.formService.setErrors(r.Data))}))))),this.importExcelEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.placeOfServiceService.importPlaceOfServices(u).pipe((0,de.K)(n=>{var r;return this.toast.error(null!==(r=n.Message)&&void 0!==r?r:"Failed to save",{duration:3e3}),q.E}),(0,y.b)(n=>{const r=JSON.parse(n.created),m=JSON.parse(n.updated),p=JSON.parse(n.failed),v=r.length+m.length+p.length;this.addPlaceOfServices(r),this.updatePlaceOfServices(m),this.toast.success(`${r.length} created, ${m.length} updated, ${p.length} failed of total ${v}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("placeOfServiceId")?(this.route.snapshot.paramMap.get("placeOfServiceId"),this.setFormName("placeOfService_edit")):this.setFormName("placeOfService_create")}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.placeOfServiceService.validatePlaceOfServiceExcelData(t)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(z.q),e.LFG(O.F0),e.LFG(O.gz),e.LFG(X.F),e.LFG(Z.o),e.LFG(Mj))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function Wj(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.close.emit())})("formIsReady",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.placeOfService)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let Gd=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"placeOfService_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({id:null,name:""}),this.store.vm$.subscribe(i=>{this.placeOfService=i.item})):t.formName&&t.formName.currentValue&&"placeOfService_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadPlaceOfServiceEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.placeOfService=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Bo),e.Y36(O.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-place-of-service-form"]],inputs:{placeOfService:"placeOfService",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,Wj,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[P.O5,te.M,P.Ov],encapsulation:2}),s})(),Rd=(()=>{class s{constructor(){this.autoHeight=!1,this.placeOfServices=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[,{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{headerName:"Is Facility",field:"isFacility",filter:"agSetColumnFilter",cellRenderer:"checkboxRenderer"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var a;t.includes(null===(a=i.data)||void 0===a?void 0:a.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-place-of-service-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(f.x,5),2&t){let a;e.iGM(a=e.CRH())&&(i.tableView=a.first)}},inputs:{autoHeight:"autoHeight",placeOfServices:"placeOfServices"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.placeOfServices)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[f.x],encapsulation:2}),s})();function Ej(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-place-of-service-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","placeOfService_edit")("formControl",t.formControl)("placeOfService",t.placeOfService)}}const Oj=function(){return{}};function Lj(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-place-of-service-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","placeOfService_create")("formControl",t.formControl)("placeOfService",e.DdM(3,Oj))}}function $j(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-place-of-service-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(d.ref.close())}),e.qZA()}2&s&&e.Q6J("placeOfServices",o.data.items)}let Gj=(()=>{class s extends G.fS{constructor(t){super(),this.store=t,this.store.loadPlaceOfServicesEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.placeOfServices$.pipe((0,h.w)(i=>(0,D.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Bo))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","placeOfService","send","close"],[1,"w-full","h-full","bg-white",3,"placeOfServices","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,Ej,2,3,"ng-template",null,1,e.W1O),e.YNc(3,Lj,1,4,"ng-template",null,2,e.W1O),e.YNc(5,$j,1,1,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",d)("editTemplate",a)("createTemplate",l)("key",i.field.key)}},dependencies:[E.JJ,E.oH,H.$,Gd,Rd],encapsulation:2}),s})();function Rj(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-place-of-service-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","placeOfService_edit")("placeOfService",t.value)}}const Qj=function(){return{}};function Vj(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-place-of-service-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","placeOfService_create")("placeOfService",e.DdM(2,Qj))}function jj(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-place-of-service-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(null==d.ref?null:d.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("placeOfServices",t.items)}}let Uj=(()=>{class s extends pe{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","placeOfService","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","placeOfServices","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,Rj,1,2,"ng-template",null,1,e.W1O),e.YNc(3,Vj,1,3,"ng-template",null,2,e.W1O),e.YNc(5,jj,1,2,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[he,Gd,Rd],encapsulation:2}),s})(),Jj=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[Bo],imports:[P.ez,U.F,E.UX,J.o,ae.u,$.P,j.t,me,k.h,se.G,G.X0.forChild({types:[{name:"place-of-service-select",component:Gj,wrappers:["form-field"]},{name:"place-of-service-grid",component:Uj}]})]}),s})(),zj=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[Jj]}),s})();class Ei extends W.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class Hj extends Ei{constructor(o){super("ValidatePortfolioExcelDataAction"),this.valid=!1,this.excelData=o}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name)}),this.validationContext.addRule(new g.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof g.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(a=>a.name),newNames:[i.newName]}):i instanceof g.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,D.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class qj extends g.wS{constructor(o,t,i,a,l){super(o,t,i,a,l,!0)}}class Kj extends g.ul{constructor(o,t,i,a=!1){super(o,t,a),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new g.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new qj("name","The portfolio name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class Zj extends Ei{constructor(o){super("CreatePortfolioAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new Kj("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreatePortfolio({input:this.input}).pipe((0,h.w)(o=>(0,ue.of)(o.data.created)))}}class Bj extends Ei{constructor(o){super("UpdatePortfoliosAction"),this.portfolios=o}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.portfolios,!0))}performAction(){this.response=this.businessProvider.data.userUpdatePortfolios({input:{portfolios:this.portfolios}}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}class kj extends Ei{constructor(o,t){super("UpdatePortfolioAction"),this.portfolio=o,this.portfolioId=t}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.portfolio,!0)).addRule(new g.xF("Id","Id should be a CUID and not null",this.portfolioId,!0))}performAction(){this.response=this.businessProvider.data.userUpdatePortfolio({portfolioId:this.portfolioId,input:this.portfolio}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}let Qd=(()=>{class s extends W.nH{constructor(t,i,a){super("NotificationService.PortfolioBusinessProviderService",t,a),this.data=i}createPortfolio(t){const i=new Zj(t);return i.Do(this),i.response}updatePortfolio(t,i){const a=new kj(t,i);return a.Do(this),a.response}importPortfolios(t){const i=new Bj(t);return i.Do(this),i.response}validatePortfolioExcelData(t){const i=new Hj(t);return i.Do(this),i.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(K.ed),e.LFG(z.q),e.LFG(W.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),Yj=(()=>{class s extends W.nH{constructor(t,i,a){super("PortfolioService",a,t),this.businessProvider=i}createPortfolio(t){const i=Object.fromEntries(Object.entries(t).filter(([a,l])=>null!==l));return this.businessProvider.createPortfolio(i)}updatePortfolio(t,i){return this.businessProvider.updatePortfolio(t,i)}importPortfolios(t){return this.businessProvider.importPortfolios(t)}validatePortfolioExcelData(t){return this.businessProvider.validatePortfolioExcelData(t)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(Qd,8),e.LFG(Qd),e.LFG(K.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),ko=(()=>{class s extends b.m1{constructor(t,i,a,l,d,ee){super({loading:!1,portfolios:[],done:!1,searchQuery:"",formName:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=a,this.toast=l,this.formService=d,this.portfolioService=ee,this.errors$=this.select(c=>c.errors),this.loading$=this.select(c=>c.loading),this.done$=this.select(c=>c.done),this.item$=this.select(c=>c.item),this.portfolios$=this.select(c=>c.portfolios),this.paging$=this.select(c=>c.paging),this.searchQuery$=this.select(c=>c.searchQuery),this.formName$=this.select(c=>c.formName),this.actionResult$=this.select(this.item$,this.done$,(c,u)=>({item:c,done:u}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.portfolios$,(c,u,n,r,m)=>({errors:c,loading:u,item:n,formName:r,portfolios:m}),{debounce:!0}),this.input$=this.select(this.paging$,this.searchQuery$,(c,u)=>({limit:c.limit,skip:c.skip,name:u,total:c.total})),this.setFormName=this.updater((c,u)=>Object.assign(Object.assign({},c),{formName:u})),this.setItem=this.updater((c,u)=>Object.assign(Object.assign({},c),{item:u})),this.addNewPortfolio=this.updater((c,u)=>Object.assign(Object.assign({},c),{portfolios:[...c.portfolios,u]})),this.updatePortfolio=this.updater((c,u)=>Object.assign(Object.assign({},c),{portfolios:c.portfolios.map(n=>n.id===u.id?u:n)})),this.addPortfolios=this.updater((c,u)=>Object.assign(Object.assign({},c),{portfolios:c.portfolios.concat(u)})),this.updatePortfolios=this.updater((c,u)=>Object.assign(Object.assign({},c),{portfolios:c.portfolios.map(n=>u.find(m=>m.id===n.id)||n)})),this.setSearchQuery=this.updater((c,u)=>Object.assign(Object.assign({},c),{searchQuery:u})),this.loadPortfolioEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.data.userPortfolio({portfolioId:u}).pipe((0,b._b)(n=>{this.patchState({item:n.data.item,errors:n.errors,loading:!1})},n=>this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})))))),this.loadPortfoliosEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.input$),(0,h.w)(([u,n])=>this.data.userPortfolios({input:n}).pipe((0,b._b)(r=>this.patchState({paging:{limit:n.limit,skip:n.skip,total:r.data.count.total},portfolios:r.data.items,errors:r.errors,loading:!1}),r=>this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})))))),this.createPortfolioEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.portfolioService.createPortfolio(Object.assign({},u)).pipe((0,b._b)(n=>{this.addNewPortfolio(n),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:n,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},n=>{n.graphQLErrors?(this.toast.error(n.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})):(this.toast.error(n.Message),this.formService.setErrors(n.Data))}))))),this.updatePortfolioEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([u,n])=>this.portfolioService.updatePortfolio(u,u.id).pipe((0,b._b)(r=>{this.updatePortfolio(r),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:r,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},r=>{r.graphQLErrors?(this.toast.error(r.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})):(this.toast.error(r.Message),this.formService.setErrors(r.Data))}))))),this.deletePortfolioEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([u,n])=>this.data.userDeletePortfolio({portfolioId:n.id}).pipe((0,b._b)(r=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:r.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},r=>{r.graphQLErrors?(this.toast.error(r.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})):(this.toast.error(r.Message),this.formService.setErrors(r.Data))}))))),this.importExcelEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.portfolioService.importPortfolios(u).pipe((0,de.K)(n=>{var r;return this.toast.error(null!==(r=n.Message)&&void 0!==r?r:"Failed to save",{duration:3e3}),q.E}),(0,y.b)(n=>{const r=JSON.parse(n.created),m=JSON.parse(n.updated),p=JSON.parse(n.failed),v=r.length+m.length+p.length;this.addPortfolios(r),this.updatePortfolios(m),this.toast.success(`${r.length} created, ${m.length} updated, ${p.length} failed of total ${v}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("portfolioId")?(this.route.snapshot.paramMap.get("portfolioId"),this.setFormName("portfolio_edit")):this.setFormName("portfolio_create")}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.portfolioService.validatePortfolioExcelData(t)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(z.q),e.LFG(O.F0),e.LFG(O.gz),e.LFG(X.F),e.LFG(Z.o),e.LFG(Yj))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function Xj(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.close.emit())})("formIsReady",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.portfolio)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let Vd=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"portfolio_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.portfolio=i.item})):t.formName&&t.formName.currentValue&&"portfolio_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadPortfolioEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.portfolio=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(ko),e.Y36(O.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-portfolio-form"]],inputs:{portfolio:"portfolio",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,Xj,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[P.O5,te.M,P.Ov],encapsulation:2}),s})(),jd=(()=>{class s{constructor(){this.autoHeight=!1,this.portfolios=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[,{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var a;t.includes(null===(a=i.data)||void 0===a?void 0:a.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-portfolio-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(f.x,5),2&t){let a;e.iGM(a=e.CRH())&&(i.tableView=a.first)}},inputs:{autoHeight:"autoHeight",portfolios:"portfolios"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.portfolios)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[f.x],encapsulation:2}),s})();function eU(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-portfolio-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","portfolio_edit")("formControl",t.formControl)("portfolio",t.portfolio)}}const tU=function(){return{}};function iU(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-portfolio-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","portfolio_create")("formControl",t.formControl)("portfolio",e.DdM(3,tU))}}function sU(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-portfolio-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(d.ref.close())}),e.qZA()}2&s&&e.Q6J("portfolios",o.data.items)}let oU=(()=>{class s extends G.fS{constructor(t){super(),this.store=t,this.store.loadPortfoliosEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.portfolios$.pipe((0,h.w)(i=>(0,D.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(ko))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","portfolio","send","close"],[1,"w-full","h-full","bg-white",3,"portfolios","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,eU,2,3,"ng-template",null,1,e.W1O),e.YNc(3,iU,1,4,"ng-template",null,2,e.W1O),e.YNc(5,sU,1,1,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",d)("editTemplate",a)("createTemplate",l)("key",i.field.key)}},dependencies:[E.JJ,E.oH,H.$,Vd,jd],encapsulation:2}),s})();function aU(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-portfolio-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","portfolio_edit")("portfolio",t.value)}}const rU=function(){return{}};function nU(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-portfolio-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","portfolio_create")("portfolio",e.DdM(2,rU))}function lU(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-portfolio-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(null==d.ref?null:d.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("portfolios",t.items)}}let cU=(()=>{class s extends pe{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","portfolio","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","portfolios","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,aU,1,2,"ng-template",null,1,e.W1O),e.YNc(3,nU,1,3,"ng-template",null,2,e.W1O),e.YNc(5,lU,1,2,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[he,Vd,jd],encapsulation:2}),s})(),dU=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[ko],imports:[P.ez,U.F,E.UX,J.o,ae.u,$.P,j.t,me,k.h,se.G,G.X0.forChild({types:[{name:"portfolio-select",component:oU,wrappers:["form-field"]},{name:"portfolio-grid",component:cU}]})]}),s})(),uU=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[dU]}),s})();var Yo=M(96236);function mU(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.close.emit())})("formIsReady",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.prescription)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let Ud=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"prescription_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.prescription=i.item})):t.formName&&t.formName.currentValue&&"prescription_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadPrescriptionEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.prescription=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Yo.r),e.Y36(O.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-prescription-form"]],inputs:{prescription:"prescription",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,mU,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[P.O5,te.M,P.Ov],encapsulation:2}),s})(),Jd=(()=>{class s{constructor(){this.autoHeight=!1,this.prescriptions=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[{field:"patient.name",headerName:"Patient",filter:"agTextColumnFilter"},{field:"document.name",headerName:"Document",filter:"agTextColumnFilter"},{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{field:"medicalProvider",filter:"agTextColumnFilter"},{field:"dateWritten",filter:"agDateColumnFilter"},{field:"days",filter:"agTextColumnFilter"},{field:"note",filter:"agTextColumnFilter"},{field:"category",filter:"agTextColumnFilter"},{field:"kind",filter:"agTextColumnFilter"},{headerName:"Quantity",field:"quantity",valueFormatter:t=>{var i;return(0,_.oBD)(null===(i=t.data)||void 0===i?void 0:i.quantity,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{field:"refills",filter:"agTextColumnFilter"},{field:"rxNumber",filter:"agTextColumnFilter"},{field:"sig",filter:"agTextColumnFilter"},{field:"strength",filter:"agTextColumnFilter"},{field:"unit",filter:"agTextColumnFilter"},{field:"patientId",filter:"agTextColumnFilter",hide:!0},{field:"documentId",filter:"agTextColumnFilter",hide:!0}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var a;t.includes(null===(a=i.data)||void 0===a?void 0:a.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-prescription-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(f.x,5),2&t){let a;e.iGM(a=e.CRH())&&(i.tableView=a.first)}},inputs:{autoHeight:"autoHeight",prescriptions:"prescriptions"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.prescriptions)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[f.x],encapsulation:2}),s})();function pU(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-prescription-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","prescription_edit")("formControl",t.formControl)("prescription",t.prescription)}}const hU=function(){return{}};function fU(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-prescription-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","prescription_create")("formControl",t.formControl)("prescription",e.DdM(3,hU))}}function _U(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-prescription-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(d.ref.close())}),e.qZA()}2&s&&e.Q6J("prescriptions",o.data.items)}let gU=(()=>{class s extends G.fS{constructor(t){super(),this.store=t,this.store.loadPrescriptionsEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.prescriptions$.pipe((0,h.w)(i=>(0,D.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Yo.r))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","prescription","send","close"],[1,"w-full","h-full","bg-white",3,"prescriptions","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,pU,2,3,"ng-template",null,1,e.W1O),e.YNc(3,fU,1,4,"ng-template",null,2,e.W1O),e.YNc(5,_U,1,1,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",d)("editTemplate",a)("createTemplate",l)("key",i.field.key)}},dependencies:[E.JJ,E.oH,H.$,Ud,Jd],encapsulation:2}),s})();function vU(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-prescription-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","prescription_edit")("prescription",t.value)}}const CU=function(){return{}};function SU(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-prescription-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","prescription_create")("prescription",e.DdM(2,CU))}function bU(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-prescription-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(null==d.ref?null:d.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("prescriptions",t.items)}}let TU=(()=>{class s extends pe{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","prescription","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","prescriptions","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,vU,1,2,"ng-template",null,1,e.W1O),e.YNc(3,SU,1,3,"ng-template",null,2,e.W1O),e.YNc(5,bU,1,2,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[he,Ud,Jd],encapsulation:2}),s})(),yU=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[Yo.r],imports:[P.ez,U.F,E.UX,J.o,ae.u,$.P,j.t,me,k.h,se.G,G.X0.forChild({types:[{name:"prescription-select",component:gU,wrappers:["form-field"]},{name:"prescription-grid",component:TU}]})]}),s})(),wU=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[yU]}),s})();class Oi extends W.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class xU extends Oi{constructor(o,t,i){super("ValidatePriorAuthDmeExcelDataAction"),this.valid=!1,this.excelData=o,this.priorAuthorizationRequests=t,this.durableMedicalEquipments=i}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name),this.validationContext.addRule(new g.mi(`priorAuthorizationRequestName_${i}_is_valid}`,"Prior Authorization Request Is Not Valid","priorAuthorizationRequest.name",t.priorAuthorizationRequest,this.priorAuthorizationRequests,!0)),this.validationContext.addRule(new g.mi(`durableMedicalEquipmentName_${i}_is_valid}`,"Durable Medical Equipment Is Not Valid","durableMedicalEquipment.name",t.durableMedicalEquipment,this.durableMedicalEquipments,!0))}),this.validationContext.addRule(new g.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof g.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(a=>a.name),newNames:[i.newName]}):i instanceof g.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,D.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class NU extends g.wS{constructor(o,t,i,a,l){super(o,t,i,a,l,!0)}}class AU extends g.ul{constructor(o,t,i,a=!1){super(o,t,a),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new g.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new NU("name","The priorauthdme name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class FU extends Oi{constructor(o){super("CreatePriorAuthDmeAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new AU("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreatePriorAuthDme({input:this.input}).pipe((0,h.w)(o=>(0,ue.of)(o.data.created)))}}class PU extends Oi{constructor(o){super("UpdatePriorAuthDmesAction"),this.priorAuthDmes=o}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.priorAuthDmes,!0))}performAction(){this.response=this.businessProvider.data.userUpdatePriorAuthDmes({input:{priorAuthDmes:this.priorAuthDmes}}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}class IU extends Oi{constructor(o,t){super("UpdatePriorAuthDmeAction"),this.priorAuthDme=o,this.priorAuthDmeId=t}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.priorAuthDme,!0)).addRule(new g.xF("Id","Id should be a CUID and not null",this.priorAuthDmeId,!0))}performAction(){this.response=this.businessProvider.data.userUpdatePriorAuthDme({priorAuthDmeId:this.priorAuthDmeId,input:this.priorAuthDme}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}let zd=(()=>{class s extends W.nH{constructor(t,i,a){super("NotificationService.PriorAuthDmeBusinessProviderService",t,a),this.data=i}createPriorAuthDme(t){const i=new FU(t);return i.Do(this),i.response}updatePriorAuthDme(t,i){const a=new IU(t,i);return a.Do(this),a.response}importPriorAuthDmes(t){const i=new PU(t);return i.Do(this),i.response}validatePriorAuthDmeExcelData(t,i,a){const l=new xU(t,i,a);return l.Do(this),l.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(K.ed),e.LFG(z.q),e.LFG(W.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),DU=(()=>{class s extends W.nH{constructor(t,i,a){super("PriorAuthDmeService",a,t),this.businessProvider=i}createPriorAuthDme(t){const i=Object.fromEntries(Object.entries(t).filter(([a,l])=>null!==l));return this.businessProvider.createPriorAuthDme(i)}updatePriorAuthDme(t,i){return this.businessProvider.updatePriorAuthDme(t,i)}importPriorAuthDmes(t){return this.businessProvider.importPriorAuthDmes(t)}validatePriorAuthDmeExcelData(t,i,a){return this.businessProvider.validatePriorAuthDmeExcelData(t,i,a)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(zd,8),e.LFG(zd),e.LFG(K.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),Xo=(()=>{class s extends b.m1{constructor(t,i,a,l,d,ee){if(super({loading:!1,priorAuthDmes:[],done:!1,searchQuery:"",formName:void 0,priorAuthId:void 0,durableMedicalEquipmentId:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=a,this.toast=l,this.formService=d,this.priorAuthDmeService=ee,this.errors$=this.select(n=>n.errors),this.loading$=this.select(n=>n.loading),this.done$=this.select(n=>n.done),this.item$=this.select(n=>n.item),this.priorAuthDmes$=this.select(n=>n.priorAuthDmes),this.priorAuthorizationRequests$=this.select(n=>n.priorAuthorizationRequests||[]),this.durableMedicalEquipments$=this.select(n=>n.durableMedicalEquipments||[]),this.priorAuthId$=this.select(n=>n.priorAuthId),this.durableMedicalEquipmentId$=this.select(n=>n.durableMedicalEquipmentId),this.paging$=this.select(n=>n.paging),this.searchQuery$=this.select(n=>n.searchQuery),this.formName$=this.select(n=>n.formName),this.actionResult$=this.select(this.item$,this.done$,(n,r)=>({item:n,done:r}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.priorAuthDmes$,this.priorAuthorizationRequests$,this.durableMedicalEquipments$,(n,r,m,p,v,I,B)=>({errors:n,loading:r,item:m,formName:p,priorAuthDmes:v,priorAuthorizationRequests:I,durableMedicalEquipments:B}),{debounce:!0}),this.input$=this.select(this.paging$,this.priorAuthId$,this.durableMedicalEquipmentId$,this.searchQuery$,(n,r,m,p)=>({limit:n.limit,skip:n.skip,name:p,priorAuthId:r,durableMedicalEquipmentId:m,total:n.total})),this.setFormName=this.updater((n,r)=>Object.assign(Object.assign({},n),{formName:r})),this.setPriorAuthId=this.updater((n,r)=>Object.assign(Object.assign({},n),{priorAuthId:r})),this.setDurableMedicalEquipmentId=this.updater((n,r)=>Object.assign(Object.assign({},n),{durableMedicalEquipmentId:r})),this.filterPriorAuthorizationRequests=n=>this.data.userSelectPriorAuthorizationRequests({input:{name:n}}).pipe((0,b._b)(r=>{let m=r.data.items;return this.patchState({priorAuthorizationRequests:m}),m},r=>this.patchState({errors:r.graphQLErrors?r.graphQLErrors:r})),(0,fe.U)(r=>r.data.items)),this.filterDurableMedicalEquipments=n=>this.data.userSelectDurableMedicalEquipments({input:{name:n}}).pipe((0,b._b)(r=>{let m=r.data.items;return this.patchState({durableMedicalEquipments:m}),m},r=>this.patchState({errors:r.graphQLErrors?r.graphQLErrors:r})),(0,fe.U)(r=>r.data.items)),this.addPriorAuthorizationRequest=this.updater((n,r)=>Object.assign(Object.assign({},n),{priorAuthorizationRequests:n.priorAuthorizationRequests.concat(r)})),this.addDurableMedicalEquipment=this.updater((n,r)=>Object.assign(Object.assign({},n),{durableMedicalEquipments:n.durableMedicalEquipments.concat(r)})),this.setItem=this.updater((n,r)=>Object.assign(Object.assign({},n),{item:r})),this.addNewPriorAuthDme=this.updater((n,r)=>Object.assign(Object.assign({},n),{priorAuthDmes:[...n.priorAuthDmes,r]})),this.updatePriorAuthDme=this.updater((n,r)=>Object.assign(Object.assign({},n),{priorAuthDmes:n.priorAuthDmes.map(m=>m.id===r.id?r:m)})),this.addPriorAuthDmes=this.updater((n,r)=>Object.assign(Object.assign({},n),{priorAuthDmes:n.priorAuthDmes.concat(r)})),this.updatePriorAuthDmes=this.updater((n,r)=>Object.assign(Object.assign({},n),{priorAuthDmes:n.priorAuthDmes.map(m=>r.find(v=>v.id===m.id)||m)})),this.setSearchQuery=this.updater((n,r)=>Object.assign(Object.assign({},n),{searchQuery:r})),this.loadPriorAuthDmeEffect=this.effect(n=>n.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(r=>this.data.userPriorAuthDme({priorAuthDmeId:r}).pipe((0,b._b)(m=>{this.patchState({item:m.data.item,errors:m.errors,loading:!1})},m=>this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})))))),this.loadPriorAuthDmesEffect=this.effect(n=>n.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.input$),(0,h.w)(([r,m])=>this.data.userPriorAuthDmes({input:m}).pipe((0,b._b)(p=>(console.log("$$$$$$$$$$$$$$$$$$$$$$"),console.log(p.data.items),this.patchState({paging:{limit:m.limit,skip:m.skip,total:p.data.count.total},priorAuthDmes:p.data.items,errors:p.errors,loading:!1})),p=>this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})))))),this.createPriorAuthDmeEffect=this.effect(n=>n.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(r=>{const m=Object.fromEntries(Object.entries(r).filter(([p,v])=>null!==v));return this.priorAuthDmeService.createPriorAuthDme(m).pipe((0,b._b)(p=>{this.addNewPriorAuthDme(p),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:p,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},p=>{p.graphQLErrors?(this.toast.error(p.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})):(this.toast.error(p.Message),this.formService.setErrors(p.Data))}))}))),this.updatePriorAuthDmeEffect=this.effect(n=>n.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([r,m])=>this.priorAuthDmeService.updatePriorAuthDme(r,r.id).pipe((0,b._b)(p=>{this.updatePriorAuthDme(p),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:p,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},p=>{p.graphQLErrors?(this.toast.error(p.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})):(this.toast.error(p.Message),this.formService.setErrors(p.Data))}))))),this.deletePriorAuthDmeEffect=this.effect(n=>n.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([r,m])=>this.data.userDeletePriorAuthDme({priorAuthDmeId:m.id}).pipe((0,b._b)(p=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:p.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},p=>{p.graphQLErrors?(this.toast.error(p.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})):(this.toast.error(p.Message),this.formService.setErrors(p.Data))}))))),this.importExcelEffect=this.effect(n=>n.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(r=>this.priorAuthDmeService.importPriorAuthDmes(r).pipe((0,de.K)(m=>{var p;return this.toast.error(null!==(p=m.Message)&&void 0!==p?p:"Failed to save",{duration:3e3}),q.E}),(0,y.b)(m=>{const p=JSON.parse(m.created),v=JSON.parse(m.updated),I=JSON.parse(m.failed),B=p.length+v.length+I.length;this.addPriorAuthDmes(p),this.updatePriorAuthDmes(v),this.toast.success(`${p.length} created, ${v.length} updated, ${I.length} failed of total ${B}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("priorAuthDmeId")?(this.route.snapshot.paramMap.get("priorAuthDmeId"),this.setFormName("priorAuthDme_edit")):this.setFormName("priorAuthDme_create"),this.route.snapshot.paramMap.has("priorAuthId")){var c=this.route.snapshot.paramMap.get("priorAuthId");this.setPriorAuthId(c)}if(this.route.snapshot.paramMap.has("durableMedicalEquipmentId")){var u=this.route.snapshot.paramMap.get("durableMedicalEquipmentId");this.setDurableMedicalEquipmentId(u)}}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.priorAuthDmeService.validatePriorAuthDmeExcelData(t,i.priorAuthorizationRequests,i.durableMedicalEquipments)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(z.q),e.LFG(O.F0),e.LFG(O.gz),e.LFG(X.F),e.LFG(Z.o),e.LFG(DU))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function MU(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.close.emit())})("formIsReady",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.priorAuthDme)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let Hd=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"priorAuthDme_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({id:null,name:""}),this.store.vm$.subscribe(i=>{this.priorAuthDme=i.item})):t.formName&&t.formName.currentValue&&"priorAuthDme_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadPriorAuthDmeEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.priorAuthDme=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Xo),e.Y36(O.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-prior-auth-dme-form"]],inputs:{priorAuthDme:"priorAuthDme",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,MU,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[P.O5,te.M,P.Ov],encapsulation:2}),s})(),qd=(()=>{class s{constructor(){this.autoHeight=!1,this.priorAuthDmes=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[{field:"priorAuthorizationRequest.name",headerName:"Prior Authorization Request",filter:"agTextColumnFilter"},{field:"durableMedicalEquipment.name",headerName:"Durable Medical Equipment",filter:"agTextColumnFilter"},{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{headerName:"Estimated Cost",field:"estimatedCost",valueFormatter:t=>{var i;return(0,_.oBD)(null===(i=t.data)||void 0===i?void 0:i.estimatedCost,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{field:"priorAuthId",filter:"agTextColumnFilter",hide:!0},{field:"durableMedicalEquipmentId",filter:"agTextColumnFilter",hide:!0}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var a;t.includes(null===(a=i.data)||void 0===a?void 0:a.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-prior-auth-dme-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(f.x,5),2&t){let a;e.iGM(a=e.CRH())&&(i.tableView=a.first)}},inputs:{autoHeight:"autoHeight",priorAuthDmes:"priorAuthDmes"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.priorAuthDmes)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[f.x],encapsulation:2}),s})();function WU(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-prior-auth-dme-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","priorAuthDme_edit")("formControl",t.formControl)("priorAuthDme",t.priorAuthDme)}}const EU=function(){return{}};function OU(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-prior-auth-dme-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","priorAuthDme_create")("formControl",t.formControl)("priorAuthDme",e.DdM(3,EU))}}function LU(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-prior-auth-dme-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(d.ref.close())}),e.qZA()}2&s&&e.Q6J("priorAuthDmes",o.data.items)}let $U=(()=>{class s extends G.fS{constructor(t){super(),this.store=t,this.store.loadPriorAuthDmesEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.priorAuthDmes$.pipe((0,h.w)(i=>(0,D.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Xo))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","priorAuthDme","send","close"],[1,"w-full","h-full","bg-white",3,"priorAuthDmes","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,WU,2,3,"ng-template",null,1,e.W1O),e.YNc(3,OU,1,4,"ng-template",null,2,e.W1O),e.YNc(5,LU,1,1,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",d)("editTemplate",a)("createTemplate",l)("key",i.field.key)}},dependencies:[E.JJ,E.oH,H.$,Hd,qd],encapsulation:2}),s})();function GU(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-prior-auth-dme-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","priorAuthDme_edit")("priorAuthDme",t.value)}}const RU=function(){return{}};function QU(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-prior-auth-dme-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","priorAuthDme_create")("priorAuthDme",e.DdM(2,RU))}function VU(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-prior-auth-dme-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(null==d.ref?null:d.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("priorAuthDmes",t.items)}}let jU=(()=>{class s extends pe{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","priorAuthDme","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","priorAuthDmes","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,GU,1,2,"ng-template",null,1,e.W1O),e.YNc(3,QU,1,3,"ng-template",null,2,e.W1O),e.YNc(5,VU,1,2,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[he,Hd,qd],encapsulation:2}),s})(),UU=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[Xo],imports:[P.ez,U.F,E.UX,J.o,ae.u,$.P,j.t,me,k.h,se.G,G.X0.forChild({types:[{name:"prior-auth-dme-select",component:$U,wrappers:["form-field"]},{name:"prior-auth-dme-grid",component:jU}]})]}),s})(),JU=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[UU]}),s})();class Li extends W.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class zU extends Li{constructor(o,t,i){super("ValidatePriorAuthGuidelineExcelDataAction"),this.valid=!1,this.excelData=o,this.guidelines=t,this.priorAuthorizationRequests=i}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name),this.validationContext.addRule(new g.mi(`guidelineName_${i}_is_valid}`,"Guideline Is Not Valid","guideline.name",t.guideline,this.guidelines,!0)),this.validationContext.addRule(new g.mi(`priorAuthorizationRequestName_${i}_is_valid}`,"Prior Authorization Request Is Not Valid","priorAuthorizationRequest.name",t.priorAuthorizationRequest,this.priorAuthorizationRequests,!0))}),this.validationContext.addRule(new g.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof g.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(a=>a.name),newNames:[i.newName]}):i instanceof g.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,D.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class HU extends g.wS{constructor(o,t,i,a,l){super(o,t,i,a,l,!0)}}class qU extends g.ul{constructor(o,t,i,a=!1){super(o,t,a),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new g.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new HU("name","The priorauthguideline name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class KU extends Li{constructor(o){super("CreatePriorAuthGuidelineAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new qU("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreatePriorAuthGuideline({input:this.input}).pipe((0,h.w)(o=>(0,ue.of)(o.data.created)))}}class ZU extends Li{constructor(o){super("UpdatePriorAuthGuidelinesAction"),this.priorAuthGuidelines=o}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.priorAuthGuidelines,!0))}performAction(){this.response=this.businessProvider.data.userUpdatePriorAuthGuidelines({input:{priorAuthGuidelines:this.priorAuthGuidelines}}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}class BU extends Li{constructor(o,t){super("UpdatePriorAuthGuidelineAction"),this.priorAuthGuideline=o,this.priorAuthGuidelineId=t}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.priorAuthGuideline,!0)).addRule(new g.xF("Id","Id should be a CUID and not null",this.priorAuthGuidelineId,!0))}performAction(){this.response=this.businessProvider.data.userUpdatePriorAuthGuideline({priorAuthGuidelineId:this.priorAuthGuidelineId,input:this.priorAuthGuideline}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}let Kd=(()=>{class s extends W.nH{constructor(t,i,a){super("NotificationService.PriorAuthGuidelineBusinessProviderService",t,a),this.data=i}createPriorAuthGuideline(t){const i=new KU(t);return i.Do(this),i.response}updatePriorAuthGuideline(t,i){const a=new BU(t,i);return a.Do(this),a.response}importPriorAuthGuidelines(t){const i=new ZU(t);return i.Do(this),i.response}validatePriorAuthGuidelineExcelData(t,i,a){const l=new zU(t,i,a);return l.Do(this),l.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(K.ed),e.LFG(z.q),e.LFG(W.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),kU=(()=>{class s extends W.nH{constructor(t,i,a){super("PriorAuthGuidelineService",a,t),this.businessProvider=i}createPriorAuthGuideline(t){const i=Object.fromEntries(Object.entries(t).filter(([a,l])=>null!==l));return this.businessProvider.createPriorAuthGuideline(i)}updatePriorAuthGuideline(t,i){return this.businessProvider.updatePriorAuthGuideline(t,i)}importPriorAuthGuidelines(t){return this.businessProvider.importPriorAuthGuidelines(t)}validatePriorAuthGuidelineExcelData(t,i,a){return this.businessProvider.validatePriorAuthGuidelineExcelData(t,i,a)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(Kd,8),e.LFG(Kd),e.LFG(K.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),ea=(()=>{class s extends b.m1{constructor(t,i,a,l,d,ee){if(super({loading:!1,priorAuthGuidelines:[],done:!1,searchQuery:"",formName:void 0,guidelineId:void 0,priorAuthorizationRequestId:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=a,this.toast=l,this.formService=d,this.priorAuthGuidelineService=ee,this.errors$=this.select(n=>n.errors),this.loading$=this.select(n=>n.loading),this.done$=this.select(n=>n.done),this.item$=this.select(n=>n.item),this.priorAuthGuidelines$=this.select(n=>n.priorAuthGuidelines),this.guidelines$=this.select(n=>n.guidelines||[]),this.priorAuthorizationRequests$=this.select(n=>n.priorAuthorizationRequests||[]),this.guidelineId$=this.select(n=>n.guidelineId),this.priorAuthorizationRequestId$=this.select(n=>n.priorAuthorizationRequestId),this.paging$=this.select(n=>n.paging),this.searchQuery$=this.select(n=>n.searchQuery),this.formName$=this.select(n=>n.formName),this.actionResult$=this.select(this.item$,this.done$,(n,r)=>({item:n,done:r}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.priorAuthGuidelines$,this.guidelines$,this.priorAuthorizationRequests$,(n,r,m,p,v,I,B)=>({errors:n,loading:r,item:m,formName:p,priorAuthGuidelines:v,guidelines:I,priorAuthorizationRequests:B}),{debounce:!0}),this.input$=this.select(this.paging$,this.guidelineId$,this.priorAuthorizationRequestId$,this.searchQuery$,(n,r,m,p)=>({limit:n.limit,skip:n.skip,name:p,guidelineId:r,priorAuthorizationRequestId:m,total:n.total})),this.setFormName=this.updater((n,r)=>Object.assign(Object.assign({},n),{formName:r})),this.setGuidelineId=this.updater((n,r)=>Object.assign(Object.assign({},n),{guidelineId:r})),this.setPriorAuthorizationRequestId=this.updater((n,r)=>Object.assign(Object.assign({},n),{priorAuthorizationRequestId:r})),this.filterGuidelines=n=>this.data.userSelectGuidelines({input:{name:n}}).pipe((0,b._b)(r=>{let m=r.data.items;return this.patchState({guidelines:m}),m},r=>this.patchState({errors:r.graphQLErrors?r.graphQLErrors:r})),(0,fe.U)(r=>r.data.items)),this.filterPriorAuthorizationRequests=n=>this.data.userSelectPriorAuthorizationRequests({input:{name:n}}).pipe((0,b._b)(r=>{let m=r.data.items;return this.patchState({priorAuthorizationRequests:m}),m},r=>this.patchState({errors:r.graphQLErrors?r.graphQLErrors:r})),(0,fe.U)(r=>r.data.items)),this.addGuideline=this.updater((n,r)=>Object.assign(Object.assign({},n),{guidelines:n.guidelines.concat(r)})),this.addPriorAuthorizationRequest=this.updater((n,r)=>Object.assign(Object.assign({},n),{priorAuthorizationRequests:n.priorAuthorizationRequests.concat(r)})),this.setItem=this.updater((n,r)=>Object.assign(Object.assign({},n),{item:r})),this.addNewPriorAuthGuideline=this.updater((n,r)=>Object.assign(Object.assign({},n),{priorAuthGuidelines:[...n.priorAuthGuidelines,r]})),this.updatePriorAuthGuideline=this.updater((n,r)=>Object.assign(Object.assign({},n),{priorAuthGuidelines:n.priorAuthGuidelines.map(m=>m.id===r.id?r:m)})),this.addPriorAuthGuidelines=this.updater((n,r)=>Object.assign(Object.assign({},n),{priorAuthGuidelines:n.priorAuthGuidelines.concat(r)})),this.updatePriorAuthGuidelines=this.updater((n,r)=>Object.assign(Object.assign({},n),{priorAuthGuidelines:n.priorAuthGuidelines.map(m=>r.find(v=>v.id===m.id)||m)})),this.setSearchQuery=this.updater((n,r)=>Object.assign(Object.assign({},n),{searchQuery:r})),this.loadPriorAuthGuidelineEffect=this.effect(n=>n.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(r=>this.data.userPriorAuthGuideline({priorAuthGuidelineId:r}).pipe((0,b._b)(m=>{this.patchState({item:m.data.item,errors:m.errors,loading:!1})},m=>this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})))))),this.loadPriorAuthGuidelinesEffect=this.effect(n=>n.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.input$),(0,h.w)(([r,m])=>this.data.userPriorAuthGuidelines({input:m}).pipe((0,b._b)(p=>this.patchState({paging:{limit:m.limit,skip:m.skip,total:p.data.count.total},priorAuthGuidelines:p.data.items,errors:p.errors,loading:!1}),p=>this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})))))),this.createPriorAuthGuidelineEffect=this.effect(n=>n.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(r=>this.priorAuthGuidelineService.createPriorAuthGuideline(Object.assign({},r)).pipe((0,b._b)(m=>{this.addNewPriorAuthGuideline(m),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:m,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},m=>{m.graphQLErrors?(this.toast.error(m.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})):(this.toast.error(m.Message),this.formService.setErrors(m.Data))}))))),this.updatePriorAuthGuidelineEffect=this.effect(n=>n.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([r,m])=>this.priorAuthGuidelineService.updatePriorAuthGuideline(r,r.id).pipe((0,b._b)(p=>{this.updatePriorAuthGuideline(p),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:p,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},p=>{p.graphQLErrors?(this.toast.error(p.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})):(this.toast.error(p.Message),this.formService.setErrors(p.Data))}))))),this.deletePriorAuthGuidelineEffect=this.effect(n=>n.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([r,m])=>this.data.userDeletePriorAuthGuideline({priorAuthGuidelineId:m.id}).pipe((0,b._b)(p=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:p.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},p=>{p.graphQLErrors?(this.toast.error(p.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})):(this.toast.error(p.Message),this.formService.setErrors(p.Data))}))))),this.importExcelEffect=this.effect(n=>n.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(r=>this.priorAuthGuidelineService.importPriorAuthGuidelines(r).pipe((0,de.K)(m=>{var p;return this.toast.error(null!==(p=m.Message)&&void 0!==p?p:"Failed to save",{duration:3e3}),q.E}),(0,y.b)(m=>{const p=JSON.parse(m.created),v=JSON.parse(m.updated),I=JSON.parse(m.failed),B=p.length+v.length+I.length;this.addPriorAuthGuidelines(p),this.updatePriorAuthGuidelines(v),this.toast.success(`${p.length} created, ${v.length} updated, ${I.length} failed of total ${B}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("priorAuthGuidelineId")?(this.route.snapshot.paramMap.get("priorAuthGuidelineId"),this.setFormName("priorAuthGuideline_edit")):this.setFormName("priorAuthGuideline_create"),this.route.snapshot.paramMap.has("guidelineId")){var c=this.route.snapshot.paramMap.get("guidelineId");this.setGuidelineId(c)}if(this.route.snapshot.paramMap.has("priorAuthorizationRequestId")){var u=this.route.snapshot.paramMap.get("priorAuthorizationRequestId");this.setPriorAuthorizationRequestId(u)}}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.priorAuthGuidelineService.validatePriorAuthGuidelineExcelData(t,i.guidelines,i.priorAuthorizationRequests)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(z.q),e.LFG(O.F0),e.LFG(O.gz),e.LFG(X.F),e.LFG(Z.o),e.LFG(kU))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function YU(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.close.emit())})("formIsReady",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.priorAuthGuideline)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let Zd=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"priorAuthGuideline_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.priorAuthGuideline=i.item})):t.formName&&t.formName.currentValue&&"priorAuthGuideline_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadPriorAuthGuidelineEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.priorAuthGuideline=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(ea),e.Y36(O.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-prior-auth-guideline-form"]],inputs:{priorAuthGuideline:"priorAuthGuideline",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,YU,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[P.O5,te.M,P.Ov],encapsulation:2}),s})(),Bd=(()=>{class s{constructor(){this.autoHeight=!1,this.priorAuthGuidelines=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[{field:"guideline.name",headerName:"Guideline",filter:"agTextColumnFilter"},{field:"priorAuthorizationRequest.name",headerName:"Prior Authorization Request",filter:"agTextColumnFilter"},{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{field:"guidelineId",filter:"agTextColumnFilter",hide:!0},{field:"priorAuthorizationRequestId",filter:"agTextColumnFilter",hide:!0}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var a;t.includes(null===(a=i.data)||void 0===a?void 0:a.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-prior-auth-guideline-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(f.x,5),2&t){let a;e.iGM(a=e.CRH())&&(i.tableView=a.first)}},inputs:{autoHeight:"autoHeight",priorAuthGuidelines:"priorAuthGuidelines"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.priorAuthGuidelines)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[f.x],encapsulation:2}),s})();function XU(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-prior-auth-guideline-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","priorAuthGuideline_edit")("formControl",t.formControl)("priorAuthGuideline",t.priorAuthGuideline)}}const e6=function(){return{}};function t6(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-prior-auth-guideline-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","priorAuthGuideline_create")("formControl",t.formControl)("priorAuthGuideline",e.DdM(3,e6))}}function i6(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-prior-auth-guideline-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(d.ref.close())}),e.qZA()}2&s&&e.Q6J("priorAuthGuidelines",o.data.items)}let s6=(()=>{class s extends G.fS{constructor(t){super(),this.store=t,this.store.loadPriorAuthGuidelinesEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.priorAuthGuidelines$.pipe((0,h.w)(i=>(0,D.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(ea))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","priorAuthGuideline","send","close"],[1,"w-full","h-full","bg-white",3,"priorAuthGuidelines","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,XU,2,3,"ng-template",null,1,e.W1O),e.YNc(3,t6,1,4,"ng-template",null,2,e.W1O),e.YNc(5,i6,1,1,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",d)("editTemplate",a)("createTemplate",l)("key",i.field.key)}},dependencies:[E.JJ,E.oH,H.$,Zd,Bd],encapsulation:2}),s})();function o6(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-prior-auth-guideline-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","priorAuthGuideline_edit")("priorAuthGuideline",t.value)}}const a6=function(){return{}};function r6(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-prior-auth-guideline-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","priorAuthGuideline_create")("priorAuthGuideline",e.DdM(2,a6))}function n6(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-prior-auth-guideline-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(null==d.ref?null:d.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("priorAuthGuidelines",t.items)}}let l6=(()=>{class s extends pe{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","priorAuthGuideline","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","priorAuthGuidelines","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,o6,1,2,"ng-template",null,1,e.W1O),e.YNc(3,r6,1,3,"ng-template",null,2,e.W1O),e.YNc(5,n6,1,2,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[he,Zd,Bd],encapsulation:2}),s})(),c6=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[ea],imports:[P.ez,U.F,E.UX,J.o,ae.u,$.P,j.t,me,k.h,se.G,G.X0.forChild({types:[{name:"prior-auth-guideline-select",component:s6,wrappers:["form-field"]},{name:"prior-auth-guideline-grid",component:l6}]})]}),s})(),d6=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[c6]}),s})();class $i extends W.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class u6 extends $i{constructor(o,t,i){super("ValidatePriorAuthorizationDiagnosisCodeExcelDataAction"),this.valid=!1,this.excelData=o,this.diagnoses=t,this.priorAuthorizationRequests=i}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name),this.validationContext.addRule(new g.mi(`diagnosisName_${i}_is_valid}`,"Diagnosis Is Not Valid","diagnosis.name",t.diagnosis,this.diagnoses,!0)),this.validationContext.addRule(new g.mi(`priorAuthorizationRequestName_${i}_is_valid}`,"Prior Authorization Request Is Not Valid","priorAuthorizationRequest.name",t.priorAuthorizationRequest,this.priorAuthorizationRequests,!0))}),this.validationContext.addRule(new g.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof g.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(a=>a.name),newNames:[i.newName]}):i instanceof g.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,D.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class m6 extends g.wS{constructor(o,t,i,a,l){super(o,t,i,a,l,!0)}}class p6 extends g.ul{constructor(o,t,i,a=!1){super(o,t,a),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new g.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new m6("name","The priorauthorizationdiagnosiscode name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class h6 extends $i{constructor(o){super("CreatePriorAuthorizationDiagnosisCodeAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new p6("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreatePriorAuthorizationDiagnosisCode({input:this.input}).pipe((0,h.w)(o=>(0,ue.of)(o.data.created)))}}class f6 extends $i{constructor(o){super("UpdatePriorAuthorizationDiagnosisCodesAction"),this.priorAuthorizationDiagnosisCodes=o}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.priorAuthorizationDiagnosisCodes,!0))}performAction(){this.response=this.businessProvider.data.userUpdatePriorAuthorizationDiagnosisCodes({input:{priorAuthorizationDiagnosisCodes:this.priorAuthorizationDiagnosisCodes}}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}class _6 extends $i{constructor(o,t){super("UpdatePriorAuthorizationDiagnosisCodeAction"),this.priorAuthorizationDiagnosisCode=o,this.priorAuthorizationDiagnosisCodeId=t}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.priorAuthorizationDiagnosisCode,!0)).addRule(new g.xF("Id","Id should be a CUID and not null",this.priorAuthorizationDiagnosisCodeId,!0))}performAction(){this.response=this.businessProvider.data.userUpdatePriorAuthorizationDiagnosisCode({priorAuthorizationDiagnosisCodeId:this.priorAuthorizationDiagnosisCodeId,input:this.priorAuthorizationDiagnosisCode}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}let kd=(()=>{class s extends W.nH{constructor(t,i,a){super("NotificationService.PriorAuthorizationDiagnosisCodeBusinessProviderService",t,a),this.data=i}createPriorAuthorizationDiagnosisCode(t){const i=new h6(t);return i.Do(this),i.response}updatePriorAuthorizationDiagnosisCode(t,i){const a=new _6(t,i);return a.Do(this),a.response}importPriorAuthorizationDiagnosisCodes(t){const i=new f6(t);return i.Do(this),i.response}validatePriorAuthorizationDiagnosisCodeExcelData(t,i,a){const l=new u6(t,i,a);return l.Do(this),l.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(K.ed),e.LFG(z.q),e.LFG(W.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),g6=(()=>{class s extends W.nH{constructor(t,i,a){super("PriorAuthorizationDiagnosisCodeService",a,t),this.businessProvider=i}createPriorAuthorizationDiagnosisCode(t){const i=Object.fromEntries(Object.entries(t).filter(([a,l])=>null!==l));return this.businessProvider.createPriorAuthorizationDiagnosisCode(i)}updatePriorAuthorizationDiagnosisCode(t,i){return this.businessProvider.updatePriorAuthorizationDiagnosisCode(t,i)}importPriorAuthorizationDiagnosisCodes(t){return this.businessProvider.importPriorAuthorizationDiagnosisCodes(t)}validatePriorAuthorizationDiagnosisCodeExcelData(t,i,a){return this.businessProvider.validatePriorAuthorizationDiagnosisCodeExcelData(t,i,a)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(kd,8),e.LFG(kd),e.LFG(K.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),ta=(()=>{class s extends b.m1{constructor(t,i,a,l,d,ee){if(super({loading:!1,priorAuthorizationDiagnosisCodes:[],done:!1,searchQuery:"",formName:void 0,diagnosisCodeId:void 0,priorAuthorizationRequestId:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=a,this.toast=l,this.formService=d,this.priorAuthorizationDiagnosisCodeService=ee,this.errors$=this.select(n=>n.errors),this.loading$=this.select(n=>n.loading),this.done$=this.select(n=>n.done),this.item$=this.select(n=>n.item),this.priorAuthorizationDiagnosisCodes$=this.select(n=>n.priorAuthorizationDiagnosisCodes),this.diagnosisCodes$=this.select(n=>n.diagnosisCodes||[]),this.priorAuthorizationRequests$=this.select(n=>n.priorAuthorizationRequests||[]),this.diagnosisCodeId$=this.select(n=>n.diagnosisCodeId),this.priorAuthorizationRequestId$=this.select(n=>n.priorAuthorizationRequestId),this.paging$=this.select(n=>n.paging),this.searchQuery$=this.select(n=>n.searchQuery),this.formName$=this.select(n=>n.formName),this.actionResult$=this.select(this.item$,this.done$,(n,r)=>({item:n,done:r}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.priorAuthorizationDiagnosisCodes$,this.diagnosisCodes$,this.priorAuthorizationRequests$,(n,r,m,p,v,I,B)=>({errors:n,loading:r,item:m,formName:p,priorAuthorizationDiagnosisCodes:v,diagnosisCodes:I,priorAuthorizationRequests:B}),{debounce:!0}),this.input$=this.select(this.paging$,this.diagnosisCodeId$,this.priorAuthorizationRequestId$,this.searchQuery$,(n,r,m,p)=>({limit:n.limit,skip:n.skip,name:p,diagnosisCodeId:r,priorAuthorizationRequestId:m,total:n.total})),this.setFormName=this.updater((n,r)=>Object.assign(Object.assign({},n),{formName:r})),this.setDiagnosisCodeId=this.updater((n,r)=>Object.assign(Object.assign({},n),{diagnosisCodeId:r})),this.setPriorAuthorizationRequestId=this.updater((n,r)=>Object.assign(Object.assign({},n),{priorAuthorizationRequestId:r})),this.filterDiagnosisCodes=n=>this.data.userSelectDiagnosisCodes({input:{name:n}}).pipe((0,b._b)(r=>{let m=r.data.items;return this.patchState({diagnosisCodes:m}),m},r=>this.patchState({errors:r.graphQLErrors?r.graphQLErrors:r})),(0,fe.U)(r=>r.data.items)),this.filterPriorAuthorizationRequests=n=>this.data.userSelectPriorAuthorizationRequests({input:{name:n}}).pipe((0,b._b)(r=>{let m=r.data.items;return this.patchState({priorAuthorizationRequests:m}),m},r=>this.patchState({errors:r.graphQLErrors?r.graphQLErrors:r})),(0,fe.U)(r=>r.data.items)),this.addDiagnosisCode=this.updater((n,r)=>Object.assign(Object.assign({},n),{diagnosisCodes:n.diagnosisCodes.concat(r)})),this.addPriorAuthorizationRequest=this.updater((n,r)=>Object.assign(Object.assign({},n),{priorAuthorizationRequests:n.priorAuthorizationRequests.concat(r)})),this.setItem=this.updater((n,r)=>Object.assign(Object.assign({},n),{item:r})),this.addNewPriorAuthorizationDiagnosisCode=this.updater((n,r)=>Object.assign(Object.assign({},n),{priorAuthorizationDiagnosisCodes:[...n.priorAuthorizationDiagnosisCodes,r]})),this.updatePriorAuthorizationDiagnosisCode=this.updater((n,r)=>Object.assign(Object.assign({},n),{priorAuthorizationDiagnosisCodes:n.priorAuthorizationDiagnosisCodes.map(m=>m.id===r.id?r:m)})),this.addPriorAuthorizationDiagnosisCodes=this.updater((n,r)=>Object.assign(Object.assign({},n),{priorAuthorizationDiagnosisCodes:n.priorAuthorizationDiagnosisCodes.concat(r)})),this.updatePriorAuthorizationDiagnosisCodes=this.updater((n,r)=>Object.assign(Object.assign({},n),{priorAuthorizationDiagnosisCodes:n.priorAuthorizationDiagnosisCodes.map(m=>r.find(v=>v.id===m.id)||m)})),this.setSearchQuery=this.updater((n,r)=>Object.assign(Object.assign({},n),{searchQuery:r})),this.loadPriorAuthorizationDiagnosisCodeEffect=this.effect(n=>n.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(r=>this.data.userPriorAuthorizationDiagnosisCode({priorAuthorizationDiagnosisCodeId:r}).pipe((0,b._b)(m=>{this.patchState({item:m.data.item,errors:m.errors,loading:!1})},m=>this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})))))),this.loadPriorAuthorizationDiagnosisCodesEffect=this.effect(n=>n.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.input$),(0,h.w)(([r,m])=>this.data.userPriorAuthorizationDiagnosisCodes({input:m}).pipe((0,b._b)(p=>this.patchState({paging:{limit:m.limit,skip:m.skip,total:p.data.count.total},priorAuthorizationDiagnosisCodes:p.data.items,errors:p.errors,loading:!1}),p=>this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})))))),this.createPriorAuthorizationDiagnosisCodeEffect=this.effect(n=>n.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(r=>this.priorAuthorizationDiagnosisCodeService.createPriorAuthorizationDiagnosisCode(Object.assign({},r)).pipe((0,b._b)(m=>{this.addNewPriorAuthorizationDiagnosisCode(m),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:m,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},m=>{m.graphQLErrors?(this.toast.error(m.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})):(this.toast.error(m.Message),this.formService.setErrors(m.Data))}))))),this.updatePriorAuthorizationDiagnosisCodeEffect=this.effect(n=>n.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([r,m])=>this.priorAuthorizationDiagnosisCodeService.updatePriorAuthorizationDiagnosisCode(r,r.id).pipe((0,b._b)(p=>{this.updatePriorAuthorizationDiagnosisCode(p),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:p,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},p=>{p.graphQLErrors?(this.toast.error(p.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})):(this.toast.error(p.Message),this.formService.setErrors(p.Data))}))))),this.deletePriorAuthorizationDiagnosisCodeEffect=this.effect(n=>n.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([r,m])=>this.data.userDeletePriorAuthorizationDiagnosisCode({priorAuthorizationDiagnosisCodeId:m.id}).pipe((0,b._b)(p=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:p.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},p=>{p.graphQLErrors?(this.toast.error(p.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})):(this.toast.error(p.Message),this.formService.setErrors(p.Data))}))))),this.importExcelEffect=this.effect(n=>n.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(r=>this.priorAuthorizationDiagnosisCodeService.importPriorAuthorizationDiagnosisCodes(r).pipe((0,de.K)(m=>{var p;return this.toast.error(null!==(p=m.Message)&&void 0!==p?p:"Failed to save",{duration:3e3}),q.E}),(0,y.b)(m=>{const p=JSON.parse(m.created),v=JSON.parse(m.updated),I=JSON.parse(m.failed),B=p.length+v.length+I.length;this.addPriorAuthorizationDiagnosisCodes(p),this.updatePriorAuthorizationDiagnosisCodes(v),this.toast.success(`${p.length} created, ${v.length} updated, ${I.length} failed of total ${B}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("priorAuthorizationDiagnosisCodeId")?(this.route.snapshot.paramMap.get("priorAuthorizationDiagnosisCodeId"),this.setFormName("priorAuthorizationDiagnosisCode_edit")):this.setFormName("priorAuthorizationDiagnosisCode_create"),this.route.snapshot.paramMap.has("diagnosisCodeId")){var c=this.route.snapshot.paramMap.get("diagnosisCodeId");this.setDiagnosisCodeId(c)}if(this.route.snapshot.paramMap.has("priorAuthorizationRequestId")){var u=this.route.snapshot.paramMap.get("priorAuthorizationRequestId");this.setPriorAuthorizationRequestId(u)}}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.priorAuthorizationDiagnosisCodeService.validatePriorAuthorizationDiagnosisCodeExcelData(t,i.diagnosisCodes,i.priorAuthorizationRequests)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(z.q),e.LFG(O.F0),e.LFG(O.gz),e.LFG(X.F),e.LFG(Z.o),e.LFG(g6))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function v6(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.close.emit())})("formIsReady",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.priorAuthorizationDiagnosisCode)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let Yd=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"priorAuthorizationDiagnosisCode_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.priorAuthorizationDiagnosisCode=i.item})):t.formName&&t.formName.currentValue&&"priorAuthorizationDiagnosisCode_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadPriorAuthorizationDiagnosisCodeEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.priorAuthorizationDiagnosisCode=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(ta),e.Y36(O.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-prior-authorization-diagnosis-code-form"]],inputs:{priorAuthorizationDiagnosisCode:"priorAuthorizationDiagnosisCode",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,v6,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[P.O5,te.M,P.Ov],encapsulation:2}),s})(),Xd=(()=>{class s{constructor(){this.autoHeight=!1,this.priorAuthorizationDiagnosisCodes=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[{field:"diagnosis.name",headerName:"Diagnosis",filter:"agTextColumnFilter"},{field:"priorAuthorizationRequest.name",headerName:"Prior Authorization Request",filter:"agTextColumnFilter"},{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{field:"diagnosisCodeId",filter:"agTextColumnFilter",hide:!0},{field:"priorAuthorizationRequestId",filter:"agTextColumnFilter",hide:!0}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var a;t.includes(null===(a=i.data)||void 0===a?void 0:a.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-prior-authorization-diagnosis-code-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(f.x,5),2&t){let a;e.iGM(a=e.CRH())&&(i.tableView=a.first)}},inputs:{autoHeight:"autoHeight",priorAuthorizationDiagnosisCodes:"priorAuthorizationDiagnosisCodes"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.priorAuthorizationDiagnosisCodes)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[f.x],encapsulation:2}),s})();function C6(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-prior-authorization-diagnosis-code-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","priorAuthorizationDiagnosisCode_edit")("formControl",t.formControl)("priorAuthorizationDiagnosisCode",t.priorAuthorizationDiagnosisCode)}}const S6=function(){return{}};function b6(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-prior-authorization-diagnosis-code-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","priorAuthorizationDiagnosisCode_create")("formControl",t.formControl)("priorAuthorizationDiagnosisCode",e.DdM(3,S6))}}function T6(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-prior-authorization-diagnosis-code-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(d.ref.close())}),e.qZA()}2&s&&e.Q6J("priorAuthorizationDiagnosisCodes",o.data.items)}let y6=(()=>{class s extends G.fS{constructor(t){super(),this.store=t,this.store.loadPriorAuthorizationDiagnosisCodesEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.priorAuthorizationDiagnosisCodes$.pipe((0,h.w)(i=>(0,D.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(ta))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","priorAuthorizationDiagnosisCode","send","close"],[1,"w-full","h-full","bg-white",3,"priorAuthorizationDiagnosisCodes","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,C6,2,3,"ng-template",null,1,e.W1O),e.YNc(3,b6,1,4,"ng-template",null,2,e.W1O),e.YNc(5,T6,1,1,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",d)("editTemplate",a)("createTemplate",l)("key",i.field.key)}},dependencies:[E.JJ,E.oH,H.$,Yd,Xd],encapsulation:2}),s})();function w6(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-prior-authorization-diagnosis-code-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","priorAuthorizationDiagnosisCode_edit")("priorAuthorizationDiagnosisCode",t.value)}}const x6=function(){return{}};function N6(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-prior-authorization-diagnosis-code-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","priorAuthorizationDiagnosisCode_create")("priorAuthorizationDiagnosisCode",e.DdM(2,x6))}function A6(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-prior-authorization-diagnosis-code-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(null==d.ref?null:d.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("priorAuthorizationDiagnosisCodes",t.items)}}let F6=(()=>{class s extends pe{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","priorAuthorizationDiagnosisCode","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","priorAuthorizationDiagnosisCodes","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,w6,1,2,"ng-template",null,1,e.W1O),e.YNc(3,N6,1,3,"ng-template",null,2,e.W1O),e.YNc(5,A6,1,2,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[he,Yd,Xd],encapsulation:2}),s})(),P6=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[ta],imports:[P.ez,U.F,E.UX,J.o,ae.u,$.P,j.t,me,k.h,se.G,G.X0.forChild({types:[{name:"prior-authorization-diagnosis-code-select",component:y6,wrappers:["form-field"]},{name:"prior-authorization-diagnosis-code-grid",component:F6}]})]}),s})(),I6=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[P6]}),s})();class Gi extends W.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class D6 extends Gi{constructor(o,t,i){super("ValidatePriorAuthorizationEquipmentExcelDataAction"),this.valid=!1,this.excelData=o,this.equipment=t,this.priorAuthorizationRequests=i}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name),this.validationContext.addRule(new g.mi(`equipmentName_${i}_is_valid}`,"Equipment Is Not Valid","equipment.name",t.equipment,this.equipment,!0)),this.validationContext.addRule(new g.mi(`priorAuthorizationRequestName_${i}_is_valid}`,"Prior Authorization Request Is Not Valid","priorAuthorizationRequest.name",t.priorAuthorizationRequest,this.priorAuthorizationRequests,!0))}),this.validationContext.addRule(new g.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof g.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(a=>a.name),newNames:[i.newName]}):i instanceof g.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,D.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class M6 extends g.wS{constructor(o,t,i,a,l){super(o,t,i,a,l,!0)}}class W6 extends g.ul{constructor(o,t,i,a=!1){super(o,t,a),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new g.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new M6("name","The priorauthorizationequipment name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class E6 extends Gi{constructor(o){super("CreatePriorAuthorizationEquipmentAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new W6("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreatePriorAuthorizationEquipment({input:this.input}).pipe((0,h.w)(o=>(0,ue.of)(o.data.created)))}}class O6 extends Gi{constructor(o){super("UpdatePriorAuthorizationEquipmentsAction"),this.priorAuthorizationEquipments=o}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.priorAuthorizationEquipments,!0))}performAction(){this.response=this.businessProvider.data.userUpdatePriorAuthorizationEquipments({input:{priorAuthorizationEquipments:this.priorAuthorizationEquipments}}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}class L6 extends Gi{constructor(o,t){super("UpdatePriorAuthorizationEquipmentAction"),this.priorAuthorizationEquipment=o,this.priorAuthorizationEquipmentId=t}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.priorAuthorizationEquipment,!0)).addRule(new g.xF("Id","Id should be a CUID and not null",this.priorAuthorizationEquipmentId,!0))}performAction(){this.response=this.businessProvider.data.userUpdatePriorAuthorizationEquipment({priorAuthorizationEquipmentId:this.priorAuthorizationEquipmentId,input:this.priorAuthorizationEquipment}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}let eu=(()=>{class s extends W.nH{constructor(t,i,a){super("NotificationService.PriorAuthorizationEquipmentBusinessProviderService",t,a),this.data=i}createPriorAuthorizationEquipment(t){const i=new E6(t);return i.Do(this),i.response}updatePriorAuthorizationEquipment(t,i){const a=new L6(t,i);return a.Do(this),a.response}importPriorAuthorizationEquipments(t){const i=new O6(t);return i.Do(this),i.response}validatePriorAuthorizationEquipmentExcelData(t,i,a){const l=new D6(t,i,a);return l.Do(this),l.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(K.ed),e.LFG(z.q),e.LFG(W.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),$6=(()=>{class s extends W.nH{constructor(t,i,a){super("PriorAuthorizationEquipmentService",a,t),this.businessProvider=i}createPriorAuthorizationEquipment(t){const i=Object.fromEntries(Object.entries(t).filter(([a,l])=>null!==l));return this.businessProvider.createPriorAuthorizationEquipment(i)}updatePriorAuthorizationEquipment(t,i){return this.businessProvider.updatePriorAuthorizationEquipment(t,i)}importPriorAuthorizationEquipments(t){return this.businessProvider.importPriorAuthorizationEquipments(t)}validatePriorAuthorizationEquipmentExcelData(t,i,a){return this.businessProvider.validatePriorAuthorizationEquipmentExcelData(t,i,a)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(eu,8),e.LFG(eu),e.LFG(K.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),ia=(()=>{class s extends b.m1{constructor(t,i,a,l,d,ee){if(super({loading:!1,priorAuthorizationEquipments:[],done:!1,searchQuery:"",formName:void 0,equipmentId:void 0,priorAuthorizationRequestId:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=a,this.toast=l,this.formService=d,this.priorAuthorizationEquipmentService=ee,this.errors$=this.select(n=>n.errors),this.loading$=this.select(n=>n.loading),this.done$=this.select(n=>n.done),this.item$=this.select(n=>n.item),this.priorAuthorizationEquipments$=this.select(n=>n.priorAuthorizationEquipments),this.equipments$=this.select(n=>n.equipments||[]),this.priorAuthorizationRequests$=this.select(n=>n.priorAuthorizationRequests||[]),this.equipmentId$=this.select(n=>n.equipmentId),this.priorAuthorizationRequestId$=this.select(n=>n.priorAuthorizationRequestId),this.paging$=this.select(n=>n.paging),this.searchQuery$=this.select(n=>n.searchQuery),this.formName$=this.select(n=>n.formName),this.actionResult$=this.select(this.item$,this.done$,(n,r)=>({item:n,done:r}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.priorAuthorizationEquipments$,this.equipments$,this.priorAuthorizationRequests$,(n,r,m,p,v,I,B)=>({errors:n,loading:r,item:m,formName:p,priorAuthorizationEquipments:v,equipments:I,priorAuthorizationRequests:B}),{debounce:!0}),this.input$=this.select(this.paging$,this.equipmentId$,this.priorAuthorizationRequestId$,this.searchQuery$,(n,r,m,p)=>({limit:n.limit,skip:n.skip,name:p,equipmentId:r,priorAuthorizationRequestId:m,total:n.total})),this.setFormName=this.updater((n,r)=>Object.assign(Object.assign({},n),{formName:r})),this.setEquipmentId=this.updater((n,r)=>Object.assign(Object.assign({},n),{equipmentId:r})),this.setPriorAuthorizationRequestId=this.updater((n,r)=>Object.assign(Object.assign({},n),{priorAuthorizationRequestId:r})),this.filterEquipments=n=>this.data.userSelectEquipments({input:{name:n}}).pipe((0,b._b)(r=>{let m=r.data.items;return this.patchState({equipments:m}),m},r=>this.patchState({errors:r.graphQLErrors?r.graphQLErrors:r})),(0,fe.U)(r=>r.data.items)),this.filterPriorAuthorizationRequests=n=>this.data.userSelectPriorAuthorizationRequests({input:{name:n}}).pipe((0,b._b)(r=>{let m=r.data.items;return this.patchState({priorAuthorizationRequests:m}),m},r=>this.patchState({errors:r.graphQLErrors?r.graphQLErrors:r})),(0,fe.U)(r=>r.data.items)),this.addEquipment=this.updater((n,r)=>Object.assign(Object.assign({},n),{equipments:n.equipments.concat(r)})),this.addPriorAuthorizationRequest=this.updater((n,r)=>Object.assign(Object.assign({},n),{priorAuthorizationRequests:n.priorAuthorizationRequests.concat(r)})),this.setItem=this.updater((n,r)=>Object.assign(Object.assign({},n),{item:r})),this.addNewPriorAuthorizationEquipment=this.updater((n,r)=>Object.assign(Object.assign({},n),{priorAuthorizationEquipments:[...n.priorAuthorizationEquipments,r]})),this.updatePriorAuthorizationEquipment=this.updater((n,r)=>Object.assign(Object.assign({},n),{priorAuthorizationEquipments:n.priorAuthorizationEquipments.map(m=>m.id===r.id?r:m)})),this.addPriorAuthorizationEquipments=this.updater((n,r)=>Object.assign(Object.assign({},n),{priorAuthorizationEquipments:n.priorAuthorizationEquipments.concat(r)})),this.updatePriorAuthorizationEquipments=this.updater((n,r)=>Object.assign(Object.assign({},n),{priorAuthorizationEquipments:n.priorAuthorizationEquipments.map(m=>r.find(v=>v.id===m.id)||m)})),this.setSearchQuery=this.updater((n,r)=>Object.assign(Object.assign({},n),{searchQuery:r})),this.loadPriorAuthorizationEquipmentEffect=this.effect(n=>n.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(r=>this.data.userPriorAuthorizationEquipment({priorAuthorizationEquipmentId:r}).pipe((0,b._b)(m=>{this.patchState({item:m.data.item,errors:m.errors,loading:!1})},m=>this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})))))),this.loadPriorAuthorizationEquipmentsEffect=this.effect(n=>n.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.input$),(0,h.w)(([r,m])=>this.data.userPriorAuthorizationEquipments({input:m}).pipe((0,b._b)(p=>this.patchState({paging:{limit:m.limit,skip:m.skip,total:p.data.count.total},priorAuthorizationEquipments:p.data.items,errors:p.errors,loading:!1}),p=>this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})))))),this.createPriorAuthorizationEquipmentEffect=this.effect(n=>n.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(r=>this.priorAuthorizationEquipmentService.createPriorAuthorizationEquipment(Object.assign({},r)).pipe((0,b._b)(m=>{this.addNewPriorAuthorizationEquipment(m),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:m,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},m=>{m.graphQLErrors?(this.toast.error(m.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})):(this.toast.error(m.Message),this.formService.setErrors(m.Data))}))))),this.updatePriorAuthorizationEquipmentEffect=this.effect(n=>n.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([r,m])=>this.priorAuthorizationEquipmentService.updatePriorAuthorizationEquipment(r,r.id).pipe((0,b._b)(p=>{this.updatePriorAuthorizationEquipment(p),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:p,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},p=>{p.graphQLErrors?(this.toast.error(p.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})):(this.toast.error(p.Message),this.formService.setErrors(p.Data))}))))),this.deletePriorAuthorizationEquipmentEffect=this.effect(n=>n.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([r,m])=>this.data.userDeletePriorAuthorizationEquipment({priorAuthorizationEquipmentId:m.id}).pipe((0,b._b)(p=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:p.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},p=>{p.graphQLErrors?(this.toast.error(p.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})):(this.toast.error(p.Message),this.formService.setErrors(p.Data))}))))),this.importExcelEffect=this.effect(n=>n.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(r=>this.priorAuthorizationEquipmentService.importPriorAuthorizationEquipments(r).pipe((0,de.K)(m=>{var p;return this.toast.error(null!==(p=m.Message)&&void 0!==p?p:"Failed to save",{duration:3e3}),q.E}),(0,y.b)(m=>{const p=JSON.parse(m.created),v=JSON.parse(m.updated),I=JSON.parse(m.failed),B=p.length+v.length+I.length;this.addPriorAuthorizationEquipments(p),this.updatePriorAuthorizationEquipments(v),this.toast.success(`${p.length} created, ${v.length} updated, ${I.length} failed of total ${B}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("priorAuthorizationEquipmentId")?(this.route.snapshot.paramMap.get("priorAuthorizationEquipmentId"),this.setFormName("priorAuthorizationEquipment_edit")):this.setFormName("priorAuthorizationEquipment_create"),this.route.snapshot.paramMap.has("equipmentId")){var c=this.route.snapshot.paramMap.get("equipmentId");this.setEquipmentId(c)}if(this.route.snapshot.paramMap.has("priorAuthorizationRequestId")){var u=this.route.snapshot.paramMap.get("priorAuthorizationRequestId");this.setPriorAuthorizationRequestId(u)}}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.priorAuthorizationEquipmentService.validatePriorAuthorizationEquipmentExcelData(t,i.equipments,i.priorAuthorizationRequests)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(z.q),e.LFG(O.F0),e.LFG(O.gz),e.LFG(X.F),e.LFG(Z.o),e.LFG($6))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function G6(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.close.emit())})("formIsReady",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.priorAuthorizationEquipment)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let tu=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"priorAuthorizationEquipment_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.priorAuthorizationEquipment=i.item})):t.formName&&t.formName.currentValue&&"priorAuthorizationEquipment_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadPriorAuthorizationEquipmentEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.priorAuthorizationEquipment=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(ia),e.Y36(O.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-prior-authorization-equipment-form"]],inputs:{priorAuthorizationEquipment:"priorAuthorizationEquipment",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,G6,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[P.O5,te.M,P.Ov],encapsulation:2}),s})(),iu=(()=>{class s{constructor(){this.autoHeight=!1,this.priorAuthorizationEquipments=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[{field:"equipment.name",headerName:"Equipment",filter:"agTextColumnFilter"},{field:"priorAuthorizationRequest.name",headerName:"Prior Authorization Request",filter:"agTextColumnFilter"},{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{headerName:"Estimated Cost",field:"estimatedCost",valueFormatter:t=>{var i;return(0,_.oBD)(null===(i=t.data)||void 0===i?void 0:i.estimatedCost,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{field:"equipmentId",filter:"agTextColumnFilter",hide:!0},{field:"priorAuthorizationRequestId",filter:"agTextColumnFilter",hide:!0}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var a;t.includes(null===(a=i.data)||void 0===a?void 0:a.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-prior-authorization-equipment-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(f.x,5),2&t){let a;e.iGM(a=e.CRH())&&(i.tableView=a.first)}},inputs:{autoHeight:"autoHeight",priorAuthorizationEquipments:"priorAuthorizationEquipments"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.priorAuthorizationEquipments)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[f.x],encapsulation:2}),s})();function R6(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-prior-authorization-equipment-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","priorAuthorizationEquipment_edit")("formControl",t.formControl)("priorAuthorizationEquipment",t.priorAuthorizationEquipment)}}const Q6=function(){return{}};function V6(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-prior-authorization-equipment-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","priorAuthorizationEquipment_create")("formControl",t.formControl)("priorAuthorizationEquipment",e.DdM(3,Q6))}}function j6(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-prior-authorization-equipment-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(d.ref.close())}),e.qZA()}2&s&&e.Q6J("priorAuthorizationEquipments",o.data.items)}let U6=(()=>{class s extends G.fS{constructor(t){super(),this.store=t,this.store.loadPriorAuthorizationEquipmentsEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.priorAuthorizationEquipments$.pipe((0,h.w)(i=>(0,D.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(ia))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","priorAuthorizationEquipment","send","close"],[1,"w-full","h-full","bg-white",3,"priorAuthorizationEquipments","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,R6,2,3,"ng-template",null,1,e.W1O),e.YNc(3,V6,1,4,"ng-template",null,2,e.W1O),e.YNc(5,j6,1,1,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",d)("editTemplate",a)("createTemplate",l)("key",i.field.key)}},dependencies:[E.JJ,E.oH,H.$,tu,iu],encapsulation:2}),s})();function J6(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-prior-authorization-equipment-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","priorAuthorizationEquipment_edit")("priorAuthorizationEquipment",t.value)}}const z6=function(){return{}};function H6(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-prior-authorization-equipment-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","priorAuthorizationEquipment_create")("priorAuthorizationEquipment",e.DdM(2,z6))}function q6(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-prior-authorization-equipment-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(null==d.ref?null:d.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("priorAuthorizationEquipments",t.items)}}let K6=(()=>{class s extends pe{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","priorAuthorizationEquipment","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","priorAuthorizationEquipments","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,J6,1,2,"ng-template",null,1,e.W1O),e.YNc(3,H6,1,3,"ng-template",null,2,e.W1O),e.YNc(5,q6,1,2,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[he,tu,iu],encapsulation:2}),s})(),Z6=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[ia],imports:[P.ez,U.F,E.UX,J.o,ae.u,$.P,j.t,me,k.h,se.G,G.X0.forChild({types:[{name:"prior-authorization-equipment-select",component:U6,wrappers:["form-field"]},{name:"prior-authorization-equipment-grid",component:K6}]})]}),s})(),B6=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[Z6]}),s})();class Ri extends W.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class k6 extends Ri{constructor(o,t,i){super("ValidatePriorAuthorizationImplantExcelDataAction"),this.valid=!1,this.excelData=o,this.implants=t,this.priorAuthorizationRequests=i}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name),this.validationContext.addRule(new g.mi(`implantName_${i}_is_valid}`,"Implant Is Not Valid","implant.name",t.implant,this.implants,!0)),this.validationContext.addRule(new g.mi(`priorAuthorizationRequestName_${i}_is_valid}`,"Prior Authorization Request Is Not Valid","priorAuthorizationRequest.name",t.priorAuthorizationRequest,this.priorAuthorizationRequests,!0))}),this.validationContext.addRule(new g.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof g.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(a=>a.name),newNames:[i.newName]}):i instanceof g.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,D.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class Y6 extends g.wS{constructor(o,t,i,a,l){super(o,t,i,a,l,!0)}}class X6 extends g.ul{constructor(o,t,i,a=!1){super(o,t,a),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new g.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new Y6("name","The priorauthorizationimplant name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class eJ extends Ri{constructor(o){super("CreatePriorAuthorizationImplantAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new X6("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreatePriorAuthorizationImplant({input:this.input}).pipe((0,h.w)(o=>(0,ue.of)(o.data.created)))}}class tJ extends Ri{constructor(o){super("UpdatePriorAuthorizationImplantsAction"),this.priorAuthorizationImplants=o}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.priorAuthorizationImplants,!0))}performAction(){this.response=this.businessProvider.data.userUpdatePriorAuthorizationImplants({input:{priorAuthorizationImplants:this.priorAuthorizationImplants}}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}class iJ extends Ri{constructor(o,t){super("UpdatePriorAuthorizationImplantAction"),this.priorAuthorizationImplant=o,this.priorAuthorizationImplantId=t}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.priorAuthorizationImplant,!0)).addRule(new g.xF("Id","Id should be a CUID and not null",this.priorAuthorizationImplantId,!0))}performAction(){this.response=this.businessProvider.data.userUpdatePriorAuthorizationImplant({priorAuthorizationImplantId:this.priorAuthorizationImplantId,input:this.priorAuthorizationImplant}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}let su=(()=>{class s extends W.nH{constructor(t,i,a){super("NotificationService.PriorAuthorizationImplantBusinessProviderService",t,a),this.data=i}createPriorAuthorizationImplant(t){const i=new eJ(t);return i.Do(this),i.response}updatePriorAuthorizationImplant(t,i){const a=new iJ(t,i);return a.Do(this),a.response}importPriorAuthorizationImplants(t){const i=new tJ(t);return i.Do(this),i.response}validatePriorAuthorizationImplantExcelData(t,i,a){const l=new k6(t,i,a);return l.Do(this),l.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(K.ed),e.LFG(z.q),e.LFG(W.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),sJ=(()=>{class s extends W.nH{constructor(t,i,a){super("PriorAuthorizationImplantService",a,t),this.businessProvider=i}createPriorAuthorizationImplant(t){const i=Object.fromEntries(Object.entries(t).filter(([a,l])=>null!==l));return this.businessProvider.createPriorAuthorizationImplant(i)}updatePriorAuthorizationImplant(t,i){return this.businessProvider.updatePriorAuthorizationImplant(t,i)}importPriorAuthorizationImplants(t){return this.businessProvider.importPriorAuthorizationImplants(t)}validatePriorAuthorizationImplantExcelData(t,i,a){return this.businessProvider.validatePriorAuthorizationImplantExcelData(t,i,a)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(su,8),e.LFG(su),e.LFG(K.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),sa=(()=>{class s extends b.m1{constructor(t,i,a,l,d,ee){if(super({loading:!1,priorAuthorizationImplants:[],done:!1,searchQuery:"",formName:void 0,implantId:void 0,priorAuthorizationRequestId:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=a,this.toast=l,this.formService=d,this.priorAuthorizationImplantService=ee,this.errors$=this.select(n=>n.errors),this.loading$=this.select(n=>n.loading),this.done$=this.select(n=>n.done),this.item$=this.select(n=>n.item),this.priorAuthorizationImplants$=this.select(n=>n.priorAuthorizationImplants),this.implants$=this.select(n=>n.implants||[]),this.priorAuthorizationRequests$=this.select(n=>n.priorAuthorizationRequests||[]),this.implantId$=this.select(n=>n.implantId),this.priorAuthorizationRequestId$=this.select(n=>n.priorAuthorizationRequestId),this.paging$=this.select(n=>n.paging),this.searchQuery$=this.select(n=>n.searchQuery),this.formName$=this.select(n=>n.formName),this.actionResult$=this.select(this.item$,this.done$,(n,r)=>({item:n,done:r}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.priorAuthorizationImplants$,this.implants$,this.priorAuthorizationRequests$,(n,r,m,p,v,I,B)=>({errors:n,loading:r,item:m,formName:p,priorAuthorizationImplants:v,implants:I,priorAuthorizationRequests:B}),{debounce:!0}),this.input$=this.select(this.paging$,this.implantId$,this.priorAuthorizationRequestId$,this.searchQuery$,(n,r,m,p)=>({limit:n.limit,skip:n.skip,name:p,implantId:r,priorAuthorizationRequestId:m,total:n.total})),this.setFormName=this.updater((n,r)=>Object.assign(Object.assign({},n),{formName:r})),this.setImplantId=this.updater((n,r)=>Object.assign(Object.assign({},n),{implantId:r})),this.setPriorAuthorizationRequestId=this.updater((n,r)=>Object.assign(Object.assign({},n),{priorAuthorizationRequestId:r})),this.filterImplants=n=>this.data.userSelectImplants({input:{name:n}}).pipe((0,b._b)(r=>{let m=r.data.items;return this.patchState({implants:m}),m},r=>this.patchState({errors:r.graphQLErrors?r.graphQLErrors:r})),(0,fe.U)(r=>r.data.items)),this.filterPriorAuthorizationRequests=n=>this.data.userSelectPriorAuthorizationRequests({input:{name:n}}).pipe((0,b._b)(r=>{let m=r.data.items;return this.patchState({priorAuthorizationRequests:m}),m},r=>this.patchState({errors:r.graphQLErrors?r.graphQLErrors:r})),(0,fe.U)(r=>r.data.items)),this.addImplant=this.updater((n,r)=>Object.assign(Object.assign({},n),{implants:n.implants.concat(r)})),this.addPriorAuthorizationRequest=this.updater((n,r)=>Object.assign(Object.assign({},n),{priorAuthorizationRequests:n.priorAuthorizationRequests.concat(r)})),this.setItem=this.updater((n,r)=>Object.assign(Object.assign({},n),{item:r})),this.addNewPriorAuthorizationImplant=this.updater((n,r)=>Object.assign(Object.assign({},n),{priorAuthorizationImplants:[...n.priorAuthorizationImplants,r]})),this.updatePriorAuthorizationImplant=this.updater((n,r)=>Object.assign(Object.assign({},n),{priorAuthorizationImplants:n.priorAuthorizationImplants.map(m=>m.id===r.id?r:m)})),this.addPriorAuthorizationImplants=this.updater((n,r)=>Object.assign(Object.assign({},n),{priorAuthorizationImplants:n.priorAuthorizationImplants.concat(r)})),this.updatePriorAuthorizationImplants=this.updater((n,r)=>Object.assign(Object.assign({},n),{priorAuthorizationImplants:n.priorAuthorizationImplants.map(m=>r.find(v=>v.id===m.id)||m)})),this.setSearchQuery=this.updater((n,r)=>Object.assign(Object.assign({},n),{searchQuery:r})),this.loadPriorAuthorizationImplantEffect=this.effect(n=>n.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(r=>this.data.userPriorAuthorizationImplant({priorAuthorizationImplantId:r}).pipe((0,b._b)(m=>{this.patchState({item:m.data.item,errors:m.errors,loading:!1})},m=>this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})))))),this.loadPriorAuthorizationImplantsEffect=this.effect(n=>n.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.input$),(0,h.w)(([r,m])=>this.data.userPriorAuthorizationImplants({input:m}).pipe((0,b._b)(p=>this.patchState({paging:{limit:m.limit,skip:m.skip,total:p.data.count.total},priorAuthorizationImplants:p.data.items,errors:p.errors,loading:!1}),p=>this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})))))),this.createPriorAuthorizationImplantEffect=this.effect(n=>n.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(r=>this.priorAuthorizationImplantService.createPriorAuthorizationImplant(Object.assign({},r)).pipe((0,b._b)(m=>{this.addNewPriorAuthorizationImplant(m),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:m,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},m=>{m.graphQLErrors?(this.toast.error(m.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})):(this.toast.error(m.Message),this.formService.setErrors(m.Data))}))))),this.updatePriorAuthorizationImplantEffect=this.effect(n=>n.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([r,m])=>this.priorAuthorizationImplantService.updatePriorAuthorizationImplant(r,r.id).pipe((0,b._b)(p=>{this.updatePriorAuthorizationImplant(p),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:p,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},p=>{p.graphQLErrors?(this.toast.error(p.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})):(this.toast.error(p.Message),this.formService.setErrors(p.Data))}))))),this.deletePriorAuthorizationImplantEffect=this.effect(n=>n.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([r,m])=>this.data.userDeletePriorAuthorizationImplant({priorAuthorizationImplantId:m.id}).pipe((0,b._b)(p=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:p.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},p=>{p.graphQLErrors?(this.toast.error(p.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})):(this.toast.error(p.Message),this.formService.setErrors(p.Data))}))))),this.importExcelEffect=this.effect(n=>n.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(r=>this.priorAuthorizationImplantService.importPriorAuthorizationImplants(r).pipe((0,de.K)(m=>{var p;return this.toast.error(null!==(p=m.Message)&&void 0!==p?p:"Failed to save",{duration:3e3}),q.E}),(0,y.b)(m=>{const p=JSON.parse(m.created),v=JSON.parse(m.updated),I=JSON.parse(m.failed),B=p.length+v.length+I.length;this.addPriorAuthorizationImplants(p),this.updatePriorAuthorizationImplants(v),this.toast.success(`${p.length} created, ${v.length} updated, ${I.length} failed of total ${B}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("priorAuthorizationImplantId")?(this.route.snapshot.paramMap.get("priorAuthorizationImplantId"),this.setFormName("priorAuthorizationImplant_edit")):this.setFormName("priorAuthorizationImplant_create"),this.route.snapshot.paramMap.has("implantId")){var c=this.route.snapshot.paramMap.get("implantId");this.setImplantId(c)}if(this.route.snapshot.paramMap.has("priorAuthorizationRequestId")){var u=this.route.snapshot.paramMap.get("priorAuthorizationRequestId");this.setPriorAuthorizationRequestId(u)}}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.priorAuthorizationImplantService.validatePriorAuthorizationImplantExcelData(t,i.implants,i.priorAuthorizationRequests)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(z.q),e.LFG(O.F0),e.LFG(O.gz),e.LFG(X.F),e.LFG(Z.o),e.LFG(sJ))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function oJ(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.close.emit())})("formIsReady",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.priorAuthorizationImplant)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let ou=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"priorAuthorizationImplant_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.priorAuthorizationImplant=i.item})):t.formName&&t.formName.currentValue&&"priorAuthorizationImplant_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadPriorAuthorizationImplantEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.priorAuthorizationImplant=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(sa),e.Y36(O.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-prior-authorization-implant-form"]],inputs:{priorAuthorizationImplant:"priorAuthorizationImplant",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,oJ,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[P.O5,te.M,P.Ov],encapsulation:2}),s})(),au=(()=>{class s{constructor(){this.autoHeight=!1,this.priorAuthorizationImplants=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[{field:"implant.name",headerName:"Implant",filter:"agTextColumnFilter"},{field:"priorAuthorizationRequest.name",headerName:"Prior Authorization Request",filter:"agTextColumnFilter"},{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{headerName:"Estimated Cost",field:"estimatedCost",valueFormatter:t=>{var i;return(0,_.oBD)(null===(i=t.data)||void 0===i?void 0:i.estimatedCost,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{field:"implantId",filter:"agTextColumnFilter",hide:!0},{field:"priorAuthorizationRequestId",filter:"agTextColumnFilter",hide:!0}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var a;t.includes(null===(a=i.data)||void 0===a?void 0:a.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-prior-authorization-implant-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(f.x,5),2&t){let a;e.iGM(a=e.CRH())&&(i.tableView=a.first)}},inputs:{autoHeight:"autoHeight",priorAuthorizationImplants:"priorAuthorizationImplants"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.priorAuthorizationImplants)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[f.x],encapsulation:2}),s})();function aJ(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-prior-authorization-implant-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","priorAuthorizationImplant_edit")("formControl",t.formControl)("priorAuthorizationImplant",t.priorAuthorizationImplant)}}const rJ=function(){return{}};function nJ(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-prior-authorization-implant-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","priorAuthorizationImplant_create")("formControl",t.formControl)("priorAuthorizationImplant",e.DdM(3,rJ))}}function lJ(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-prior-authorization-implant-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(d.ref.close())}),e.qZA()}2&s&&e.Q6J("priorAuthorizationImplants",o.data.items)}let cJ=(()=>{class s extends G.fS{constructor(t){super(),this.store=t,this.store.loadPriorAuthorizationImplantsEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.priorAuthorizationImplants$.pipe((0,h.w)(i=>(0,D.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(sa))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","priorAuthorizationImplant","send","close"],[1,"w-full","h-full","bg-white",3,"priorAuthorizationImplants","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,aJ,2,3,"ng-template",null,1,e.W1O),e.YNc(3,nJ,1,4,"ng-template",null,2,e.W1O),e.YNc(5,lJ,1,1,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",d)("editTemplate",a)("createTemplate",l)("key",i.field.key)}},dependencies:[E.JJ,E.oH,H.$,ou,au],encapsulation:2}),s})();function dJ(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-prior-authorization-implant-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","priorAuthorizationImplant_edit")("priorAuthorizationImplant",t.value)}}const uJ=function(){return{}};function mJ(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-prior-authorization-implant-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","priorAuthorizationImplant_create")("priorAuthorizationImplant",e.DdM(2,uJ))}function pJ(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-prior-authorization-implant-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(null==d.ref?null:d.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("priorAuthorizationImplants",t.items)}}let hJ=(()=>{class s extends pe{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","priorAuthorizationImplant","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","priorAuthorizationImplants","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,dJ,1,2,"ng-template",null,1,e.W1O),e.YNc(3,mJ,1,3,"ng-template",null,2,e.W1O),e.YNc(5,pJ,1,2,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[he,ou,au],encapsulation:2}),s})(),fJ=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[sa],imports:[P.ez,U.F,E.UX,J.o,ae.u,$.P,j.t,me,k.h,se.G,G.X0.forChild({types:[{name:"prior-authorization-implant-select",component:cJ,wrappers:["form-field"]},{name:"prior-authorization-implant-grid",component:hJ}]})]}),s})(),_J=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[fJ]}),s})();class Qi extends W.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class gJ extends Qi{constructor(o,t,i,a){super("ValidatePriorAuthorizationProcedureCodeExcelDataAction"),this.valid=!1,this.excelData=o,this.costCategories=t,this.procedures=i,this.priorAuthorizationRequests=a}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name),this.validationContext.addRule(new g.mi(`costCategoryName_${i}_is_valid}`,"Cost Category Is Not Valid","costCategory.name",t.costCategory,this.costCategories,!0)),this.validationContext.addRule(new g.mi(`procedureName_${i}_is_valid}`,"Procedure Is Not Valid","procedure.name",t.procedure,this.procedures,!0)),this.validationContext.addRule(new g.mi(`priorAuthorizationRequestName_${i}_is_valid}`,"Prior Authorization Request Is Not Valid","priorAuthorizationRequest.name",t.priorAuthorizationRequest,this.priorAuthorizationRequests,!0))}),this.validationContext.addRule(new g.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof g.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(a=>a.name),newNames:[i.newName]}):i instanceof g.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,D.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class vJ extends g.wS{constructor(o,t,i,a,l){super(o,t,i,a,l,!0)}}class CJ extends g.ul{constructor(o,t,i,a=!1){super(o,t,a),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new g.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new vJ("name","The priorauthorizationprocedurecode name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class SJ extends Qi{constructor(o){super("CreatePriorAuthorizationProcedureCodeAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new CJ("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreatePriorAuthorizationProcedureCode({input:this.input}).pipe((0,h.w)(o=>(0,ue.of)(o.data.created)))}}class bJ extends Qi{constructor(o){super("UpdatePriorAuthorizationProcedureCodesAction"),this.priorAuthorizationProcedureCodes=o}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.priorAuthorizationProcedureCodes,!0))}performAction(){this.response=this.businessProvider.data.userUpdatePriorAuthorizationProcedureCodes({input:{priorAuthorizationProcedureCodes:this.priorAuthorizationProcedureCodes}}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}class TJ extends Qi{constructor(o,t){super("UpdatePriorAuthorizationProcedureCodeAction"),this.priorAuthorizationProcedureCode=o,this.priorAuthorizationProcedureCodeId=t}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.priorAuthorizationProcedureCode,!0)).addRule(new g.xF("Id","Id should be a CUID and not null",this.priorAuthorizationProcedureCodeId,!0))}performAction(){this.response=this.businessProvider.data.userUpdatePriorAuthorizationProcedureCode({priorAuthorizationProcedureCodeId:this.priorAuthorizationProcedureCodeId,input:this.priorAuthorizationProcedureCode}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}let ru=(()=>{class s extends W.nH{constructor(t,i,a){super("NotificationService.PriorAuthorizationProcedureCodeBusinessProviderService",t,a),this.data=i}createPriorAuthorizationProcedureCode(t){const i=new SJ(t);return i.Do(this),i.response}updatePriorAuthorizationProcedureCode(t,i){const a=new TJ(t,i);return a.Do(this),a.response}importPriorAuthorizationProcedureCodes(t){const i=new bJ(t);return i.Do(this),i.response}validatePriorAuthorizationProcedureCodeExcelData(t,i,a,l){const d=new gJ(t,i,a,l);return d.Do(this),d.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(K.ed),e.LFG(z.q),e.LFG(W.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),yJ=(()=>{class s extends W.nH{constructor(t,i,a){super("PriorAuthorizationProcedureCodeService",a,t),this.businessProvider=i}createPriorAuthorizationProcedureCode(t){const i=Object.fromEntries(Object.entries(t).filter(([a,l])=>null!==l));return this.businessProvider.createPriorAuthorizationProcedureCode(i)}updatePriorAuthorizationProcedureCode(t,i){return this.businessProvider.updatePriorAuthorizationProcedureCode(t,i)}importPriorAuthorizationProcedureCodes(t){return this.businessProvider.importPriorAuthorizationProcedureCodes(t)}validatePriorAuthorizationProcedureCodeExcelData(t,i,a,l){return this.businessProvider.validatePriorAuthorizationProcedureCodeExcelData(t,i,a,l)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(ru,8),e.LFG(ru),e.LFG(K.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),oa=(()=>{class s extends b.m1{constructor(t,i,a,l,d,ee){if(super({loading:!1,priorAuthorizationProcedureCodes:[],done:!1,searchQuery:"",formName:void 0,costCategoryId:void 0,procedureId:void 0,priorAuthorizationRequestId:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=a,this.toast=l,this.formService=d,this.priorAuthorizationProcedureCodeService=ee,this.errors$=this.select(r=>r.errors),this.loading$=this.select(r=>r.loading),this.done$=this.select(r=>r.done),this.item$=this.select(r=>r.item),this.priorAuthorizationProcedureCodes$=this.select(r=>r.priorAuthorizationProcedureCodes),this.costCategories$=this.select(r=>r.costCategories||[]),this.procedures$=this.select(r=>r.procedures||[]),this.priorAuthorizationRequests$=this.select(r=>r.priorAuthorizationRequests||[]),this.costCategoryId$=this.select(r=>r.costCategoryId),this.procedureId$=this.select(r=>r.procedureId),this.priorAuthorizationRequestId$=this.select(r=>r.priorAuthorizationRequestId),this.paging$=this.select(r=>r.paging),this.searchQuery$=this.select(r=>r.searchQuery),this.formName$=this.select(r=>r.formName),this.actionResult$=this.select(this.item$,this.done$,(r,m)=>({item:r,done:m}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.priorAuthorizationProcedureCodes$,this.costCategories$,this.procedures$,this.priorAuthorizationRequests$,(r,m,p,v,I,B,_e,Ne)=>({errors:r,loading:m,item:p,formName:v,priorAuthorizationProcedureCodes:I,costCategories:B,procedures:_e,priorAuthorizationRequests:Ne}),{debounce:!0}),this.input$=this.select(this.paging$,this.costCategoryId$,this.procedureId$,this.priorAuthorizationRequestId$,this.searchQuery$,(r,m,p,v,I)=>({limit:r.limit,skip:r.skip,name:I,costCategoryId:m,procedureId:p,priorAuthorizationRequestId:v,total:r.total})),this.setFormName=this.updater((r,m)=>Object.assign(Object.assign({},r),{formName:m})),this.setCostCategoryId=this.updater((r,m)=>Object.assign(Object.assign({},r),{costCategoryId:m})),this.setProcedureId=this.updater((r,m)=>Object.assign(Object.assign({},r),{procedureId:m})),this.setPriorAuthorizationRequestId=this.updater((r,m)=>Object.assign(Object.assign({},r),{priorAuthorizationRequestId:m})),this.filterCostCategories=r=>this.data.userSelectCostCategories({input:{name:r}}).pipe((0,b._b)(m=>{let p=m.data.items;return this.patchState({costCategories:p}),p},m=>this.patchState({errors:m.graphQLErrors?m.graphQLErrors:m})),(0,fe.U)(m=>m.data.items)),this.filterProcedures=r=>this.data.userSelectProcedures({input:{name:r}}).pipe((0,b._b)(m=>{let p=m.data.items;return this.patchState({procedures:p}),p},m=>this.patchState({errors:m.graphQLErrors?m.graphQLErrors:m})),(0,fe.U)(m=>m.data.items)),this.filterPriorAuthorizationRequests=r=>this.data.userSelectPriorAuthorizationRequests({input:{name:r}}).pipe((0,b._b)(m=>{let p=m.data.items;return this.patchState({priorAuthorizationRequests:p}),p},m=>this.patchState({errors:m.graphQLErrors?m.graphQLErrors:m})),(0,fe.U)(m=>m.data.items)),this.addCostCategory=this.updater((r,m)=>Object.assign(Object.assign({},r),{costCategories:r.costCategories.concat(m)})),this.addProcedure=this.updater((r,m)=>Object.assign(Object.assign({},r),{procedures:r.procedures.concat(m)})),this.addPriorAuthorizationRequest=this.updater((r,m)=>Object.assign(Object.assign({},r),{priorAuthorizationRequests:r.priorAuthorizationRequests.concat(m)})),this.setItem=this.updater((r,m)=>Object.assign(Object.assign({},r),{item:m})),this.addNewPriorAuthorizationProcedureCode=this.updater((r,m)=>Object.assign(Object.assign({},r),{priorAuthorizationProcedureCodes:[...r.priorAuthorizationProcedureCodes,m]})),this.updatePriorAuthorizationProcedureCode=this.updater((r,m)=>Object.assign(Object.assign({},r),{priorAuthorizationProcedureCodes:r.priorAuthorizationProcedureCodes.map(p=>p.id===m.id?m:p)})),this.addPriorAuthorizationProcedureCodes=this.updater((r,m)=>Object.assign(Object.assign({},r),{priorAuthorizationProcedureCodes:r.priorAuthorizationProcedureCodes.concat(m)})),this.updatePriorAuthorizationProcedureCodes=this.updater((r,m)=>Object.assign(Object.assign({},r),{priorAuthorizationProcedureCodes:r.priorAuthorizationProcedureCodes.map(p=>m.find(I=>I.id===p.id)||p)})),this.setSearchQuery=this.updater((r,m)=>Object.assign(Object.assign({},r),{searchQuery:m})),this.loadPriorAuthorizationProcedureCodeEffect=this.effect(r=>r.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(m=>this.data.userPriorAuthorizationProcedureCode({priorAuthorizationProcedureCodeId:m}).pipe((0,b._b)(p=>{this.patchState({item:p.data.item,errors:p.errors,loading:!1})},p=>this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})))))),this.loadPriorAuthorizationProcedureCodesEffect=this.effect(r=>r.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.input$),(0,h.w)(([m,p])=>this.data.userPriorAuthorizationProcedureCodes({input:p}).pipe((0,b._b)(v=>this.patchState({paging:{limit:p.limit,skip:p.skip,total:v.data.count.total},priorAuthorizationProcedureCodes:v.data.items,errors:v.errors,loading:!1}),v=>this.patchState({loading:!1,errors:v.graphQLErrors?v.graphQLErrors:v})))))),this.createPriorAuthorizationProcedureCodeEffect=this.effect(r=>r.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(m=>this.priorAuthorizationProcedureCodeService.createPriorAuthorizationProcedureCode(Object.assign({},m)).pipe((0,b._b)(p=>{this.addNewPriorAuthorizationProcedureCode(p),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:p,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},p=>{p.graphQLErrors?(this.toast.error(p.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})):(this.toast.error(p.Message),this.formService.setErrors(p.Data))}))))),this.updatePriorAuthorizationProcedureCodeEffect=this.effect(r=>r.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([m,p])=>this.priorAuthorizationProcedureCodeService.updatePriorAuthorizationProcedureCode(m,m.id).pipe((0,b._b)(v=>{this.updatePriorAuthorizationProcedureCode(v),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:v,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},v=>{v.graphQLErrors?(this.toast.error(v.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:v.graphQLErrors?v.graphQLErrors:v})):(this.toast.error(v.Message),this.formService.setErrors(v.Data))}))))),this.deletePriorAuthorizationProcedureCodeEffect=this.effect(r=>r.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([m,p])=>this.data.userDeletePriorAuthorizationProcedureCode({priorAuthorizationProcedureCodeId:p.id}).pipe((0,b._b)(v=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:v.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},v=>{v.graphQLErrors?(this.toast.error(v.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:v.graphQLErrors?v.graphQLErrors:v})):(this.toast.error(v.Message),this.formService.setErrors(v.Data))}))))),this.importExcelEffect=this.effect(r=>r.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(m=>this.priorAuthorizationProcedureCodeService.importPriorAuthorizationProcedureCodes(m).pipe((0,de.K)(p=>{var v;return this.toast.error(null!==(v=p.Message)&&void 0!==v?v:"Failed to save",{duration:3e3}),q.E}),(0,y.b)(p=>{const v=JSON.parse(p.created),I=JSON.parse(p.updated),B=JSON.parse(p.failed),_e=v.length+I.length+B.length;this.addPriorAuthorizationProcedureCodes(v),this.updatePriorAuthorizationProcedureCodes(I),this.toast.success(`${v.length} created, ${I.length} updated, ${B.length} failed of total ${_e}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("priorAuthorizationProcedureCodeId")?(this.route.snapshot.paramMap.get("priorAuthorizationProcedureCodeId"),this.setFormName("priorAuthorizationProcedureCode_edit")):this.setFormName("priorAuthorizationProcedureCode_create"),this.route.snapshot.paramMap.has("costCategoryId")){var c=this.route.snapshot.paramMap.get("costCategoryId");this.setCostCategoryId(c)}if(this.route.snapshot.paramMap.has("procedureId")){var u=this.route.snapshot.paramMap.get("procedureId");this.setProcedureId(u)}if(this.route.snapshot.paramMap.has("priorAuthorizationRequestId")){var n=this.route.snapshot.paramMap.get("priorAuthorizationRequestId");this.setPriorAuthorizationRequestId(n)}}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.priorAuthorizationProcedureCodeService.validatePriorAuthorizationProcedureCodeExcelData(t,i.costCategories,i.procedures,i.priorAuthorizationRequests)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(z.q),e.LFG(O.F0),e.LFG(O.gz),e.LFG(X.F),e.LFG(Z.o),e.LFG(yJ))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function wJ(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.close.emit())})("formIsReady",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.priorAuthorizationProcedureCode)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let nu=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"priorAuthorizationProcedureCode_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.priorAuthorizationProcedureCode=i.item})):t.formName&&t.formName.currentValue&&"priorAuthorizationProcedureCode_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadPriorAuthorizationProcedureCodeEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.priorAuthorizationProcedureCode=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(oa),e.Y36(O.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-prior-authorization-procedure-code-form"]],inputs:{priorAuthorizationProcedureCode:"priorAuthorizationProcedureCode",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,wJ,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[P.O5,te.M,P.Ov],encapsulation:2}),s})(),lu=(()=>{class s{constructor(){this.autoHeight=!1,this.priorAuthorizationProcedureCodes=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[{field:"costCategory.name",headerName:"Cost Category",filter:"agTextColumnFilter"},{field:"procedure.name",headerName:"Procedure",filter:"agTextColumnFilter"},{field:"priorAuthorizationRequest.name",headerName:"Prior Authorization Request",filter:"agTextColumnFilter"},{field:"procedureId",filter:"agTextColumnFilter",hide:!0},{field:"priorAuthorizationRequestId",filter:"agTextColumnFilter",hide:!0},{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{field:"costCategoryId",filter:"agTextColumnFilter",hide:!0},{headerName:"Estimated Cost",field:"estimatedCost",valueFormatter:t=>{var i;return(0,_.oBD)(null===(i=t.data)||void 0===i?void 0:i.estimatedCost,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var a;t.includes(null===(a=i.data)||void 0===a?void 0:a.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-prior-authorization-procedure-code-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(f.x,5),2&t){let a;e.iGM(a=e.CRH())&&(i.tableView=a.first)}},inputs:{autoHeight:"autoHeight",priorAuthorizationProcedureCodes:"priorAuthorizationProcedureCodes"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.priorAuthorizationProcedureCodes)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[f.x],encapsulation:2}),s})();function xJ(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-prior-authorization-procedure-code-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","priorAuthorizationProcedureCode_edit")("formControl",t.formControl)("priorAuthorizationProcedureCode",t.priorAuthorizationProcedureCode)}}const NJ=function(){return{}};function AJ(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-prior-authorization-procedure-code-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","priorAuthorizationProcedureCode_create")("formControl",t.formControl)("priorAuthorizationProcedureCode",e.DdM(3,NJ))}}function FJ(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-prior-authorization-procedure-code-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(d.ref.close())}),e.qZA()}2&s&&e.Q6J("priorAuthorizationProcedureCodes",o.data.items)}let PJ=(()=>{class s extends G.fS{constructor(t){super(),this.store=t,this.store.loadPriorAuthorizationProcedureCodesEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.priorAuthorizationProcedureCodes$.pipe((0,h.w)(i=>(0,D.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(oa))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","priorAuthorizationProcedureCode","send","close"],[1,"w-full","h-full","bg-white",3,"priorAuthorizationProcedureCodes","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,xJ,2,3,"ng-template",null,1,e.W1O),e.YNc(3,AJ,1,4,"ng-template",null,2,e.W1O),e.YNc(5,FJ,1,1,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",d)("editTemplate",a)("createTemplate",l)("key",i.field.key)}},dependencies:[E.JJ,E.oH,H.$,nu,lu],encapsulation:2}),s})();function IJ(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-prior-authorization-procedure-code-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","priorAuthorizationProcedureCode_edit")("priorAuthorizationProcedureCode",t.value)}}const DJ=function(){return{}};function MJ(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-prior-authorization-procedure-code-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","priorAuthorizationProcedureCode_create")("priorAuthorizationProcedureCode",e.DdM(2,DJ))}function WJ(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-prior-authorization-procedure-code-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(null==d.ref?null:d.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("priorAuthorizationProcedureCodes",t.items)}}let EJ=(()=>{class s extends pe{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","priorAuthorizationProcedureCode","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","priorAuthorizationProcedureCodes","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,IJ,1,2,"ng-template",null,1,e.W1O),e.YNc(3,MJ,1,3,"ng-template",null,2,e.W1O),e.YNc(5,WJ,1,2,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[he,nu,lu],encapsulation:2}),s})(),OJ=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[oa],imports:[P.ez,U.F,E.UX,J.o,ae.u,$.P,j.t,me,k.h,se.G,G.X0.forChild({types:[{name:"prior-authorization-procedure-code-select",component:PJ,wrappers:["form-field"]},{name:"prior-authorization-procedure-code-grid",component:EJ}]})]}),s})(),LJ=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[OJ]}),s})();class Vi extends W.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class $J extends Vi{constructor(o,t,i,a,l,d,ee,V,c,u,n,r){super("ValidatePriorAuthorizationRequestExcelDataAction"),this.valid=!1,this.excelData=o,this.procedureSites=t,this.surgicalPositions=i,this.treatingProviders=a,this.referredTos=l,this.prescriptions=d,this.visitKinds=ee,this.guidelineUseds=V,this.authorizationKinds=c,this.authorizationStatuses=u,this.patients=n,this.caseProcedures=r}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name),this.validationContext.addRule(new g.mi(`procedureSiteName_${i}_is_valid}`,"Procedure Site Is Not Valid","procedureSite.name",t.procedureSite,this.procedureSites,!0)),this.validationContext.addRule(new g.mi(`surgicalPositionName_${i}_is_valid}`,"Surgical Position Is Not Valid","surgicalPosition.name",t.surgicalPosition,this.surgicalPositions,!0)),this.validationContext.addRule(new g.mi(`treatingProviderName_${i}_is_valid}`,"Treating Provider Is Not Valid","treatingProvider.name",t.treatingProvider,this.treatingProviders,!0)),this.validationContext.addRule(new g.mi(`referredToName_${i}_is_valid}`,"Referred to Is Not Valid","referredTo.name",t.referredTo,this.referredTos,!0)),this.validationContext.addRule(new g.mi(`prescriptionName_${i}_is_valid}`,"Prescription Is Not Valid","prescription.name",t.prescription,this.prescriptions,!0)),this.validationContext.addRule(new g.mi(`visitKindName_${i}_is_valid}`,"Visit Kind Is Not Valid","visitKind.name",t.visitKind,this.visitKinds,!0)),this.validationContext.addRule(new g.mi(`guidelineUsedName_${i}_is_valid}`,"Guideline Used Is Not Valid","guidelineUsed.name",t.guidelineUsed,this.guidelineUseds,!0)),this.validationContext.addRule(new g.mi(`authorizationKindName_${i}_is_valid}`,"Authorization Kind Is Not Valid","authorizationKind.name",t.authorizationKind,this.authorizationKinds,!0)),this.validationContext.addRule(new g.mi(`authorizationStatusName_${i}_is_valid}`,"Authorization Status Is Not Valid","authorizationStatus.name",t.authorizationStatus,this.authorizationStatuses,!0)),this.validationContext.addRule(new g.mi(`patientName_${i}_is_valid}`,"Patient Is Not Valid","patient.name",t.patient,this.patients,!0)),this.validationContext.addRule(new g.mi(`caseProcedureName_${i}_is_valid}`,"Case Procedure Is Not Valid","caseProcedure.name",t.caseProcedure,this.caseProcedures,!0))}),this.validationContext.addRule(new g.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof g.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(a=>a.name),newNames:[i.newName]}):i instanceof g.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,D.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class GJ extends g.wS{constructor(o,t,i,a,l){super(o,t,i,a,l,!0)}}class RJ extends g.ul{constructor(o,t,i,a=!1){super(o,t,a),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new g.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new GJ("name","The priorauthorizationrequest name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class QJ extends Vi{constructor(o){super("CreatePriorAuthorizationRequestAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new RJ("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreatePriorAuthorizationRequest({input:this.input}).pipe((0,h.w)(o=>(0,ue.of)(o.data.created)))}}class VJ extends Vi{constructor(o){super("UpdatePriorAuthorizationRequestsAction"),this.priorAuthorizationRequests=o}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.priorAuthorizationRequests,!0))}performAction(){this.response=this.businessProvider.data.userUpdatePriorAuthorizationRequests({input:{priorAuthorizationRequests:this.priorAuthorizationRequests}}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}class jJ extends Vi{constructor(o,t){super("UpdatePriorAuthorizationRequestAction"),this.priorAuthorizationRequest=o,this.priorAuthorizationRequestId=t}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.priorAuthorizationRequest,!0)).addRule(new g.xF("Id","Id should be a CUID and not null",this.priorAuthorizationRequestId,!0))}performAction(){this.response=this.businessProvider.data.userUpdatePriorAuthorizationRequest({priorAuthorizationRequestId:this.priorAuthorizationRequestId,input:this.priorAuthorizationRequest}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}let cu=(()=>{class s extends W.nH{constructor(t,i,a){super("NotificationService.PriorAuthorizationRequestBusinessProviderService",t,a),this.data=i}createPriorAuthorizationRequest(t){const i=new QJ(t);return i.Do(this),i.response}updatePriorAuthorizationRequest(t,i){const a=new jJ(t,i);return a.Do(this),a.response}importPriorAuthorizationRequests(t){const i=new VJ(t);return i.Do(this),i.response}validatePriorAuthorizationRequestExcelData(t,i,a,l,d,ee,V,c,u,n,r,m){const p=new $J(t,i,a,l,d,ee,V,c,u,n,r,m);return p.Do(this),p.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(K.ed),e.LFG(z.q),e.LFG(W.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),UJ=(()=>{class s extends W.nH{constructor(t,i,a){super("PriorAuthorizationRequestService",a,t),this.businessProvider=i}createPriorAuthorizationRequest(t){const i=Object.fromEntries(Object.entries(t).filter(([a,l])=>null!==l));return this.businessProvider.createPriorAuthorizationRequest(i)}updatePriorAuthorizationRequest(t,i){return this.businessProvider.updatePriorAuthorizationRequest(t,i)}importPriorAuthorizationRequests(t){return this.businessProvider.importPriorAuthorizationRequests(t)}validatePriorAuthorizationRequestExcelData(t,i,a,l,d,ee,V,c,u,n,r,m){return this.businessProvider.validatePriorAuthorizationRequestExcelData(t,i,a,l,d,ee,V,c,u,n,r,m)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(cu,8),e.LFG(cu),e.LFG(K.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),aa=(()=>{class s extends b.m1{constructor(t,i,a,l,d,ee){if(super({loading:!1,priorAuthorizationRequests:[],done:!1,searchQuery:"",formName:void 0,procedureSiteId:void 0,surgicalPositionId:void 0,treatingProviderId:void 0,referredToId:void 0,prescriptionId:void 0,visitKindId:void 0,guidelineUsedId:void 0,authorizationKindId:void 0,authorizationStatusId:void 0,billId:void 0,medicalReportId:void 0,patientId:void 0,caseProcedureId:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=a,this.toast=l,this.formService=d,this.priorAuthorizationRequestService=ee,this.errors$=this.select(oe=>oe.errors),this.loading$=this.select(oe=>oe.loading),this.done$=this.select(oe=>oe.done),this.item$=this.select(oe=>oe.item),this.priorAuthorizationRequests$=this.select(oe=>oe.priorAuthorizationRequests),this.procedureSites$=this.select(oe=>oe.procedureSites||[]),this.surgicalPositions$=this.select(oe=>oe.surgicalPositions||[]),this.clinicalProviders$=this.select(oe=>oe.clinicalProviders||[]),this.documents$=this.select(oe=>oe.documents||[]),this.visitKinds$=this.select(oe=>oe.visitKinds||[]),this.guidelineUseds$=this.select(oe=>oe.guidelineUseds||[]),this.authorizationKinds$=this.select(oe=>oe.authorizationKinds||[]),this.authorizationStatuses$=this.select(oe=>oe.authorizationStatuses||[]),this.patients$=this.select(oe=>oe.patients||[]),this.caseProcedures$=this.select(oe=>oe.caseProcedures||[]),this.procedureSiteId$=this.select(oe=>oe.procedureSiteId),this.surgicalPositionId$=this.select(oe=>oe.surgicalPositionId),this.treatingProviderId$=this.select(oe=>oe.treatingProviderId),this.referredToId$=this.select(oe=>oe.referredToId),this.prescriptionId$=this.select(oe=>oe.prescriptionId),this.visitKindId$=this.select(oe=>oe.visitKindId),this.guidelineUsedId$=this.select(oe=>oe.guidelineUsedId),this.authorizationKindId$=this.select(oe=>oe.authorizationKindId),this.authorizationStatusId$=this.select(oe=>oe.authorizationStatusId),this.billId$=this.select(oe=>oe.billId),this.medicalReportId$=this.select(oe=>oe.medicalReportId),this.patientId$=this.select(oe=>oe.patientId),this.caseProcedureId$=this.select(oe=>oe.caseProcedureId),this.paging$=this.select(oe=>oe.paging),this.searchQuery$=this.select(oe=>oe.searchQuery),this.formName$=this.select(oe=>oe.formName),this.actionResult$=this.select(this.item$,this.done$,(oe,ne)=>({item:oe,done:ne}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.priorAuthorizationRequests$,this.procedureSites$,this.surgicalPositions$,this.clinicalProviders$,this.documents$,this.visitKinds$,this.guidelineUseds$,this.authorizationKinds$,this.authorizationStatuses$,this.patients$,this.caseProcedures$,(oe,ne,ve,Te,Oe,Ge,Ve,ze,He,qe,Ke,Be,ke,Ye,Ma)=>({errors:oe,loading:ne,item:ve,formName:Te,priorAuthorizationRequests:Oe,procedureSites:Ge,surgicalPositions:Ve,clinicalProviders:ze,documents:He,visitKinds:qe,guidelineUseds:Ke,authorizationKinds:Be,authorizationStatuses:ke,patients:Ye,caseProcedures:Ma}),{debounce:!0}),this.input$=this.select(this.paging$,this.procedureSiteId$,this.surgicalPositionId$,this.treatingProviderId$,this.referredToId$,this.prescriptionId$,this.visitKindId$,this.guidelineUsedId$,this.authorizationKindId$,this.authorizationStatusId$,this.billId$,this.medicalReportId$,this.patientId$,this.caseProcedureId$,this.searchQuery$,(oe,ne,ve,Te,Oe,Ge,Ve,ze,He,qe,Ke,Be,ke,Ye,Ma)=>({limit:oe.limit,skip:oe.skip,name:Ma,procedureSiteId:ne,surgicalPositionId:ve,treatingProviderId:Te,referredToId:Oe,prescriptionId:Ge,visitKindId:Ve,guidelineUsedId:ze,authorizationKindId:He,authorizationStatusId:qe,billId:Ke,medicalReportId:Be,patientId:ke,caseProcedureId:Ye,total:oe.total})),this.setFormName=this.updater((oe,ne)=>Object.assign(Object.assign({},oe),{formName:ne})),this.setProcedureSiteId=this.updater((oe,ne)=>Object.assign(Object.assign({},oe),{procedureSiteId:ne})),this.setSurgicalPositionId=this.updater((oe,ne)=>Object.assign(Object.assign({},oe),{surgicalPositionId:ne})),this.setTreatingProviderId=this.updater((oe,ne)=>Object.assign(Object.assign({},oe),{treatingProviderId:ne})),this.setReferredToId=this.updater((oe,ne)=>Object.assign(Object.assign({},oe),{referredToId:ne})),this.setPrescriptionId=this.updater((oe,ne)=>Object.assign(Object.assign({},oe),{prescriptionId:ne})),this.setVisitKindId=this.updater((oe,ne)=>Object.assign(Object.assign({},oe),{visitKindId:ne})),this.setGuidelineUsedId=this.updater((oe,ne)=>Object.assign(Object.assign({},oe),{guidelineUsedId:ne})),this.setAuthorizationKindId=this.updater((oe,ne)=>Object.assign(Object.assign({},oe),{authorizationKindId:ne})),this.setAuthorizationStatusId=this.updater((oe,ne)=>Object.assign(Object.assign({},oe),{authorizationStatusId:ne})),this.setBillId=this.updater((oe,ne)=>Object.assign(Object.assign({},oe),{billId:ne})),this.setMedicalReportId=this.updater((oe,ne)=>Object.assign(Object.assign({},oe),{medicalReportId:ne})),this.setPatientId=this.updater((oe,ne)=>Object.assign(Object.assign({},oe),{patientId:ne})),this.setCaseProcedureId=this.updater((oe,ne)=>Object.assign(Object.assign({},oe),{caseProcedureId:ne})),this.filterProcedureSites=oe=>this.data.userSelectProcedureSites({input:{name:oe}}).pipe((0,b._b)(ne=>{let ve=ne.data.items;return this.patchState({procedureSites:ve}),ve},ne=>this.patchState({errors:ne.graphQLErrors?ne.graphQLErrors:ne})),(0,fe.U)(ne=>ne.data.items)),this.filterSurgicalPositions=oe=>this.data.userSelectSurgicalPositions({input:{name:oe}}).pipe((0,b._b)(ne=>{let ve=ne.data.items;return this.patchState({surgicalPositions:ve}),ve},ne=>this.patchState({errors:ne.graphQLErrors?ne.graphQLErrors:ne})),(0,fe.U)(ne=>ne.data.items)),this.filterClinicalProviders=oe=>this.data.userSelectClinicalProviders({input:{name:oe}}).pipe((0,b._b)(ne=>{let ve=ne.data.items;return this.patchState({clinicalProviders:ve}),ve},ne=>this.patchState({errors:ne.graphQLErrors?ne.graphQLErrors:ne})),(0,fe.U)(ne=>ne.data.items)),this.filterDocuments=oe=>this.data.userSelectDocuments({input:{name:oe}}).pipe((0,b._b)(ne=>{let ve=ne.data.items;return this.patchState({documents:ve}),ve},ne=>this.patchState({errors:ne.graphQLErrors?ne.graphQLErrors:ne})),(0,fe.U)(ne=>ne.data.items)),this.filterVisitKinds=oe=>this.data.userSelectVisitKinds({input:{name:oe}}).pipe((0,b._b)(ne=>{let ve=ne.data.items;return this.patchState({visitKinds:ve}),ve},ne=>this.patchState({errors:ne.graphQLErrors?ne.graphQLErrors:ne})),(0,fe.U)(ne=>ne.data.items)),this.filterGuidelineUseds=oe=>this.data.userSelectGuidelineUseds({input:{name:oe}}).pipe((0,b._b)(ne=>{let ve=ne.data.items;return this.patchState({guidelineUseds:ve}),ve},ne=>this.patchState({errors:ne.graphQLErrors?ne.graphQLErrors:ne})),(0,fe.U)(ne=>ne.data.items)),this.filterAuthorizationKinds=oe=>this.data.userSelectAuthorizationKinds({input:{name:oe}}).pipe((0,b._b)(ne=>{let ve=ne.data.items;return this.patchState({authorizationKinds:ve}),ve},ne=>this.patchState({errors:ne.graphQLErrors?ne.graphQLErrors:ne})),(0,fe.U)(ne=>ne.data.items)),this.filterAuthorizationStatuses=oe=>this.data.userSelectAuthorizationStatuses({input:{name:oe}}).pipe((0,b._b)(ne=>{let ve=ne.data.items;return this.patchState({authorizationStatuses:ve}),ve},ne=>this.patchState({errors:ne.graphQLErrors?ne.graphQLErrors:ne})),(0,fe.U)(ne=>ne.data.items)),this.filterPatients=oe=>this.data.userSelectPatients({input:{name:oe}}).pipe((0,b._b)(ne=>{let ve=ne.data.items;return this.patchState({patients:ve}),ve},ne=>this.patchState({errors:ne.graphQLErrors?ne.graphQLErrors:ne})),(0,fe.U)(ne=>ne.data.items)),this.filterCaseProcedures=oe=>this.data.userSelectCaseProcedures({input:{name:oe}}).pipe((0,b._b)(ne=>{let ve=ne.data.items;return this.patchState({caseProcedures:ve}),ve},ne=>this.patchState({errors:ne.graphQLErrors?ne.graphQLErrors:ne})),(0,fe.U)(ne=>ne.data.items)),this.addProcedureSite=this.updater((oe,ne)=>Object.assign(Object.assign({},oe),{procedureSites:oe.procedureSites.concat(ne)})),this.addSurgicalPosition=this.updater((oe,ne)=>Object.assign(Object.assign({},oe),{surgicalPositions:oe.surgicalPositions.concat(ne)})),this.addClinicalProvider=this.updater((oe,ne)=>Object.assign(Object.assign({},oe),{clinicalProviders:oe.clinicalProviders.concat(ne)})),this.addDocument=this.updater((oe,ne)=>Object.assign(Object.assign({},oe),{documents:oe.documents.concat(ne)})),this.addVisitKind=this.updater((oe,ne)=>Object.assign(Object.assign({},oe),{visitKinds:oe.visitKinds.concat(ne)})),this.addGuidelineUsed=this.updater((oe,ne)=>Object.assign(Object.assign({},oe),{guidelineUseds:oe.guidelineUseds.concat(ne)})),this.addAuthorizationKind=this.updater((oe,ne)=>Object.assign(Object.assign({},oe),{authorizationKinds:oe.authorizationKinds.concat(ne)})),this.addAuthorizationStatus=this.updater((oe,ne)=>Object.assign(Object.assign({},oe),{authorizationStatuses:oe.authorizationStatuses.concat(ne)})),this.addPatient=this.updater((oe,ne)=>Object.assign(Object.assign({},oe),{patients:oe.patients.concat(ne)})),this.addCaseProcedure=this.updater((oe,ne)=>Object.assign(Object.assign({},oe),{caseProcedures:oe.caseProcedures.concat(ne)})),this.setItem=this.updater((oe,ne)=>Object.assign(Object.assign({},oe),{item:ne})),this.addNewPriorAuthorizationRequest=this.updater((oe,ne)=>Object.assign(Object.assign({},oe),{priorAuthorizationRequests:[...oe.priorAuthorizationRequests,ne]})),this.updatePriorAuthorizationRequest=this.updater((oe,ne)=>Object.assign(Object.assign({},oe),{priorAuthorizationRequests:oe.priorAuthorizationRequests.map(ve=>ve.id===ne.id?ne:ve)})),this.addPriorAuthorizationRequests=this.updater((oe,ne)=>Object.assign(Object.assign({},oe),{priorAuthorizationRequests:oe.priorAuthorizationRequests.concat(ne)})),this.updatePriorAuthorizationRequests=this.updater((oe,ne)=>Object.assign(Object.assign({},oe),{priorAuthorizationRequests:oe.priorAuthorizationRequests.map(ve=>ne.find(Oe=>Oe.id===ve.id)||ve)})),this.setSearchQuery=this.updater((oe,ne)=>Object.assign(Object.assign({},oe),{searchQuery:ne})),this.loadPriorAuthorizationRequestEffect=this.effect(oe=>oe.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(ne=>this.data.userPriorAuthorizationRequest({priorAuthorizationRequestId:ne}).pipe((0,b._b)(ve=>(console.log("-----------------------------------"),console.log(ve.data.item),this.patchState({item:ve.data.item,errors:ve.errors,loading:!1})),ve=>this.patchState({loading:!1,errors:ve.graphQLErrors?ve.graphQLErrors:ve})))))),this.loadPriorAuthorizationRequestsEffect=this.effect(oe=>oe.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.input$),(0,h.w)(([ne,ve])=>this.data.userPriorAuthorizationRequests({input:ve}).pipe((0,b._b)(Te=>this.patchState({paging:{limit:ve.limit,skip:ve.skip,total:Te.data.count.total},priorAuthorizationRequests:Te.data.items,errors:Te.errors,loading:!1}),Te=>this.patchState({loading:!1,errors:Te.graphQLErrors?Te.graphQLErrors:Te})))))),this.createPriorAuthorizationRequestEffect=this.effect(oe=>oe.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(ne=>this.priorAuthorizationRequestService.createPriorAuthorizationRequest(Object.assign({},ne)).pipe((0,b._b)(ve=>{this.addNewPriorAuthorizationRequest(ve),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:ve,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},ve=>{ve.graphQLErrors?(this.toast.error(ve.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:ve.graphQLErrors?ve.graphQLErrors:ve})):(this.toast.error(ve.Message),this.formService.setErrors(ve.Data))}))))),this.updatePriorAuthorizationRequestEffect=this.effect(oe=>oe.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([ne,ve])=>this.priorAuthorizationRequestService.updatePriorAuthorizationRequest(ne,ne.id).pipe((0,b._b)(Te=>{this.updatePriorAuthorizationRequest(Te),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:Te,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},Te=>{Te.graphQLErrors?(this.toast.error(Te.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:Te.graphQLErrors?Te.graphQLErrors:Te})):(this.toast.error(Te.Message),this.formService.setErrors(Te.Data))}))))),this.deletePriorAuthorizationRequestEffect=this.effect(oe=>oe.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([ne,ve])=>this.data.userDeletePriorAuthorizationRequest({priorAuthorizationRequestId:ve.id}).pipe((0,b._b)(Te=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:Te.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},Te=>{Te.graphQLErrors?(this.toast.error(Te.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:Te.graphQLErrors?Te.graphQLErrors:Te})):(this.toast.error(Te.Message),this.formService.setErrors(Te.Data))}))))),this.importExcelEffect=this.effect(oe=>oe.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(ne=>this.priorAuthorizationRequestService.importPriorAuthorizationRequests(ne).pipe((0,de.K)(ve=>{var Te;return this.toast.error(null!==(Te=ve.Message)&&void 0!==Te?Te:"Failed to save",{duration:3e3}),q.E}),(0,y.b)(ve=>{const Te=JSON.parse(ve.created),Oe=JSON.parse(ve.updated),Ge=JSON.parse(ve.failed),Ve=Te.length+Oe.length+Ge.length;this.addPriorAuthorizationRequests(Te),this.updatePriorAuthorizationRequests(Oe),this.toast.success(`${Te.length} created, ${Oe.length} updated, ${Ge.length} failed of total ${Ve}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("priorAuthorizationRequestId")?(this.route.snapshot.paramMap.get("priorAuthorizationRequestId"),this.setFormName("priorAuthorizationRequest_edit")):this.setFormName("priorAuthorizationRequest_create"),this.route.snapshot.paramMap.has("procedureSiteId")){var c=this.route.snapshot.paramMap.get("procedureSiteId");this.setProcedureSiteId(c)}if(this.route.snapshot.paramMap.has("surgicalPositionId")){var u=this.route.snapshot.paramMap.get("surgicalPositionId");this.setSurgicalPositionId(u)}if(this.route.snapshot.paramMap.has("treatingProviderId")){var n=this.route.snapshot.paramMap.get("treatingProviderId");this.setTreatingProviderId(n)}if(this.route.snapshot.paramMap.has("referredToId")){var r=this.route.snapshot.paramMap.get("referredToId");this.setReferredToId(r)}if(this.route.snapshot.paramMap.has("prescriptionId")){var m=this.route.snapshot.paramMap.get("prescriptionId");this.setPrescriptionId(m)}if(this.route.snapshot.paramMap.has("visitKindId")){var p=this.route.snapshot.paramMap.get("visitKindId");this.setVisitKindId(p)}if(this.route.snapshot.paramMap.has("guidelineUsedId")){var v=this.route.snapshot.paramMap.get("guidelineUsedId");this.setGuidelineUsedId(v)}if(this.route.snapshot.paramMap.has("authorizationKindId")){var I=this.route.snapshot.paramMap.get("authorizationKindId");this.setAuthorizationKindId(I)}if(this.route.snapshot.paramMap.has("authorizationStatusId")){var B=this.route.snapshot.paramMap.get("authorizationStatusId");this.setAuthorizationStatusId(B)}if(this.route.snapshot.paramMap.has("billId")){var _e=this.route.snapshot.paramMap.get("billId");this.setBillId(_e)}if(this.route.snapshot.paramMap.has("medicalReportId")){var Ne=this.route.snapshot.paramMap.get("medicalReportId");this.setMedicalReportId(Ne)}if(this.route.snapshot.paramMap.has("patientId")){var le=this.route.snapshot.paramMap.get("patientId");this.setPatientId(le)}if(this.route.snapshot.paramMap.has("caseProcedureId")){var ce=this.route.snapshot.paramMap.get("caseProcedureId");this.setCaseProcedureId(ce)}}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.priorAuthorizationRequestService.validatePriorAuthorizationRequestExcelData(t,i.procedureSites,i.surgicalPositions,i.clinicalProviders,i.clinicalProviders,i.documents,i.visitKinds,i.guidelineUseds,i.authorizationKinds,i.authorizationStatuses,i.patients,i.caseProcedures)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(z.q),e.LFG(O.F0),e.LFG(O.gz),e.LFG(X.F),e.LFG(Z.o),e.LFG(UJ))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function JJ(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.close.emit())})("formIsReady",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.priorAuthorizationRequest)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let du=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"priorAuthorizationRequest_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({id:null,name:""}),this.store.vm$.subscribe(i=>{this.priorAuthorizationRequest=i.item})):t.formName&&t.formName.currentValue&&"priorAuthorizationRequest_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadPriorAuthorizationRequestEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.priorAuthorizationRequest=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(aa),e.Y36(O.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-prior-authorization-request-form"]],inputs:{priorAuthorizationRequest:"priorAuthorizationRequest",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,JJ,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[P.O5,te.M,P.Ov],encapsulation:2}),s})(),uu=(()=>{class s{constructor(){this.autoHeight=!1,this.priorAuthorizationRequests=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[{field:"procedureSite.name",headerName:"Procedure Site",filter:"agTextColumnFilter"},{field:"surgicalPosition.name",headerName:"Surgical Position",filter:"agTextColumnFilter"},{field:"treatingProvider.name",headerName:"Treating Provider",filter:"agTextColumnFilter"},{field:"referredTo.name",headerName:"Referred to",filter:"agTextColumnFilter"},{field:"prescription.name",headerName:"Prescription",filter:"agTextColumnFilter"},{field:"visitKind.name",headerName:"Visit Kind",filter:"agTextColumnFilter"},{field:"guidelineUsed.name",headerName:"Guideline Used",filter:"agTextColumnFilter"},{field:"authorizationKind.name",headerName:"Authorization Kind",filter:"agTextColumnFilter"},{field:"authorizationStatus.name",headerName:"Authorization Status",filter:"agTextColumnFilter"},{field:"bill.name",headerName:"Bill",filter:"agTextColumnFilter"},{field:"medicalReport.name",headerName:"Medical Report",filter:"agTextColumnFilter"},{field:"patient.name",headerName:"Patient",filter:"agTextColumnFilter"},{field:"caseProcedure.name",headerName:"Case Procedure",filter:"agTextColumnFilter"},{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{field:"referredOn",filter:"agDateColumnFilter"},{field:"approvedOn",filter:"agDateColumnFilter"},{field:"effectiveAsOf",filter:"agDateColumnFilter"},{field:"expiresOn",filter:"agDateColumnFilter"},{headerName:"Duration",field:"duration",valueFormatter:t=>{var i;return(0,_.oBD)(null===(i=t.data)||void 0===i?void 0:i.duration,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{field:"procedureSiteId",filter:"agTextColumnFilter",hide:!0},{field:"surgicalPositionId",filter:"agTextColumnFilter",hide:!0},{field:"procedureDescription",filter:"agTextColumnFilter"},{field:"remarks",filter:"agTextColumnFilter"},{headerName:"Underwriting Approved",field:"underwritingApproved",filter:"agSetColumnFilter",cellRenderer:"checkboxRenderer"},{headerName:"Tpa Approved",field:"tpaApproved",filter:"agSetColumnFilter",cellRenderer:"checkboxRenderer"},{headerName:"Requires Medical Director",field:"requiresMedicalDirector",filter:"agSetColumnFilter",cellRenderer:"checkboxRenderer"},{field:"reviewedOn",filter:"agDateColumnFilter"},{field:"treatingProviderId",filter:"agTextColumnFilter",hide:!0},{field:"referredToId",filter:"agTextColumnFilter",hide:!0},{field:"priorAuthorizationNumber",filter:"agTextColumnFilter"},{field:"caseManager",filter:"agTextColumnFilter"},{field:"memberNumber",filter:"agTextColumnFilter"},{field:"medicalDirector",filter:"agTextColumnFilter"},{field:"tpaApprover",filter:"agTextColumnFilter"},{field:"underwriter",filter:"agTextColumnFilter"},{field:"prescriptionId",filter:"agTextColumnFilter",hide:!0},{field:"visitKindId",filter:"agTextColumnFilter",hide:!0},{field:"guidelineUsedId",filter:"agTextColumnFilter",hide:!0},{field:"guidelineRequires",filter:"agTextColumnFilter"},{field:"authorizationKindId",filter:"agTextColumnFilter",hide:!0},{field:"authorizationStatusId",filter:"agTextColumnFilter",hide:!0},{field:"billId",filter:"agTextColumnFilter",hide:!0},{field:"medicalReportId",filter:"agTextColumnFilter",hide:!0},{field:"patientId",filter:"agTextColumnFilter",hide:!0},{field:"caseProcedureId",filter:"agTextColumnFilter",hide:!0}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var a;t.includes(null===(a=i.data)||void 0===a?void 0:a.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-prior-authorization-request-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(f.x,5),2&t){let a;e.iGM(a=e.CRH())&&(i.tableView=a.first)}},inputs:{autoHeight:"autoHeight",priorAuthorizationRequests:"priorAuthorizationRequests"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.priorAuthorizationRequests)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[f.x],encapsulation:2}),s})();function zJ(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-prior-authorization-request-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","priorAuthorizationRequest_edit")("formControl",t.formControl)("priorAuthorizationRequest",t.priorAuthorizationRequest)}}const HJ=function(){return{}};function qJ(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-prior-authorization-request-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","priorAuthorizationRequest_create")("formControl",t.formControl)("priorAuthorizationRequest",e.DdM(3,HJ))}}function KJ(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-prior-authorization-request-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(d.ref.close())}),e.qZA()}2&s&&e.Q6J("priorAuthorizationRequests",o.data.items)}let ZJ=(()=>{class s extends G.fS{constructor(t){super(),this.store=t,this.store.loadPriorAuthorizationRequestsEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.priorAuthorizationRequests$.pipe((0,h.w)(i=>(0,D.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(aa))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","priorAuthorizationRequest","send","close"],[1,"w-full","h-full","bg-white",3,"priorAuthorizationRequests","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,zJ,2,3,"ng-template",null,1,e.W1O),e.YNc(3,qJ,1,4,"ng-template",null,2,e.W1O),e.YNc(5,KJ,1,1,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",d)("editTemplate",a)("createTemplate",l)("key",i.field.key)}},dependencies:[E.JJ,E.oH,H.$,du,uu],encapsulation:2}),s})();function BJ(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-prior-authorization-request-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","priorAuthorizationRequest_edit")("priorAuthorizationRequest",t.value)}}const kJ=function(){return{}};function YJ(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-prior-authorization-request-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","priorAuthorizationRequest_create")("priorAuthorizationRequest",e.DdM(2,kJ))}function XJ(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-prior-authorization-request-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(null==d.ref?null:d.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("priorAuthorizationRequests",t.items)}}let ez=(()=>{class s extends pe{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:6,consts:[[3,"data","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","priorAuthorizationRequest","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","priorAuthorizationRequests","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,BJ,1,2,"ng-template",null,1,e.W1O),e.YNc(3,YJ,1,3,"ng-template",null,2,e.W1O),e.YNc(5,XJ,1,2,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("data",i.data)("title",i.to.title)("onSave",i.onSave)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[he,du,uu],encapsulation:2}),s})(),tz=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[aa],imports:[P.ez,U.F,E.UX,J.o,ae.u,$.P,j.t,me,k.h,se.G,G.X0.forChild({types:[{name:"prior-authorization-request-select",component:ZJ,wrappers:["form-field"]},{name:"prior-authorization-request-grid",component:ez}]})]}),s})(),iz=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[tz]}),s})();class ji extends W.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class sz extends ji{constructor(o,t,i){super("ValidatePriorMedsToDateExcelDataAction"),this.valid=!1,this.excelData=o,this.legalCases=t,this.priorMedsToDateStatuses=i}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name),this.validationContext.addRule(new g.mi(`legalCaseName_${i}_is_valid}`,"Legal Case Is Not Valid","legalCase.name",t.legalCase,this.legalCases,!0)),this.validationContext.addRule(new g.mi(`priorMedsToDateStatusName_${i}_is_valid}`,"Prior Meds to Date Status Is Not Valid","priorMedsToDateStatus.name",t.priorMedsToDateStatus,this.priorMedsToDateStatuses,!0))}),this.validationContext.addRule(new g.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof g.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(a=>a.name),newNames:[i.newName]}):i instanceof g.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,D.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class oz extends g.wS{constructor(o,t,i,a,l){super(o,t,i,a,l,!0)}}class az extends g.ul{constructor(o,t,i,a=!1){super(o,t,a),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new g.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new oz("name","The priormedstodate name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class rz extends ji{constructor(o){super("CreatePriorMedsToDateAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new az("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreatePriorMedsToDate({input:this.input}).pipe((0,h.w)(o=>(0,ue.of)(o.data.created)))}}class nz extends ji{constructor(o){super("UpdatePriorMedsToDatesAction"),this.priorMedsToDates=o}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.priorMedsToDates,!0))}performAction(){this.response=this.businessProvider.data.userUpdatePriorMedsToDates({input:{priorMedsToDates:this.priorMedsToDates}}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}class lz extends ji{constructor(o,t){super("UpdatePriorMedsToDateAction"),this.priorMedsToDate=o,this.priorMedsToDateId=t}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.priorMedsToDate,!0)).addRule(new g.xF("Id","Id should be a CUID and not null",this.priorMedsToDateId,!0))}performAction(){this.response=this.businessProvider.data.userUpdatePriorMedsToDate({priorMedsToDateId:this.priorMedsToDateId,input:this.priorMedsToDate}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}let mu=(()=>{class s extends W.nH{constructor(t,i,a){super("NotificationService.PriorMedsToDateBusinessProviderService",t,a),this.data=i}createPriorMedsToDate(t){const i=new rz(t);return i.Do(this),i.response}updatePriorMedsToDate(t,i){const a=new lz(t,i);return a.Do(this),a.response}importPriorMedsToDates(t){const i=new nz(t);return i.Do(this),i.response}validatePriorMedsToDateExcelData(t,i,a){const l=new sz(t,i,a);return l.Do(this),l.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(K.ed),e.LFG(z.q),e.LFG(W.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),cz=(()=>{class s extends W.nH{constructor(t,i,a){super("PriorMedsToDateService",a,t),this.businessProvider=i}createPriorMedsToDate(t){const i=Object.fromEntries(Object.entries(t).filter(([a,l])=>null!==l));return this.businessProvider.createPriorMedsToDate(i)}updatePriorMedsToDate(t,i){return this.businessProvider.updatePriorMedsToDate(t,i)}importPriorMedsToDates(t){return this.businessProvider.importPriorMedsToDates(t)}validatePriorMedsToDateExcelData(t,i,a){return this.businessProvider.validatePriorMedsToDateExcelData(t,i,a)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(mu,8),e.LFG(mu),e.LFG(K.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),ra=(()=>{class s extends b.m1{constructor(t,i,a,l,d,ee){if(super({loading:!1,priorMedsToDates:[],done:!1,searchQuery:"",formName:void 0,legalCaseId:void 0,priorMedsToDateStatusId:void 0,specialtyId:void 0,visitKindId:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=a,this.toast=l,this.formService=d,this.priorMedsToDateService=ee,this.errors$=this.select(m=>m.errors),this.loading$=this.select(m=>m.loading),this.done$=this.select(m=>m.done),this.item$=this.select(m=>m.item),this.priorMedsToDates$=this.select(m=>m.priorMedsToDates),this.legalCases$=this.select(m=>m.legalCases||[]),this.priorMedsToDateStatuses$=this.select(m=>m.priorMedsToDateStatuses||[]),this.specialties$=this.select(m=>m.specialties||[]),this.visitKinds$=this.select(m=>m.visitKinds||[]),this.legalCaseId$=this.select(m=>m.legalCaseId),this.priorMedsToDateStatusId$=this.select(m=>m.priorMedsToDateStatusId),this.specialtyId$=this.select(m=>m.specialtyId),this.visitKindId$=this.select(m=>m.visitKindId),this.paging$=this.select(m=>m.paging),this.searchQuery$=this.select(m=>m.searchQuery),this.formName$=this.select(m=>m.formName),this.actionResult$=this.select(this.item$,this.done$,(m,p)=>({item:m,done:p}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.priorMedsToDates$,this.legalCases$,this.priorMedsToDateStatuses$,this.specialties$,this.visitKinds$,(m,p,v,I,B,_e,Ne,le,ce)=>({errors:m,loading:p,item:v,formName:I,priorMedsToDates:B,legalCases:_e,priorMedsToDateStatuses:Ne,specialties:le,visitKinds:ce}),{debounce:!0}),this.input$=this.select(this.paging$,this.legalCaseId$,this.priorMedsToDateStatusId$,this.specialtyId$,this.visitKindId$,this.searchQuery$,(m,p,v,I,B,_e)=>({limit:m.limit,skip:m.skip,name:_e,legalCaseId:p,priorMedsToDateStatusId:v,specialtyId:I,visitKindId:B,total:m.total})),this.setFormName=this.updater((m,p)=>Object.assign(Object.assign({},m),{formName:p})),this.setLegalCaseId=this.updater((m,p)=>Object.assign(Object.assign({},m),{legalCaseId:p})),this.setPriorMedsToDateStatusId=this.updater((m,p)=>Object.assign(Object.assign({},m),{priorMedsToDateStatusId:p})),this.setSpecialtyId=this.updater((m,p)=>Object.assign(Object.assign({},m),{specialtyId:p})),this.setVisitKindId=this.updater((m,p)=>Object.assign(Object.assign({},m),{visitKindId:p})),this.filterLegalCases=m=>this.data.userSelectLegalCases({input:{name:m}}).pipe((0,b._b)(p=>{let v=p.data.items;return this.patchState({legalCases:v}),v},p=>this.patchState({errors:p.graphQLErrors?p.graphQLErrors:p})),(0,fe.U)(p=>p.data.items)),this.filterPriorMedsToDateStatuses=m=>this.data.userSelectPriorMedsToDateStatuses({input:{name:m}}).pipe((0,b._b)(p=>{let v=p.data.items;return this.patchState({priorMedsToDateStatuses:v}),v},p=>this.patchState({errors:p.graphQLErrors?p.graphQLErrors:p})),(0,fe.U)(p=>p.data.items)),this.filterSpecialties=m=>this.data.userSelectSpecialties({input:{name:m}}).pipe((0,b._b)(p=>{let v=p.data.items;return this.patchState({specialties:v}),v},p=>this.patchState({errors:p.graphQLErrors?p.graphQLErrors:p})),(0,fe.U)(p=>p.data.items)),this.filterVisitKinds=m=>this.data.userSelectVisitKinds({input:{name:m}}).pipe((0,b._b)(p=>{let v=p.data.items;return this.patchState({visitKinds:v}),v},p=>this.patchState({errors:p.graphQLErrors?p.graphQLErrors:p})),(0,fe.U)(p=>p.data.items)),this.addLegalCase=this.updater((m,p)=>Object.assign(Object.assign({},m),{legalCases:m.legalCases.concat(p)})),this.addPriorMedsToDateStatus=this.updater((m,p)=>Object.assign(Object.assign({},m),{priorMedsToDateStatuses:m.priorMedsToDateStatuses.concat(p)})),this.addSpecialty=this.updater((m,p)=>Object.assign(Object.assign({},m),{specialties:m.specialties.concat(p)})),this.addVisitKind=this.updater((m,p)=>Object.assign(Object.assign({},m),{visitKinds:m.visitKinds.concat(p)})),this.setItem=this.updater((m,p)=>Object.assign(Object.assign({},m),{item:p})),this.addNewPriorMedsToDate=this.updater((m,p)=>Object.assign(Object.assign({},m),{priorMedsToDates:[...m.priorMedsToDates,p]})),this.updatePriorMedsToDate=this.updater((m,p)=>Object.assign(Object.assign({},m),{priorMedsToDates:m.priorMedsToDates.map(v=>v.id===p.id?p:v)})),this.addPriorMedsToDates=this.updater((m,p)=>Object.assign(Object.assign({},m),{priorMedsToDates:m.priorMedsToDates.concat(p)})),this.updatePriorMedsToDates=this.updater((m,p)=>Object.assign(Object.assign({},m),{priorMedsToDates:m.priorMedsToDates.map(v=>p.find(B=>B.id===v.id)||v)})),this.setSearchQuery=this.updater((m,p)=>Object.assign(Object.assign({},m),{searchQuery:p})),this.loadPriorMedsToDateEffect=this.effect(m=>m.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(p=>this.data.userPriorMedsToDate({priorMedsToDateId:p}).pipe((0,b._b)(v=>{this.patchState({item:v.data.item,errors:v.errors,loading:!1})},v=>this.patchState({loading:!1,errors:v.graphQLErrors?v.graphQLErrors:v})))))),this.loadPriorMedsToDatesEffect=this.effect(m=>m.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.input$),(0,h.w)(([p,v])=>this.data.userPriorMedsToDates({input:v}).pipe((0,b._b)(I=>(console.log("userPriorMedsToDates",I.data.items),this.patchState({paging:{limit:v.limit,skip:v.skip,total:I.data.count.total},priorMedsToDates:I.data.items,errors:I.errors,loading:!1})),I=>this.patchState({loading:!1,errors:I.graphQLErrors?I.graphQLErrors:I})))))),this.createPriorMedsToDateEffect=this.effect(m=>m.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(p=>this.priorMedsToDateService.createPriorMedsToDate(Object.assign({},p)).pipe((0,b._b)(v=>{this.addNewPriorMedsToDate(v),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:v,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},v=>{v.graphQLErrors?(this.toast.error(v.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:v.graphQLErrors?v.graphQLErrors:v})):(this.toast.error(v.Message),this.formService.setErrors(v.Data))}))))),this.updatePriorMedsToDateEffect=this.effect(m=>m.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([p,v])=>this.priorMedsToDateService.updatePriorMedsToDate(p,p.id).pipe((0,b._b)(I=>{this.updatePriorMedsToDate(I),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:I,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},I=>{I.graphQLErrors?(this.toast.error(I.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:I.graphQLErrors?I.graphQLErrors:I})):(this.toast.error(I.Message),this.formService.setErrors(I.Data))}))))),this.deletePriorMedsToDateEffect=this.effect(m=>m.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([p,v])=>this.data.userDeletePriorMedsToDate({priorMedsToDateId:v.id}).pipe((0,b._b)(I=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:I.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},I=>{I.graphQLErrors?(this.toast.error(I.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:I.graphQLErrors?I.graphQLErrors:I})):(this.toast.error(I.Message),this.formService.setErrors(I.Data))}))))),this.importExcelEffect=this.effect(m=>m.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(p=>this.priorMedsToDateService.importPriorMedsToDates(p).pipe((0,de.K)(v=>{var I;return this.toast.error(null!==(I=v.Message)&&void 0!==I?I:"Failed to save",{duration:3e3}),q.E}),(0,y.b)(v=>{const I=JSON.parse(v.created),B=JSON.parse(v.updated),_e=JSON.parse(v.failed),Ne=I.length+B.length+_e.length;this.addPriorMedsToDates(I),this.updatePriorMedsToDates(B),this.toast.success(`${I.length} created, ${B.length} updated, ${_e.length} failed of total ${Ne}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("priorMedsToDateId")?(this.route.snapshot.paramMap.get("priorMedsToDateId"),this.setFormName("priorMedsToDate_edit")):this.setFormName("priorMedsToDate_create"),this.route.snapshot.paramMap.has("legalCaseId")){var c=this.route.snapshot.paramMap.get("legalCaseId");this.setLegalCaseId(c)}if(this.route.snapshot.paramMap.has("priorMedsToDateStatusId")){var u=this.route.snapshot.paramMap.get("priorMedsToDateStatusId");this.setPriorMedsToDateStatusId(u)}if(this.route.snapshot.paramMap.has("specialtyId")){var n=this.route.snapshot.paramMap.get("specialtyId");this.setSpecialtyId(n)}if(this.route.snapshot.paramMap.has("visitKindId")){var r=this.route.snapshot.paramMap.get("visitKindId");this.setVisitKindId(r)}}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.priorMedsToDateService.validatePriorMedsToDateExcelData(t,i.legalCases,i.priorMedsToDateStatuses)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(z.q),e.LFG(O.F0),e.LFG(O.gz),e.LFG(X.F),e.LFG(Z.o),e.LFG(cz))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function dz(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.close.emit())})("formIsReady",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.priorMedsToDate)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let pu=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"priorMedsToDate_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.priorMedsToDate=i.item})):t.formName&&t.formName.currentValue&&"priorMedsToDate_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadPriorMedsToDateEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.priorMedsToDate=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(ra),e.Y36(O.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-prior-meds-to-date-form"]],inputs:{priorMedsToDate:"priorMedsToDate",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,dz,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[P.O5,te.M,P.Ov],encapsulation:2}),s})(),hu=(()=>{class s{constructor(){this.autoHeight=!1,this.priorMedsToDates=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[{field:"legalCase.name",headerName:"Legal Case",filter:"agTextColumnFilter"},{field:"priorMedsToDateStatus.name",headerName:"Prior Meds to Date Status",filter:"agTextColumnFilter"},{field:"specialty.name",headerName:"Specialty",filter:"agTextColumnFilter"},{field:"visitKind.name",headerName:"Visit Kind",filter:"agTextColumnFilter"},{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{field:"legalCaseId",filter:"agTextColumnFilter",hide:!0},{field:"priorMedsToDateStatusId",filter:"agTextColumnFilter",hide:!0},{field:"specialtyId",filter:"agTextColumnFilter",hide:!0},{field:"visitKindId",filter:"agTextColumnFilter",hide:!0},{headerName:"Quantity",field:"quantity",valueFormatter:t=>{var i;return(0,_.oBD)(null===(i=t.data)||void 0===i?void 0:i.quantity,"",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{headerName:"Amount",field:"amount",valueFormatter:t=>{var i;return(0,_.oBD)(null===(i=t.data)||void 0===i?void 0:i.amount,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var a;t.includes(null===(a=i.data)||void 0===a?void 0:a.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-prior-meds-to-date-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(f.x,5),2&t){let a;e.iGM(a=e.CRH())&&(i.tableView=a.first)}},inputs:{autoHeight:"autoHeight",priorMedsToDates:"priorMedsToDates"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.priorMedsToDates)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[f.x],encapsulation:2}),s})();function uz(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-prior-meds-to-date-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","priorMedsToDate_edit")("formControl",t.formControl)("priorMedsToDate",t.priorMedsToDate)}}const mz=function(){return{}};function pz(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-prior-meds-to-date-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","priorMedsToDate_create")("formControl",t.formControl)("priorMedsToDate",e.DdM(3,mz))}}function hz(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-prior-meds-to-date-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(d.ref.close())}),e.qZA()}2&s&&e.Q6J("priorMedsToDates",o.data.items)}let fz=(()=>{class s extends G.fS{constructor(t){super(),this.store=t,this.store.loadPriorMedsToDatesEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.priorMedsToDates$.pipe((0,h.w)(i=>(0,D.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(ra))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","priorMedsToDate","send","close"],[1,"w-full","h-full","bg-white",3,"priorMedsToDates","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,uz,2,3,"ng-template",null,1,e.W1O),e.YNc(3,pz,1,4,"ng-template",null,2,e.W1O),e.YNc(5,hz,1,1,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",d)("editTemplate",a)("createTemplate",l)("key",i.field.key)}},dependencies:[E.JJ,E.oH,H.$,pu,hu],encapsulation:2}),s})();function _z(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-prior-meds-to-date-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","priorMedsToDate_edit")("priorMedsToDate",t.value)}}const gz=function(){return{}};function vz(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-prior-meds-to-date-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","priorMedsToDate_create")("priorMedsToDate",e.DdM(2,gz))}function Cz(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-prior-meds-to-date-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(null==d.ref?null:d.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("priorMedsToDates",t.items)}}let Sz=(()=>{class s extends pe{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","priorMedsToDate","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","priorMedsToDates","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,_z,1,2,"ng-template",null,1,e.W1O),e.YNc(3,vz,1,3,"ng-template",null,2,e.W1O),e.YNc(5,Cz,1,2,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[he,pu,hu],encapsulation:2}),s})(),bz=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[ra],imports:[P.ez,U.F,E.UX,J.o,ae.u,$.P,j.t,me,k.h,se.G,G.X0.forChild({types:[{name:"prior-meds-to-date-select",component:fz,wrappers:["form-field"]},{name:"prior-meds-to-date-grid",component:Sz}]})]}),s})(),Tz=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[bz]}),s})();class Ui extends W.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class yz extends Ui{constructor(o){super("ValidatePriorMedsToDateStatusExcelDataAction"),this.valid=!1,this.excelData=o}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name)}),this.validationContext.addRule(new g.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof g.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(a=>a.name),newNames:[i.newName]}):i instanceof g.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,D.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class wz extends g.wS{constructor(o,t,i,a,l){super(o,t,i,a,l,!0)}}class xz extends g.ul{constructor(o,t,i,a=!1){super(o,t,a),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new g.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new wz("name","The priormedstodatestatus name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class Nz extends Ui{constructor(o){super("CreatePriorMedsToDateStatusAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new xz("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreatePriorMedsToDateStatus({input:this.input}).pipe((0,h.w)(o=>(0,ue.of)(o.data.created)))}}class Az extends Ui{constructor(o){super("UpdatePriorMedsToDateStatusesAction"),this.priorMedsToDateStatuses=o}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.priorMedsToDateStatuses,!0))}performAction(){this.response=this.businessProvider.data.userUpdatePriorMedsToDateStatuses({input:{priorMedsToDateStatuses:this.priorMedsToDateStatuses}}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}class Fz extends Ui{constructor(o,t){super("UpdatePriorMedsToDateStatusAction"),this.priorMedsToDateStatus=o,this.priorMedsToDateStatusId=t}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.priorMedsToDateStatus,!0)).addRule(new g.xF("Id","Id should be a CUID and not null",this.priorMedsToDateStatusId,!0))}performAction(){this.response=this.businessProvider.data.userUpdatePriorMedsToDateStatus({priorMedsToDateStatusId:this.priorMedsToDateStatusId,input:this.priorMedsToDateStatus}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}let fu=(()=>{class s extends W.nH{constructor(t,i,a){super("NotificationService.PriorMedsToDateStatusBusinessProviderService",t,a),this.data=i}createPriorMedsToDateStatus(t){const i=new Nz(t);return i.Do(this),i.response}updatePriorMedsToDateStatus(t,i){const a=new Fz(t,i);return a.Do(this),a.response}importPriorMedsToDateStatuses(t){const i=new Az(t);return i.Do(this),i.response}validatePriorMedsToDateStatusExcelData(t){const i=new yz(t);return i.Do(this),i.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(K.ed),e.LFG(z.q),e.LFG(W.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),Pz=(()=>{class s extends W.nH{constructor(t,i,a){super("PriorMedsToDateStatusService",a,t),this.businessProvider=i}createPriorMedsToDateStatus(t){const i=Object.fromEntries(Object.entries(t).filter(([a,l])=>null!==l));return this.businessProvider.createPriorMedsToDateStatus(i)}updatePriorMedsToDateStatus(t,i){return this.businessProvider.updatePriorMedsToDateStatus(t,i)}importPriorMedsToDateStatuses(t){return this.businessProvider.importPriorMedsToDateStatuses(t)}validatePriorMedsToDateStatusExcelData(t){return this.businessProvider.validatePriorMedsToDateStatusExcelData(t)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(fu,8),e.LFG(fu),e.LFG(K.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),na=(()=>{class s extends b.m1{constructor(t,i,a,l,d,ee){super({loading:!1,priorMedsToDateStatuses:[],done:!1,searchQuery:"",formName:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=a,this.toast=l,this.formService=d,this.priorMedsToDateStatusService=ee,this.errors$=this.select(c=>c.errors),this.loading$=this.select(c=>c.loading),this.done$=this.select(c=>c.done),this.item$=this.select(c=>c.item),this.priorMedsToDateStatuses$=this.select(c=>c.priorMedsToDateStatuses),this.paging$=this.select(c=>c.paging),this.searchQuery$=this.select(c=>c.searchQuery),this.formName$=this.select(c=>c.formName),this.actionResult$=this.select(this.item$,this.done$,(c,u)=>({item:c,done:u}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.priorMedsToDateStatuses$,(c,u,n,r,m)=>({errors:c,loading:u,item:n,formName:r,priorMedsToDateStatuses:m}),{debounce:!0}),this.input$=this.select(this.paging$,this.searchQuery$,(c,u)=>({limit:c.limit,skip:c.skip,name:u,total:c.total})),this.setFormName=this.updater((c,u)=>Object.assign(Object.assign({},c),{formName:u})),this.setItem=this.updater((c,u)=>Object.assign(Object.assign({},c),{item:u})),this.addNewPriorMedsToDateStatus=this.updater((c,u)=>Object.assign(Object.assign({},c),{priorMedsToDateStatuses:[...c.priorMedsToDateStatuses,u]})),this.updatePriorMedsToDateStatus=this.updater((c,u)=>Object.assign(Object.assign({},c),{priorMedsToDateStatuses:c.priorMedsToDateStatuses.map(n=>n.id===u.id?u:n)})),this.addPriorMedsToDateStatuses=this.updater((c,u)=>Object.assign(Object.assign({},c),{priorMedsToDateStatuses:c.priorMedsToDateStatuses.concat(u)})),this.updatePriorMedsToDateStatuses=this.updater((c,u)=>Object.assign(Object.assign({},c),{priorMedsToDateStatuses:c.priorMedsToDateStatuses.map(n=>u.find(m=>m.id===n.id)||n)})),this.setSearchQuery=this.updater((c,u)=>Object.assign(Object.assign({},c),{searchQuery:u})),this.loadPriorMedsToDateStatusEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.data.userPriorMedsToDateStatus({priorMedsToDateStatusId:u}).pipe((0,b._b)(n=>{this.patchState({item:n.data.item,errors:n.errors,loading:!1})},n=>this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})))))),this.loadPriorMedsToDateStatusesEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.input$),(0,h.w)(([u,n])=>this.data.userPriorMedsToDateStatuses({input:n}).pipe((0,b._b)(r=>this.patchState({paging:{limit:n.limit,skip:n.skip,total:r.data.count.total},priorMedsToDateStatuses:r.data.items,errors:r.errors,loading:!1}),r=>this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})))))),this.createPriorMedsToDateStatusEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.priorMedsToDateStatusService.createPriorMedsToDateStatus(Object.assign({},u)).pipe((0,b._b)(n=>{this.addNewPriorMedsToDateStatus(n),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:n,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},n=>{n.graphQLErrors?(this.toast.error(n.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})):(this.toast.error(n.Message),this.formService.setErrors(n.Data))}))))),this.updatePriorMedsToDateStatusEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([u,n])=>this.priorMedsToDateStatusService.updatePriorMedsToDateStatus(u,u.id).pipe((0,b._b)(r=>{this.updatePriorMedsToDateStatus(r),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:r,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},r=>{r.graphQLErrors?(this.toast.error(r.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})):(this.toast.error(r.Message),this.formService.setErrors(r.Data))}))))),this.deletePriorMedsToDateStatusEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([u,n])=>this.data.userDeletePriorMedsToDateStatus({priorMedsToDateStatusId:n.id}).pipe((0,b._b)(r=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:r.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},r=>{r.graphQLErrors?(this.toast.error(r.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})):(this.toast.error(r.Message),this.formService.setErrors(r.Data))}))))),this.importExcelEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.priorMedsToDateStatusService.importPriorMedsToDateStatuses(u).pipe((0,de.K)(n=>{var r;return this.toast.error(null!==(r=n.Message)&&void 0!==r?r:"Failed to save",{duration:3e3}),q.E}),(0,y.b)(n=>{const r=JSON.parse(n.created),m=JSON.parse(n.updated),p=JSON.parse(n.failed),v=r.length+m.length+p.length;this.addPriorMedsToDateStatuses(r),this.updatePriorMedsToDateStatuses(m),this.toast.success(`${r.length} created, ${m.length} updated, ${p.length} failed of total ${v}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("priorMedsToDateStatusId")?(this.route.snapshot.paramMap.get("priorMedsToDateStatusId"),this.setFormName("priorMedsToDateStatus_edit")):this.setFormName("priorMedsToDateStatus_create")}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.priorMedsToDateStatusService.validatePriorMedsToDateStatusExcelData(t)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(z.q),e.LFG(O.F0),e.LFG(O.gz),e.LFG(X.F),e.LFG(Z.o),e.LFG(Pz))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function Iz(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.close.emit())})("formIsReady",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.priorMedsToDateStatus)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let _u=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"priorMedsToDateStatus_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.priorMedsToDateStatus=i.item})):t.formName&&t.formName.currentValue&&"priorMedsToDateStatus_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadPriorMedsToDateStatusEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.priorMedsToDateStatus=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(na),e.Y36(O.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-prior-meds-to-date-status-form"]],inputs:{priorMedsToDateStatus:"priorMedsToDateStatus",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,Iz,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[P.O5,te.M,P.Ov],encapsulation:2}),s})(),gu=(()=>{class s{constructor(){this.autoHeight=!1,this.priorMedsToDateStatuses=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[,{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var a;t.includes(null===(a=i.data)||void 0===a?void 0:a.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-prior-meds-to-date-status-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(f.x,5),2&t){let a;e.iGM(a=e.CRH())&&(i.tableView=a.first)}},inputs:{autoHeight:"autoHeight",priorMedsToDateStatuses:"priorMedsToDateStatuses"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.priorMedsToDateStatuses)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[f.x],encapsulation:2}),s})();function Dz(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-prior-meds-to-date-status-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","priorMedsToDateStatus_edit")("formControl",t.formControl)("priorMedsToDateStatus",t.priorMedsToDateStatus)}}const Mz=function(){return{}};function Wz(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-prior-meds-to-date-status-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","priorMedsToDateStatus_create")("formControl",t.formControl)("priorMedsToDateStatus",e.DdM(3,Mz))}}function Ez(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-prior-meds-to-date-status-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(d.ref.close())}),e.qZA()}2&s&&e.Q6J("priorMedsToDateStatuses",o.data.items)}let Oz=(()=>{class s extends G.fS{constructor(t){super(),this.store=t,this.store.loadPriorMedsToDateStatusesEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.priorMedsToDateStatuses$.pipe((0,h.w)(i=>(0,D.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(na))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","priorMedsToDateStatus","send","close"],[1,"w-full","h-full","bg-white",3,"priorMedsToDateStatuses","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,Dz,2,3,"ng-template",null,1,e.W1O),e.YNc(3,Wz,1,4,"ng-template",null,2,e.W1O),e.YNc(5,Ez,1,1,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",d)("editTemplate",a)("createTemplate",l)("key",i.field.key)}},dependencies:[E.JJ,E.oH,H.$,_u,gu],encapsulation:2}),s})();function Lz(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-prior-meds-to-date-status-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","priorMedsToDateStatus_edit")("priorMedsToDateStatus",t.value)}}const $z=function(){return{}};function Gz(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-prior-meds-to-date-status-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","priorMedsToDateStatus_create")("priorMedsToDateStatus",e.DdM(2,$z))}function Rz(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-prior-meds-to-date-status-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(null==d.ref?null:d.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("priorMedsToDateStatuses",t.items)}}let Qz=(()=>{class s extends pe{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","priorMedsToDateStatus","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","priorMedsToDateStatuses","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,Lz,1,2,"ng-template",null,1,e.W1O),e.YNc(3,Gz,1,3,"ng-template",null,2,e.W1O),e.YNc(5,Rz,1,2,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[he,_u,gu],encapsulation:2}),s})(),Vz=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[na],imports:[P.ez,U.F,E.UX,J.o,ae.u,$.P,j.t,me,k.h,se.G,G.X0.forChild({types:[{name:"prior-meds-to-date-status-select",component:Oz,wrappers:["form-field"]},{name:"prior-meds-to-date-status-grid",component:Qz}]})]}),s})(),jz=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[Vz]}),s})();class Ji extends W.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class Uz extends Ji{constructor(o){super("ValidateProcedureExcelDataAction"),this.valid=!1,this.excelData=o}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name)}),this.validationContext.addRule(new g.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof g.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(a=>a.name),newNames:[i.newName]}):i instanceof g.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,D.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class Jz extends g.wS{constructor(o,t,i,a,l){super(o,t,i,a,l,!0)}}class zz extends g.ul{constructor(o,t,i,a=!1){super(o,t,a),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new g.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new Jz("name","The procedure name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class Hz extends Ji{constructor(o){super("CreateProcedureAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new zz("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateProcedure({input:this.input}).pipe((0,h.w)(o=>(0,ue.of)(o.data.created)))}}class qz extends Ji{constructor(o){super("UpdateProceduresAction"),this.procedures=o}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.procedures,!0))}performAction(){this.response=this.businessProvider.data.userUpdateProcedures({input:{procedures:this.procedures}}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}class Kz extends Ji{constructor(o,t){super("UpdateProcedureAction"),this.procedure=o,this.procedureId=t}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.procedure,!0)).addRule(new g.xF("Id","Id should be a CUID and not null",this.procedureId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateProcedure({procedureId:this.procedureId,input:this.procedure}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}let vu=(()=>{class s extends W.nH{constructor(t,i,a){super("NotificationService.ProcedureBusinessProviderService",t,a),this.data=i}createProcedure(t){const i=new Hz(t);return i.Do(this),i.response}updateProcedure(t,i){const a=new Kz(t,i);return a.Do(this),a.response}importProcedures(t){const i=new qz(t);return i.Do(this),i.response}validateProcedureExcelData(t){const i=new Uz(t);return i.Do(this),i.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(K.ed),e.LFG(z.q),e.LFG(W.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),Zz=(()=>{class s extends W.nH{constructor(t,i,a){super("ProcedureService",a,t),this.businessProvider=i}createProcedure(t){const i=Object.fromEntries(Object.entries(t).filter(([a,l])=>null!==l));return this.businessProvider.createProcedure(i)}updateProcedure(t,i){return this.businessProvider.updateProcedure(t,i)}importProcedures(t){return this.businessProvider.importProcedures(t)}validateProcedureExcelData(t){return this.businessProvider.validateProcedureExcelData(t)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(vu,8),e.LFG(vu),e.LFG(K.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),la=(()=>{class s extends b.m1{constructor(t,i,a,l,d,ee){super({loading:!1,procedures:[],done:!1,searchQuery:"",formName:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=a,this.toast=l,this.formService=d,this.procedureService=ee,this.errors$=this.select(c=>c.errors),this.loading$=this.select(c=>c.loading),this.done$=this.select(c=>c.done),this.item$=this.select(c=>c.item),this.procedures$=this.select(c=>c.procedures),this.paging$=this.select(c=>c.paging),this.searchQuery$=this.select(c=>c.searchQuery),this.formName$=this.select(c=>c.formName),this.actionResult$=this.select(this.item$,this.done$,(c,u)=>({item:c,done:u}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.procedures$,(c,u,n,r,m)=>({errors:c,loading:u,item:n,formName:r,procedures:m}),{debounce:!0}),this.input$=this.select(this.paging$,this.searchQuery$,(c,u)=>({limit:c.limit,skip:c.skip,name:u,total:c.total})),this.setFormName=this.updater((c,u)=>Object.assign(Object.assign({},c),{formName:u})),this.setItem=this.updater((c,u)=>Object.assign(Object.assign({},c),{item:u})),this.addNewProcedure=this.updater((c,u)=>Object.assign(Object.assign({},c),{procedures:[...c.procedures,u]})),this.updateProcedure=this.updater((c,u)=>Object.assign(Object.assign({},c),{procedures:c.procedures.map(n=>n.id===u.id?u:n)})),this.addProcedures=this.updater((c,u)=>Object.assign(Object.assign({},c),{procedures:c.procedures.concat(u)})),this.updateProcedures=this.updater((c,u)=>Object.assign(Object.assign({},c),{procedures:c.procedures.map(n=>u.find(m=>m.id===n.id)||n)})),this.setSearchQuery=this.updater((c,u)=>Object.assign(Object.assign({},c),{searchQuery:u})),this.loadProcedureEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.data.userProcedure({procedureId:u}).pipe((0,b._b)(n=>{this.patchState({item:n.data.item,errors:n.errors,loading:!1})},n=>this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})))))),this.loadProceduresEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.input$),(0,h.w)(([u,n])=>this.data.userProcedures({input:n}).pipe((0,b._b)(r=>this.patchState({paging:{limit:n.limit,skip:n.skip,total:r.data.count.total},procedures:r.data.items,errors:r.errors,loading:!1}),r=>this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})))))),this.createProcedureEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.procedureService.createProcedure(Object.assign({},u)).pipe((0,b._b)(n=>{this.addNewProcedure(n),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:n,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},n=>{n.graphQLErrors?(this.toast.error(n.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})):(this.toast.error(n.Message),this.formService.setErrors(n.Data))}))))),this.updateProcedureEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([u,n])=>this.procedureService.updateProcedure(u,u.id).pipe((0,b._b)(r=>{this.updateProcedure(r),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:r,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},r=>{r.graphQLErrors?(this.toast.error(r.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})):(this.toast.error(r.Message),this.formService.setErrors(r.Data))}))))),this.deleteProcedureEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([u,n])=>this.data.userDeleteProcedure({procedureId:n.id}).pipe((0,b._b)(r=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:r.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},r=>{r.graphQLErrors?(this.toast.error(r.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})):(this.toast.error(r.Message),this.formService.setErrors(r.Data))}))))),this.importExcelEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.procedureService.importProcedures(u).pipe((0,de.K)(n=>{var r;return this.toast.error(null!==(r=n.Message)&&void 0!==r?r:"Failed to save",{duration:3e3}),q.E}),(0,y.b)(n=>{const r=JSON.parse(n.created),m=JSON.parse(n.updated),p=JSON.parse(n.failed),v=r.length+m.length+p.length;this.addProcedures(r),this.updateProcedures(m),this.toast.success(`${r.length} created, ${m.length} updated, ${p.length} failed of total ${v}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("procedureId")?(this.route.snapshot.paramMap.get("procedureId"),this.setFormName("procedure_edit")):this.setFormName("procedure_create")}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.procedureService.validateProcedureExcelData(t)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(z.q),e.LFG(O.F0),e.LFG(O.gz),e.LFG(X.F),e.LFG(Z.o),e.LFG(Zz))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function Bz(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.close.emit())})("formIsReady",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.procedure)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let Cu=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"procedure_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.procedure=i.item})):t.formName&&t.formName.currentValue&&"procedure_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadProcedureEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.procedure=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(la),e.Y36(O.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-procedure-form"]],inputs:{procedure:"procedure",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,Bz,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[P.O5,te.M,P.Ov],encapsulation:2}),s})(),Su=(()=>{class s{constructor(){this.autoHeight=!1,this.procedures=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[,{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{field:"code",filter:"agTextColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var a;t.includes(null===(a=i.data)||void 0===a?void 0:a.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-procedure-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(f.x,5),2&t){let a;e.iGM(a=e.CRH())&&(i.tableView=a.first)}},inputs:{autoHeight:"autoHeight",procedures:"procedures"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.procedures)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[f.x],encapsulation:2}),s})();function kz(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-procedure-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","procedure_edit")("formControl",t.formControl)("procedure",t.procedure)}}const Yz=function(){return{}};function Xz(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-procedure-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","procedure_create")("formControl",t.formControl)("procedure",e.DdM(3,Yz))}}function eH(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-procedure-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(d.ref.close())}),e.qZA()}2&s&&e.Q6J("procedures",o.data.items)}let tH=(()=>{class s extends G.fS{constructor(t){super(),this.store=t,this.store.loadProceduresEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.procedures$.pipe((0,h.w)(i=>(0,D.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(la))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","procedure","send","close"],[1,"w-full","h-full","bg-white",3,"procedures","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,kz,2,3,"ng-template",null,1,e.W1O),e.YNc(3,Xz,1,4,"ng-template",null,2,e.W1O),e.YNc(5,eH,1,1,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",d)("editTemplate",a)("createTemplate",l)("key",i.field.key)}},dependencies:[E.JJ,E.oH,H.$,Cu,Su],encapsulation:2}),s})();function iH(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-procedure-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","procedure_edit")("procedure",t.value)}}const sH=function(){return{}};function oH(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-procedure-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","procedure_create")("procedure",e.DdM(2,sH))}function aH(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-procedure-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(null==d.ref?null:d.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("procedures",t.items)}}let rH=(()=>{class s extends pe{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","procedure","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","procedures","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,iH,1,2,"ng-template",null,1,e.W1O),e.YNc(3,oH,1,3,"ng-template",null,2,e.W1O),e.YNc(5,aH,1,2,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[he,Cu,Su],encapsulation:2}),s})(),nH=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[la],imports:[P.ez,U.F,E.UX,J.o,ae.u,$.P,j.t,me,k.h,se.G,G.X0.forChild({types:[{name:"procedure-select",component:tH,wrappers:["form-field"]},{name:"procedure-grid",component:rH}]})]}),s})(),lH=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[nH]}),s})();class zi extends W.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class cH extends zi{constructor(o,t,i){super("ValidateProcedureOrTreatmentRequestAuthorizationExcelDataAction"),this.valid=!1,this.excelData=o,this.authorizations=t,this.procedureOrTreatmentRequests=i}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name),this.validationContext.addRule(new g.mi(`authorizationName_${i}_is_valid}`,"Authorization Is Not Valid","authorization.name",t.authorization,this.authorizations,!0)),this.validationContext.addRule(new g.mi(`procedureOrTreatmentRequestName_${i}_is_valid}`,"Procedure or Treatment Request Is Not Valid","procedureOrTreatmentRequest.name",t.procedureOrTreatmentRequest,this.procedureOrTreatmentRequests,!0))}),this.validationContext.addRule(new g.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof g.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(a=>a.name),newNames:[i.newName]}):i instanceof g.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,D.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class dH extends g.wS{constructor(o,t,i,a,l){super(o,t,i,a,l,!0)}}class uH extends g.ul{constructor(o,t,i,a=!1){super(o,t,a),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new g.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new dH("name","The procedureortreatmentrequestauthorization name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class mH extends zi{constructor(o){super("CreateProcedureOrTreatmentRequestAuthorizationAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new uH("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateProcedureOrTreatmentRequestAuthorization({input:this.input}).pipe((0,h.w)(o=>(0,ue.of)(o.data.created)))}}class pH extends zi{constructor(o){super("UpdateProcedureOrTreatmentRequestAuthorizationsAction"),this.procedureOrTreatmentRequestAuthorizations=o}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.procedureOrTreatmentRequestAuthorizations,!0))}performAction(){this.response=this.businessProvider.data.userUpdateProcedureOrTreatmentRequestAuthorizations({input:{procedureOrTreatmentRequestAuthorizations:this.procedureOrTreatmentRequestAuthorizations}}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}class hH extends zi{constructor(o,t){super("UpdateProcedureOrTreatmentRequestAuthorizationAction"),this.procedureOrTreatmentRequestAuthorization=o,this.procedureOrTreatmentRequestAuthorizationId=t}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.procedureOrTreatmentRequestAuthorization,!0)).addRule(new g.xF("Id","Id should be a CUID and not null",this.procedureOrTreatmentRequestAuthorizationId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateProcedureOrTreatmentRequestAuthorization({procedureOrTreatmentRequestAuthorizationId:this.procedureOrTreatmentRequestAuthorizationId,input:this.procedureOrTreatmentRequestAuthorization}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}let bu=(()=>{class s extends W.nH{constructor(t,i,a){super("NotificationService.ProcedureOrTreatmentRequestAuthorizationBusinessProviderService",t,a),this.data=i}createProcedureOrTreatmentRequestAuthorization(t){const i=new mH(t);return i.Do(this),i.response}updateProcedureOrTreatmentRequestAuthorization(t,i){const a=new hH(t,i);return a.Do(this),a.response}importProcedureOrTreatmentRequestAuthorizations(t){const i=new pH(t);return i.Do(this),i.response}validateProcedureOrTreatmentRequestAuthorizationExcelData(t,i,a){const l=new cH(t,i,a);return l.Do(this),l.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(K.ed),e.LFG(z.q),e.LFG(W.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),fH=(()=>{class s extends W.nH{constructor(t,i,a){super("ProcedureOrTreatmentRequestAuthorizationService",a,t),this.businessProvider=i}createProcedureOrTreatmentRequestAuthorization(t){return this.businessProvider.createProcedureOrTreatmentRequestAuthorization(t)}updateProcedureOrTreatmentRequestAuthorization(t,i){return this.businessProvider.updateProcedureOrTreatmentRequestAuthorization(t,i)}importProcedureOrTreatmentRequestAuthorizations(t){return this.businessProvider.importProcedureOrTreatmentRequestAuthorizations(t)}validateProcedureOrTreatmentRequestAuthorizationExcelData(t,i,a){return this.businessProvider.validateProcedureOrTreatmentRequestAuthorizationExcelData(t,i,a)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(bu,8),e.LFG(bu),e.LFG(K.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),Hi=(()=>{class s extends b.m1{constructor(t,i,a,l,d,ee){if(super({loading:!1,procedureOrTreatmentRequestAuthorizations:[],done:!1,searchQuery:"",formName:void 0,authorizationId:void 0,procedureOrTreatmentRequestId:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=a,this.toast=l,this.formService=d,this.procedureOrTreatmentRequestAuthorizationService=ee,this.errors$=this.select(n=>n.errors),this.loading$=this.select(n=>n.loading),this.done$=this.select(n=>n.done),this.item$=this.select(n=>n.item),this.procedureOrTreatmentRequestAuthorizations$=this.select(n=>n.procedureOrTreatmentRequestAuthorizations),this.authorizations$=this.select(n=>n.authorizations||[]),this.procedureOrTreatmentRequests$=this.select(n=>n.procedureOrTreatmentRequests||[]),this.authorizationId$=this.select(n=>n.authorizationId),this.procedureOrTreatmentRequestId$=this.select(n=>n.procedureOrTreatmentRequestId),this.paging$=this.select(n=>n.paging),this.searchQuery$=this.select(n=>n.searchQuery),this.formName$=this.select(n=>n.formName),this.actionResult$=this.select(this.item$,this.done$,(n,r)=>({item:n,done:r}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.procedureOrTreatmentRequestAuthorizations$,this.authorizations$,this.procedureOrTreatmentRequests$,(n,r,m,p,v,I,B)=>({errors:n,loading:r,item:m,formName:p,procedureOrTreatmentRequestAuthorizations:v,authorizations:I,procedureOrTreatmentRequests:B}),{debounce:!0}),this.input$=this.select(this.paging$,this.authorizationId$,this.procedureOrTreatmentRequestId$,this.searchQuery$,(n,r,m,p)=>({limit:n.limit,skip:n.skip,name:p,authorizationId:r,procedureOrTreatmentRequestId:m,total:n.total})),this.setFormName=this.updater((n,r)=>Object.assign(Object.assign({},n),{formName:r})),this.setAuthorizationId=this.updater((n,r)=>Object.assign(Object.assign({},n),{authorizationId:r})),this.setProcedureOrTreatmentRequestId=this.updater((n,r)=>Object.assign(Object.assign({},n),{procedureOrTreatmentRequestId:r})),this.filterAuthorizations=n=>this.data.userSelectAuthorizations({input:{name:n}}).pipe((0,b._b)(r=>{let m=r.data.items;return this.patchState({authorizations:m}),m},r=>this.patchState({errors:r.graphQLErrors?r.graphQLErrors:r})),(0,fe.U)(r=>r.data.items)),this.filterProcedureOrTreatmentRequests=n=>this.data.userSelectProcedureOrTreatmentRequests({input:{name:n}}).pipe((0,b._b)(r=>{let m=r.data.items;return this.patchState({procedureOrTreatmentRequests:m}),m},r=>this.patchState({errors:r.graphQLErrors?r.graphQLErrors:r})),(0,fe.U)(r=>r.data.items)),this.addAuthorization=this.updater((n,r)=>Object.assign(Object.assign({},n),{authorizations:n.authorizations.concat(r)})),this.addProcedureOrTreatmentRequest=this.updater((n,r)=>Object.assign(Object.assign({},n),{procedureOrTreatmentRequests:n.procedureOrTreatmentRequests.concat(r)})),this.setItem=this.updater((n,r)=>Object.assign(Object.assign({},n),{item:r})),this.addNewProcedureOrTreatmentRequestAuthorization=this.updater((n,r)=>Object.assign(Object.assign({},n),{procedureOrTreatmentRequestAuthorizations:[...n.procedureOrTreatmentRequestAuthorizations,r]})),this.updateProcedureOrTreatmentRequestAuthorization=this.updater((n,r)=>Object.assign(Object.assign({},n),{procedureOrTreatmentRequestAuthorizations:n.procedureOrTreatmentRequestAuthorizations.map(m=>m.id===r.id?r:m)})),this.addProcedureOrTreatmentRequestAuthorizations=this.updater((n,r)=>Object.assign(Object.assign({},n),{procedureOrTreatmentRequestAuthorizations:n.procedureOrTreatmentRequestAuthorizations.concat(r)})),this.updateProcedureOrTreatmentRequestAuthorizations=this.updater((n,r)=>Object.assign(Object.assign({},n),{procedureOrTreatmentRequestAuthorizations:n.procedureOrTreatmentRequestAuthorizations.map(m=>r.find(v=>v.id===m.id)||m)})),this.setSearchQuery=this.updater((n,r)=>Object.assign(Object.assign({},n),{searchQuery:r})),this.loadProcedureOrTreatmentRequestAuthorizationEffect=this.effect(n=>n.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(r=>this.data.userProcedureOrTreatmentRequestAuthorization({procedureOrTreatmentRequestAuthorizationId:r}).pipe((0,b._b)(m=>{this.patchState({item:m.data.item,errors:m.errors,loading:!1})},m=>this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})))))),this.loadProcedureOrTreatmentRequestAuthorizationsEffect=this.effect(n=>n.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.input$),(0,h.w)(([r,m])=>this.data.userProcedureOrTreatmentRequestAuthorizations({input:m}).pipe((0,b._b)(p=>this.patchState({paging:{limit:m.limit,skip:m.skip,total:p.data.count.total},procedureOrTreatmentRequestAuthorizations:p.data.items,errors:p.errors,loading:!1}),p=>this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})))))),this.createProcedureOrTreatmentRequestAuthorizationEffect=this.effect(n=>n.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(r=>this.procedureOrTreatmentRequestAuthorizationService.createProcedureOrTreatmentRequestAuthorization(Object.assign({},r)).pipe((0,b._b)(m=>{this.addNewProcedureOrTreatmentRequestAuthorization(m),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:m,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},m=>{m.graphQLErrors?(this.toast.error(m.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})):(this.toast.error(m.Message),this.formService.setErrors(m.Data))}))))),this.updateProcedureOrTreatmentRequestAuthorizationEffect=this.effect(n=>n.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([r,m])=>this.procedureOrTreatmentRequestAuthorizationService.updateProcedureOrTreatmentRequestAuthorization(r,r.id).pipe((0,b._b)(p=>{this.updateProcedureOrTreatmentRequestAuthorization(p),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:p,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},p=>{p.graphQLErrors?(this.toast.error(p.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})):(this.toast.error(p.Message),this.formService.setErrors(p.Data))}))))),this.deleteProcedureOrTreatmentRequestAuthorizationEffect=this.effect(n=>n.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([r,m])=>this.data.userDeleteProcedureOrTreatmentRequestAuthorization({procedureOrTreatmentRequestAuthorizationId:m.id}).pipe((0,b._b)(p=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:p.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},p=>{p.graphQLErrors?(this.toast.error(p.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})):(this.toast.error(p.Message),this.formService.setErrors(p.Data))}))))),this.importExcelEffect=this.effect(n=>n.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(r=>this.procedureOrTreatmentRequestAuthorizationService.importProcedureOrTreatmentRequestAuthorizations(r).pipe((0,de.K)(m=>{var p;return this.toast.error(null!==(p=m.Message)&&void 0!==p?p:"Failed to save",{duration:3e3}),q.E}),(0,y.b)(m=>{const p=JSON.parse(m.created),v=JSON.parse(m.updated),I=JSON.parse(m.failed),B=p.length+v.length+I.length;this.addProcedureOrTreatmentRequestAuthorizations(p),this.updateProcedureOrTreatmentRequestAuthorizations(v),this.toast.success(`${p.length} created, ${v.length} updated, ${I.length} failed of total ${B}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("procedureOrTreatmentRequestAuthorizationId")?(this.route.snapshot.paramMap.get("procedureOrTreatmentRequestAuthorizationId"),this.setFormName("procedureOrTreatmentRequestAuthorization_edit")):this.setFormName("procedureOrTreatmentRequestAuthorization_create"),this.route.snapshot.paramMap.has("authorizationId")){var c=this.route.snapshot.paramMap.get("authorizationId");this.setAuthorizationId(c)}if(this.route.snapshot.paramMap.has("procedureOrTreatmentRequestId")){var u=this.route.snapshot.paramMap.get("procedureOrTreatmentRequestId");this.setProcedureOrTreatmentRequestId(u)}}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.procedureOrTreatmentRequestAuthorizationService.validateProcedureOrTreatmentRequestAuthorizationExcelData(t,i.authorizations,i.procedureOrTreatmentRequests)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(z.q),e.LFG(O.F0),e.LFG(O.gz),e.LFG(X.F),e.LFG(Z.o),e.LFG(fH))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function _H(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.close.emit())})("formIsReady",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.procedureOrTreatmentRequestAuthorization)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let Tu=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"procedureOrTreatmentRequestAuthorization_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({id:null,name:""}),this.store.vm$.subscribe(i=>{this.procedureOrTreatmentRequestAuthorization=i.item})):t.formName&&t.formName.currentValue&&"procedureOrTreatmentRequestAuthorization_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadProcedureOrTreatmentRequestAuthorizationEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.procedureOrTreatmentRequestAuthorization=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Hi),e.Y36(O.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-procedure-or-treatment-request-authorization-form"]],inputs:{procedureOrTreatmentRequestAuthorization:"procedureOrTreatmentRequestAuthorization",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,_H,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[P.O5,te.M,P.Ov],encapsulation:2}),s})(),yu=(()=>{class s{constructor(){this.autoHeight=!1,this.procedureOrTreatmentRequestAuthorizations=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[{field:"authorization.name",headerName:"Authorization",filter:"agTextColumnFilter"},{field:"procedureOrTreatmentRequest.name",headerName:"Procedure or Treatment Request",filter:"agTextColumnFilter"},{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{field:"authorizationId",filter:"agTextColumnFilter",hide:!0},{field:"procedureOrTreatmentRequestId",filter:"agTextColumnFilter",hide:!0}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var a;t.includes(null===(a=i.data)||void 0===a?void 0:a.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-procedure-or-treatment-request-authorization-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(f.x,5),2&t){let a;e.iGM(a=e.CRH())&&(i.tableView=a.first)}},inputs:{autoHeight:"autoHeight",procedureOrTreatmentRequestAuthorizations:"procedureOrTreatmentRequestAuthorizations"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:6,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.procedureOrTreatmentRequestAuthorizations)("showSidebar",!1)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[f.x],encapsulation:2}),s})();function gH(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-procedure-or-treatment-request-authorization-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","procedureOrTreatmentRequestAuthorization_edit")("formControl",t.formControl)("procedureOrTreatmentRequestAuthorization",t.procedureOrTreatmentRequestAuthorization)}}const vH=function(){return{}};function CH(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-procedure-or-treatment-request-authorization-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","procedureOrTreatmentRequestAuthorization_create")("formControl",t.formControl)("procedureOrTreatmentRequestAuthorization",e.DdM(3,vH))}}function SH(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-procedure-or-treatment-request-authorization-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(d.ref.close())}),e.qZA()}2&s&&e.Q6J("procedureOrTreatmentRequestAuthorizations",o.data.items)}let bH=(()=>{class s extends G.fS{constructor(t){super(),this.store=t,this.store.loadProcedureOrTreatmentRequestAuthorizationsEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.procedureOrTreatmentRequestAuthorizations$.pipe((0,h.w)(i=>(0,D.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Hi))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e._Bn([Hi]),e.qOj],decls:7,vars:5,consts:[[3,"to","control","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","procedureOrTreatmentRequestAuthorization","send","close"],[1,"w-full","h-full","bg-white",3,"procedureOrTreatmentRequestAuthorizations","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"ui-select-form",0),e.YNc(1,gH,2,3,"ng-template",null,1,e.W1O),e.YNc(3,CH,1,4,"ng-template",null,2,e.W1O),e.YNc(5,SH,1,1,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[E.JJ,E.oH,H.$,Tu,yu],encapsulation:2}),s})();function TH(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-procedure-or-treatment-request-authorization-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","procedureOrTreatmentRequestAuthorization_edit")("procedureOrTreatmentRequestAuthorization",t.value)}}const yH=function(){return{}};function wH(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-procedure-or-treatment-request-authorization-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","procedureOrTreatmentRequestAuthorization_create")("procedureOrTreatmentRequestAuthorization",e.DdM(2,yH))}function xH(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-procedure-or-treatment-request-authorization-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(null==d.ref?null:d.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("procedureOrTreatmentRequestAuthorizations",t.items)}}let NH=(()=>{class s extends pe{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:6,consts:[[3,"data","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","procedureOrTreatmentRequestAuthorization","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","procedureOrTreatmentRequestAuthorizations","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,TH,1,2,"ng-template",null,1,e.W1O),e.YNc(3,wH,1,3,"ng-template",null,2,e.W1O),e.YNc(5,xH,1,2,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("data",i.data)("title",i.to.title)("onSave",i.onSave)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[he,Tu,yu],encapsulation:2}),s})(),AH=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[Hi],imports:[P.ez,U.F,E.UX,J.o,ae.u,$.P,j.t,me,k.h,se.G,G.X0.forChild({types:[{name:"procedure-or-treatment-request-authorization-select",component:bH,wrappers:["form-field"]},{name:"procedure-or-treatment-request-authorization-grid",component:NH}]})]}),s})(),FH=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[AH]}),s})();class qi extends W.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class PH extends qi{constructor(o){super("ValidateProcedureSiteExcelDataAction"),this.valid=!1,this.excelData=o}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name)}),this.validationContext.addRule(new g.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof g.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(a=>a.name),newNames:[i.newName]}):i instanceof g.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,D.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class IH extends g.wS{constructor(o,t,i,a,l){super(o,t,i,a,l,!0)}}class DH extends g.ul{constructor(o,t,i,a=!1){super(o,t,a),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new g.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new IH("name","The proceduresite name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class MH extends qi{constructor(o){super("CreateProcedureSiteAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new DH("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateProcedureSite({input:this.input}).pipe((0,h.w)(o=>(0,ue.of)(o.data.created)))}}class WH extends qi{constructor(o){super("UpdateProcedureSitesAction"),this.procedureSites=o}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.procedureSites,!0))}performAction(){this.response=this.businessProvider.data.userUpdateProcedureSites({input:{procedureSites:this.procedureSites}}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}class EH extends qi{constructor(o,t){super("UpdateProcedureSiteAction"),this.procedureSite=o,this.procedureSiteId=t}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.procedureSite,!0)).addRule(new g.xF("Id","Id should be a CUID and not null",this.procedureSiteId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateProcedureSite({procedureSiteId:this.procedureSiteId,input:this.procedureSite}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}let wu=(()=>{class s extends W.nH{constructor(t,i,a){super("NotificationService.ProcedureSiteBusinessProviderService",t,a),this.data=i}createProcedureSite(t){const i=new MH(t);return i.Do(this),i.response}updateProcedureSite(t,i){const a=new EH(t,i);return a.Do(this),a.response}importProcedureSites(t){const i=new WH(t);return i.Do(this),i.response}validateProcedureSiteExcelData(t){const i=new PH(t);return i.Do(this),i.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(K.ed),e.LFG(z.q),e.LFG(W.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),OH=(()=>{class s extends W.nH{constructor(t,i,a){super("ProcedureSiteService",a,t),this.businessProvider=i}createProcedureSite(t){const i=Object.fromEntries(Object.entries(t).filter(([a,l])=>null!==l));return this.businessProvider.createProcedureSite(i)}updateProcedureSite(t,i){return this.businessProvider.updateProcedureSite(t,i)}importProcedureSites(t){return this.businessProvider.importProcedureSites(t)}validateProcedureSiteExcelData(t){return this.businessProvider.validateProcedureSiteExcelData(t)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(wu,8),e.LFG(wu),e.LFG(K.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),ca=(()=>{class s extends b.m1{constructor(t,i,a,l,d,ee){super({loading:!1,procedureSites:[],done:!1,searchQuery:"",formName:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=a,this.toast=l,this.formService=d,this.procedureSiteService=ee,this.errors$=this.select(c=>c.errors),this.loading$=this.select(c=>c.loading),this.done$=this.select(c=>c.done),this.item$=this.select(c=>c.item),this.procedureSites$=this.select(c=>c.procedureSites),this.paging$=this.select(c=>c.paging),this.searchQuery$=this.select(c=>c.searchQuery),this.formName$=this.select(c=>c.formName),this.actionResult$=this.select(this.item$,this.done$,(c,u)=>({item:c,done:u}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.procedureSites$,(c,u,n,r,m)=>({errors:c,loading:u,item:n,formName:r,procedureSites:m}),{debounce:!0}),this.input$=this.select(this.paging$,this.searchQuery$,(c,u)=>({limit:c.limit,skip:c.skip,name:u,total:c.total})),this.setFormName=this.updater((c,u)=>Object.assign(Object.assign({},c),{formName:u})),this.setItem=this.updater((c,u)=>Object.assign(Object.assign({},c),{item:u})),this.addNewProcedureSite=this.updater((c,u)=>Object.assign(Object.assign({},c),{procedureSites:[...c.procedureSites,u]})),this.updateProcedureSite=this.updater((c,u)=>Object.assign(Object.assign({},c),{procedureSites:c.procedureSites.map(n=>n.id===u.id?u:n)})),this.addProcedureSites=this.updater((c,u)=>Object.assign(Object.assign({},c),{procedureSites:c.procedureSites.concat(u)})),this.updateProcedureSites=this.updater((c,u)=>Object.assign(Object.assign({},c),{procedureSites:c.procedureSites.map(n=>u.find(m=>m.id===n.id)||n)})),this.setSearchQuery=this.updater((c,u)=>Object.assign(Object.assign({},c),{searchQuery:u})),this.loadProcedureSiteEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.data.userProcedureSite({procedureSiteId:u}).pipe((0,b._b)(n=>{this.patchState({item:n.data.item,errors:n.errors,loading:!1})},n=>this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})))))),this.loadProcedureSitesEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.input$),(0,h.w)(([u,n])=>this.data.userProcedureSites({input:n}).pipe((0,b._b)(r=>this.patchState({paging:{limit:n.limit,skip:n.skip,total:r.data.count.total},procedureSites:r.data.items,errors:r.errors,loading:!1}),r=>this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})))))),this.createProcedureSiteEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.procedureSiteService.createProcedureSite(Object.assign({},u)).pipe((0,b._b)(n=>{this.addNewProcedureSite(n),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:n,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},n=>{n.graphQLErrors?(this.toast.error(n.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})):(this.toast.error(n.Message),this.formService.setErrors(n.Data))}))))),this.updateProcedureSiteEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([u,n])=>this.procedureSiteService.updateProcedureSite(u,u.id).pipe((0,b._b)(r=>{this.updateProcedureSite(r),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:r,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},r=>{r.graphQLErrors?(this.toast.error(r.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})):(this.toast.error(r.Message),this.formService.setErrors(r.Data))}))))),this.deleteProcedureSiteEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([u,n])=>this.data.userDeleteProcedureSite({procedureSiteId:n.id}).pipe((0,b._b)(r=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:r.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},r=>{r.graphQLErrors?(this.toast.error(r.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})):(this.toast.error(r.Message),this.formService.setErrors(r.Data))}))))),this.importExcelEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.procedureSiteService.importProcedureSites(u).pipe((0,de.K)(n=>{var r;return this.toast.error(null!==(r=n.Message)&&void 0!==r?r:"Failed to save",{duration:3e3}),q.E}),(0,y.b)(n=>{const r=JSON.parse(n.created),m=JSON.parse(n.updated),p=JSON.parse(n.failed),v=r.length+m.length+p.length;this.addProcedureSites(r),this.updateProcedureSites(m),this.toast.success(`${r.length} created, ${m.length} updated, ${p.length} failed of total ${v}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("procedureSiteId")?(this.route.snapshot.paramMap.get("procedureSiteId"),this.setFormName("procedureSite_edit")):this.setFormName("procedureSite_create")}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.procedureSiteService.validateProcedureSiteExcelData(t)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(z.q),e.LFG(O.F0),e.LFG(O.gz),e.LFG(X.F),e.LFG(Z.o),e.LFG(OH))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function LH(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.close.emit())})("formIsReady",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.procedureSite)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let xu=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"procedureSite_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.procedureSite=i.item})):t.formName&&t.formName.currentValue&&"procedureSite_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadProcedureSiteEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.procedureSite=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(ca),e.Y36(O.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-procedure-site-form"]],inputs:{procedureSite:"procedureSite",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,LH,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[P.O5,te.M,P.Ov],encapsulation:2}),s})(),Nu=(()=>{class s{constructor(){this.autoHeight=!1,this.procedureSites=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[,{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{field:"code",filter:"agTextColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var a;t.includes(null===(a=i.data)||void 0===a?void 0:a.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-procedure-site-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(f.x,5),2&t){let a;e.iGM(a=e.CRH())&&(i.tableView=a.first)}},inputs:{autoHeight:"autoHeight",procedureSites:"procedureSites"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.procedureSites)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[f.x],encapsulation:2}),s})();function $H(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-procedure-site-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","procedureSite_edit")("formControl",t.formControl)("procedureSite",t.procedureSite)}}const GH=function(){return{}};function RH(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-procedure-site-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","procedureSite_create")("formControl",t.formControl)("procedureSite",e.DdM(3,GH))}}function QH(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-procedure-site-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(d.ref.close())}),e.qZA()}2&s&&e.Q6J("procedureSites",o.data.items)}let VH=(()=>{class s extends G.fS{constructor(t){super(),this.store=t,this.store.loadProcedureSitesEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.procedureSites$.pipe((0,h.w)(i=>(0,D.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(ca))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","procedureSite","send","close"],[1,"w-full","h-full","bg-white",3,"procedureSites","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,$H,2,3,"ng-template",null,1,e.W1O),e.YNc(3,RH,1,4,"ng-template",null,2,e.W1O),e.YNc(5,QH,1,1,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",d)("editTemplate",a)("createTemplate",l)("key",i.field.key)}},dependencies:[E.JJ,E.oH,H.$,xu,Nu],encapsulation:2}),s})();function jH(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-procedure-site-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","procedureSite_edit")("procedureSite",t.value)}}const UH=function(){return{}};function JH(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-procedure-site-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","procedureSite_create")("procedureSite",e.DdM(2,UH))}function zH(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-procedure-site-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(null==d.ref?null:d.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("procedureSites",t.items)}}let HH=(()=>{class s extends pe{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","procedureSite","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","procedureSites","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,jH,1,2,"ng-template",null,1,e.W1O),e.YNc(3,JH,1,3,"ng-template",null,2,e.W1O),e.YNc(5,zH,1,2,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[he,xu,Nu],encapsulation:2}),s})(),qH=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[ca],imports:[P.ez,U.F,E.UX,J.o,ae.u,$.P,j.t,me,k.h,se.G,G.X0.forChild({types:[{name:"procedure-site-select",component:VH,wrappers:["form-field"]},{name:"procedure-site-grid",component:HH}]})]}),s})(),KH=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[qH]}),s})();class Ki extends W.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class ZH extends Ki{constructor(o){super("ValidateProcedureStatusExcelDataAction"),this.valid=!1,this.excelData=o}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name)}),this.validationContext.addRule(new g.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof g.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(a=>a.name),newNames:[i.newName]}):i instanceof g.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,D.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class BH extends g.wS{constructor(o,t,i,a,l){super(o,t,i,a,l,!0)}}class kH extends g.ul{constructor(o,t,i,a=!1){super(o,t,a),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new g.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new BH("name","The procedurestatus name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class YH extends Ki{constructor(o){super("CreateProcedureStatusAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new kH("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateProcedureStatus({input:this.input}).pipe((0,h.w)(o=>(0,ue.of)(o.data.created)))}}class XH extends Ki{constructor(o){super("UpdateProcedureStatusesAction"),this.procedureStatuses=o}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.procedureStatuses,!0))}performAction(){this.response=this.businessProvider.data.userUpdateProcedureStatuses({input:{procedureStatuses:this.procedureStatuses}}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}class eq extends Ki{constructor(o,t){super("UpdateProcedureStatusAction"),this.procedureStatus=o,this.procedureStatusId=t}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.procedureStatus,!0)).addRule(new g.xF("Id","Id should be a CUID and not null",this.procedureStatusId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateProcedureStatus({procedureStatusId:this.procedureStatusId,input:this.procedureStatus}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}let Au=(()=>{class s extends W.nH{constructor(t,i,a){super("NotificationService.ProcedureStatusBusinessProviderService",t,a),this.data=i}createProcedureStatus(t){const i=new YH(t);return i.Do(this),i.response}updateProcedureStatus(t,i){const a=new eq(t,i);return a.Do(this),a.response}importProcedureStatuses(t){const i=new XH(t);return i.Do(this),i.response}validateProcedureStatusExcelData(t){const i=new ZH(t);return i.Do(this),i.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(K.ed),e.LFG(z.q),e.LFG(W.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),tq=(()=>{class s extends W.nH{constructor(t,i,a){super("ProcedureStatusService",a,t),this.businessProvider=i}createProcedureStatus(t){const i=Object.fromEntries(Object.entries(t).filter(([a,l])=>null!==l));return this.businessProvider.createProcedureStatus(i)}updateProcedureStatus(t,i){return this.businessProvider.updateProcedureStatus(t,i)}importProcedureStatuses(t){return this.businessProvider.importProcedureStatuses(t)}validateProcedureStatusExcelData(t){return this.businessProvider.validateProcedureStatusExcelData(t)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(Au,8),e.LFG(Au),e.LFG(K.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),da=(()=>{class s extends b.m1{constructor(t,i,a,l,d,ee){super({loading:!1,procedureStatuses:[],done:!1,searchQuery:"",formName:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=a,this.toast=l,this.formService=d,this.procedureStatusService=ee,this.errors$=this.select(c=>c.errors),this.loading$=this.select(c=>c.loading),this.done$=this.select(c=>c.done),this.item$=this.select(c=>c.item),this.procedureStatuses$=this.select(c=>c.procedureStatuses),this.paging$=this.select(c=>c.paging),this.searchQuery$=this.select(c=>c.searchQuery),this.formName$=this.select(c=>c.formName),this.actionResult$=this.select(this.item$,this.done$,(c,u)=>({item:c,done:u}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.procedureStatuses$,(c,u,n,r,m)=>({errors:c,loading:u,item:n,formName:r,procedureStatuses:m}),{debounce:!0}),this.input$=this.select(this.paging$,this.searchQuery$,(c,u)=>({limit:c.limit,skip:c.skip,name:u,total:c.total})),this.setFormName=this.updater((c,u)=>Object.assign(Object.assign({},c),{formName:u})),this.setItem=this.updater((c,u)=>Object.assign(Object.assign({},c),{item:u})),this.addNewProcedureStatus=this.updater((c,u)=>Object.assign(Object.assign({},c),{procedureStatuses:[...c.procedureStatuses,u]})),this.updateProcedureStatus=this.updater((c,u)=>Object.assign(Object.assign({},c),{procedureStatuses:c.procedureStatuses.map(n=>n.id===u.id?u:n)})),this.addProcedureStatuses=this.updater((c,u)=>Object.assign(Object.assign({},c),{procedureStatuses:c.procedureStatuses.concat(u)})),this.updateProcedureStatuses=this.updater((c,u)=>Object.assign(Object.assign({},c),{procedureStatuses:c.procedureStatuses.map(n=>u.find(m=>m.id===n.id)||n)})),this.setSearchQuery=this.updater((c,u)=>Object.assign(Object.assign({},c),{searchQuery:u})),this.loadProcedureStatusEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.data.userProcedureStatus({procedureStatusId:u}).pipe((0,b._b)(n=>{this.patchState({item:n.data.item,errors:n.errors,loading:!1})},n=>this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})))))),this.loadProcedureStatusesEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.input$),(0,h.w)(([u,n])=>this.data.userProcedureStatuses({input:n}).pipe((0,b._b)(r=>this.patchState({paging:{limit:n.limit,skip:n.skip,total:r.data.count.total},procedureStatuses:r.data.items,errors:r.errors,loading:!1}),r=>this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})))))),this.createProcedureStatusEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.procedureStatusService.createProcedureStatus(Object.assign({},u)).pipe((0,b._b)(n=>{this.addNewProcedureStatus(n),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:n,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},n=>{n.graphQLErrors?(this.toast.error(n.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})):(this.toast.error(n.Message),this.formService.setErrors(n.Data))}))))),this.updateProcedureStatusEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([u,n])=>this.procedureStatusService.updateProcedureStatus(u,u.id).pipe((0,b._b)(r=>{this.updateProcedureStatus(r),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:r,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},r=>{r.graphQLErrors?(this.toast.error(r.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})):(this.toast.error(r.Message),this.formService.setErrors(r.Data))}))))),this.deleteProcedureStatusEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([u,n])=>this.data.userDeleteProcedureStatus({procedureStatusId:n.id}).pipe((0,b._b)(r=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:r.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},r=>{r.graphQLErrors?(this.toast.error(r.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})):(this.toast.error(r.Message),this.formService.setErrors(r.Data))}))))),this.importExcelEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.procedureStatusService.importProcedureStatuses(u).pipe((0,de.K)(n=>{var r;return this.toast.error(null!==(r=n.Message)&&void 0!==r?r:"Failed to save",{duration:3e3}),q.E}),(0,y.b)(n=>{const r=JSON.parse(n.created),m=JSON.parse(n.updated),p=JSON.parse(n.failed),v=r.length+m.length+p.length;this.addProcedureStatuses(r),this.updateProcedureStatuses(m),this.toast.success(`${r.length} created, ${m.length} updated, ${p.length} failed of total ${v}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("procedureStatusId")?(this.route.snapshot.paramMap.get("procedureStatusId"),this.setFormName("procedureStatus_edit")):this.setFormName("procedureStatus_create")}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.procedureStatusService.validateProcedureStatusExcelData(t)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(z.q),e.LFG(O.F0),e.LFG(O.gz),e.LFG(X.F),e.LFG(Z.o),e.LFG(tq))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function iq(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.close.emit())})("formIsReady",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.procedureStatus)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let Fu=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"procedureStatus_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.procedureStatus=i.item})):t.formName&&t.formName.currentValue&&"procedureStatus_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadProcedureStatusEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.procedureStatus=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(da),e.Y36(O.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-procedure-status-form"]],inputs:{procedureStatus:"procedureStatus",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,iq,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[P.O5,te.M,P.Ov],encapsulation:2}),s})(),Pu=(()=>{class s{constructor(){this.autoHeight=!1,this.procedureStatuses=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[,{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var a;t.includes(null===(a=i.data)||void 0===a?void 0:a.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-procedure-status-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(f.x,5),2&t){let a;e.iGM(a=e.CRH())&&(i.tableView=a.first)}},inputs:{autoHeight:"autoHeight",procedureStatuses:"procedureStatuses"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.procedureStatuses)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[f.x],encapsulation:2}),s})();function sq(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-procedure-status-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","procedureStatus_edit")("formControl",t.formControl)("procedureStatus",t.procedureStatus)}}const oq=function(){return{}};function aq(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-procedure-status-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","procedureStatus_create")("formControl",t.formControl)("procedureStatus",e.DdM(3,oq))}}function rq(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-procedure-status-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(d.ref.close())}),e.qZA()}2&s&&e.Q6J("procedureStatuses",o.data.items)}let nq=(()=>{class s extends G.fS{constructor(t){super(),this.store=t,this.store.loadProcedureStatusesEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.procedureStatuses$.pipe((0,h.w)(i=>(0,D.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(da))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","procedureStatus","send","close"],[1,"w-full","h-full","bg-white",3,"procedureStatuses","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,sq,2,3,"ng-template",null,1,e.W1O),e.YNc(3,aq,1,4,"ng-template",null,2,e.W1O),e.YNc(5,rq,1,1,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",d)("editTemplate",a)("createTemplate",l)("key",i.field.key)}},dependencies:[E.JJ,E.oH,H.$,Fu,Pu],encapsulation:2}),s})();function lq(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-procedure-status-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","procedureStatus_edit")("procedureStatus",t.value)}}const cq=function(){return{}};function dq(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-procedure-status-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","procedureStatus_create")("procedureStatus",e.DdM(2,cq))}function uq(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-procedure-status-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(null==d.ref?null:d.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("procedureStatuses",t.items)}}let mq=(()=>{class s extends pe{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","procedureStatus","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","procedureStatuses","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,lq,1,2,"ng-template",null,1,e.W1O),e.YNc(3,dq,1,3,"ng-template",null,2,e.W1O),e.YNc(5,uq,1,2,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[he,Fu,Pu],encapsulation:2}),s})(),pq=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[da],imports:[P.ez,U.F,E.UX,J.o,ae.u,$.P,j.t,me,k.h,se.G,G.X0.forChild({types:[{name:"procedure-status-select",component:nq,wrappers:["form-field"]},{name:"procedure-status-grid",component:mq}]})]}),s})(),hq=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[pq]}),s})();class Zi extends W.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class fq extends Zi{constructor(o){super("ValidateProcedureTypeExcelDataAction"),this.valid=!1,this.excelData=o}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name)}),this.validationContext.addRule(new g.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof g.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(a=>a.name),newNames:[i.newName]}):i instanceof g.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,D.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class _q extends g.wS{constructor(o,t,i,a,l){super(o,t,i,a,l,!0)}}class gq extends g.ul{constructor(o,t,i,a=!1){super(o,t,a),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new g.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new _q("name","The proceduretype name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class vq extends Zi{constructor(o){super("CreateProcedureTypeAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new gq("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateProcedureType({input:this.input}).pipe((0,h.w)(o=>(0,ue.of)(o.data.created)))}}class Cq extends Zi{constructor(o){super("UpdateProcedureTypesAction"),this.procedureTypes=o}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.procedureTypes,!0))}performAction(){this.response=this.businessProvider.data.userUpdateProcedureTypes({input:{procedureTypes:this.procedureTypes}}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}class Sq extends Zi{constructor(o,t){super("UpdateProcedureTypeAction"),this.procedureType=o,this.procedureTypeId=t}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.procedureType,!0)).addRule(new g.xF("Id","Id should be a CUID and not null",this.procedureTypeId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateProcedureType({procedureTypeId:this.procedureTypeId,input:this.procedureType}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}let Iu=(()=>{class s extends W.nH{constructor(t,i,a){super("NotificationService.ProcedureTypeBusinessProviderService",t,a),this.data=i}createProcedureType(t){const i=new vq(t);return i.Do(this),i.response}updateProcedureType(t,i){const a=new Sq(t,i);return a.Do(this),a.response}importProcedureTypes(t){const i=new Cq(t);return i.Do(this),i.response}validateProcedureTypeExcelData(t){const i=new fq(t);return i.Do(this),i.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(K.ed),e.LFG(z.q),e.LFG(W.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),bq=(()=>{class s extends W.nH{constructor(t,i,a){super("ProcedureTypeService",a,t),this.businessProvider=i}createProcedureType(t){const i=Object.fromEntries(Object.entries(t).filter(([a,l])=>null!==l));return this.businessProvider.createProcedureType(i)}updateProcedureType(t,i){return this.businessProvider.updateProcedureType(t,i)}importProcedureTypes(t){return this.businessProvider.importProcedureTypes(t)}validateProcedureTypeExcelData(t){return this.businessProvider.validateProcedureTypeExcelData(t)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(Iu,8),e.LFG(Iu),e.LFG(K.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),ua=(()=>{class s extends b.m1{constructor(t,i,a,l,d,ee){super({loading:!1,procedureTypes:[],done:!1,searchQuery:"",formName:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=a,this.toast=l,this.formService=d,this.procedureTypeService=ee,this.errors$=this.select(c=>c.errors),this.loading$=this.select(c=>c.loading),this.done$=this.select(c=>c.done),this.item$=this.select(c=>c.item),this.procedureTypes$=this.select(c=>c.procedureTypes),this.paging$=this.select(c=>c.paging),this.searchQuery$=this.select(c=>c.searchQuery),this.formName$=this.select(c=>c.formName),this.actionResult$=this.select(this.item$,this.done$,(c,u)=>({item:c,done:u}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.procedureTypes$,(c,u,n,r,m)=>({errors:c,loading:u,item:n,formName:r,procedureTypes:m}),{debounce:!0}),this.input$=this.select(this.paging$,this.searchQuery$,(c,u)=>({limit:c.limit,skip:c.skip,name:u,total:c.total})),this.setFormName=this.updater((c,u)=>Object.assign(Object.assign({},c),{formName:u})),this.setItem=this.updater((c,u)=>Object.assign(Object.assign({},c),{item:u})),this.addNewProcedureType=this.updater((c,u)=>Object.assign(Object.assign({},c),{procedureTypes:[...c.procedureTypes,u]})),this.updateProcedureType=this.updater((c,u)=>Object.assign(Object.assign({},c),{procedureTypes:c.procedureTypes.map(n=>n.id===u.id?u:n)})),this.addProcedureTypes=this.updater((c,u)=>Object.assign(Object.assign({},c),{procedureTypes:c.procedureTypes.concat(u)})),this.updateProcedureTypes=this.updater((c,u)=>Object.assign(Object.assign({},c),{procedureTypes:c.procedureTypes.map(n=>u.find(m=>m.id===n.id)||n)})),this.setSearchQuery=this.updater((c,u)=>Object.assign(Object.assign({},c),{searchQuery:u})),this.loadProcedureTypeEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.data.userProcedureType({procedureTypeId:u}).pipe((0,b._b)(n=>{this.patchState({item:n.data.item,errors:n.errors,loading:!1})},n=>this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})))))),this.loadProcedureTypesEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.input$),(0,h.w)(([u,n])=>this.data.userProcedureTypes({input:n}).pipe((0,b._b)(r=>this.patchState({paging:{limit:n.limit,skip:n.skip,total:r.data.count.total},procedureTypes:r.data.items,errors:r.errors,loading:!1}),r=>this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})))))),this.createProcedureTypeEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.procedureTypeService.createProcedureType(Object.assign({},u)).pipe((0,b._b)(n=>{this.addNewProcedureType(n),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:n,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},n=>{n.graphQLErrors?(this.toast.error(n.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})):(this.toast.error(n.Message),this.formService.setErrors(n.Data))}))))),this.updateProcedureTypeEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([u,n])=>this.procedureTypeService.updateProcedureType(u,u.id).pipe((0,b._b)(r=>{this.updateProcedureType(r),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:r,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},r=>{r.graphQLErrors?(this.toast.error(r.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})):(this.toast.error(r.Message),this.formService.setErrors(r.Data))}))))),this.deleteProcedureTypeEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([u,n])=>this.data.userDeleteProcedureType({procedureTypeId:n.id}).pipe((0,b._b)(r=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:r.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},r=>{r.graphQLErrors?(this.toast.error(r.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})):(this.toast.error(r.Message),this.formService.setErrors(r.Data))}))))),this.importExcelEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.procedureTypeService.importProcedureTypes(u).pipe((0,de.K)(n=>{var r;return this.toast.error(null!==(r=n.Message)&&void 0!==r?r:"Failed to save",{duration:3e3}),q.E}),(0,y.b)(n=>{const r=JSON.parse(n.created),m=JSON.parse(n.updated),p=JSON.parse(n.failed),v=r.length+m.length+p.length;this.addProcedureTypes(r),this.updateProcedureTypes(m),this.toast.success(`${r.length} created, ${m.length} updated, ${p.length} failed of total ${v}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("procedureTypeId")?(this.route.snapshot.paramMap.get("procedureTypeId"),this.setFormName("procedureType_edit")):this.setFormName("procedureType_create")}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.procedureTypeService.validateProcedureTypeExcelData(t)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(z.q),e.LFG(O.F0),e.LFG(O.gz),e.LFG(X.F),e.LFG(Z.o),e.LFG(bq))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function Tq(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.close.emit())})("formIsReady",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.procedureType)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let Du=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"procedureType_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.procedureType=i.item})):t.formName&&t.formName.currentValue&&"procedureType_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadProcedureTypeEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.procedureType=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(ua),e.Y36(O.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-procedure-type-form"]],inputs:{procedureType:"procedureType",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,Tq,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[P.O5,te.M,P.Ov],encapsulation:2}),s})(),Mu=(()=>{class s{constructor(){this.autoHeight=!1,this.procedureTypes=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[,{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{field:"orderIndex",filter:"agTextColumnFilter"},{field:"dateCreated",filter:"agDateColumnFilter"},{headerName:"Is System",field:"isSystem",filter:"agSetColumnFilter",cellRenderer:"checkboxRenderer"},{headerName:"Removed",field:"removed",filter:"agSetColumnFilter",cellRenderer:"checkboxRenderer"},{field:"modality",filter:"agTextColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var a;t.includes(null===(a=i.data)||void 0===a?void 0:a.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-procedure-type-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(f.x,5),2&t){let a;e.iGM(a=e.CRH())&&(i.tableView=a.first)}},inputs:{autoHeight:"autoHeight",procedureTypes:"procedureTypes"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.procedureTypes)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[f.x],encapsulation:2}),s})();function yq(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-procedure-type-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","procedureType_edit")("formControl",t.formControl)("procedureType",t.procedureType)}}const wq=function(){return{}};function xq(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-procedure-type-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","procedureType_create")("formControl",t.formControl)("procedureType",e.DdM(3,wq))}}function Nq(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-procedure-type-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(d.ref.close())}),e.qZA()}2&s&&e.Q6J("procedureTypes",o.data.items)}let Aq=(()=>{class s extends G.fS{constructor(t){super(),this.store=t,this.store.loadProcedureTypesEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.procedureTypes$.pipe((0,h.w)(i=>(0,D.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(ua))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","procedureType","send","close"],[1,"w-full","h-full","bg-white",3,"procedureTypes","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,yq,2,3,"ng-template",null,1,e.W1O),e.YNc(3,xq,1,4,"ng-template",null,2,e.W1O),e.YNc(5,Nq,1,1,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",d)("editTemplate",a)("createTemplate",l)("key",i.field.key)}},dependencies:[E.JJ,E.oH,H.$,Du,Mu],encapsulation:2}),s})();function Fq(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-procedure-type-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","procedureType_edit")("procedureType",t.value)}}const Pq=function(){return{}};function Iq(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-procedure-type-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","procedureType_create")("procedureType",e.DdM(2,Pq))}function Dq(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-procedure-type-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(null==d.ref?null:d.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("procedureTypes",t.items)}}let Mq=(()=>{class s extends pe{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","procedureType","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","procedureTypes","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,Fq,1,2,"ng-template",null,1,e.W1O),e.YNc(3,Iq,1,3,"ng-template",null,2,e.W1O),e.YNc(5,Dq,1,2,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[he,Du,Mu],encapsulation:2}),s})(),Wq=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[ua],imports:[P.ez,U.F,E.UX,J.o,ae.u,$.P,j.t,me,k.h,se.G,G.X0.forChild({types:[{name:"procedure-type-select",component:Aq,wrappers:["form-field"]},{name:"procedure-type-grid",component:Mq}]})]}),s})(),Eq=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[Wq]}),s})();class Bi extends W.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class Oq extends Bi{constructor(o,t,i,a,l){super("ValidateProcedureVendorExcelDataAction"),this.valid=!1,this.excelData=o,this.procedures=t,this.contracts=i,this.vendors=a,this.statuses=l}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name),this.validationContext.addRule(new g.mi(`procedureName_${i}_is_valid}`,"Procedure Is Not Valid","procedure.name",t.procedure,this.procedures,!0)),this.validationContext.addRule(new g.mi(`contractName_${i}_is_valid}`,"Contract Is Not Valid","contract.name",t.contract,this.contracts,!0)),this.validationContext.addRule(new g.mi(`vendorName_${i}_is_valid}`,"Vendor Is Not Valid","vendor.name",t.vendor,this.vendors,!0)),this.validationContext.addRule(new g.mi(`statusName_${i}_is_valid}`,"Status Is Not Valid","status.name",t.status,this.statuses,!0))}),this.validationContext.addRule(new g.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof g.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(a=>a.name),newNames:[i.newName]}):i instanceof g.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,D.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class Lq extends g.wS{constructor(o,t,i,a,l){super(o,t,i,a,l,!0)}}class $q extends g.ul{constructor(o,t,i,a=!1){super(o,t,a),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new g.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new Lq("name","The procedurevendor name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class Gq extends Bi{constructor(o){super("CreateProcedureVendorAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new $q("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateProcedureVendor({input:this.input}).pipe((0,h.w)(o=>(0,ue.of)(o.data.created)))}}class Rq extends Bi{constructor(o){super("UpdateProcedureVendorsAction"),this.procedureVendors=o}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.procedureVendors,!0))}performAction(){this.response=this.businessProvider.data.userUpdateProcedureVendors({input:{procedureVendors:this.procedureVendors}}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}class Qq extends Bi{constructor(o,t){super("UpdateProcedureVendorAction"),this.procedureVendor=o,this.procedureVendorId=t}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.procedureVendor,!0)).addRule(new g.xF("Id","Id should be a CUID and not null",this.procedureVendorId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateProcedureVendor({procedureVendorId:this.procedureVendorId,input:this.procedureVendor}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}let Wu=(()=>{class s extends W.nH{constructor(t,i,a){super("NotificationService.ProcedureVendorBusinessProviderService",t,a),this.data=i}createProcedureVendor(t){const i=new Gq(t);return i.Do(this),i.response}updateProcedureVendor(t,i){const a=new Qq(t,i);return a.Do(this),a.response}importProcedureVendors(t){const i=new Rq(t);return i.Do(this),i.response}validateProcedureVendorExcelData(t,i,a,l,d){const ee=new Oq(t,i,a,l,d);return ee.Do(this),ee.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(K.ed),e.LFG(z.q),e.LFG(W.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),Vq=(()=>{class s extends W.nH{constructor(t,i,a){super("ProcedureVendorService",a,t),this.businessProvider=i}createProcedureVendor(t){return this.businessProvider.createProcedureVendor(t)}updateProcedureVendor(t,i){return this.businessProvider.updateProcedureVendor(t,i)}importProcedureVendors(t){return this.businessProvider.importProcedureVendors(t)}validateProcedureVendorExcelData(t,i,a,l,d){return this.businessProvider.validateProcedureVendorExcelData(t,i,a,l,d)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(Wu,8),e.LFG(Wu),e.LFG(K.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),ki=(()=>{class s extends b.m1{constructor(t,i,a,l,d,ee){if(super({loading:!1,procedureVendors:[],done:!1,searchQuery:"",formName:void 0,procedureId:void 0,contractId:void 0,vendorId:void 0,statusId:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=a,this.toast=l,this.formService=d,this.procedureVendorService=ee,this.errors$=this.select(m=>m.errors),this.loading$=this.select(m=>m.loading),this.done$=this.select(m=>m.done),this.item$=this.select(m=>m.item),this.procedureVendors$=this.select(m=>m.procedureVendors),this.caseProcedures$=this.select(m=>m.caseProcedures||[]),this.contracts$=this.select(m=>m.contracts||[]),this.vendors$=this.select(m=>m.vendors||[]),this.procedureVendorStatuses$=this.select(m=>m.procedureVendorStatuses||[]),this.procedureId$=this.select(m=>m.procedureId),this.contractId$=this.select(m=>m.contractId),this.vendorId$=this.select(m=>m.vendorId),this.statusId$=this.select(m=>m.statusId),this.paging$=this.select(m=>m.paging),this.searchQuery$=this.select(m=>m.searchQuery),this.formName$=this.select(m=>m.formName),this.actionResult$=this.select(this.item$,this.done$,(m,p)=>({item:m,done:p}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.procedureVendors$,this.caseProcedures$,this.contracts$,this.vendors$,this.procedureVendorStatuses$,(m,p,v,I,B,_e,Ne,le,ce)=>({errors:m,loading:p,item:v,formName:I,procedureVendors:B,caseProcedures:_e,contracts:Ne,vendors:le,procedureVendorStatuses:ce}),{debounce:!0}),this.input$=this.select(this.paging$,this.procedureId$,this.contractId$,this.vendorId$,this.statusId$,this.searchQuery$,(m,p,v,I,B,_e)=>({limit:m.limit,skip:m.skip,name:_e,procedureId:p,contractId:v,vendorId:I,statusId:B,total:m.total})),this.setFormName=this.updater((m,p)=>Object.assign(Object.assign({},m),{formName:p})),this.setProcedureId=this.updater((m,p)=>Object.assign(Object.assign({},m),{procedureId:p})),this.setContractId=this.updater((m,p)=>Object.assign(Object.assign({},m),{contractId:p})),this.setVendorId=this.updater((m,p)=>Object.assign(Object.assign({},m),{vendorId:p})),this.setStatusId=this.updater((m,p)=>Object.assign(Object.assign({},m),{statusId:p})),this.filterCaseProcedures=m=>this.data.userSelectCaseProcedures({input:{name:m}}).pipe((0,b._b)(p=>{let v=p.data.items;return this.patchState({caseProcedures:v}),v},p=>this.patchState({errors:p.graphQLErrors?p.graphQLErrors:p})),(0,fe.U)(p=>p.data.items)),this.filterContracts=m=>this.data.userSelectContracts({input:{name:m}}).pipe((0,b._b)(p=>{let v=p.data.items;return this.patchState({contracts:v}),v},p=>this.patchState({errors:p.graphQLErrors?p.graphQLErrors:p})),(0,fe.U)(p=>p.data.items)),this.filterVendors=m=>this.data.userSelectVendors({input:{name:m}}).pipe((0,b._b)(p=>{let v=p.data.items;return this.patchState({vendors:v}),v},p=>this.patchState({errors:p.graphQLErrors?p.graphQLErrors:p})),(0,fe.U)(p=>p.data.items)),this.filterProcedureVendorStatuses=m=>this.data.userSelectProcedureVendorStatuses({input:{name:m}}).pipe((0,b._b)(p=>{let v=p.data.items;return this.patchState({procedureVendorStatuses:v}),v},p=>this.patchState({errors:p.graphQLErrors?p.graphQLErrors:p})),(0,fe.U)(p=>p.data.items)),this.addCaseProcedure=this.updater((m,p)=>Object.assign(Object.assign({},m),{caseProcedures:m.caseProcedures.concat(p)})),this.addContract=this.updater((m,p)=>Object.assign(Object.assign({},m),{contracts:m.contracts.concat(p)})),this.addVendor=this.updater((m,p)=>Object.assign(Object.assign({},m),{vendors:m.vendors.concat(p)})),this.addProcedureVendorStatus=this.updater((m,p)=>Object.assign(Object.assign({},m),{procedureVendorStatuses:m.procedureVendorStatuses.concat(p)})),this.setItem=this.updater((m,p)=>Object.assign(Object.assign({},m),{item:p})),this.addNewProcedureVendor=this.updater((m,p)=>Object.assign(Object.assign({},m),{procedureVendors:[...m.procedureVendors,p]})),this.updateProcedureVendor=this.updater((m,p)=>Object.assign(Object.assign({},m),{procedureVendors:m.procedureVendors.map(v=>v.id===p.id?p:v)})),this.addProcedureVendors=this.updater((m,p)=>Object.assign(Object.assign({},m),{procedureVendors:m.procedureVendors.concat(p)})),this.updateProcedureVendors=this.updater((m,p)=>Object.assign(Object.assign({},m),{procedureVendors:m.procedureVendors.map(v=>p.find(B=>B.id===v.id)||v)})),this.setSearchQuery=this.updater((m,p)=>Object.assign(Object.assign({},m),{searchQuery:p})),this.loadProcedureVendorEffect=this.effect(m=>m.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(p=>this.data.userProcedureVendor({procedureVendorId:p}).pipe((0,b._b)(v=>{this.patchState({item:v.data.item,errors:v.errors,loading:!1})},v=>this.patchState({loading:!1,errors:v.graphQLErrors?v.graphQLErrors:v})))))),this.loadProcedureVendorsEffect=this.effect(m=>m.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.input$),(0,h.w)(([p,v])=>this.data.userProcedureVendors({input:v}).pipe((0,b._b)(I=>this.patchState({paging:{limit:v.limit,skip:v.skip,total:I.data.count.total},procedureVendors:I.data.items,errors:I.errors,loading:!1}),I=>this.patchState({loading:!1,errors:I.graphQLErrors?I.graphQLErrors:I})))))),this.createProcedureVendorEffect=this.effect(m=>m.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(p=>this.procedureVendorService.createProcedureVendor(Object.assign({},p)).pipe((0,b._b)(v=>{this.addNewProcedureVendor(v),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:v,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},v=>{v.graphQLErrors?(this.toast.error(v.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:v.graphQLErrors?v.graphQLErrors:v})):(this.toast.error(v.Message),this.formService.setErrors(v.Data))}))))),this.updateProcedureVendorEffect=this.effect(m=>m.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([p,v])=>this.procedureVendorService.updateProcedureVendor(p,p.id).pipe((0,b._b)(I=>{this.updateProcedureVendor(I),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:I,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},I=>{I.graphQLErrors?(this.toast.error(I.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:I.graphQLErrors?I.graphQLErrors:I})):(this.toast.error(I.Message),this.formService.setErrors(I.Data))}))))),this.deleteProcedureVendorEffect=this.effect(m=>m.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([p,v])=>this.data.userDeleteProcedureVendor({procedureVendorId:v.id}).pipe((0,b._b)(I=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:I.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},I=>{I.graphQLErrors?(this.toast.error(I.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:I.graphQLErrors?I.graphQLErrors:I})):(this.toast.error(I.Message),this.formService.setErrors(I.Data))}))))),this.importExcelEffect=this.effect(m=>m.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(p=>this.procedureVendorService.importProcedureVendors(p).pipe((0,de.K)(v=>{var I;return this.toast.error(null!==(I=v.Message)&&void 0!==I?I:"Failed to save",{duration:3e3}),q.E}),(0,y.b)(v=>{const I=JSON.parse(v.created),B=JSON.parse(v.updated),_e=JSON.parse(v.failed),Ne=I.length+B.length+_e.length;this.addProcedureVendors(I),this.updateProcedureVendors(B),this.toast.success(`${I.length} created, ${B.length} updated, ${_e.length} failed of total ${Ne}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("procedureVendorId")?(this.route.snapshot.paramMap.get("procedureVendorId"),this.setFormName("procedureVendor_edit")):this.setFormName("procedureVendor_create"),this.route.snapshot.paramMap.has("caseProcedureId")){var c=this.route.snapshot.paramMap.get("caseProcedureId");this.setProcedureId(c)}if(this.route.snapshot.paramMap.has("contractId")){var u=this.route.snapshot.paramMap.get("contractId");this.setContractId(u)}if(this.route.snapshot.paramMap.has("vendorId")){var n=this.route.snapshot.paramMap.get("vendorId");this.setVendorId(n)}if(this.route.snapshot.paramMap.has("statusId")){var r=this.route.snapshot.paramMap.get("statusId");this.setStatusId(r)}}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.procedureVendorService.validateProcedureVendorExcelData(t,i.caseProcedures,i.contracts,i.vendors,i.procedureVendorStatuses)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(z.q),e.LFG(O.F0),e.LFG(O.gz),e.LFG(X.F),e.LFG(Z.o),e.LFG(Vq))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function jq(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.close.emit())})("formIsReady",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.procedureVendor)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let Eu=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"procedureVendor_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({id:null,name:""}),this.store.vm$.subscribe(i=>{this.procedureVendor=i.item})):t.formName&&t.formName.currentValue&&"procedureVendor_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadProcedureVendorEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.procedureVendor=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(ki),e.Y36(O.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-procedure-vendor-form"]],inputs:{procedureVendor:"procedureVendor",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,jq,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[P.O5,te.M,P.Ov],encapsulation:2}),s})(),Ou=(()=>{class s{constructor(){this.autoHeight=!1,this.procedureVendors=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[{field:"procedure.name",headerName:"Procedure",filter:"agTextColumnFilter"},{field:"contract.name",headerName:"Contract",filter:"agTextColumnFilter"},{field:"vendor.name",headerName:"Vendor",filter:"agTextColumnFilter"},{field:"status.name",headerName:"Status",filter:"agTextColumnFilter"},{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{field:"procedureId",filter:"agTextColumnFilter",hide:!0},{field:"contractId",filter:"agTextColumnFilter",hide:!0},{field:"vendorId",filter:"agTextColumnFilter",hide:!0},{field:"statusId",filter:"agTextColumnFilter",hide:!0},{headerName:"Estimate",field:"estimate",valueFormatter:t=>{var i;return(0,_.oBD)(null===(i=t.data)||void 0===i?void 0:i.estimate,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{headerName:"Funding Approved",field:"fundingApproved",filter:"agSetColumnFilter",cellRenderer:"checkboxRenderer"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var a;t.includes(null===(a=i.data)||void 0===a?void 0:a.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-procedure-vendor-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(f.x,5),2&t){let a;e.iGM(a=e.CRH())&&(i.tableView=a.first)}},inputs:{autoHeight:"autoHeight",procedureVendors:"procedureVendors"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","data","showSidebar","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("data",i.procedureVendors)("showSidebar",!1)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[f.x],encapsulation:2}),s})();function Uq(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-procedure-vendor-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","procedureVendor_edit")("formControl",t.formControl)("procedureVendor",t.procedureVendor)}}const Jq=function(){return{}};function zq(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-procedure-vendor-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","procedureVendor_create")("formControl",t.formControl)("procedureVendor",e.DdM(3,Jq))}}function Hq(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-procedure-vendor-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(d.ref.close())}),e.qZA()}2&s&&e.Q6J("procedureVendors",o.data.items)}let qq=(()=>{class s extends G.fS{constructor(t){super(),this.store=t,this.store.loadProcedureVendorsEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.procedureVendors$.pipe((0,h.w)(i=>(0,D.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(ki))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e._Bn([ki]),e.qOj],decls:7,vars:5,consts:[[3,"to","control","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","procedureVendor","send","close"],[1,"w-full","h-full","bg-white",3,"procedureVendors","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"ui-select-form",0),e.YNc(1,Uq,2,3,"ng-template",null,1,e.W1O),e.YNc(3,zq,1,4,"ng-template",null,2,e.W1O),e.YNc(5,Hq,1,1,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[E.JJ,E.oH,H.$,Eu,Ou],encapsulation:2}),s})();function Kq(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-procedure-vendor-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","procedureVendor_edit")("procedureVendor",t.value)}}const Zq=function(){return{}};function Bq(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-procedure-vendor-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","procedureVendor_create")("procedureVendor",e.DdM(2,Zq))}function kq(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-procedure-vendor-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(null==d.ref?null:d.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("procedureVendors",t.items)}}let Yq=(()=>{class s extends pe{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:6,consts:[[3,"data","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","procedureVendor","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","procedureVendors","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,Kq,1,2,"ng-template",null,1,e.W1O),e.YNc(3,Bq,1,3,"ng-template",null,2,e.W1O),e.YNc(5,kq,1,2,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("data",i.data)("title",i.to.title)("onSave",i.onSave)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[he,Eu,Ou],encapsulation:2}),s})(),Xq=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[ki],imports:[P.ez,U.F,E.UX,J.o,ae.u,$.P,j.t,me,k.h,se.G,G.X0.forChild({types:[{name:"procedure-vendor-select",component:qq,wrappers:["form-field"]},{name:"procedure-vendor-grid",component:Yq}]})]}),s})(),e4=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[Xq]}),s})();class Yi extends W.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class t4 extends Yi{constructor(o){super("ValidateProcedureVendorStatusExcelDataAction"),this.valid=!1,this.excelData=o}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name)}),this.validationContext.addRule(new g.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof g.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(a=>a.name),newNames:[i.newName]}):i instanceof g.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,D.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class i4 extends g.wS{constructor(o,t,i,a,l){super(o,t,i,a,l,!0)}}class s4 extends g.ul{constructor(o,t,i,a=!1){super(o,t,a),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new g.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new i4("name","The procedurevendorstatus name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class o4 extends Yi{constructor(o){super("CreateProcedureVendorStatusAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new s4("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateProcedureVendorStatus({input:this.input}).pipe((0,h.w)(o=>(0,ue.of)(o.data.created)))}}class a4 extends Yi{constructor(o){super("UpdateProcedureVendorStatusesAction"),this.procedureVendorStatuses=o}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.procedureVendorStatuses,!0))}performAction(){this.response=this.businessProvider.data.userUpdateProcedureVendorStatuses({input:{procedureVendorStatuses:this.procedureVendorStatuses}}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}class r4 extends Yi{constructor(o,t){super("UpdateProcedureVendorStatusAction"),this.procedureVendorStatus=o,this.procedureVendorStatusId=t}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.procedureVendorStatus,!0)).addRule(new g.xF("Id","Id should be a CUID and not null",this.procedureVendorStatusId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateProcedureVendorStatus({procedureVendorStatusId:this.procedureVendorStatusId,input:this.procedureVendorStatus}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}let Lu=(()=>{class s extends W.nH{constructor(t,i,a){super("NotificationService.ProcedureVendorStatusBusinessProviderService",t,a),this.data=i}createProcedureVendorStatus(t){const i=new o4(t);return i.Do(this),i.response}updateProcedureVendorStatus(t,i){const a=new r4(t,i);return a.Do(this),a.response}importProcedureVendorStatuses(t){const i=new a4(t);return i.Do(this),i.response}validateProcedureVendorStatusExcelData(t){const i=new t4(t);return i.Do(this),i.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(K.ed),e.LFG(z.q),e.LFG(W.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),n4=(()=>{class s extends W.nH{constructor(t,i,a){super("ProcedureVendorStatusService",a,t),this.businessProvider=i}createProcedureVendorStatus(t){return this.businessProvider.createProcedureVendorStatus(t)}updateProcedureVendorStatus(t,i){return this.businessProvider.updateProcedureVendorStatus(t,i)}importProcedureVendorStatuses(t){return this.businessProvider.importProcedureVendorStatuses(t)}validateProcedureVendorStatusExcelData(t){return this.businessProvider.validateProcedureVendorStatusExcelData(t)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(Lu,8),e.LFG(Lu),e.LFG(K.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),Xi=(()=>{class s extends b.m1{constructor(t,i,a,l,d,ee){super({loading:!1,procedureVendorStatuses:[],done:!1,searchQuery:"",formName:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=a,this.toast=l,this.formService=d,this.procedureVendorStatusService=ee,this.errors$=this.select(c=>c.errors),this.loading$=this.select(c=>c.loading),this.done$=this.select(c=>c.done),this.item$=this.select(c=>c.item),this.procedureVendorStatuses$=this.select(c=>c.procedureVendorStatuses),this.paging$=this.select(c=>c.paging),this.searchQuery$=this.select(c=>c.searchQuery),this.formName$=this.select(c=>c.formName),this.actionResult$=this.select(this.item$,this.done$,(c,u)=>({item:c,done:u}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.procedureVendorStatuses$,(c,u,n,r,m)=>({errors:c,loading:u,item:n,formName:r,procedureVendorStatuses:m}),{debounce:!0}),this.input$=this.select(this.paging$,this.searchQuery$,(c,u)=>({limit:c.limit,skip:c.skip,name:u,total:c.total})),this.setFormName=this.updater((c,u)=>Object.assign(Object.assign({},c),{formName:u})),this.setItem=this.updater((c,u)=>Object.assign(Object.assign({},c),{item:u})),this.addNewProcedureVendorStatus=this.updater((c,u)=>Object.assign(Object.assign({},c),{procedureVendorStatuses:[...c.procedureVendorStatuses,u]})),this.updateProcedureVendorStatus=this.updater((c,u)=>Object.assign(Object.assign({},c),{procedureVendorStatuses:c.procedureVendorStatuses.map(n=>n.id===u.id?u:n)})),this.addProcedureVendorStatuses=this.updater((c,u)=>Object.assign(Object.assign({},c),{procedureVendorStatuses:c.procedureVendorStatuses.concat(u)})),this.updateProcedureVendorStatuses=this.updater((c,u)=>Object.assign(Object.assign({},c),{procedureVendorStatuses:c.procedureVendorStatuses.map(n=>u.find(m=>m.id===n.id)||n)})),this.setSearchQuery=this.updater((c,u)=>Object.assign(Object.assign({},c),{searchQuery:u})),this.loadProcedureVendorStatusEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.data.userProcedureVendorStatus({procedureVendorStatusId:u}).pipe((0,b._b)(n=>{this.patchState({item:n.data.item,errors:n.errors,loading:!1})},n=>this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})))))),this.loadProcedureVendorStatusesEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.input$),(0,h.w)(([u,n])=>this.data.userProcedureVendorStatuses({input:n}).pipe((0,b._b)(r=>this.patchState({paging:{limit:n.limit,skip:n.skip,total:r.data.count.total},procedureVendorStatuses:r.data.items,errors:r.errors,loading:!1}),r=>this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})))))),this.createProcedureVendorStatusEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.procedureVendorStatusService.createProcedureVendorStatus(Object.assign({},u)).pipe((0,b._b)(n=>{this.addNewProcedureVendorStatus(n),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:n,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},n=>{n.graphQLErrors?(this.toast.error(n.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})):(this.toast.error(n.Message),this.formService.setErrors(n.Data))}))))),this.updateProcedureVendorStatusEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([u,n])=>this.procedureVendorStatusService.updateProcedureVendorStatus(u,u.id).pipe((0,b._b)(r=>{this.updateProcedureVendorStatus(r),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:r,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},r=>{r.graphQLErrors?(this.toast.error(r.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})):(this.toast.error(r.Message),this.formService.setErrors(r.Data))}))))),this.deleteProcedureVendorStatusEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([u,n])=>this.data.userDeleteProcedureVendorStatus({procedureVendorStatusId:n.id}).pipe((0,b._b)(r=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:r.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},r=>{r.graphQLErrors?(this.toast.error(r.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})):(this.toast.error(r.Message),this.formService.setErrors(r.Data))}))))),this.importExcelEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.procedureVendorStatusService.importProcedureVendorStatuses(u).pipe((0,de.K)(n=>{var r;return this.toast.error(null!==(r=n.Message)&&void 0!==r?r:"Failed to save",{duration:3e3}),q.E}),(0,y.b)(n=>{const r=JSON.parse(n.created),m=JSON.parse(n.updated),p=JSON.parse(n.failed),v=r.length+m.length+p.length;this.addProcedureVendorStatuses(r),this.updateProcedureVendorStatuses(m),this.toast.success(`${r.length} created, ${m.length} updated, ${p.length} failed of total ${v}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("procedureVendorStatusId")?(this.route.snapshot.paramMap.get("procedureVendorStatusId"),this.setFormName("procedureVendorStatus_edit")):this.setFormName("procedureVendorStatus_create")}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.procedureVendorStatusService.validateProcedureVendorStatusExcelData(t)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(z.q),e.LFG(O.F0),e.LFG(O.gz),e.LFG(X.F),e.LFG(Z.o),e.LFG(n4))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function l4(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.close.emit())})("formIsReady",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.procedureVendorStatus)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let $u=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"procedureVendorStatus_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.procedureVendorStatus=i.item})):t.formName&&t.formName.currentValue&&"procedureVendorStatus_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadProcedureVendorStatusEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.procedureVendorStatus=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Xi),e.Y36(O.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-procedure-vendor-status-form"]],inputs:{procedureVendorStatus:"procedureVendorStatus",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,l4,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[P.O5,te.M,P.Ov],encapsulation:2}),s})(),Gu=(()=>{class s{constructor(){this.autoHeight=!1,this.procedureVendorStatuses=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[,{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var a;t.includes(null===(a=i.data)||void 0===a?void 0:a.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-procedure-vendor-status-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(f.x,5),2&t){let a;e.iGM(a=e.CRH())&&(i.tableView=a.first)}},inputs:{autoHeight:"autoHeight",procedureVendorStatuses:"procedureVendorStatuses"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","data","showSidebar","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("data",i.procedureVendorStatuses)("showSidebar",!1)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[f.x],encapsulation:2}),s})();function c4(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-procedure-vendor-status-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","procedureVendorStatus_edit")("formControl",t.formControl)("procedureVendorStatus",t.procedureVendorStatus)}}const d4=function(){return{}};function u4(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-procedure-vendor-status-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","procedureVendorStatus_create")("formControl",t.formControl)("procedureVendorStatus",e.DdM(3,d4))}}function m4(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-procedure-vendor-status-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(d.ref.close())}),e.qZA()}2&s&&e.Q6J("procedureVendorStatuses",o.data.items)}let p4=(()=>{class s extends G.fS{constructor(t){super(),this.store=t,this.store.loadProcedureVendorStatusesEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.procedureVendorStatuses$.pipe((0,h.w)(i=>(0,D.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Xi))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e._Bn([Xi]),e.qOj],decls:7,vars:5,consts:[[3,"to","control","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","procedureVendorStatus","send","close"],[1,"w-full","h-full","bg-white",3,"procedureVendorStatuses","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"ui-select-form",0),e.YNc(1,c4,2,3,"ng-template",null,1,e.W1O),e.YNc(3,u4,1,4,"ng-template",null,2,e.W1O),e.YNc(5,m4,1,1,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[E.JJ,E.oH,H.$,$u,Gu],encapsulation:2}),s})();function h4(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-procedure-vendor-status-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","procedureVendorStatus_edit")("procedureVendorStatus",t.value)}}const f4=function(){return{}};function _4(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-procedure-vendor-status-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","procedureVendorStatus_create")("procedureVendorStatus",e.DdM(2,f4))}function g4(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-procedure-vendor-status-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(null==d.ref?null:d.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("procedureVendorStatuses",t.items)}}let v4=(()=>{class s extends pe{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:6,consts:[[3,"data","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","procedureVendorStatus","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","procedureVendorStatuses","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,h4,1,2,"ng-template",null,1,e.W1O),e.YNc(3,_4,1,3,"ng-template",null,2,e.W1O),e.YNc(5,g4,1,2,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("data",i.data)("title",i.to.title)("onSave",i.onSave)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[he,$u,Gu],encapsulation:2}),s})(),C4=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[Xi],imports:[P.ez,U.F,E.UX,J.o,ae.u,$.P,j.t,me,k.h,se.G,G.X0.forChild({types:[{name:"procedure-vendor-status-select",component:p4,wrappers:["form-field"]},{name:"procedure-vendor-status-grid",component:v4}]})]}),s})(),S4=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[C4]}),s})();class es extends W.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class b4 extends es{constructor(o){super("ValidateProcessExcelDataAction"),this.valid=!1,this.excelData=o}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name)}),this.validationContext.addRule(new g.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof g.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(a=>a.name),newNames:[i.newName]}):i instanceof g.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,D.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class T4 extends g.wS{constructor(o,t,i,a,l){super(o,t,i,a,l,!0)}}class y4 extends g.ul{constructor(o,t,i,a=!1){super(o,t,a),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new g.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new T4("name","The process name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class w4 extends es{constructor(o){super("CreateProcessAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new y4("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateProcess({input:this.input}).pipe((0,h.w)(o=>(0,ue.of)(o.data.created)))}}class x4 extends es{constructor(o){super("UpdateProcessesAction"),this.processes=o}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.processes,!0))}performAction(){this.response=this.businessProvider.data.userUpdateProcesses({input:{processes:this.processes}}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}class N4 extends es{constructor(o,t){super("UpdateProcessAction"),this.process=o,this.processId=t}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.process,!0)).addRule(new g.xF("Id","Id should be a CUID and not null",this.processId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateProcess({processId:this.processId,input:this.process}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}let Ru=(()=>{class s extends W.nH{constructor(t,i,a){super("NotificationService.ProcessBusinessProviderService",t,a),this.data=i}createProcess(t){const i=new w4(t);return i.Do(this),i.response}updateProcess(t,i){const a=new N4(t,i);return a.Do(this),a.response}importProcesses(t){const i=new x4(t);return i.Do(this),i.response}validateProcessExcelData(t){const i=new b4(t);return i.Do(this),i.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(K.ed),e.LFG(z.q),e.LFG(W.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),A4=(()=>{class s extends W.nH{constructor(t,i,a){super("ProcessService",a,t),this.businessProvider=i}createProcess(t){const i=Object.fromEntries(Object.entries(t).filter(([a,l])=>null!==l));return this.businessProvider.createProcess(i)}updateProcess(t,i){return this.businessProvider.updateProcess(t,i)}importProcesses(t){return this.businessProvider.importProcesses(t)}validateProcessExcelData(t){return this.businessProvider.validateProcessExcelData(t)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(Ru,8),e.LFG(Ru),e.LFG(K.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),ma=(()=>{class s extends b.m1{constructor(t,i,a,l,d,ee){super({loading:!1,processes:[],done:!1,searchQuery:"",formName:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=a,this.toast=l,this.formService=d,this.processService=ee,this.errors$=this.select(c=>c.errors),this.loading$=this.select(c=>c.loading),this.done$=this.select(c=>c.done),this.item$=this.select(c=>c.item),this.processes$=this.select(c=>c.processes),this.paging$=this.select(c=>c.paging),this.searchQuery$=this.select(c=>c.searchQuery),this.formName$=this.select(c=>c.formName),this.actionResult$=this.select(this.item$,this.done$,(c,u)=>({item:c,done:u}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.processes$,(c,u,n,r,m)=>({errors:c,loading:u,item:n,formName:r,processes:m}),{debounce:!0}),this.input$=this.select(this.paging$,this.searchQuery$,(c,u)=>({limit:c.limit,skip:c.skip,name:u,total:c.total})),this.setFormName=this.updater((c,u)=>Object.assign(Object.assign({},c),{formName:u})),this.setItem=this.updater((c,u)=>Object.assign(Object.assign({},c),{item:u})),this.addNewProcess=this.updater((c,u)=>Object.assign(Object.assign({},c),{processes:[...c.processes,u]})),this.updateProcess=this.updater((c,u)=>Object.assign(Object.assign({},c),{processes:c.processes.map(n=>n.id===u.id?u:n)})),this.addProcesses=this.updater((c,u)=>Object.assign(Object.assign({},c),{processes:c.processes.concat(u)})),this.updateProcesses=this.updater((c,u)=>Object.assign(Object.assign({},c),{processes:c.processes.map(n=>u.find(m=>m.id===n.id)||n)})),this.setSearchQuery=this.updater((c,u)=>Object.assign(Object.assign({},c),{searchQuery:u})),this.loadProcessEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.data.userProcess({processId:u}).pipe((0,b._b)(n=>{this.patchState({item:n.data.item,errors:n.errors,loading:!1})},n=>this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})))))),this.loadProcessesEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.input$),(0,h.w)(([u,n])=>this.data.userProcesses({input:n}).pipe((0,b._b)(r=>this.patchState({paging:{limit:n.limit,skip:n.skip,total:r.data.count.total},processes:r.data.items,errors:r.errors,loading:!1}),r=>this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})))))),this.createProcessEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.processService.createProcess(Object.assign({},u)).pipe((0,b._b)(n=>{this.addNewProcess(n),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:n,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},n=>{n.graphQLErrors?(this.toast.error(n.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})):(this.toast.error(n.Message),this.formService.setErrors(n.Data))}))))),this.updateProcessEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([u,n])=>this.processService.updateProcess(u,u.id).pipe((0,b._b)(r=>{this.updateProcess(r),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:r,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},r=>{r.graphQLErrors?(this.toast.error(r.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})):(this.toast.error(r.Message),this.formService.setErrors(r.Data))}))))),this.deleteProcessEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([u,n])=>this.data.userDeleteProcess({processId:n.id}).pipe((0,b._b)(r=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:r.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},r=>{r.graphQLErrors?(this.toast.error(r.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})):(this.toast.error(r.Message),this.formService.setErrors(r.Data))}))))),this.importExcelEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.processService.importProcesses(u).pipe((0,de.K)(n=>{var r;return this.toast.error(null!==(r=n.Message)&&void 0!==r?r:"Failed to save",{duration:3e3}),q.E}),(0,y.b)(n=>{const r=JSON.parse(n.created),m=JSON.parse(n.updated),p=JSON.parse(n.failed),v=r.length+m.length+p.length;this.addProcesses(r),this.updateProcesses(m),this.toast.success(`${r.length} created, ${m.length} updated, ${p.length} failed of total ${v}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("processId")?(this.route.snapshot.paramMap.get("processId"),this.setFormName("process_edit")):this.setFormName("process_create")}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.processService.validateProcessExcelData(t)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(z.q),e.LFG(O.F0),e.LFG(O.gz),e.LFG(X.F),e.LFG(Z.o),e.LFG(A4))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function F4(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.close.emit())})("formIsReady",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.process)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let Qu=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"process_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.process=i.item})):t.formName&&t.formName.currentValue&&"process_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadProcessEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.process=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(ma),e.Y36(O.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-process-form"]],inputs:{process:"process",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,F4,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[P.O5,te.M,P.Ov],encapsulation:2}),s})(),Vu=(()=>{class s{constructor(){this.autoHeight=!1,this.processes=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[,{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var a;t.includes(null===(a=i.data)||void 0===a?void 0:a.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-process-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(f.x,5),2&t){let a;e.iGM(a=e.CRH())&&(i.tableView=a.first)}},inputs:{autoHeight:"autoHeight",processes:"processes"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.processes)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[f.x],encapsulation:2}),s})();function P4(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-process-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","process_edit")("formControl",t.formControl)("process",t.process)}}const I4=function(){return{}};function D4(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-process-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","process_create")("formControl",t.formControl)("process",e.DdM(3,I4))}}function M4(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-process-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(d.ref.close())}),e.qZA()}2&s&&e.Q6J("processes",o.data.items)}let W4=(()=>{class s extends G.fS{constructor(t){super(),this.store=t,this.store.loadProcessesEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.processes$.pipe((0,h.w)(i=>(0,D.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(ma))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","process","send","close"],[1,"w-full","h-full","bg-white",3,"processes","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,P4,2,3,"ng-template",null,1,e.W1O),e.YNc(3,D4,1,4,"ng-template",null,2,e.W1O),e.YNc(5,M4,1,1,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",d)("editTemplate",a)("createTemplate",l)("key",i.field.key)}},dependencies:[E.JJ,E.oH,H.$,Qu,Vu],encapsulation:2}),s})();function E4(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-process-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","process_edit")("process",t.value)}}const O4=function(){return{}};function L4(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-process-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","process_create")("process",e.DdM(2,O4))}function $4(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-process-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(null==d.ref?null:d.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("processes",t.items)}}let G4=(()=>{class s extends pe{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","process","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","processes","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,E4,1,2,"ng-template",null,1,e.W1O),e.YNc(3,L4,1,3,"ng-template",null,2,e.W1O),e.YNc(5,$4,1,2,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[he,Qu,Vu],encapsulation:2}),s})(),R4=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[ma],imports:[P.ez,U.F,E.UX,J.o,ae.u,$.P,j.t,me,k.h,se.G,G.X0.forChild({types:[{name:"process-select",component:W4,wrappers:["form-field"]},{name:"process-grid",component:G4}]})]}),s})(),Q4=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[R4]}),s})();var ts=M(44288);function V4(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.close.emit())})("formIsReady",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.recommendedOrder)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let ju=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"recommendedOrder_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({id:null,name:""}),this.store.vm$.subscribe(i=>{this.recommendedOrder=i.item})):t.formName&&t.formName.currentValue&&"recommendedOrder_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadRecommendedOrderEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.recommendedOrder=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(ts.I),e.Y36(O.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-recommended-order-form"]],inputs:{recommendedOrder:"recommendedOrder",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,V4,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[P.O5,te.M,P.Ov],encapsulation:2}),s})(),Uu=(()=>{class s{constructor(){this.autoHeight=!1,this.recommendedOrders=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[,{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{field:"patientId",filter:"agTextColumnFilter"},{field:"legalCaseId",filter:"agTextColumnFilter"},{field:"requestingProviderId",filter:"agTextColumnFilter"},{field:"status",filter:"agTextColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var a;t.includes(null===(a=i.data)||void 0===a?void 0:a.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-recommended-order-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(f.x,5),2&t){let a;e.iGM(a=e.CRH())&&(i.tableView=a.first)}},inputs:{autoHeight:"autoHeight",recommendedOrders:"recommendedOrders"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:6,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.recommendedOrders)("showSidebar",!1)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[f.x],encapsulation:2}),s})();function j4(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-recommended-order-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","recommendedOrder_edit")("formControl",t.formControl)("recommendedOrder",t.recommendedOrder)}}const U4=function(){return{}};function J4(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-recommended-order-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","recommendedOrder_create")("formControl",t.formControl)("recommendedOrder",e.DdM(3,U4))}}function z4(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-recommended-order-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(d.ref.close())}),e.qZA()}2&s&&e.Q6J("recommendedOrders",o.data.items)}let H4=(()=>{class s extends G.fS{constructor(t){super(),this.store=t,this.store.loadRecommendedOrdersEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.recommendedOrders$.pipe((0,h.w)(i=>(0,D.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(ts.I))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e._Bn([ts.I]),e.qOj],decls:7,vars:5,consts:[[3,"to","control","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","recommendedOrder","send","close"],[1,"w-full","h-full","bg-white",3,"recommendedOrders","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"ui-select-form",0),e.YNc(1,j4,2,3,"ng-template",null,1,e.W1O),e.YNc(3,J4,1,4,"ng-template",null,2,e.W1O),e.YNc(5,z4,1,1,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[E.JJ,E.oH,H.$,ju,Uu],encapsulation:2}),s})();function q4(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-recommended-order-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","recommendedOrder_edit")("recommendedOrder",t.value)}}const K4=function(){return{}};function Z4(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-recommended-order-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","recommendedOrder_create")("recommendedOrder",e.DdM(2,K4))}function B4(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-recommended-order-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(null==d.ref?null:d.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("recommendedOrders",t.items)}}let k4=(()=>{class s extends pe{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:6,consts:[[3,"data","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","recommendedOrder","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","recommendedOrders","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,q4,1,2,"ng-template",null,1,e.W1O),e.YNc(3,Z4,1,3,"ng-template",null,2,e.W1O),e.YNc(5,B4,1,2,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("data",i.data)("title",i.to.title)("onSave",i.onSave)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[he,ju,Uu],encapsulation:2}),s})(),Y4=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[ts.I],imports:[P.ez,U.F,E.UX,J.o,ae.u,$.P,j.t,me,k.h,se.G,G.X0.forChild({types:[{name:"recommended-order-select",component:H4,wrappers:["form-field"]},{name:"recommended-order-grid",component:k4}]})]}),s})(),X4=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[Y4]}),s})();class is extends W.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class eK extends is{constructor(o){super("ValidateReconciliationPeriodTypeExcelDataAction"),this.valid=!1,this.excelData=o}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name)}),this.validationContext.addRule(new g.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof g.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(a=>a.name),newNames:[i.newName]}):i instanceof g.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,D.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class tK extends g.wS{constructor(o,t,i,a,l){super(o,t,i,a,l,!0)}}class iK extends g.ul{constructor(o,t,i,a=!1){super(o,t,a),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new g.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new tK("name","The reconciliationperiodtype name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class sK extends is{constructor(o){super("CreateReconciliationPeriodTypeAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new iK("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateReconciliationPeriodType({input:this.input}).pipe((0,h.w)(o=>(0,ue.of)(o.data.created)))}}class oK extends is{constructor(o){super("UpdateReconciliationPeriodTypesAction"),this.reconciliationPeriodTypes=o}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.reconciliationPeriodTypes,!0))}performAction(){this.response=this.businessProvider.data.userUpdateReconciliationPeriodTypes({input:{reconciliationPeriodTypes:this.reconciliationPeriodTypes}}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}class aK extends is{constructor(o,t){super("UpdateReconciliationPeriodTypeAction"),this.reconciliationPeriodType=o,this.reconciliationPeriodTypeId=t}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.reconciliationPeriodType,!0)).addRule(new g.xF("Id","Id should be a CUID and not null",this.reconciliationPeriodTypeId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateReconciliationPeriodType({reconciliationPeriodTypeId:this.reconciliationPeriodTypeId,input:this.reconciliationPeriodType}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}let Ju=(()=>{class s extends W.nH{constructor(t,i,a){super("NotificationService.ReconciliationPeriodTypeBusinessProviderService",t,a),this.data=i}createReconciliationPeriodType(t){const i=new sK(t);return i.Do(this),i.response}updateReconciliationPeriodType(t,i){const a=new aK(t,i);return a.Do(this),a.response}importReconciliationPeriodTypes(t){const i=new oK(t);return i.Do(this),i.response}validateReconciliationPeriodTypeExcelData(t){const i=new eK(t);return i.Do(this),i.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(K.ed),e.LFG(z.q),e.LFG(W.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),rK=(()=>{class s extends W.nH{constructor(t,i,a){super("ReconciliationPeriodTypeService",a,t),this.businessProvider=i}createReconciliationPeriodType(t){const i=Object.fromEntries(Object.entries(t).filter(([a,l])=>null!==l));return this.businessProvider.createReconciliationPeriodType(i)}updateReconciliationPeriodType(t,i){return this.businessProvider.updateReconciliationPeriodType(t,i)}importReconciliationPeriodTypes(t){return this.businessProvider.importReconciliationPeriodTypes(t)}validateReconciliationPeriodTypeExcelData(t){return this.businessProvider.validateReconciliationPeriodTypeExcelData(t)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(Ju,8),e.LFG(Ju),e.LFG(K.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),pa=(()=>{class s extends b.m1{constructor(t,i,a,l,d,ee){super({loading:!1,reconciliationPeriodTypes:[],done:!1,searchQuery:"",formName:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=a,this.toast=l,this.formService=d,this.reconciliationPeriodTypeService=ee,this.errors$=this.select(c=>c.errors),this.loading$=this.select(c=>c.loading),this.done$=this.select(c=>c.done),this.item$=this.select(c=>c.item),this.reconciliationPeriodTypes$=this.select(c=>c.reconciliationPeriodTypes),this.paging$=this.select(c=>c.paging),this.searchQuery$=this.select(c=>c.searchQuery),this.formName$=this.select(c=>c.formName),this.actionResult$=this.select(this.item$,this.done$,(c,u)=>({item:c,done:u}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.reconciliationPeriodTypes$,(c,u,n,r,m)=>({errors:c,loading:u,item:n,formName:r,reconciliationPeriodTypes:m}),{debounce:!0}),this.input$=this.select(this.paging$,this.searchQuery$,(c,u)=>({limit:c.limit,skip:c.skip,name:u,total:c.total})),this.setFormName=this.updater((c,u)=>Object.assign(Object.assign({},c),{formName:u})),this.setItem=this.updater((c,u)=>Object.assign(Object.assign({},c),{item:u})),this.addNewReconciliationPeriodType=this.updater((c,u)=>Object.assign(Object.assign({},c),{reconciliationPeriodTypes:[...c.reconciliationPeriodTypes,u]})),this.updateReconciliationPeriodType=this.updater((c,u)=>Object.assign(Object.assign({},c),{reconciliationPeriodTypes:c.reconciliationPeriodTypes.map(n=>n.id===u.id?u:n)})),this.addReconciliationPeriodTypes=this.updater((c,u)=>Object.assign(Object.assign({},c),{reconciliationPeriodTypes:c.reconciliationPeriodTypes.concat(u)})),this.updateReconciliationPeriodTypes=this.updater((c,u)=>Object.assign(Object.assign({},c),{reconciliationPeriodTypes:c.reconciliationPeriodTypes.map(n=>u.find(m=>m.id===n.id)||n)})),this.setSearchQuery=this.updater((c,u)=>Object.assign(Object.assign({},c),{searchQuery:u})),this.loadReconciliationPeriodTypeEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.data.userReconciliationPeriodType({reconciliationPeriodTypeId:u}).pipe((0,b._b)(n=>{this.patchState({item:n.data.item,errors:n.errors,loading:!1})},n=>this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})))))),this.loadReconciliationPeriodTypesEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.input$),(0,h.w)(([u,n])=>this.data.userReconciliationPeriodTypes({input:n}).pipe((0,b._b)(r=>this.patchState({paging:{limit:n.limit,skip:n.skip,total:r.data.count.total},reconciliationPeriodTypes:r.data.items,errors:r.errors,loading:!1}),r=>this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})))))),this.createReconciliationPeriodTypeEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.reconciliationPeriodTypeService.createReconciliationPeriodType(Object.assign({},u)).pipe((0,b._b)(n=>{this.addNewReconciliationPeriodType(n),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:n,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},n=>{n.graphQLErrors?(this.toast.error(n.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})):(this.toast.error(n.Message),this.formService.setErrors(n.Data))}))))),this.updateReconciliationPeriodTypeEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([u,n])=>this.reconciliationPeriodTypeService.updateReconciliationPeriodType(u,u.id).pipe((0,b._b)(r=>{this.updateReconciliationPeriodType(r),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:r,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},r=>{r.graphQLErrors?(this.toast.error(r.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})):(this.toast.error(r.Message),this.formService.setErrors(r.Data))}))))),this.deleteReconciliationPeriodTypeEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([u,n])=>this.data.userDeleteReconciliationPeriodType({reconciliationPeriodTypeId:n.id}).pipe((0,b._b)(r=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:r.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},r=>{r.graphQLErrors?(this.toast.error(r.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})):(this.toast.error(r.Message),this.formService.setErrors(r.Data))}))))),this.importExcelEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.reconciliationPeriodTypeService.importReconciliationPeriodTypes(u).pipe((0,de.K)(n=>{var r;return this.toast.error(null!==(r=n.Message)&&void 0!==r?r:"Failed to save",{duration:3e3}),q.E}),(0,y.b)(n=>{const r=JSON.parse(n.created),m=JSON.parse(n.updated),p=JSON.parse(n.failed),v=r.length+m.length+p.length;this.addReconciliationPeriodTypes(r),this.updateReconciliationPeriodTypes(m),this.toast.success(`${r.length} created, ${m.length} updated, ${p.length} failed of total ${v}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("reconciliationPeriodTypeId")?(this.route.snapshot.paramMap.get("reconciliationPeriodTypeId"),this.setFormName("reconciliationPeriodType_edit")):this.setFormName("reconciliationPeriodType_create")}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.reconciliationPeriodTypeService.validateReconciliationPeriodTypeExcelData(t)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(z.q),e.LFG(O.F0),e.LFG(O.gz),e.LFG(X.F),e.LFG(Z.o),e.LFG(rK))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function nK(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.close.emit())})("formIsReady",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.reconciliationPeriodType)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let zu=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"reconciliationPeriodType_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.reconciliationPeriodType=i.item})):t.formName&&t.formName.currentValue&&"reconciliationPeriodType_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadReconciliationPeriodTypeEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.reconciliationPeriodType=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(pa),e.Y36(O.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-reconciliation-period-type-form"]],inputs:{reconciliationPeriodType:"reconciliationPeriodType",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,nK,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[P.O5,te.M,P.Ov],encapsulation:2}),s})(),Hu=(()=>{class s{constructor(){this.autoHeight=!1,this.reconciliationPeriodTypes=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[,{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var a;t.includes(null===(a=i.data)||void 0===a?void 0:a.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-reconciliation-period-type-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(f.x,5),2&t){let a;e.iGM(a=e.CRH())&&(i.tableView=a.first)}},inputs:{autoHeight:"autoHeight",reconciliationPeriodTypes:"reconciliationPeriodTypes"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.reconciliationPeriodTypes)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[f.x],encapsulation:2}),s})();function lK(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-reconciliation-period-type-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","reconciliationPeriodType_edit")("formControl",t.formControl)("reconciliationPeriodType",t.reconciliationPeriodType)}}const cK=function(){return{}};function dK(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-reconciliation-period-type-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","reconciliationPeriodType_create")("formControl",t.formControl)("reconciliationPeriodType",e.DdM(3,cK))}}function uK(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-reconciliation-period-type-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(d.ref.close())}),e.qZA()}2&s&&e.Q6J("reconciliationPeriodTypes",o.data.items)}let mK=(()=>{class s extends G.fS{constructor(t){super(),this.store=t,this.store.loadReconciliationPeriodTypesEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.reconciliationPeriodTypes$.pipe((0,h.w)(i=>(0,D.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(pa))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","reconciliationPeriodType","send","close"],[1,"w-full","h-full","bg-white",3,"reconciliationPeriodTypes","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,lK,2,3,"ng-template",null,1,e.W1O),e.YNc(3,dK,1,4,"ng-template",null,2,e.W1O),e.YNc(5,uK,1,1,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",d)("editTemplate",a)("createTemplate",l)("key",i.field.key)}},dependencies:[E.JJ,E.oH,H.$,zu,Hu],encapsulation:2}),s})();function pK(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-reconciliation-period-type-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","reconciliationPeriodType_edit")("reconciliationPeriodType",t.value)}}const hK=function(){return{}};function fK(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-reconciliation-period-type-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","reconciliationPeriodType_create")("reconciliationPeriodType",e.DdM(2,hK))}function _K(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-reconciliation-period-type-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(null==d.ref?null:d.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("reconciliationPeriodTypes",t.items)}}let gK=(()=>{class s extends pe{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","reconciliationPeriodType","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","reconciliationPeriodTypes","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,pK,1,2,"ng-template",null,1,e.W1O),e.YNc(3,fK,1,3,"ng-template",null,2,e.W1O),e.YNc(5,_K,1,2,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[he,zu,Hu],encapsulation:2}),s})(),vK=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[pa],imports:[P.ez,U.F,E.UX,J.o,ae.u,$.P,j.t,me,k.h,se.G,G.X0.forChild({types:[{name:"reconciliation-period-type-select",component:mK,wrappers:["form-field"]},{name:"reconciliation-period-type-grid",component:gK}]})]}),s})(),CK=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[vK]}),s})();class ss extends W.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class SK extends ss{constructor(o,t,i){super("ValidateRequiredFieldExcelDataAction"),this.valid=!1,this.excelData=o,this.accidentTypes=t,this.medLevels=i}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name),this.validationContext.addRule(new g.mi(`accidentTypeName_${i}_is_valid}`,"Accident Type Is Not Valid","accidentType.name",t.accidentType,this.accidentTypes,!0)),this.validationContext.addRule(new g.mi(`medLevelName_${i}_is_valid}`,"Med Level Is Not Valid","medLevel.name",t.medLevel,this.medLevels,!0))}),this.validationContext.addRule(new g.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof g.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(a=>a.name),newNames:[i.newName]}):i instanceof g.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,D.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class bK extends g.wS{constructor(o,t,i,a,l){super(o,t,i,a,l,!0)}}class TK extends g.ul{constructor(o,t,i,a=!1){super(o,t,a),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new g.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new bK("name","The requiredfield name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class yK extends ss{constructor(o){super("CreateRequiredFieldAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new TK("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateRequiredField({input:this.input}).pipe((0,h.w)(o=>(0,ue.of)(o.data.created)))}}class wK extends ss{constructor(o){super("UpdateRequiredFieldsAction"),this.requiredFields=o}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.requiredFields,!0))}performAction(){this.response=this.businessProvider.data.userUpdateRequiredFields({input:{requiredFields:this.requiredFields}}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}class xK extends ss{constructor(o,t){super("UpdateRequiredFieldAction"),this.requiredField=o,this.requiredFieldId=t}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.requiredField,!0)).addRule(new g.xF("Id","Id should be a CUID and not null",this.requiredFieldId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateRequiredField({requiredFieldId:this.requiredFieldId,input:this.requiredField}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}let qu=(()=>{class s extends W.nH{constructor(t,i,a){super("NotificationService.RequiredFieldBusinessProviderService",t,a),this.data=i}createRequiredField(t){const i=new yK(t);return i.Do(this),i.response}updateRequiredField(t,i){const a=new xK(t,i);return a.Do(this),a.response}importRequiredFields(t){const i=new wK(t);return i.Do(this),i.response}validateRequiredFieldExcelData(t,i,a){const l=new SK(t,i,a);return l.Do(this),l.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(K.ed),e.LFG(z.q),e.LFG(W.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),NK=(()=>{class s extends W.nH{constructor(t,i,a){super("RequiredFieldService",a,t),this.businessProvider=i}createRequiredField(t){const i=Object.fromEntries(Object.entries(t).filter(([a,l])=>null!==l));return this.businessProvider.createRequiredField(i)}updateRequiredField(t,i){return this.businessProvider.updateRequiredField(t,i)}importRequiredFields(t){return this.businessProvider.importRequiredFields(t)}validateRequiredFieldExcelData(t,i,a){return this.businessProvider.validateRequiredFieldExcelData(t,i,a)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(qu,8),e.LFG(qu),e.LFG(K.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),ha=(()=>{class s extends b.m1{constructor(t,i,a,l,d,ee){if(super({loading:!1,requiredFields:[],done:!1,searchQuery:"",formName:void 0,accidentTypeId:void 0,medLevelId:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=a,this.toast=l,this.formService=d,this.requiredFieldService=ee,this.errors$=this.select(n=>n.errors),this.loading$=this.select(n=>n.loading),this.done$=this.select(n=>n.done),this.item$=this.select(n=>n.item),this.requiredFields$=this.select(n=>n.requiredFields),this.accidentTypes$=this.select(n=>n.accidentTypes||[]),this.medLevels$=this.select(n=>n.medLevels||[]),this.accidentTypeId$=this.select(n=>n.accidentTypeId),this.medLevelId$=this.select(n=>n.medLevelId),this.paging$=this.select(n=>n.paging),this.searchQuery$=this.select(n=>n.searchQuery),this.formName$=this.select(n=>n.formName),this.actionResult$=this.select(this.item$,this.done$,(n,r)=>({item:n,done:r}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.requiredFields$,this.accidentTypes$,this.medLevels$,(n,r,m,p,v,I,B)=>({errors:n,loading:r,item:m,formName:p,requiredFields:v,accidentTypes:I,medLevels:B}),{debounce:!0}),this.input$=this.select(this.paging$,this.accidentTypeId$,this.medLevelId$,this.searchQuery$,(n,r,m,p)=>({limit:n.limit,skip:n.skip,name:p,accidentTypeId:r,medLevelId:m,total:n.total})),this.setFormName=this.updater((n,r)=>Object.assign(Object.assign({},n),{formName:r})),this.setAccidentTypeId=this.updater((n,r)=>Object.assign(Object.assign({},n),{accidentTypeId:r})),this.setMedLevelId=this.updater((n,r)=>Object.assign(Object.assign({},n),{medLevelId:r})),this.filterAccidentTypes=n=>this.data.userSelectAccidentTypes({input:{name:n}}).pipe((0,b._b)(r=>{let m=r.data.items;return this.patchState({accidentTypes:m}),m},r=>this.patchState({errors:r.graphQLErrors?r.graphQLErrors:r})),(0,fe.U)(r=>r.data.items)),this.filterMedLevels=n=>this.data.userSelectMedLevels({input:{name:n}}).pipe((0,b._b)(r=>{let m=r.data.items;return this.patchState({medLevels:m}),m},r=>this.patchState({errors:r.graphQLErrors?r.graphQLErrors:r})),(0,fe.U)(r=>r.data.items)),this.addAccidentType=this.updater((n,r)=>Object.assign(Object.assign({},n),{accidentTypes:n.accidentTypes.concat(r)})),this.addMedLevel=this.updater((n,r)=>Object.assign(Object.assign({},n),{medLevels:n.medLevels.concat(r)})),this.setItem=this.updater((n,r)=>Object.assign(Object.assign({},n),{item:r})),this.addNewRequiredField=this.updater((n,r)=>Object.assign(Object.assign({},n),{requiredFields:[...n.requiredFields,r]})),this.updateRequiredField=this.updater((n,r)=>Object.assign(Object.assign({},n),{requiredFields:n.requiredFields.map(m=>m.id===r.id?r:m)})),this.addRequiredFields=this.updater((n,r)=>Object.assign(Object.assign({},n),{requiredFields:n.requiredFields.concat(r)})),this.updateRequiredFields=this.updater((n,r)=>Object.assign(Object.assign({},n),{requiredFields:n.requiredFields.map(m=>r.find(v=>v.id===m.id)||m)})),this.setSearchQuery=this.updater((n,r)=>Object.assign(Object.assign({},n),{searchQuery:r})),this.loadRequiredFieldEffect=this.effect(n=>n.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(r=>this.data.userRequiredField({requiredFieldId:r}).pipe((0,b._b)(m=>{this.patchState({item:m.data.item,errors:m.errors,loading:!1})},m=>this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})))))),this.loadRequiredFieldsEffect=this.effect(n=>n.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.input$),(0,h.w)(([r,m])=>this.data.userRequiredFields({input:m}).pipe((0,b._b)(p=>this.patchState({paging:{limit:m.limit,skip:m.skip,total:p.data.count.total},requiredFields:p.data.items,errors:p.errors,loading:!1}),p=>this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})))))),this.createRequiredFieldEffect=this.effect(n=>n.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(r=>this.requiredFieldService.createRequiredField(Object.assign({},r)).pipe((0,b._b)(m=>{this.addNewRequiredField(m),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:m,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},m=>{m.graphQLErrors?(this.toast.error(m.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})):(this.toast.error(m.Message),this.formService.setErrors(m.Data))}))))),this.updateRequiredFieldEffect=this.effect(n=>n.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([r,m])=>this.requiredFieldService.updateRequiredField(r,r.id).pipe((0,b._b)(p=>{this.updateRequiredField(p),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:p,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},p=>{p.graphQLErrors?(this.toast.error(p.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})):(this.toast.error(p.Message),this.formService.setErrors(p.Data))}))))),this.deleteRequiredFieldEffect=this.effect(n=>n.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([r,m])=>this.data.userDeleteRequiredField({requiredFieldId:m.id}).pipe((0,b._b)(p=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:p.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},p=>{p.graphQLErrors?(this.toast.error(p.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})):(this.toast.error(p.Message),this.formService.setErrors(p.Data))}))))),this.importExcelEffect=this.effect(n=>n.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(r=>this.requiredFieldService.importRequiredFields(r).pipe((0,de.K)(m=>{var p;return this.toast.error(null!==(p=m.Message)&&void 0!==p?p:"Failed to save",{duration:3e3}),q.E}),(0,y.b)(m=>{const p=JSON.parse(m.created),v=JSON.parse(m.updated),I=JSON.parse(m.failed),B=p.length+v.length+I.length;this.addRequiredFields(p),this.updateRequiredFields(v),this.toast.success(`${p.length} created, ${v.length} updated, ${I.length} failed of total ${B}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("requiredFieldId")?(this.route.snapshot.paramMap.get("requiredFieldId"),this.setFormName("requiredField_edit")):this.setFormName("requiredField_create"),this.route.snapshot.paramMap.has("accidentTypeId")){var c=this.route.snapshot.paramMap.get("accidentTypeId");this.setAccidentTypeId(c)}if(this.route.snapshot.paramMap.has("medLevelId")){var u=this.route.snapshot.paramMap.get("medLevelId");this.setMedLevelId(u)}}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.requiredFieldService.validateRequiredFieldExcelData(t,i.accidentTypes,i.medLevels)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(z.q),e.LFG(O.F0),e.LFG(O.gz),e.LFG(X.F),e.LFG(Z.o),e.LFG(NK))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function AK(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.close.emit())})("formIsReady",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.requiredField)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let Ku=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"requiredField_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.requiredField=i.item})):t.formName&&t.formName.currentValue&&"requiredField_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadRequiredFieldEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.requiredField=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(ha),e.Y36(O.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-required-field-form"]],inputs:{requiredField:"requiredField",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,AK,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[P.O5,te.M,P.Ov],encapsulation:2}),s})(),Zu=(()=>{class s{constructor(){this.autoHeight=!1,this.requiredFields=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[{field:"accidentType.name",headerName:"Accident Type",filter:"agTextColumnFilter"},{field:"medLevel.name",headerName:"Med Level",filter:"agTextColumnFilter"},{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{field:"entityName",filter:"agTextColumnFilter"},{field:"accidentTypeId",filter:"agTextColumnFilter",hide:!0},{field:"medLevelId",filter:"agTextColumnFilter",hide:!0}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var a;t.includes(null===(a=i.data)||void 0===a?void 0:a.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-required-field-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(f.x,5),2&t){let a;e.iGM(a=e.CRH())&&(i.tableView=a.first)}},inputs:{autoHeight:"autoHeight",requiredFields:"requiredFields"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.requiredFields)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[f.x],encapsulation:2}),s})();function FK(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-required-field-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","requiredField_edit")("formControl",t.formControl)("requiredField",t.requiredField)}}const PK=function(){return{}};function IK(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-required-field-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","requiredField_create")("formControl",t.formControl)("requiredField",e.DdM(3,PK))}}function DK(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-required-field-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(d.ref.close())}),e.qZA()}2&s&&e.Q6J("requiredFields",o.data.items)}let MK=(()=>{class s extends G.fS{constructor(t){super(),this.store=t,this.store.loadRequiredFieldsEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.requiredFields$.pipe((0,h.w)(i=>(0,D.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(ha))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","requiredField","send","close"],[1,"w-full","h-full","bg-white",3,"requiredFields","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,FK,2,3,"ng-template",null,1,e.W1O),e.YNc(3,IK,1,4,"ng-template",null,2,e.W1O),e.YNc(5,DK,1,1,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",d)("editTemplate",a)("createTemplate",l)("key",i.field.key)}},dependencies:[E.JJ,E.oH,H.$,Ku,Zu],encapsulation:2}),s})();function WK(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-required-field-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","requiredField_edit")("requiredField",t.value)}}const EK=function(){return{}};function OK(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-required-field-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","requiredField_create")("requiredField",e.DdM(2,EK))}function LK(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-required-field-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(null==d.ref?null:d.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("requiredFields",t.items)}}let $K=(()=>{class s extends pe{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","requiredField","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","requiredFields","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,WK,1,2,"ng-template",null,1,e.W1O),e.YNc(3,OK,1,3,"ng-template",null,2,e.W1O),e.YNc(5,LK,1,2,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[he,Ku,Zu],encapsulation:2}),s})(),GK=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[ha],imports:[P.ez,U.F,E.UX,J.o,ae.u,$.P,j.t,me,k.h,se.G,G.X0.forChild({types:[{name:"required-field-select",component:MK,wrappers:["form-field"]},{name:"required-field-grid",component:$K}]})]}),s})(),RK=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[GK]}),s})();var fa=M(62336);function QK(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.close.emit())})("formIsReady",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.review)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let Bu=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"review_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({id:null,name:""}),this.store.vm$.subscribe(i=>{this.review=i.item})):t.formName&&t.formName.currentValue&&"review_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadReviewEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.review=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(fa.J),e.Y36(O.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-review-form"]],inputs:{review:"review",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,QK,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[P.O5,te.M,P.Ov],encapsulation:2}),s})(),ku=(()=>{class s{constructor(){this.autoHeight=!1,this.reviews=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[{field:"clinicalProvider.name",headerName:"Clinical Provider",filter:"agTextColumnFilter"},{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{field:"patientId",filter:"agTextColumnFilter"},{field:"clinicalProviderId",filter:"agTextColumnFilter",hide:!0},{field:"comment",filter:"agTextColumnFilter"},{headerName:"Rating",field:"rating",valueFormatter:t=>{var i;return(0,_.oBD)(null===(i=t.data)||void 0===i?void 0:i.rating,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{field:"reivewDateAndTime",filter:"agDateColumnFilter"},{field:"parentId",filter:"agTextColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var a;t.includes(null===(a=i.data)||void 0===a?void 0:a.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-review-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(f.x,5),2&t){let a;e.iGM(a=e.CRH())&&(i.tableView=a.first)}},inputs:{autoHeight:"autoHeight",reviews:"reviews"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.reviews)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[f.x],encapsulation:2}),s})();function VK(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-review-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","review_edit")("formControl",t.formControl)("review",t.review)}}const jK=function(){return{}};function UK(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-review-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","review_create")("formControl",t.formControl)("review",e.DdM(3,jK))}}function JK(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-review-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(d.ref.close())}),e.qZA()}2&s&&e.Q6J("reviews",o.data.items)}let zK=(()=>{class s extends G.fS{constructor(t){super(),this.store=t,this.store.loadReviewsEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.reviews$.pipe((0,h.w)(i=>(0,D.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(fa.J))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","review","send","close"],[1,"w-full","h-full","bg-white",3,"reviews","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,VK,2,3,"ng-template",null,1,e.W1O),e.YNc(3,UK,1,4,"ng-template",null,2,e.W1O),e.YNc(5,JK,1,1,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",d)("editTemplate",a)("createTemplate",l)("key",i.field.key)}},dependencies:[E.JJ,E.oH,H.$,Bu,ku],encapsulation:2}),s})();function HK(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-review-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","review_edit")("review",t.value)}}const qK=function(){return{}};function KK(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-review-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","review_create")("review",e.DdM(2,qK))}function ZK(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-review-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(null==d.ref?null:d.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("reviews",t.items)}}let BK=(()=>{class s extends pe{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:6,consts:[[3,"data","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","review","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","reviews","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,HK,1,2,"ng-template",null,1,e.W1O),e.YNc(3,KK,1,3,"ng-template",null,2,e.W1O),e.YNc(5,ZK,1,2,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("data",i.data)("title",i.to.title)("onSave",i.onSave)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[he,Bu,ku],encapsulation:2}),s})(),kK=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[fa.J],imports:[P.ez,U.F,E.UX,J.o,ae.u,$.P,j.t,me,k.h,se.G,G.X0.forChild({types:[{name:"review-select",component:zK,wrappers:["form-field"]},{name:"review-grid",component:BK}]})]}),s})(),YK=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[kK]}),s})();class os extends W.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class XK extends os{constructor(o){super("ValidateRoleExcelDataAction"),this.valid=!1,this.excelData=o}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name)}),this.validationContext.addRule(new g.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof g.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(a=>a.name),newNames:[i.newName]}):i instanceof g.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,D.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class eZ extends g.wS{constructor(o,t,i,a,l){super(o,t,i,a,l,!0)}}class tZ extends g.ul{constructor(o,t,i,a=!1){super(o,t,a),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new g.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new eZ("name","The role name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class iZ extends os{constructor(o){super("CreateRoleAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new tZ("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateRole({input:this.input}).pipe((0,h.w)(o=>(0,ue.of)(o.data.created)))}}class sZ extends os{constructor(o){super("UpdateRolesAction"),this.roles=o}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.roles,!0))}performAction(){this.response=this.businessProvider.data.userUpdateRoles({input:{roles:this.roles}}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}class oZ extends os{constructor(o,t){super("UpdateRoleAction"),this.role=o,this.roleId=t}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.role,!0)).addRule(new g.xF("Id","Id should be a CUID and not null",this.roleId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateRole({roleId:this.roleId,input:this.role}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}let Yu=(()=>{class s extends W.nH{constructor(t,i,a){super("NotificationService.RoleBusinessProviderService",t,a),this.data=i}createRole(t){const i=new iZ(t);return i.Do(this),i.response}updateRole(t,i){const a=new oZ(t,i);return a.Do(this),a.response}importRoles(t){const i=new sZ(t);return i.Do(this),i.response}validateRoleExcelData(t){const i=new XK(t);return i.Do(this),i.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(K.ed),e.LFG(z.q),e.LFG(W.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),aZ=(()=>{class s extends W.nH{constructor(t,i,a){super("RoleService",a,t),this.businessProvider=i}createRole(t){const i=Object.fromEntries(Object.entries(t).filter(([a,l])=>null!==l));return this.businessProvider.createRole(i)}updateRole(t,i){return this.businessProvider.updateRole(t,i)}importRoles(t){return this.businessProvider.importRoles(t)}validateRoleExcelData(t){return this.businessProvider.validateRoleExcelData(t)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(Yu,8),e.LFG(Yu),e.LFG(K.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),_a=(()=>{class s extends b.m1{constructor(t,i,a,l,d,ee){super({loading:!1,roles:[],done:!1,searchQuery:"",formName:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=a,this.toast=l,this.formService=d,this.roleService=ee,this.errors$=this.select(c=>c.errors),this.loading$=this.select(c=>c.loading),this.done$=this.select(c=>c.done),this.item$=this.select(c=>c.item),this.roles$=this.select(c=>c.roles),this.paging$=this.select(c=>c.paging),this.searchQuery$=this.select(c=>c.searchQuery),this.formName$=this.select(c=>c.formName),this.actionResult$=this.select(this.item$,this.done$,(c,u)=>({item:c,done:u}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.roles$,(c,u,n,r,m)=>({errors:c,loading:u,item:n,formName:r,roles:m}),{debounce:!0}),this.input$=this.select(this.paging$,this.searchQuery$,(c,u)=>({limit:c.limit,skip:c.skip,name:u,total:c.total})),this.setFormName=this.updater((c,u)=>Object.assign(Object.assign({},c),{formName:u})),this.setItem=this.updater((c,u)=>Object.assign(Object.assign({},c),{item:u})),this.addNewRole=this.updater((c,u)=>Object.assign(Object.assign({},c),{roles:[...c.roles,u]})),this.updateRole=this.updater((c,u)=>Object.assign(Object.assign({},c),{roles:c.roles.map(n=>n.id===u.id?u:n)})),this.addRoles=this.updater((c,u)=>Object.assign(Object.assign({},c),{roles:c.roles.concat(u)})),this.updateRoles=this.updater((c,u)=>Object.assign(Object.assign({},c),{roles:c.roles.map(n=>u.find(m=>m.id===n.id)||n)})),this.setSearchQuery=this.updater((c,u)=>Object.assign(Object.assign({},c),{searchQuery:u})),this.loadRoleEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.data.userRole({roleId:u}).pipe((0,b._b)(n=>{this.patchState({item:n.data.item,errors:n.errors,loading:!1})},n=>this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})))))),this.loadRolesEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.input$),(0,h.w)(([u,n])=>this.data.userRoles({input:n}).pipe((0,b._b)(r=>this.patchState({paging:{limit:n.limit,skip:n.skip,total:r.data.count.total},roles:r.data.items,errors:r.errors,loading:!1}),r=>this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})))))),this.createRoleEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.roleService.createRole(Object.assign({},u)).pipe((0,b._b)(n=>{this.addNewRole(n),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:n,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},n=>{n.graphQLErrors?(this.toast.error(n.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})):(this.toast.error(n.Message),this.formService.setErrors(n.Data))}))))),this.updateRoleEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([u,n])=>this.roleService.updateRole(u,u.id).pipe((0,b._b)(r=>{this.updateRole(r),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:r,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},r=>{r.graphQLErrors?(this.toast.error(r.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})):(this.toast.error(r.Message),this.formService.setErrors(r.Data))}))))),this.deleteRoleEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([u,n])=>this.data.userDeleteRole({roleId:n.id}).pipe((0,b._b)(r=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:r.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},r=>{r.graphQLErrors?(this.toast.error(r.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})):(this.toast.error(r.Message),this.formService.setErrors(r.Data))}))))),this.importExcelEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.roleService.importRoles(u).pipe((0,de.K)(n=>{var r;return this.toast.error(null!==(r=n.Message)&&void 0!==r?r:"Failed to save",{duration:3e3}),q.E}),(0,y.b)(n=>{const r=JSON.parse(n.created),m=JSON.parse(n.updated),p=JSON.parse(n.failed),v=r.length+m.length+p.length;this.addRoles(r),this.updateRoles(m),this.toast.success(`${r.length} created, ${m.length} updated, ${p.length} failed of total ${v}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("roleId")?(this.route.snapshot.paramMap.get("roleId"),this.setFormName("role_edit")):this.setFormName("role_create")}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.roleService.validateRoleExcelData(t)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(z.q),e.LFG(O.F0),e.LFG(O.gz),e.LFG(X.F),e.LFG(Z.o),e.LFG(aZ))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function rZ(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.close.emit())})("formIsReady",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.role)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let Xu=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"role_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.role=i.item})):t.formName&&t.formName.currentValue&&"role_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadRoleEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.role=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(_a),e.Y36(O.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-role-form"]],inputs:{role:"role",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,rZ,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[P.O5,te.M,P.Ov],encapsulation:2}),s})(),em=(()=>{class s{constructor(){this.autoHeight=!1,this.roles=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[,{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var a;t.includes(null===(a=i.data)||void 0===a?void 0:a.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-role-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(f.x,5),2&t){let a;e.iGM(a=e.CRH())&&(i.tableView=a.first)}},inputs:{autoHeight:"autoHeight",roles:"roles"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.roles)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[f.x],encapsulation:2}),s})();function nZ(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-role-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","role_edit")("formControl",t.formControl)("role",t.role)}}const lZ=function(){return{}};function cZ(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-role-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","role_create")("formControl",t.formControl)("role",e.DdM(3,lZ))}}function dZ(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-role-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(d.ref.close())}),e.qZA()}2&s&&e.Q6J("roles",o.data.items)}let uZ=(()=>{class s extends G.fS{constructor(t){super(),this.store=t,this.store.loadRolesEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.roles$.pipe((0,h.w)(i=>(0,D.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(_a))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","role","send","close"],[1,"w-full","h-full","bg-white",3,"roles","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,nZ,2,3,"ng-template",null,1,e.W1O),e.YNc(3,cZ,1,4,"ng-template",null,2,e.W1O),e.YNc(5,dZ,1,1,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",d)("editTemplate",a)("createTemplate",l)("key",i.field.key)}},dependencies:[E.JJ,E.oH,H.$,Xu,em],encapsulation:2}),s})();function mZ(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-role-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","role_edit")("role",t.value)}}const pZ=function(){return{}};function hZ(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-role-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","role_create")("role",e.DdM(2,pZ))}function fZ(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-role-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(null==d.ref?null:d.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("roles",t.items)}}let _Z=(()=>{class s extends pe{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","role","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","roles","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,mZ,1,2,"ng-template",null,1,e.W1O),e.YNc(3,hZ,1,3,"ng-template",null,2,e.W1O),e.YNc(5,fZ,1,2,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[he,Xu,em],encapsulation:2}),s})(),gZ=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[_a],imports:[P.ez,U.F,E.UX,J.o,ae.u,$.P,j.t,me,k.h,se.G,G.X0.forChild({types:[{name:"role-select",component:uZ,wrappers:["form-field"]},{name:"role-grid",component:_Z}]})]}),s})(),vZ=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[gZ]}),s})();class as extends W.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class CZ extends as{constructor(o){super("ValidateServiceExcelDataAction"),this.valid=!1,this.excelData=o}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name)}),this.validationContext.addRule(new g.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof g.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(a=>a.name),newNames:[i.newName]}):i instanceof g.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,D.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class SZ extends g.wS{constructor(o,t,i,a,l){super(o,t,i,a,l,!0)}}class bZ extends g.ul{constructor(o,t,i,a=!1){super(o,t,a),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new g.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new SZ("name","The service name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class TZ extends as{constructor(o){super("CreateServiceAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new bZ("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateService({input:this.input}).pipe((0,h.w)(o=>(0,ue.of)(o.data.created)))}}class yZ extends as{constructor(o){super("UpdateServicesAction"),this.services=o}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.services,!0))}performAction(){this.response=this.businessProvider.data.userUpdateServices({input:{services:this.services}}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}class wZ extends as{constructor(o,t){super("UpdateServiceAction"),this.service=o,this.serviceId=t}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.service,!0)).addRule(new g.xF("Id","Id should be a CUID and not null",this.serviceId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateService({serviceId:this.serviceId,input:this.service}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}let tm=(()=>{class s extends W.nH{constructor(t,i,a){super("NotificationService.ServiceBusinessProviderService",t,a),this.data=i}createService(t){const i=new TZ(t);return i.Do(this),i.response}updateService(t,i){const a=new wZ(t,i);return a.Do(this),a.response}importServices(t){const i=new yZ(t);return i.Do(this),i.response}validateServiceExcelData(t){const i=new CZ(t);return i.Do(this),i.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(K.ed),e.LFG(z.q),e.LFG(W.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),xZ=(()=>{class s extends W.nH{constructor(t,i,a){super("ServiceService",a,t),this.businessProvider=i}createService(t){const i=Object.fromEntries(Object.entries(t).filter(([a,l])=>null!==l));return this.businessProvider.createService(i)}updateService(t,i){return this.businessProvider.updateService(t,i)}importServices(t){return this.businessProvider.importServices(t)}validateServiceExcelData(t){return this.businessProvider.validateServiceExcelData(t)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(tm,8),e.LFG(tm),e.LFG(K.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),ga=(()=>{class s extends b.m1{constructor(t,i,a,l,d,ee){super({loading:!1,services:[],done:!1,searchQuery:"",formName:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=a,this.toast=l,this.formService=d,this.serviceService=ee,this.errors$=this.select(c=>c.errors),this.loading$=this.select(c=>c.loading),this.done$=this.select(c=>c.done),this.item$=this.select(c=>c.item),this.services$=this.select(c=>c.services),this.paging$=this.select(c=>c.paging),this.searchQuery$=this.select(c=>c.searchQuery),this.formName$=this.select(c=>c.formName),this.actionResult$=this.select(this.item$,this.done$,(c,u)=>({item:c,done:u}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.services$,(c,u,n,r,m)=>({errors:c,loading:u,item:n,formName:r,services:m}),{debounce:!0}),this.input$=this.select(this.paging$,this.searchQuery$,(c,u)=>({limit:c.limit,skip:c.skip,name:u,total:c.total})),this.setFormName=this.updater((c,u)=>Object.assign(Object.assign({},c),{formName:u})),this.setItem=this.updater((c,u)=>Object.assign(Object.assign({},c),{item:u})),this.addNewService=this.updater((c,u)=>Object.assign(Object.assign({},c),{services:[...c.services,u]})),this.updateService=this.updater((c,u)=>Object.assign(Object.assign({},c),{services:c.services.map(n=>n.id===u.id?u:n)})),this.addServices=this.updater((c,u)=>Object.assign(Object.assign({},c),{services:c.services.concat(u)})),this.updateServices=this.updater((c,u)=>Object.assign(Object.assign({},c),{services:c.services.map(n=>u.find(m=>m.id===n.id)||n)})),this.setSearchQuery=this.updater((c,u)=>Object.assign(Object.assign({},c),{searchQuery:u})),this.loadServiceEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.data.userService({serviceId:u}).pipe((0,b._b)(n=>{this.patchState({item:n.data.item,errors:n.errors,loading:!1})},n=>this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})))))),this.loadServicesEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.input$),(0,h.w)(([u,n])=>this.data.userServices({input:n}).pipe((0,b._b)(r=>this.patchState({paging:{limit:n.limit,skip:n.skip,total:r.data.count.total},services:r.data.items,errors:r.errors,loading:!1}),r=>this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})))))),this.createServiceEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.serviceService.createService(Object.assign({},u)).pipe((0,b._b)(n=>{this.addNewService(n),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:n,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},n=>{n.graphQLErrors?(this.toast.error(n.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})):(this.toast.error(n.Message),this.formService.setErrors(n.Data))}))))),this.updateServiceEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([u,n])=>this.serviceService.updateService(u,u.id).pipe((0,b._b)(r=>{this.updateService(r),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:r,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},r=>{r.graphQLErrors?(this.toast.error(r.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})):(this.toast.error(r.Message),this.formService.setErrors(r.Data))}))))),this.deleteServiceEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([u,n])=>this.data.userDeleteService({serviceId:n.id}).pipe((0,b._b)(r=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:r.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},r=>{r.graphQLErrors?(this.toast.error(r.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})):(this.toast.error(r.Message),this.formService.setErrors(r.Data))}))))),this.importExcelEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.serviceService.importServices(u).pipe((0,de.K)(n=>{var r;return this.toast.error(null!==(r=n.Message)&&void 0!==r?r:"Failed to save",{duration:3e3}),q.E}),(0,y.b)(n=>{const r=JSON.parse(n.created),m=JSON.parse(n.updated),p=JSON.parse(n.failed),v=r.length+m.length+p.length;this.addServices(r),this.updateServices(m),this.toast.success(`${r.length} created, ${m.length} updated, ${p.length} failed of total ${v}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("serviceId")?(this.route.snapshot.paramMap.get("serviceId"),this.setFormName("service_edit")):this.setFormName("service_create")}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.serviceService.validateServiceExcelData(t)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(z.q),e.LFG(O.F0),e.LFG(O.gz),e.LFG(X.F),e.LFG(Z.o),e.LFG(xZ))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function NZ(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.close.emit())})("formIsReady",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.service)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let im=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"service_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({id:null,name:""}),this.store.vm$.subscribe(i=>{this.service=i.item})):t.formName&&t.formName.currentValue&&"service_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadServiceEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.service=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(ga),e.Y36(O.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-service-form"]],inputs:{service:"service",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,NZ,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[P.O5,te.M,P.Ov],encapsulation:2}),s})(),sm=(()=>{class s{constructor(){this.autoHeight=!1,this.services=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[,{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var a;t.includes(null===(a=i.data)||void 0===a?void 0:a.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-service-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(f.x,5),2&t){let a;e.iGM(a=e.CRH())&&(i.tableView=a.first)}},inputs:{autoHeight:"autoHeight",services:"services"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.services)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[f.x],encapsulation:2}),s})();function AZ(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-service-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","service_edit")("formControl",t.formControl)("service",t.service)}}const FZ=function(){return{}};function PZ(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-service-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","service_create")("formControl",t.formControl)("service",e.DdM(3,FZ))}}function IZ(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-service-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(d.ref.close())}),e.qZA()}2&s&&e.Q6J("services",o.data.items)}let DZ=(()=>{class s extends G.fS{constructor(t){super(),this.store=t,this.store.loadServicesEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.services$.pipe((0,h.w)(i=>(0,D.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(ga))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","service","send","close"],[1,"w-full","h-full","bg-white",3,"services","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,AZ,2,3,"ng-template",null,1,e.W1O),e.YNc(3,PZ,1,4,"ng-template",null,2,e.W1O),e.YNc(5,IZ,1,1,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",d)("editTemplate",a)("createTemplate",l)("key",i.field.key)}},dependencies:[E.JJ,E.oH,H.$,im,sm],encapsulation:2}),s})();function MZ(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-service-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","service_edit")("service",t.value)}}const WZ=function(){return{}};function EZ(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-service-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","service_create")("service",e.DdM(2,WZ))}function OZ(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-service-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(null==d.ref?null:d.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("services",t.items)}}let LZ=(()=>{class s extends pe{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:6,consts:[[3,"data","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","service","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","services","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,MZ,1,2,"ng-template",null,1,e.W1O),e.YNc(3,EZ,1,3,"ng-template",null,2,e.W1O),e.YNc(5,OZ,1,2,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("data",i.data)("title",i.to.title)("onSave",i.onSave)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[he,im,sm],encapsulation:2}),s})(),$Z=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[ga],imports:[P.ez,U.F,E.UX,J.o,ae.u,$.P,j.t,me,k.h,se.G,G.X0.forChild({types:[{name:"service-select",component:DZ,wrappers:["form-field"]},{name:"service-grid",component:LZ}]})]}),s})(),GZ=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[$Z]}),s})();class rs extends W.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class RZ extends rs{constructor(o,t){super("ValidateSettingExcelDataAction"),this.valid=!1,this.excelData=o,this.users=t}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name),this.validationContext.addRule(new g.mi(`userName_${i}_is_valid}`,"User Is Not Valid","user.name",t.user,this.users,!0))}),this.validationContext.addRule(new g.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof g.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(a=>a.name),newNames:[i.newName]}):i instanceof g.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,D.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class QZ extends g.wS{constructor(o,t,i,a,l){super(o,t,i,a,l,!0)}}class VZ extends g.ul{constructor(o,t,i,a=!1){super(o,t,a),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new g.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new QZ("name","The setting name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class jZ extends rs{constructor(o){super("CreateSettingAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new VZ("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateSetting({input:this.input}).pipe((0,h.w)(o=>(0,ue.of)(o.data.created)))}}class UZ extends rs{constructor(o){super("UpdateSettingsAction"),this.settings=o}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.settings,!0))}performAction(){this.response=this.businessProvider.data.userUpdateSettings({input:{settings:this.settings}}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}class JZ extends rs{constructor(o,t){super("UpdateSettingAction"),this.setting=o,this.settingId=t}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.setting,!0)).addRule(new g.xF("Id","Id should be a CUID and not null",this.settingId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateSetting({settingId:this.settingId,input:this.setting}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}let om=(()=>{class s extends W.nH{constructor(t,i,a){super("NotificationService.SettingBusinessProviderService",t,a),this.data=i}createSetting(t){const i=new jZ(t);return i.Do(this),i.response}updateSetting(t,i){const a=new JZ(t,i);return a.Do(this),a.response}importSettings(t){const i=new UZ(t);return i.Do(this),i.response}validateSettingExcelData(t,i){const a=new RZ(t,i);return a.Do(this),a.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(K.ed),e.LFG(z.q),e.LFG(W.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),zZ=(()=>{class s extends W.nH{constructor(t,i,a){super("SettingService",a,t),this.businessProvider=i}createSetting(t){const i=Object.fromEntries(Object.entries(t).filter(([a,l])=>null!==l));return this.businessProvider.createSetting(i)}updateSetting(t,i){return this.businessProvider.updateSetting(t,i)}importSettings(t){return this.businessProvider.importSettings(t)}validateSettingExcelData(t,i){return this.businessProvider.validateSettingExcelData(t,i)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(om,8),e.LFG(om),e.LFG(K.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),va=(()=>{class s extends b.m1{constructor(t,i,a,l,d,ee){if(super({loading:!1,settings:[],done:!1,searchQuery:"",formName:void 0,userId:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=a,this.toast=l,this.formService=d,this.settingService=ee,this.errors$=this.select(u=>u.errors),this.loading$=this.select(u=>u.loading),this.done$=this.select(u=>u.done),this.item$=this.select(u=>u.item),this.settings$=this.select(u=>u.settings),this.users$=this.select(u=>u.users||[]),this.userId$=this.select(u=>u.userId),this.paging$=this.select(u=>u.paging),this.searchQuery$=this.select(u=>u.searchQuery),this.formName$=this.select(u=>u.formName),this.actionResult$=this.select(this.item$,this.done$,(u,n)=>({item:u,done:n}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.settings$,this.users$,(u,n,r,m,p,v)=>({errors:u,loading:n,item:r,formName:m,settings:p,users:v}),{debounce:!0}),this.input$=this.select(this.paging$,this.userId$,this.searchQuery$,(u,n,r)=>({limit:u.limit,skip:u.skip,name:r,userId:n,total:u.total})),this.setFormName=this.updater((u,n)=>Object.assign(Object.assign({},u),{formName:n})),this.setUserId=this.updater((u,n)=>Object.assign(Object.assign({},u),{userId:n})),this.filterUsers=u=>this.data.userSelectUsers({input:{name:u}}).pipe((0,b._b)(n=>{let r=n.data.items;return this.patchState({users:r}),r},n=>this.patchState({errors:n.graphQLErrors?n.graphQLErrors:n})),(0,fe.U)(n=>n.data.items)),this.addUser=this.updater((u,n)=>Object.assign(Object.assign({},u),{users:u.users.concat(n)})),this.setItem=this.updater((u,n)=>Object.assign(Object.assign({},u),{item:n})),this.addNewSetting=this.updater((u,n)=>Object.assign(Object.assign({},u),{settings:[...u.settings,n]})),this.updateSetting=this.updater((u,n)=>Object.assign(Object.assign({},u),{settings:u.settings.map(r=>r.id===n.id?n:r)})),this.addSettings=this.updater((u,n)=>Object.assign(Object.assign({},u),{settings:u.settings.concat(n)})),this.updateSettings=this.updater((u,n)=>Object.assign(Object.assign({},u),{settings:u.settings.map(r=>n.find(p=>p.id===r.id)||r)})),this.setSearchQuery=this.updater((u,n)=>Object.assign(Object.assign({},u),{searchQuery:n})),this.loadSettingEffect=this.effect(u=>u.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(n=>this.data.userSetting({settingId:n}).pipe((0,b._b)(r=>{this.patchState({item:r.data.item,errors:r.errors,loading:!1})},r=>this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})))))),this.loadSettingsEffect=this.effect(u=>u.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.input$),(0,h.w)(([n,r])=>this.data.userSettings({input:r}).pipe((0,b._b)(m=>this.patchState({paging:{limit:r.limit,skip:r.skip,total:m.data.count.total},settings:m.data.items,errors:m.errors,loading:!1}),m=>this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})))))),this.createSettingEffect=this.effect(u=>u.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(n=>this.settingService.createSetting(Object.assign({},n)).pipe((0,b._b)(r=>{this.addNewSetting(r),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:r,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},r=>{r.graphQLErrors?(this.toast.error(r.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})):(this.toast.error(r.Message),this.formService.setErrors(r.Data))}))))),this.updateSettingEffect=this.effect(u=>u.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([n,r])=>this.settingService.updateSetting(n,n.id).pipe((0,b._b)(m=>{this.updateSetting(m),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:m,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},m=>{m.graphQLErrors?(this.toast.error(m.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})):(this.toast.error(m.Message),this.formService.setErrors(m.Data))}))))),this.deleteSettingEffect=this.effect(u=>u.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([n,r])=>this.data.userDeleteSetting({settingId:r.id}).pipe((0,b._b)(m=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:m.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},m=>{m.graphQLErrors?(this.toast.error(m.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})):(this.toast.error(m.Message),this.formService.setErrors(m.Data))}))))),this.importExcelEffect=this.effect(u=>u.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(n=>this.settingService.importSettings(n).pipe((0,de.K)(r=>{var m;return this.toast.error(null!==(m=r.Message)&&void 0!==m?m:"Failed to save",{duration:3e3}),q.E}),(0,y.b)(r=>{const m=JSON.parse(r.created),p=JSON.parse(r.updated),v=JSON.parse(r.failed),I=m.length+p.length+v.length;this.addSettings(m),this.updateSettings(p),this.toast.success(`${m.length} created, ${p.length} updated, ${v.length} failed of total ${I}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("settingId")?(this.route.snapshot.paramMap.get("settingId"),this.setFormName("setting_edit")):this.setFormName("setting_create"),this.route.snapshot.paramMap.has("userId")){var c=this.route.snapshot.paramMap.get("userId");this.setUserId(c)}}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.settingService.validateSettingExcelData(t,i.users)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(z.q),e.LFG(O.F0),e.LFG(O.gz),e.LFG(X.F),e.LFG(Z.o),e.LFG(zZ))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function HZ(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.close.emit())})("formIsReady",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.setting)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let am=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"setting_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.setting=i.item})):t.formName&&t.formName.currentValue&&"setting_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadSettingEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.setting=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(va),e.Y36(O.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-setting-form"]],inputs:{setting:"setting",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,HZ,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[P.O5,te.M,P.Ov],encapsulation:2}),s})(),rm=(()=>{class s{constructor(){this.autoHeight=!1,this.settings=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[{field:"user.name",headerName:"User",filter:"agTextColumnFilter"},{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{field:"value",filter:"agTextColumnFilter"},{field:"dateFormat",filter:"agTextColumnFilter"},{field:"timeFormat",filter:"agTextColumnFilter"},{field:"startWeekOn",filter:"agTextColumnFilter"},{field:"userId",filter:"agTextColumnFilter",hide:!0}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var a;t.includes(null===(a=i.data)||void 0===a?void 0:a.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-setting-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(f.x,5),2&t){let a;e.iGM(a=e.CRH())&&(i.tableView=a.first)}},inputs:{autoHeight:"autoHeight",settings:"settings"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.settings)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[f.x],encapsulation:2}),s})();function qZ(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-setting-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","setting_edit")("formControl",t.formControl)("setting",t.setting)}}const KZ=function(){return{}};function ZZ(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-setting-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","setting_create")("formControl",t.formControl)("setting",e.DdM(3,KZ))}}function BZ(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-setting-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(d.ref.close())}),e.qZA()}2&s&&e.Q6J("settings",o.data.items)}let kZ=(()=>{class s extends G.fS{constructor(t){super(),this.store=t,this.store.loadSettingsEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.settings$.pipe((0,h.w)(i=>(0,D.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(va))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","setting","send","close"],[1,"w-full","h-full","bg-white",3,"settings","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,qZ,2,3,"ng-template",null,1,e.W1O),e.YNc(3,ZZ,1,4,"ng-template",null,2,e.W1O),e.YNc(5,BZ,1,1,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",d)("editTemplate",a)("createTemplate",l)("key",i.field.key)}},dependencies:[E.JJ,E.oH,H.$,am,rm],encapsulation:2}),s})();function YZ(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-setting-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","setting_edit")("setting",t.value)}}const XZ=function(){return{}};function eB(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-setting-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","setting_create")("setting",e.DdM(2,XZ))}function tB(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-setting-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(null==d.ref?null:d.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("settings",t.items)}}let iB=(()=>{class s extends pe{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","setting","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","settings","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,YZ,1,2,"ng-template",null,1,e.W1O),e.YNc(3,eB,1,3,"ng-template",null,2,e.W1O),e.YNc(5,tB,1,2,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[he,am,rm],encapsulation:2}),s})(),sB=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[va],imports:[P.ez,U.F,E.UX,J.o,ae.u,$.P,j.t,me,k.h,se.G,G.X0.forChild({types:[{name:"setting-select",component:kZ,wrappers:["form-field"]},{name:"setting-grid",component:iB}]})]}),s})(),oB=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[sB]}),s})();class ns extends W.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class aB extends ns{constructor(o){super("ValidateSeverityExcelDataAction"),this.valid=!1,this.excelData=o}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name)}),this.validationContext.addRule(new g.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof g.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(a=>a.name),newNames:[i.newName]}):i instanceof g.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,D.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class rB extends g.wS{constructor(o,t,i,a,l){super(o,t,i,a,l,!0)}}class nB extends g.ul{constructor(o,t,i,a=!1){super(o,t,a),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new g.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new rB("name","The severity name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class lB extends ns{constructor(o){super("CreateSeverityAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new nB("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateSeverity({input:this.input}).pipe((0,h.w)(o=>(0,ue.of)(o.data.created)))}}class cB extends ns{constructor(o){super("UpdateSeveritiesAction"),this.severities=o}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.severities,!0))}performAction(){this.response=this.businessProvider.data.userUpdateSeverities({input:{severities:this.severities}}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}class dB extends ns{constructor(o,t){super("UpdateSeverityAction"),this.severity=o,this.severityId=t}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.severity,!0)).addRule(new g.xF("Id","Id should be a CUID and not null",this.severityId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateSeverity({severityId:this.severityId,input:this.severity}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}let nm=(()=>{class s extends W.nH{constructor(t,i,a){super("NotificationService.SeverityBusinessProviderService",t,a),this.data=i}createSeverity(t){const i=new lB(t);return i.Do(this),i.response}updateSeverity(t,i){const a=new dB(t,i);return a.Do(this),a.response}importSeverities(t){const i=new cB(t);return i.Do(this),i.response}validateSeverityExcelData(t){const i=new aB(t);return i.Do(this),i.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(K.ed),e.LFG(z.q),e.LFG(W.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),uB=(()=>{class s extends W.nH{constructor(t,i,a){super("SeverityService",a,t),this.businessProvider=i}createSeverity(t){const i=Object.fromEntries(Object.entries(t).filter(([a,l])=>null!==l));return this.businessProvider.createSeverity(i)}updateSeverity(t,i){return this.businessProvider.updateSeverity(t,i)}importSeverities(t){return this.businessProvider.importSeverities(t)}validateSeverityExcelData(t){return this.businessProvider.validateSeverityExcelData(t)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(nm,8),e.LFG(nm),e.LFG(K.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),Ca=(()=>{class s extends b.m1{constructor(t,i,a,l,d,ee){super({loading:!1,severities:[],done:!1,searchQuery:"",formName:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=a,this.toast=l,this.formService=d,this.severityService=ee,this.errors$=this.select(c=>c.errors),this.loading$=this.select(c=>c.loading),this.done$=this.select(c=>c.done),this.item$=this.select(c=>c.item),this.severities$=this.select(c=>c.severities),this.paging$=this.select(c=>c.paging),this.searchQuery$=this.select(c=>c.searchQuery),this.formName$=this.select(c=>c.formName),this.actionResult$=this.select(this.item$,this.done$,(c,u)=>({item:c,done:u}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.severities$,(c,u,n,r,m)=>({errors:c,loading:u,item:n,formName:r,severities:m}),{debounce:!0}),this.input$=this.select(this.paging$,this.searchQuery$,(c,u)=>({limit:c.limit,skip:c.skip,name:u,total:c.total})),this.setFormName=this.updater((c,u)=>Object.assign(Object.assign({},c),{formName:u})),this.setItem=this.updater((c,u)=>Object.assign(Object.assign({},c),{item:u})),this.addNewSeverity=this.updater((c,u)=>Object.assign(Object.assign({},c),{severities:[...c.severities,u]})),this.updateSeverity=this.updater((c,u)=>Object.assign(Object.assign({},c),{severities:c.severities.map(n=>n.id===u.id?u:n)})),this.addSeverities=this.updater((c,u)=>Object.assign(Object.assign({},c),{severities:c.severities.concat(u)})),this.updateSeverities=this.updater((c,u)=>Object.assign(Object.assign({},c),{severities:c.severities.map(n=>u.find(m=>m.id===n.id)||n)})),this.setSearchQuery=this.updater((c,u)=>Object.assign(Object.assign({},c),{searchQuery:u})),this.loadSeverityEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.data.userSeverity({severityId:u}).pipe((0,b._b)(n=>{this.patchState({item:n.data.item,errors:n.errors,loading:!1})},n=>this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})))))),this.loadSeveritiesEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.input$),(0,h.w)(([u,n])=>this.data.userSeverities({input:n}).pipe((0,b._b)(r=>this.patchState({paging:{limit:n.limit,skip:n.skip,total:r.data.count.total},severities:r.data.items,errors:r.errors,loading:!1}),r=>this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})))))),this.createSeverityEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.severityService.createSeverity(Object.assign({},u)).pipe((0,b._b)(n=>{this.addNewSeverity(n),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:n,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},n=>{n.graphQLErrors?(this.toast.error(n.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})):(this.toast.error(n.Message),this.formService.setErrors(n.Data))}))))),this.updateSeverityEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([u,n])=>this.severityService.updateSeverity(u,u.id).pipe((0,b._b)(r=>{this.updateSeverity(r),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:r,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},r=>{r.graphQLErrors?(this.toast.error(r.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})):(this.toast.error(r.Message),this.formService.setErrors(r.Data))}))))),this.deleteSeverityEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([u,n])=>this.data.userDeleteSeverity({severityId:n.id}).pipe((0,b._b)(r=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:r.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},r=>{r.graphQLErrors?(this.toast.error(r.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})):(this.toast.error(r.Message),this.formService.setErrors(r.Data))}))))),this.importExcelEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.severityService.importSeverities(u).pipe((0,de.K)(n=>{var r;return this.toast.error(null!==(r=n.Message)&&void 0!==r?r:"Failed to save",{duration:3e3}),q.E}),(0,y.b)(n=>{const r=JSON.parse(n.created),m=JSON.parse(n.updated),p=JSON.parse(n.failed),v=r.length+m.length+p.length;this.addSeverities(r),this.updateSeverities(m),this.toast.success(`${r.length} created, ${m.length} updated, ${p.length} failed of total ${v}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("severityId")?(this.route.snapshot.paramMap.get("severityId"),this.setFormName("severity_edit")):this.setFormName("severity_create")}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.severityService.validateSeverityExcelData(t)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(z.q),e.LFG(O.F0),e.LFG(O.gz),e.LFG(X.F),e.LFG(Z.o),e.LFG(uB))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function mB(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.close.emit())})("formIsReady",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.severity)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let lm=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"severity_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({id:null,name:""}),this.store.vm$.subscribe(i=>{this.severity=i.item})):t.formName&&t.formName.currentValue&&"severity_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadSeverityEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.severity=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Ca),e.Y36(O.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-severity-form"]],inputs:{severity:"severity",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,mB,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[P.O5,te.M,P.Ov],encapsulation:2}),s})(),cm=(()=>{class s{constructor(){this.autoHeight=!1,this.severities=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[,{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var a;t.includes(null===(a=i.data)||void 0===a?void 0:a.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-severity-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(f.x,5),2&t){let a;e.iGM(a=e.CRH())&&(i.tableView=a.first)}},inputs:{autoHeight:"autoHeight",severities:"severities"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.severities)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[f.x],encapsulation:2}),s})();function pB(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-severity-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","severity_edit")("formControl",t.formControl)("severity",t.severity)}}const hB=function(){return{}};function fB(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-severity-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","severity_create")("formControl",t.formControl)("severity",e.DdM(3,hB))}}function _B(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-severity-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(d.ref.close())}),e.qZA()}2&s&&e.Q6J("severities",o.data.items)}let gB=(()=>{class s extends G.fS{constructor(t){super(),this.store=t,this.store.loadSeveritiesEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.severities$.pipe((0,h.w)(i=>(0,D.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Ca))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","severity","send","close"],[1,"w-full","h-full","bg-white",3,"severities","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,pB,2,3,"ng-template",null,1,e.W1O),e.YNc(3,fB,1,4,"ng-template",null,2,e.W1O),e.YNc(5,_B,1,1,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",d)("editTemplate",a)("createTemplate",l)("key",i.field.key)}},dependencies:[E.JJ,E.oH,H.$,lm,cm],encapsulation:2}),s})();function vB(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-severity-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","severity_edit")("severity",t.value)}}const CB=function(){return{}};function SB(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-severity-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","severity_create")("severity",e.DdM(2,CB))}function bB(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-severity-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(null==d.ref?null:d.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("severities",t.items)}}let TB=(()=>{class s extends pe{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:6,consts:[[3,"data","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","severity","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","severities","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,vB,1,2,"ng-template",null,1,e.W1O),e.YNc(3,SB,1,3,"ng-template",null,2,e.W1O),e.YNc(5,bB,1,2,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("data",i.data)("title",i.to.title)("onSave",i.onSave)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[he,lm,cm],encapsulation:2}),s})(),yB=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[Ca],imports:[P.ez,U.F,E.UX,J.o,ae.u,$.P,j.t,me,k.h,se.G,G.X0.forChild({types:[{name:"severity-select",component:gB,wrappers:["form-field"]},{name:"severity-grid",component:TB}]})]}),s})(),wB=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[yB]}),s})();var Sa=M(53783);function xB(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.close.emit())})("formIsReady",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.specialty)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let dm=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"specialty_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({id:null,name:""}),this.store.vm$.subscribe(i=>{this.specialty=i.item})):t.formName&&t.formName.currentValue&&"specialty_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadSpecialtyEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.specialty=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Sa.T),e.Y36(O.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-specialty-form"]],inputs:{specialty:"specialty",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,xB,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[P.O5,te.M,P.Ov],encapsulation:2}),s})(),um=(()=>{class s{constructor(){this.autoHeight=!1,this.specialties=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[,{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{headerName:"Active",field:"active",filter:"agSetColumnFilter",cellRenderer:"checkboxRenderer"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var a;t.includes(null===(a=i.data)||void 0===a?void 0:a.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-specialty-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(f.x,5),2&t){let a;e.iGM(a=e.CRH())&&(i.tableView=a.first)}},inputs:{autoHeight:"autoHeight",specialties:"specialties"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.specialties)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[f.x],encapsulation:2}),s})();function NB(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-specialty-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","specialty_edit")("formControl",t.formControl)("specialty",t.specialty)}}const AB=function(){return{}};function FB(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-specialty-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","specialty_create")("formControl",t.formControl)("specialty",e.DdM(3,AB))}}function PB(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-specialty-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(d.ref.close())}),e.qZA()}2&s&&e.Q6J("specialties",o.data.items)}let IB=(()=>{class s extends G.fS{constructor(t){super(),this.store=t,this.store.loadSpecialtiesEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.specialties$.pipe((0,h.w)(i=>(0,D.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Sa.T))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","specialty","send","close"],[1,"w-full","h-full","bg-white",3,"specialties","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,NB,2,3,"ng-template",null,1,e.W1O),e.YNc(3,FB,1,4,"ng-template",null,2,e.W1O),e.YNc(5,PB,1,1,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",d)("editTemplate",a)("createTemplate",l)("key",i.field.key)}},dependencies:[E.JJ,E.oH,H.$,dm,um],encapsulation:2}),s})();function DB(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-specialty-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","specialty_edit")("specialty",t.value)}}const MB=function(){return{}};function WB(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-specialty-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","specialty_create")("specialty",e.DdM(2,MB))}function EB(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-specialty-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(null==d.ref?null:d.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("specialties",t.items)}}let OB=(()=>{class s extends pe{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:6,consts:[[3,"data","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","specialty","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","specialties","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,DB,1,2,"ng-template",null,1,e.W1O),e.YNc(3,WB,1,3,"ng-template",null,2,e.W1O),e.YNc(5,EB,1,2,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("data",i.data)("title",i.to.title)("onSave",i.onSave)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[he,dm,um],encapsulation:2}),s})(),LB=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[Sa.T],imports:[P.ez,U.F,E.UX,J.o,ae.u,$.P,j.t,me,k.h,se.G,G.X0.forChild({types:[{name:"specialty-select",component:IB,wrappers:["form-field"]},{name:"specialty-grid",component:OB}]})]}),s})(),$B=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[LB]}),s})();class ls extends W.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class GB extends ls{constructor(o){super("ValidateSurgicalPositionExcelDataAction"),this.valid=!1,this.excelData=o}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name)}),this.validationContext.addRule(new g.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof g.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(a=>a.name),newNames:[i.newName]}):i instanceof g.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,D.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class RB extends g.wS{constructor(o,t,i,a,l){super(o,t,i,a,l,!0)}}class QB extends g.ul{constructor(o,t,i,a=!1){super(o,t,a),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new g.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new RB("name","The surgicalposition name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class VB extends ls{constructor(o){super("CreateSurgicalPositionAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new QB("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateSurgicalPosition({input:this.input}).pipe((0,h.w)(o=>(0,ue.of)(o.data.created)))}}class jB extends ls{constructor(o){super("UpdateSurgicalPositionsAction"),this.surgicalPositions=o}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.surgicalPositions,!0))}performAction(){this.response=this.businessProvider.data.userUpdateSurgicalPositions({input:{surgicalPositions:this.surgicalPositions}}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}class UB extends ls{constructor(o,t){super("UpdateSurgicalPositionAction"),this.surgicalPosition=o,this.surgicalPositionId=t}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.surgicalPosition,!0)).addRule(new g.xF("Id","Id should be a CUID and not null",this.surgicalPositionId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateSurgicalPosition({surgicalPositionId:this.surgicalPositionId,input:this.surgicalPosition}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}let mm=(()=>{class s extends W.nH{constructor(t,i,a){super("NotificationService.SurgicalPositionBusinessProviderService",t,a),this.data=i}createSurgicalPosition(t){const i=new VB(t);return i.Do(this),i.response}updateSurgicalPosition(t,i){const a=new UB(t,i);return a.Do(this),a.response}importSurgicalPositions(t){const i=new jB(t);return i.Do(this),i.response}validateSurgicalPositionExcelData(t){const i=new GB(t);return i.Do(this),i.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(K.ed),e.LFG(z.q),e.LFG(W.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),JB=(()=>{class s extends W.nH{constructor(t,i,a){super("SurgicalPositionService",a,t),this.businessProvider=i}createSurgicalPosition(t){const i=Object.fromEntries(Object.entries(t).filter(([a,l])=>null!==l));return this.businessProvider.createSurgicalPosition(i)}updateSurgicalPosition(t,i){return this.businessProvider.updateSurgicalPosition(t,i)}importSurgicalPositions(t){return this.businessProvider.importSurgicalPositions(t)}validateSurgicalPositionExcelData(t){return this.businessProvider.validateSurgicalPositionExcelData(t)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(mm,8),e.LFG(mm),e.LFG(K.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),ba=(()=>{class s extends b.m1{constructor(t,i,a,l,d,ee){super({loading:!1,surgicalPositions:[],done:!1,searchQuery:"",formName:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=a,this.toast=l,this.formService=d,this.surgicalPositionService=ee,this.errors$=this.select(c=>c.errors),this.loading$=this.select(c=>c.loading),this.done$=this.select(c=>c.done),this.item$=this.select(c=>c.item),this.surgicalPositions$=this.select(c=>c.surgicalPositions),this.paging$=this.select(c=>c.paging),this.searchQuery$=this.select(c=>c.searchQuery),this.formName$=this.select(c=>c.formName),this.actionResult$=this.select(this.item$,this.done$,(c,u)=>({item:c,done:u}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.surgicalPositions$,(c,u,n,r,m)=>({errors:c,loading:u,item:n,formName:r,surgicalPositions:m}),{debounce:!0}),this.input$=this.select(this.paging$,this.searchQuery$,(c,u)=>({limit:c.limit,skip:c.skip,name:u,total:c.total})),this.setFormName=this.updater((c,u)=>Object.assign(Object.assign({},c),{formName:u})),this.setItem=this.updater((c,u)=>Object.assign(Object.assign({},c),{item:u})),this.addNewSurgicalPosition=this.updater((c,u)=>Object.assign(Object.assign({},c),{surgicalPositions:[...c.surgicalPositions,u]})),this.updateSurgicalPosition=this.updater((c,u)=>Object.assign(Object.assign({},c),{surgicalPositions:c.surgicalPositions.map(n=>n.id===u.id?u:n)})),this.addSurgicalPositions=this.updater((c,u)=>Object.assign(Object.assign({},c),{surgicalPositions:c.surgicalPositions.concat(u)})),this.updateSurgicalPositions=this.updater((c,u)=>Object.assign(Object.assign({},c),{surgicalPositions:c.surgicalPositions.map(n=>u.find(m=>m.id===n.id)||n)})),this.setSearchQuery=this.updater((c,u)=>Object.assign(Object.assign({},c),{searchQuery:u})),this.loadSurgicalPositionEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.data.userSurgicalPosition({surgicalPositionId:u}).pipe((0,b._b)(n=>{this.patchState({item:n.data.item,errors:n.errors,loading:!1})},n=>this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})))))),this.loadSurgicalPositionsEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.input$),(0,h.w)(([u,n])=>this.data.userSurgicalPositions({input:n}).pipe((0,b._b)(r=>this.patchState({paging:{limit:n.limit,skip:n.skip,total:r.data.count.total},surgicalPositions:r.data.items,errors:r.errors,loading:!1}),r=>this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})))))),this.createSurgicalPositionEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.surgicalPositionService.createSurgicalPosition(Object.assign({},u)).pipe((0,b._b)(n=>{this.addNewSurgicalPosition(n),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:n,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},n=>{n.graphQLErrors?(this.toast.error(n.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})):(this.toast.error(n.Message),this.formService.setErrors(n.Data))}))))),this.updateSurgicalPositionEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([u,n])=>this.surgicalPositionService.updateSurgicalPosition(u,u.id).pipe((0,b._b)(r=>{this.updateSurgicalPosition(r),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:r,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},r=>{r.graphQLErrors?(this.toast.error(r.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})):(this.toast.error(r.Message),this.formService.setErrors(r.Data))}))))),this.deleteSurgicalPositionEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([u,n])=>this.data.userDeleteSurgicalPosition({surgicalPositionId:n.id}).pipe((0,b._b)(r=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:r.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},r=>{r.graphQLErrors?(this.toast.error(r.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})):(this.toast.error(r.Message),this.formService.setErrors(r.Data))}))))),this.importExcelEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.surgicalPositionService.importSurgicalPositions(u).pipe((0,de.K)(n=>{var r;return this.toast.error(null!==(r=n.Message)&&void 0!==r?r:"Failed to save",{duration:3e3}),q.E}),(0,y.b)(n=>{const r=JSON.parse(n.created),m=JSON.parse(n.updated),p=JSON.parse(n.failed),v=r.length+m.length+p.length;this.addSurgicalPositions(r),this.updateSurgicalPositions(m),this.toast.success(`${r.length} created, ${m.length} updated, ${p.length} failed of total ${v}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("surgicalPositionId")?(this.route.snapshot.paramMap.get("surgicalPositionId"),this.setFormName("surgicalPosition_edit")):this.setFormName("surgicalPosition_create")}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.surgicalPositionService.validateSurgicalPositionExcelData(t)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(z.q),e.LFG(O.F0),e.LFG(O.gz),e.LFG(X.F),e.LFG(Z.o),e.LFG(JB))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function zB(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.close.emit())})("formIsReady",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.surgicalPosition)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let pm=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"surgicalPosition_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.surgicalPosition=i.item})):t.formName&&t.formName.currentValue&&"surgicalPosition_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadSurgicalPositionEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.surgicalPosition=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(ba),e.Y36(O.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-surgical-position-form"]],inputs:{surgicalPosition:"surgicalPosition",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,zB,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[P.O5,te.M,P.Ov],encapsulation:2}),s})(),hm=(()=>{class s{constructor(){this.autoHeight=!1,this.surgicalPositions=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[,{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var a;t.includes(null===(a=i.data)||void 0===a?void 0:a.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-surgical-position-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(f.x,5),2&t){let a;e.iGM(a=e.CRH())&&(i.tableView=a.first)}},inputs:{autoHeight:"autoHeight",surgicalPositions:"surgicalPositions"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.surgicalPositions)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[f.x],encapsulation:2}),s})();function HB(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-surgical-position-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","surgicalPosition_edit")("formControl",t.formControl)("surgicalPosition",t.surgicalPosition)}}const qB=function(){return{}};function KB(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-surgical-position-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","surgicalPosition_create")("formControl",t.formControl)("surgicalPosition",e.DdM(3,qB))}}function ZB(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-surgical-position-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(d.ref.close())}),e.qZA()}2&s&&e.Q6J("surgicalPositions",o.data.items)}let BB=(()=>{class s extends G.fS{constructor(t){super(),this.store=t,this.store.loadSurgicalPositionsEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.surgicalPositions$.pipe((0,h.w)(i=>(0,D.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(ba))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","surgicalPosition","send","close"],[1,"w-full","h-full","bg-white",3,"surgicalPositions","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,HB,2,3,"ng-template",null,1,e.W1O),e.YNc(3,KB,1,4,"ng-template",null,2,e.W1O),e.YNc(5,ZB,1,1,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",d)("editTemplate",a)("createTemplate",l)("key",i.field.key)}},dependencies:[E.JJ,E.oH,H.$,pm,hm],encapsulation:2}),s})();function kB(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-surgical-position-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","surgicalPosition_edit")("surgicalPosition",t.value)}}const YB=function(){return{}};function XB(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-surgical-position-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","surgicalPosition_create")("surgicalPosition",e.DdM(2,YB))}function ek(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-surgical-position-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(null==d.ref?null:d.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("surgicalPositions",t.items)}}let tk=(()=>{class s extends pe{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","surgicalPosition","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","surgicalPositions","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,kB,1,2,"ng-template",null,1,e.W1O),e.YNc(3,XB,1,3,"ng-template",null,2,e.W1O),e.YNc(5,ek,1,2,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[he,pm,hm],encapsulation:2}),s})(),ik=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[ba],imports:[P.ez,U.F,E.UX,J.o,ae.u,$.P,j.t,me,k.h,se.G,G.X0.forChild({types:[{name:"surgical-position-select",component:BB,wrappers:["form-field"]},{name:"surgical-position-grid",component:tk}]})]}),s})(),sk=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[ik]}),s})();var cs=M(45101);function ok(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.close.emit())})("formIsReady",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.tag)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let fm=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"tag_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({id:null,name:""}),this.store.vm$.subscribe(i=>{this.tag=i.item})):t.formName&&t.formName.currentValue&&"tag_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadTagEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.tag=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(cs.J),e.Y36(O.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-tag-form"]],inputs:{tag:"tag",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,ok,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[P.O5,te.M,P.Ov],encapsulation:2}),s})(),_m=(()=>{class s{constructor(){this.autoHeight=!1,this.tags=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[,{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var a;t.includes(null===(a=i.data)||void 0===a?void 0:a.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-tag-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(f.x,5),2&t){let a;e.iGM(a=e.CRH())&&(i.tableView=a.first)}},inputs:{autoHeight:"autoHeight",tags:"tags"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","data","showSidebar","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("data",i.tags)("showSidebar",!1)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[f.x],encapsulation:2}),s})();function ak(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-tag-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","tag_edit")("formControl",t.formControl)("tag",t.tag)}}const rk=function(){return{}};function nk(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-tag-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","tag_create")("formControl",t.formControl)("tag",e.DdM(3,rk))}}function lk(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-tag-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(d.ref.close())}),e.qZA()}2&s&&e.Q6J("tags",o.data.items)}let ck=(()=>{class s extends G.fS{constructor(t){super(),this.store=t,this.store.loadTagsEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.tags$.pipe((0,h.w)(i=>(0,D.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(cs.J))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e._Bn([cs.J]),e.qOj],decls:7,vars:5,consts:[[3,"to","control","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","tag","send","close"],[1,"w-full","h-full","bg-white",3,"tags","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"ui-select-form",0),e.YNc(1,ak,2,3,"ng-template",null,1,e.W1O),e.YNc(3,nk,1,4,"ng-template",null,2,e.W1O),e.YNc(5,lk,1,1,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[E.JJ,E.oH,H.$,fm,_m],encapsulation:2}),s})();function dk(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-tag-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","tag_edit")("tag",t.value)}}const uk=function(){return{}};function mk(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-tag-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","tag_create")("tag",e.DdM(2,uk))}function pk(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-tag-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(null==d.ref?null:d.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("tags",t.items)}}let hk=(()=>{class s extends pe{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:6,consts:[[3,"data","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","tag","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","tags","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,dk,1,2,"ng-template",null,1,e.W1O),e.YNc(3,mk,1,3,"ng-template",null,2,e.W1O),e.YNc(5,pk,1,2,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("data",i.data)("title",i.to.title)("onSave",i.onSave)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[he,fm,_m],encapsulation:2}),s})(),fk=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[cs.J],imports:[P.ez,U.F,E.UX,J.o,ae.u,$.P,j.t,me,k.h,se.G,G.X0.forChild({types:[{name:"tag-select",component:ck,wrappers:["form-field"]},{name:"tag-grid",component:hk}]})]}),s})(),_k=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[fk]}),s})(),gk=(()=>{class s extends b.m1{constructor(t){super({loading:!1,templates:[]}),this.data=t,this.errors$=this.select(i=>i.errors),this.loading$=this.select(i=>i.loading),this.templates$=this.select(i=>i.templates),this.vm$=this.select(this.errors$,this.loading$,this.templates$,(i,a,l)=>({errors:i,loading:a,templates:l}),{debounce:!0}),this.addNewTemplate=this.updater((i,a)=>({templates:[...i.templates,a]})),this.updateTemplate=this.updater((i,a)=>Object.assign(Object.assign({},i),{templates:i.templates.map(l=>l.id===a.id?a:l)})),this.createTemplateEffect=this.effect(i=>i.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(a=>this.data.userCreateTemplate({input:a.input}).pipe((0,b._b)(l=>{this.addNewTemplate(l.data.created),this.patchState({errors:l.errors,loading:!1}),a.resultEmitter.emit(l.data.created)},l=>this.patchState({loading:!1,errors:l.graphQLErrors?l.graphQLErrors:l})))))),this.updateTemplateEffect=this.effect(i=>i.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(a=>this.data.userUpdateTemplate({templateId:a.input.id,input:a.input}).pipe((0,b._b)(l=>{this.updateTemplate(l.data.updated),this.patchState({errors:l.errors,loading:!1}),a.resultEmitter.emit(l.data.updated)},l=>this.patchState({loading:!1,errors:l.graphQLErrors?l.graphQLErrors:l})))))),this.loadTemplatesEffect=this.effect(i=>i.pipe((0,y.b)(()=>{this.patchState({loading:!0})}),(0,h.w)(()=>this.data.userTemplates({input:{}}).pipe((0,b._b)(a=>{this.patchState({loading:!1,templates:a.data.items})},a=>{this.patchState({loading:!1})})))))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(z.q))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();class Ta extends W.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class vk extends g.wS{constructor(o,t,i,a,l){super(o,t,i,a,l,!0)}}class Ck extends g.ul{constructor(o,t,i,a=!1){super(o,t,a),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new g.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new vk("name","The teamuser name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class Sk extends Ta{constructor(o){super("CreateTemplateAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new Ck("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateTemplate({input:this.input}).pipe((0,h.w)(o=>(0,ue.of)(o.data.created)))}}class bk extends Ta{constructor(o){super("UpdateTemplatesAction"),this.teamUsers=o}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.teamUsers,!0))}performAction(){}}class Tk extends Ta{constructor(o,t){super("UpdateTemplateAction"),this.teamUser=o,this.teamUserId=t}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.teamUser,!0)).addRule(new g.xF("Id","Id should be a CUID and not null",this.teamUserId,!0))}performAction(){}}let gm=(()=>{class s extends W.nH{constructor(t,i,a){super("NotificationService.TemplateBusinessProviderService",t,a),this.data=i}createTemplate(t){const i=new Sk(t);return i.Do(this),i.response}updateTemplate(t,i){const a=new Tk(t,i);return a.Do(this),a.response}importTemplates(t){const i=new bk(t);return i.Do(this),i.response}validateTemplateExcelData(t,i,a,l){}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(K.ed),e.LFG(z.q),e.LFG(W.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),yk=(()=>{class s extends W.nH{constructor(t,i,a){super("templateService",a,t),this.businessProvider=i}createTemplate(t){const i=Object.fromEntries(Object.entries(t).filter(([a,l])=>null!==l));return this.businessProvider.createTemplate(i)}updateTemplate(t,i){return this.businessProvider.updateTemplate(t,i)}importTemplates(t){return this.businessProvider.importTemplates(t)}validateTemplateExcelData(t){}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(gm,8),e.LFG(gm),e.LFG(K.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),ya=(()=>{class s extends b.m1{constructor(t,i,a,l,d,ee){super({loading:!1,templates:[],done:!1,searchQuery:"",formName:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=a,this.toast=l,this.formService=d,this.templateService=ee,this.errors$=this.select(c=>c.errors),this.loading$=this.select(c=>c.loading),this.done$=this.select(c=>c.done),this.item$=this.select(c=>c.item),this.templates$=this.select(c=>c.templates),this.paging$=this.select(c=>c.paging),this.searchQuery$=this.select(c=>c.searchQuery),this.formName$=this.select(c=>c.formName),this.actionResult$=this.select(this.item$,this.done$,(c,u)=>({item:c,done:u}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.templates$,(c,u,n,r,m)=>({errors:c,loading:u,item:n,formName:r,templates:m}),{debounce:!0}),this.input$=this.select(this.paging$,this.searchQuery$,(c,u)=>({limit:c.limit,skip:c.skip,name:u,total:c.total})),this.setFormName=this.updater((c,u)=>Object.assign(Object.assign({},c),{formName:u})),this.setItem=this.updater((c,u)=>Object.assign(Object.assign({},c),{item:u})),this.addNewTemplate=this.updater((c,u)=>(console.log(c.templates),Object.assign(Object.assign({},c),{templates:[...c.templates,u]}))),this.updateTemplate=this.updater((c,u)=>Object.assign(Object.assign({},c),{templates:c.templates.map(n=>n.id===u.id?u:n)})),this.addTemplates=this.updater((c,u)=>Object.assign(Object.assign({},c),{templates:c.templates.concat(u)})),this.updateTemplates=this.updater((c,u)=>Object.assign(Object.assign({},c),{templates:c.templates.map(n=>u.find(m=>m.id===n.id)||n)})),this.setSearchQuery=this.updater((c,u)=>Object.assign(Object.assign({},c),{searchQuery:u})),this.loadTemplateEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.data.userTemplate({templateId:u}).pipe((0,b._b)(n=>{this.patchState({item:n.data.item,errors:n.errors,loading:!1})},n=>this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})))))),this.loadTemplatesEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.input$),(0,h.w)(([u,n])=>this.data.userTemplates({input:n}).pipe((0,b._b)(r=>this.patchState({paging:{limit:n.limit,skip:n.skip,total:r.data.count.total},templates:r.data.items,errors:r.errors,loading:!1}),r=>this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})))))),this.createTemplateEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.templateService.createTemplate(Object.assign({},u)).pipe((0,b._b)(n=>{this.addNewTemplate(n),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:n,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},n=>{n.graphQLErrors?(this.toast.error(n.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})):(this.toast.error(n.Message),this.formService.setErrors(n.Data))}))))),this.updateTemplateEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([u,n])=>this.templateService.updateTemplate(u,u.id).pipe((0,b._b)(r=>{this.updateTemplate(r),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:r,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},r=>{r.graphQLErrors?(this.toast.error(r.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})):(this.toast.error(r.Message),this.formService.setErrors(r.Data))}))))),this.deleteTemplateEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([u,n])=>this.data.userDeleteTemplate({templateId:n.id}).pipe((0,b._b)(r=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:r.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},r=>{r.graphQLErrors?(this.toast.error(r.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})):(this.toast.error(r.Message),this.formService.setErrors(r.Data))}))))),this.route.snapshot.paramMap.has("templateId")?(this.route.snapshot.paramMap.get("templateId"),this.setFormName("template_edit")):this.setFormName("template_create")}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(z.q),e.LFG(O.F0),e.LFG(O.gz),e.LFG(X.F),e.LFG(Z.o),e.LFG(yk))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})(),wk=(()=>{class s{constructor(){this.templates=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.autoHeight=!1,this.columnDefs=[{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{field:"attachment",filter:"agTextColumnFilter"},{field:"encoding",filter:"agTextColumnFilter"},{field:"signatureFileType",filter:"agTextColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var a;t.includes(null===(a=i.data)||void 0===a?void 0:a.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-template-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(f.x,5),2&t){let a;e.iGM(a=e.CRH())&&(i.tableView=a.first)}},inputs:{templates:"templates",autoHeight:"autoHeight"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.templates)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[f.x],encapsulation:2}),s})(),xk=(()=>{class s extends b.m1{constructor(t){super({loading:!1}),this.data=t,this.errors$=this.select(i=>i.errors),this.loading$=this.select(i=>i.loading),this.item$=this.select(i=>i.item),this.vm$=this.select(this.errors$,this.loading$,this.item$,(i,a,l)=>({errors:i,loading:a,item:l}),{debounce:!0}),this.createTemplateEffect=this.effect(i=>i.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(a=>this.data.userCreateTemplate({input:a}).pipe((0,b._b)(l=>{this.patchState({item:l.data.created,errors:l.errors,loading:!1})},l=>this.patchState({loading:!1,errors:l.graphQLErrors?l.graphQLErrors:l}))))))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(z.q))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function Nk(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.close.emit())})("formIsReady",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.template)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let Ak=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"template_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.template=i.item})):t.formName&&t.formName.currentValue&&"template_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadTemplateEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.template=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(ya),e.Y36(O.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-template-form"]],inputs:{template:"template",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e._Bn([xk]),e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,Nk,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[P.O5,te.M,P.Ov],encapsulation:2}),s})();function Fk(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-template-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","template_edit")("formControl",t.formControl)("template",t.template)}}const Pk=function(){return{}};function Ik(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-template-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","template_create")("formControl",t.formControl)("template",e.DdM(3,Pk))}}function Dk(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-template-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(d.ref.close())}),e.qZA()}2&s&&e.Q6J("templates",o.data.items)}let Mk=(()=>{class s extends G.fS{constructor(t){super(),this.store=t,this.store.loadTemplatesEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.templates$.pipe((0,h.w)(i=>(0,D.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(ya))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","template","send","close"],[1,"w-full","h-full","bg-white",3,"templates","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,Fk,2,3,"ng-template",null,1,e.W1O),e.YNc(3,Ik,1,4,"ng-template",null,2,e.W1O),e.YNc(5,Dk,1,1,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",d)("editTemplate",a)("createTemplate",l)("key",i.field.key)}},dependencies:[E.JJ,E.oH,H.$,wk,Ak],encapsulation:2}),s})(),Wk=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[gk,ya],imports:[P.ez,U.F,E.UX,J.o,ae.u,$.P,j.t,k.h,se.G,G.X0.forChild({types:[{name:"template-select",component:Mk,wrappers:["form-field"]}]})]}),s})(),Ek=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[Wk]}),s})();class ds extends W.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class Ok extends g.wS{constructor(o,t,i,a,l){super(o,t,i,a,l,!0)}}class Lk extends g.ul{constructor(o,t,i,a=!1){super(o,t,a),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new g.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new Ok("name","The user name is not valid. Must be within 2 and 255 characters.",this.target.firstName,2,255))}}class $k extends ds{constructor(o){super("CreateUserAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new Lk("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateUser({input:this.input}).pipe((0,de.K)(()=>(this.response=this.createFailResponse(),q.E)),(0,h.w)(o=>(0,ue.of)(o.data.created)))}}class Gk extends ds{constructor(o){super("UpdateUsersAction"),this.users=o}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.users,!0))}performAction(){this.response=this.businessProvider.data.userUpdateUsers({input:{users:this.users}}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}class Rk extends ds{constructor(o,t){super("UpdateUserAction"),this.user=o,this.userId=t}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.user,!0)).addRule(new g.xF("Id","Id should be a CUID and not null",this.userId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateUser({userId:this.userId,input:this.user}).pipe((0,h.w)(()=>(0,D.of)(!0)))}}class Qk extends ds{constructor(o){super("ValidateUserExcelDataAction"),this.valid=!1,this.excelData=o}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name)}),this.validationContext.addRule(new g.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof g.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(a=>a.name),newNames:[i.newName]}):i instanceof g.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,D.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}let vm=(()=>{class s extends W.nH{constructor(t,i,a){super("NotificationService.UserBusinessProviderService",t,a),this.data=i}createUser(t){const i=new $k(t);return i.Do(this),i.response}updateUser(t,i){const a=new Rk(t,i);return a.Do(this),a.response}importUsers(t){const i=new Gk(t);return i.Do(this),i.response}validateUserExcelData(t){const i=new Qk(t);return i.Do(this),i.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(K.ed),e.LFG(z.q),e.LFG(W.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),Vk=(()=>{class s extends W.nH{constructor(t,i,a){super("UserService",a,t),this.businessProvider=i}createUser(t){return this.businessProvider.createUser(t)}updateUser(t,i){return this.businessProvider.updateUser(t,i)}importUsers(t){return this.businessProvider.importUsers(t)}validateUserExcelData(t){return this.businessProvider.validateUserExcelData(t)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(vm,8),e.LFG(vm),e.LFG(K.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),wa=(()=>{class s extends b.m1{constructor(t,i,a,l,d,ee){super({loading:!1,users:[],done:!1}),this.data=t,this.router=i,this.route=a,this.toast=l,this.formService=d,this.userService=ee,this.errors$=this.select(V=>V.errors),this.loading$=this.select(V=>V.loading),this.done$=this.select(V=>V.done),this.item$=this.select(V=>V.item),this.users$=this.select(V=>V.users),this.actionResult$=this.select(this.item$,this.done$,(V,c)=>({item:V,done:c}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,(V,c,u)=>({errors:V,loading:c,item:u}),{debounce:!0}),this.initialize=this.updater(V=>Object.assign(Object.assign({},V),{item:null,done:!1})),this.addNewUser=this.updater((V,c)=>Object.assign(Object.assign({},V),{users:[...V.users,c]})),this.updateUser=this.updater((V,c)=>Object.assign(Object.assign({},V),{users:V.users.map(u=>u.id===c.id?c:u)})),this.loadUserEffect=this.effect(V=>V.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(c=>this.data.userUser({userId:c}).pipe((0,b._b)(u=>{this.patchState({item:u.data.item,errors:u.errors,loading:!1})},u=>this.patchState({loading:!1,errors:u.graphQLErrors?u.graphQLErrors:u})))))),this.loadUsersEffect=this.effect(V=>V.pipe((0,y.b)(()=>{this.patchState({loading:!0})}),(0,h.w)(()=>this.data.userUsers({input:{}}).pipe((0,b._b)(c=>{this.patchState({loading:!1,users:c.data.items})},c=>{this.patchState({loading:!1})}))))),this.updateUserEffect=this.effect(V=>V.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([c,u])=>this.userService.updateUser(c,c.id).pipe((0,b._b)(n=>{this.updateUser(n),this.toast.success("Changed Successfully"),this.patchState({done:!0,item:n})},n=>{this.toast.error(n.Message),this.formService.setErrors(n.Data),this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})}))))),this.createUserEffect=this.effect(V=>V.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(c=>this.userService.createUser(Object.assign({},c)).pipe((0,b._b)(u=>(this.patchState({item:u,loading:!1}),this.router.navigate(["..",u?.id],{relativeTo:this.route})),u=>{this.toast.error(u.Message),this.formService.setErrors(u.Data),this.patchState({loading:!1,errors:u.graphQLErrors?u.graphQLErrors:u})})))))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(z.q),e.LFG(O.F0),e.LFG(O.gz),e.LFG(X.F),e.LFG(Z.o),e.LFG(Vk))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();const jk=function(){return{}};let Uk=(()=>{class s{constructor(t){this.store=t,this.user={},this.send=new e.vpe,this.close=new e.vpe,this._unsubscribeAll=new Ie.x,this.store.initialize()}ngOnInit(){this.store.actionResult$.pipe((0,Ae.R)(this._unsubscribeAll)).subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(wa))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-user-form"]],inputs:{user:"user"},outputs:{send:"send",close:"close"},decls:3,vars:5,consts:[[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"formName","showSubmitButton","model","componentStore","discard"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"ui-formly-json-form",2),e.NdJ("discard",function(){return i.close.emit()}),e.qZA()()()),2&t&&(e.xp6(2),e.Q6J("formName",i.user.id?"user_edit":"user_create")("showSubmitButton",!0)("model",i.user||e.DdM(4,jk))("componentStore",i.store))},dependencies:[te.M],encapsulation:2}),s})(),Jk=(()=>{class s{constructor(){this.users=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[,{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{headerName:"Developer",field:"developer",filter:"agSetColumnFilter",cellRenderer:"checkboxRenderer"},{field:"username",filter:"agTextColumnFilter"},{field:"password",filter:"agTextColumnFilter"},{field:"firstName",filter:"agTextColumnFilter"},{field:"lastName",filter:"agTextColumnFilter"},{field:"avatarUrl",filter:"agTextColumnFilter"},{field:"line1",filter:"agTextColumnFilter"},{field:"line2",filter:"agTextColumnFilter"},{field:"city",filter:"agTextColumnFilter"},{field:"state",filter:"agTextColumnFilter"},{field:"postalCode",filter:"agTextColumnFilter"},{field:"phone",filter:"agTextColumnFilter"},{field:"bio",filter:"agTextColumnFilter"},{field:"slug",filter:"agTextColumnFilter"},{field:"status",filter:"agTextColumnFilter"},{headerName:"Signup Status",field:"signupStatus",valueFormatter:t=>{var i;return(0,_.oBD)(null===(i=t.data)||void 0===i?void 0:i.signupStatus,"",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{headerName:"Verified",field:"verified",filter:"agSetColumnFilter",cellRenderer:"checkboxRenderer"},{field:"customerId",filter:"agTextColumnFilter",hide:!0},{field:"planId",filter:"agTextColumnFilter",hide:!0},{field:"dateOfBirth",filter:"agDateColumnFilter"},{field:"cellPhone",filter:"agTextColumnFilter"},{field:"education",filter:"agTextColumnFilter"},{field:"officeName",filter:"agTextColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var a;t.includes(null===(a=i.data)||void 0===a?void 0:a.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-user-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(f.x,5),2&t){let a;e.iGM(a=e.CRH())&&(i.tableView=a.first)}},inputs:{users:"users"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:3,consts:[[1,"w-full","h-full",3,"data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("data",i.users)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[f.x],encapsulation:2}),s})();const zk=function(){return{}};function Hk(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-user-form",3),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("user",o.data.value||e.DdM(1,zk))}function qk(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-user-select-table-view",4),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(d.ref.close())}),e.qZA()}2&s&&e.Q6J("users",o.data.items)}let Kk=(()=>{class s extends G.fS{constructor(t){super(),this.store=t,this.store.loadUsersEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.users$.pipe((0,h.w)(i=>(0,D.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(wa))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:5,vars:4,consts:[[3,"to","control","listTemplate","editTemplate"],["editTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"user","send","close"],[1,"w-full","h-full","bg-white",3,"users","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"ui-select-form",0),e.YNc(1,Hk,1,2,"ng-template",null,1,e.W1O),e.YNc(3,qk,1,1,"ng-template",null,2,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4);e.Q6J("to",i.to)("control",i.formControl)("listTemplate",l)("editTemplate",a)}},dependencies:[H.$,Uk,Jk],encapsulation:2}),s})(),Zk=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[wa],imports:[P.ez,U.F,E.UX,J.o,ae.u,$.P,j.t,k.h,se.G,G.X0.forChild({types:[{name:"user-select",component:Kk,wrappers:["form-field"]}]})]}),s})(),Bk=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[Zk]}),s})();class us extends W.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class kk extends us{constructor(o,t,i){super("ValidateUserRoleExcelDataAction"),this.valid=!1,this.excelData=o,this.roles=t,this.users=i}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name),this.validationContext.addRule(new g.mi(`roleName_${i}_is_valid}`,"Role Is Not Valid","role.name",t.role,this.roles,!0)),this.validationContext.addRule(new g.mi(`userName_${i}_is_valid}`,"User Is Not Valid","user.name",t.user,this.users,!0))}),this.validationContext.addRule(new g.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof g.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(a=>a.name),newNames:[i.newName]}):i instanceof g.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,D.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class Yk extends g.wS{constructor(o,t,i,a,l){super(o,t,i,a,l,!0)}}class Xk extends g.ul{constructor(o,t,i,a=!1){super(o,t,a),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new g.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new Yk("name","The userrole name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class e5 extends us{constructor(o){super("CreateUserRoleAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new Xk("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateUserRole({input:this.input}).pipe((0,h.w)(o=>(0,ue.of)(o.data.created)))}}class t5 extends us{constructor(o){super("UpdateUserRolesAction"),this.userRoles=o}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.userRoles,!0))}performAction(){this.response=this.businessProvider.data.userUpdateUserRoles({input:{userRoles:this.userRoles}}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}class i5 extends us{constructor(o,t){super("UpdateUserRoleAction"),this.userRole=o,this.userRoleId=t}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.userRole,!0)).addRule(new g.xF("Id","Id should be a CUID and not null",this.userRoleId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateUserRole({userRoleId:this.userRoleId,input:this.userRole}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}let Cm=(()=>{class s extends W.nH{constructor(t,i,a){super("NotificationService.UserRoleBusinessProviderService",t,a),this.data=i}createUserRole(t){const i=new e5(t);return i.Do(this),i.response}updateUserRole(t,i){const a=new i5(t,i);return a.Do(this),a.response}importUserRoles(t){const i=new t5(t);return i.Do(this),i.response}validateUserRoleExcelData(t,i,a){const l=new kk(t,i,a);return l.Do(this),l.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(K.ed),e.LFG(z.q),e.LFG(W.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),s5=(()=>{class s extends W.nH{constructor(t,i,a){super("UserRoleService",a,t),this.businessProvider=i}createUserRole(t){const i=Object.fromEntries(Object.entries(t).filter(([a,l])=>null!==l));return this.businessProvider.createUserRole(i)}updateUserRole(t,i){return this.businessProvider.updateUserRole(t,i)}importUserRoles(t){return this.businessProvider.importUserRoles(t)}validateUserRoleExcelData(t,i,a){return this.businessProvider.validateUserRoleExcelData(t,i,a)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(Cm,8),e.LFG(Cm),e.LFG(K.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),xa=(()=>{class s extends b.m1{constructor(t,i,a,l,d,ee){if(super({loading:!1,userRoles:[],done:!1,searchQuery:"",formName:void 0,roleId:void 0,userId:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=a,this.toast=l,this.formService=d,this.userRoleService=ee,this.errors$=this.select(n=>n.errors),this.loading$=this.select(n=>n.loading),this.done$=this.select(n=>n.done),this.item$=this.select(n=>n.item),this.userRoles$=this.select(n=>n.userRoles),this.roles$=this.select(n=>n.roles||[]),this.users$=this.select(n=>n.users||[]),this.roleId$=this.select(n=>n.roleId),this.userId$=this.select(n=>n.userId),this.paging$=this.select(n=>n.paging),this.searchQuery$=this.select(n=>n.searchQuery),this.formName$=this.select(n=>n.formName),this.actionResult$=this.select(this.item$,this.done$,(n,r)=>({item:n,done:r}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.userRoles$,this.roles$,this.users$,(n,r,m,p,v,I,B)=>({errors:n,loading:r,item:m,formName:p,userRoles:v,roles:I,users:B}),{debounce:!0}),this.input$=this.select(this.paging$,this.roleId$,this.userId$,this.searchQuery$,(n,r,m,p)=>({limit:n.limit,skip:n.skip,name:p,roleId:r,userId:m,total:n.total})),this.setFormName=this.updater((n,r)=>Object.assign(Object.assign({},n),{formName:r})),this.setRoleId=this.updater((n,r)=>Object.assign(Object.assign({},n),{roleId:r})),this.setUserId=this.updater((n,r)=>Object.assign(Object.assign({},n),{userId:r})),this.filterRoles=n=>this.data.userSelectRoles({input:{name:n}}).pipe((0,b._b)(r=>{let m=r.data.items;return this.patchState({roles:m}),m},r=>this.patchState({errors:r.graphQLErrors?r.graphQLErrors:r})),(0,fe.U)(r=>r.data.items)),this.filterUsers=n=>this.data.userSelectUsers({input:{name:n}}).pipe((0,b._b)(r=>{let m=r.data.items;return this.patchState({users:m}),m},r=>this.patchState({errors:r.graphQLErrors?r.graphQLErrors:r})),(0,fe.U)(r=>r.data.items)),this.addRole=this.updater((n,r)=>Object.assign(Object.assign({},n),{roles:n.roles.concat(r)})),this.addUser=this.updater((n,r)=>Object.assign(Object.assign({},n),{users:n.users.concat(r)})),this.setItem=this.updater((n,r)=>Object.assign(Object.assign({},n),{item:r})),this.addNewUserRole=this.updater((n,r)=>Object.assign(Object.assign({},n),{userRoles:[...n.userRoles,r]})),this.updateUserRole=this.updater((n,r)=>Object.assign(Object.assign({},n),{userRoles:n.userRoles.map(m=>m.id===r.id?r:m)})),this.addUserRoles=this.updater((n,r)=>Object.assign(Object.assign({},n),{userRoles:n.userRoles.concat(r)})),this.updateUserRoles=this.updater((n,r)=>Object.assign(Object.assign({},n),{userRoles:n.userRoles.map(m=>r.find(v=>v.id===m.id)||m)})),this.setSearchQuery=this.updater((n,r)=>Object.assign(Object.assign({},n),{searchQuery:r})),this.loadUserRoleEffect=this.effect(n=>n.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(r=>this.data.userUserRole({userRoleId:r}).pipe((0,b._b)(m=>{this.patchState({item:m.data.item,errors:m.errors,loading:!1})},m=>this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})))))),this.loadUserRolesEffect=this.effect(n=>n.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.input$),(0,h.w)(([r,m])=>this.data.userUserRoles({input:m}).pipe((0,b._b)(p=>this.patchState({paging:{limit:m.limit,skip:m.skip,total:p.data.count.total},userRoles:p.data.items,errors:p.errors,loading:!1}),p=>this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})))))),this.createUserRoleEffect=this.effect(n=>n.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(r=>this.userRoleService.createUserRole(Object.assign({},r)).pipe((0,b._b)(m=>{this.addNewUserRole(m),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:m,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},m=>{m.graphQLErrors?(this.toast.error(m.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})):(this.toast.error(m.Message),this.formService.setErrors(m.Data))}))))),this.updateUserRoleEffect=this.effect(n=>n.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([r,m])=>this.userRoleService.updateUserRole(r,r.id).pipe((0,b._b)(p=>{this.updateUserRole(p),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:p,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},p=>{p.graphQLErrors?(this.toast.error(p.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})):(this.toast.error(p.Message),this.formService.setErrors(p.Data))}))))),this.deleteUserRoleEffect=this.effect(n=>n.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([r,m])=>this.data.userDeleteUserRole({userRoleId:m.id}).pipe((0,b._b)(p=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:p.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},p=>{p.graphQLErrors?(this.toast.error(p.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})):(this.toast.error(p.Message),this.formService.setErrors(p.Data))}))))),this.importExcelEffect=this.effect(n=>n.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(r=>this.userRoleService.importUserRoles(r).pipe((0,de.K)(m=>{var p;return this.toast.error(null!==(p=m.Message)&&void 0!==p?p:"Failed to save",{duration:3e3}),q.E}),(0,y.b)(m=>{const p=JSON.parse(m.created),v=JSON.parse(m.updated),I=JSON.parse(m.failed),B=p.length+v.length+I.length;this.addUserRoles(p),this.updateUserRoles(v),this.toast.success(`${p.length} created, ${v.length} updated, ${I.length} failed of total ${B}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("userRoleId")?(this.route.snapshot.paramMap.get("userRoleId"),this.setFormName("userRole_edit")):this.setFormName("userRole_create"),this.route.snapshot.paramMap.has("roleId")){var c=this.route.snapshot.paramMap.get("roleId");this.setRoleId(c)}if(this.route.snapshot.paramMap.has("userId")){var u=this.route.snapshot.paramMap.get("userId");this.setUserId(u)}}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.userRoleService.validateUserRoleExcelData(t,i.roles,i.users)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(z.q),e.LFG(O.F0),e.LFG(O.gz),e.LFG(X.F),e.LFG(Z.o),e.LFG(s5))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function o5(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.close.emit())})("formIsReady",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.userRole)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let Sm=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"userRole_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.userRole=i.item})):t.formName&&t.formName.currentValue&&"userRole_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadUserRoleEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.userRole=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(xa),e.Y36(O.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-user-role-form"]],inputs:{userRole:"userRole",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,o5,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[P.O5,te.M,P.Ov],encapsulation:2}),s})(),bm=(()=>{class s{constructor(){this.autoHeight=!1,this.userRoles=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[{field:"role.name",headerName:"Role",filter:"agTextColumnFilter"},{field:"user.name",headerName:"User",filter:"agTextColumnFilter"},{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{field:"roleId",filter:"agTextColumnFilter",hide:!0},{field:"userId",filter:"agTextColumnFilter",hide:!0}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var a;t.includes(null===(a=i.data)||void 0===a?void 0:a.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-user-role-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(f.x,5),2&t){let a;e.iGM(a=e.CRH())&&(i.tableView=a.first)}},inputs:{autoHeight:"autoHeight",userRoles:"userRoles"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.userRoles)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[f.x],encapsulation:2}),s})();function a5(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-user-role-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","userRole_edit")("formControl",t.formControl)("userRole",t.userRole)}}const r5=function(){return{}};function n5(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-user-role-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","userRole_create")("formControl",t.formControl)("userRole",e.DdM(3,r5))}}function l5(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-user-role-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(d.ref.close())}),e.qZA()}2&s&&e.Q6J("userRoles",o.data.items)}let c5=(()=>{class s extends G.fS{constructor(t){super(),this.store=t,this.store.loadUserRolesEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.userRoles$.pipe((0,h.w)(i=>(0,D.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(xa))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","userRole","send","close"],[1,"w-full","h-full","bg-white",3,"userRoles","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,a5,2,3,"ng-template",null,1,e.W1O),e.YNc(3,n5,1,4,"ng-template",null,2,e.W1O),e.YNc(5,l5,1,1,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",d)("editTemplate",a)("createTemplate",l)("key",i.field.key)}},dependencies:[E.JJ,E.oH,H.$,Sm,bm],encapsulation:2}),s})();function d5(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-user-role-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","userRole_edit")("userRole",t.value)}}const u5=function(){return{}};function m5(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-user-role-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","userRole_create")("userRole",e.DdM(2,u5))}function p5(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-user-role-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(null==d.ref?null:d.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("userRoles",t.items)}}let h5=(()=>{class s extends pe{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","userRole","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","userRoles","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,d5,1,2,"ng-template",null,1,e.W1O),e.YNc(3,m5,1,3,"ng-template",null,2,e.W1O),e.YNc(5,p5,1,2,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[he,Sm,bm],encapsulation:2}),s})(),f5=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[xa],imports:[P.ez,U.F,E.UX,J.o,ae.u,$.P,j.t,me,k.h,se.G,G.X0.forChild({types:[{name:"user-role-select",component:c5,wrappers:["form-field"]},{name:"user-role-grid",component:h5}]})]}),s})(),_5=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[f5]}),s})();var Na=M(86820);function g5(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.close.emit())})("formIsReady",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.vendorLocation)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let Tm=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"vendorLocation_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({id:null,name:""}),this.store.vm$.subscribe(i=>{this.vendorLocation=i.item})):t.formName&&t.formName.currentValue&&"vendorLocation_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadVendorLocationEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.vendorLocation=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Na.X),e.Y36(O.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-vendor-location-form"]],inputs:{vendorLocation:"vendorLocation",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,g5,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[P.O5,te.M,P.Ov],encapsulation:2}),s})(),ym=(()=>{class s{constructor(){this.autoHeight=!1,this.vendorLocations=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[{field:"vendor.name",headerName:"Vendor",filter:"agTextColumnFilter"},{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{field:"locationId",filter:"agTextColumnFilter",hide:!0},{field:"vendorId",filter:"agTextColumnFilter",hide:!0}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var a;t.includes(null===(a=i.data)||void 0===a?void 0:a.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-vendor-location-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(f.x,5),2&t){let a;e.iGM(a=e.CRH())&&(i.tableView=a.first)}},inputs:{autoHeight:"autoHeight",vendorLocations:"vendorLocations"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.vendorLocations)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[f.x],encapsulation:2}),s})();function v5(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-vendor-location-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","vendorLocation_edit")("formControl",t.formControl)("vendorLocation",t.vendorLocation)}}const C5=function(){return{}};function S5(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-vendor-location-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","vendorLocation_create")("formControl",t.formControl)("vendorLocation",e.DdM(3,C5))}}function b5(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-vendor-location-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(d.ref.close())}),e.qZA()}2&s&&e.Q6J("vendorLocations",o.data.items)}let T5=(()=>{class s extends G.fS{constructor(t){super(),this.store=t,this.store.loadVendorLocationsEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.vendorLocations$.pipe((0,h.w)(i=>(0,D.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Na.X))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","vendorLocation","send","close"],[1,"w-full","h-full","bg-white",3,"vendorLocations","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,v5,2,3,"ng-template",null,1,e.W1O),e.YNc(3,S5,1,4,"ng-template",null,2,e.W1O),e.YNc(5,b5,1,1,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",d)("editTemplate",a)("createTemplate",l)("key",i.field.key)}},dependencies:[E.JJ,E.oH,H.$,Tm,ym],encapsulation:2}),s})();function y5(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-vendor-location-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","vendorLocation_edit")("vendorLocation",t.value)}}const w5=function(){return{}};function x5(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-vendor-location-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","vendorLocation_create")("vendorLocation",e.DdM(2,w5))}function N5(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-vendor-location-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(null==d.ref?null:d.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("vendorLocations",t.items)}}let A5=(()=>{class s extends pe{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","vendorLocation","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","vendorLocations","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,y5,1,2,"ng-template",null,1,e.W1O),e.YNc(3,x5,1,3,"ng-template",null,2,e.W1O),e.YNc(5,N5,1,2,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[he,Tm,ym],encapsulation:2}),s})(),F5=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[Na.X],imports:[P.ez,U.F,E.UX,J.o,ae.u,$.P,j.t,me,k.h,se.G,G.X0.forChild({types:[{name:"vendor-location-select",component:T5,wrappers:["form-field"]},{name:"vendor-location-grid",component:A5}]})]}),s})(),P5=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[F5]}),s})();var Aa=M(40468);function I5(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.close.emit())})("formIsReady",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.vendor)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let wm=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"vendor_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({id:null,name:""}),this.store.vm$.subscribe(i=>{this.vendor=i.item})):t.formName&&t.formName.currentValue&&"vendor_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadVendorEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.vendor=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Aa.m),e.Y36(O.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-vendor-form"]],inputs:{vendor:"vendor",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,I5,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[P.O5,te.M,P.Ov],encapsulation:2}),s})(),xm=(()=>{class s{constructor(){this.autoHeight=!1,this.vendors=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[{field:"vendorType.name",headerName:"Vendor Type",filter:"agTextColumnFilter"},{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{field:"taxId",filter:"agTextColumnFilter",hide:!0},{field:"line1",filter:"agTextColumnFilter"},{field:"city",filter:"agTextColumnFilter"},{field:"state",filter:"agTextColumnFilter"},{field:"postalCode",filter:"agTextColumnFilter"},{field:"emailAddress",filter:"agTextColumnFilter"},{field:"phoneNumber",filter:"agTextColumnFilter"},{field:"fax",filter:"agTextColumnFilter"},{field:"mailingAddress",filter:"agTextColumnFilter"},{field:"vendorTypeId",filter:"agTextColumnFilter",hide:!0},{field:"line2",filter:"agTextColumnFilter"},{field:"country",filter:"agTextColumnFilter"},{field:"office",filter:"agTextColumnFilter"},{field:"email",filter:"agTextColumnFilter"},{field:"website",filter:"agTextColumnFilter"},{field:"contactPerson",filter:"agTextColumnFilter"},{field:"owner",filter:"agTextColumnFilter"},{field:"bankRoutingNumber",filter:"agTextColumnFilter"},{field:"bankAccountNumber",filter:"agTextColumnFilter"},{field:"bankName",filter:"agTextColumnFilter"},{field:"bankCity",filter:"agTextColumnFilter"},{field:"bankState",filter:"agTextColumnFilter"},{field:"bankZip",filter:"agTextColumnFilter"},{field:"notes",filter:"agTextColumnFilter"},{field:"agreementDetails",filter:"agTextColumnFilter"},{field:"providerSearchNameDisplayType",filter:"agTextColumnFilter"},{field:"driversLicenseId",filter:"agTextColumnFilter",hide:!0},{field:"logoId",filter:"agTextColumnFilter",hide:!0},{field:"cellphone",filter:"agTextColumnFilter"},{field:"achCheckOrWire",filter:"agTextColumnFilter"},{field:"reductionNotes",filter:"agTextColumnFilter"},{headerName:"Latitude",field:"latitude",valueFormatter:t=>{var i;return(0,_.oBD)(null===(i=t.data)||void 0===i?void 0:i.latitude,"",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{headerName:"Longitude",field:"longitude",valueFormatter:t=>{var i;return(0,_.oBD)(null===(i=t.data)||void 0===i?void 0:i.longitude,"",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{field:"businessCentralName",filter:"agTextColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var a;t.includes(null===(a=i.data)||void 0===a?void 0:a.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-vendor-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(f.x,5),2&t){let a;e.iGM(a=e.CRH())&&(i.tableView=a.first)}},inputs:{autoHeight:"autoHeight",vendors:"vendors"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.vendors)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[f.x],encapsulation:2}),s})();function D5(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-vendor-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","vendor_edit")("formControl",t.formControl)("vendor",t.vendor)}}const M5=function(){return{}};function W5(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-vendor-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","vendor_create")("formControl",t.formControl)("vendor",e.DdM(3,M5))}}function E5(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-vendor-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(d.ref.close())}),e.qZA()}2&s&&e.Q6J("vendors",o.data.items)}let O5=(()=>{class s extends G.fS{constructor(t){super(),this.store=t,this.store.loadVendorsEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.vendors$.pipe((0,h.w)(i=>(0,D.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Aa.m))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","vendor","send","close"],[1,"w-full","h-full","bg-white",3,"vendors","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,D5,2,3,"ng-template",null,1,e.W1O),e.YNc(3,W5,1,4,"ng-template",null,2,e.W1O),e.YNc(5,E5,1,1,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",d)("editTemplate",a)("createTemplate",l)("key",i.field.key)}},dependencies:[E.JJ,E.oH,H.$,wm,xm],encapsulation:2}),s})();function L5(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-vendor-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","vendor_edit")("vendor",t.value)}}const $5=function(){return{}};function G5(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-vendor-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","vendor_create")("vendor",e.DdM(2,$5))}function R5(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-vendor-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(null==d.ref?null:d.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("vendors",t.items)}}let Q5=(()=>{class s extends pe{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","vendor","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","vendors","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,L5,1,2,"ng-template",null,1,e.W1O),e.YNc(3,G5,1,3,"ng-template",null,2,e.W1O),e.YNc(5,R5,1,2,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[he,wm,xm],encapsulation:2}),s})(),V5=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[Aa.m],imports:[P.ez,U.F,E.UX,J.o,ae.u,$.P,j.t,me,k.h,se.G,G.X0.forChild({types:[{name:"vendor-select",component:O5,wrappers:["form-field"]},{name:"vendor-grid",component:Q5}]})]}),s})(),j5=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[V5]}),s})();class ms extends W.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class U5 extends ms{constructor(o){super("ValidateVendorTypeExcelDataAction"),this.valid=!1,this.excelData=o}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name)}),this.validationContext.addRule(new g.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof g.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(a=>a.name),newNames:[i.newName]}):i instanceof g.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,D.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class J5 extends g.wS{constructor(o,t,i,a,l){super(o,t,i,a,l,!0)}}class z5 extends g.ul{constructor(o,t,i,a=!1){super(o,t,a),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new g.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new J5("name","The vendortype name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class H5 extends ms{constructor(o){super("CreateVendorTypeAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new z5("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateVendorType({input:this.input}).pipe((0,h.w)(o=>(0,ue.of)(o.data.created)))}}class q5 extends ms{constructor(o){super("UpdateVendorTypesAction"),this.vendorTypes=o}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.vendorTypes,!0))}performAction(){this.response=this.businessProvider.data.userUpdateVendorTypes({input:{vendorTypes:this.vendorTypes}}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}class K5 extends ms{constructor(o,t){super("UpdateVendorTypeAction"),this.vendorType=o,this.vendorTypeId=t}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.vendorType,!0)).addRule(new g.xF("Id","Id should be a CUID and not null",this.vendorTypeId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateVendorType({vendorTypeId:this.vendorTypeId,input:this.vendorType}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}let Nm=(()=>{class s extends W.nH{constructor(t,i,a){super("NotificationService.VendorTypeBusinessProviderService",t,a),this.data=i}createVendorType(t){const i=new H5(t);return i.Do(this),i.response}updateVendorType(t,i){const a=new K5(t,i);return a.Do(this),a.response}importVendorTypes(t){const i=new q5(t);return i.Do(this),i.response}validateVendorTypeExcelData(t){const i=new U5(t);return i.Do(this),i.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(K.ed),e.LFG(z.q),e.LFG(W.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),Z5=(()=>{class s extends W.nH{constructor(t,i,a){super("VendorTypeService",a,t),this.businessProvider=i}createVendorType(t){const i=Object.fromEntries(Object.entries(t).filter(([a,l])=>null!==l));return this.businessProvider.createVendorType(i)}updateVendorType(t,i){return this.businessProvider.updateVendorType(t,i)}importVendorTypes(t){return this.businessProvider.importVendorTypes(t)}validateVendorTypeExcelData(t){return this.businessProvider.validateVendorTypeExcelData(t)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(Nm,8),e.LFG(Nm),e.LFG(K.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),Fa=(()=>{class s extends b.m1{constructor(t,i,a,l,d,ee){super({loading:!1,vendorTypes:[],done:!1,searchQuery:"",formName:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=a,this.toast=l,this.formService=d,this.vendorTypeService=ee,this.errors$=this.select(c=>c.errors),this.loading$=this.select(c=>c.loading),this.done$=this.select(c=>c.done),this.item$=this.select(c=>c.item),this.vendorTypes$=this.select(c=>c.vendorTypes),this.paging$=this.select(c=>c.paging),this.searchQuery$=this.select(c=>c.searchQuery),this.formName$=this.select(c=>c.formName),this.actionResult$=this.select(this.item$,this.done$,(c,u)=>({item:c,done:u}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.vendorTypes$,(c,u,n,r,m)=>({errors:c,loading:u,item:n,formName:r,vendorTypes:m}),{debounce:!0}),this.input$=this.select(this.paging$,this.searchQuery$,(c,u)=>({limit:c.limit,skip:c.skip,name:u,total:c.total})),this.setFormName=this.updater((c,u)=>Object.assign(Object.assign({},c),{formName:u})),this.setItem=this.updater((c,u)=>Object.assign(Object.assign({},c),{item:u})),this.addNewVendorType=this.updater((c,u)=>Object.assign(Object.assign({},c),{vendorTypes:[...c.vendorTypes,u]})),this.updateVendorType=this.updater((c,u)=>Object.assign(Object.assign({},c),{vendorTypes:c.vendorTypes.map(n=>n.id===u.id?u:n)})),this.addVendorTypes=this.updater((c,u)=>Object.assign(Object.assign({},c),{vendorTypes:c.vendorTypes.concat(u)})),this.updateVendorTypes=this.updater((c,u)=>Object.assign(Object.assign({},c),{vendorTypes:c.vendorTypes.map(n=>u.find(m=>m.id===n.id)||n)})),this.setSearchQuery=this.updater((c,u)=>Object.assign(Object.assign({},c),{searchQuery:u})),this.loadVendorTypeEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.data.userVendorType({vendorTypeId:u}).pipe((0,b._b)(n=>{this.patchState({item:n.data.item,errors:n.errors,loading:!1})},n=>this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})))))),this.loadVendorTypesEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.input$),(0,h.w)(([u,n])=>this.data.userVendorTypes({input:n}).pipe((0,b._b)(r=>this.patchState({paging:{limit:n.limit,skip:n.skip,total:r.data.count.total},vendorTypes:r.data.items,errors:r.errors,loading:!1}),r=>this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})))))),this.createVendorTypeEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.vendorTypeService.createVendorType(Object.assign({},u)).pipe((0,b._b)(n=>{this.addNewVendorType(n),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:n,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},n=>{n.graphQLErrors?(this.toast.error(n.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})):(this.toast.error(n.Message),this.formService.setErrors(n.Data))}))))),this.updateVendorTypeEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([u,n])=>this.vendorTypeService.updateVendorType(u,u.id).pipe((0,b._b)(r=>{this.updateVendorType(r),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:r,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},r=>{r.graphQLErrors?(this.toast.error(r.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})):(this.toast.error(r.Message),this.formService.setErrors(r.Data))}))))),this.deleteVendorTypeEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([u,n])=>this.data.userDeleteVendorType({vendorTypeId:n.id}).pipe((0,b._b)(r=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:r.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},r=>{r.graphQLErrors?(this.toast.error(r.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})):(this.toast.error(r.Message),this.formService.setErrors(r.Data))}))))),this.importExcelEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.vendorTypeService.importVendorTypes(u).pipe((0,de.K)(n=>{var r;return this.toast.error(null!==(r=n.Message)&&void 0!==r?r:"Failed to save",{duration:3e3}),q.E}),(0,y.b)(n=>{const r=JSON.parse(n.created),m=JSON.parse(n.updated),p=JSON.parse(n.failed),v=r.length+m.length+p.length;this.addVendorTypes(r),this.updateVendorTypes(m),this.toast.success(`${r.length} created, ${m.length} updated, ${p.length} failed of total ${v}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("vendorTypeId")?(this.route.snapshot.paramMap.get("vendorTypeId"),this.setFormName("vendorType_edit")):this.setFormName("vendorType_create")}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.vendorTypeService.validateVendorTypeExcelData(t)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(z.q),e.LFG(O.F0),e.LFG(O.gz),e.LFG(X.F),e.LFG(Z.o),e.LFG(Z5))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function B5(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.close.emit())})("formIsReady",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.vendorType)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let Am=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"vendorType_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.vendorType=i.item})):t.formName&&t.formName.currentValue&&"vendorType_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadVendorTypeEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.vendorType=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Fa),e.Y36(O.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-vendor-type-form"]],inputs:{vendorType:"vendorType",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,B5,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[P.O5,te.M,P.Ov],encapsulation:2}),s})(),Fm=(()=>{class s{constructor(){this.autoHeight=!1,this.vendorTypes=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[,{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var a;t.includes(null===(a=i.data)||void 0===a?void 0:a.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-vendor-type-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(f.x,5),2&t){let a;e.iGM(a=e.CRH())&&(i.tableView=a.first)}},inputs:{autoHeight:"autoHeight",vendorTypes:"vendorTypes"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.vendorTypes)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[f.x],encapsulation:2}),s})();function k5(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-vendor-type-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","vendorType_edit")("formControl",t.formControl)("vendorType",t.vendorType)}}const Y5=function(){return{}};function X5(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-vendor-type-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","vendorType_create")("formControl",t.formControl)("vendorType",e.DdM(3,Y5))}}function eY(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-vendor-type-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(d.ref.close())}),e.qZA()}2&s&&e.Q6J("vendorTypes",o.data.items)}let tY=(()=>{class s extends G.fS{constructor(t){super(),this.store=t,this.store.loadVendorTypesEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.vendorTypes$.pipe((0,h.w)(i=>(0,D.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Fa))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","vendorType","send","close"],[1,"w-full","h-full","bg-white",3,"vendorTypes","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,k5,2,3,"ng-template",null,1,e.W1O),e.YNc(3,X5,1,4,"ng-template",null,2,e.W1O),e.YNc(5,eY,1,1,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",d)("editTemplate",a)("createTemplate",l)("key",i.field.key)}},dependencies:[E.JJ,E.oH,H.$,Am,Fm],encapsulation:2}),s})();function iY(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-vendor-type-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","vendorType_edit")("vendorType",t.value)}}const sY=function(){return{}};function oY(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-vendor-type-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","vendorType_create")("vendorType",e.DdM(2,sY))}function aY(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-vendor-type-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(null==d.ref?null:d.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("vendorTypes",t.items)}}let rY=(()=>{class s extends pe{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","vendorType","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","vendorTypes","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,iY,1,2,"ng-template",null,1,e.W1O),e.YNc(3,oY,1,3,"ng-template",null,2,e.W1O),e.YNc(5,aY,1,2,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[he,Am,Fm],encapsulation:2}),s})(),nY=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[Fa],imports:[P.ez,U.F,E.UX,J.o,ae.u,$.P,j.t,me,k.h,se.G,G.X0.forChild({types:[{name:"vendor-type-select",component:tY,wrappers:["form-field"]},{name:"vendor-type-grid",component:rY}]})]}),s})(),lY=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[nY]}),s})();var Pa=M(85252);function cY(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.close.emit())})("formIsReady",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.visitKind)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let Pm=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"visitKind_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.visitKind=i.item})):t.formName&&t.formName.currentValue&&"visitKind_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadVisitKindEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.visitKind=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Pa.S),e.Y36(O.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-visit-kind-form"]],inputs:{visitKind:"visitKind",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,cY,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[P.O5,te.M,P.Ov],encapsulation:2}),s})(),Im=(()=>{class s{constructor(){this.autoHeight=!1,this.visitKinds=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[,{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{field:"code",filter:"agTextColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var a;t.includes(null===(a=i.data)||void 0===a?void 0:a.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-visit-kind-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(f.x,5),2&t){let a;e.iGM(a=e.CRH())&&(i.tableView=a.first)}},inputs:{autoHeight:"autoHeight",visitKinds:"visitKinds"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.visitKinds)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[f.x],encapsulation:2}),s})();function dY(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-visit-kind-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","visitKind_edit")("formControl",t.formControl)("visitKind",t.visitKind)}}const uY=function(){return{}};function mY(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-visit-kind-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","visitKind_create")("formControl",t.formControl)("visitKind",e.DdM(3,uY))}}function pY(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-visit-kind-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(d.ref.close())}),e.qZA()}2&s&&e.Q6J("visitKinds",o.data.items)}let hY=(()=>{class s extends G.fS{constructor(t){super(),this.store=t,this.store.loadVisitKindsEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.visitKinds$.pipe((0,h.w)(i=>(0,D.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Pa.S))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","visitKind","send","close"],[1,"w-full","h-full","bg-white",3,"visitKinds","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,dY,2,3,"ng-template",null,1,e.W1O),e.YNc(3,mY,1,4,"ng-template",null,2,e.W1O),e.YNc(5,pY,1,1,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",d)("editTemplate",a)("createTemplate",l)("key",i.field.key)}},dependencies:[E.JJ,E.oH,H.$,Pm,Im],encapsulation:2}),s})();function fY(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-visit-kind-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","visitKind_edit")("visitKind",t.value)}}const _Y=function(){return{}};function gY(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-visit-kind-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","visitKind_create")("visitKind",e.DdM(2,_Y))}function vY(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-visit-kind-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(null==d.ref?null:d.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("visitKinds",t.items)}}let CY=(()=>{class s extends pe{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","visitKind","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","visitKinds","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,fY,1,2,"ng-template",null,1,e.W1O),e.YNc(3,gY,1,3,"ng-template",null,2,e.W1O),e.YNc(5,vY,1,2,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[he,Pm,Im],encapsulation:2}),s})(),SY=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[Pa.S],imports:[P.ez,U.F,E.UX,J.o,ae.u,$.P,j.t,me,k.h,se.G,G.X0.forChild({types:[{name:"visit-kind-select",component:hY,wrappers:["form-field"]},{name:"visit-kind-grid",component:CY}]})]}),s})(),bY=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[SY]}),s})();class ps extends W.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class TY extends ps{constructor(o,t,i){super("ValidateWriteOffExcelDataAction"),this.valid=!1,this.excelData=o,this.accounts=t,this.writeOffStatuses=i}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name),this.validationContext.addRule(new g.mi(`accountName_${i}_is_valid}`,"Account Is Not Valid","account.name",t.account,this.accounts,!0)),this.validationContext.addRule(new g.mi(`writeOffStatusName_${i}_is_valid}`,"Write off Status Is Not Valid","writeOffStatus.name",t.writeOffStatus,this.writeOffStatuses,!0))}),this.validationContext.addRule(new g.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof g.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(a=>a.name),newNames:[i.newName]}):i instanceof g.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,D.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class yY extends g.wS{constructor(o,t,i,a,l){super(o,t,i,a,l,!0)}}class wY extends g.ul{constructor(o,t,i,a=!1){super(o,t,a),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new g.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new yY("name","The writeoff name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class xY extends ps{constructor(o){super("CreateWriteOffAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new wY("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateWriteOff({input:this.input}).pipe((0,h.w)(o=>(0,ue.of)(o.data.created)))}}class NY extends ps{constructor(o){super("UpdateWriteOffsAction"),this.writeOffs=o}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.writeOffs,!0))}performAction(){this.response=this.businessProvider.data.userUpdateWriteOffs({input:{writeOffs:this.writeOffs}}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}class AY extends ps{constructor(o,t){super("UpdateWriteOffAction"),this.writeOff=o,this.writeOffId=t}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.writeOff,!0)).addRule(new g.xF("Id","Id should be a CUID and not null",this.writeOffId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateWriteOff({writeOffId:this.writeOffId,input:this.writeOff}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}let Dm=(()=>{class s extends W.nH{constructor(t,i,a){super("NotificationService.WriteOffBusinessProviderService",t,a),this.data=i}createWriteOff(t){const i=new xY(t);return i.Do(this),i.response}updateWriteOff(t,i){const a=new AY(t,i);return a.Do(this),a.response}importWriteOffs(t){const i=new NY(t);return i.Do(this),i.response}validateWriteOffExcelData(t,i,a){const l=new TY(t,i,a);return l.Do(this),l.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(K.ed),e.LFG(z.q),e.LFG(W.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),FY=(()=>{class s extends W.nH{constructor(t,i,a){super("WriteOffService",a,t),this.businessProvider=i}createWriteOff(t){const i=Object.fromEntries(Object.entries(t).filter(([a,l])=>null!==l));return this.businessProvider.createWriteOff(i)}updateWriteOff(t,i){return this.businessProvider.updateWriteOff(t,i)}importWriteOffs(t){return this.businessProvider.importWriteOffs(t)}validateWriteOffExcelData(t,i,a){return this.businessProvider.validateWriteOffExcelData(t,i,a)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(Dm,8),e.LFG(Dm),e.LFG(K.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),Ia=(()=>{class s extends b.m1{constructor(t,i,a,l,d,ee){if(super({loading:!1,writeOffs:[],done:!1,searchQuery:"",formName:void 0,accountId:void 0,writeOffStatusId:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=a,this.toast=l,this.formService=d,this.writeOffService=ee,this.errors$=this.select(n=>n.errors),this.loading$=this.select(n=>n.loading),this.done$=this.select(n=>n.done),this.item$=this.select(n=>n.item),this.writeOffs$=this.select(n=>n.writeOffs),this.caseAccounts$=this.select(n=>n.caseAccounts||[]),this.writeOffStatuses$=this.select(n=>n.writeOffStatuses||[]),this.accountId$=this.select(n=>n.accountId),this.writeOffStatusId$=this.select(n=>n.writeOffStatusId),this.paging$=this.select(n=>n.paging),this.searchQuery$=this.select(n=>n.searchQuery),this.formName$=this.select(n=>n.formName),this.actionResult$=this.select(this.item$,this.done$,(n,r)=>({item:n,done:r}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.writeOffs$,this.caseAccounts$,this.writeOffStatuses$,(n,r,m,p,v,I,B)=>({errors:n,loading:r,item:m,formName:p,writeOffs:v,caseAccounts:I,writeOffStatuses:B}),{debounce:!0}),this.input$=this.select(this.paging$,this.accountId$,this.writeOffStatusId$,this.searchQuery$,(n,r,m,p)=>({limit:n.limit,skip:n.skip,name:p,accountId:r,writeOffStatusId:m,total:n.total})),this.setFormName=this.updater((n,r)=>Object.assign(Object.assign({},n),{formName:r})),this.setAccountId=this.updater((n,r)=>Object.assign(Object.assign({},n),{accountId:r})),this.setWriteOffStatusId=this.updater((n,r)=>Object.assign(Object.assign({},n),{writeOffStatusId:r})),this.filterCaseAccounts=n=>this.data.userSelectCaseAccounts({input:{name:n}}).pipe((0,b._b)(r=>{let m=r.data.items;return this.patchState({caseAccounts:m}),m},r=>this.patchState({errors:r.graphQLErrors?r.graphQLErrors:r})),(0,fe.U)(r=>r.data.items)),this.filterWriteOffStatuses=n=>this.data.userSelectWriteOffStatuses({input:{name:n}}).pipe((0,b._b)(r=>{let m=r.data.items;return this.patchState({writeOffStatuses:m}),m},r=>this.patchState({errors:r.graphQLErrors?r.graphQLErrors:r})),(0,fe.U)(r=>r.data.items)),this.addCaseAccount=this.updater((n,r)=>Object.assign(Object.assign({},n),{caseAccounts:n.caseAccounts.concat(r)})),this.addWriteOffStatus=this.updater((n,r)=>Object.assign(Object.assign({},n),{writeOffStatuses:n.writeOffStatuses.concat(r)})),this.setItem=this.updater((n,r)=>Object.assign(Object.assign({},n),{item:r})),this.addNewWriteOff=this.updater((n,r)=>Object.assign(Object.assign({},n),{writeOffs:[...n.writeOffs,r]})),this.updateWriteOff=this.updater((n,r)=>Object.assign(Object.assign({},n),{writeOffs:n.writeOffs.map(m=>m.id===r.id?r:m)})),this.addWriteOffs=this.updater((n,r)=>Object.assign(Object.assign({},n),{writeOffs:n.writeOffs.concat(r)})),this.updateWriteOffs=this.updater((n,r)=>Object.assign(Object.assign({},n),{writeOffs:n.writeOffs.map(m=>r.find(v=>v.id===m.id)||m)})),this.setSearchQuery=this.updater((n,r)=>Object.assign(Object.assign({},n),{searchQuery:r})),this.loadWriteOffEffect=this.effect(n=>n.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(r=>this.data.userWriteOff({writeOffId:r}).pipe((0,b._b)(m=>{this.patchState({item:m.data.item,errors:m.errors,loading:!1})},m=>this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})))))),this.loadWriteOffsEffect=this.effect(n=>n.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.input$),(0,h.w)(([r,m])=>this.data.userWriteOffs({input:m}).pipe((0,b._b)(p=>this.patchState({paging:{limit:m.limit,skip:m.skip,total:p.data.count.total},writeOffs:p.data.items,errors:p.errors,loading:!1}),p=>this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})))))),this.createWriteOffEffect=this.effect(n=>n.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(r=>this.writeOffService.createWriteOff(Object.assign({},r)).pipe((0,b._b)(m=>{this.addNewWriteOff(m),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:m,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},m=>{m.graphQLErrors?(this.toast.error(m.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:m.graphQLErrors?m.graphQLErrors:m})):(this.toast.error(m.Message),this.formService.setErrors(m.Data))}))))),this.updateWriteOffEffect=this.effect(n=>n.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([r,m])=>this.writeOffService.updateWriteOff(r,r.id).pipe((0,b._b)(p=>{this.updateWriteOff(p),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:p,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},p=>{p.graphQLErrors?(this.toast.error(p.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})):(this.toast.error(p.Message),this.formService.setErrors(p.Data))}))))),this.deleteWriteOffEffect=this.effect(n=>n.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([r,m])=>this.data.userDeleteWriteOff({writeOffId:m.id}).pipe((0,b._b)(p=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:p.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},p=>{p.graphQLErrors?(this.toast.error(p.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:p.graphQLErrors?p.graphQLErrors:p})):(this.toast.error(p.Message),this.formService.setErrors(p.Data))}))))),this.importExcelEffect=this.effect(n=>n.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(r=>this.writeOffService.importWriteOffs(r).pipe((0,de.K)(m=>{var p;return this.toast.error(null!==(p=m.Message)&&void 0!==p?p:"Failed to save",{duration:3e3}),q.E}),(0,y.b)(m=>{const p=JSON.parse(m.created),v=JSON.parse(m.updated),I=JSON.parse(m.failed),B=p.length+v.length+I.length;this.addWriteOffs(p),this.updateWriteOffs(v),this.toast.success(`${p.length} created, ${v.length} updated, ${I.length} failed of total ${B}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("writeOffId")?(this.route.snapshot.paramMap.get("writeOffId"),this.setFormName("writeOff_edit")):this.setFormName("writeOff_create"),this.route.snapshot.paramMap.has("accountId")){var c=this.route.snapshot.paramMap.get("accountId");this.setAccountId(c)}if(this.route.snapshot.paramMap.has("writeOffStatusId")){var u=this.route.snapshot.paramMap.get("writeOffStatusId");this.setWriteOffStatusId(u)}}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.writeOffService.validateWriteOffExcelData(t,i.caseAccounts,i.writeOffStatuses)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(z.q),e.LFG(O.F0),e.LFG(O.gz),e.LFG(X.F),e.LFG(Z.o),e.LFG(FY))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function PY(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.close.emit())})("formIsReady",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.writeOff)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let Mm=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"writeOff_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.writeOff=i.item})):t.formName&&t.formName.currentValue&&"writeOff_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadWriteOffEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.writeOff=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Ia),e.Y36(O.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-write-off-form"]],inputs:{writeOff:"writeOff",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,PY,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[P.O5,te.M,P.Ov],encapsulation:2}),s})(),Wm=(()=>{class s{constructor(){this.autoHeight=!1,this.writeOffs=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[{field:"account.name",headerName:"Account",filter:"agTextColumnFilter"},{field:"writeOffStatus.name",headerName:"Write off Status",filter:"agTextColumnFilter"},{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"},{field:"accountId",filter:"agTextColumnFilter",hide:!0},{field:"writeOffStatusId",filter:"agTextColumnFilter",hide:!0},{headerName:"Amount",field:"amount",valueFormatter:t=>{var i;return(0,_.oBD)(null===(i=t.data)||void 0===i?void 0:i.amount,"$",2)},filter:"agNumberColumnFilter",aggFunc:"sum"},{field:"createdBy",filter:"agTextColumnFilter"},{field:"dateCreated",filter:"agDateColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var a;t.includes(null===(a=i.data)||void 0===a?void 0:a.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-write-off-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(f.x,5),2&t){let a;e.iGM(a=e.CRH())&&(i.tableView=a.first)}},inputs:{autoHeight:"autoHeight",writeOffs:"writeOffs"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.writeOffs)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[f.x],encapsulation:2}),s})();function IY(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-write-off-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","writeOff_edit")("formControl",t.formControl)("writeOff",t.writeOff)}}const DY=function(){return{}};function MY(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-write-off-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","writeOff_create")("formControl",t.formControl)("writeOff",e.DdM(3,DY))}}function WY(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-write-off-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(d.ref.close())}),e.qZA()}2&s&&e.Q6J("writeOffs",o.data.items)}let EY=(()=>{class s extends G.fS{constructor(t){super(),this.store=t,this.store.loadWriteOffsEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.writeOffs$.pipe((0,h.w)(i=>(0,D.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Ia))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","writeOff","send","close"],[1,"w-full","h-full","bg-white",3,"writeOffs","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,IY,2,3,"ng-template",null,1,e.W1O),e.YNc(3,MY,1,4,"ng-template",null,2,e.W1O),e.YNc(5,WY,1,1,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",d)("editTemplate",a)("createTemplate",l)("key",i.field.key)}},dependencies:[E.JJ,E.oH,H.$,Mm,Wm],encapsulation:2}),s})();function OY(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-write-off-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","writeOff_edit")("writeOff",t.value)}}const LY=function(){return{}};function $Y(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-write-off-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","writeOff_create")("writeOff",e.DdM(2,LY))}function GY(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-write-off-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(null==d.ref?null:d.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("writeOffs",t.items)}}let RY=(()=>{class s extends pe{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","writeOff","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","writeOffs","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,OY,1,2,"ng-template",null,1,e.W1O),e.YNc(3,$Y,1,3,"ng-template",null,2,e.W1O),e.YNc(5,GY,1,2,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[he,Mm,Wm],encapsulation:2}),s})(),QY=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[Ia],imports:[P.ez,U.F,E.UX,J.o,ae.u,$.P,j.t,me,k.h,se.G,G.X0.forChild({types:[{name:"write-off-select",component:EY,wrappers:["form-field"]},{name:"write-off-grid",component:RY}]})]}),s})(),VY=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[QY]}),s})();class hs extends W.T_{constructor(o){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=o}Do(o){return this.businessProvider=o,this.serviceContext=o.serviceContext,this.loggingService=o.loggingService,this.execute(),this.response}}class jY extends hs{constructor(o){super("ValidateWriteOffStatusExcelDataAction"),this.valid=!1,this.excelData=o}preValidateAction(){const o=[];this.excelData.map((t,i)=>{o.push(t.name)}),this.validationContext.addRule(new g.cL("nameIsUnique","Name should be unique",o,!0))}performAction(){}finish(){super.finish();const o={};let t=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(i=>{i instanceof g.mi?i.isValid||(o[i.columnName]?o[i.columnName].newNames.includes(i.newName)||o[i.columnName].newNames.push(i.newName):o[i.columnName]={options:i.possibleValueList.map(a=>a.name),newNames:[i.newName]}):i instanceof g.cL&&(i.isValid||(t=i.conflicts))})):this.valid=!0,this.response=(0,D.of)({valid:this.valid,excelData:this.excelData,conflictNames:t,unknownNames:o})}}class UY extends g.wS{constructor(o,t,i,a,l){super(o,t,i,a,l,!0)}}class JY extends g.ul{constructor(o,t,i,a=!1){super(o,t,a),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=i,this.configureRules()}configureRules(){this.rules.push(new g.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new UY("name","The writeoffstatus name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class zY extends hs{constructor(o){super("CreateWriteOffStatusAction"),this.input=o}preValidateAction(){this.validationContext.addRule(new JY("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateWriteOffStatus({input:this.input}).pipe((0,h.w)(o=>(0,ue.of)(o.data.created)))}}class HY extends hs{constructor(o){super("UpdateWriteOffStatusesAction"),this.writeOffStatuses=o}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.writeOffStatuses,!0))}performAction(){this.response=this.businessProvider.data.userUpdateWriteOffStatuses({input:{writeOffStatuses:this.writeOffStatuses}}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}class qY extends hs{constructor(o,t){super("UpdateWriteOffStatusAction"),this.writeOffStatus=o,this.writeOffStatusId=t}preValidateAction(){this.validationContext.addRule(new g.DJ("Input","Input should have values",this.writeOffStatus,!0)).addRule(new g.xF("Id","Id should be a CUID and not null",this.writeOffStatusId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateWriteOffStatus({writeOffStatusId:this.writeOffStatusId,input:this.writeOffStatus}).pipe((0,h.w)(o=>(0,D.of)(o.data.updated)))}}let Em=(()=>{class s extends W.nH{constructor(t,i,a){super("NotificationService.WriteOffStatusBusinessProviderService",t,a),this.data=i}createWriteOffStatus(t){const i=new zY(t);return i.Do(this),i.response}updateWriteOffStatus(t,i){const a=new qY(t,i);return a.Do(this),a.response}importWriteOffStatuses(t){const i=new HY(t);return i.Do(this),i.response}validateWriteOffStatusExcelData(t){const i=new jY(t);return i.Do(this),i.response}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(K.ed),e.LFG(z.q),e.LFG(W.oI))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),KY=(()=>{class s extends W.nH{constructor(t,i,a){super("WriteOffStatusService",a,t),this.businessProvider=i}createWriteOffStatus(t){const i=Object.fromEntries(Object.entries(t).filter(([a,l])=>null!==l));return this.businessProvider.createWriteOffStatus(i)}updateWriteOffStatus(t,i){return this.businessProvider.updateWriteOffStatus(t,i)}importWriteOffStatuses(t){return this.businessProvider.importWriteOffStatuses(t)}validateWriteOffStatusExcelData(t){return this.businessProvider.validateWriteOffStatusExcelData(t)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(Em,8),e.LFG(Em),e.LFG(K.ed))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),Da=(()=>{class s extends b.m1{constructor(t,i,a,l,d,ee){super({loading:!1,writeOffStatuses:[],done:!1,searchQuery:"",formName:void 0,paging:{limit:1e4,skip:0}}),this.data=t,this.router=i,this.route=a,this.toast=l,this.formService=d,this.writeOffStatusService=ee,this.errors$=this.select(c=>c.errors),this.loading$=this.select(c=>c.loading),this.done$=this.select(c=>c.done),this.item$=this.select(c=>c.item),this.writeOffStatuses$=this.select(c=>c.writeOffStatuses),this.paging$=this.select(c=>c.paging),this.searchQuery$=this.select(c=>c.searchQuery),this.formName$=this.select(c=>c.formName),this.actionResult$=this.select(this.item$,this.done$,(c,u)=>({item:c,done:u}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.writeOffStatuses$,(c,u,n,r,m)=>({errors:c,loading:u,item:n,formName:r,writeOffStatuses:m}),{debounce:!0}),this.input$=this.select(this.paging$,this.searchQuery$,(c,u)=>({limit:c.limit,skip:c.skip,name:u,total:c.total})),this.setFormName=this.updater((c,u)=>Object.assign(Object.assign({},c),{formName:u})),this.setItem=this.updater((c,u)=>Object.assign(Object.assign({},c),{item:u})),this.addNewWriteOffStatus=this.updater((c,u)=>Object.assign(Object.assign({},c),{writeOffStatuses:[...c.writeOffStatuses,u]})),this.updateWriteOffStatus=this.updater((c,u)=>Object.assign(Object.assign({},c),{writeOffStatuses:c.writeOffStatuses.map(n=>n.id===u.id?u:n)})),this.addWriteOffStatuses=this.updater((c,u)=>Object.assign(Object.assign({},c),{writeOffStatuses:c.writeOffStatuses.concat(u)})),this.updateWriteOffStatuses=this.updater((c,u)=>Object.assign(Object.assign({},c),{writeOffStatuses:c.writeOffStatuses.map(n=>u.find(m=>m.id===n.id)||n)})),this.setSearchQuery=this.updater((c,u)=>Object.assign(Object.assign({},c),{searchQuery:u})),this.loadWriteOffStatusEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.data.userWriteOffStatus({writeOffStatusId:u}).pipe((0,b._b)(n=>{this.patchState({item:n.data.item,errors:n.errors,loading:!1})},n=>this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})))))),this.loadWriteOffStatusesEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.input$),(0,h.w)(([u,n])=>this.data.userWriteOffStatuses({input:n}).pipe((0,b._b)(r=>this.patchState({paging:{limit:n.limit,skip:n.skip,total:r.data.count.total},writeOffStatuses:r.data.items,errors:r.errors,loading:!1}),r=>this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})))))),this.createWriteOffStatusEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.writeOffStatusService.createWriteOffStatus(Object.assign({},u)).pipe((0,b._b)(n=>{this.addNewWriteOffStatus(n),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:n,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},n=>{n.graphQLErrors?(this.toast.error(n.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:n.graphQLErrors?n.graphQLErrors:n})):(this.toast.error(n.Message),this.formService.setErrors(n.Data))}))))),this.updateWriteOffStatusEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([u,n])=>this.writeOffStatusService.updateWriteOffStatus(u,u.id).pipe((0,b._b)(r=>{this.updateWriteOffStatus(r),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:r,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},r=>{r.graphQLErrors?(this.toast.error(r.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})):(this.toast.error(r.Message),this.formService.setErrors(r.Data))}))))),this.deleteWriteOffStatusEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,R.M)(this.item$),(0,h.w)(([u,n])=>this.data.userDeleteWriteOffStatus({writeOffStatusId:n.id}).pipe((0,b._b)(r=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:r.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},r=>{r.graphQLErrors?(this.toast.error(r.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:r.graphQLErrors?r.graphQLErrors:r})):(this.toast.error(r.Message),this.formService.setErrors(r.Data))}))))),this.importExcelEffect=this.effect(c=>c.pipe((0,y.b)(()=>this.patchState({loading:!0})),(0,h.w)(u=>this.writeOffStatusService.importWriteOffStatuses(u).pipe((0,de.K)(n=>{var r;return this.toast.error(null!==(r=n.Message)&&void 0!==r?r:"Failed to save",{duration:3e3}),q.E}),(0,y.b)(n=>{const r=JSON.parse(n.created),m=JSON.parse(n.updated),p=JSON.parse(n.failed),v=r.length+m.length+p.length;this.addWriteOffStatuses(r),this.updateWriteOffStatuses(m),this.toast.success(`${r.length} created, ${m.length} updated, ${p.length} failed of total ${v}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("writeOffStatusId")?(this.route.snapshot.paramMap.get("writeOffStatusId"),this.setFormName("writeOffStatus_edit")):this.setFormName("writeOffStatus_create")}validateImportData(t){return this.vm$.pipe((0,h.w)(i=>this.writeOffStatusService.validateWriteOffStatusExcelData(t)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(z.q),e.LFG(O.F0),e.LFG(O.gz),e.LFG(X.F),e.LFG(Z.o),e.LFG(KY))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();function ZY(s,o){if(1&s){const t=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2)(2,"div",3)(3,"ui-formly-json-form",4),e.NdJ("discard",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.close.emit())})("formIsReady",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.formIsReady())}),e.qZA()()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("model",t.writeOffStatus)("formName",t.formName)("showSubmitButton",!0)("componentStore",t.store)}}let Om=(()=>{class s{constructor(t,i){this.store=t,this.route=i,this.send=new e.vpe,this.close=new e.vpe,this.vm$=this.store.vm$}formIsReady(){}ngOnChanges(t){t.formName&&t.formName.currentValue&&"writeOffStatus_create"==t.formName.currentValue?(console.log(t.formName.currentValue),this.store.setItem({name:""}),this.store.vm$.subscribe(i=>{this.writeOffStatus=i.item})):t.formName&&t.formName.currentValue&&"writeOffStatus_edit"==t.formName.currentValue&&t.formControl&&t.formControl.currentValue&&(console.log(t.formControl.currentValue),this.store.loadWriteOffStatusEffect(t.formControl.currentValue.value),this.store.vm$.subscribe(i=>{this.writeOffStatus=i.item}))}ngOnInit(){this.subscriber=this.store.actionResult$.subscribe(({done:t,item:i})=>{t&&this.send.emit(i)})}ngOnDestroy(){var t;null===(t=this.subscriber)||void 0===t||t.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Da),e.Y36(O.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-write-off-status-form"]],inputs:{writeOffStatus:"writeOffStatus",formName:"formName",formControl:"formControl"},outputs:{send:"send",close:"close"},features:[e.TTD],decls:2,vars:3,consts:[["class","absolute inset-0 flex flex-col overflow-y-hidden",4,"ngIf"],[1,"absolute","inset-0","flex","flex-col","overflow-y-hidden"],[1,"md:px-2","lg:px-0","lg:col-span-9","dark:bg-gray-800","bg-white","rounded-lg","shadow","p-4"],[1,"px-6","pt-6"],[3,"model","formName","showSubmitButton","componentStore","discard","formIsReady"]],template:function(t,i){1&t&&(e.YNc(0,ZY,4,4,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.vm$))},dependencies:[P.O5,te.M,P.Ov],encapsulation:2}),s})(),Lm=(()=>{class s{constructor(){this.autoHeight=!1,this.writeOffStatuses=[],this.itemDidSelect=new e.vpe,this.rowItemsSelected=new e.vpe,this.columnDefs=[,{field:"id",filter:"agTextColumnFilter",hide:!0},{field:"createdAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.createdAt)},hide:!0},{field:"updatedAt",filter:"agDateColumnFilter",cellClass:"dateTime",valueFormatter:t=>{var i;return(0,_.vhO)(null===(i=t.data)||void 0===i?void 0:i.updatedAt)},hide:!0},{field:"name",filter:"agTextColumnFilter"}]}selectionDidChange(t){this.rowItemsSelected.emit(t)}setSelected(t){this.tableView.gridApi.forEachNode(i=>{var a;t.includes(null===(a=i.data)||void 0===a?void 0:a.id)?i.setSelected(!0):i.setSelected(!1)})}onSelected(t){this.itemDidSelect.emit(t)}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ui-write-off-status-select-table-view"]],viewQuery:function(t,i){if(1&t&&e.Gf(f.x,5),2&t){let a;e.iGM(a=e.CRH())&&(i.tableView=a.first)}},inputs:{autoHeight:"autoHeight",writeOffStatuses:"writeOffStatuses"},outputs:{itemDidSelect:"itemDidSelect",rowItemsSelected:"rowItemsSelected"},decls:1,vars:5,consts:[[1,"w-full","h-full",3,"autoHeight","showSidebar","data","suppressRowClickSelection","columnDefs","itemDidSelect","selectionDidChange"]],template:function(t,i){1&t&&(e.TgZ(0,"table-view",0),e.NdJ("itemDidSelect",function(l){return i.onSelected(l)})("selectionDidChange",function(l){return i.selectionDidChange(l)}),e.qZA()),2&t&&e.Q6J("autoHeight",i.autoHeight)("showSidebar",!1)("data",i.writeOffStatuses)("suppressRowClickSelection",!1)("columnDefs",i.columnDefs)},dependencies:[f.x],encapsulation:2}),s})();function BY(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-write-off-status-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e._uU(1," > "),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","writeOffStatus_edit")("formControl",t.formControl)("writeOffStatus",t.writeOffStatus)}}const kY=function(){return{}};function YY(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-write-off-status-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("formName","writeOffStatus_create")("formControl",t.formControl)("writeOffStatus",e.DdM(3,kY))}}function XY(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-write-off-status-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(d.ref.close())}),e.qZA()}2&s&&e.Q6J("writeOffStatuses",o.data.items)}let e7=(()=>{class s extends G.fS{constructor(t){super(),this.store=t,this.store.loadWriteOffStatusesEffect()}ngOnInit(){this.to.source=this.getItems.bind(this),this.to.labelProp="name",this.to.valueProp="id"}getItems(t){return this.store.writeOffStatuses$.pipe((0,h.w)(i=>(0,D.of)(i)))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(Da))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"to","control","upModel","listTemplate","editTemplate","createTemplate","key","selectionChanged"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","formControl","writeOffStatus","send","close"],[1,"w-full","h-full","bg-white",3,"writeOffStatuses","itemDidSelect"]],template:function(t,i){if(1&t&&(e.TgZ(0,"ui-select-form",0),e.NdJ("selectionChanged",function(l){return i.formState[l.key]=l.value}),e.qZA(),e.YNc(1,BY,2,3,"ng-template",null,1,e.W1O),e.YNc(3,YY,1,4,"ng-template",null,2,e.W1O),e.YNc(5,XY,1,1,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("to",i.to)("control",i.formControl)("upModel",i.model)("listTemplate",d)("editTemplate",a)("createTemplate",l)("key",i.field.key)}},dependencies:[E.JJ,E.oH,H.$,Om,Lm],encapsulation:2}),s})();function t7(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-write-off-status-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("formName","writeOffStatus_edit")("writeOffStatus",t.value)}}const i7=function(){return{}};function s7(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-write-off-status-form",4),e.NdJ("send",function(a){const d=e.CHM(t).data;return d.onSave(a),e.KtG(d.ref.close())})("close",function(){const l=e.CHM(t).data;return e.KtG(l.ref.close())}),e.qZA()}2&s&&e.Q6J("formName","writeOffStatus_create")("writeOffStatus",e.DdM(2,i7))}function o7(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"ui-write-off-status-select-table-view",5),e.NdJ("itemDidSelect",function(a){const d=e.CHM(t).data;return d.itemDidSelect(a),e.KtG(null==d.ref?null:d.ref.close())}),e.qZA()}if(2&s){const t=o.data;e.Q6J("autoHeight",!0)("writeOffStatuses",t.items)}}let a7=(()=>{class s extends pe{constructor(){super()}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:7,consts:[[3,"data","readOnly","title","onSave","listTemplate","editTemplate","createTemplate"],["editTemplate",""],["createTemplate",""],["listTemplate",""],[1,"flex-grow","flex","flex-col",3,"formName","writeOffStatus","send","close"],[1,"w-full","h-full","bg-white",3,"autoHeight","writeOffStatuses","itemDidSelect"]],template:function(t,i){if(1&t&&(e._UZ(0,"web-ui-grid",0),e.YNc(1,t7,1,2,"ng-template",null,1,e.W1O),e.YNc(3,s7,1,3,"ng-template",null,2,e.W1O),e.YNc(5,o7,1,2,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(2),l=e.MAs(4),d=e.MAs(6);e.Q6J("data",i.data)("readOnly",i.to.readOnly)("title",i.to.title)("onSave",i.onSave)("listTemplate",d)("editTemplate",a)("createTemplate",l)}},dependencies:[he,Om,Lm],encapsulation:2}),s})(),r7=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[Da],imports:[P.ez,U.F,E.UX,J.o,ae.u,$.P,j.t,me,k.h,se.G,G.X0.forChild({types:[{name:"write-off-status-select",component:e7,wrappers:["form-field"]},{name:"write-off-status-grid",component:a7}]})]}),s})(),n7=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[r7]}),s})();var l7=M(17196);let c7=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[P.ez,E.u5,E.UX,qf,qm,pp,Wp,Xp,mh,xh,Ah,qh,hf,Ef,p_,W_,X_,Cg,Mg,Yg,vv,Gv,oC,wC,JC,dS,IS,BS,_b,Lb,i0,T0,j0,lT,FT,KT,hy,Ey,ew,pw,Nw,Rw,ax,xx,zx,uN,DN,kN,gA,$A,sF,yF,UF,dP,IP,BP,cI,TI,jI,lD,FD,KD,h1,E1,eM,SM,QM,XM,CW,RW,aE,xE,zE,uO,DO,kO,gL,$L,BL,_$,L$,i3,g3,$3,sG,_G,PG,ZG,fR,FR,KR,h2,E2,q2,pQ,WQ,XQ,CV,RV,aj,xj,zj,uU,wU,JU,d6,I6,B6,_J,LJ,iz,Tz,jz,lH,FH,KH,hq,Eq,e4,S4,Q4,X4,CK,RK,YK,vZ,GZ,oB,wB,$B,sk,_k,Ek,Bk,_5,P5,j5,lY,bY,VY,n7,l7.h,P.ez,E.u5,E.UX]}),s})()},86820:(De,we,M)=>{M.d(we,{X:()=>Y});var P=M(24280),E=M(60515),G=M(54004),U=M(18505),J=M(63900),ae=M(11365),b=M(70262),q=M(94650),y=M(73602),h=M(30144),R=M(71873),de=M(4523),e=M(56869),z=M(71767),O=M(39646);class X extends z.T_{constructor(w){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=w}Do(w){return this.businessProvider=w,this.serviceContext=w.serviceContext,this.loggingService=w.loggingService,this.execute(),this.response}}var Z=M(26177);class K extends X{constructor(w,T,x){super("ValidateVendorLocationExcelDataAction"),this.valid=!1,this.excelData=w,this.locations=T,this.vendors=x}preValidateAction(){const w=[];this.excelData.map((T,x)=>{w.push(T.name),this.validationContext.addRule(new Z.mi(`locationName_${x}_is_valid}`,"Location Is Not Valid","location.name",T.location,this.locations,!0)),this.validationContext.addRule(new Z.mi(`vendorName_${x}_is_valid}`,"Vendor Is Not Valid","vendor.name",T.vendor,this.vendors,!0))}),this.validationContext.addRule(new Z.cL("nameIsUnique","Name should be unique",w,!0))}performAction(){}finish(){super.finish();const w={};let T=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(x=>{x instanceof Z.mi?x.isValid||(w[x.columnName]?w[x.columnName].newNames.includes(x.newName)||w[x.columnName].newNames.push(x.newName):w[x.columnName]={options:x.possibleValueList.map(Q=>Q.name),newNames:[x.newName]}):x instanceof Z.cL&&(x.isValid||(T=x.conflicts))})):this.valid=!0,this.response=(0,O.of)({valid:this.valid,excelData:this.excelData,conflictNames:T,unknownNames:w})}}var W=M(28234);class D extends Z.wS{constructor(w,T,x,Q,H){super(w,T,x,Q,H,!0)}}class be extends Z.ul{constructor(w,T,x,Q=!1){super(w,T,Q),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=x,this.configureRules()}configureRules(){this.rules.push(new Z.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new D("name","The vendorlocation name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class g extends X{constructor(w){super("CreateVendorLocationAction"),this.input=w}preValidateAction(){this.validationContext.addRule(new be("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateVendorLocation({input:this.input}).pipe((0,J.w)(w=>(0,W.of)(w.data.created)))}}class xe extends X{constructor(w){super("UpdateVendorLocationsAction"),this.vendorLocations=w}preValidateAction(){this.validationContext.addRule(new Z.DJ("Input","Input should have values",this.vendorLocations,!0))}performAction(){this.response=this.businessProvider.data.userUpdateVendorLocations({input:{vendorLocations:this.vendorLocations}}).pipe((0,J.w)(w=>(0,O.of)(w.data.updated)))}}class ue extends X{constructor(w,T){super("UpdateVendorLocationAction"),this.vendorLocation=w,this.vendorLocationId=T}preValidateAction(){this.validationContext.addRule(new Z.DJ("Input","Input should have values",this.vendorLocation,!0)).addRule(new Z.xF("Id","Id should be a CUID and not null",this.vendorLocationId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateVendorLocation({vendorLocationId:this.vendorLocationId,input:this.vendorLocation}).pipe((0,J.w)(w=>(0,O.of)(w.data.updated)))}}let Ce=(()=>{class A extends z.nH{constructor(T,x,Q){super("NotificationService.VendorLocationBusinessProviderService",T,Q),this.data=x}createVendorLocation(T){const x=new g(T);return x.Do(this),x.response}updateVendorLocation(T,x){const Q=new ue(T,x);return Q.Do(this),Q.response}importVendorLocations(T){const x=new xe(T);return x.Do(this),x.response}validateVendorLocationExcelData(T,x,Q){const H=new K(T,x,Q);return H.Do(this),H.response}}return A.\u0275fac=function(T){return new(T||A)(q.LFG(e.ed),q.LFG(y.q),q.LFG(z.oI))},A.\u0275prov=q.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"}),A})(),ye=(()=>{class A extends z.nH{constructor(T,x,Q){super("VendorLocationService",Q,T),this.businessProvider=x}createVendorLocation(T){const x=Object.fromEntries(Object.entries(T).filter(([Q,H])=>null!==H));return this.businessProvider.createVendorLocation(x)}updateVendorLocation(T,x){return this.businessProvider.updateVendorLocation(T,x)}importVendorLocations(T){return this.businessProvider.importVendorLocations(T)}validateVendorLocationExcelData(T,x,Q){return this.businessProvider.validateVendorLocationExcelData(T,x,Q)}}return A.\u0275fac=function(T){return new(T||A)(q.LFG(Ce,8),q.LFG(Ce),q.LFG(e.ed))},A.\u0275prov=q.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"}),A})(),Y=(()=>{class A extends P.m1{constructor(T,x,Q,H,te,ge){if(super({loading:!1,vendorLocations:[],done:!1,searchQuery:"",formName:void 0,locationId:void 0,vendorId:void 0,paging:{limit:1e4,skip:0}}),this.data=T,this.router=x,this.route=Q,this.toast=H,this.formService=te,this.vendorLocationService=ge,this.errors$=this.select(S=>S.errors),this.loading$=this.select(S=>S.loading),this.done$=this.select(S=>S.done),this.item$=this.select(S=>S.item),this.vendorLocations$=this.select(S=>S.vendorLocations),this.locations$=this.select(S=>S.locations||[]),this.vendors$=this.select(S=>S.vendors||[]),this.locationId$=this.select(S=>S.locationId),this.vendorId$=this.select(S=>S.vendorId),this.paging$=this.select(S=>S.paging),this.searchQuery$=this.select(S=>S.searchQuery),this.formName$=this.select(S=>S.formName),this.actionResult$=this.select(this.item$,this.done$,(S,F)=>({item:S,done:F}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.vendorLocations$,this.locations$,this.vendors$,(S,F,N,L,ie,re,$)=>({errors:S,loading:F,item:N,formName:L,vendorLocations:ie,locations:re,vendors:$}),{debounce:!0}),this.input$=this.select(this.paging$,this.locationId$,this.vendorId$,this.searchQuery$,(S,F,N,L)=>({limit:S.limit,skip:S.skip,name:L,locationId:F,vendorId:N,total:S.total})),this.setFormName=this.updater((S,F)=>Object.assign(Object.assign({},S),{formName:F})),this.setLocationId=this.updater((S,F)=>Object.assign(Object.assign({},S),{locationId:F})),this.setVendorId=this.updater((S,F)=>Object.assign(Object.assign({},S),{vendorId:F})),this.filterLocations=S=>this.data.userSelectLocations({input:{name:S}}).pipe((0,P._b)(F=>{let N=F.data.items;return this.patchState({locations:N}),N},F=>this.patchState({errors:F.graphQLErrors?F.graphQLErrors:F})),(0,G.U)(F=>F.data.items)),this.filterVendors=S=>this.data.userSelectVendors({input:{name:S}}).pipe((0,P._b)(F=>{let N=F.data.items;return this.patchState({vendors:N}),N},F=>this.patchState({errors:F.graphQLErrors?F.graphQLErrors:F})),(0,G.U)(F=>F.data.items)),this.addLocation=this.updater((S,F)=>Object.assign(Object.assign({},S),{locations:S.locations.concat(F)})),this.addVendor=this.updater((S,F)=>Object.assign(Object.assign({},S),{vendors:S.vendors.concat(F)})),this.setItem=this.updater((S,F)=>Object.assign(Object.assign({},S),{item:F})),this.addNewVendorLocation=this.updater((S,F)=>Object.assign(Object.assign({},S),{vendorLocations:[...S.vendorLocations,F]})),this.updateVendorLocation=this.updater((S,F)=>Object.assign(Object.assign({},S),{vendorLocations:S.vendorLocations.map(N=>N.id===F.id?F:N)})),this.addVendorLocations=this.updater((S,F)=>Object.assign(Object.assign({},S),{vendorLocations:S.vendorLocations.concat(F)})),this.updateVendorLocations=this.updater((S,F)=>Object.assign(Object.assign({},S),{vendorLocations:S.vendorLocations.map(N=>F.find(ie=>ie.id===N.id)||N)})),this.setSearchQuery=this.updater((S,F)=>Object.assign(Object.assign({},S),{searchQuery:F})),this.loadVendorLocationEffect=this.effect(S=>S.pipe((0,U.b)(()=>this.patchState({loading:!0})),(0,J.w)(F=>this.data.userVendorLocation({vendorLocationId:F}).pipe((0,P._b)(N=>{this.patchState({item:N.data.item,errors:N.errors,loading:!1})},N=>this.patchState({loading:!1,errors:N.graphQLErrors?N.graphQLErrors:N})))))),this.loadVendorLocationsEffect=this.effect(S=>S.pipe((0,U.b)(()=>this.patchState({loading:!0})),(0,ae.M)(this.input$),(0,J.w)(([F,N])=>this.data.userVendorLocations({input:N}).pipe((0,P._b)(L=>this.patchState({paging:{limit:N.limit,skip:N.skip,total:L.data.count.total},vendorLocations:L.data.items,errors:L.errors,loading:!1}),L=>this.patchState({loading:!1,errors:L.graphQLErrors?L.graphQLErrors:L})))))),this.createVendorLocationEffect=this.effect(S=>S.pipe((0,U.b)(()=>this.patchState({loading:!0})),(0,J.w)(F=>this.vendorLocationService.createVendorLocation(Object.assign({},F)).pipe((0,P._b)(N=>{this.addNewVendorLocation(N),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:N,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},N=>{N.graphQLErrors?(this.toast.error(N.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:N.graphQLErrors?N.graphQLErrors:N})):(this.toast.error(N.Message),this.formService.setErrors(N.Data))}))))),this.updateVendorLocationEffect=this.effect(S=>S.pipe((0,U.b)(()=>this.patchState({loading:!0})),(0,ae.M)(this.item$),(0,J.w)(([F,N])=>this.vendorLocationService.updateVendorLocation(F,F.id).pipe((0,P._b)(L=>{this.updateVendorLocation(L),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:L,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},L=>{L.graphQLErrors?(this.toast.error(L.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:L.graphQLErrors?L.graphQLErrors:L})):(this.toast.error(L.Message),this.formService.setErrors(L.Data))}))))),this.deleteVendorLocationEffect=this.effect(S=>S.pipe((0,U.b)(()=>this.patchState({loading:!0})),(0,ae.M)(this.item$),(0,J.w)(([F,N])=>this.data.userDeleteVendorLocation({vendorLocationId:N.id}).pipe((0,P._b)(L=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:L.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},L=>{L.graphQLErrors?(this.toast.error(L.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:L.graphQLErrors?L.graphQLErrors:L})):(this.toast.error(L.Message),this.formService.setErrors(L.Data))}))))),this.importExcelEffect=this.effect(S=>S.pipe((0,U.b)(()=>this.patchState({loading:!0})),(0,J.w)(F=>this.vendorLocationService.importVendorLocations(F).pipe((0,b.K)(N=>{var L;return this.toast.error(null!==(L=N.Message)&&void 0!==L?L:"Failed to save",{duration:3e3}),E.E}),(0,U.b)(N=>{const L=JSON.parse(N.created),ie=JSON.parse(N.updated),re=JSON.parse(N.failed),$=L.length+ie.length+re.length;this.addVendorLocations(L),this.updateVendorLocations(ie),this.toast.success(`${L.length} created, ${ie.length} updated, ${re.length} failed of total ${$}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("vendorLocationId")?(this.route.snapshot.paramMap.get("vendorLocationId"),this.setFormName("vendorLocation_edit")):this.setFormName("vendorLocation_create"),this.route.snapshot.paramMap.has("locationId")){var _=this.route.snapshot.paramMap.get("locationId");this.setLocationId(_)}if(this.route.snapshot.paramMap.has("vendorId")){var f=this.route.snapshot.paramMap.get("vendorId");this.setVendorId(f)}}validateImportData(T){return this.vm$.pipe((0,J.w)(x=>this.vendorLocationService.validateVendorLocationExcelData(T,x.locations,x.vendors)))}}return A.\u0275fac=function(T){return new(T||A)(q.LFG(y.q),q.LFG(h.F0),q.LFG(h.gz),q.LFG(R.F),q.LFG(de.o),q.LFG(ye))},A.\u0275prov=q.Yz7({token:A,factory:A.\u0275fac}),A})()},40468:(De,we,M)=>{M.d(we,{m:()=>Y});var P=M(24280),E=M(60515),G=M(54004),U=M(18505),J=M(63900),ae=M(11365),b=M(70262),q=M(94650),y=M(73602),h=M(30144),R=M(71873),de=M(4523),e=M(56869),z=M(71767),O=M(39646);class X extends z.T_{constructor(w){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=w}Do(w){return this.businessProvider=w,this.serviceContext=w.serviceContext,this.loggingService=w.loggingService,this.execute(),this.response}}var Z=M(26177);class K extends X{constructor(w,T){super("ValidateVendorExcelDataAction"),this.valid=!1,this.excelData=w,this.vendorTypes=T}preValidateAction(){const w=[];this.excelData.map((T,x)=>{w.push(T.name),this.validationContext.addRule(new Z.mi(`vendorTypeName_${x}_is_valid}`,"Vendor Type Is Not Valid","vendorType.name",T.vendorType,this.vendorTypes,!0))}),this.validationContext.addRule(new Z.cL("nameIsUnique","Name should be unique",w,!0))}performAction(){}finish(){super.finish();const w={};let T=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(x=>{x instanceof Z.mi?x.isValid||(w[x.columnName]?w[x.columnName].newNames.includes(x.newName)||w[x.columnName].newNames.push(x.newName):w[x.columnName]={options:x.possibleValueList.map(Q=>Q.name),newNames:[x.newName]}):x instanceof Z.cL&&(x.isValid||(T=x.conflicts))})):this.valid=!0,this.response=(0,O.of)({valid:this.valid,excelData:this.excelData,conflictNames:T,unknownNames:w})}}var W=M(28234);class D extends Z.wS{constructor(w,T,x,Q,H){super(w,T,x,Q,H,!0)}}class be extends Z.ul{constructor(w,T,x,Q=!1){super(w,T,Q),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=x,this.configureRules()}configureRules(){this.rules.push(new Z.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new D("name","The vendor name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class g extends X{constructor(w){super("CreateVendorAction"),this.input=w}preValidateAction(){this.validationContext.addRule(new be("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){console.log("performAction"),this.response=this.businessProvider.data.userCreateVendor({input:this.input}).pipe((0,J.w)(w=>(0,W.of)(w.data.created)))}}class xe extends X{constructor(w){super("UpdateVendorsAction"),this.vendors=w}preValidateAction(){this.validationContext.addRule(new Z.DJ("Input","Input should have values",this.vendors,!0))}performAction(){this.response=this.businessProvider.data.userUpdateVendors({input:{vendors:this.vendors}}).pipe((0,J.w)(w=>(0,O.of)(w.data.updated)))}}class ue extends X{constructor(w,T){super("UpdateVendorAction"),this.vendor=w,this.vendorId=T}preValidateAction(){this.validationContext.addRule(new Z.DJ("Input","Input should have values",this.vendor,!0)).addRule(new Z.xF("Id","Id should be a CUID and not null",this.vendorId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateVendor({vendorId:this.vendorId,input:this.vendor}).pipe((0,J.w)(w=>(0,O.of)(w.data.updated)))}}let Ce=(()=>{class A extends z.nH{constructor(T,x,Q){super("NotificationService.VendorBusinessProviderService",T,Q),this.data=x}createVendor(T){const x=new g(T);return x.Do(this),x.response}updateVendor(T,x){const Q=new ue(T,x);return Q.Do(this),Q.response}importVendors(T){const x=new xe(T);return x.Do(this),x.response}validateVendorExcelData(T,x){const Q=new K(T,x);return Q.Do(this),Q.response}}return A.\u0275fac=function(T){return new(T||A)(q.LFG(e.ed),q.LFG(y.q),q.LFG(z.oI))},A.\u0275prov=q.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"}),A})(),ye=(()=>{class A extends z.nH{constructor(T,x,Q){super("VendorService",Q,T),this.businessProvider=x}createVendor(T){const x=Object.fromEntries(Object.entries(T).filter(([Q,H])=>null!==H));return this.businessProvider.createVendor(x)}updateVendor(T,x){return this.businessProvider.updateVendor(T,x)}importVendors(T){return this.businessProvider.importVendors(T)}validateVendorExcelData(T,x){return this.businessProvider.validateVendorExcelData(T,x)}}return A.\u0275fac=function(T){return new(T||A)(q.LFG(Ce,8),q.LFG(Ce),q.LFG(e.ed))},A.\u0275prov=q.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"}),A})(),Y=(()=>{class A extends P.m1{constructor(T,x,Q,H,te,ge){if(super({loading:!1,vendors:[],done:!1,searchQuery:"",formName:void 0,vendorTypeId:void 0,paging:{limit:1e4,skip:0}}),this.data=T,this.router=x,this.route=Q,this.toast=H,this.formService=te,this.vendorService=ge,this.errors$=this.select(f=>f.errors),this.loading$=this.select(f=>f.loading),this.done$=this.select(f=>f.done),this.item$=this.select(f=>f.item),this.vendors$=this.select(f=>f.vendors),this.vendorTypes$=this.select(f=>f.vendorTypes||[]),this.vendorTypeId$=this.select(f=>f.vendorTypeId),this.paging$=this.select(f=>f.paging),this.searchQuery$=this.select(f=>f.searchQuery),this.formName$=this.select(f=>f.formName),this.actionResult$=this.select(this.item$,this.done$,(f,S)=>({item:f,done:S}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.vendors$,this.vendorTypes$,(f,S,F,N,L,ie)=>({errors:f,loading:S,item:F,formName:N,vendors:L,vendorTypes:ie}),{debounce:!0}),this.input$=this.select(this.paging$,this.vendorTypeId$,this.searchQuery$,(f,S,F)=>({limit:f.limit,skip:f.skip,name:F,vendorTypeId:S,total:f.total})),this.setFormName=this.updater((f,S)=>Object.assign(Object.assign({},f),{formName:S})),this.setVendorTypeId=this.updater((f,S)=>Object.assign(Object.assign({},f),{vendorTypeId:S})),this.filterVendorTypes=f=>this.data.userSelectVendorTypes({input:{name:f}}).pipe((0,P._b)(S=>{let F=S.data.items;return this.patchState({vendorTypes:F}),F},S=>this.patchState({errors:S.graphQLErrors?S.graphQLErrors:S})),(0,G.U)(S=>S.data.items)),this.addVendorType=this.updater((f,S)=>Object.assign(Object.assign({},f),{vendorTypes:f.vendorTypes.concat(S)})),this.setItem=this.updater((f,S)=>Object.assign(Object.assign({},f),{item:S})),this.addNewVendor=this.updater((f,S)=>Object.assign(Object.assign({},f),{vendors:[...f.vendors,S]})),this.updateVendor=this.updater((f,S)=>Object.assign(Object.assign({},f),{vendors:f.vendors.map(F=>F.id===S.id?S:F)})),this.addVendors=this.updater((f,S)=>Object.assign(Object.assign({},f),{vendors:f.vendors.concat(S)})),this.updateVendors=this.updater((f,S)=>Object.assign(Object.assign({},f),{vendors:f.vendors.map(F=>S.find(L=>L.id===F.id)||F)})),this.setSearchQuery=this.updater((f,S)=>Object.assign(Object.assign({},f),{searchQuery:S})),this.loadVendorEffect=this.effect(f=>f.pipe((0,U.b)(()=>this.patchState({loading:!0})),(0,J.w)(S=>this.data.userVendor({vendorId:S}).pipe((0,P._b)(F=>{console.log(F.data.item),this.patchState({item:F.data.item,errors:F.errors,loading:!1})},F=>this.patchState({loading:!1,errors:F.graphQLErrors?F.graphQLErrors:F})))))),this.loadVendorsEffect=this.effect(f=>f.pipe((0,U.b)(()=>this.patchState({loading:!0})),(0,ae.M)(this.input$),(0,J.w)(([S,F])=>this.data.userVendors({input:F}).pipe((0,P._b)(N=>this.patchState({paging:{limit:F.limit,skip:F.skip,total:N.data.count.total},vendors:N.data.items,errors:N.errors,loading:!1}),N=>this.patchState({loading:!1,errors:N.graphQLErrors?N.graphQLErrors:N})))))),this.createVendorEffect=this.effect(f=>f.pipe((0,U.b)(()=>this.patchState({loading:!0})),(0,J.w)(S=>this.vendorService.createVendor(Object.assign({},S)).pipe((0,P._b)(F=>{this.addNewVendor(F),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:F,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},F=>{F.graphQLErrors?(this.toast.error(F.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:F.graphQLErrors?F.graphQLErrors:F})):(this.toast.error(F.Message),this.formService.setErrors(F.Data))}))))),this.updateVendorEffect=this.effect(f=>f.pipe((0,U.b)(()=>this.patchState({loading:!0})),(0,ae.M)(this.item$),(0,J.w)(([S,F])=>this.vendorService.updateVendor(S,S.id).pipe((0,P._b)(N=>{this.updateVendor(N),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:N,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},N=>{N.graphQLErrors?(this.toast.error(N.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:N.graphQLErrors?N.graphQLErrors:N})):(this.toast.error(N.Message),this.formService.setErrors(N.Data))}))))),this.deleteVendorEffect=this.effect(f=>f.pipe((0,U.b)(()=>this.patchState({loading:!0})),(0,ae.M)(this.item$),(0,J.w)(([S,F])=>this.data.userDeleteVendor({vendorId:F.id}).pipe((0,P._b)(N=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:N.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},N=>{N.graphQLErrors?(this.toast.error(N.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:N.graphQLErrors?N.graphQLErrors:N})):(this.toast.error(N.Message),this.formService.setErrors(N.Data))}))))),this.importExcelEffect=this.effect(f=>f.pipe((0,U.b)(()=>this.patchState({loading:!0})),(0,J.w)(S=>this.vendorService.importVendors(S).pipe((0,b.K)(F=>{var N;return this.toast.error(null!==(N=F.Message)&&void 0!==N?N:"Failed to save",{duration:3e3}),E.E}),(0,U.b)(F=>{const N=JSON.parse(F.created),L=JSON.parse(F.updated),ie=JSON.parse(F.failed),re=N.length+L.length+ie.length;this.addVendors(N),this.updateVendors(L),this.toast.success(`${N.length} created, ${L.length} updated, ${ie.length} failed of total ${re}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("vendorId")?(this.route.snapshot.paramMap.get("vendorId"),this.setFormName("vendor_edit")):this.setFormName("vendor_create"),this.route.snapshot.paramMap.has("vendorTypeId")){var _=this.route.snapshot.paramMap.get("vendorTypeId");this.setVendorTypeId(_)}}validateImportData(T){return this.vm$.pipe((0,J.w)(x=>this.vendorService.validateVendorExcelData(T,x.vendorTypes)))}}return A.\u0275fac=function(T){return new(T||A)(q.LFG(y.q),q.LFG(h.F0),q.LFG(h.gz),q.LFG(R.F),q.LFG(de.o),q.LFG(ye))},A.\u0275prov=q.Yz7({token:A,factory:A.\u0275fac}),A})()},85252:(De,we,M)=>{M.d(we,{S:()=>ye});var P=M(24280),E=M(60515),G=M(18505),U=M(63900),J=M(11365),ae=M(70262),b=M(94650),q=M(73602),y=M(30144),h=M(71873),R=M(4523),de=M(56869),e=M(71767),z=M(39646);class O extends e.T_{constructor(A){super(),this.showRuleMessages=!0,this.hideRuleMessages=!1,this.actionName=A}Do(A){return this.businessProvider=A,this.serviceContext=A.serviceContext,this.loggingService=A.loggingService,this.execute(),this.response}}var X=M(26177);class Z extends O{constructor(A){super("ValidateVisitKindExcelDataAction"),this.valid=!1,this.excelData=A}preValidateAction(){const A=[];this.excelData.map((w,T)=>{A.push(w.name)}),this.validationContext.addRule(new X.cL("nameIsUnique","Name should be unique",A,!0))}performAction(){}finish(){super.finish();const A={};let w=[];this.validationContext.hasRuleViolations()?(this.valid=!1,this.validationContext.rules.map(T=>{T instanceof X.mi?T.isValid||(A[T.columnName]?A[T.columnName].newNames.includes(T.newName)||A[T.columnName].newNames.push(T.newName):A[T.columnName]={options:T.possibleValueList.map(x=>x.name),newNames:[T.newName]}):T instanceof X.cL&&(T.isValid||(w=T.conflicts))})):this.valid=!0,this.response=(0,z.of)({valid:this.valid,excelData:this.excelData,conflictNames:w,unknownNames:A})}}var K=M(28234);class W extends X.wS{constructor(A,w,T,x,Q){super(A,w,T,x,Q,!0)}}class D extends X.ul{constructor(A,w,T,x=!1){super(A,w,x),this.displayToUser=!0,this.doNotDisplayToUser=!1,this.target=T,this.configureRules()}configureRules(){this.rules.push(new X.DJ("NotificationIsNotNull","The form message cannot be null or undefined.",this.target,this.doNotDisplayToUser)),this.rules.push(new W("name","The visitkind name is not valid. Must be within 2 and 255 characters.",this.target.name,2,255))}}class be extends O{constructor(A){super("CreateVisitKindAction"),this.input=A}preValidateAction(){this.validationContext.addRule(new D("InputIsNotNull","The input information is not valid.",this.input,this.showRuleMessages))}performAction(){this.response=this.businessProvider.data.userCreateVisitKind({input:this.input}).pipe((0,U.w)(A=>(0,K.of)(A.data.created)))}}class g extends O{constructor(A){super("UpdateVisitKindsAction"),this.visitKinds=A}preValidateAction(){this.validationContext.addRule(new X.DJ("Input","Input should have values",this.visitKinds,!0))}performAction(){this.response=this.businessProvider.data.userUpdateVisitKinds({input:{visitKinds:this.visitKinds}}).pipe((0,U.w)(A=>(0,z.of)(A.data.updated)))}}class xe extends O{constructor(A,w){super("UpdateVisitKindAction"),this.visitKind=A,this.visitKindId=w}preValidateAction(){this.validationContext.addRule(new X.DJ("Input","Input should have values",this.visitKind,!0)).addRule(new X.xF("Id","Id should be a CUID and not null",this.visitKindId,!0))}performAction(){this.response=this.businessProvider.data.userUpdateVisitKind({visitKindId:this.visitKindId,input:this.visitKind}).pipe((0,U.w)(A=>(0,z.of)(A.data.updated)))}}let ue=(()=>{class Y extends e.nH{constructor(w,T,x){super("NotificationService.VisitKindBusinessProviderService",w,x),this.data=T}createVisitKind(w){const T=new be(w);return T.Do(this),T.response}updateVisitKind(w,T){const x=new xe(w,T);return x.Do(this),x.response}importVisitKinds(w){const T=new g(w);return T.Do(this),T.response}validateVisitKindExcelData(w){const T=new Z(w);return T.Do(this),T.response}}return Y.\u0275fac=function(w){return new(w||Y)(b.LFG(de.ed),b.LFG(q.q),b.LFG(e.oI))},Y.\u0275prov=b.Yz7({token:Y,factory:Y.\u0275fac,providedIn:"root"}),Y})(),Ce=(()=>{class Y extends e.nH{constructor(w,T,x){super("VisitKindService",x,w),this.businessProvider=T}createVisitKind(w){const T=Object.fromEntries(Object.entries(w).filter(([x,Q])=>null!==Q));return this.businessProvider.createVisitKind(T)}updateVisitKind(w,T){return this.businessProvider.updateVisitKind(w,T)}importVisitKinds(w){return this.businessProvider.importVisitKinds(w)}validateVisitKindExcelData(w){return this.businessProvider.validateVisitKindExcelData(w)}}return Y.\u0275fac=function(w){return new(w||Y)(b.LFG(ue,8),b.LFG(ue),b.LFG(de.ed))},Y.\u0275prov=b.Yz7({token:Y,factory:Y.\u0275fac,providedIn:"root"}),Y})(),ye=(()=>{class Y extends P.m1{constructor(w,T,x,Q,H,te){super({loading:!1,visitKinds:[],done:!1,searchQuery:"",formName:void 0,paging:{limit:1e4,skip:0}}),this.data=w,this.router=T,this.route=x,this.toast=Q,this.formService=H,this.visitKindService=te,this.errors$=this.select(C=>C.errors),this.loading$=this.select(C=>C.loading),this.done$=this.select(C=>C.done),this.item$=this.select(C=>C.item),this.visitKinds$=this.select(C=>C.visitKinds),this.paging$=this.select(C=>C.paging),this.searchQuery$=this.select(C=>C.searchQuery),this.formName$=this.select(C=>C.formName),this.actionResult$=this.select(this.item$,this.done$,(C,_)=>({item:C,done:_}),{debounce:!0}),this.vm$=this.select(this.errors$,this.loading$,this.item$,this.formName$,this.visitKinds$,(C,_,f,S,F)=>({errors:C,loading:_,item:f,formName:S,visitKinds:F}),{debounce:!0}),this.input$=this.select(this.paging$,this.searchQuery$,(C,_)=>({limit:C.limit,skip:C.skip,name:_,total:C.total})),this.setFormName=this.updater((C,_)=>Object.assign(Object.assign({},C),{formName:_})),this.setItem=this.updater((C,_)=>Object.assign(Object.assign({},C),{item:_})),this.addNewVisitKind=this.updater((C,_)=>Object.assign(Object.assign({},C),{visitKinds:[...C.visitKinds,_]})),this.updateVisitKind=this.updater((C,_)=>Object.assign(Object.assign({},C),{visitKinds:C.visitKinds.map(f=>f.id===_.id?_:f)})),this.addVisitKinds=this.updater((C,_)=>Object.assign(Object.assign({},C),{visitKinds:C.visitKinds.concat(_)})),this.updateVisitKinds=this.updater((C,_)=>Object.assign(Object.assign({},C),{visitKinds:C.visitKinds.map(f=>_.find(F=>F.id===f.id)||f)})),this.setSearchQuery=this.updater((C,_)=>Object.assign(Object.assign({},C),{searchQuery:_})),this.loadVisitKindEffect=this.effect(C=>C.pipe((0,G.b)(()=>this.patchState({loading:!0})),(0,U.w)(_=>this.data.userVisitKind({visitKindId:_}).pipe((0,P._b)(f=>{this.patchState({item:f.data.item,errors:f.errors,loading:!1})},f=>this.patchState({loading:!1,errors:f.graphQLErrors?f.graphQLErrors:f})))))),this.loadVisitKindsEffect=this.effect(C=>C.pipe((0,G.b)(()=>this.patchState({loading:!0})),(0,J.M)(this.input$),(0,U.w)(([_,f])=>this.data.userVisitKinds({input:f}).pipe((0,P._b)(S=>this.patchState({paging:{limit:f.limit,skip:f.skip,total:S.data.count.total},visitKinds:S.data.items,errors:S.errors,loading:!1}),S=>this.patchState({loading:!1,errors:S.graphQLErrors?S.graphQLErrors:S})))))),this.createVisitKindEffect=this.effect(C=>C.pipe((0,G.b)(()=>this.patchState({loading:!0})),(0,U.w)(_=>this.visitKindService.createVisitKind(Object.assign({},_)).pipe((0,P._b)(f=>{this.addNewVisitKind(f),this.toast.success("Created Successfully!"),setTimeout(()=>this.patchState({item:f,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},f=>{f.graphQLErrors?(this.toast.error(f.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:f.graphQLErrors?f.graphQLErrors:f})):(this.toast.error(f.Message),this.formService.setErrors(f.Data))}))))),this.updateVisitKindEffect=this.effect(C=>C.pipe((0,G.b)(()=>this.patchState({loading:!0})),(0,J.M)(this.item$),(0,U.w)(([_,f])=>this.visitKindService.updateVisitKind(_,_.id).pipe((0,P._b)(S=>{this.updateVisitKind(S),this.toast.success("Updated Successfully!"),setTimeout(()=>this.patchState({item:S,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},S=>{S.graphQLErrors?(this.toast.error(S.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:S.graphQLErrors?S.graphQLErrors:S})):(this.toast.error(S.Message),this.formService.setErrors(S.Data))}))))),this.deleteVisitKindEffect=this.effect(C=>C.pipe((0,G.b)(()=>this.patchState({loading:!0})),(0,J.M)(this.item$),(0,U.w)(([_,f])=>this.data.userDeleteVisitKind({visitKindId:f.id}).pipe((0,P._b)(S=>{this.toast.success("Deleted successfully!",{duration:3e3}),setTimeout(()=>this.patchState({item:S.data.deleted,loading:!1,done:!0}),300),setTimeout(()=>this.patchState({done:!1,item:null}),600)},S=>{S.graphQLErrors?(this.toast.error(S.graphQLErrors[0].message,{duration:3e3}),this.patchState({loading:!1,errors:S.graphQLErrors?S.graphQLErrors:S})):(this.toast.error(S.Message),this.formService.setErrors(S.Data))}))))),this.importExcelEffect=this.effect(C=>C.pipe((0,G.b)(()=>this.patchState({loading:!0})),(0,U.w)(_=>this.visitKindService.importVisitKinds(_).pipe((0,ae.K)(f=>{var S;return this.toast.error(null!==(S=f.Message)&&void 0!==S?S:"Failed to save",{duration:3e3}),E.E}),(0,G.b)(f=>{const S=JSON.parse(f.created),F=JSON.parse(f.updated),N=JSON.parse(f.failed),L=S.length+F.length+N.length;this.addVisitKinds(S),this.updateVisitKinds(F),this.toast.success(`${S.length} created, ${F.length} updated, ${N.length} failed of total ${L}`,{duration:3e3})}))))),this.route.snapshot.paramMap.has("visitKindId")?(this.route.snapshot.paramMap.get("visitKindId"),this.setFormName("visitKind_edit")):this.setFormName("visitKind_create")}validateImportData(w){return this.vm$.pipe((0,U.w)(T=>this.visitKindService.validateVisitKindExcelData(w)))}}return Y.\u0275fac=function(w){return new(w||Y)(b.LFG(q.q),b.LFG(y.F0),b.LFG(y.gz),b.LFG(h.F),b.LFG(R.o),b.LFG(Ce))},Y.\u0275prov=b.Yz7({token:Y,factory:Y.\u0275fac}),Y})()}}]);