"use strict";(self.webpackChunkprovider=self.webpackChunkprovider||[]).push([[592],{78858:(O,f,e)=>{e.d(f,{i:()=>n});var _=e(36895),v=e(46277),d=e(94650);let n=(()=>{class l{}return l.\u0275fac=function(S){return new(S||l)},l.\u0275mod=d.oAB({type:l}),l.\u0275inj=d.cJS({providers:[v.h],imports:[_.ez]}),l})()},46277:(O,f,e)=>{e.d(f,{h:()=>P});var _=e(24280),v=e(18505),d=e(63900),n=e(94650),l=e(4523),r=e(71873),S=e(73602),y=e(12282);let P=(()=>{class h extends _.m1{constructor(M,C,L,A){super({query:"",loading:!1,canGoNext:!1}),this.formService=M,this.toast=C,this.data=L,this.fuseConfigService=A,this.loading$=this.select(i=>i.loading),this.formlySetting$=this.select(i=>i.formlySetting),this.canGoNext$=this.select(i=>i.canGoNext,{debounce:!0}),this.vm$=this.select(this.loading$,this.canGoNext$,this.formlySetting$,(i,t,o)=>({loading:i,canGoNext:t,formlySetting:o})),this.loadFormlySettingsEffect=this.effect(i=>i.pipe((0,v.b)(()=>{this.patchState({loading:!0})}),(0,d.w)(()=>this.data.userSettings({input:{name:"formly_Page_Settings"}}).pipe((0,_._b)(t=>{var o,s;const a=null!==(s=null===(o=t.data)||void 0===o?void 0:o.items)&&void 0!==s?s:[];a.length>0&&this.patchState({loading:!1,formlySetting:{id:a[0].id,name:a[0].name,value:{selectLanguage:a[0].value?JSON.parse(a[0].value).language:"",selectDateFormat:a[0].value?JSON.parse(a[0].value).dateFormat:"",selectCurrency:a[0].value?JSON.parse(a[0].value).currency:"",timeFormat:a[0].value?JSON.parse(a[0].value).timeFormat:"",id:a[0].id}}})},()=>{this.patchState({loading:!1})}))))),this.createFormlySettingsEffect=this.effect(i=>i.pipe((0,v.b)(t=>{this.patchState({loading:!0})}),(0,d.w)(t=>{var o,s,a,u;const E={name:"formly_Page_Settings",value:JSON.stringify({language:null!==(o=t?.selectLanguage)&&void 0!==o?o:"en",currency:null!==(s=t?.selectCurrency)&&void 0!==s?s:"$",timeFormat:null!==(a=t?.timeFormat)&&void 0!==a?a:"12",dateFormat:null!==(u=t?.selectDateFomat)&&void 0!==u?u:"MM/DD/YYYY"})};return this.data.userCreateSetting({input:E}).pipe((0,_._b)(c=>{var m,g;const D=null===(m=c.data)||void 0===m?void 0:m.created,p=JSON.parse(null!==(g=D?.value)&&void 0!==g?g:"{}");this.fuseConfigService.setFormlyConfig(p.language,p.currency,p.dateFormat,p.timeFormat),this.toast.success("Successfully created PageSetting",{duration:3e3}),this.patchState({loading:!1,canGoNext:!0})},c=>{c.graphQLErrors?this.toast.error(c.message,{duration:3e3}):(this.toast.error(c.Message,{duration:3e3}),this.formService.setErrors(c.Data),this.patchState({loading:!1}))}))}))),this.updateFormlySettingsEffect=this.effect(i=>i.pipe((0,v.b)(t=>{this.patchState({loading:!0})}),(0,d.w)(t=>{var o,s;const a=JSON.stringify({language:t?.selectLanguage,currency:t?.selectCurrency,dateFormat:t?.selectDateFormat,timeFormat:t?.timeFormat});return console.log({updateData:a}),this.data.userUpdateSetting({settingId:null===(o=this.get().formlySetting)||void 0===o?void 0:o.id,input:{value:a,name:null===(s=this.get().formlySetting)||void 0===s?void 0:s.name}}).pipe((0,_._b)(u=>{var E,c,m;const g=JSON.parse(null!==(m=null===(c=null===(E=u.data)||void 0===E?void 0:E.updated)||void 0===c?void 0:c.value)&&void 0!==m?m:"{}");this.fuseConfigService.setFormlyConfig(g.language,g.currency,g.dateFormat,g.timeFormat),this.toast.success("Successfully updated pageSetting",{duration:3e3}),this.patchState({loading:!1,canGoNext:!0})},u=>{u.graphQLErrors?this.toast.error(u.message,{duration:3e3}):(this.toast.error(u.Message,{duration:3e3}),this.formService.setErrors(u.Data),this.patchState({loading:!1}))}))}))),this.patchState({formlySetting:{}})}}return h.\u0275fac=function(M){return new(M||h)(n.LFG(l.o),n.LFG(r.F),n.LFG(S.q),n.LFG(y.m))},h.\u0275prov=n.Yz7({token:h,factory:h.\u0275fac}),h})()},57267:(O,f,e)=>{e.d(f,{I:()=>l});var _=e(36895),v=e(30144),d=e(10265),n=e(94650);let l=(()=>{class r{}return r.\u0275fac=function(y){return new(y||r)},r.\u0275mod=n.oAB({type:r}),r.\u0275inj=n.cJS({imports:[_.ez,v.Bz,d.t]}),r})()}}]);